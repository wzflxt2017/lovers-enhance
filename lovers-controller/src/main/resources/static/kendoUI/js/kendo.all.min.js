(function(a,b){b("kendo.core",["jquery"],a)}(function(){var a={id:"core",name:"Core",category:"framework",description:"The core of the Kendo framework."};(function(ax,aG,v){var r=aG.kendo=aG.kendo||{cultures:{}},ac=ax.extend,aR=ax.each,c=ax.isArray,z=ax.proxy,aw=ax.noop,O=Math,U,j=aG.JSON||{},aI={},g=/%/,Q=/\{(\d+)(:[^\}]+)?\}/g,aL=/(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+)?/i,i=/^(\+|-?)\d+(\.?)\d*$/,ak="function",aJ="string",N="number",B="object",ah="null",X="boolean",ag="undefined",ap={},T={},x=[].slice;r.version="2017.1.223".replace(/^\s+|\s+$/g,"");function aH(){}aH.extend=function(aW){var aX=function(){},aY,aV=this,aT=aW&&aW.init?aW.init:function(){aV.apply(this,arguments)},aU;aX.prototype=aV.prototype;aU=aT.fn=aT.prototype=new aX();for(aY in aW){if(aW[aY]!=null&&aW[aY].constructor===Object){aU[aY]=ac(true,{},aX.prototype[aY],aW[aY])}else{aU[aY]=aW[aY]}}aU.constructor=aT;aT.extend=aV.extend;return aT};aH.prototype._initOptions=function(aT){this.options=aP({},this.options,aT)};var aA=r.isFunction=function(aT){return typeof aT==="function"};var y=function(){this._defaultPrevented=true};var au=function(){return this._defaultPrevented===true};var G=aH.extend({init:function(){this._events={}},bind:function(aZ,aX,aY){var a0=this,a1,aU=typeof aZ===aJ?[aZ]:aZ,aV,aW,a3,aT=typeof aX===ak,a2;if(aX===v){for(a1 in aZ){a0.bind(a1,aZ[a1])}return a0}for(a1=0,aV=aU.length;a1<aV;a1++){aZ=aU[a1];a3=aT?aX:aX[aZ];if(a3){if(aY){aW=a3;a3=function(){a0.unbind(aZ,a3);aW.apply(a0,arguments)};a3.original=aW}a2=a0._events[aZ]=a0._events[aZ]||[];a2.push(a3)}}return a0},one:function(aU,aT){return this.bind(aU,aT,true)},first:function(aX,aW){var aY=this,aZ,aT=typeof aX===aJ?[aX]:aX,aU,a1,aV=typeof aW===ak,a0;for(aZ=0,aU=aT.length;aZ<aU;aZ++){aX=aT[aZ];a1=aV?aW:aW[aX];if(a1){a0=aY._events[aX]=aY._events[aX]||[];a0.unshift(a1)}}return aY},trigger:function(aU,aY){var aX=this,aV=aX._events[aU],aT,aW;if(aV){aY=aY||{};aY.sender=aX;aY._defaultPrevented=false;aY.preventDefault=y;aY.isDefaultPrevented=au;aV=aV.slice();for(aT=0,aW=aV.length;aT<aW;aT++){aV[aT].call(aX,aY)}return aY._defaultPrevented===true}return false},unbind:function(aU,aW){var aX=this,aV=aX._events[aU],aT;if(aU===v){aX._events={}}else{if(aV){if(aW){for(aT=aV.length-1;aT>=0;aT--){if(aV[aT]===aW||aV[aT].original===aW){aV.splice(aT,1)}}}else{aX._events[aU]=[]}}}return aX}});function k(aT,aW){if(aW){return"'"+aT.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'"}else{var aV=aT.charAt(0),aU=aT.substring(1);if(aV==="="){return"+("+aU+")+"}else{if(aV===":"){return"+$kendoHtmlEncode("+aU+")+"}else{return";"+aT+";$kendoOutput+="}}}}var aO=/^\w+/,aC=/\$\{([^}]*)\}/g,o=/\\\}/g,L=/__CURLY__/g,f=/\\#/g,D=/__SHARP__/g,R=["","0","00","000","0000"];U={paramName:"data",useWithBlock:true,render:function(aV,aX){var aT,aW,aU="";for(aT=0,aW=aX.length;aT<aW;aT++){aU+=aV(aX[aT])}return aU},compile:function(a2,a3){var aU=ac({},this,a3),aX=aU.paramName,aV=aX.match(aO)[0],aZ=aU.useWithBlock,aT="var $kendoOutput, $kendoHtmlEncode = kendo.htmlEncode;",a0,aW,a1;if(aA(a2)){return a2}aT+=aZ?"with("+aX+"){":"";aT+="$kendoOutput=";aW=a2.replace(o,"__CURLY__").replace(aC,"#=$kendoHtmlEncode($1)#").replace(L,"}").replace(f,"__SHARP__").split("#");for(a1=0;a1<aW.length;a1++){aT+=k(aW[a1],a1%2===0)}aT+=aZ?";}":";";aT+="return $kendoOutput;";aT=aT.replace(D,"#");try{a0=new Function(aV,aT);a0._slotCount=Math.floor(aW.length/2);return a0}catch(aY){throw new Error(r.format("Invalid template:'{0}' Generated code:'{1}'",a2,aT))}}};function s(aU,aV,aT){aU=aU+"";aV=aV||2;aT=aV-aU.length;if(aT){return R[aV].substring(0,aT)+aU}return aU}(function(){var a0=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,aZ,aT,aX={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},aV,aW={}.toString;if(typeof Date.prototype.toJSON!==ak){Date.prototype.toJSON=function(){var a1=this;return isFinite(a1.valueOf())?s(a1.getUTCFullYear(),4)+"-"+s(a1.getUTCMonth()+1)+"-"+s(a1.getUTCDate())+"T"+s(a1.getUTCHours())+":"+s(a1.getUTCMinutes())+":"+s(a1.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}function aU(a1){a0.lastIndex=0;return a0.test(a1)?'"'+a1.replace(a0,function(a2){var a3=aX[a2];return typeof a3===aJ?a3:"\\u"+("0000"+a2.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a1+'"'}function aY(a9,a6){var a3,a2,ba,a1,a7=aZ,a5,a8=a6[a9],a4;if(a8&&typeof a8===B&&typeof a8.toJSON===ak){a8=a8.toJSON(a9)}if(typeof aV===ak){a8=aV.call(a6,a9,a8)}a4=typeof a8;if(a4===aJ){return aU(a8)}else{if(a4===N){return isFinite(a8)?String(a8):ah}else{if(a4===X||a4===ah){return String(a8)}else{if(a4===B){if(!a8){return ah}aZ+=aT;a5=[];if(aW.apply(a8)==="[object Array]"){a1=a8.length;for(a3=0;a3<a1;a3++){a5[a3]=aY(a3,a8)||ah}ba=a5.length===0?"[]":aZ?"[\n"+aZ+a5.join(",\n"+aZ)+"\n"+a7+"]":"["+a5.join(",")+"]";aZ=a7;return ba}if(aV&&typeof aV===B){a1=aV.length;for(a3=0;a3<a1;a3++){if(typeof aV[a3]===aJ){a2=aV[a3];ba=aY(a2,a8);if(ba){a5.push(aU(a2)+(aZ?": ":":")+ba)}}}}else{for(a2 in a8){if(Object.hasOwnProperty.call(a8,a2)){ba=aY(a2,a8);if(ba){a5.push(aU(a2)+(aZ?": ":":")+ba)}}}}ba=a5.length===0?"{}":aZ?"{\n"+aZ+a5.join(",\n"+aZ)+"\n"+a7+"}":"{"+a5.join(",")+"}";aZ=a7;return ba}}}}}if(typeof j.stringify!==ak){j.stringify=function(a4,a2,a3){var a1;aZ="";aT="";if(typeof a3===N){for(a1=0;a1<a3;a1+=1){aT+=" "}}else{if(typeof a3===aJ){aT=a3}}aV=a2;if(a2&&typeof a2!==ak&&(typeof a2!==B||typeof a2.length!==N)){throw new Error("JSON.stringify")}return aY("",{"":a4})}}}());(function(){var a5=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g,a4=/^(n|c|p|e)(\d*)$/i,aW=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,aZ=/\,/g,bb="",aV=".",a3=",",aU="#",a7="0",aT="??",a8="en-US",aY={}.toString;r.cultures["en-US"]={name:a8,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{name:"US Dollar",abbr:"USD",pattern:["($n)","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"$"}},calendars:{standard:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},AM:["AM","am","AM"],PM:["PM","pm","PM"],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",s:"yyyy'-'MM'-'ddTHH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},"/":"/",":":":",firstDay:0,twoDigitYearMax:2029}}};function aX(bc){if(bc){if(bc.numberFormat){return bc}if(typeof bc===aJ){var bd=r.cultures;return bd[bc]||bd[bc.split("-")[0]]||null}return null}return null}function a1(bc){if(bc){bc=aX(bc)}return bc||r.cultures.current}r.culture=function(be){var bd=r.cultures,bc;if(be!==v){bc=aX(be)||bd[a8];bc.calendar=bc.calendars.standard;bd.current=bc}else{return bd.current}};r.findCulture=aX;r.getCulture=a1;r.culture(a8);function a2(be,bg,bd){bd=a1(bd);var bf=bd.calendars.standard,bh=bf.days,bc=bf.months;bg=bf.patterns[bg]||bg;return bg.replace(a5,function(bk){var bl;var bi;var bj;if(bk==="d"){bi=be.getDate()}else{if(bk==="dd"){bi=s(be.getDate())}else{if(bk==="ddd"){bi=bh.namesAbbr[be.getDay()]}else{if(bk==="dddd"){bi=bh.names[be.getDay()]}else{if(bk==="M"){bi=be.getMonth()+1}else{if(bk==="MM"){bi=s(be.getMonth()+1)}else{if(bk==="MMM"){bi=bc.namesAbbr[be.getMonth()]}else{if(bk==="MMMM"){bi=bc.names[be.getMonth()]}else{if(bk==="yy"){bi=s(be.getFullYear()%100)}else{if(bk==="yyyy"){bi=s(be.getFullYear(),4)}else{if(bk==="h"){bi=be.getHours()%12||12}else{if(bk==="hh"){bi=s(be.getHours()%12||12)}else{if(bk==="H"){bi=be.getHours()}else{if(bk==="HH"){bi=s(be.getHours())}else{if(bk==="m"){bi=be.getMinutes()}else{if(bk==="mm"){bi=s(be.getMinutes())}else{if(bk==="s"){bi=be.getSeconds()}else{if(bk==="ss"){bi=s(be.getSeconds())}else{if(bk==="f"){bi=O.floor(be.getMilliseconds()/100)}else{if(bk==="ff"){bi=be.getMilliseconds();if(bi>99){bi=O.floor(bi/10)}bi=s(bi)}else{if(bk==="fff"){bi=s(be.getMilliseconds(),3)}else{if(bk==="tt"){bi=be.getHours()<12?bf.AM[0]:bf.PM[0]}else{if(bk==="zzz"){bl=be.getTimezoneOffset();bj=bl<0;bi=O.abs(bl/60).toString().split(".")[0];bl=O.abs(bl)-bi*60;bi=(bj?"+":"-")+s(bi);bi+=":"+s(bl)}else{if(bk==="zz"||bk==="z"){bi=be.getTimezoneOffset()/60;bj=bi<0;bi=O.abs(bi).toString().split(".")[0];bi=(bj?"+":"-")+(bk==="zz"?s(bi):bi)}}}}}}}}}}}}}}}}}}}}}}}}return bi!==v?bi:bk.slice(1,bk.length-1)})}function a0(bf,bC,bF){bF=a1(bF);var bD=bF.numberFormat,bi=bD[aV],bH=bD.decimals,bG=bD.pattern[0],bm=[],bA,bv,bc,bg,br,bB=bf<0,bE,bq,bo,bx,bz=bb,by=bb,bw,bl,bt,bJ,bu,bh,bK,bs,bp,bd,be,bj,bI,bn=-1,bk;if(bf===v){return bb}if(!isFinite(bf)){return bf}if(!bC){return bF.name.length?bf.toLocaleString():bf.toString()}br=a4.exec(bC);if(br){bC=br[1].toLowerCase();bv=bC==="c";bc=bC==="p";if(bv||bc){bD=bv?bD.currency:bD.percent;bi=bD[aV];bH=bD.decimals;bA=bD.symbol;bG=bD.pattern[bB?0:1]}bg=br[2];if(bg){bH=+bg}if(bC==="e"){return bg?bf.toExponential(bH):bf.toExponential()}if(bc){bf*=100}bf=a9(bf,bH);bB=bf<0;bf=bf.split(aV);bE=bf[0];bq=bf[1];if(bB){bE=bE.substring(1)}by=ba(bE,0,bE.length,bD);if(bq){by+=bi+bq}if(bC==="n"&&!bB){return by}bf=bb;for(bw=0,bl=bG.length;bw<bl;bw++){bt=bG.charAt(bw);if(bt==="n"){bf+=by}else{if(bt==="$"||bt==="%"){bf+=bA}else{bf+=bt}}}return bf}if(bB){bf=-bf}if(bC.indexOf("'")>-1||bC.indexOf('"')>-1||bC.indexOf("\\")>-1){bC=bC.replace(aW,function(bL){var bM=bL.charAt(0).replace("\\",""),bN=bL.slice(1).replace(bM,"");bm.push(bN);return aT})}bC=bC.split(";");if(bB&&bC[1]){bC=bC[1];bu=true}else{if(bf===0){bC=bC[2]||bC[0];if(bC.indexOf(aU)==-1&&bC.indexOf(a7)==-1){return bC}}else{bC=bC[0]}}be=bC.indexOf("%");bj=bC.indexOf("$");bc=be!=-1;bv=bj!=-1;if(bc){bf*=100}if(bv&&bC[bj-1]==="\\"){bC=bC.split("\\").join("");bv=false}if(bv||bc){bD=bv?bD.currency:bD.percent;bi=bD[aV];bH=bD.decimals;bA=bD.symbol}bJ=bC.indexOf(a3)>-1;if(bJ){bC=bC.replace(aZ,bb)}bh=bC.indexOf(aV);bl=bC.length;if(bh!=-1){bq=bf.toString().split("e");if(bq[1]){bq=a9(bf,Math.abs(bq[1]))}else{bq=bq[0]}bq=bq.split(aV)[1]||bb;bs=bC.lastIndexOf(a7)-bh;bK=bC.lastIndexOf(aU)-bh;bp=bs>-1;bd=bK>-1;bw=bq.length;if(!bp&&!bd){bC=bC.substring(0,bh)+bC.substring(bh+1);bl=bC.length;bh=-1;bw=0}if(bp&&bs>bK){bw=bs}else{if(bK>bs){if(bd&&bw>bK){bw=bK}else{if(bp&&bw<bs){bw=bs}}}}if(bw>-1){bf=a9(bf,bw)}}else{bf=a9(bf)}bK=bC.indexOf(aU);bI=bs=bC.indexOf(a7);if(bK==-1&&bs!=-1){bn=bs}else{if(bK!=-1&&bs==-1){bn=bK}else{bn=bK>bs?bs:bK}}bK=bC.lastIndexOf(aU);bs=bC.lastIndexOf(a7);if(bK==-1&&bs!=-1){bk=bs}else{if(bK!=-1&&bs==-1){bk=bK}else{bk=bK>bs?bK:bs}}if(bn==bl){bk=bn}if(bn!=-1){by=bf.toString().split(aV);bE=by[0];bq=by[1]||bb;bo=bE.length;bx=bq.length;if(bB&&bf*-1>=0){bB=false}bf=bC.substring(0,bn);if(bB&&!bu){bf+="-"}for(bw=bn;bw<bl;bw++){bt=bC.charAt(bw);if(bh==-1){if(bk-bw<bo){bf+=bE;break}}else{if(bs!=-1&&bs<bw){bz=bb}if(bh-bw<=bo&&bh-bw>-1){bf+=bE;bw=bh}if(bh===bw){bf+=(bq?bi:bb)+bq;bw+=bk-bh+1;continue}}if(bt===a7){bf+=bt;bz=bt}else{if(bt===aU){bf+=bz}}}if(bJ){bf=ba(bf,bn+(bB&&!bu?1:0),Math.max(bk,bo+bn),bD)}if(bk>=bn){bf+=bC.substring(bk+1)}if(bv||bc){by=bb;for(bw=0,bl=bf.length;bw<bl;bw++){bt=bf.charAt(bw);by+=bt==="$"||bt==="%"?bA:bt}bf=by}bl=bm.length;if(bl){for(bw=0;bw<bl;bw++){bf=bf.replace(aT,bm[bw])}}}return bf}var ba=function(be,bc,bf,bj){var bn=be.indexOf(bj[aV]);var bd=bj.groupSize.slice();var bo=bd.shift();var bh,bi;var bm,bg,bl;var bk;bf=bn!==-1?bn:bf+1;bh=be.substring(bc,bf);bi=bh.length;if(bi>=bo){bm=bi;bg=[];while(bm>-1){bl=bh.substring(bm-bo,bm);if(bl){bg.push(bl)}bm-=bo;bk=bd.shift();bo=bk!==v?bk:bo;if(bo===0){bg.push(bh.substring(0,bm));break}}bh=bg.reverse().join(bj[a3]);be=be.substring(0,bc)+bh+be.substring(bf)}return be};var a9=function(bd,bc){bc=bc||0;bd=bd.toString().split("e");bd=Math.round(+(bd[0]+"e"+(bd[1]?+bd[1]+bc:bc)));bd=bd.toString().split("e");bd=+(bd[0]+"e"+(bd[1]?+bd[1]-bc:-bc));return bd.toFixed(Math.min(bc,20))};var a6=function(be,bc,bd){if(bc){if(aY.call(be)==="[object Date]"){return a2(be,bc,bd)}else{if(typeof be===N){return a0(be,bc,bd)}}}return be!==v?be:""};r.format=function(bc){var bd=arguments;return bc.replace(Q,function(bf,be,bg){var bh=bd[parseInt(be,10)+1];return a6(bh,bg?bg.substring(1):"")})};r._extractFormat=function(bc){if(bc.slice(0,3)==="{0:"){bc=bc.slice(3,bc.length-1)}return bc};r._activeElement=function(){try{return document.activeElement}catch(bc){return document.documentElement.activeElement}};r._round=a9;r._outerWidth=function(bd,bc){return ax(bd).outerWidth(bc||false)||0};r._outerHeight=function(bd,bc){return ax(bd).outerHeight(bc||false)||0};r.toString=a6}());(function(){var a6=/\u00A0/g,a8=/[eE][\-+]?[0-9]+/,a7=/[+|\-]\d{1,2}/,bb=/[+|\-]\d{1,2}:?\d{2}/,aX=/^\/Date\((.*?)\)\/$/,a9=/[+-]\d*/,aT=[[],["G","g","F"],["D","d","y","m","T","t"]],ba=[["yyyy-MM-ddTHH:mm:ss.fffffffzzz","yyyy-MM-ddTHH:mm:ss.fffffff","yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:ss.fff","ddd MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mmzzz","yyyy-MM-ddTHH:mmzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-dd HH:mm:ss","yyyy/MM/dd HH:mm:ss"],["yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm","yyyy/MM/dd HH:mm"],["yyyy/MM/dd","yyyy-MM-dd","HH:mm:ss","HH:mm"]],aZ={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},a0={}.toString;function aY(bd,be,bc){return !(bd>=be&&bd<=bc)}function a2(bc){return bc.charAt(0)}function a1(bc){return ax.map(bc,a2)}function a3(bd,bc){if(!bc&&bd.getHours()===23){bd.setHours(bd.getHours()+2)}}function a5(be){var bc=0,bd=be.length,bf=[];for(;bc<bd;bc++){bf[bc]=(be[bc]+"").toLowerCase()}return bf}function aU(be){var bc={},bd;for(bd in be){bc[bd]=a5(be[bd])}return bc}function aV(bw,bB,bD){if(!bw){return null}var bv=function(bK){var bL=0;while(bB[bs]===bK){bL++;bs++}if(bL>0){bs-=1}return bL},bJ=function(bM){var bL=aZ[bM]||new RegExp("^\\d{1,"+bM+"}"),bK=bw.substr(bI,bM).match(bL);if(bK){bK=bK[0];bI+=bK.length;return parseInt(bK,10)}return null},bl=function(bQ,bO){var bN=0,bL=bQ.length,bK,bR,bM=0,bS=0,bP;for(;bN<bL;bN++){bK=bQ[bN];bR=bK.length;bP=bw.substr(bI,bR);if(bO){bP=bP.toLowerCase()}if(bP==bK&&bR>bM){bM=bR;bS=bN}}if(bM){bI+=bM;return bS+1}return null},by=function(){var bK=false;if(bw.charAt(bI)===bB[bs]){bI++;bK=true}return bK},br=bD.calendars.standard,bo=null,bH=null,bA=null,bC=null,bx=null,bp=null,bm=null,bs=0,bI=0,bz=false,bF=new Date(),bi=br.twoDigitYearMax||2029,bt=bF.getFullYear(),bn,bh,bf,bE,bq,be,bc,bu,bg,bG,bk,bd,bj;if(!bB){bB="d"}bE=br.patterns[bB];if(bE){bB=bE}bB=bB.split("");bf=bB.length;for(;bs<bf;bs++){bn=bB[bs];if(bz){if(bn==="'"){bz=false}else{by()}}else{if(bn==="d"){bh=bv("d");if(!br._lowerDays){br._lowerDays=aU(br.days)}if(bA!==null&&bh>2){continue}bA=bh<3?bJ(2):bl(br._lowerDays[bh==3?"namesAbbr":"names"],true);if(bA===null||aY(bA,1,31)){return null}}else{if(bn==="M"){bh=bv("M");if(!br._lowerMonths){br._lowerMonths=aU(br.months)}bH=bh<3?bJ(2):bl(br._lowerMonths[bh==3?"namesAbbr":"names"],true);if(bH===null||aY(bH,1,12)){return null}bH-=1}else{if(bn==="y"){bh=bv("y");bo=bJ(bh);if(bo===null){return null}if(bh==2){if(typeof bi==="string"){bi=bt+parseInt(bi,10)}bo=bt-bt%100+bo;if(bo>bi){bo-=100}}}else{if(bn==="h"){bv("h");bC=bJ(2);if(bC==12){bC=0}if(bC===null||aY(bC,0,11)){return null}}else{if(bn==="H"){bv("H");bC=bJ(2);if(bC===null||aY(bC,0,23)){return null}}else{if(bn==="m"){bv("m");bx=bJ(2);if(bx===null||aY(bx,0,59)){return null}}else{if(bn==="s"){bv("s");bp=bJ(2);if(bp===null||aY(bp,0,59)){return null}}else{if(bn==="f"){bh=bv("f");bj=bw.substr(bI,bh).match(aZ[3]);bm=bJ(bh);if(bm!==null){bm=parseFloat("0."+bj[0],10);bm=r._round(bm,3);bm*=1000}if(bm===null||aY(bm,0,999)){return null}}else{if(bn==="t"){bh=bv("t");bu=br.AM;bg=br.PM;if(bh===1){bu=a1(bu);bg=a1(bg)}bq=bl(bg);if(!bq&&!bl(bu)){return null}}else{if(bn==="z"){be=true;bh=bv("z");if(bw.substr(bI,1)==="Z"){by();continue}bc=bw.substr(bI,6).match(bh>2?bb:a7);if(!bc){return null}bc=bc[0].split(":");bG=bc[0];bk=bc[1];if(!bk&&bG.length>3){bI=bG.length-2;bk=bG.substring(bI);bG=bG.substring(0,bI)}bG=parseInt(bG,10);if(aY(bG,-12,13)){return null}if(bh>2){bk=parseInt(bk,10);if(isNaN(bk)||aY(bk,0,59)){return null}}}else{if(bn==="'"){bz=true;by()}else{if(!by()){return null}}}}}}}}}}}}}}bd=bC!==null||bx!==null||bp||null;if(bo===null&&bH===null&&bA===null&&bd){bo=bt;bH=bF.getMonth();bA=bF.getDate()}else{if(bo===null){bo=bt}if(bA===null){bA=1}}if(bq&&bC<12){bC+=12}if(be){if(bG){bC+=-bG}if(bk){bx+=-bk}bw=new Date(Date.UTC(bo,bH,bA,bC,bx,bp,bm))}else{bw=new Date(bo,bH,bA,bC,bx,bp,bm);a3(bw,bC)}if(bo<100){bw.setFullYear(bo)}if(bw.getDate()!==bA&&be===v){return null}return bw}function aW(bd){var bc=bd.substr(0,1)==="-"?-1:1;bd=bd.substring(1);bd=parseInt(bd.substr(0,2),10)*60+parseInt(bd.substring(2),10);return bc*bd}function a4(be){var bh=O.max(aT.length,ba.length);var bg=be.calendar.patterns;var bi,bf,bd;var bc=[];for(bd=0;bd<bh;bd++){bi=aT[bd];for(bf=0;bf<bi.length;bf++){bc.push(bg[bi[bf]])}bc=bc.concat(ba[bd])}return bc}r.parseDate=function(bi,bd,be){if(a0.call(bi)==="[object Date]"){return bi}var bc=0;var bg=null;var bh;var bf;if(bi&&bi.indexOf("/D")===0){bg=aX.exec(bi);if(bg){bg=bg[1];bf=a9.exec(bg.substring(1));bg=new Date(parseInt(bg,10));if(bf){bf=aW(bf[0]);bg=r.timezone.apply(bg,0);bg=r.timezone.convert(bg,0,-1*bf)}return bg}}be=r.getCulture(be);if(!bd){bd=a4(be)}bd=c(bd)?bd:[bd];bh=bd.length;for(;bc<bh;bc++){bg=aV(bi,bd[bc],be);if(bg){return bg}}return bg};r.parseInt=function(be,bd){var bc=r.parseFloat(be,bd);if(bc){bc=bc|0}return bc};r.parseFloat=function(bm,bh,bl){if(!bm&&bm!==0){return null}if(typeof bm===N){return bm}bm=bm.toString();bh=r.getCulture(bh);var bg=bh.numberFormat,bj=bg.percent,bk=bg.currency,be=bk.symbol,bd=bj.symbol,bf=bm.indexOf("-"),bi,bc;if(a8.test(bm)){bm=parseFloat(bm.replace(bg["."],"."));if(isNaN(bm)){bm=null}return bm}if(bf>0){return null}else{bf=bf>-1}if(bm.indexOf(be)>-1||bl&&bl.toLowerCase().indexOf("c")>-1){bg=bk;bi=bg.pattern[0].replace("$",be).split("n");if(bm.indexOf(bi[0])>-1&&bm.indexOf(bi[1])>-1){bm=bm.replace(bi[0],"").replace(bi[1],"");bf=true}}else{if(bm.indexOf(bd)>-1){bc=true;bg=bj;be=bd}}bm=bm.replace("-","").replace(be,"").replace(a6," ").split(bg[","].replace(a6," ")).join("").replace(bg["."],".");bm=parseFloat(bm);if(isNaN(bm)){bm=null}else{if(bf){bm*=-1}}if(bm&&bc){bm/=100}return bm}}());function A(aU){var aW=aU.css(r.support.transitions.css+"box-shadow")||aU.css("box-shadow"),aT=aW?aW.match(aL)||[0,0,0,0,0]:[0,0,0,0,0],aV=O.max(+aT[3],+(aT[4]||0));return{left:-aT[1]+aV,right:+aT[1]+aV,bottom:+aT[2]+aV}}function q(aX,a2){var aY=aI.browser,a3,a4=r._outerWidth,a0=r._outerHeight;if(!aX.parent().hasClass("k-animation-container")){var aU=aX[0].style.width,a1=aX[0].style.height,aW=g.test(aU),aZ=g.test(a1);a3=aW||aZ;if(!aW&&(!a2||a2&&aU)){aU=a4(aX)}if(!aZ&&(!a2||a2&&a1)){a1=a0(aX)}aX.wrap(ax("<div/>").addClass("k-animation-container").css({width:aU,height:a1}));if(a3){aX.css({width:"100%",height:"100%",boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"})}}else{var aT=aX.parent(".k-animation-container"),aV=aT[0].style;if(aT.is(":hidden")){aT.show()}a3=g.test(aV.width)||g.test(aV.height);if(!a3){aT.css({width:a4(aX),height:a0(aX),boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"})}}if(aY.msie&&O.floor(aY.version)<=7){aX.css({zoom:1});aX.children(".k-menu").width(aX.width())}return aX.parent()}function aP(aT){var aU=1,aV=arguments.length;for(aU=1;aU<aV;aU++){b(aT,arguments[aU])}return aT}function b(a1,aT){var aY=r.data.ObservableArray,aV=r.data.LazyObservableArray,a3=r.data.DataSource,aX=r.data.HierarchicalDataSource,a2,aW,aU,aZ,a0;for(a2 in aT){aW=aT[a2];aU=typeof aW;if(aU===B&&aW!==null){aZ=aW.constructor}else{aZ=null}if(aZ&&aZ!==Array&&aZ!==aY&&aZ!==aV&&aZ!==a3&&aZ!==aX&&aZ!==RegExp){if(aW instanceof Date){a1[a2]=new Date(aW.getTime())}else{if(aA(aW.clone)){a1[a2]=aW.clone()}else{a0=a1[a2];if(typeof a0===B){a1[a2]=a0||{}}else{a1[a2]={}}b(a1[a2],aW)}}}else{if(aU!==ag){a1[a2]=aW}}}return a1}function V(aT,aW,aU){for(var aV in aW){if(aW.hasOwnProperty(aV)&&aW[aV].test(aT)){return aV}}return aU!==v?aU:aT}function t(aT){return aT.replace(/([a-z][A-Z])/g,function(aU){return aU.charAt(0)+"-"+aU.charAt(1).toLowerCase()})}function ai(aT){return aT.replace(/\-(\w)/g,function(aV,aU){return aU.toUpperCase()})}function h(aV,aU){var aW={},aT;if(document.defaultView&&document.defaultView.getComputedStyle){aT=document.defaultView.getComputedStyle(aV,"");if(aU){ax.each(aU,function(aX,aY){aW[aY]=aT.getPropertyValue(aY)})}}else{aT=aV.currentStyle;if(aU){ax.each(aU,function(aX,aY){aW[aY]=aT[ai(aY)]})}}if(!r.size(aW)){aW=aT}return aW}function e(aT){if(aT&&aT.className&&typeof aT.className==="string"&&aT.className.indexOf("k-auto-scrollable")>-1){return true}var aU=h(aT,["overflow"]).overflow;return aU=="auto"||aU=="scroll"}function am(aW,aY){var aV=aI.browser.webkit;var aT=aI.browser.mozilla;var aX=aW instanceof ax?aW[0]:aW;var aU;if(!aW){return}aU=aI.isRtl(aW);if(aY!==v){if(aU&&aV){aX.scrollLeft=aX.scrollWidth-aX.clientWidth-aY}else{if(aU&&aT){aX.scrollLeft=-aY}else{aX.scrollLeft=aY}}}else{if(aU&&aV){return aX.scrollWidth-aX.clientWidth-aX.scrollLeft}else{return Math.abs(aX.scrollLeft)}}}(function(){aI._scrollbar=v;aI.scrollbar=function(a4){if(!isNaN(aI._scrollbar)&&!a4){return aI._scrollbar}else{var a5=document.createElement("div"),a3;a5.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block";a5.innerHTML="&nbsp;";document.body.appendChild(a5);aI._scrollbar=a3=a5.offsetWidth-a5.scrollWidth;document.body.removeChild(a5);return a3}};aI.isRtl=function(a3){return ax(a3).closest(".k-rtl").length>0};var a2=document.createElement("table");try{a2.innerHTML="<tr><td></td></tr>";aI.tbodyInnerHtml=true}catch(aY){aI.tbodyInnerHtml=false}aI.touch="ontouchstart" in aG;var aW=document.documentElement.style;var a0=aI.transitions=false,aZ=aI.transforms=false,aT="HTMLElement" in aG?HTMLElement.prototype:[];aI.hasHW3D="WebKitCSSMatrix" in aG&&"m11" in new aG.WebKitCSSMatrix()||"MozPerspective" in aW||"msPerspective" in aW;aI.cssFlexbox="flexWrap" in aW||"WebkitFlexWrap" in aW||"msFlexWrap" in aW;aR(["Moz","webkit","O","ms"],function(){var a5=this.toString(),a3=typeof a2.style[a5+"Transition"]===aJ;if(a3||typeof a2.style[a5+"Transform"]===aJ){var a4=a5.toLowerCase();aZ={css:a4!="ms"?"-"+a4+"-":"",prefix:a5,event:a4==="o"||a4==="webkit"?a4:""};if(a3){a0=aZ;a0.event=a0.event?a0.event+"TransitionEnd":"transitionend"}return false}});a2=null;aI.transforms=aZ;aI.transitions=a0;aI.devicePixelRatio=aG.devicePixelRatio===v?1:aG.devicePixelRatio;try{aI.screenWidth=aG.outerWidth||aG.screen?aG.screen.availWidth:aG.innerWidth;aI.screenHeight=aG.outerHeight||aG.screen?aG.screen.availHeight:aG.innerHeight}catch(aY){aI.screenWidth=aG.screen.availWidth;aI.screenHeight=aG.screen.availHeight}aI.detectOS=function(a3){var a6=false,bb,a8=[],ba=!/mobile safari/i.test(a3),a9={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.(\d+(\.\d+)?)/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},a7={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},a4={tablet:/playbook|ipad|fire/i},bc={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i};for(var a5 in a9){if(a9.hasOwnProperty(a5)){a8=a3.match(a9[a5]);if(a8){if(a5=="windows"&&"plugins" in navigator){return false}a6={};a6.device=a5;a6.tablet=V(a5,a4,false);a6.browser=V(a3,bc,"default");a6.name=V(a5,a7);a6[a6.name]=true;a6.majorVersion=a8[2];a6.minorVersion=a8[3].replace("_",".");bb=a6.minorVersion.replace(".","").substr(0,2);a6.flatVersion=a6.majorVersion+bb+new Array(3-(bb.length<3?bb.length:2)).join("0");a6.cordova=typeof aG.PhoneGap!==ag||typeof aG.cordova!==ag;a6.appMode=aG.navigator.standalone||/file|local|wmapp/.test(aG.location.protocol)||a6.cordova;if(a6.android&&(aI.devicePixelRatio<1.5&&a6.flatVersion<400||ba)&&(aI.screenWidth>800||aI.screenHeight>800)){a6.tablet=a5}break}}}return a6};var aU=aI.mobileOS=aI.detectOS(navigator.userAgent);aI.wpDevicePixelRatio=aU.wp?screen.width/320:0;aI.hasNativeScrolling=false;if(aU.ios||aU.android&&aU.majorVersion>2||aU.wp){aI.hasNativeScrolling=aU}aI.delayedClick=function(){if(aI.touch){if(aU.ios){return true}if(aU.android){if(!aI.browser.chrome){return true}if(aI.browser.version<32){return false}return !(ax("meta[name=viewport]").attr("content")||"").match(/user-scalable=no/i)}}return false};aI.mouseAndTouchPresent=aI.touch&&!(aI.mobileOS.ios||aI.mobileOS.android);aI.detectBrowser=function(a6){var a5=false,a4=[],a3={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(var a7 in a3){if(a3.hasOwnProperty(a7)){a4=a6.match(a3[a7]);if(a4){a5={};a5[a7]=true;a5[a4[1].toLowerCase().split(" ")[0].split("/")[0]]=true;a5.version=parseInt(document.documentMode||a4[2],10);break}}}return a5};aI.browser=aI.detectBrowser(navigator.userAgent);aI.detectClipboardAccess=function(){var a3={copy:document.queryCommandSupported?document.queryCommandSupported("copy"):false,cut:document.queryCommandSupported?document.queryCommandSupported("cut"):false,paste:document.queryCommandSupported?document.queryCommandSupported("paste"):false};if(aI.browser.chrome){a3.paste=false;if(aI.browser.version>=43){a3.copy=true;a3.cut=true}}return a3};aI.clipboard=aI.detectClipboardAccess();aI.zoomLevel=function(){try{var a3=aI.browser;var a4=0;var a6=document.documentElement;if(a3.msie&&a3.version==11&&a6.scrollHeight>a6.clientHeight&&!aI.touch){a4=aI.scrollbar()}return aI.touch?a6.clientWidth/aG.innerWidth:a3.msie&&a3.version>=10?((top||aG).document.documentElement.offsetWidth+a4)/(top||aG).innerWidth:1}catch(a5){return 1}};aI.cssBorderSpacing=typeof aW.borderSpacing!="undefined"&&!(aI.browser.msie&&aI.browser.version<8);(function(a6){var a4="",a5=ax(document.documentElement),a3=parseInt(a6.version,10);if(a6.msie){a4="ie"}else{if(a6.mozilla){a4="ff"}else{if(a6.safari){a4="safari"}else{if(a6.webkit){a4="webkit"}else{if(a6.opera){a4="opera"}else{if(a6.edge){a4="edge"}}}}}}if(a4){a4="k-"+a4+" k-"+a4+a3}if(aI.mobileOS){a4+=" k-mobile"}if(!aI.cssFlexbox){a4+=" k-no-flexbox"}a5.addClass(a4)}(aI.browser));aI.eventCapture=document.documentElement.addEventListener;var a1=document.createElement("input");aI.placeholder="placeholder" in a1;aI.propertyChangeEvent="onpropertychange" in a1;aI.input=function(){var a5=["number","date","time","month","week","datetime","datetime-local"];var a7=a5.length;var a8="test";var a4={};var a3=0;var a6;for(;a3<a7;a3++){a6=a5[a3];a1.setAttribute("type",a6);a1.value=a8;a4[a6.replace("-","")]=a1.type!=="text"&&a1.value!==a8}return a4}();a1.style.cssText="float:left;";aI.cssFloat=!!a1.style.cssFloat;a1=null;aI.stableSort=function(){var a3=513;var a4=[{index:0,field:"b"}];for(var a5=1;a5<a3;a5++){a4.push({index:a5,field:"a"})}a4.sort(function(a7,a6){return a7.field>a6.field?1:a7.field<a6.field?-1:0});return a4[0].index===1}();aI.matchesSelector=aT.webkitMatchesSelector||aT.mozMatchesSelector||aT.msMatchesSelector||aT.oMatchesSelector||aT.matchesSelector||aT.matches||function(a3){var a4=document.querySelectorAll?(this.parentNode||document).querySelectorAll(a3)||[]:ax(a3),a5=a4.length;while(a5--){if(a4[a5]==this){return true}}return false};aI.pushState=aG.history&&aG.history.pushState;var aX=document.documentMode;aI.hashChange="onhashchange" in aG&&!(aI.browser.msie&&(!aX||aX<=8));aI.customElements="registerElement" in aG.document;var aV=aI.browser.chrome;aI.msPointers=!aV&&aG.MSPointerEvent;aI.pointers=!aV&&aG.PointerEvent;aI.kineticScrollNeeded=aU&&(aI.touch||aI.msPointers||aI.pointers)}());function I(aV){var aT=0,aU;for(aU in aV){if(aV.hasOwnProperty(aU)&&aU!="toJSON"){aT++}}return aT}function aE(aW,aX,aV){if(!aX){aX="offset"}var aY=aW[aX]();var aT={top:aY.top,right:aY.right,bottom:aY.bottom,left:aY.left};if(aI.browser.msie&&(aI.pointers||aI.msPointers)&&!aV){var aU=aI.isRtl(aW)?1:-1;aT.top-=aG.pageYOffset+aU*document.documentElement.scrollTop;aT.left-=aG.pageXOffset+aU*document.documentElement.scrollLeft}return aT}var ae={left:{reverse:"right"},right:{reverse:"left"},down:{reverse:"up"},up:{reverse:"down"},top:{reverse:"bottom"},bottom:{reverse:"top"},"in":{reverse:"out"},out:{reverse:"in"}};function aF(aT){var aU={};aR(typeof aT==="string"?aT.split(" "):aT,function(aV){aU[aV]=this});return aU}function az(aT){return new r.effects.Element(aT)}var aq={};ax.extend(aq,{enabled:true,Element:function(aT){this.element=ax(aT)},promise:function(aU,aT){if(!aU.is(":visible")){aU.css({display:aU.data("olddisplay")||"block"}).css("display")}if(aT.hide){aU.data("olddisplay",aU.css("display")).hide()}if(aT.init){aT.init()}if(aT.completeCallback){aT.completeCallback(aU)}aU.dequeue()},disable:function(){this.enabled=false;this.promise=this.promiseShim},enable:function(){this.enabled=true;this.promise=this.animatedPromise}});aq.promiseShim=aq.promise;function Z(aV,aW,aU,aT){if(typeof aV===aJ){if(aA(aW)){aT=aW;aW=400;aU=false}if(aA(aU)){aT=aU;aU=false}if(typeof aW===X){aU=aW;aW=400}aV={effects:aV,duration:aW,reverse:aU,complete:aT}}return ac({effects:{},duration:400,reverse:false,init:aw,teardown:aw,hide:false},aV,{completeCallback:aV.complete,complete:aw})}function W(aY,aX,a0,aW,aV){var aU=0,aZ=aY.length,aT;for(;aU<aZ;aU++){aT=ax(aY[aU]);aT.queue(function(){aq.promise(aT,Z(aX,a0,aW,aV))})}return aY}function w(aV,aU,aT,aW){if(aU){aU=aU.split(" ");aR(aU,function(aX,aY){aV.toggleClass(aY,aW)})}return aV}if(!("kendoAnimate" in ax.fn)){ac(ax.fn,{kendoStop:function(aU,aT){return this.stop(aU,aT)},kendoAnimate:function(aV,aW,aU,aT){return W(this,aV,aW,aU,aT)},kendoAddClass:function(aU,aT){return r.toggleClass(this,aU,aT,true)},kendoRemoveClass:function(aU,aT){return r.toggleClass(this,aU,aT,false)},kendoToggleClass:function(aV,aU,aT){return r.toggleClass(this,aV,aU,aT)}})}var aa=/&/g,aN=/</g,aB=/"/g,C=/'/g,ad=/>/g;function K(aT){return(""+aT).replace(aa,"&amp;").replace(aN,"&lt;").replace(ad,"&gt;").replace(aB,"&quot;").replace(C,"&#39;")}var av=function(aT){return aT.target};if(aI.touch){av=function(aU){var aT="originalEvent" in aU?aU.originalEvent.changedTouches:"changedTouches" in aU?aU.changedTouches:null;return aT?document.elementFromPoint(aT[0].clientX,aT[0].clientY):aU.target};aR(["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap"],function(aT,aU){ax.fn[aU]=function(aV){return this.bind(aU,aV)}})}if(aI.touch){if(!aI.mobileOS){aI.mousedown="mousedown touchstart";aI.mouseup="mouseup touchend";aI.mousemove="mousemove touchmove";aI.mousecancel="mouseleave touchcancel";aI.click="click";aI.resize="resize"}else{aI.mousedown="touchstart";aI.mouseup="touchend";aI.mousemove="touchmove";aI.mousecancel="touchcancel";aI.click="touchend";aI.resize="orientationchange"}}else{if(aI.pointers){aI.mousemove="pointermove";aI.mousedown="pointerdown";aI.mouseup="pointerup";aI.mousecancel="pointercancel";aI.click="pointerup";aI.resize="orientationchange resize"}else{if(aI.msPointers){aI.mousemove="MSPointerMove";aI.mousedown="MSPointerDown";aI.mouseup="MSPointerUp";aI.mousecancel="MSPointerCancel";aI.click="MSPointerUp";aI.resize="orientationchange resize"}else{aI.mousemove="mousemove";aI.mousedown="mousedown";aI.mouseup="mouseup";aI.mousecancel="mouseleave";aI.click="click";aI.resize="resize"}}}var H=function(aV,aZ){var aU=aZ||"d",aW,aT,aY,a0,aX=1;for(aT=0,aY=aV.length;aT<aY;aT++){a0=aV[aT];if(a0!==""){aW=a0.indexOf("[");if(aW!==0){if(aW==-1){a0="."+a0}else{aX++;a0="."+a0.substring(0,aW)+" || {})"+a0.substring(aW)}}aX++;aU+=a0+(aT<aY-1?" || {})":")")}}return new Array(aX).join("(")+aU},af=/^([a-z]+:)?\/\//i;ac(r,{widgets:[],_widgetRegisteredCallbacks:[],ui:r.ui||{},fx:r.fx||az,effects:r.effects||aq,mobile:r.mobile||{},data:r.data||{},dataviz:r.dataviz||{},drawing:r.drawing||{},spreadsheet:{messages:{}},keys:{INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110},support:r.support||aI,animate:r.animate||W,ns:"",attr:function(aT){return"data-"+r.ns+aT},getShadows:A,wrap:q,deepExtend:aP,getComputedStyles:h,webComponents:r.webComponents||[],isScrollable:e,scrollLeft:am,size:I,toCamelCase:ai,toHyphens:t,getOffset:r.getOffset||aE,parseEffects:r.parseEffects||aF,toggleClass:r.toggleClass||w,directions:r.directions||ae,Observable:G,Class:aH,Template:U,template:z(U.compile,U),render:z(U.render,U),stringify:z(j.stringify,j),eventTarget:av,htmlEncode:K,isLocalUrl:function(aT){return aT&&!af.test(aT)},expr:function(aV,aT,aU){aV=aV||"";if(typeof aT==aJ){aU=aT;aT=false}aU=aU||"d";if(aV&&aV.charAt(0)!=="["){aV="."+aV}if(aT){aV=aV.replace(/"([^.]*)\.([^"]*)"/g,'"$1_$DOT$_$2"');aV=aV.replace(/'([^.]*)\.([^']*)'/g,"'$1_$DOT$_$2'");aV=H(aV.split("."),aU);aV=aV.replace(/_\$DOT\$_/g,".")}else{aV=aU+aV}return aV},getter:function(aV,aU){var aT=aV+aU;return ap[aT]=ap[aT]||new Function("d","return "+r.expr(aV,aU))},setter:function(aT){return T[aT]=T[aT]||new Function("d,value",r.expr(aT)+"=value")},accessor:function(aT){return{get:r.getter(aT),set:r.setter(aT)}},guid:function(){var aV="",aT,aU;for(aT=0;aT<32;aT++){aU=O.random()*16|0;if(aT==8||aT==12||aT==16||aT==20){aV+="-"}aV+=(aT==12?4:aT==16?aU&3|8:aU).toString(16)}return aV},roleSelector:function(aT){return aT.replace(/(\S+)/g,"["+r.attr("role")+"=$1],").slice(0,-1)},directiveSelector:function(aV){var aU=aV.split(" ");if(aU){for(var aT=0;aT<aU.length;aT++){if(aU[aT]!="view"){aU[aT]=aU[aT].replace(/(\w*)(view|bar|strip|over)$/,"$1-$2")}}}return aU.join(" ").replace(/(\S+)/g,"kendo-mobile-$1,").slice(0,-1)},triggeredByInput:function(aT){return/^(label|input|textarea|select)$/i.test(aT.target.tagName)},onWidgetRegistered:function(aV){for(var aU=0,aT=r.widgets.length;aU<aT;aU++){aV(r.widgets[aU])}r._widgetRegisteredCallbacks.push(aV)},logToConsole:function(aV,aU){var aT=aG.console;if(!r.suppressLog&&typeof aT!="undefined"&&aT.log){aT[aU||"log"](aV)}}});var l=G.extend({init:function(aU,aT){var aV=this;aV.element=r.jQuery(aU).handler(aV);aV.angular("init",aT);G.fn.init.call(aV);var aW=aT?aT.dataSource:null;if(aW){aT=ac({},aT,{dataSource:{}})}aT=aV.options=ac(true,{},aV.options,aT);if(aW){aT.dataSource=aW}if(!aV.element.attr(r.attr("role"))){aV.element.attr(r.attr("role"),(aT.name||"").toLowerCase())}aV.element.data("kendo"+aT.prefix+aT.name,aV);aV.bind(aV.events,aT)},events:[],options:{prefix:""},_hasBindingTarget:function(){return !!this.element[0].kendoBindingTarget},_tabindex:function(aW){aW=aW||this.wrapper;var aU=this.element,aT="tabindex",aV=aW.attr(aT)||aU.attr(aT);aU.removeAttr(aT);aW.attr(aT,!isNaN(aV)?aV:0)},setOptions:function(aT){this._setEvents(aT);ax.extend(this.options,aT)},_setEvents:function(aU){var aW=this,aT=0,aV=aW.events.length,aX;for(;aT<aV;aT++){aX=aW.events[aT];if(aW.options[aX]&&aU[aX]){aW.unbind(aX,aW.options[aX])}}aW.bind(aW.events,aU)},resize:function(aV){var aU=this.getSize(),aT=this._size;if(aV||(aU.width>0||aU.height>0)&&(!aT||aU.width!==aT.width||aU.height!==aT.height)){this._size=aU;this._resize(aU,aV);this.trigger("resize",aU)}},getSize:function(){return r.dimensions(this.element)},size:function(aT){if(!aT){return this.getSize()}else{this.setSize(aT)}},setSize:ax.noop,_resize:ax.noop,destroy:function(){var aT=this;aT.element.removeData("kendo"+aT.options.prefix+aT.options.name);aT.element.removeData("handler");aT.unbind()},_destroy:function(){this.destroy()},angular:function(){},_muteAngularRebind:function(aT){this._muteRebind=true;aT.call(this);this._muteRebind=false}});var d=l.extend({dataItems:function(){return this.dataSource.flatView()},_angularItems:function(aU){var aT=this;aT.angular(aU,function(){return{elements:aT.items(),data:ax.map(aT.dataItems(),function(aV){return{dataItem:aV}})}})}});r.dimensions=function(aT,aU){var aV=aT[0];if(aU){aT.css(aU)}return{width:aV.offsetWidth,height:aV.offsetHeight}};r.notify=aw;var M=/template$/i,E=/^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/,aj=/^\{(\d+)(:[^\}]+)?\}|^\[[A-Za-z_]*\]$/,an=/([A-Z])/g;function aQ(aT,aU){var aV;if(aU.indexOf("data")===0){aU=aU.substring(4);aU=aU.charAt(0).toLowerCase()+aU.substring(1)}aU=aU.replace(an,"-$1");aV=aT.getAttribute("data-"+r.ns+aU);if(aV===null){aV=v}else{if(aV==="null"){aV=null}else{if(aV==="true"){aV=true}else{if(aV==="false"){aV=false}else{if(i.test(aV)){aV=parseFloat(aV)}else{if(E.test(aV)&&!aj.test(aV)){aV=new Function("return ("+aV+")")()}}}}}}return aV}function ao(aV,aU){var aT={},aW,aX;for(aW in aU){aX=aQ(aV,aW);if(aX!==v){if(M.test(aW)){if(typeof aX==="string"){aX=r.template(ax("#"+aX).html())}else{aX=aV.getAttribute(aW)}}aT[aW]=aX}}return aT}r.initWidget=function(aZ,a7,a1){var a8,a2,a0,a5,aU,aY,a4,aT,aV,a3;if(!a1){a1=r.ui.roles}else{if(a1.roles){a1=a1.roles}}aZ=aZ.nodeType?aZ:aZ[0];aY=aZ.getAttribute("data-"+r.ns+"role");if(!aY){return}aV=aY.indexOf(".")===-1;if(aV){a0=a1[aY]}else{a0=r.getter(aY)(aG)}var aX=ax(aZ).data(),aW=a0?"kendo"+a0.fn.options.prefix+a0.fn.options.name:"";if(aV){a3=new RegExp("^kendo.*"+aY+"$","i")}else{a3=new RegExp("^"+aW+"$","i")}for(var a6 in aX){if(a6.match(a3)){if(a6===aW){a8=aX[a6]}else{return aX[a6]}}}if(!a0){return}aT=aQ(aZ,"dataSource");a7=ax.extend({},ao(aZ,a0.fn.options),a7);if(aT){if(typeof aT===aJ){a7.dataSource=r.getter(aT)(aG)}else{a7.dataSource=aT}}for(a5=0,aU=a0.fn.events.length;a5<aU;a5++){a2=a0.fn.events[a5];a4=aQ(aZ,a2);if(a4!==v){a7[a2]=r.getter(a4)(aG)}}if(!a8){a8=new a0(aZ,a7)}else{if(!ax.isEmptyObject(a7)){a8.setOptions(a7)}}return a8};r.rolesFromNamespaces=function(aW){var aU=[],aT,aV;if(!aW[0]){aW=[r.ui,r.dataviz.ui]}for(aT=0,aV=aW.length;aT<aV;aT++){aU[aT]=aW[aT].roles}return ac.apply(null,[{}].concat(aU.reverse()))};r.init=function(aT){var aU=r.rolesFromNamespaces(x.call(arguments,1));ax(aT).find("[data-"+r.ns+"role]").addBack().each(function(){r.initWidget(this,{},aU)})};r.destroy=function(aT){ax(aT).find("[data-"+r.ns+"role]").addBack().each(function(){var aV=ax(this).data();for(var aU in aV){if(aU.indexOf("kendo")===0&&typeof aV[aU].destroy===ak){aV[aU].destroy()}}})};function p(aU,aT){return ax.contains(aU,aT)?-1:1}function aK(){var aT=ax(this);return ax.inArray(aT.attr("data-"+r.ns+"role"),["slider","rangeslider"])>-1||aT.is(":visible")}r.resize=function(aT,aV){var aU=ax(aT).find("[data-"+r.ns+"role]").addBack().filter(aK);if(!aU.length){return}var aW=ax.makeArray(aU);aW.sort(p);ax.each(aW,function(){var aX=r.widgetInstance(ax(this));if(aX){aX.resize(aV)}})};r.parseOptions=ao;ac(r.ui,{Widget:l,DataBoundWidget:d,roles:{},progress:function(aU,aX){var a1=aU.find(".k-loading-mask"),aZ=r.support,aW=aZ.browser,aY,aT,aV,a0;if(aX){if(!a1.length){aY=aZ.isRtl(aU);aT=aY?"right":"left";a0=aU.scrollLeft();aV=aW.webkit?!aY?0:aU[0].scrollWidth-aU.width()-2*a0:0;a1=ax("<div class='k-loading-mask'><span class='k-loading-text'>"+r.ui.progress.messages.loading+"</span><div class='k-loading-image'/><div class='k-loading-color'/></div>").width("100%").height("100%").css("top",aU.scrollTop()).css(aT,Math.abs(a0)+aV).prependTo(aU)}}else{if(a1){a1.remove()}}},plugin:function(aZ,aX,aY){var aV=aZ.fn.options.name,aU;aX=aX||r.ui;aY=aY||"";aX[aV]=aZ;aX.roles[aV.toLowerCase()]=aZ;aU="getKendo"+aY+aV;aV="kendo"+aY+aV;var a0={name:aV,widget:aZ,prefix:aY||""};r.widgets.push(a0);for(var aW=0,aT=r._widgetRegisteredCallbacks.length;aW<aT;aW++){r._widgetRegisteredCallbacks[aW](a0)}ax.fn[aV]=function(a2){var a3=this,a1;if(typeof a2===aJ){a1=x.call(arguments,1);this.each(function(){var a5=ax.data(this,aV),a6,a4;if(!a5){throw new Error(r.format("Cannot call method '{0}' of {1} before it is initialized",a2,aV))}a6=a5[a2];if(typeof a6!==ak){throw new Error(r.format("Cannot find method '{0}' of {1}",a2,aV))}a4=a6.apply(a5,a1);if(a4!==v){a3=a4;return false}})}else{this.each(function(){return new aZ(this,a2)})}return a3};ax.fn[aV].widget=aZ;ax.fn[aU]=function(){return this.data(aV)}}});r.ui.progress.messages={loading:"Loading..."};var ay={bind:function(){return this},nullObject:true,options:{}};var at=l.extend({init:function(aU,aT){l.fn.init.call(this,aU,aT);this.element.autoApplyNS();this.wrapper=this.element;this.element.addClass("km-widget")},destroy:function(){l.fn.destroy.call(this);this.element.kendoDestroy()},options:{prefix:"Mobile"},events:[],view:function(){var aT=this.element.closest(r.roleSelector("view splitview modalview drawer"));return r.widgetInstance(aT,r.mobile.ui)||ay},viewHasNativeScrolling:function(){var aT=this.view();return aT&&aT.options.useNativeScrolling},container:function(){var aT=this.element.closest(r.roleSelector("view layout modalview drawer splitview"));return r.widgetInstance(aT.eq(0),r.mobile.ui)||ay}});ac(r.mobile,{init:function(aT){r.init(aT,r.mobile.ui,r.ui,r.dataviz.ui)},appLevelNativeScrolling:function(){return r.mobile.application&&r.mobile.application.options&&r.mobile.application.options.useNativeScrolling},roles:{},ui:{Widget:at,DataBoundWidget:d.extend(at.prototype),roles:{},plugin:function(aT){r.ui.plugin(aT,r.mobile.ui,"Mobile")}}});aP(r.dataviz,{init:function(aT){r.init(aT,r.dataviz.ui)},ui:{roles:{},themes:{},views:[],plugin:function(aT){r.ui.plugin(aT,r.dataviz.ui)}},roles:{}});r.touchScroller=function(aU,aT){if(!aT){aT={}}aT.useNative=true;return ax(aU).map(function(aV,aW){aW=ax(aW);if(aI.kineticScrollNeeded&&r.mobile.ui.Scroller&&!aW.data("kendoMobileScroller")){aW.kendoMobileScroller(aT);return aW.data("kendoMobileScroller")}else{return false}})[0]};r.preventDefault=function(aT){aT.preventDefault()};r.widgetInstance=function(aV,aY){var a0=aV.data(r.ns+"role"),aW=[],aU,aX;if(a0){if(a0==="content"){a0="scroller"}if(aY){if(aY[0]){for(aU=0,aX=aY.length;aU<aX;aU++){aW.push(aY[aU].roles[a0])}}else{aW.push(aY.roles[a0])}}else{aW=[r.ui.roles[a0],r.dataviz.ui.roles[a0],r.mobile.ui.roles[a0]]}if(a0.indexOf(".")>=0){aW=[r.getter(a0)(aG)]}for(aU=0,aX=aW.length;aU<aX;aU++){var aZ=aW[aU];if(aZ){var aT=aV.data("kendo"+aZ.fn.options.prefix+aZ.fn.options.name);if(aT){return aT}}}}};r.onResize=function(aU){var aT=aU;if(aI.mobileOS.android){aT=function(){setTimeout(aU,600)}}ax(aG).on(aI.resize,aT);return aT};r.unbindResize=function(aT){ax(aG).off(aI.resize,aT)};r.attrValue=function(aU,aT){return aU.data(r.ns+aT)};r.days={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6};function aM(aU,aT){var aV=aU.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(aV)?!aU.disabled:"a"===aV?aU.href||aT:aT)&&u(aU)}function u(aT){return ax.expr.filters.visible(aT)&&!ax(aT).parents().addBack().filter(function(){return ax.css(this,"visibility")==="hidden"}).length}ax.extend(ax.expr[":"],{kendoFocusable:function(aU){var aT=ax.attr(aU,"tabindex");return aM(aU,!isNaN(aT)&&aT>-1)}});var Y=["mousedown","mousemove","mouseenter","mouseleave","mouseover","mouseout","mouseup","click"];var n="label, input, [data-rel=external]";var al={setupMouseMute:function(){var aT=0,aW=Y.length,aU=document.documentElement;if(al.mouseTrap||!aI.eventCapture){return}al.mouseTrap=true;al.bustClick=false;al.captureMouse=false;var aV=function(aX){if(al.captureMouse){if(aX.type==="click"){if(al.bustClick&&!ax(aX.target).is(n)){aX.preventDefault();aX.stopPropagation()}}else{aX.stopPropagation()}}};for(;aT<aW;aT++){aU.addEventListener(Y[aT],aV,true)}},muteMouse:function(aT){al.captureMouse=true;if(aT.data.bustClick){al.bustClick=true}clearTimeout(al.mouseTrapTimeoutID)},unMuteMouse:function(){clearTimeout(al.mouseTrapTimeoutID);al.mouseTrapTimeoutID=setTimeout(function(){al.captureMouse=false;al.bustClick=false},400)}};var F={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"};if(aI.touch&&(aI.mobileOS.ios||aI.mobileOS.android)){F={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}}else{if(aI.pointers){F={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"}}else{if(aI.msPointers){F={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"}}}}if(aI.msPointers&&!("onmspointerenter" in aG)){ax.each({MSPointerEnter:"MSPointerOver",MSPointerLeave:"MSPointerOut"},function(aU,aT){ax.event.special[aU]={delegateType:aT,bindType:aT,handle:function(aX){var aV,aZ=this,aY=aX.relatedTarget,aW=aX.handleObj;if(!aY||aY!==aZ&&!ax.contains(aZ,aY)){aX.type=aW.origType;aV=aW.handler.apply(this,arguments);aX.type=aT}return aV}}})}var aD=function(aT){return F[aT]||aT},P=/([^ ]+)/g;r.applyEventMap=function(aT,aU){aT=aT.replace(P,aD);if(aU){aT=aT.replace(P,"$1."+aU)}return aT};var J=ax.fn.on;function m(aT,aU){return new m.fn.init(aT,aU)}ac(true,m,ax);m.fn=m.prototype=new ax();m.fn.constructor=m;m.fn.init=function(aT,aU){if(aU&&aU instanceof ax&&!(aU instanceof m)){aU=m(aU)}return ax.fn.init.call(this,aT,aU,S)};m.fn.init.prototype=m.fn;var S=m(document);ac(m.fn,{handler:function(aT){this.data("handler",aT);return this},autoApplyNS:function(aT){this.data("kendoNS",aT||r.guid());return this},on:function(){var aZ=this,aY=aZ.data("kendoNS");if(arguments.length===1){return J.call(aZ,arguments[0])}var aX=aZ,aV=x.call(arguments);if(typeof aV[aV.length-1]===ag){aV.pop()}var a0=aV[aV.length-1],aW=r.applyEventMap(aV[0],aY);if(aI.mouseAndTouchPresent&&aW.search(/mouse|click/)>-1&&this[0]!==document.documentElement){al.setupMouseMute();var aT=aV.length===2?null:aV[1],aU=aW.indexOf("click")>-1&&aW.indexOf("touchend")>-1;J.call(this,{touchstart:al.muteMouse,touchend:al.unMuteMouse},aT,{bustClick:aU})}if(typeof a0===aJ){aX=aZ.data("handler");a0=aX[a0];aV[aV.length-1]=function(a1){a0.call(aX,a1)}}aV[0]=aW;J.apply(aZ,aV);return aZ},kendoDestroy:function(aT){aT=aT||this.data("kendoNS");if(aT){this.off("."+aT)}return this}});r.jQuery=m;r.eventMap=F;r.timezone=function(){var aT={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};var a2={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6};function aX(ba,bb){var a7;var bc;var bd;var a8=bb[3];var a9=bb[4];var a6=bb[5];var a5=bb[8];if(!a5){bb[8]=a5={}}if(a5[ba]){return a5[ba]}if(!isNaN(a9)){a7=new Date(Date.UTC(ba,aT[a8],a9,a6[0],a6[1],a6[2],0))}else{if(a9.indexOf("last")===0){a7=new Date(Date.UTC(ba,aT[a8]+1,1,a6[0]-24,a6[1],a6[2],0));bc=a2[a9.substr(4,3)];bd=a7.getUTCDay();a7.setUTCDate(a7.getUTCDate()+bc-bd-(bc>bd?7:0))}else{if(a9.indexOf(">=")>=0){a7=new Date(Date.UTC(ba,aT[a8],a9.substr(5),a6[0],a6[1],a6[2],0));bc=a2[a9.substr(0,3)];bd=a7.getUTCDay();a7.setUTCDate(a7.getUTCDate()+bc-bd+(bc<bd?7:0))}}}return a5[ba]=a7}function a0(a6,bb,a5){bb=bb[a5];if(!bb){var a9=a5.split(":");var ba=0;if(a9.length>1){ba=a9[0]*60+Number(a9[1])}return[-1000000,"max","-","Jan",1,[0,0,0],ba,"-"]}var a7=new Date(a6).getUTCFullYear();bb=jQuery.grep(bb,function(bc){var be=bc[0];var bd=bc[1];return be<=a7&&(bd>=a7||be==a7&&bd=="only"||bd=="max")});bb.push(a6);bb.sort(function(bd,bc){if(typeof bd!="number"){bd=Number(aX(a7,bd))}if(typeof bc!="number"){bc=Number(aX(a7,bc))}return bd-bc});var a8=bb[jQuery.inArray(a6,bb)-1]||bb[bb.length-1];return isNaN(a8)?a8:null}function aY(a8,a7,ba){var a9=a7[ba];if(typeof a9==="string"){a9=a7[a9]}if(!a9){throw new Error('Timezone "'+ba+'" is either incorrect, or kendo.timezones.min.js is not included.')}for(var a5=a9.length-1;a5>=0;a5--){var bb=a9[a5][3];if(bb&&a8>bb){break}}var a6=a9[a5+1];if(!a6){throw new Error('Timezone "'+ba+'" not found on '+a8+".")}return a6}function aW(a7,a6,a9,a8){if(typeof a7!=N){a7=Date.UTC(a7.getFullYear(),a7.getMonth(),a7.getDate(),a7.getHours(),a7.getMinutes(),a7.getSeconds(),a7.getMilliseconds())}var a5=aY(a7,a6,a8);return{zone:a5,rule:a0(a7,a9,a5[1])}}function aU(a6,a7){if(a7=="Etc/UTC"||a7=="Etc/GMT"){return 0}var a9=aW(a6,this.zones,this.rules,a7);var a5=a9.zone;var a8=a9.rule;return r.parseFloat(a8?a5[0]-a8[6]:a5[0])}function a4(a6,a7){var ba=aW(a6,this.zones,this.rules,a7);var a5=ba.zone;var a9=ba.rule;var a8=a5[2];if(a8.indexOf("/")>=0){return a8.split("/")[a9&&+a9[6]?1:0]}else{if(a8.indexOf("%s")>=0){return a8.replace("%s",!a9||a9[7]=="-"?"":a9[7])}}return a8}function aZ(a7,a6,a5){if(typeof a6==aJ){a6=this.offset(a7,a6)}if(typeof a5==aJ){a5=this.offset(a7,a5)}var a8=a7.getTimezoneOffset();a7=new Date(a7.getTime()+(a6-a5)*60000);var a9=a7.getTimezoneOffset();return new Date(a7.getTime()+(a9-a8)*60000)}function a1(a5,a6){return this.convert(a5,a5.getTimezoneOffset(),a6)}function aV(a5,a6){return this.convert(a5,a6,a5.getTimezoneOffset())}function a3(a5){return this.apply(new Date(a5),"Etc/UTC")}return{zones:{},rules:{},offset:aU,convert:aZ,apply:a1,remove:aV,abbr:a4,toLocalDate:a3}}();r.date=function(){var aZ=60000,aT=86400000;function a3(bd,bc){if(bc===0&&bd.getHours()===23){bd.setHours(bd.getHours()+2);return true}return false}function a1(bf,bd,be){var bc=bf.getHours();be=be||1;bd=(bd-bf.getDay()+7*be)%7;bf.setDate(bf.getDate()+bd);a3(bf,bc)}function a7(be,bc,bd){be=new Date(be);a1(be,bc,bd);return be}function a8(bc){return new Date(bc.getFullYear(),bc.getMonth(),1)}function a0(bd){var be=new Date(bd.getFullYear(),bd.getMonth()+1,0),bf=a8(bd),bc=Math.abs(be.getTimezoneOffset()-bf.getTimezoneOffset());if(bc){be.setHours(bf.getHours()+bc/60)}return be}function aW(bd,bc){var be,bf;bd=new Date(bd.getFullYear(),bd.getMonth(),bd.getDate());a3(bd,0);be=bd.getFullYear();if(bc!==v){a1(bd,bc,-1);bd.setDate(bd.getDate()+4)}else{bd.setDate(bd.getDate()+(4-(bd.getDay()||7)))}a3(bd,0);bf=Math.floor((bd.getTime()-new Date(be,0,1,-6))/86400000);return 1+Math.floor(bf/7)}function a2(bc){bc=new Date(bc.getFullYear(),bc.getMonth(),bc.getDate(),0,0,0);a3(bc,0);return bc}function aU(bc){return Date.UTC(bc.getFullYear(),bc.getMonth(),bc.getDate(),bc.getHours(),bc.getMinutes(),bc.getSeconds(),bc.getMilliseconds())}function ba(bc){return bc.getTime()-a2(bc)}function a6(bf,be,bc){var bd=ba(be),bg=ba(bc),bh;if(!bf||bd==bg){return true}if(be>=bc){bc+=aT}bh=ba(bf);if(bd>bh){bh+=aT}if(bg<bd){bg+=aT}return bh>=bd&&bh<=bg}function a4(bf,be,bc){var bd=be.getTime(),bg=bc.getTime(),bh;if(bd>=bg){bg+=aT}bh=bf.getTime();return bh>=bd&&bh<=bg}function aX(bd,be){var bc=bd.getHours();bd=new Date(bd);a5(bd,be*aT);a3(bd,bc);return bd}function a5(bd,bc,be){var bf=bd.getTimezoneOffset();var bg;bd.setTime(bd.getTime()+bc);if(!be){bg=bd.getTimezoneOffset()-bf;bd.setTime(bd.getTime()+bg*aZ)}}function aY(bc,bd){bc=new Date(r.date.getDate(bc).getTime()+r.date.getMilliseconds(bd));a3(bc,bd.getHours());return bc}function a9(){return a2(new Date())}function bb(bc){return a2(bc).getTime()==a9().getTime()}function aV(bc){var bd=new Date(1980,1,1,0,0,0);if(bc){bd.setHours(bc.getHours(),bc.getMinutes(),bc.getSeconds(),bc.getMilliseconds())}return bd}return{adjustDST:a3,dayOfWeek:a7,setDayOfWeek:a1,getDate:a2,isInDateRange:a4,isInTimeRange:a6,isToday:bb,nextDay:function(bc){return aX(bc,1)},previousDay:function(bc){return aX(bc,-1)},toUtcTime:aU,MS_PER_DAY:aT,MS_PER_HOUR:60*aZ,MS_PER_MINUTE:aZ,setTime:a5,setHours:aY,addDays:aX,today:a9,toInvariantTime:aV,firstDayOfMonth:a8,lastDayOfMonth:a0,weekInYear:aW,getMilliseconds:ba}}();r.stripWhitespace=function(aU){if(document.createNodeIterator){var aV=document.createNodeIterator(aU,NodeFilter.SHOW_TEXT,function(aX){return aX.parentNode==aU?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},false);while(aV.nextNode()){if(aV.referenceNode&&!aV.referenceNode.textContent.trim()){aV.referenceNode.parentNode.removeChild(aV.referenceNode)}}}else{for(var aT=0;aT<aU.childNodes.length;aT++){var aW=aU.childNodes[aT];if(aW.nodeType==3&&!/\S/.test(aW.nodeValue)){aU.removeChild(aW);aT--}if(aW.nodeType==1){r.stripWhitespace(aW)}}}};var aS=aG.requestAnimationFrame||aG.webkitRequestAnimationFrame||aG.mozRequestAnimationFrame||aG.oRequestAnimationFrame||aG.msRequestAnimationFrame||function(aT){setTimeout(aT,1000/60)};r.animationFrame=function(aT){aS.call(aG,aT)};var ab=[];r.queueAnimation=function(aT){ab[ab.length]=aT;if(ab.length===1){r.runNextAnimation()}};r.runNextAnimation=function(){r.animationFrame(function(){if(ab[0]){ab.shift()();if(ab[0]){r.runNextAnimation()}}})};r.parseQueryStringParams=function(aU){var aY=aU.split("?")[1]||"",aW={},aX=aY.split(/&|=/),aV=aX.length,aT=0;for(;aT<aV;aT+=2){if(aX[aT]!==""){aW[decodeURIComponent(aX[aT])]=decodeURIComponent(aX[aT+1])}}return aW};r.elementUnderCursor=function(aT){if(typeof aT.x.client!="undefined"){return document.elementFromPoint(aT.x.client,aT.y.client)}};r.wheelDeltaY=function(aU){var aV=aU.originalEvent,aT=aV.wheelDeltaY,aW;if(aV.wheelDelta){if(aT===v||aT){aW=aV.wheelDelta}}else{if(aV.detail&&aV.axis===aV.VERTICAL_AXIS){aW=-aV.detail*10}}return aW};r.throttle=function(aW,aV){var aX;var aT=0;if(!aV||aV<=0){return aW}var aU=function(){var a1=this;var aZ=+new Date()-aT;var a0=arguments;function aY(){aW.apply(a1,a0);aT=+new Date()}if(!aT){return aY()}if(aX){clearTimeout(aX)}if(aZ>aV){aY()}else{aX=setTimeout(aY,aV-aZ)}};aU.cancel=function(){clearTimeout(aX)};return aU};r.caret=function(aX,aU,aW){var aT;var a1=aU!==v;if(aW===v){aW=aU}if(aX[0]){aX=aX[0]}if(a1&&aX.disabled){return}try{if(aX.selectionStart!==v){if(a1){aX.focus();aX.setSelectionRange(aU,aW)}else{aU=[aX.selectionStart,aX.selectionEnd]}}else{if(document.selection){if(ax(aX).is(":visible")){aX.focus()}aT=aX.createTextRange();if(a1){aT.collapse(true);aT.moveStart("character",aU);aT.moveEnd("character",aW-aU);aT.select()}else{var aV=aT.duplicate(),aZ,a0;aT.moveToBookmark(document.selection.createRange().getBookmark());aV.setEndPoint("EndToStart",aT);aZ=aV.text.length;a0=aZ+aT.text.length;aU=[aZ,a0]}}}}catch(aY){aU=[]}return aU};r.compileMobileDirective=function(aU,aV){var aT=aG.angular;aU.attr("data-"+r.ns+"role",aU[0].tagName.toLowerCase().replace("kendo-mobile-","").replace("-",""));aT.element(aU).injector().invoke(["$compile",function(aW){aW(aU)(aV);if(!/^\$(digest|apply)$/.test(aV.$$phase)){aV.$digest()}}]);return r.widgetInstance(aU,r.mobile.ui)};r.antiForgeryTokens=function(){var aU={},aT=ax("meta[name=csrf-token],meta[name=_csrf]").attr("content"),aV=ax("meta[name=csrf-param],meta[name=_csrf_header]").attr("content");ax("input[name^='__RequestVerificationToken']").each(function(){aU[this.name]=this.value});if(aV!==v&&aT!==v){aU[aV]=aT}return aU};r.cycleForm=function(aV){var aU=aV.find("input, .k-widget").first();var aW=aV.find("button, .k-button").last();function aT(aX){var aY=r.widgetInstance(aX);if(aY&&aY.focus){aY.focus()}else{aX.focus()}}aW.on("keydown",function(aX){if(aX.keyCode==r.keys.TAB&&!aX.shiftKey){aX.preventDefault();aT(aU)}});aU.on("keydown",function(aX){if(aX.keyCode==r.keys.TAB&&aX.shiftKey){aX.preventDefault();aT(aW)}})};(function(){function aV(aZ,a5,aY,a4){var a1=ax("<form>").attr({action:aY,method:"POST",target:a4});var a2=r.antiForgeryTokens();a2.fileName=a5;var a3=aZ.split(";base64,");a2.contentType=a3[0].replace("data:","");a2.base64=a3[1];for(var a0 in a2){if(a2.hasOwnProperty(a0)){ax("<input>").attr({value:a2[a0],name:a0,type:"hidden"}).appendTo(a1)}}a1.appendTo("body").submit().remove()}var aW=document.createElement("a");var aU="download" in aW&&!r.support.browser.edge;function aT(a0,a5){var a1=a0;if(typeof a0=="string"){var a2=a0.split(";base64,");var a4=a2[0];var aZ=atob(a2[1]);var a3=new Uint8Array(aZ.length);for(var aY=0;aY<aZ.length;aY++){a3[aY]=aZ.charCodeAt(aY)}a1=new Blob([a3.buffer],{type:a4})}navigator.msSaveBlob(a1,a5)}function aX(aY,a0){if(aG.Blob&&aY instanceof Blob){aY=URL.createObjectURL(aY)}aW.download=a0;aW.href=aY;var aZ=document.createEvent("MouseEvents");aZ.initMouseEvent("click",true,false,aG,0,0,0,0,0,false,false,false,false,0,null);aW.dispatchEvent(aZ);setTimeout(function(){URL.revokeObjectURL(aY)})}r.saveAs=function(aY){var aZ=aV;if(!aY.forceProxy){if(aU){aZ=aX}else{if(navigator.msSaveBlob){aZ=aT}}}aZ(aY.dataURI,aY.fileName,aY.proxyURL,aY.proxyTarget)}}());r.proxyModelSetters=function ar(aT){var aU={};Object.keys(aT||{}).forEach(function(aV){Object.defineProperty(aU,aV,{get:function(){return aT[aV]},set:function(aW){aT[aV]=aW;aT.dirty=true}})});return aU}}(jQuery,window));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.router",["kendo.core"],a)}(function(){var a={id:"router",name:"Router",category:"framework",description:"The Router class is responsible for tracking the application state and navigating between the application states.",depends:["core"],hidden:false};(function(f,g){var q=window.kendo,o="change",x="back",e="same",k=q.support,b=window.location,n=window.history,u=50,j=q.support.browser.msie,t=/^#*/,s=window.document;function i(A,y){if(!y){return A}if(A+"/"===y){A=y}var z=new RegExp("^"+y,"i");if(!z.test(A)){A=y+"/"+A}return b.protocol+"//"+(b.host+"/"+A).replace(/\/\/+/g,"/")}function w(y){return y?"#!":"#"}function l(z){var y=b.href;if(z==="#!"&&y.indexOf("#")>-1&&y.indexOf("#!")<0){return null}return y.split(z)[1]||""}function h(y,z){if(z.indexOf(y)===0){return z.substr(y.length).replace(/\/\//g,"/")}else{return z}}var p=q.Class.extend({back:function(){if(j){setTimeout(function(){n.back()})}else{n.back()}},forward:function(){if(j){setTimeout(function(){n.forward()})}else{n.forward()}},length:function(){return n.length},replaceLocation:function(y){b.replace(y)}});var m=p.extend({init:function(y){this.root=y},navigate:function(y){n.pushState({},s.title,i(y,this.root))},replace:function(y){n.replaceState({},s.title,i(y,this.root))},normalize:function(y){return h(this.root,y)},current:function(){var y=b.pathname;if(b.search){y+=b.search}return h(this.root,y)},change:function(y){f(window).bind("popstate.kendo",y)},stop:function(){f(window).unbind("popstate.kendo")},normalizeCurrent:function(z){var A,y=z.root,C=b.pathname,B=l(w(z.hashBang));if(y===C+"/"){A=y}if(y===C&&B){A=i(B.replace(t,""),y)}if(A){n.pushState({},s.title,A)}}});function r(y){return y.replace(/^(#)?/,"#")}function d(y){return y.replace(/^(#(!)?)?/,"#!")}var v=p.extend({init:function(y){this._id=q.guid();this.prefix=w(y);this.fix=y?d:r},navigate:function(y){b.hash=this.fix(y)},replace:function(y){this.replaceLocation(this.fix(y))},normalize:function(y){if(y.indexOf(this.prefix)<0){return y}else{return y.split(this.prefix)[1]}},change:function(y){if(k.hashChange){f(window).on("hashchange."+this._id,y)}else{this._interval=setInterval(y,u)}},stop:function(){f(window).off("hashchange."+this._id);clearInterval(this._interval)},current:function(){return l(this.prefix)},normalizeCurrent:function(z){var A=b.pathname,y=z.root;if(z.pushState&&y!==A){this.replaceLocation(y+this.prefix+h(y,A));return true}return false}});var c=q.Observable.extend({start:function(z){z=z||{};this.bind([o,x,e],z);if(this._started){return}this._started=true;z.root=z.root||"/";var y=this.createAdapter(z),A;if(y.normalizeCurrent(z)){return}A=y.current();f.extend(this,{adapter:y,root:z.root,historyLength:y.length(),current:A,locations:[A]});y.change(f.proxy(this,"_checkUrl"))},createAdapter:function(y){return k.pushState&&y.pushState?new m(y.root):new v(y.hashBang)},stop:function(){if(!this._started){return}this.adapter.stop();this.unbind(o);this._started=false},change:function(y){this.bind(o,y)},replace:function(z,y){this._navigate(z,y,function(A){A.replace(z);this.locations[this.locations.length-1]=this.current})},navigate:function(z,y){if(z==="#:back"){this.backCalled=true;this.adapter.back();return}this._navigate(z,y,function(A){A.navigate(z);this.locations.push(this.current)})},_navigate:function(B,z,A){var y=this.adapter;B=y.normalize(B);if(this.current===B||this.current===decodeURIComponent(B)){this.trigger(e);return}if(!z){if(this.trigger(o,{url:B,decode:false})){return}}this.current=B;A.call(this,y);this.historyLength=y.length()},_checkUrl:function(){var y=this.adapter,E=y.current(),D=y.length(),A=this.historyLength===D,z=E===this.locations[this.locations.length-2]&&A,C=this.backCalled,B=this.current;if(E===null||this.current===E||this.current===decodeURIComponent(E)){return true}this.historyLength=D;this.backCalled=false;this.current=E;if(z&&this.trigger("back",{url:B,to:E})){y.forward();this.current=B;return}if(this.trigger(o,{url:E,backButtonPressed:!C})){if(z){y.forward()}else{y.back();this.historyLength--}this.current=B;return}if(z){this.locations.pop()}else{this.locations.push(E)}}});q.History=c;q.History.HistoryAdapter=p;q.History.HashAdapter=v;q.History.PushStateAdapter=m;q.absoluteURL=i;q.history=new c()}(window.kendo.jQuery));(function(){var m=window.kendo,l=m.history,n=m.Observable,p="init",d="routeMissing",i="change",e="back",o="same",c=/\((.*?)\)/g,r=/(\(\?)?:\w+/g,j=/\*\w+/g,h=/[\-{}\[\]+?.,\\\^$|#\s]/g;function g(t,s){return s?t:"([^/]+)"}function f(t,s){return new RegExp("^"+t.replace(h,"\\$&").replace(c,"(?:$1)?").replace(r,g).replace(j,"(.*?)")+"$",s?"i":"")}function q(s){return s.replace(/(\?.*)|(#.*)/g,"")}var k=m.Class.extend({init:function(t,u,s){if(!(t instanceof RegExp)){t=f(t,s)}this.route=t;this._callback=u},callback:function(u,t,w){var x,s=0,v,y=m.parseQueryStringParams(u);y._back=t;u=q(u);x=this.route.exec(u).slice(1);v=x.length;if(w){for(;s<v;s++){if(typeof x[s]!=="undefined"){x[s]=decodeURIComponent(x[s])}}}x.push(y);this._callback.apply(null,x)},worksWith:function(t,s,u){if(this.route.test(q(t))){this.callback(t,s,u);return true}else{return false}}});var b=n.extend({init:function(s){if(!s){s={}}n.fn.init.call(this);this.routes=[];this.pushState=s.pushState;this.hashBang=s.hashBang;this.root=s.root;this.ignoreCase=s.ignoreCase!==false;this.bind([p,d,i,o],s)},destroy:function(){l.unbind(i,this._urlChangedProxy);l.unbind(o,this._sameProxy);l.unbind(e,this._backProxy);this.unbind()},start:function(){var w=this,v=function(){w._same()},u=function(x){w._back(x)},t=function(x){w._urlChanged(x)};l.start({same:v,change:t,back:u,pushState:w.pushState,hashBang:w.hashBang,root:w.root});var s={url:l.current||"/",preventDefault:$.noop};if(!w.trigger(p,s)){w._urlChanged(s)}this._urlChangedProxy=t;this._backProxy=u},route:function(s,t){this.routes.push(new k(s,t,this.ignoreCase))},navigate:function(t,s){m.history.navigate(t,s)},replace:function(t,s){m.history.replace(t,s)},_back:function(s){if(this.trigger(e,{url:s.url,to:s.to})){s.preventDefault()}},_same:function(){this.trigger(o)},_urlChanged:function(z){var w=z.url;var y=typeof z.decode==="undefined";var v=z.backButtonPressed;if(!w){w="/"}if(this.trigger(i,{url:z.url,params:m.parseQueryStringParams(z.url),backButtonPressed:v})){z.preventDefault();return}var s=0,t=this.routes,u,x=t.length;for(;s<x;s++){u=t[s];if(u.worksWith(w,v,y)){return}}if(this.trigger(d,{url:w,params:m.parseQueryStringParams(w),backButtonPressed:v})){z.preventDefault()}}});m.Router=b}());return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.data.odata",["kendo.core"],a)}(function(){var a={id:"data.odata",name:"OData",category:"framework",depends:["core"],hidden:true};(function(f,d){var j=window.kendo,i=f.extend,g={eq:"eq",neq:"ne",gt:"gt",gte:"ge",lt:"lt",lte:"le",contains:"substringof",doesnotcontain:"substringof",endswith:"endswith",startswith:"startswith",isnull:"eq",isnotnull:"ne",isempty:"eq",isnotempty:"ne"},h=i({},g,{contains:"contains"}),e={pageSize:f.noop,page:f.noop,filter:function(n,m,l){if(m){m=c(m,l);if(m){n.$filter=m}}},sort:function(n,l){var m=f.map(l,function(p){var o=p.field.replace(/\./g,"/");if(p.dir==="desc"){o+=" desc"}return o}).join(",");if(m){n.$orderby=m}},skip:function(m,l){if(l){m.$skip=l}},take:function(m,l){if(l){m.$top=l}}},b={read:{dataType:"jsonp"}};function c(m,l){var x=[],q=m.logic||"and",w,p,t,s,v,o,u,r,n=m.filters;for(w=0,p=n.length;w<p;w++){m=n[w];t=m.field;u=m.value;o=m.operator;if(m.filters){m=c(m,l)}else{r=m.ignoreCase;t=t.replace(/\./g,"/");m=g[o];if(l){m=h[o]}if(o==="isnull"||o==="isnotnull"){m=j.format("{0} {1} null",t,m)}else{if(o==="isempty"||o==="isnotempty"){m=j.format("{0} {1} ''",t,m)}else{if(m&&u!==d){s=f.type(u);if(s==="string"){v="'{1}'";u=u.replace(/'/g,"''");if(r===true){t="tolower("+t+")"}}else{if(s==="date"){if(l){v="{1:yyyy-MM-ddTHH:mm:ss+00:00}";u=j.timezone.apply(u,"Etc/UTC")}else{v="datetime'{1:yyyy-MM-ddTHH:mm:ss}'"}}else{v="{1}"}}if(m.length>3){if(m!=="substringof"){v="{0}({2},"+v+")"}else{v="{0}("+v+",{2})";if(o==="doesnotcontain"){if(l){v="{0}({2},'{1}') eq -1";m="indexof"}else{v+=" eq false"}}}}else{v="{2} {0} "+v}m=j.format(v,m,u,t)}}}}x.push(m)}m=x.join(" "+q+" ");if(x.length>1){m="("+m+")"}return m}function k(m){for(var l in m){if(l.indexOf("@odata")===0){delete m[l]}}}i(true,j.data,{schemas:{odata:{type:"json",data:function(l){return l.d.results||[l.d]},total:"d.__count"}},transports:{odata:{read:{cache:true,dataType:"jsonp",jsonp:"$callback"},update:{cache:true,dataType:"json",contentType:"application/json",type:"PUT"},create:{cache:true,dataType:"json",contentType:"application/json",type:"POST"},destroy:{cache:true,dataType:"json",type:"DELETE"},parameterMap:function(n,p,l){var r,q,o,m;n=n||{};p=p||"read";m=(this.options||b)[p];m=m?m.dataType:"json";if(p==="read"){r={$inlinecount:"allpages"};if(m!="json"){r.$format="json"}for(o in n){if(e[o]){e[o](r,n[o],l)}else{r[o]=n[o]}}}else{if(m!=="json"){throw new Error("Only json dataType can be used for "+p+" operation.")}if(p!=="destroy"){for(o in n){q=n[o];if(typeof q==="number"){n[o]=q+""}}r=j.stringify(n)}}return r}}}});i(true,j.data,{schemas:{"odata-v4":{type:"json",data:function(l){l=f.extend({},l);k(l);if(l.value){return l.value}return[l]},total:function(l){return l["@odata.count"]}}},transports:{"odata-v4":{read:{cache:true,dataType:"json"},update:{cache:true,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"PUT"},create:{cache:true,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"POST"},destroy:{cache:true,dataType:"json",type:"DELETE"},parameterMap:function(m,n){var l=j.data.transports.odata.parameterMap(m,n,true);if(n=="read"){l.$count=true;delete l.$inlinecount}return l}}}})}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.data.xml",["kendo.core"],a)}(function(){var a={id:"data.xml",name:"XML",category:"framework",depends:["core"],hidden:true};(function(e,d){var i=window.kendo,g=e.isArray,l=e.isPlainObject,c=e.map,k=e.each,h=e.extend,j=i.getter,b=i.Class;var f=b.extend({init:function(x){var s=this,u=x.total,r=x.model,p=x.parse,v=x.errors,w=x.serialize,q=x.data;if(r){if(l(r)){var o=x.modelBase||i.data.Model;if(r.fields){k(r.fields,function(z,y){if(l(y)&&y.field){if(!e.isFunction(y.field)){y=h(y,{field:s.getter(y.field)})}}else{y={field:s.getter(y)}}r.fields[z]=y})}var n=r.id;if(n){var m={};m[s.xpathToMember(n,true)]={field:s.getter(n)};r.fields=h(m,r.fields);r.id=s.xpathToMember(n)}r=o.define(r)}s.model=r}if(u){if(typeof u=="string"){u=s.getter(u);s.total=function(y){return parseInt(u(y),10)}}else{if(typeof u=="function"){s.total=u}}}if(v){if(typeof v=="string"){v=s.getter(v);s.errors=function(y){return v(y)||null}}else{if(typeof v=="function"){s.errors=v}}}if(q){if(typeof q=="string"){q=s.xpathToMember(q);s.data=function(A){var y=s.evaluate(A,q),z;y=g(y)?y:[y];if(s.model&&r.fields){z=new s.model();return c(y,function(C){if(C){var B={},D;for(D in r.fields){B[D]=z._parse(D,r.fields[D].field(C))}return B}})}return y}}else{if(typeof q=="function"){s.data=q}}}if(typeof p=="function"){var t=s.parse;s.parse=function(z){var y=p.call(s,z);return t.call(s,y)}}if(typeof w=="function"){s.serialize=w}},total:function(m){return this.data(m).length},errors:function(m){return m?m.errors:null},serialize:function(m){return m},parseDOM:function(s){var w={},u,o,q,t,r,n,p=s.attributes,m=p.length,v;for(v=0;v<m;v++){n=p[v];w["@"+n.nodeName]=n.nodeValue}for(o=s.firstChild;o;o=o.nextSibling){q=o.nodeType;if(q===3||q===4){w["#text"]=o.nodeValue}else{if(q===1){u=this.parseDOM(o);t=o.nodeName;r=w[t];if(g(r)){r.push(u)}else{if(r!==d){r=[r,u]}else{r=u}}w[t]=r}}}return w},evaluate:function(q,s){var o=s.split("."),t,n,p,r,m;while(t=o.shift()){q=q[t];if(g(q)){n=[];s=o.join(".");for(m=0,p=q.length;m<p;m++){r=this.evaluate(q[m],s);r=g(r)?r:[r];n.push.apply(n,r)}return n}}return q},parse:function(o){var p,n,m={};p=o.documentElement||e.parseXML(o).documentElement;n=this.parseDOM(p);m[p.nodeName]=n;return m},xpathToMember:function(n,m){if(!n){return""}n=n.replace(/^\//,"").replace(/\//g,".");if(n.indexOf("@")>=0){return n.replace(/\.?(@.*)/,m?"$1":'["$1"]')}if(n.indexOf("text()")>=0){return n.replace(/(\.?text\(\))/,m?"#text":'["#text"]')}return n},getter:function(m){return j(this.xpathToMember(m),true)}});e.extend(true,i.data,{XmlDataReader:f,readers:{xml:f}})}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.data",["kendo.core","kendo.data.odata","kendo.data.xml"],a)}(function(){var a={id:"data",name:"Data source",category:"framework",description:"Powerful component for using local and remote data.Fully supports CRUD, Sorting, Paging, Filtering, Grouping, and Aggregates.",depends:["core"],features:[{id:"data-odata",name:"OData",description:"Support for accessing Open Data Protocol (OData) services.",depends:["data.odata"]},{id:"data-signalr",name:"SignalR",description:"Support for binding to SignalR hubs.",depends:["data.signalr"]},{id:"data-XML",name:"XML",description:"Support for binding to XML.",depends:["data.xml"]}]};(function(aK,y){var av=aK.extend,C=aK.proxy,J=aK.isPlainObject,aE=aK.isEmptyObject,b=aK.isArray,p=aK.grep,aN=aK.ajax,A,a2=aK.each,aI=aK.noop,u=window.kendo,aO=u.isFunction,P=u.Observable,aT=u.Class,aW="string",aC="function",aM="create",i="read",aU="update",F="destroy",L="change",R="sync",n="get",K="error",aL="requestStart",aG="progress",af="requestEnd",ai=[aM,i,aU,F],aj=function(a3){return a3},aa=u.getter,ap=u.stringify,ac=Math,f=[].push,aB=[].join,aR=[].pop,aF=[].splice,am=[].shift,B=[].slice,aV=[].unshift,aD={}.toString,Q=u.support.stableSort,az=/^\/Date\((.*?)\)\/$/;var ao=P.extend({init:function(a5,a3){var a4=this;a4.type=a3||al;P.fn.init.call(a4);a4.length=a5.length;a4.wrapAll(a5,a4)},at:function(a3){return this[a3]},toJSON:function(){var a3,a5=this.length,a6,a4=new Array(a5);for(a3=0;a3<a5;a3++){a6=this[a3];if(a6 instanceof al){a6=a6.toJSON()}a4[a3]=a6}return a4},parent:aI,wrapAll:function(a7,a8){var a6=this,a3,a5,a4=function(){return a6};a8=a8||[];for(a3=0,a5=a7.length;a3<a5;a3++){a8[a3]=a6.wrap(a7[a3],a4)}return a8},wrap:function(a3,a4){var a5=this,a6;if(a3!==null&&aD.call(a3)==="[object Object]"){a6=a3 instanceof a5.type||a3 instanceof G;if(!a6){a3=a3 instanceof al?a3.toJSON():a3;a3=new a5.type(a3)}a3.parent=a4;a3.bind(L,function(a7){a5.trigger(L,{field:a7.field,node:a7.node,index:a7.index,items:a7.items||[this],action:a7.node?a7.action||"itemloaded":"itemchange"})})}return a3},push:function(){var a5=this.length,a4=this.wrapAll(arguments),a3;a3=f.apply(this,a4);this.trigger(L,{action:"add",index:a5,items:a4});return a3},slice:B,sort:[].sort,join:aB,pop:function(){var a4=this.length,a3=aR.apply(this);if(a4){this.trigger(L,{action:"remove",index:a4-1,items:[a3]})}return a3},splice:function(a6,a8,a9){var a5=this.wrapAll(B.call(arguments,2)),a4,a7,a3;a4=aF.apply(this,[a6,a8].concat(a5));if(a4.length){this.trigger(L,{action:"remove",index:a6,items:a4});for(a7=0,a3=a4.length;a7<a3;a7++){if(a4[a7]&&a4[a7].children){a4[a7].unbind(L)}}}if(a9){this.trigger(L,{action:"add",index:a6,items:a5})}return a4},shift:function(){var a4=this.length,a3=am.apply(this);if(a4){this.trigger(L,{action:"remove",index:0,items:[a3]})}return a3},unshift:function(){var a4=this.wrapAll(arguments),a3;a3=aV.apply(this,a4);this.trigger(L,{action:"add",index:0,items:a4});return a3},indexOf:function(a6){var a5=this,a3,a4;for(a3=0,a4=a5.length;a3<a4;a3++){if(a5[a3]===a6){return a3}}return -1},forEach:function(a5){var a3=0,a4=this.length;for(;a3<a4;a3++){a5(this[a3],a3,this)}},map:function(a6){var a4=0,a3=[],a5=this.length;for(;a4<a5;a4++){a3[a4]=a6(this[a4],a4,this)}return a3},reduce:function(a6){var a4=0,a3,a5=this.length;if(arguments.length==2){a3=arguments[1]}else{if(a4<a5){a3=this[a4++]}}for(;a4<a5;a4++){a3=a6(a3,this[a4],a4,this)}return a3},reduceRight:function(a5){var a4=this.length-1,a3;if(arguments.length==2){a3=arguments[1]}else{if(a4>0){a3=this[a4--]}}for(;a4>=0;a4--){a3=a5(a3,this[a4],a4,this)}return a3},filter:function(a7){var a4=0,a3=[],a6,a5=this.length;for(;a4<a5;a4++){a6=this[a4];if(a7(a6,a4,this)){a3[a3.length]=a6}}return a3},find:function(a6){var a3=0,a5,a4=this.length;for(;a3<a4;a3++){a5=this[a3];if(a6(a5,a3,this)){return a5}}},every:function(a6){var a3=0,a5,a4=this.length;for(;a3<a4;a3++){a5=this[a3];if(!a6(a5,a3,this)){return false}}return true},some:function(a6){var a3=0,a5,a4=this.length;for(;a3<a4;a3++){a5=this[a3];if(a6(a5,a3,this)){return true}}return false},remove:function(a4){var a3=this.indexOf(a4);if(a3!==-1){this.splice(a3,1)}},empty:function(){this.splice(0,this.length)}});if(typeof Symbol!=="undefined"&&Symbol.iterator&&!ao.prototype[Symbol.iterator]){ao.prototype[Symbol.iterator]=[][Symbol.iterator]}var at=ao.extend({init:function(a5,a4){P.fn.init.call(this);this.type=a4||al;for(var a3=0;a3<a5.length;a3++){this[a3]=a5[a3]}this.length=a3;this._parent=C(function(){return this},this)},at:function(a3){var a4=this[a3];if(!(a4 instanceof this.type)){a4=this[a3]=this.wrap(a4,this._parent)}else{a4.parent=this._parent}return a4}});function aA(a3,a4,a6,a5){return function(a9){var a8={},a7;for(a7 in a9){a8[a7]=a9[a7]}if(a5){a8.field=a6+"."+a9.field}else{a8.field=a6}if(a4==L&&a3._notifyChange){a3._notifyChange(a8)}a3.trigger(a4,a8)}}var al=P.extend({init:function(a5){var a4=this,a7,a6,a3=function(){return a4};P.fn.init.call(this);this._handlers={};for(a6 in a5){a7=a5[a6];if(typeof a7==="object"&&a7&&!a7.getTime&&a6.charAt(0)!="_"){a7=a4.wrap(a7,a6,a3)}a4[a6]=a7}a4.uid=u.guid()},shouldSerialize:function(a3){return this.hasOwnProperty(a3)&&a3!=="_handlers"&&a3!=="_events"&&typeof this[a3]!==aC&&a3!=="uid"},forEach:function(a4){for(var a3 in this){if(this.shouldSerialize(a3)){a4(this[a3],a3)}}},toJSON:function(){var a3={},a4,a5;for(a5 in this){if(this.shouldSerialize(a5)){a4=this[a5];if(a4 instanceof al||a4 instanceof ao){a4=a4.toJSON()}a3[a5]=a4}}return a3},get:function(a5){var a4=this,a3;a4.trigger(n,{field:a5});if(a5==="this"){a3=a4}else{a3=u.getter(a5,true)(a4)}return a3},_set:function(a7,a4){var a3=this;var a9=a7.indexOf(".")>=0;if(a9){var a8=a7.split("."),a6="";while(a8.length>1){a6+=a8.shift();var a5=u.getter(a6,true)(a3);if(a5 instanceof al){a5.set(a8.join("."),a4);return a9}a6+="."}}u.setter(a7)(a3,a4);return a9},set:function(a7,a5){var a3=this,a4=false,a8=a7.indexOf(".")>=0,a6=u.getter(a7,true)(a3);if(a6!==a5){if(a6 instanceof P&&this._handlers[a7]){if(this._handlers[a7].get){a6.unbind(n,this._handlers[a7].get)}a6.unbind(L,this._handlers[a7].change)}a4=a3.trigger("set",{field:a7,value:a5});if(!a4){if(!a8){a5=a3.wrap(a5,a7,function(){return a3})}if(!a3._set(a7,a5)||a7.indexOf("(")>=0||a7.indexOf("[")>=0){a3.trigger(L,{field:a7})}}}return a4},parent:aI,wrap:function(a4,a9,bb){var a5=this;var a3;var a8;var a6=aD.call(a4);if(a4!=null&&(a6==="[object Object]"||a6==="[object Array]")){var ba=a4 instanceof ao;var a7=a4 instanceof t;if(a6==="[object Object]"&&!a7&&!ba){if(!(a4 instanceof al)){a4=new al(a4)}a3=aA(a5,n,a9,true);a4.bind(n,a3);a8=aA(a5,L,a9,true);a4.bind(L,a8);a5._handlers[a9]={get:a3,change:a8}}else{if(a6==="[object Array]"||ba||a7){if(!ba&&!a7){a4=new ao(a4)}a8=aA(a5,L,a9,false);a4.bind(L,a8);a5._handlers[a9]={change:a8}}}a4.parent=bb}return a4}});function aZ(a3,a7){if(a3===a7){return true}var a6=aK.type(a3),a4=aK.type(a7),a5;if(a6!==a4){return false}if(a6==="date"){return a3.getTime()===a7.getTime()}if(a6!=="object"&&a6!=="array"){return false}for(a5 in a3){if(!aZ(a3[a5],a7[a5])){return false}}return true}var Y={number:function(a3){return u.parseFloat(a3)},date:function(a3){return u.parseDate(a3)},"boolean":function(a3){if(typeof a3===aW){return a3.toLowerCase()==="true"}return a3!=null?!!a3:a3},string:function(a3){return a3!=null?a3+"":a3},"default":function(a3){return a3}};var aY={string:"",number:0,date:new Date(),"boolean":false,"default":""};function ax(a5,a3){var a4,a6;for(a6 in a5){a4=a5[a6];if(J(a4)&&a4.field&&a4.field===a3){return a4}else{if(a4===a3){return a4}}}return null}var G=al.extend({init:function(a6){var a5=this;if(!a6||aK.isEmptyObject(a6)){a6=aK.extend({},a5.defaults,a6);if(a5._initializers){for(var a3=0;a3<a5._initializers.length;a3++){var a4=a5._initializers[a3];a6[a4]=a5.defaults[a4]()}}}al.fn.init.call(a5,a6);a5.dirty=false;if(a5.idField){a5.id=a5.get(a5.idField);if(a5.id===y){a5.id=a5._defaultId}}},shouldSerialize:function(a3){return al.fn.shouldSerialize.call(this,a3)&&a3!=="uid"&&!(this.idField!=="id"&&a3==="id")&&a3!=="dirty"&&a3!=="_accessors"},_parse:function(a6,a5){var a4=this,a8=a6,a3=a4.fields||{},a7;a6=a3[a6];if(!a6){a6=ax(a3,a8)}if(a6){a7=a6.parse;if(!a7&&a6.type){a7=Y[a6.type.toLowerCase()]}}return a7?a7(a5):a5},_notifyChange:function(a4){var a3=a4.action;if(a3=="add"||a3=="remove"){this.dirty=true}},editable:function(a3){a3=(this.fields||{})[a3];return a3?a3.editable!==false:true},set:function(a7,a6,a5){var a4=this;var a3=a4.dirty;if(a4.editable(a7)){a6=a4._parse(a7,a6);if(!aZ(a6,a4.get(a7))){a4.dirty=true;if(al.fn.set.call(a4,a7,a6,a5)&&!a3){a4.dirty=a3}}}},accept:function(a6){var a4=this,a3=function(){return a4},a7;for(a7 in a6){var a5=a6[a7];if(a7.charAt(0)!="_"){a5=a4.wrap(a6[a7],a7,a3)}a4._set(a7,a5)}if(a4.idField){a4.id=a4.get(a4.idField)}a4.dirty=false},isNew:function(){return this.id===this._defaultId}});G.define=function(a5,bg){if(bg===y){bg=a5;a5=G}var a9,a8=av({defaults:{}},bg),a3,bd,bc,bf,be,a6,ba={},bb,a4=a8.id,a7=[];if(a4){a8.idField=a4}if(a8.id){delete a8.id}if(a4){a8.defaults[a4]=a8._defaultId=""}if(aD.call(a8.fields)==="[object Array]"){for(be=0,a6=a8.fields.length;be<a6;be++){bd=a8.fields[be];if(typeof bd===aW){ba[bd]={}}else{if(bd.field){ba[bd.field]=bd}}}a8.fields=ba}for(a3 in a8.fields){bd=a8.fields[a3];bc=bd.type||"default";bf=null;bb=a3;a3=typeof bd.field===aW?bd.field:a3;if(!bd.nullable){bf=a8.defaults[bb!==a3?bb:a3]=bd.defaultValue!==y?bd.defaultValue:aY[bc.toLowerCase()];if(typeof bf==="function"){a7.push(a3)}}if(bg.id===a3){a8._defaultId=bf}a8.defaults[bb!==a3?bb:a3]=bf;bd.parse=bd.parse||Y[bc]}if(a7.length>0){a8._initializers=a7}a9=a5.extend(a8);a9.define=function(bh){return G.define(a9,bh)};if(a8.fields){a9.fields=a8.fields;a9.idField=a8.idField}return a9};var O={selector:function(a3){return aO(a3)?a3:aa(a3)},compare:function(a4){var a3=this.selector(a4);return function(a6,a5){a6=a3(a6);a5=a3(a5);if(a6==null&&a5==null){return 0}if(a6==null){return -1}if(a5==null){return 1}if(a6.localeCompare){return a6.localeCompare(a5)}return a6>a5?1:a6<a5?-1:0}},create:function(a3){var a4=a3.compare||this.compare(a3.field);if(a3.dir=="desc"){return function(a6,a5){return a4(a5,a6,true)}}return a4},combine:function(a3){return function(a7,a6){var a5=a3[0](a7,a6),a4,a8;for(a4=1,a8=a3.length;a4<a8;a4++){a5=a5||a3[a4](a7,a6)}return a5}}};var aX=av({},O,{asc:function(a4){var a3=this.selector(a4);return function(a6,a5){var a8=a3(a6);var a7=a3(a5);if(a8&&a8.getTime&&a7&&a7.getTime){a8=a8.getTime();a7=a7.getTime()}if(a8===a7){return a6.__position-a5.__position}if(a8==null){return -1}if(a7==null){return 1}if(a8.localeCompare){return a8.localeCompare(a7)}return a8>a7?1:-1}},desc:function(a4){var a3=this.selector(a4);return function(a6,a5){var a8=a3(a6);var a7=a3(a5);if(a8&&a8.getTime&&a7&&a7.getTime){a8=a8.getTime();a7=a7.getTime()}if(a8===a7){return a6.__position-a5.__position}if(a8==null){return 1}if(a7==null){return -1}if(a7.localeCompare){return a7.localeCompare(a8)}return a8<a7?1:-1}},create:function(a3){return this[a3.dir](a3.field)}});A=function(a7,a6){var a4,a5=a7.length,a3=new Array(a5);for(a4=0;a4<a5;a4++){a3[a4]=a6(a7[a4],a4,a7)}return a3};var z=function(){function a4(a7){if(typeof a7=="string"){a7=a7.replace(/[\r\n]+/g,"")}return JSON.stringify(a7)}function a6(a7){return function(a9,a8,ba){a8+="";if(ba){a9="("+a9+" || '').toLowerCase()";a8=a8.toLowerCase()}return a7(a9,a4(a8),ba)}}function a3(bb,a8,a7,ba){if(a7!=null){if(typeof a7===aW){var a9=az.exec(a7);if(a9){a7=new Date(+a9[1])}else{if(ba){a7=a4(a7.toLowerCase());a8="(("+a8+" || '')+'').toLowerCase()"}else{a7=a4(a7)}}}if(a7.getTime){a8="("+a8+"&&"+a8+".getTime?"+a8+".getTime():"+a8+")";a7=a7.getTime()}}return a8+" "+bb+" "+a7}function a5(ba){for(var bb="/^",a7=false,a8=0;a8<ba.length;++a8){var a9=ba.charAt(a8);if(a7){bb+="\\"+a9}else{if(a9=="~"){a7=true;continue}else{if(a9=="*"){bb+=".*"}else{if(a9=="?"){bb+="."}else{if(".+^$()[]{}|\\/\n\r\u2028\u2029\xA0".indexOf(a9)>=0){bb+="\\"+a9}else{bb+=a9}}}}}a7=false}return bb+"$/"}return{quote:function(a7){if(a7&&a7.getTime){return"new Date("+a7.getTime()+")"}return a4(a7)},eq:function(a8,a7,a9){return a3("==",a8,a7,a9)},neq:function(a8,a7,a9){return a3("!=",a8,a7,a9)},gt:function(a8,a7,a9){return a3(">",a8,a7,a9)},gte:function(a8,a7,a9){return a3(">=",a8,a7,a9)},lt:function(a8,a7,a9){return a3("<",a8,a7,a9)},lte:function(a8,a7,a9){return a3("<=",a8,a7,a9)},startswith:a6(function(a8,a7){return a8+".lastIndexOf("+a7+", 0) == 0"}),doesnotstartwith:a6(function(a8,a7){return a8+".lastIndexOf("+a7+", 0) == -1"}),endswith:a6(function(a8,a7){var a9=a7?a7.length-2:0;return a8+".indexOf("+a7+", "+a8+".length - "+a9+") >= 0"}),doesnotendwith:a6(function(a8,a7){var a9=a7?a7.length-2:0;return a8+".indexOf("+a7+", "+a8+".length - "+a9+") < 0"}),contains:a6(function(a8,a7){return a8+".indexOf("+a7+") >= 0"}),doesnotcontain:a6(function(a8,a7){return a8+".indexOf("+a7+") == -1"}),matches:a6(function(a8,a7){a7=a7.substring(1,a7.length-1);return a5(a7)+".test("+a8+")"}),doesnotmatch:a6(function(a8,a7){a7=a7.substring(1,a7.length-1);return"!"+a5(a7)+".test("+a8+")"}),isempty:function(a7){return a7+" === ''"},isnotempty:function(a7){return a7+" !== ''"},isnull:function(a7){return"("+a7+" == null)"},isnotnull:function(a7){return"("+a7+" != null)"}}}();function ag(a3){this.data=a3||[]}ag.filterExpr=function(bb){var ba=[],a8={and:" && ",or:" || "},be,a7,a4,bd,a3=[],a9=[],bc,a6,a5=bb.filters;for(be=0,a7=a5.length;be<a7;be++){a4=a5[be];bc=a4.field;a6=a4.operator;if(a4.filters){bd=ag.filterExpr(a4);a4=bd.expression.replace(/__o\[(\d+)\]/g,function(bg,bf){bf=+bf;return"__o["+(a9.length+bf)+"]"}).replace(/__f\[(\d+)\]/g,function(bg,bf){bf=+bf;return"__f["+(a3.length+bf)+"]"});a9.push.apply(a9,bd.operators);a3.push.apply(a3,bd.fields)}else{if(typeof bc===aC){bd="__f["+a3.length+"](d)";a3.push(bc)}else{bd=u.expr(bc)}if(typeof a6===aC){a4="__o["+a9.length+"]("+bd+", "+z.quote(a4.value)+")";a9.push(a6)}else{a4=z[(a6||"eq").toLowerCase()](bd,a4.value,a4.ignoreCase!==y?a4.ignoreCase:true)}}ba.push(a4)}return{expression:"("+ba.join(a8[bb.logic])+")",fields:a3,operators:a9}};function S(a6,a3){if(a6){var a5=typeof a6===aW?{field:a6,dir:a3}:a6,a4=b(a5)?a5:a5!==y?[a5]:[];return p(a4,function(a7){return !!a7.dir})}}var ay={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain",isnull:"isnull",isempty:"isempty",isnotempty:"isnotempty"};function a0(a8){var a3,a7,a5,a4,a6=a8.filters;if(a6){for(a3=0,a7=a6.length;a3<a7;a3++){a5=a6[a3];a4=a5.operator;if(a4&&typeof a4===aW){a5.operator=ay[a4.toLowerCase()]||a4}a0(a5)}}}function au(a3){if(a3&&!aE(a3)){if(b(a3)||!a3.filters){a3={logic:"and",filters:b(a3)?a3:[a3]}}a0(a3);return a3}}ag.normalizeFilter=au;function s(a3,a4){if(a3.logic||a4.logic){return false}return a3.field===a4.field&&a3.value===a4.value&&a3.operator===a4.operator}function ak(a3){a3=a3||{};if(aE(a3)){return{logic:"and",filters:[]}}return au(a3)}function ah(a4,a3){if(a3.logic||a4.field>a3.field){return 1}else{if(a4.field<a3.field){return -1}else{return 0}}}function aP(a8,a7){a8=ak(a8);a7=ak(a7);if(a8.logic!==a7.logic){return false}var a4,a9;var a6=(a8.filters||[]).slice();var a5=(a7.filters||[]).slice();if(a6.length!==a5.length){return false}a6=a6.sort(ah);a5=a5.sort(ah);for(var a3=0;a3<a6.length;a3++){a4=a6[a3];a9=a5[a3];if(a4.logic&&a9.logic){if(!aP(a4,a9)){return false}}else{if(!s(a4,a9)){return false}}}return true}ag.compareFilters=aP;function an(a3){return b(a3)?a3:[a3]}function w(a6,a3){var a5=typeof a6===aW?{field:a6,dir:a3}:a6,a4=b(a5)?a5:a5!==y?[a5]:[];return A(a4,function(a7){return{field:a7.field,dir:a7.dir||"asc",aggregates:a7.aggregates}})}ag.prototype={toArray:function(){return this.data},range:function(a3,a4){return new ag(this.data.slice(a3,a3+a4))},skip:function(a3){return new ag(this.data.slice(a3))},take:function(a3){return new ag(this.data.slice(0,a3))},select:function(a3){return new ag(A(this.data,a3))},order:function(a3,a4){var a5={dir:a4};if(a3){if(a3.compare){a5.compare=a3.compare}else{a5.field=a3}}return new ag(this.data.slice(0).sort(O.create(a5)))},orderBy:function(a3){return this.order(a3,"asc")},orderByDescending:function(a3){return this.order(a3,"desc")},sort:function(a9,a4,a7){var a3,a8,a6=S(a9,a4),a5=[];a7=a7||O;if(a6.length){for(a3=0,a8=a6.length;a3<a8;a3++){a5.push(a7.create(a6[a3]))}return this.orderBy({compare:a7.combine(a5)})}return this},filter:function(a7){var bb,a9,a4,ba,bc,a6=this.data,a8,a5,bd=[],a3;a7=au(a7);if(!a7||a7.filters.length===0){return this}ba=ag.filterExpr(a7);a8=ba.fields;a5=ba.operators;bc=a3=new Function("d, __f, __o","return "+ba.expression);if(a8.length||a5.length){a3=function(be){return bc(be,a8,a5)}}for(bb=0,a4=a6.length;bb<a4;bb++){a9=a6[bb];if(a3(a9)){bd.push(a9)}}return new ag(bd)},group:function(a4,a6){a4=w(a4||[]);a6=a6||this.data;var a5=this,a3=new ag(a5.data),a7;if(a4.length>0){a7=a4[0];a3=a3.groupBy(a7).select(function(a9){var a8=new ag(a6).filter([{field:a9.field,operator:"eq",value:a9.value,ignoreCase:false}]);return{field:a9.field,value:a9.value,items:a4.length>1?new ag(a9.items).group(a4.slice(1),a8.toArray()).toArray():a9.items,hasSubgroups:a4.length>1,aggregates:a8.aggregate(a7.aggregates)}})}return a3},groupBy:function(a3){if(aE(a3)||!this.data.length){return new ag([])}var a8=a3.field,a7=this._sortForGrouping(a8,a3.dir||"asc"),a5=u.accessor(a8),bc,a4=a5.get(a7[0],a8),ba={field:a8,value:a4,items:[]},bb,a9,a6,bd=[ba];for(a9=0,a6=a7.length;a9<a6;a9++){bc=a7[a9];bb=a5.get(bc,a8);if(!H(a4,bb)){a4=bb;ba={field:a8,value:a4,items:[]};bd.push(ba)}ba.items.push(bc)}return new ag(bd)},_sortForGrouping:function(a7,a4){var a3,a5,a6=this.data;if(!Q){for(a3=0,a5=a6.length;a3<a5;a3++){a6[a3].__position=a3}a6=new ag(a6).sort(a7,a4,aX).toArray();for(a3=0,a5=a6.length;a3<a5;a3++){delete a6[a3].__position}return a6}return this.sort(a7,a4).toArray()},aggregate:function(a7){var a5,a4,a3={},a6={};if(a7&&a7.length){for(a5=0,a4=this.data.length;a5<a4;a5++){k(a3,a7,this.data[a5],a5,a4,a6)}}return a3}};function H(a4,a3){if(a4&&a4.getTime&&a3&&a3.getTime){return a4.getTime()===a3.getTime()}return a4===a3}function k(a5,a8,bd,a9,a4,a3){a8=a8||[];var bc,a6,ba,a7=a8.length;for(bc=0;bc<a7;bc++){a6=a8[bc];ba=a6.aggregate;var bb=a6.field;a5[bb]=a5[bb]||{};a3[bb]=a3[bb]||{};a3[bb][ba]=a3[bb][ba]||{};a5[bb][ba]=v[ba.toLowerCase()](a5[bb][ba],bd,u.accessor(bb),a9,a4,a3[bb][ba])}}var v={sum:function(a4,a5,a3){var a6=a3.get(a5);if(!ab(a4)){a4=a6}else{if(ab(a6)){a4+=a6}}return a4},count:function(a3){return(a3||0)+1},average:function(a4,a7,a3,a5,a6,a9){var a8=a3.get(a7);if(a9.count===y){a9.count=0}if(!ab(a4)){a4=a8}else{if(ab(a8)){a4+=a8}}if(ab(a8)){a9.count++}if(a5==a6-1&&ab(a4)){a4=a4/a9.count}return a4},max:function(a4,a5,a3){var a6=a3.get(a5);if(!ab(a4)&&!j(a4)){a4=a6}if(a4<a6&&(ab(a6)||j(a6))){a4=a6}return a4},min:function(a4,a5,a3){var a6=a3.get(a5);if(!ab(a4)&&!j(a4)){a4=a6}if(a4>a6&&(ab(a6)||j(a6))){a4=a6}return a4}};function ab(a3){return typeof a3==="number"&&!isNaN(a3)}function j(a3){return a3&&a3.getTime}function E(a6){var a4,a5=a6.length,a3=new Array(a5);for(a4=0;a4<a5;a4++){a3[a4]=a6[a4].toJSON()}return a3}ag.process=function(a5,bc){bc=bc||{};var a7=new ag(a5),bb=bc.group,a6=w(bb||[]).concat(S(bc.sort||[])),a8,a9=bc.filterCallback,a3=bc.filter,ba=bc.skip,a4=bc.take;if(a3){a7=a7.filter(a3);if(a9){a7=a9(a7)}a8=a7.toArray().length}if(a6){a7=a7.sort(a6);if(bb){a5=a7.toArray()}}if(ba!==y&&a4!==y){a7=a7.range(ba,a4)}if(bb){a7=a7.group(bb,a5)}return{total:a8,data:a7.toArray()}};var ar=aT.extend({init:function(a3){this.data=a3.data},read:function(a3){a3.success(this.data)},update:function(a3){a3.success(a3.data)},create:function(a3){a3.success(a3.data)},destroy:function(a3){a3.success(a3.data)}});var a1=aT.extend({init:function(a4){var a5=this,a3;a4=a5.options=av({},a5.options,a4);a2(ai,function(a6,a7){if(typeof a4[a7]===aW){a4[a7]={url:a4[a7]}}});a5.cache=a4.cache?W.create(a4.cache):{find:aI,add:aI};a3=a4.parameterMap;if(aO(a4.push)){a5.push=a4.push}if(!a5.push){a5.push=aj}a5.parameterMap=aO(a3)?a3:function(a7){var a6={};a2(a7,function(a8,a9){if(a8 in a3){a8=a3[a8];if(J(a8)){a9=a8.value(a9);a8=a8.key}}a6[a8]=a9});return a6}},options:{parameterMap:aj},create:function(a3){return aN(this.setup(a3,aM))},read:function(a6){var a7=this,a8,a5,a3,a4=a7.cache;a6=a7.setup(a6,i);a8=a6.success||aI;a5=a6.error||aI;a3=a4.find(a6.data);if(a3!==y){a8(a3)}else{a6.success=function(a9){a4.add(a6.data,a9);a8(a9)};aK.ajax(a6)}},update:function(a3){return aN(this.setup(a3,aU))},destroy:function(a3){return aN(this.setup(a3,F))},setup:function(a4,a5){a4=a4||{};var a7=this,a6,a3=a7.options[a5],a8=aO(a3.data)?a3.data(a4.data):a3.data;a4=av(true,{},a3,a4);a6=av(true,{},a8,a4.data);a4.data=a7.parameterMap(a6,a5);if(aO(a4.url)){a4.url=a4.url(a6)}return a4}});var W=aT.extend({init:function(){this._store={}},add:function(a3,a4){if(a3!==y){this._store[ap(a3)]=a4}},find:function(a3){return this._store[ap(a3)]},clear:function(){this._store={}},remove:function(a3){delete this._store[ap(a3)]}});W.create=function(a4){var a3={inmemory:function(){return new W()}};if(J(a4)&&aO(a4.find)){return a4}if(a4===true){return new W()}return a3[a4]()};function T(a6,ba,a4,a9,bd){var a7,bb,a8,bc,a5={},a3;for(bc=0,a3=a6.length;bc<a3;bc++){a7=a6[bc];for(bb in ba){a8=bd[bb];if(a8&&a8!==bb){if(!a5[a8]){a5[a8]=u.setter(a8)}a5[a8](a7,ba[bb](a7));delete a7[bb]}}}}function x(a5,a9,a4,a8,bc){var a6,ba,a7,bb,a3;for(bb=0,a3=a5.length;bb<a3;bb++){a6=a5[bb];for(ba in a9){a6[ba]=a4._parse(ba,a9[ba](a6));a7=bc[ba];if(a7&&a7!==ba){delete a6[a7]}}}}function U(a5,a8,a4,a7,bb){var a6,a9,ba,a3;for(a9=0,a3=a5.length;a9<a3;a9++){a6=a5[a9];ba=a7[a6.field];if(ba&&ba!=a6.field){a6.field=ba}a6.value=a4._parse(a6.field,a6.value);if(a6.hasSubgroups){U(a6.items,a8,a4,a7,bb)}else{x(a6.items,a8,a4,a7,bb)}}}function ad(a7,a4,a6,a5,a3,a8){return function(a9){a9=a7(a9);if(a9&&!aE(a5)){if(aD.call(a9)!=="[object Array]"&&!(a9 instanceof ao)){a9=[a9]}a6(a9,a5,new a4(),a3,a8)}return a9||[]}}var Z=aT.extend({init:function(a7){var bc=this,a9,a5,ba,a4;a7=a7||{};for(a9 in a7){a5=a7[a9];bc[a9]=typeof a5===aW?aa(a5):a5}a4=a7.modelBase||G;if(J(bc.model)){bc.model=ba=a4.define(bc.model)}var a3=C(bc.data,bc);bc._dataAccessFunction=a3;if(bc.model){var a8=C(bc.groups,bc),a6=C(bc.serialize,bc),bd={},be={},bb={},bh={},bf=false,bg;ba=bc.model;if(ba.fields){a2(ba.fields,function(bk,bj){var bi;bg=bk;if(J(bj)&&bj.field){bg=bj.field}else{if(typeof bj===aW){bg=bj}}if(J(bj)&&bj.from){bi=bj.from}bf=bf||bi&&bi!==bk||bg!==bk;be[bk]=aa(bi||bg);bb[bk]=aa(bk);bd[bi||bg]=bk;bh[bk]=bi||bg});if(!a7.serialize&&bf){bc.serialize=ad(a6,ba,T,bb,bd,bh)}}bc._dataAccessFunction=a3;bc.data=ad(a3,ba,x,be,bd,bh);bc.groups=ad(a8,ba,U,be,bd,bh)}},errors:function(a3){return a3?a3.errors:null},parse:aj,data:aj,total:function(a3){return a3.length},groups:aj,aggregates:function(){return{}},serialize:function(a3){return a3}});function d(ba,a6,a8,a5){var a9,a3=0,a4;while(a6.length&&a5){a9=a6[a3];a4=a9.items;var a7=a4.length;if(ba&&ba.field===a9.field&&ba.value===a9.value){if(ba.hasSubgroups&&ba.items.length){d(ba.items[ba.items.length-1],a9.items,a8,a5)}else{a4=a4.slice(a8,a8+a5);ba.items=ba.items.concat(a4)}a6.splice(a3--,1)}else{if(a9.hasSubgroups&&a4.length){d(a9,a4,a8,a5);if(!a9.items.length){a6.splice(a3--,1)}}else{a4=a4.slice(a8,a8+a5);a9.items=a4;if(!a9.items.length){a6.splice(a3--,1)}}}if(a4.length===0){a8-=a7}else{a8=0;a5-=a4.length}if(++a3>=a6.length){break}}if(a3<a6.length){a6.splice(a3,a6.length-a3)}}function aq(a8){var a4,a3=[],a7,a5,a6;for(a4=0,a7=a8.length;a4<a7;a4++){var a9=a8.at(a4);if(a9.hasSubgroups){a3=a3.concat(aq(a9.items))}else{a5=a9.items;for(a6=0;a6<a5.length;a6++){a3.push(a5.at(a6))}}}return a3}function aw(a6,a4){var a3,a5,a7;if(a4){for(a3=0,a5=a6.length;a3<a5;a3++){a7=a6.at(a3);if(a7.hasSubgroups){aw(a7.items,a4)}else{a7.items=new at(a7.items,a4)}}}}function q(a6,a5){for(var a3=0,a4=a6.length;a3<a4;a3++){if(a6[a3].hasSubgroups){if(q(a6[a3].items,a5)){return true}}else{if(a5(a6[a3].items,a6[a3])){return true}}}}function e(a4,a6,a5,a7){for(var a3=0;a3<a4.length;a3++){if(a4[a3].data===a6){break}if(M(a4[a3].data,a5,a7)){break}}}function M(a4,a6,a7){for(var a3=0,a5=a4.length;a3<a5;a3++){if(a4[a3]&&a4[a3].hasSubgroups){return M(a4[a3].items,a6,a7)}else{if(a4[a3]===a6||a4[a3]===a7){a4[a3]=a7;return true}}}}function r(a8,a6,a3,a7,a5){for(var ba=0,a4=a8.length;ba<a4;ba++){var bb=a8[ba];if(!bb||bb instanceof a7){continue}if(bb.hasSubgroups!==y&&!a5){r(bb.items,a6,a3,a7,a5)}else{for(var a9=0;a9<a6.length;a9++){if(a6[a9]===bb){a8[ba]=a6.at(a9);e(a3,a6,bb,a8[ba]);break}}}}}function N(a7,a5){var a3,a6;for(a3=0,a6=a7.length;a3<a6;a3++){var a4=a7.at(a3);if(a4.uid==a5.uid){a7.splice(a3,1);return a4}}}function aQ(a4,a3){if(a3){return o(a4,function(a5){return a5.uid&&a5.uid==a3.uid||a5[a3.idField]===a3.id&&a3.id!==a3._defaultId})}return -1}function aS(a4,a3){if(a3){return o(a4,function(a5){return a5.uid==a3.uid})}return -1}function o(a6,a4){var a3,a5;for(a3=0,a5=a6.length;a3<a5;a3++){if(a4(a6[a3])){return a3}}return -1}function D(a3,a4){if(a3&&!aE(a3)){var a5=a3[a4];var a6;if(J(a5)){a6=a5.from||a5.field||a4}else{a6=a3[a4]||a4}if(aO(a6)){return a4}return a6}return a4}function I(a8,a4){var a3,a5,a7={};for(var a6 in a8){if(a6!=="filters"){a7[a6]=a8[a6]}}if(a8.filters){a7.filters=[];for(a3=0,a5=a8.filters.length;a3<a5;a3++){a7.filters[a3]=I(a8.filters[a3],a4)}}else{a7.field=D(a4.fields,a7.field)}return a7}function V(a6,a5){var a4,a7,a3=[],ba,a9;for(a4=0,a7=a6.length;a4<a7;a4++){ba={};a9=a6[a4];for(var a8 in a9){ba[a8]=a9[a8]}ba.field=D(a5.fields,ba.field);if(ba.aggregates&&b(ba.aggregates)){ba.aggregates=V(ba.aggregates,a5)}a3.push(ba)}return a3}var t=P.extend({init:function(a4){var a6=this,a3,a7;if(a4){a7=a4.data}a4=a6.options=av({},a6.options,a4);a6._map={};a6._prefetch={};a6._data=[];a6._pristineData=[];a6._ranges=[];a6._view=[];a6._pristineTotal=0;a6._destroyed=[];a6._pageSize=a4.pageSize;a6._page=a4.page||(a4.pageSize?1:y);a6._sort=S(a4.sort);a6._filter=au(a4.filter);a6._group=w(a4.group);a6._aggregate=a4.aggregate;a6._total=a4.total;a6._shouldDetachObservableParents=true;P.fn.init.call(a6);a6.transport=h.create(a4,a7,a6);if(aO(a6.transport.push)){a6.transport.push({pushCreate:C(a6._pushCreate,a6),pushUpdate:C(a6._pushUpdate,a6),pushDestroy:C(a6._pushDestroy,a6)})}if(a4.offlineStorage!=null){if(typeof a4.offlineStorage=="string"){var a5=a4.offlineStorage;a6._storage={getItem:function(){return JSON.parse(localStorage.getItem(a5))},setItem:function(a8){localStorage.setItem(a5,ap(a6.reader.serialize(a8)))}}}else{a6._storage=a4.offlineStorage}}a6.reader=new u.data.readers[a4.schema.type||"json"](a4.schema);a3=a6.reader.model||{};a6._detachObservableParents();a6._data=a6._observe(a6._data);a6._online=true;a6.bind(["push",K,L,aL,R,af,aG],a4)},options:{data:null,schema:{modelBase:G},offlineStorage:null,serverSorting:false,serverPaging:false,serverFiltering:false,serverGrouping:false,serverAggregates:false,batch:false},clone:function(){return this},online:function(a3){if(a3!==y){if(this._online!=a3){this._online=a3;if(a3){return this.sync()}}return aK.Deferred().resolve().promise()}else{return this._online}},offlineData:function(a3){if(this.options.offlineStorage==null){return null}if(a3!==y){return this._storage.setItem(a3)}return this._storage.getItem()||[]},_isServerGrouped:function(){var a3=this.group()||[];return this.options.serverGrouping&&a3.length},_pushCreate:function(a3){this._push(a3,"pushCreate")},_pushUpdate:function(a3){this._push(a3,"pushUpdate")},_pushDestroy:function(a3){this._push(a3,"pushDestroy")},_push:function(a3,a4){var a5=this._readData(a3);if(!a5){a5=a3}this[a4](a5)},_flatData:function(a5,a4){if(a5){if(this._isServerGrouped()){return aq(a5)}if(!a4){for(var a3=0;a3<a5.length;a3++){a5.at(a3)}}}return a5},parent:aI,get:function(a6){var a3,a4,a5=this._flatData(this._data);for(a3=0,a4=a5.length;a3<a4;a3++){if(a5[a3].id==a6){return a5[a3]}}},getByUid:function(a6){var a3,a4,a5=this._flatData(this._data);if(!a5){return}for(a3=0,a4=a5.length;a3<a4;a3++){if(a5[a3].uid==a6){return a5[a3]}}},indexOf:function(a3){return aS(this._data,a3)},at:function(a3){return this._data.at(a3)},data:function(a5){var a4=this;if(a5!==y){a4._detachObservableParents();a4._data=this._observe(a5);a4._pristineData=a5.slice(0);a4._storeData();a4._ranges=[];a4.trigger("reset");a4._addRange(a4._data);a4._total=a4._data.length;a4._pristineTotal=a4._total;a4._process(a4._data)}else{if(a4._data){for(var a3=0;a3<a4._data.length;a3++){a4._data.at(a3)}}return a4._data}},view:function(a3){if(a3===y){return this._view}else{this._view=this._observeView(a3)}},_observeView:function(a5){var a4=this;r(a5,a4._data,a4._ranges,a4.reader.model||al,a4._isServerGrouped());var a3=new at(a5,a4.reader.model);a3.parent=function(){return a4.parent()};return a3},flatView:function(){var a3=this.group()||[];if(a3.length){return aq(this._view)}else{return this._view}},add:function(a3){return this.insert(this._data.length,a3)},_createNewModel:function(a3){if(this.reader.model){return new this.reader.model(a3)}if(a3 instanceof al){return a3}return new al(a3)},insert:function(a4,a3){if(!a3){a3=a4;a4=0}if(!(a3 instanceof G)){a3=this._createNewModel(a3)}if(this._isServerGrouped()){this._data.splice(a4,0,this._wrapInEmptyGroup(a3))}else{this._data.splice(a4,0,a3)}return a3},pushCreate:function(a6){if(!b(a6)){a6=[a6]}var a9=[];var a5=this.options.autoSync;this.options.autoSync=false;try{for(var a4=0;a4<a6.length;a4++){var a7=a6[a4];var a3=this.add(a7);a9.push(a3);var a8=a3.toJSON();if(this._isServerGrouped()){a8=this._wrapInEmptyGroup(a8)}this._pristineData.push(a8)}}finally{this.options.autoSync=a5}if(a9.length){this.trigger("push",{type:"create",items:a9})}},pushUpdate:function(a4){if(!b(a4)){a4=[a4]}var a8=[];for(var a3=0;a3<a4.length;a3++){var a6=a4[a3];var a5=this._createNewModel(a6);var a7=this.get(a5.id);if(a7){a8.push(a7);a7.accept(a6);a7.trigger(L);this._updatePristineForModel(a7,a6)}else{this.pushCreate(a6)}}if(a8.length){this.trigger("push",{type:"update",items:a8})}},pushDestroy:function(a3){var a4=this._removeItems(a3);if(a4.length){this.trigger("push",{type:"destroy",items:a4})}},_removeItems:function(a5){if(!b(a5)){a5=[a5]}var a8=[];var a4=this.options.autoSync;this.options.autoSync=false;try{for(var a3=0;a3<a5.length;a3++){var a7=a5[a3];var a6=this._createNewModel(a7);var a9=false;this._eachItem(this._data,function(bb){for(var ba=0;ba<bb.length;ba++){var bc=bb.at(ba);if(bc.id===a6.id){a8.push(bc);bb.splice(ba,1);a9=true;break}}});if(a9){this._removePristineForModel(a6);this._destroyed.pop()}}}finally{this.options.autoSync=a4}return a8},remove:function(a4){var a3,a6=this,a5=a6._isServerGrouped();this._eachItem(a6._data,function(a7){a3=N(a7,a4);if(a3&&a5){if(!a3.isNew||!a3.isNew()){a6._destroyed.push(a3)}return true}});this._removeModelFromRanges(a4);this._updateRangesLength();return a4},destroyed:function(){return this._destroyed},created:function(){var a4,a5,a3=[],a6=this._flatData(this._data);for(a4=0,a5=a6.length;a4<a5;a4++){if(a6[a4].isNew&&a6[a4].isNew()){a3.push(a6[a4])}}return a3},updated:function(){var a4,a5,a3=[],a6=this._flatData(this._data);for(a4=0,a5=a6.length;a4<a5;a4++){if(a6[a4].isNew&&!a6[a4].isNew()&&a6[a4].dirty){a3.push(a6[a4])}}return a3},sync:function(){var a6=this,a8=[],a3=[],a5=a6._destroyed;var a7=aK.Deferred().resolve().promise();if(a6.online()){if(!a6.reader.model){return a7}a8=a6.created();a3=a6.updated();var a4=[];if(a6.options.batch&&a6.transport.submit){a4=a6._sendSubmit(a8,a3,a5)}else{a4.push.apply(a4,a6._send("create",a8));a4.push.apply(a4,a6._send("update",a3));a4.push.apply(a4,a6._send("destroy",a5))}a7=aK.when.apply(null,a4).then(function(){var a9,ba;for(a9=0,ba=arguments.length;a9<ba;a9++){if(arguments[a9]){a6._accept(arguments[a9])}}a6._storeData(true);a6._change({action:"sync"});a6.trigger(R)})}else{a6._storeData(true);a6._change({action:"sync"})}return a7},cancelChanges:function(a3){var a4=this;if(a3 instanceof u.data.Model){a4._cancelModel(a3)}else{a4._destroyed=[];a4._detachObservableParents();a4._data=a4._observe(a4._pristineData);if(a4.options.serverPaging){a4._total=a4._pristineTotal}a4._ranges=[];a4._addRange(a4._data);a4._change();a4._markOfflineUpdatesAsDirty()}},_markOfflineUpdatesAsDirty:function(){var a3=this;if(a3.options.offlineStorage!=null){a3._eachItem(a3._data,function(a5){for(var a4=0;a4<a5.length;a4++){var a6=a5.at(a4);if(a6.__state__=="update"||a6.__state__=="create"){a6.dirty=true}}})}},hasChanges:function(){var a3,a4,a5=this._flatData(this._data);if(this._destroyed.length){return true}for(a3=0,a4=a5.length;a3<a4;a3++){if(a5[a3].isNew&&a5[a3].isNew()||a5[a3].dirty){return true}}return false},_accept:function(bb){var a6=this,a3=bb.models,a5=bb.response,a8=0,ba=a6._isServerGrouped(),a9=a6._pristineData,a7=bb.type,a4;a6.trigger(af,{response:a5,type:a7});if(a5&&!aE(a5)){a5=a6.reader.parse(a5);if(a6._handleCustomErrors(a5)){return}a5=a6.reader.data(a5);if(!b(a5)){a5=[a5]}}else{a5=aK.map(a3,function(bc){return bc.toJSON()})}if(a7==="destroy"){a6._destroyed=[]}for(a8=0,a4=a3.length;a8<a4;a8++){if(a7!=="destroy"){a3[a8].accept(a5[a8]);if(a7==="create"){a9.push(ba?a6._wrapInEmptyGroup(a3[a8]):a5[a8])}else{if(a7==="update"){a6._updatePristineForModel(a3[a8],a5[a8])}}}else{a6._removePristineForModel(a3[a8])}}},_updatePristineForModel:function(a4,a3){this._executeOnPristineForModel(a4,function(a6,a5){u.deepExtend(a5[a6],a3)})},_executeOnPristineForModel:function(a3,a4){this._eachPristineItem(function(a5){var a6=aQ(a5,a3);if(a6>-1){a4(a6,a5);return true}})},_removePristineForModel:function(a3){this._executeOnPristineForModel(a3,function(a5,a4){a4.splice(a5,1)})},_readData:function(a4){var a3=!this._isServerGrouped()?this.reader.data:this.reader.groups;return a3.call(this.reader,a4)},_eachPristineItem:function(a3){this._eachItem(this._pristineData,a3)},_eachItem:function(a3,a4){if(a3&&a3.length){if(this._isServerGrouped()){q(a3,a4)}else{a4(a3)}}},_pristineForModel:function(a4){var a5,a3,a6=function(a7){a3=aQ(a7,a4);if(a3>-1){a5=a7[a3];return true}};this._eachPristineItem(a6);return a5},_cancelModel:function(a3){var a4=this._pristineForModel(a3);this._eachItem(this._data,function(a6){var a5=aS(a6,a3);if(a5>=0){if(a4&&(!a3.isNew()||a4.__state__)){a6[a5].accept(a4);if(a4.__state__=="update"){a6[a5].dirty=true}}else{a6.splice(a5,1)}}})},_submit:function(a3,a5){var a4=this;a4.trigger(aL,{type:"submit"});a4.transport.submit(av({success:function(a6,a7){var a8=aK.grep(a3,function(a9){return a9.type==a7})[0];if(a8){a8.resolve({response:a6,models:a8.models,type:a7})}},error:function(a8,a7,a9){for(var a6=0;a6<a3.length;a6++){a3[a6].reject(a8)}a4.error(a8,a7,a9)}},a5))},_sendSubmit:function(a7,a3,a6){var a5=this,a4=[];if(a5.options.batch){if(a7.length){a4.push(aK.Deferred(function(a8){a8.type="create";a8.models=a7}))}if(a3.length){a4.push(aK.Deferred(function(a8){a8.type="update";a8.models=a3}))}if(a6.length){a4.push(aK.Deferred(function(a8){a8.type="destroy";a8.models=a6}))}a5._submit(a4,{data:{created:a5.reader.serialize(E(a7)),updated:a5.reader.serialize(E(a3)),destroyed:a5.reader.serialize(E(a6))}})}return a4},_promise:function(a5,a6,a3){var a4=this;return aK.Deferred(function(a7){a4.trigger(aL,{type:a3});a4.transport[a3].call(a4.transport,av({success:function(a8){a7.resolve({response:a8,models:a6,type:a3})},error:function(a9,a8,ba){a7.reject(a9);a4.error(a9,a8,ba)}},a5))}).promise()},_send:function(a9,a7){var a6=this,a3,a5,a4=[],a8=a6.reader.serialize(E(a7));if(a6.options.batch){if(a7.length){a4.push(a6._promise({data:{models:a8}},a7,a9))}}else{for(a3=0,a5=a7.length;a3<a5;a3++){a4.push(a6._promise({data:a8[a3]},[a7[a3]],a9))}}return a4},read:function(a5){var a4=this,a6=a4._params(a5);var a3=aK.Deferred();a4._queueRequest(a6,function(){var a7=a4.trigger(aL,{type:"read"});if(!a7){a4.trigger(aG);a4._ranges=[];a4.trigger("reset");if(a4.online()){a4.transport.read({data:a6,success:function(a8){a4._ranges=[];a4.success(a8,a6);a3.resolve()},error:function(){var a8=B.call(arguments);a4.error.apply(a4,a8);a3.reject.apply(a3,a8)}})}else{if(a4.options.offlineStorage!=null){a4.success(a4.offlineData(),a6);a3.resolve()}}}else{a4._dequeueRequest();a3.resolve(a7)}});return a3.promise()},_readAggregates:function(a3){return this.reader.aggregates(a3)},success:function(a7){var a9=this,bd=a9.options;a9.trigger(af,{response:a7,type:"read"});if(a9.online()){a7=a9.reader.parse(a7);if(a9._handleCustomErrors(a7)){a9._dequeueRequest();return}a9._total=a9.reader.total(a7);if(a9._aggregate&&bd.serverAggregates){a9._aggregateResult=a9._readAggregates(a7)}a7=a9._readData(a7);a9._destroyed=[]}else{a7=a9._readData(a7);var ba=[];var a6={};var a8=a9.reader.model;var a5=a8?a8.idField:"id";var bb;for(bb=0;bb<this._destroyed.length;bb++){var a4=this._destroyed[bb][a5];a6[a4]=a4}for(bb=0;bb<a7.length;bb++){var bc=a7[bb];var a3=bc.__state__;if(a3=="destroy"){if(!a6[bc[a5]]){this._destroyed.push(this._createNewModel(bc))}}else{ba.push(bc)}}a7=ba;a9._total=a7.length}a9._pristineTotal=a9._total;a9._pristineData=a7.slice(0);a9._detachObservableParents();a9._data=a9._observe(a7);a9._markOfflineUpdatesAsDirty();a9._storeData();a9._addRange(a9._data);a9._process(a9._data);a9._dequeueRequest()},_detachObservableParents:function(){if(this._data&&this._shouldDetachObservableParents){for(var a3=0;a3<this._data.length;a3++){if(this._data[a3].parent){this._data[a3].parent=aI}}}},_storeData:function(a7){var a6=this._isServerGrouped();var a5=this.reader.model;function a4(bf){var be=[];for(var bb=0;bb<bf.length;bb++){var bc=bf.at(bb);var bd=bc.toJSON();if(a6&&bc.items){bd.items=a4(bc.items)}else{bd.uid=bc.uid;if(a5){if(bc.isNew()){bd.__state__="create"}else{if(bc.dirty){bd.__state__="update"}}}}be.push(bd)}return be}if(this.options.offlineStorage!=null){var ba=a4(this._data);var a9=[];for(var a3=0;a3<this._destroyed.length;a3++){var a8=this._destroyed[a3].toJSON();a8.__state__="destroy";a9.push(a8)}this.offlineData(ba.concat(a9));if(a7){this._pristineData=this._readData(ba)}}},_addRange:function(a5){var a4=this,a6=a4._skip||0,a3=a6+a4._flatData(a5,true).length;a4._ranges.push({start:a6,end:a3,data:a5,timestamp:new Date().getTime()});a4._ranges.sort(function(a7,a8){return a7.start-a8.start})},error:function(a5,a3,a4){this._dequeueRequest();this.trigger(af,{});this.trigger(K,{xhr:a5,status:a3,errorThrown:a4})},_params:function(a5){var a4=this,a3=av({take:a4.take(),skip:a4.skip(),page:a4.page(),pageSize:a4.pageSize(),sort:a4._sort,filter:a4._filter,group:a4._group,aggregate:a4._aggregate},a5);if(!a4.options.serverPaging){delete a3.take;delete a3.skip;delete a3.page;delete a3.pageSize}if(!a4.options.serverGrouping){delete a3.group}else{if(a4.reader.model&&a3.group){a3.group=V(a3.group,a4.reader.model)}}if(!a4.options.serverFiltering){delete a3.filter}else{if(a4.reader.model&&a3.filter){a3.filter=I(a3.filter,a4.reader.model)}}if(!a4.options.serverSorting){delete a3.sort}else{if(a4.reader.model&&a3.sort){a3.sort=V(a3.sort,a4.reader.model)}}if(!a4.options.serverAggregates){delete a3.aggregate}else{if(a4.reader.model&&a3.aggregate){a3.aggregate=V(a3.aggregate,a4.reader.model)}}return a3},_queueRequest:function(a3,a5){var a4=this;if(!a4._requestInProgress){a4._requestInProgress=true;a4._pending=y;a5()}else{a4._pending={callback:C(a5,a4),options:a3}}},_dequeueRequest:function(){var a3=this;a3._requestInProgress=false;if(a3._pending){a3._queueRequest(a3._pending.options,a3._pending.callback)}},_handleCustomErrors:function(a3){if(this.reader.errors){var a4=this.reader.errors(a3);if(a4){this.trigger(K,{xhr:null,status:"customerror",errorThrown:"custom error",errors:a4});return true}}return false},_shouldWrap:function(a4){var a3=this.reader.model;if(a3&&a4.length){return !(a4[0] instanceof a3)}return false},_observe:function(a5){var a4=this,a3=a4.reader.model;a4._shouldDetachObservableParents=true;if(a5 instanceof ao){a4._shouldDetachObservableParents=false;if(a4._shouldWrap(a5)){a5.type=a4.reader.model;a5.wrapAll(a5,a5)}}else{var a6=a4.pageSize()&&!a4.options.serverPaging?at:ao;a5=new a6(a5,a4.reader.model);a5.parent=function(){return a4.parent()}}if(a4._isServerGrouped()){aw(a5,a3)}if(a4._changeHandler&&a4._data&&a4._data instanceof ao){a4._data.unbind(L,a4._changeHandler)}else{a4._changeHandler=C(a4._change,a4)}return a5.bind(L,a4._changeHandler)},_updateTotalForAction:function(a6,a3){var a5=this;var a4=parseInt(a5._total,10);if(!ab(a5._total)){a4=parseInt(a5._pristineTotal,10)}if(a6==="add"){a4+=a3.length}else{if(a6==="remove"){a4-=a3.length}else{if(a6!=="itemchange"&&a6!=="sync"&&!a5.options.serverPaging){a4=a5._pristineTotal}else{if(a6==="sync"){a4=a5._pristineTotal=parseInt(a5._total,10)}}}}a5._total=a4},_change:function(a8){var a6=this,a3,a5,a7=a8?a8.action:"";if(a7==="remove"){for(a3=0,a5=a8.items.length;a3<a5;a3++){if(!a8.items[a3].isNew||!a8.items[a3].isNew()){a6._destroyed.push(a8.items[a3])}}}if(a6.options.autoSync&&(a7==="add"||a7==="remove"||a7==="itemchange")){var a4=function(a9){if(a9.action==="sync"){a6.unbind("change",a4);a6._updateTotalForAction(a7,a8.items)}};a6.first("change",a4);a6.sync()}else{a6._updateTotalForAction(a7,a8?a8.items:[]);a6._process(a6._data,a8)}},_calculateAggregates:function(a6,a3){a3=a3||{};var a5=new ag(a6),a7=a3.aggregate,a4=a3.filter;if(a4){a5=a5.filter(a4)}return a5.aggregate(a7)},_process:function(a6,a7){var a5=this,a4={},a3;if(a5.options.serverPaging!==true){a4.skip=a5._skip;a4.take=a5._take||a5._pageSize;if(a4.skip===y&&a5._page!==y&&a5._pageSize!==y){a4.skip=(a5._page-1)*a5._pageSize}}if(a5.options.serverSorting!==true){a4.sort=a5._sort}if(a5.options.serverFiltering!==true){a4.filter=a5._filter}if(a5.options.serverGrouping!==true){a4.group=a5._group}if(a5.options.serverAggregates!==true){a4.aggregate=a5._aggregate;a5._aggregateResult=a5._calculateAggregates(a6,a4)}a3=a5._queryProcess(a6,a4);a5.view(a3.data);if(a3.total!==y&&!a5.options.serverFiltering){a5._total=a3.total}a7=a7||{};a7.items=a7.items||a5._view;a5.trigger(L,a7)},_queryProcess:function(a4,a3){return ag.process(a4,a3)},_mergeState:function(a3){var a4=this;if(a3!==y){a4._pageSize=a3.pageSize;a4._page=a3.page;a4._sort=a3.sort;a4._filter=a3.filter;a4._group=a3.group;a4._aggregate=a3.aggregate;a4._skip=a4._currentRangeStart=a3.skip;a4._take=a3.take;if(a4._skip===y){a4._skip=a4._currentRangeStart=a4.skip();a3.skip=a4.skip()}if(a4._take===y&&a4._pageSize!==y){a4._take=a4._pageSize;a3.take=a4._take}if(a3.sort){a4._sort=a3.sort=S(a3.sort)}if(a3.filter){a4._filter=a3.filter=au(a3.filter)}if(a3.group){a4._group=a3.group=w(a3.group)}if(a3.aggregate){a4._aggregate=a3.aggregate=an(a3.aggregate)}}return a3},query:function(a5){var a4;var a6=this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates;if(a6||(this._data===y||this._data.length===0)&&!this._destroyed.length){return this.read(this._mergeState(a5))}var a3=this.trigger(aL,{type:"read"});if(!a3){this.trigger(aG);a4=this._queryProcess(this._data,this._mergeState(a5));if(!this.options.serverFiltering){if(a4.total!==y){this._total=a4.total}else{this._total=this._data.length}}this._aggregateResult=this._calculateAggregates(this._data,a5);this.view(a4.data);this.trigger(af,{type:"read"});this.trigger(L,{items:a4.data})}return aK.Deferred().resolve(a3).promise()},fetch:function(a5){var a4=this;var a3=function(a6){if(a6!==true&&aO(a5)){a5.call(a4)}};return this._query().then(a3)},_query:function(a3){var a4=this;return a4.query(av({},{page:a4.page(),pageSize:a4.pageSize(),sort:a4.sort(),filter:a4.filter(),group:a4.group(),aggregate:a4.aggregate()},a3))},next:function(a3){var a5=this,a6=a5.page(),a4=a5.total();a3=a3||{};if(!a6||a4&&a6+1>a5.totalPages()){return}a5._skip=a5._currentRangeStart=a6*a5.take();a6+=1;a3.page=a6;a5._query(a3);return a6},prev:function(a3){var a4=this,a5=a4.page();a3=a3||{};if(!a5||a5===1){return}a4._skip=a4._currentRangeStart=a4._skip-a4.take();a5-=1;a3.page=a5;a4._query(a3);return a5},page:function(a5){var a4=this,a3;if(a5!==y){a5=ac.max(ac.min(ac.max(a5,1),a4.totalPages()),1);a4._query({page:a5});return}a3=a4.skip();return a3!==y?ac.round((a3||0)/(a4.take()||1))+1:y},pageSize:function(a4){var a3=this;if(a4!==y){a3._query({pageSize:a4,page:1});return}return a3.take()},sort:function(a4){var a3=this;if(a4!==y){a3._query({sort:a4});return}return a3._sort},filter:function(a4){var a3=this;if(a4===y){return a3._filter}a3.trigger("reset");a3._query({filter:a4,page:1})},group:function(a4){var a3=this;if(a4!==y){a3._query({group:a4});return}return a3._group},total:function(){return parseInt(this._total||0,10)},aggregate:function(a4){var a3=this;if(a4!==y){a3._query({aggregate:a4});return}return a3._aggregate},aggregates:function(){var a3=this._aggregateResult;if(aE(a3)){a3=this._emptyAggregates(this.aggregate())}return a3},_emptyAggregates:function(a6){var a4={};if(!aE(a6)){var a5={};if(!b(a6)){a6=[a6]}for(var a3=0;a3<a6.length;a3++){a5[a6[a3].aggregate]=0;a4[a6[a3].field]=a5}}return a4},_wrapInEmptyGroup:function(a5){var a4=this.group(),a6,a8,a3,a7;for(a3=a4.length-1,a7=0;a3>=a7;a3--){a8=a4[a3];a6={value:a5.get(a8.field),field:a8.field,items:a6?[a6]:[a5],hasSubgroups:!!a6,aggregates:this._emptyAggregates(a8.aggregates)}}return a6},totalPages:function(){var a4=this,a3=a4.pageSize()||a4.total();return ac.ceil((a4.total()||0)/a3)},inRange:function(a6,a4){var a5=this,a3=ac.min(a6+a4,a5.total());if(!a5.options.serverPaging&&a5._data.length>0){return true}return a5._findRange(a6,a3).length>0},lastRange:function(){var a3=this._ranges;return a3[a3.length-1]||{start:0,end:0,data:[]}},firstItemUid:function(){var a3=this._ranges;return a3.length&&a3[0].data.length&&a3[0].data[0].uid},enableRequestsInProgress:function(){this._skipRequestsInProgress=false},_timeStamp:function(){return new Date().getTime()},range:function(ba,a4){this._currentRequestTimeStamp=this._timeStamp();this._skipRequestsInProgress=true;ba=ac.min(ba||0,this.total());var a8=this,a9=ac.max(ac.floor(ba/a4),0)*a4,bc=ac.min(a9+a4,a8.total()),a5;a5=a8._findRange(ba,ac.min(ba+a4,a8.total()));if(a5.length){a8._pending=y;a8._skip=ba>a8.skip()?ac.min(bc,(a8.totalPages()-1)*a8.take()):a9;a8._currentRangeStart=ba;a8._take=a4;var a3=a8.options.serverPaging;var a6=a8.options.serverSorting;var bb=a8.options.serverFiltering;var a7=a8.options.serverAggregates;try{a8.options.serverPaging=true;if(!a8._isServerGrouped()&&!(a8.group()&&a8.group().length)){a8.options.serverSorting=true}a8.options.serverFiltering=true;a8.options.serverPaging=true;a8.options.serverAggregates=true;if(a3){a8._detachObservableParents();a8._data=a5=a8._observe(a5)}a8._process(a5)}finally{a8.options.serverPaging=a3;a8.options.serverSorting=a6;a8.options.serverFiltering=bb;a8.options.serverAggregates=a7}return}if(a4!==y){if(!a8._rangeExists(a9,bc)){a8.prefetch(a9,a4,function(){if(ba>a9&&bc<a8.total()&&!a8._rangeExists(bc,ac.min(bc+a4,a8.total()))){a8.prefetch(bc,a4,function(){a8.range(ba,a4)})}else{a8.range(ba,a4)}})}else{if(a9<ba){a8.prefetch(bc,a4,function(){a8.range(ba,a4)})}}}},_findRange:function(bb,a9){var bf=this,a6=bf._ranges,bh,bl=[],bg,bc,ba,a5,bj,bi,a3,a8=bf.options,bd=a8.serverSorting||a8.serverPaging||a8.serverFiltering||a8.serverGrouping||a8.serverAggregates,a4,be,a7;for(bg=0,a7=a6.length;bg<a7;bg++){bh=a6[bg];if(bb>=bh.start&&bb<=bh.end){be=0;for(bc=bg;bc<a7;bc++){bh=a6[bc];a4=bf._flatData(bh.data,true);if(a4.length&&bb+be>=bh.start){bj=bh.data;bi=bh.end;if(!bd){var bk=w(bf.group()||[]).concat(S(bf.sort()||[]));a3=bf._queryProcess(bh.data,{sort:bk,filter:bf.filter()});a4=bj=a3.data;if(a3.total!==y){bi=a3.total}}ba=0;if(bb+be>bh.start){ba=bb+be-bh.start}a5=a4.length;if(bi>a9){a5=a5-(bi-a9)}be+=a5-ba;bl=bf._mergeGroups(bl,bj,ba,a5);if(a9<=bh.end&&be==a9-bb){return bl}}}break}}return[]},_mergeGroups:function(a7,a4,a6,a5){if(this._isServerGrouped()){var a3=a4.toJSON(),a8;if(a7.length){a8=a7[a7.length-1]}d(a8,a3,a6,a5);return a7.concat(a3)}return a7.concat(a4.slice(a6,a5))},skip:function(){var a3=this;if(a3._skip===y){return a3._page!==y?(a3._page-1)*(a3.take()||1):y}return a3._skip},currentRangeStart:function(){return this._currentRangeStart||0},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(a5,a3,a8,a7){var a4=this;var a6=a4._timeStamp();return function(be){var bd=false,bb={start:a5,end:a3,data:[],timestamp:a4._timeStamp()},a9,bc,ba;a4._dequeueRequest();a4.trigger(af,{response:be,type:"read"});be=a4.reader.parse(be);ba=a4._readData(be);if(ba.length){for(a9=0,bc=a4._ranges.length;a9<bc;a9++){if(a4._ranges[a9].start===a5){bd=true;bb=a4._ranges[a9];break}}if(!bd){a4._ranges.push(bb)}}bb.data=a4._observe(ba);bb.end=bb.start+a4._flatData(bb.data,true).length;a4._ranges.sort(function(bf,bg){return bf.start-bg.start});a4._total=a4.reader.total(be);if(a7||(a6>=a4._currentRequestTimeStamp||!a4._skipRequestsInProgress)){if(a8&&ba.length){a8()}else{a4.trigger(L,{})}}}},prefetch:function(a7,a4,a8){var a6=this,a5=ac.min(a7+a4,a6.total()),a3={take:a4,skip:a7,page:a7/a4+1,pageSize:a4,sort:a6._sort,filter:a6._filter,group:a6._group,aggregate:a6._aggregate};if(!a6._rangeExists(a7,a5)){clearTimeout(a6._timeout);a6._timeout=setTimeout(function(){a6._queueRequest(a3,function(){if(!a6.trigger(aL,{type:"read"})){a6.transport.read({data:a6._params(a3),success:a6._prefetchSuccessHandler(a7,a5,a8),error:function(){var a9=B.call(arguments);a6.error.apply(a6,a9)}})}else{a6._dequeueRequest()}})},100)}else{if(a8){a8()}}},_multiplePrefetch:function(a7,a4,a8){var a6=this,a5=ac.min(a7+a4,a6.total()),a3={take:a4,skip:a7,page:a7/a4+1,pageSize:a4,sort:a6._sort,filter:a6._filter,group:a6._group,aggregate:a6._aggregate};if(!a6._rangeExists(a7,a5)){if(!a6.trigger(aL,{type:"read"})){a6.transport.read({data:a6._params(a3),success:a6._prefetchSuccessHandler(a7,a5,a8,true)})}}else{if(a8){a8()}}},_rangeExists:function(a8,a5){var a7=this,a4=a7._ranges,a3,a6;for(a3=0,a6=a4.length;a3<a6;a3++){if(a4[a3].start<=a8&&a4[a3].end>=a5){return true}}return false},_removeModelFromRanges:function(a6){var a4,a8,a5;for(var a3=0,a7=this._ranges.length;a3<a7;a3++){a5=this._ranges[a3];this._eachItem(a5.data,function(a9){a4=N(a9,a6);if(a4){a8=true}});if(a8){break}}},_updateRangesLength:function(){var a4=0,a5,a7;for(var a3=0,a6=this._ranges.length;a3<a6;a3++){a5=this._ranges[a3];a5.start=a5.start-a4;a7=this._flatData(a5.data,true).length;a4=a5.end-a7;a5.end=a5.start+a7}}});var h={};h.create=function(a3,a5,a6){var a7,a4=a3.transport?aK.extend({},a3.transport):null;if(a4){a4.read=typeof a4.read===aW?{url:a4.read}:a4.read;if(a3.type==="jsdo"){a4.dataSource=a6}if(a3.type){u.data.transports=u.data.transports||{};u.data.schemas=u.data.schemas||{};if(!u.data.transports[a3.type]){u.logToConsole("Unknown DataSource transport type '"+a3.type+"'.\nVerify that registration scripts for this type are included after Kendo UI on the page.","warn")}else{if(!J(u.data.transports[a3.type])){a7=new u.data.transports[a3.type](av(a4,{data:a5}))}else{a4=av(true,{},u.data.transports[a3.type],a4)}}a3.schema=av(true,{},u.data.schemas[a3.type],a3.schema)}if(!a7){a7=aO(a4.read)?a4:new a1(a4)}}else{a7=new ar({data:a3.data||[]})}return a7};t.create=function(bc){if(b(bc)||bc instanceof ao){bc={data:bc}}var a3=bc||{},a5=a3.data,a7=a3.fields,bb=a3.table,a9=a3.select,ba,a4,a6={},a8;if(!a5&&a7&&!a3.transport){if(bb){a5=g(bb,a7)}else{if(a9){a5=m(a9,a7);if(a3.group===y&&a5[0]&&a5[0].optgroup!==y){a3.group="optgroup"}}}}if(u.data.Model&&a7&&(!a3.schema||!a3.schema.model)){for(ba=0,a4=a7.length;ba<a4;ba++){a8=a7[ba];if(a8.type){a6[a8.field]=a8}}if(!aE(a6)){a3.schema=av(true,a3.schema,{model:{fields:a6}})}}a3.data=a5;a9=null;a3.select=null;bb=null;a3.table=null;return a3 instanceof t?a3:new t(a3)};function m(bb,ba){bb=aK(bb)[0];var be=bb.options;var a5=ba[0];var a6=ba[1];var a7=[];var bd,a4;var a3;var a9;var a8;var bc;for(bd=0,a4=be.length;bd<a4;bd++){a8={};a9=be[bd];a3=a9.parentNode;if(a3===bb){a3=null}if(a9.disabled||a3&&a3.disabled){continue}if(a3){a8.optgroup=a3.label}a8[a5.field]=a9.text;bc=a9.attributes.value;if(bc&&bc.specified){bc=a9.value}else{bc=a9.text}a8[a6.field]=bc;a7.push(a8)}return a7}function g(be,a8){var a5=aK(be)[0].tBodies[0],bf=a5?a5.rows:[],a9,a3,bc,bb=a8.length,a4=[],bd,a6,ba,a7;for(a9=0,a3=bf.length;a9<a3;a9++){a6={};a7=true;bd=bf[a9].cells;for(bc=0;bc<bb;bc++){ba=bd[bc];if(ba.nodeName.toLowerCase()!=="th"){a7=false;a6[a8[bc].field]=ba.innerHTML}}if(!a7){a4.push(a6)}}return a4}var aJ=G.define({idField:"id",init:function(a7){var a6=this,a3=a6.hasChildren||a7&&a7.hasChildren,a5="items",a4={};u.data.Model.fn.init.call(a6,a7);if(typeof a6.children===aW){a5=a6.children}a4={schema:{data:a5,model:{hasChildren:a3,id:a6.idField,fields:a6.fields}}};if(typeof a6.children!==aW){av(a4,a6.children)}a4.data=a7;if(!a3){a3=a4.schema.data}if(typeof a3===aW){a3=u.getter(a3)}if(aO(a3)){a6.hasChildren=!!a3.call(a6,a6)}a6._childrenOptions=a4;if(a6.hasChildren){a6._initChildren()}a6._loaded=!!(a7&&a7._loaded)},_initChildren:function(){var a5=this;var a4,a6,a3;if(!(a5.children instanceof ae)){a4=a5.children=new ae(a5._childrenOptions);a6=a4.transport;a3=a6.parameterMap;a6.parameterMap=function(a8,a7){a8[a5.idField||"id"]=a5.id;if(a3){a8=a3(a8,a7)}return a8};a4.parent=function(){return a5};a4.bind(L,function(a7){a7.node=a7.node||a5;a5.trigger(L,a7)});a4.bind(K,function(a7){var a8=a5.parent();if(a8){a7.node=a7.node||a5;a8.trigger(K,a7)}});a5._updateChildrenField()}},append:function(a3){this._initChildren();this.loaded(true);this.children.add(a3)},hasChildren:false,level:function(){var a3=this.parentNode(),a4=0;while(a3&&a3.parentNode){a4++;a3=a3.parentNode?a3.parentNode():null}return a4},_updateChildrenField:function(){var a3=this._childrenOptions.schema.data;this[a3||"items"]=this.children.data()},_childrenLoaded:function(){this._loaded=true;this._updateChildrenField()},load:function(){var a3={};var a6="_query";var a4,a5;if(this.hasChildren){this._initChildren();a4=this.children;a3[this.idField||"id"]=this.id;if(!this._loaded){a4._data=y;a6="read"}a4.one(L,C(this._childrenLoaded,this));a5=a4[a6](a3)}else{this.loaded(true)}return a5||aK.Deferred().resolve().promise()},parentNode:function(){var a3=this.parent();return a3.parent()},loaded:function(a3){if(a3!==y){this._loaded=a3}else{return this._loaded}},shouldSerialize:function(a3){return G.fn.shouldSerialize.call(this,a3)&&a3!=="children"&&a3!=="_loaded"&&a3!=="hasChildren"&&a3!=="_childrenOptions"}});function X(a3){return function(){var a5=this._data,a4=t.fn[a3].apply(this,B.call(arguments));if(this._data!=a5){this._attachBubbleHandlers()}return a4}}var ae=t.extend({init:function(a3){var a4=aJ.define({children:a3});t.fn.init.call(this,av(true,{},{schema:{modelBase:a4,model:a4}},a3));this._attachBubbleHandlers()},_attachBubbleHandlers:function(){var a3=this;a3._data.bind(K,function(a4){a3.trigger(K,a4)})},remove:function(a5){var a4=a5.parentNode(),a6=this,a3;if(a4&&a4._initChildren){a6=a4.children}a3=t.fn.remove.call(a6,a5);if(a4&&!a6.data().length){a4.hasChildren=false}return a3},success:X("success"),data:X("data"),insert:function(a5,a4){var a3=this.parent();if(a3&&a3._initChildren){a3.hasChildren=true;a3._initChildren()}return t.fn.insert.call(this,a5,a4)},_find:function(a9,a8){var a3,a6,a5,a4;var a7=this._data;if(!a7){return}a5=t.fn[a9].call(this,a8);if(a5){return a5}a7=this._flatData(this._data);for(a3=0,a6=a7.length;a3<a6;a3++){a4=a7[a3].children;if(!(a4 instanceof ae)){continue}a5=a4[a9](a8);if(a5){return a5}}},get:function(a3){return this._find("get",a3)},getByUid:function(a3){return this._find("getByUid",a3)}});function c(bc,bb){var bf=aK(bc).children(),bh,a6,a8=[],a9,a7=bb[0].field,ba=bb[1]&&bb[1].field,be=bb[2]&&bb[2].field,bj=bb[3]&&bb[3].field,bi,a4,bg,bd,a5;function a3(bl,bk){return bl.filter(bk).add(bl.find(bk))}for(bh=0,a6=bf.length;bh<a6;bh++){a9={_loaded:true};bi=bf.eq(bh);bg=bi[0].firstChild;a5=bi.children();bc=a5.filter("ul");a5=a5.filter(":not(ul)");a4=bi.attr("data-id");if(a4){a9.id=a4}if(bg){a9[a7]=bg.nodeType==3?bg.nodeValue:a5.text()}if(ba){a9[ba]=a3(a5,"a").attr("href")}if(bj){a9[bj]=a3(a5,"img").attr("src")}if(be){bd=a3(a5,".k-sprite").prop("className");a9[be]=bd&&aK.trim(bd.replace("k-sprite",""))}if(bc.length){a9.items=c(bc.eq(0),bb)}if(bi.attr("data-hasChildren")=="true"){a9.hasChildren=true}a8.push(a9)}return a8}ae.create=function(a4){a4=a4&&a4.push?{data:a4}:a4;var a7=a4||{},a6=a7.data,a3=a7.fields,a5=a7.list;if(a6&&a6._dataSource){return a6._dataSource}if(!a6&&a3&&!a7.transport){if(a5){a6=c(a5,a3)}}a7.data=a6;return a7 instanceof ae?a7:new ae(a7)};var aH=u.Observable.extend({init:function(a5,a6,a4){u.Observable.fn.init.call(this);this._prefetching=false;this.dataSource=a5;this.prefetch=!a4;var a3=this;a5.bind("change",function(){a3._change()});a5.bind("reset",function(){a3._reset()});this._syncWithDataSource();this.setViewSize(a6)},setViewSize:function(a3){this.viewSize=a3;this._recalculate()},at:function(a5){var a4=this.pageSize,a3=true;if(a5>=this.total()){this.trigger("endreached",{index:a5});return null}if(!this.useRanges){return this.dataSource.view()[a5]}if(this.useRanges){if(a5<this.dataOffset||a5>=this.skip+a4){a3=this.range(Math.floor(a5/a4)*a4)}if(a5===this.prefetchThreshold){this._prefetch()}if(a5===this.midPageThreshold){this.range(this.nextMidRange,true)}else{if(a5===this.nextPageThreshold){this.range(this.nextFullRange)}else{if(a5===this.pullBackThreshold){if(this.offset===this.skip){this.range(this.previousMidRange)}else{this.range(this.previousFullRange)}}}}if(a3){return this.dataSource.at(a5-this.dataOffset)}else{this.trigger("endreached",{index:a5});return null}}},indexOf:function(a3){return this.dataSource.data().indexOf(a3)+this.dataOffset},total:function(){return parseInt(this.dataSource.total(),10)},next:function(){var a4=this,a3=a4.pageSize,a6=a4.skip-a4.viewSize+a3,a5=ac.max(ac.floor(a6/a3),0)*a3;this.offset=a6;this.dataSource.prefetch(a5,a3,function(){a4._goToRange(a6,true)})},range:function(a7,a8){if(this.offset===a7){return true}var a4=this,a3=this.pageSize,a5=ac.max(ac.floor(a7/a3),0)*a3,a6=this.dataSource;if(a8){a5+=a3}if(a6.inRange(a7,a3)){this.offset=a7;this._recalculate();this._goToRange(a7);return true}else{if(this.prefetch){a6.prefetch(a5,a3,function(){a4.offset=a7;a4._recalculate();a4._goToRange(a7,true)});return false}}return true},syncDataSource:function(){var a3=this.offset;this.offset=null;this.range(a3)},destroy:function(){this.unbind()},_prefetch:function(){var a4=this,a3=this.pageSize,a6=this.skip+a3,a5=this.dataSource;if(!a5.inRange(a6,a3)&&!this._prefetching&&this.prefetch){this._prefetching=true;this.trigger("prefetching",{skip:a6,take:a3});a5.prefetch(a6,a3,function(){a4._prefetching=false;a4.trigger("prefetched",{skip:a6,take:a3})})}},_goToRange:function(a3,a4){if(this.offset!==a3){return}this.dataOffset=a3;this._expanding=a4;this.dataSource.range(a3,this.pageSize);this.dataSource.enableRequestsInProgress()},_reset:function(){this._syncPending=true},_change:function(){var a3=this.dataSource;this.length=this.useRanges?a3.lastRange().end:a3.view().length;if(this._syncPending){this._syncWithDataSource();this._recalculate();this._syncPending=false;this.trigger("reset",{offset:this.offset})}this.trigger("resize");if(this._expanding){this.trigger("expand")}delete this._expanding},_syncWithDataSource:function(){var a3=this.dataSource;this._firstItemUid=a3.firstItemUid();this.dataOffset=this.offset=a3.skip()||0;this.pageSize=a3.pageSize();this.useRanges=a3.options.serverPaging},_recalculate:function(){var a3=this.pageSize,a5=this.offset,a6=this.viewSize,a4=Math.ceil(a5/a3)*a3;this.skip=a4;this.midPageThreshold=a4+a3-1;this.nextPageThreshold=a4+a6-1;this.prefetchThreshold=a4+Math.floor(a3/3*2);this.pullBackThreshold=this.offset-1;this.nextMidRange=a4+a3-a6;this.nextFullRange=a4;this.previousMidRange=a5-a6;this.previousFullRange=a4-a3}});var l=u.Observable.extend({init:function(a5,a3){var a4=this;u.Observable.fn.init.call(a4);this.dataSource=a5;this.batchSize=a3;this._total=0;this.buffer=new aH(a5,a3*3);this.buffer.bind({endreached:function(a6){a4.trigger("endreached",{index:a6.index})},prefetching:function(a6){a4.trigger("prefetching",{skip:a6.skip,take:a6.take})},prefetched:function(a6){a4.trigger("prefetched",{skip:a6.skip,take:a6.take})},reset:function(){a4._total=0;a4.trigger("reset")},resize:function(){a4._total=Math.ceil(this.length/a4.batchSize);a4.trigger("resize",{total:a4.total(),offset:this.offset})}})},syncDataSource:function(){this.buffer.syncDataSource()},at:function(a6){var a4=this.buffer,a9=a6*this.batchSize,a5=this.batchSize,a3=[],a8;if(a4.offset>a9){a4.at(a4.offset-1)}for(var a7=0;a7<a5;a7++){a8=a4.at(a9+a7);if(a8===null){break}a3.push(a8)}return a3},total:function(){return this._total},destroy:function(){this.buffer.destroy();this.unbind()}});av(true,u.data,{readers:{json:Z},Query:ag,DataSource:t,HierarchicalDataSource:ae,Node:aJ,ObservableObject:al,ObservableArray:ao,LazyObservableArray:at,LocalTransport:ar,RemoteTransport:a1,Cache:W,DataReader:Z,Model:G,Buffer:aH,BatchBuffer:l})}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.binder",["kendo.core","kendo.data"],a)}(function(){var a={id:"binder",name:"MVVM",category:"framework",description:"Model View ViewModel (MVVM) is a design pattern which helps developers separate the Model (the data) from the View (the UI).",depends:["core","data"]};(function(C,p){var D=window.kendo,i=D.Observable,s=D.data.ObservableObject,u=D.data.ObservableArray,j={}.toString,o={},c=D.Class,N=C.proxy,O="value",d="source",f="events",b="checked",q="css",E=true,e="function",B="change";(function(){var P=document.createElement("a");try{delete P.test}catch(Q){E=false}}());var l=i.extend({init:function(P,R){var Q=this;i.fn.init.call(Q);Q.source=P[0];Q.parents=P;Q.path=R;Q.dependencies={};Q.dependencies[R]=true;Q.observable=Q.source instanceof i;Q._access=function(S){Q.dependencies[S.field]=true};if(Q.observable){Q._change=function(S){Q.change(S)};Q.source.bind(B,Q._change)}},_parents:function(){var P=this.parents;var R=this.get();if(R&&typeof R.parent=="function"){var Q=R.parent();if(C.inArray(Q,P)<0){P=[Q].concat(P)}}return P},change:function(T){var P,Q,S=T.field,R=this;if(R.path==="this"){R.trigger(B,T)}else{for(P in R.dependencies){if(P.indexOf(S)===0){Q=P.charAt(S.length);if(!Q||Q==="."||Q==="["){R.trigger(B,T);break}}}}},start:function(P){P.bind("get",this._access)},stop:function(P){P.unbind("get",this._access)},get:function(){var R=this,S=R.source,Q=0,T=R.path,P=S;if(!R.observable){return P}R.start(R.source);P=S.get(T);while(P===p&&S){S=R.parents[++Q];if(S instanceof s){P=S.get(T)}}if(P===p){S=R.source;while(P===p&&S){S=S.parent();if(S instanceof s){P=S.get(T)}}}if(typeof P==="function"){Q=T.lastIndexOf(".");if(Q>0){S=S.get(T.substring(0,Q))}R.start(S);if(S!==R.source){P=P.call(S,R.source)}else{P=P.call(S)}R.stop(S)}if(S&&S!==R.source){R.currentSource=S;S.unbind(B,R._change).bind(B,R._change)}R.stop(R.source);return P},set:function(Q){var P=this.currentSource||this.source;var R=D.getter(this.path)(P);if(typeof R==="function"){if(P!==this.source){R.call(P,this.source,Q)}else{R.call(P,Q)}}else{P.set(this.path,Q)}},destroy:function(){if(this.observable){this.source.unbind(B,this._change);if(this.currentSource){this.currentSource.unbind(B,this._change)}}this.unbind()}});var K=l.extend({get:function(){var R=this.source,S=this.path,P=0,Q;Q=R.get(S);while(!Q&&R){R=this.parents[++P];if(R instanceof s){Q=R.get(S)}}return N(Q,R)}});var A=l.extend({init:function(R,S,P){var Q=this;l.fn.init.call(Q,R,S);Q.template=P},render:function(Q){var P;this.start(this.source);P=D.render(this.template,Q);this.stop(this.source);return P}});var G=c.extend({init:function(Q,R,P){this.element=Q;this.bindings=R;this.options=P},bind:function(R,Q){var P=this;R=Q?R[Q]:R;R.bind(B,function(S){P.refresh(Q||S)});P.refresh(Q)},destroy:function(){}});var w=G.extend({dataType:function(){var P=this.element.getAttribute("data-type")||this.element.type||"text";return P.toLowerCase()},parsedValue:function(){return this._parseValue(this.element.value,this.dataType())},_parseValue:function(Q,P){if(P=="date"){Q=D.parseDate(Q,"yyyy-MM-dd")}else{if(P=="datetime-local"){Q=D.parseDate(Q,["yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm"])}else{if(P=="number"){Q=D.parseFloat(Q)}else{if(P=="boolean"){Q=Q.toLowerCase();if(D.parseFloat(Q)!==null){Q=Boolean(D.parseFloat(Q))}else{Q=Q.toLowerCase()==="true"}}}}}return Q}});o.attr=G.extend({refresh:function(P){this.element.setAttribute(P,this.bindings.attr[P].get())}});o.css=G.extend({init:function(Q,R,P){G.fn.init.call(this,Q,R,P);this.classes={}},refresh:function(R){var Q=C(this.element),S=this.bindings.css[R],P=this.classes[R]=S.get();if(P){Q.addClass(R)}else{Q.removeClass(R)}}});o.style=G.extend({refresh:function(P){this.element.style[P]=this.bindings.style[P].get()||""}});o.enabled=G.extend({refresh:function(){if(this.bindings.enabled.get()){this.element.removeAttribute("disabled")}else{this.element.setAttribute("disabled","disabled")}}});o.readonly=G.extend({refresh:function(){if(this.bindings.readonly.get()){this.element.setAttribute("readonly","readonly")}else{this.element.removeAttribute("readonly")}}});o.disabled=G.extend({refresh:function(){if(this.bindings.disabled.get()){this.element.setAttribute("disabled","disabled")}else{this.element.removeAttribute("disabled")}}});o.events=G.extend({init:function(Q,R,P){G.fn.init.call(this,Q,R,P);this.handlers={}},refresh:function(Q){var P=C(this.element),S=this.bindings.events[Q],R=this.handlers[Q];if(R){P.off(Q,R)}R=this.handlers[Q]=S.get();P.on(Q,S.source,R)},destroy:function(){var P=C(this.element),Q;for(Q in this.handlers){P.off(Q,this.handlers[Q])}}});o.text=G.extend({refresh:function(){var P=this.bindings.text.get();var Q=this.element.getAttribute("data-format")||"";if(P==null){P=""}C(this.element).text(D.toString(P,Q))}});o.visible=G.extend({refresh:function(){if(this.bindings.visible.get()){this.element.style.display=""}else{this.element.style.display="none"}}});o.invisible=G.extend({refresh:function(){if(!this.bindings.invisible.get()){this.element.style.display=""}else{this.element.style.display="none"}}});o.html=G.extend({refresh:function(){this.element.innerHTML=this.bindings.html.get()}});o.value=w.extend({init:function(Q,R,P){w.fn.init.call(this,Q,R,P);this._change=N(this.change,this);this.eventName=P.valueUpdate||B;C(this.element).on(this.eventName,this._change);this._initChange=false},change:function(){this._initChange=this.eventName!=B;this.bindings[O].set(this.parsedValue());this._initChange=false},refresh:function(){if(!this._initChange){var Q=this.bindings[O].get();if(Q==null){Q=""}var P=this.dataType();if(P=="date"){Q=D.toString(Q,"yyyy-MM-dd")}else{if(P=="datetime-local"){Q=D.toString(Q,"yyyy-MM-ddTHH:mm:ss")}}this.element.value=Q}this._initChange=false},destroy:function(){C(this.element).off(this.eventName,this._change)}});o.source=G.extend({init:function(Q,S,P){G.fn.init.call(this,Q,S,P);var R=this.bindings.source.get();if(R instanceof D.data.DataSource&&P.autoBind!==false){R.fetch()}},refresh:function(R){var P=this,Q=P.bindings.source.get();if(Q instanceof u||Q instanceof D.data.DataSource){R=R||{};if(R.action=="add"){P.add(R.index,R.items)}else{if(R.action=="remove"){P.remove(R.index,R.items)}else{if(R.action!="itemchange"){P.render()}}}}else{P.render()}},container:function(){var P=this.element;if(P.nodeName.toLowerCase()=="table"){if(!P.tBodies[0]){P.appendChild(document.createElement("tbody"))}P=P.tBodies[0]}return P},template:function(){var P=this.options,Q=P.template,R=this.container().nodeName.toLowerCase();if(!Q){if(R=="select"){if(P.valueField||P.textField){Q=D.format('<option value="#:{0}#">#:{1}#</option>',P.valueField||P.textField,P.textField||P.valueField)}else{Q="<option>#:data#</option>"}}else{if(R=="tbody"){Q="<tr><td>#:data#</td></tr>"}else{if(R=="ul"||R=="ol"){Q="<li>#:data#</li>"}else{Q="#:data#"}}}Q=D.template(Q)}return Q},add:function(T,U){var S=this.container(),W,X,Q,P,V=S.cloneNode(false),R=S.children[T];C(V).html(D.render(this.template(),U));if(V.children.length){W=this.bindings.source._parents();for(X=0,Q=U.length;X<Q;X++){P=V.children[0];S.insertBefore(P,R||null);x(P,U[X],this.options.roles,[U[X]].concat(W))}}},remove:function(R,Q){var P,S=this.container();for(P=0;P<Q.length;P++){var T=S.children[R];g(T,true);if(T.parentNode==S){S.removeChild(T)}}},render:function(){var U=this.bindings.source.get(),Q,P,T,R=this.container(),S=this.template();if(U==null){return}if(U instanceof D.data.DataSource){U=U.view()}if(!(U instanceof u)&&j.call(U)!=="[object Array]"){U=[U]}if(this.bindings.template){n(R,true);C(R).html(this.bindings.template.render(U));if(R.children.length){Q=this.bindings.source._parents();for(P=0,T=U.length;P<T;P++){x(R.children[P],U[P],this.options.roles,[U[P]].concat(Q))}}}else{C(R).html(D.render(S,U))}}});o.input={checked:w.extend({init:function(Q,R,P){w.fn.init.call(this,Q,R,P);this._change=N(this.change,this);C(this.element).change(this._change)},change:function(){var R=this.element;var T=this.value();if(R.type=="radio"){T=this.parsedValue();this.bindings[b].set(T)}else{if(R.type=="checkbox"){var S=this.bindings[b].get();var P;if(S instanceof u){T=this.parsedValue();if(T instanceof Date){for(var Q=0;Q<S.length;Q++){if(S[Q] instanceof Date&&+S[Q]===+T){P=Q;break}}}else{P=S.indexOf(T)}if(P>-1){S.splice(P,1)}else{S.push(T)}}else{this.bindings[b].set(T)}}}},refresh:function(){var U=this.bindings[b].get(),T=U,S=this.dataType(),R=this.element;if(R.type=="checkbox"){if(T instanceof u){var P=-1;U=this.parsedValue();if(U instanceof Date){for(var Q=0;Q<T.length;Q++){if(T[Q] instanceof Date&&+T[Q]===+U){P=Q;break}}}else{P=T.indexOf(U)}R.checked=P>=0}else{R.checked=T}}else{if(R.type=="radio"&&U!=null){if(S=="date"){U=D.toString(U,"yyyy-MM-dd")}else{if(S=="datetime-local"){U=D.toString(U,"yyyy-MM-ddTHH:mm:ss")}}if(R.value===U.toString()){R.checked=true}else{R.checked=false}}}},value:function(){var P=this.element,Q=P.value;if(P.type=="checkbox"){Q=P.checked}return Q},destroy:function(){C(this.element).off(B,this._change)}})};o.select={source:o.source.extend({refresh:function(R){var P=this,Q=P.bindings.source.get();if(Q instanceof u||Q instanceof D.data.DataSource){R=R||{};if(R.action=="add"){P.add(R.index,R.items)}else{if(R.action=="remove"){P.remove(R.index,R.items)}else{if(R.action=="itemchange"||R.action===p){P.render();if(P.bindings.value){if(P.bindings.value){var S=z(P.bindings.value.get(),C(P.element).data("valueField"));if(S===null){P.element.selectedIndex=-1}else{P.element.value=S}}}}}}}else{P.render()}}}),value:w.extend({init:function(Q,R,P){w.fn.init.call(this,Q,R,P);this._change=N(this.change,this);C(this.element).change(this._change)},parsedValue:function(){var R=this.dataType();var Q=[];var U,S,P,T;for(P=0,T=this.element.options.length;P<T;P++){S=this.element.options[P];if(S.selected){U=S.attributes.value;if(U&&U.specified){U=S.value}else{U=S.text}Q.push(this._parseValue(U,R))}}return Q},change:function(){var aa=[],S=this.element,P,W=this.options.valueField||this.options.textField,Q=this.options.valuePrimitive,U,V,Z,Y,R;for(Y=0,R=S.options.length;Y<R;Y++){U=S.options[Y];if(U.selected){Z=U.attributes.value;if(Z&&Z.specified){Z=U.value}else{Z=U.text}if(W){aa.push(Z)}else{aa.push(this._parseValue(Z,this.dataType()))}}}if(W){P=this.bindings.source.get();if(P instanceof D.data.DataSource){P=P.view()}for(V=0;V<aa.length;V++){for(Y=0,R=P.length;Y<R;Y++){var X=P[Y].get(W);var T=String(X)===aa[V];if(T){aa[V]=P[Y];break}}}}Z=this.bindings[O].get();if(Z instanceof u){Z.splice.apply(Z,[0,Z.length].concat(aa))}else{if(!Q&&(Z instanceof s||Z===null||Z===p||!W)){this.bindings[O].set(aa[0])}else{this.bindings[O].set(aa[0].get(W))}}},refresh:function(){var Q,P=this.element,Y=P.options,V=this.bindings[O].get(),W=V,U=this.options.valueField||this.options.textField,X=false,R=this.dataType(),T;if(!(W instanceof u)){W=new u([V])}P.selectedIndex=-1;for(var S=0;S<W.length;S++){V=W[S];if(U&&V instanceof s){V=V.get(U)}if(R=="date"){V=D.toString(W[S],"yyyy-MM-dd")}else{if(R=="datetime-local"){V=D.toString(W[S],"yyyy-MM-ddTHH:mm:ss")}}for(Q=0;Q<Y.length;Q++){T=Y[Q].value;if(T===""&&V!==""){T=Y[Q].text}if(V!=null&&T==V.toString()){Y[Q].selected=true;X=true}}}},destroy:function(){C(this.element).off(B,this._change)}})};function H(P,R,Q){return G.extend({init:function(U,V,S){var T=this;G.fn.init.call(T,U.element[0],V,S);T.widget=U;T._dataBinding=N(T.dataBinding,T);T._dataBound=N(T.dataBound,T);T._itemChange=N(T.itemChange,T)},itemChange:function(S){x(S.item[0],S.data,this._ns(S.ns),[S.data].concat(this.bindings[P]._parents()))},dataBinding:function(W){var S,U,V=this.widget,T=W.removedItems||V.items();for(S=0,U=T.length;S<U;S++){g(T[S],false)}},_ns:function(T){T=T||D.ui;var S=[D.ui,D.dataviz.ui,D.mobile.ui];S.splice(C.inArray(T,S),1);S.unshift(T);return D.rolesFromNamespaces(S)},dataBound:function(V){var aa,T,U=this.widget,W=V.addedItems||U.items(),S=U[R],X,Y,Z=D.data.HierarchicalDataSource;if(Z&&S instanceof Z){return}if(W.length){X=V.addedDataItems||S.flatView();Y=this.bindings[P]._parents();for(aa=0,T=X.length;aa<T;aa++){x(W[aa],X[aa],this._ns(V.ns),[X[aa]].concat(Y))}}},refresh:function(X){var U=this,W,V=U.widget,T,S;X=X||{};if(!X.action){U.destroy();V.bind("dataBinding",U._dataBinding);V.bind("dataBound",U._dataBound);V.bind("itemChange",U._itemChange);W=U.bindings[P].get();if(V[R] instanceof D.data.DataSource&&V[R]!=W){if(W instanceof D.data.DataSource){V[Q](W)}else{if(W&&W._dataSource){V[Q](W._dataSource)}else{V[R].data(W);T=D.ui.Select&&V instanceof D.ui.Select;S=D.ui.MultiSelect&&V instanceof D.ui.MultiSelect;if(U.bindings.value&&(T||S)){V.value(z(U.bindings.value.get(),V.options.dataValueField))}}}}}},destroy:function(){var S=this.widget;S.unbind("dataBinding",this._dataBinding);S.unbind("dataBound",this._dataBound);S.unbind("itemChange",this._itemChange)}})}o.widget={events:G.extend({init:function(Q,R,P){G.fn.init.call(this,Q.element[0],R,P);this.widget=Q;this.handlers={}},refresh:function(P){var R=this.bindings.events[P],Q=this.handlers[P];if(Q){this.widget.unbind(P,Q)}Q=R.get();this.handlers[P]=function(S){S.data=R.source;Q(S);if(S.data===R.source){delete S.data}};this.widget.bind(P,this.handlers[P])},destroy:function(){var P;for(P in this.handlers){this.widget.unbind(P,this.handlers[P])}}}),checked:G.extend({init:function(Q,R,P){G.fn.init.call(this,Q.element[0],R,P);this.widget=Q;this._change=N(this.change,this);this.widget.bind(B,this._change)},change:function(){this.bindings[b].set(this.value())},refresh:function(){this.widget.check(this.bindings[b].get()===true)},value:function(){var P=this.element,Q=P.value;if(Q=="on"||Q=="off"){Q=P.checked}return Q},destroy:function(){this.widget.unbind(B,this._change)}}),visible:G.extend({init:function(Q,R,P){G.fn.init.call(this,Q.element[0],R,P);this.widget=Q},refresh:function(){var P=this.bindings.visible.get();this.widget.wrapper[0].style.display=P?"":"none"}}),invisible:G.extend({init:function(Q,R,P){G.fn.init.call(this,Q.element[0],R,P);this.widget=Q},refresh:function(){var P=this.bindings.invisible.get();this.widget.wrapper[0].style.display=P?"none":""}}),enabled:G.extend({init:function(Q,R,P){G.fn.init.call(this,Q.element[0],R,P);this.widget=Q},refresh:function(){if(this.widget.enable){this.widget.enable(this.bindings.enabled.get())}}}),disabled:G.extend({init:function(Q,R,P){G.fn.init.call(this,Q.element[0],R,P);this.widget=Q},refresh:function(){if(this.widget.enable){this.widget.enable(!this.bindings.disabled.get())}}}),source:H("source","dataSource","setDataSource"),value:G.extend({init:function(R,S,P){G.fn.init.call(this,R.element[0],S,P);this.widget=R;this._change=C.proxy(this.change,this);this.widget.first(B,this._change);var Q=this.bindings.value.get();this._valueIsObservableObject=!P.valuePrimitive&&(Q==null||Q instanceof s);this._valueIsObservableArray=Q instanceof u;this._initChange=false},_source:function(){var P;if(this.widget.dataItem){P=this.widget.dataItem();if(P&&P instanceof s){return[P]}}if(this.bindings.source){P=this.bindings.source.get()}if(!P||P instanceof D.data.DataSource){P=this.widget.dataSource.flatView()}return P},change:function(){var W=this.widget.value(),T=this.options.dataValueField||this.options.dataTextField,R=j.call(W)==="[object Array]",X=this._valueIsObservableObject,S,Y,Z=[],aa,V,U,Q,P;this._initChange=true;if(T){if(W===""&&(X||this.options.valuePrimitive)){W=null}else{P=this._source();if(R){Y=W.length;Z=W.slice(0)}for(U=0,Q=P.length;U<Q;U++){aa=P[U];V=aa.get(T);if(R){for(S=0;S<Y;S++){if(V==Z[S]){Z[S]=aa;break}}}else{if(V==W){W=X?aa:V;break}}}if(Z[0]){if(this._valueIsObservableArray){W=Z}else{if(X||!T){W=Z[0]}else{W=Z[0].get(T)}}}}}this.bindings.value.set(W);this._initChange=false},refresh:function(){if(!this._initChange){var R=this.widget;var X=R.options;var Q=X.dataTextField;var W=X.dataValueField||Q;var S=this.bindings.value.get();var V=X.text||"";var T=0,P;var U=[];if(S===p){S=null}if(W){if(S instanceof u){for(P=S.length;T<P;T++){U[T]=S[T].get(W)}S=U}else{if(S instanceof s){V=S.get(Q);S=S.get(W)}}}if(X.autoBind===false&&!X.cascadeFrom&&R.listView&&!R.listView.bound()){if(Q===W&&!V){V=S}if(!V&&(S||S===0)&&X.valuePrimitive){R.value(S)}else{R._preselect(S,V)}}else{R.value(S)}}this._initChange=false},destroy:function(){this.widget.unbind(B,this._change)}}),gantt:{dependencies:H("dependencies","dependencies","setDependenciesDataSource")},multiselect:{value:G.extend({init:function(Q,R,P){G.fn.init.call(this,Q.element[0],R,P);this.widget=Q;this._change=C.proxy(this.change,this);this.widget.first(B,this._change);this._initChange=false},change:function(){var X=this,aa=X.bindings[O].get(),P=X.options.valuePrimitive,ac=P?X.widget.value():X.widget.dataItems();var Z=this.options.dataValueField||this.options.dataTextField;ac=ac.slice(0);X._initChange=true;if(aa instanceof u){var W=[];var T=ac.length;var V=0,U=0;var S=aa[V];var Y=false;var R;var Q;var ab;while(S!==p){ab=false;for(U=0;U<T;U++){if(P){Y=ac[U]==S}else{Q=ac[U];Q=Q.get?Q.get(Z):Q;Y=Q==(S.get?S.get(Z):S)}if(Y){ac.splice(U,1);T-=1;ab=true;break}}if(!ab){W.push(S);y(aa,V,1);R=V}else{V+=1}S=aa[V]}y(aa,aa.length,0,ac);if(W.length){aa.trigger("change",{action:"remove",items:W,index:R})}if(ac.length){aa.trigger("change",{action:"add",items:ac,index:aa.length-1})}}else{X.bindings[O].set(ac)}X._initChange=false},refresh:function(){if(!this._initChange){var X=this.options,R=this.widget,T=X.dataValueField||X.dataTextField,U=this.bindings.value.get(),Q=U,V=0,P,W=[],S;if(U===p){U=null}if(T){if(U instanceof u){for(P=U.length;V<P;V++){S=U[V];W[V]=S.get?S.get(T):S}U=W}else{if(U instanceof s){U=U.get(T)}}}if(X.autoBind===false&&X.valuePrimitive!==true&&!R._isBound()){R._preselect(Q,U)}else{R.value(U)}}},destroy:function(){this.widget.unbind(B,this._change)}})},scheduler:{source:H("source","dataSource","setDataSource").extend({dataBound:function(V){var P;var R;var U=this.widget;var T=V.addedItems||U.items();var S,Q;if(T.length){S=V.addedDataItems||U.dataItems();Q=this.bindings.source._parents();for(P=0,R=S.length;P<R;P++){x(T[P],S[P],this._ns(V.ns),[S[P]].concat(Q))}}}})}};var y=function(U,W,S,X){X=X||[];S=S||0;var T=X.length;var R=U.length;var Q=[].slice.call(U,W+S);var P=Q.length;var V;if(T){T=W+T;V=0;for(;W<T;W++){U[W]=X[V];V++}U.length=T}else{if(S){U.length=W;S+=W;while(W<S){delete U[--S]}}}if(P){P=W+P;V=0;for(;W<P;W++){U[W]=Q[V];V++}U.length=P}W=U.length;while(W<R){delete U[W];W++}};var F=c.extend({init:function(Q,P){this.target=Q;this.options=P;this.toDestroy=[]},bind:function(S){var U,V,R,W,T,Q,X=this instanceof h,P=this.binders();for(U in S){if(U==O){V=true}else{if(U==d){R=true}else{if(U==f&&!X){W=true}else{if(U==b){T=true}else{if(U==q){Q=true}else{this.applyBinding(U,S,P)}}}}}}if(R){this.applyBinding(d,S,P)}if(V){this.applyBinding(O,S,P)}if(T){this.applyBinding(b,S,P)}if(W&&!X){this.applyBinding(f,S,P)}if(Q&&!X){this.applyBinding(q,S,P)}},binders:function(){return o[this.target.nodeName.toLowerCase()]||{}},applyBinding:function(R,V,T){var Q=T[R]||o[R],P=this.toDestroy,S,U=V[R];if(Q){Q=new Q(this.target,V,this.options);P.push(Q);if(U instanceof l){Q.bind(U);P.push(U)}else{for(S in U){Q.bind(U,S);P.push(U[S])}}}else{if(R!=="template"){throw new Error("The "+R+" binding is not supported by the "+this.target.nodeName.toLowerCase()+" element")}}},destroy:function(){var P,R,Q=this.toDestroy;for(P=0,R=Q.length;P<R;P++){Q[P].destroy()}}});var h=F.extend({binders:function(){return o.widget[this.target.options.name.toLowerCase()]||{}},applyBinding:function(R,V,T){var Q=T[R]||o.widget[R],P=this.toDestroy,S,U=V[R];if(Q){Q=new Q(this.target,V,this.target.options);P.push(Q);if(U instanceof l){Q.bind(U);P.push(U)}else{for(S in U){Q.bind(U,S);P.push(U[S])}}}else{throw new Error("The "+R+" binding is not supported by the "+this.target.options.name+" widget")}}});function m(P,Q){var R=D.initWidget(P,{},Q);if(R){return new h(R)}}var L=/[A-Za-z0-9_\-]+:(\{([^}]*)\}|[^,}]+)/g,I=/\s/g;function M(S){var X={},V,P,Q,R,W,U,T;T=S.match(L);for(V=0,P=T.length;V<P;V++){Q=T[V];R=Q.indexOf(":");W=Q.substring(0,R);U=Q.substring(R+1);if(U.charAt(0)=="{"){U=M(U)}X[W]=U}return X}function t(T,R,Q){var S,P={};for(S in T){P[S]=new Q(R,T[S])}return P}function x(U,P,V,Y){var T=U.getAttribute("data-"+D.ns+"role"),Z,X=U.getAttribute("data-"+D.ns+"bind"),R=[],aa=true,Q,ab={},W;Y=Y||[P];if(T||X){J(U,false)}if(T){W=m(U,V)}if(X){X=M(X.replace(I,""));if(!W){ab=D.parseOptions(U,{textField:"",valueField:"",template:"",valueUpdate:B,valuePrimitive:false,autoBind:true});ab.roles=V;W=new F(U,ab)}W.source=P;Q=t(X,Y,l);if(ab.template){Q.template=new A(Y,"",ab.template)}if(Q.click){X.events=X.events||{};X.events.click=X.click;Q.click.destroy();delete Q.click}if(Q.source){aa=false}if(X.attr){Q.attr=t(X.attr,Y,l)}if(X.style){Q.style=t(X.style,Y,l)}if(X.events){Q.events=t(X.events,Y,K)}if(X.css){Q.css=t(X.css,Y,l)}W.bind(Q)}if(W){U.kendoBindingTarget=W}var S=U.children;if(aa&&S){for(Z=0;Z<S.length;Z++){R[Z]=S[Z]}for(Z=0;Z<R.length;Z++){x(R[Z],P,V,Y)}}}function k(U,Q){var P,T,S,R=D.rolesFromNamespaces([].slice.call(arguments,2));Q=D.observable(Q);U=C(U);for(P=0,T=U.length;P<T;P++){S=U[P];if(S.nodeType===1){x(S,Q,R)}}}function J(Q,P){var S=Q.kendoBindingTarget;if(S){S.destroy();if(E){delete Q.kendoBindingTarget}else{if(Q.removeAttribute){Q.removeAttribute("kendoBindingTarget")}else{Q.kendoBindingTarget=null}}}if(P){var R=D.widgetInstance(C(Q));if(R&&typeof R.destroy===e){R.destroy()}}}function g(Q,P){J(Q,P);n(Q,P)}function n(S,R){var Q=S.children;if(Q){for(var P=0,T=Q.length;P<T;P++){g(Q[P],R)}}}function v(R){var P,Q;R=C(R);for(P=0,Q=R.length;P<Q;P++){g(R[P],false)}}function r(R,Q){var P=R.element,S=P[0].kendoBindingTarget;if(S){k(P,S.source,Q)}}function z(U,R){var Q=[];var P=0;var T;var S;if(!R){return U}if(U instanceof u){for(T=U.length;P<T;P++){S=U[P];Q[P]=S.get?S.get(R):S[R]}U=Q}else{if(U instanceof s){U=U.get(R)}}return U}D.unbind=v;D.bind=k;D.data.binders=o;D.data.Binder=G;D.notify=r;D.observable=function(P){if(!(P instanceof s)){P=new s(P)}return P};D.observableHierarchy=function(R){var Q=D.data.HierarchicalDataSource.create(R);function P(U){var T,S;for(T=0;T<U.length;T++){U[T]._initChildren();S=U[T].children;S.fetch();U[T].items=S.data();P(U[T].items)}}Q.fetch();P(Q.data());Q._data._dataSource=Q;return Q._data}}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.fx",["kendo.core"],a)}(function(){var a={id:"fx",name:"Effects",category:"framework",description:"Required for animation effects in all Kendo UI widgets.",depends:["core"]};(function(R,q){var V=window.kendo,B=V.effects,ad=R.each,p=R.extend,ah=R.proxy,ab=V.support,g=ab.browser,J=ab.transforms,l=ab.transitions,n={scale:0,scalex:0,scaley:0,scale3d:0},i={translate:0,translatex:0,translatey:0,translate3d:0},N=typeof document.documentElement.style.zoom!=="undefined"&&!J,M=/matrix3?d?\s*\(.*,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?/i,al=/^(-?[\d\.\-]+)?[\w\s]*,?\s*(-?[\d\.\-]+)?[\w\s]*/i,F=/translatex?$/i,X=/(zoom|fade|expand)(\w+)/,b=/(zoom|fade|expand)/,r=/[xy]$/i,Y=["perspective","rotate","rotatex","rotatey","rotatez","rotate3d","scale","scalex","scaley","scalez","scale3d","skew","skewx","skewy","translate","translatex","translatey","translatez","translate3d","matrix","matrix3d"],U=["rotate","scale","scalex","scaley","skew","skewx","skewy","translate","translatex","translatey","matrix"],an={rotate:"deg",scale:"",skew:"px",translate:"px"},W=J.css,ai=Math.round,v="",am="px",Z="none",P="auto",j="width",Q="height",ag="hidden",A="origin",H="abortId",ac="overflow",z="translate",aa="position",af="completeCallback",ak=W+"transition",aj=W+"transform",ap=W+"backface-visibility",x=W+"perspective",ao="1500px",k="perspective("+ao+")",m={left:{reverse:"right",property:"left",transition:"translatex",vertical:false,modifier:-1},right:{reverse:"left",property:"left",transition:"translatex",vertical:false,modifier:1},down:{reverse:"up",property:"top",transition:"translatey",vertical:true,modifier:1},up:{reverse:"down",property:"top",transition:"translatey",vertical:true,modifier:-1},top:{reverse:"bottom"},bottom:{reverse:"top"},"in":{reverse:"out",modifier:-1},out:{reverse:"in",modifier:1},vertical:{reverse:"vertical"},horizontal:{reverse:"horizontal"}};V.directions=m;p(R.fn,{kendoStop:function(ar,aq){if(l){return B.stopQueue(this,ar||false,aq||false)}else{return this.stop(ar,aq)}}});if(J&&!l){ad(U,function(aq,ar){R.fn[ar]=function(av){if(typeof av=="undefined"){return C(this,ar)}else{var au=R(this)[0],at=ar+"("+av+an[ar.replace(r,"")]+")";if(au.style.cssText.indexOf(aj)==-1){R(this).css(aj,at)}else{au.style.cssText=au.style.cssText.replace(new RegExp(ar+"\\(.*?\\)","i"),at)}}return this};R.fx.step[ar]=function(at){R(at.elem)[ar](at.now)}});var E=R.fx.prototype.cur;R.fx.prototype.cur=function(){if(U.indexOf(this.prop)!=-1){return parseFloat(R(this.elem)[this.prop]())}return E.apply(this,arguments)}}V.toggleClass=function(at,ar,aq,au){if(ar){ar=ar.split(" ");if(l){aq=p({exclusive:"all",duration:400,ease:"ease-out"},aq);at.css(ak,aq.exclusive+" "+aq.duration+"ms "+aq.ease);setTimeout(function(){at.css(ak,"").css(Q)},aq.duration)}ad(ar,function(av,aw){at.toggleClass(aw,au)})}return at};V.parseEffects=function(aq,at){var ar={};if(typeof aq==="string"){ad(aq.split(" "),function(au,ay){var ax=!b.test(ay),av=ay.replace(X,function(aC,aB,aD){return aB+":"+aD.toLowerCase()}),aw=av.split(":"),aA=aw[1],az={};if(aw.length>1){az.direction=at&&ax?m[aA].reverse:aA}ar[aw[0]]=az})}else{ad(aq,function(au){var av=this.direction;if(av&&at&&!b.test(au)){this.direction=m[av].reverse}ar[au]=this})}return ar};function ae(aq){return parseInt(aq,10)}function h(aq,ar){return ae(aq.css(ar))}function G(at){var ar=[];for(var aq in at){ar.push(aq)}return ar}function c(ar){for(var aq in ar){if(Y.indexOf(aq)!=-1&&U.indexOf(aq)==-1){delete ar[aq]}}return ar}function o(au,at){var aw=[],av={},aq,ar,ax,ay;for(ar in at){aq=ar.toLowerCase();ay=J&&Y.indexOf(aq)!=-1;if(!ab.hasHW3D&&ay&&U.indexOf(aq)==-1){delete at[ar]}else{ax=at[ar];if(ay){aw.push(ar+"("+ax+")")}else{av[ar]=ax}}}if(aw.length){av[aj]=aw.join(" ")}return av}if(l){p(B,{transition:function(ar,aw,az){var av,at=0,ay=ar.data("keys")||[],aq;az=p({duration:200,ease:"ease-out",complete:null,exclusive:"all"},az);var au=false;var ax=function(){if(!au){au=true;if(aq){clearTimeout(aq);aq=null}ar.removeData(H).dequeue().css(ak,"").css(ak);az.complete.call(ar)}};az.duration=R.fx?R.fx.speeds[az.duration]||az.duration:az.duration;av=o(ar,aw);R.merge(ay,G(av));ar.data("keys",R.unique(ay)).height();ar.css(ak,az.exclusive+" "+az.duration+"ms "+az.ease).css(ak);ar.css(av).css(aj);if(l.event){ar.one(l.event,ax);if(az.duration!==0){at=500}}aq=setTimeout(ax,az.duration+at);ar.data(H,aq);ar.data(af,ax)},stopQueue:function(at,av,ar){var au,aq=at.data("keys"),ax=!ar&&aq,aw=at.data(af);if(ax){au=V.getComputedStyles(at[0],aq)}if(aw){aw()}if(ax){at.css(au)}return at.removeData("keys").stop(av)}})}function C(at,av){if(J){var ar=at.css(aj);if(ar==Z){return av=="scale"?1:0}var aq=ar.match(new RegExp(av+"\\s*\\(([\\d\\w\\.]+)")),au=0;if(aq){au=ae(aq[1])}else{aq=ar.match(M)||[0,0,0,0,0];av=av.toLowerCase();if(F.test(av)){au=parseFloat(aq[3]/aq[2])}else{if(av=="translatey"){au=parseFloat(aq[4]/aq[2])}else{if(av=="scale"){au=parseFloat(aq[2])}else{if(av=="rotate"){au=parseFloat(Math.atan2(aq[2],aq[1]))}}}}}return au}else{return parseFloat(at.css(av))}}var D=V.Class.extend({init:function(ar,aq){var at=this;at.element=ar;at.effects=[];at.options=aq;at.restore=[]},run:function(at){var az=this,aE,aC,aq,av=at.length,ay=az.element,aF=az.options,aD=R.Deferred(),ar={},ax={},aA,au,aw;az.effects=at;aD.then(R.proxy(az,"complete"));ay.data("animating",true);for(aC=0;aC<av;aC++){aE=at[aC];aE.setReverse(aF.reverse);aE.setOptions(aF);az.addRestoreProperties(aE.restore);aE.prepare(ar,ax);au=aE.children();for(aq=0,aw=au.length;aq<aw;aq++){au[aq].duration(aF.duration).run()}}for(var aB in aF.effects){p(ax,aF.effects[aB].properties)}if(!ay.is(":visible")){p(ar,{display:ay.data("olddisplay")||"block"})}if(J&&!aF.reset){aA=ay.data("targetTransform");if(aA){ar=p(aA,ar)}}ar=o(ay,ar);if(J&&!l){ar=c(ar)}ay.css(ar).css(aj);for(aC=0;aC<av;aC++){at[aC].setup()}if(aF.init){aF.init()}ay.data("targetTransform",ax);B.animate(ay,ax,p({},aF,{complete:aD.resolve}));return aD.promise()},stop:function(){R(this.element).kendoStop(true,true)},addRestoreProperties:function(at){var ar=this.element,av,aq=0,au=at.length;for(;aq<au;aq++){av=at[aq];this.restore.push(av);if(!ar.data(av)){ar.data(av,ar.css(av))}}},restoreCallback:function(){var ar=this.element;for(var aq=0,at=this.restore.length;aq<at;aq++){var au=this.restore[aq];ar.css(au,ar.data(au))}},complete:function(){var aw=this,aq=0,at=aw.element,ar=aw.options,av=aw.effects,au=av.length;at.removeData("animating").dequeue();if(ar.hide){at.data("olddisplay",at.css("display")).hide()}this.restoreCallback();if(N&&!J){setTimeout(R.proxy(this,"restoreCallback"),0)}for(;aq<au;aq++){av[aq].teardown()}if(ar.completeCallback){ar.completeCallback(at)}}});B.promise=function(av,ar){var ay=[],ax,au=new D(av,ar),at=V.parseEffects(ar.effects),aw;ar.effects=at;for(var aq in at){ax=B[I(aq)];if(ax){aw=new ax(av,at[aq].direction);ay.push(aw)}}if(ay[0]){au.run(ay)}else{if(!av.is(":visible")){av.css({display:av.data("olddisplay")||"block"}).css("display")}if(ar.init){ar.init()}av.dequeue();au.complete()}};p(B,{animate:function(au,ar,aq){var at=aq.transition!==false;delete aq.transition;if(l&&"transition" in B&&at){B.transition(au,ar,aq)}else{if(J){au.animate(c(ar),{queue:false,show:false,hide:false,duration:aq.duration,complete:aq.complete})}else{au.each(function(){var aw=R(this),av={};ad(Y,function(aE,aD){var az,aG=ar?ar[aD]+" ":null;if(aG){var aF=ar;if(aD in n&&ar[aD]!==q){az=aG.match(al);if(J){p(aF,{scale:+az[0]})}}else{if(aD in i&&ar[aD]!==q){var aC=aw.css(aa),ax=aC=="absolute"||aC=="fixed";if(!aw.data(z)){if(ax){aw.data(z,{top:h(aw,"top")||0,left:h(aw,"left")||0,bottom:h(aw,"bottom"),right:h(aw,"right")})}else{aw.data(z,{top:h(aw,"marginTop")||0,left:h(aw,"marginLeft")||0})}}var aB=aw.data(z);az=aG.match(al);if(az){var aA=aD==z+"y"?+null:+az[1],ay=aD==z+"y"?+az[1]:+az[2];if(ax){if(!isNaN(aB.right)){if(!isNaN(aA)){p(aF,{right:aB.right-aA})}}else{if(!isNaN(aA)){p(aF,{left:aB.left+aA})}}if(!isNaN(aB.bottom)){if(!isNaN(ay)){p(aF,{bottom:aB.bottom-ay})}}else{if(!isNaN(ay)){p(aF,{top:aB.top+ay})}}}else{if(!isNaN(aA)){p(aF,{marginLeft:aB.left+aA})}if(!isNaN(ay)){p(aF,{marginTop:aB.top+ay})}}}}}if(!J&&aD!="scale"&&aD in aF){delete aF[aD]}if(aF){p(av,aF)}}});if(g.msie){delete av.scale}aw.animate(av,{queue:false,show:false,hide:false,duration:aq.duration,complete:aq.complete})})}}}});B.animatedPromise=B.promise;var s=V.Class.extend({init:function(aq,at){var ar=this;ar.element=aq;ar._direction=at;ar.options={};ar._additionalEffects=[];if(!ar.restore){ar.restore=[]}},reverse:function(){this._reverse=true;return this.run()},play:function(){this._reverse=false;return this.run()},add:function(aq){this._additionalEffects.push(aq);return this},direction:function(aq){this._direction=aq;return this},duration:function(aq){this._duration=aq;return this},compositeRun:function(){var at=this,aq=new D(at.element,{reverse:at._reverse,duration:at._duration}),ar=at._additionalEffects.concat([at]);return aq.run(ar)},run:function(){if(this._additionalEffects&&this._additionalEffects[0]){return this.compositeRun()}var ax=this,aw=ax.element,aB=0,az=ax.restore,at=az.length,aA,aC=R.Deferred(),aq={},av={},ay,ar=ax.children(),au=ar.length;aC.then(R.proxy(ax,"_complete"));aw.data("animating",true);for(aB=0;aB<at;aB++){aA=az[aB];if(!aw.data(aA)){aw.data(aA,aw.css(aA))}}for(aB=0;aB<au;aB++){ar[aB].duration(ax._duration).run()}ax.prepare(aq,av);if(!aw.is(":visible")){p(aq,{display:aw.data("olddisplay")||"block"})}if(J){ay=aw.data("targetTransform");if(ay){aq=p(ay,aq)}}aq=o(aw,aq);if(J&&!l){aq=c(aq)}aw.css(aq).css(aj);ax.setup();aw.data("targetTransform",av);B.animate(aw,av,{duration:ax._duration,complete:aC.resolve});return aC.promise()},stop:function(){var aq=0,ar=this.children(),at=ar.length;for(aq=0;aq<at;aq++){ar[aq].stop()}R(this.element).kendoStop(true,true);return this},restoreCallback:function(){var ar=this.element;for(var aq=0,at=this.restore.length;aq<at;aq++){var au=this.restore[aq];ar.css(au,ar.data(au))}},_complete:function(){var ar=this,aq=ar.element;aq.removeData("animating").dequeue();ar.restoreCallback();if(ar.shouldHide()){aq.data("olddisplay",aq.css("display")).hide()}if(N&&!J){setTimeout(R.proxy(ar,"restoreCallback"),0)}ar.teardown()},setOptions:function(aq){p(true,this.options,aq)},children:function(){return[]},shouldHide:R.noop,setup:R.noop,prepare:R.noop,teardown:R.noop,directions:[],setReverse:function(aq){this._reverse=aq;return this}});function I(aq){return aq.charAt(0).toUpperCase()+aq.substring(1)}function f(aq,ar){var at=s.extend(ar),au=at.prototype.directions;B[I(aq)]=at;B.Element.prototype[aq]=function(ay,ax,aw,av){return new at(this.element,ay,ax,aw,av)};ad(au,function(av,aw){B.Element.prototype[aq+I(aw)]=function(az,ay,ax){return new at(this.element,aw,az,ay,ax)}})}var L=["left","right","up","down"],K=["in","out"];f("slideIn",{directions:L,divisor:function(aq){this.options.divisor=aq;return this},prepare:function(ar,at){var ax=this,av,aw=ax.element,aB=V._outerWidth,aA=V._outerHeight,az=m[ax._direction],au=-az.modifier*(az.vertical?aA(aw):aB(aw)),aq=au/(ax.options&&ax.options.divisor||1)+am,ay="0px";if(ax._reverse){av=ar;ar=at;at=av}if(J){ar[az.transition]=aq;at[az.transition]=ay}else{ar[az.property]=aq;at[az.property]=ay}}});f("tile",{directions:L,init:function(aq,at,ar){s.prototype.init.call(this,aq,at);this.options={previous:ar}},previousDivisor:function(aq){this.options.previousDivisor=aq;return this},children:function(){var av=this,ar=av._reverse,au=av.options.previous,aw=av.options.previousDivisor||1,aq=av._direction;var at=[V.fx(av.element).slideIn(aq).setReverse(ar)];if(au){at.push(V.fx(au).slideIn(m[aq].reverse).divisor(aw).setReverse(!ar))}return at}});function e(ar,au,at,aq){f(ar,{directions:K,startValue:function(av){this._startValue=av;return this},endValue:function(av){this._endValue=av;return this},shouldHide:function(){return this._shouldHide},prepare:function(aC,aw){var aA=this,ay,av,az=this._direction==="out",ax=aA.element.data(au),aB=!(isNaN(ax)||ax==at);if(aB){ay=ax}else{if(typeof this._startValue!=="undefined"){ay=this._startValue}else{ay=az?at:aq}}if(typeof this._endValue!=="undefined"){av=this._endValue}else{av=az?aq:at}if(this._reverse){aC[au]=av;aw[au]=ay}else{aC[au]=ay;aw[au]=av}aA._shouldHide=aw[au]===aq}})}e("fade","opacity",1,0);e("zoom","scale",1,0.01);f("slideMargin",{prepare:function(aq,at){var aw=this,av=aw.element,az=aw.options,ay=av.data(A),au=az.offset,ar,ax=aw._reverse;if(!ax&&ay===null){av.data(A,parseFloat(av.css("margin-"+az.axis)))}ar=av.data(A)||0;at["margin-"+az.axis]=!ax?ar+au:ar}});f("slideTo",{prepare:function(ax,aq){var av=this,au=av.element,at=av.options,aw=at.offset.split(","),ar=av._reverse;if(J){aq.translatex=!ar?aw[0]:0;aq.translatey=!ar?aw[1]:0}else{aq.left=!ar?aw[0]:0;aq.top=!ar?aw[1]:0}au.css("left")}});f("expand",{directions:["horizontal","vertical"],restore:[ac],prepare:function(aq,au){var aw=this,av=aw.element,aB=aw.options,ax=aw._reverse,ay=aw._direction==="vertical"?Q:j,aA=av[0].style[ay],at=av.data(ay),ar=parseFloat(at||aA),az=ai(av.css(ay,P)[ay]());aq.overflow=ag;ar=aB&&aB.reset?az||ar:ar||az;au[ay]=(ax?0:ar)+am;aq[ay]=(ax?ar:0)+am;if(at===q){av.data(ay,aA)}},shouldHide:function(){return this._reverse},teardown:function(){var at=this,aq=at.element,au=at._direction==="vertical"?Q:j,ar=aq.data(au);if(ar==P||ar===v){setTimeout(function(){aq.css(au,P).css(au)},0)}}});var T={position:"absolute",marginLeft:0,marginTop:0,scale:1};f("transfer",{init:function(aq,ar){this.element=aq;this.options={target:ar};this.restore=[]},setup:function(){this.element.appendTo(document.body)},prepare:function(aq,av){var ay=this,ax=ay.element,ar=B.box(ax),az=B.box(ay.options.target),au=C(ax,"scale"),at=B.fillScale(az,ar),aw=B.transformOrigin(az,ar);p(aq,T);av.scale=1;ax.css(aj,"scale(1)").css(aj);ax.css(aj,"scale("+au+")");aq.top=ar.top;aq.left=ar.left;aq.transformOrigin=aw.x+am+" "+aw.y+am;if(ay._reverse){aq.scale=at}else{av.scale=at}}});var y={top:"rect(auto auto $size auto)",bottom:"rect($size auto auto auto)",left:"rect(auto $size auto auto)",right:"rect(auto auto auto $size)"};var u={top:{start:"rotatex(0deg)",end:"rotatex(180deg)"},bottom:{start:"rotatex(-180deg)",end:"rotatex(0deg)"},left:{start:"rotatey(0deg)",end:"rotatey(-180deg)"},right:{start:"rotatey(180deg)",end:"rotatey(0deg)"}};function S(aq,au){var ar=V.directions[au].vertical,at=aq[ar?Q:j]()/2+"px";return y[au].replace("$size",at)}f("turningPage",{directions:L,init:function(ar,at,aq){s.prototype.init.call(this,ar,at);this._container=aq},prepare:function(aw,aq){var au=this,ar=au._reverse,av=ar?m[au._direction].reverse:au._direction,at=u[av];aw.zIndex=1;if(au._clipInHalf){aw.clip=S(au._container,V.directions[av].reverse)}aw[ap]=ag;aq[aj]=k+(ar?at.start:at.end);aw[aj]=k+(ar?at.end:at.start)},setup:function(){this._container.append(this.element)},face:function(aq){this._face=aq;return this},shouldHide:function(){var ar=this,aq=ar._reverse,at=ar._face;return aq&&!at||!aq&&at},clipInHalf:function(aq){this._clipInHalf=aq;return this},temporary:function(){this.element.addClass("temp-page");return this}});f("staticPage",{directions:L,init:function(ar,at,aq){s.prototype.init.call(this,ar,at);this._container=aq},restore:["clip"],prepare:function(au,aq){var ar=this,at=ar._reverse?m[ar._direction].reverse:ar._direction;au.clip=S(ar._container,at);au.opacity=0.999;aq.opacity=1},shouldHide:function(){var ar=this,aq=ar._reverse,at=ar._face;return aq&&!at||!aq&&at},face:function(aq){this._face=aq;return this}});f("pageturn",{directions:["horizontal","vertical"],init:function(ar,au,at,aq){s.prototype.init.call(this,ar,au);this.options={};this.options.face=at;this.options.back=aq},children:function(){var at=this,az=at.options,av=at._direction==="horizontal"?"left":"top",aq=V.directions[av].reverse,au=at._reverse,aw,ay=az.face.clone(true).removeAttr("id"),ax=az.back.clone(true).removeAttr("id"),ar=at.element;if(au){aw=av;av=aq;aq=aw}return[V.fx(az.face).staticPage(av,ar).face(true).setReverse(au),V.fx(az.back).staticPage(aq,ar).setReverse(au),V.fx(ay).turningPage(av,ar).face(true).clipInHalf(true).temporary().setReverse(au),V.fx(ax).turningPage(aq,ar).clipInHalf(true).temporary().setReverse(au)]},prepare:function(ar,aq){ar[x]=ao;ar.transformStyle="preserve-3d";ar.opacity=0.999;aq.opacity=1},teardown:function(){this.element.find(".temp-page").remove()}});f("flip",{directions:["horizontal","vertical"],init:function(ar,au,at,aq){s.prototype.init.call(this,ar,au);this.options={};this.options.face=at;this.options.back=aq},children:function(){var aw=this,au=aw.options,ax=aw._direction==="horizontal"?"left":"top",ar=V.directions[ax].reverse,at=aw._reverse,aq,av=aw.element;if(at){aq=ax;ax=ar;ar=aq}return[V.fx(au.face).turningPage(ax,av).face(true).setReverse(at),V.fx(au.back).turningPage(ar,av).setReverse(at)]},prepare:function(aq){aq[x]=ao;aq.transformStyle="preserve-3d"}});var w=!ab.mobileOS.android;var d=".km-touch-scrollbar, .km-actionsheet-wrapper";f("replace",{_before:R.noop,_after:R.noop,init:function(aq,at,ar){s.prototype.init.call(this,aq);this._previous=R(at);this._transitionClass=ar},duration:function(){throw new Error("The replace effect does not support duration setting; the effect duration may be customized through the transition class rule")},beforeTransition:function(aq){this._before=aq;return this},afterTransition:function(aq){this._after=aq;return this},_both:function(){return R().add(this._element).add(this._previous)},_containerClass:function(){var aq=this._direction,ar="k-fx k-fx-start k-fx-"+this._transitionClass;if(aq){ar+=" k-fx-"+aq}if(this._reverse){ar+=" k-fx-reverse"}return ar},complete:function(ar){if(!this.deferred||ar&&R(ar.target).is(d)){return}var aq=this.container;aq.removeClass("k-fx-end").removeClass(this._containerClass()).off(l.event,this.completeProxy);this._previous.hide().removeClass("k-fx-current");this.element.removeClass("k-fx-next");if(w){aq.css(ac,"")}if(!this.isAbsolute){this._both().css(aa,"")}this.deferred.resolve();delete this.deferred},run:function(){if(this._additionalEffects&&this._additionalEffects[0]){return this.compositeRun()}var ay=this,au=ay.element,ax=ay._previous,aq=au.parents().filter(ax.parents()).first(),aw=ay._both(),ar=R.Deferred(),av=au.css(aa),at;if(!aq.length){aq=au.parent()}this.container=aq;this.deferred=ar;this.isAbsolute=av=="absolute";if(!this.isAbsolute){aw.css(aa,"absolute")}if(w){at=aq.css(ac);aq.css(ac,"hidden")}if(!l){this.complete()}else{au.addClass("k-fx-hidden");aq.addClass(this._containerClass());this.completeProxy=R.proxy(this,"complete");aq.on(l.event,this.completeProxy);V.animationFrame(function(){au.removeClass("k-fx-hidden").addClass("k-fx-next");ax.css("display","").addClass("k-fx-current");ay._before(ax,au);V.animationFrame(function(){aq.removeClass("k-fx-start").addClass("k-fx-end");ay._after(ax,au)})})}return ar.promise()},stop:function(){this.complete()}});var t=V.Class.extend({init:function(){var aq=this;aq._tickProxy=ah(aq._tick,aq);aq._started=false},tick:R.noop,done:R.noop,onEnd:R.noop,onCancel:R.noop,start:function(){if(!this.enabled()){return}if(!this.done()){this._started=true;V.animationFrame(this._tickProxy)}else{this.onEnd()}},enabled:function(){return true},cancel:function(){this._started=false;this.onCancel()},_tick:function(){var aq=this;if(!aq._started){return}aq.tick();if(!aq.done()){V.animationFrame(aq._tickProxy)}else{aq._started=false;aq.onEnd()}}});var O=t.extend({init:function(aq){var ar=this;p(ar,aq);t.fn.init.call(ar)},done:function(){return this.timePassed()>=this.duration},timePassed:function(){return Math.min(this.duration,new Date()-this.startDate)},moveTo:function(aq){var ar=this,at=ar.movable;ar.initial=at[ar.axis];ar.delta=aq.location-ar.initial;ar.duration=typeof aq.duration=="number"?aq.duration:300;ar.tick=ar._easeProxy(aq.ease);ar.startDate=new Date();ar.start()},_easeProxy:function(ar){var aq=this;return function(){aq.movable.moveAxis(aq.axis,ar(aq.timePassed(),aq.initial,aq.delta,aq.duration))}}});p(O,{easeOutExpo:function(ar,aq,au,at){return ar==at?aq+au:au*(-Math.pow(2,-10*ar/at)+1)+aq},easeOutBack:function(ar,aq,av,au,at){at=1.70158;return av*((ar=ar/au-1)*ar*((at+1)*ar+at)+1)+aq}});B.Animation=t;B.Transition=O;B.createEffect=f;B.box=function(ar){ar=R(ar);var aq=ar.offset();aq.width=V._outerWidth(ar);aq.height=V._outerHeight(ar);return aq};B.transformOrigin=function(ar,at){var aq=(ar.left-at.left)*at.width/(at.width-ar.width),au=(ar.top-at.top)*at.height/(at.height-ar.height);return{x:isNaN(aq)?0:aq,y:isNaN(au)?0:au}};B.fillScale=function(aq,ar){return Math.min(aq.width/ar.width,aq.height/ar.height)};B.fitScale=function(aq,ar){return Math.max(aq.width/ar.width,aq.height/ar.height)}}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.view",["kendo.core","kendo.binder","kendo.fx"],a)}(function(){var a={id:"view",name:"View",category:"framework",description:"The View class instantiates and handles the events of a certain screen from the application.",depends:["core","binder","fx"],hidden:false};(function(g,h){var n=window.kendo,l=n.Observable,k="SCRIPT",d="init",f="show",q="hide",r="transitionStart",e="transitionEnd",s="attach",u="detach",j=/unrecognized expression/;var o=l.extend({init:function(x,v){var w=this;v=v||{};l.fn.init.call(w);w.content=x;w.id=n.guid();w.tagName=v.tagName||"div";w.model=v.model;w._wrap=v.wrap!==false;this._evalTemplate=v.evalTemplate||false;w._fragments={};w.bind([d,f,q,r,e],v)},render:function(v){var w=this,x=!w.element;if(x){w.element=w._createElement()}if(v){g(v).append(w.element)}if(x){n.bind(w.element,w.model);w.trigger(d)}if(v){w._eachFragment(s);w.trigger(f)}return w.element},clone:function(){return new b(this)},triggerBeforeShow:function(){return true},triggerBeforeHide:function(){return true},showStart:function(){this.element.css("display","")},showEnd:function(){},hideEnd:function(){this.hide()},beforeTransition:function(v){this.trigger(r,{type:v})},afterTransition:function(v){this.trigger(e,{type:v})},hide:function(){this._eachFragment(u);this.element.detach();this.trigger(q)},destroy:function(){var v=this.element;if(v){n.unbind(v);n.destroy(v);v.remove()}},fragments:function(v){g.extend(this._fragments,v)},_eachFragment:function(v){for(var w in this._fragments){this._fragments[w][v](this,w)}},_createElement:function(){var y=this,A="<"+y.tagName+" />",w,x;try{x=g(document.getElementById(y.content)||y.content);if(x[0].tagName===k){x=x.html()}}catch(z){if(j.test(z.message)){x=y.content}}if(typeof x==="string"){x=x.replace(/^\s+|\s+$/g,"");if(y._evalTemplate){x=n.template(x)(y.model||{})}w=g(A).append(x);if(!y._wrap){w=w.contents()}}else{w=x;if(y._evalTemplate){var v=g(n.template(g("<div />").append(w.clone(true)).html())(y.model||{}));if(g.contains(document,w[0])){w.replaceWith(v)}w=v}if(y._wrap){w=w.wrapAll(A).parent()}}return w}});var b=n.Class.extend({init:function(v){g.extend(this,{element:v.element.clone(true),transition:v.transition,id:v.id});v.element.parent().append(this.element)},hideEnd:function(){this.element.remove()},beforeTransition:g.noop,afterTransition:g.noop});var p=o.extend({init:function(w,v){o.fn.init.call(this,w,v);this.containers={}},container:function(v){var w=this.containers[v];if(!w){w=this._createContainer(v);this.containers[v]=w}return w},showIn:function(v,w,x){this.container(v).show(w,x)},_createContainer:function(v){var x=this.render(),y=x.find(v),w;if(!y.length&&x.is(v)){if(x.is(v)){y=x}else{throw new Error("can't find a container with the specified "+v+" selector")}}w=new m(y);w.bind("accepted",function(z){z.view.render(y)});return w}});var c=o.extend({attach:function(v,w){v.element.find(w).replaceWith(this.render())},detach:function(){}});var i=/^(\w+)(:(\w+))?( (\w+))?$/;function t(w){if(!w){return{}}var v=w.match(i)||[];return{type:v[1],direction:v[3],reverse:v[5]==="reverse"}}var m=l.extend({init:function(v){l.fn.init.call(this);this.container=v;this.history=[];this.view=null;this.running=false},after:function(){this.running=false;this.trigger("complete",{view:this.view});this.trigger("after")},end:function(){this.view.showEnd();this.previous.hideEnd();this.after()},show:function(E,D,v){if(!E.triggerBeforeShow()||this.view&&!this.view.triggerBeforeHide()){this.trigger("after");return false}v=v||E.id;var A=this,B=E===A.view?E.clone():A.view,C=A.history,w=C[C.length-2]||{},y=w.id===v,z=D||(y?C[C.length-1].transition:E.transition),x=t(z);if(A.running){A.effect.stop()}if(z==="none"){z=null}A.trigger("accepted",{view:E});A.view=E;A.previous=B;A.running=true;if(!y){C.push({id:v,transition:z})}else{C.pop()}if(!B){E.showStart();E.showEnd();A.after();return true}if(!z||!n.effects.enabled){E.showStart();A.end()}else{E.element.addClass("k-fx-hidden");E.showStart();if(y&&!D){x.reverse=!x.reverse}A.effect=n.fx(E.element).replace(B.element,x.type).beforeTransition(function(){E.beforeTransition("show");B.beforeTransition("hide")}).afterTransition(function(){E.afterTransition("show");B.afterTransition("hide")}).direction(x.direction).setReverse(x.reverse);A.effect.run().then(function(){A.end()})}return true}});n.ViewContainer=m;n.Fragment=c;n.Layout=p;n.View=o;n.ViewClone=b}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.dom",["kendo.core"],a)}(function(){var a={id:"dom",name:"Virtual DOM",category:"framework",depends:["core"],advanced:true};(function(k){function j(){this.node=null}j.prototype={remove:function(){if(this.node.parentNode){this.node.parentNode.removeChild(this.node)}this.attr={}},attr:{},text:function(){return""}};function n(){}n.prototype={nodeName:"#null",attr:{style:{}},children:[],remove:function(){}};var l=new n();function d(q,o,p){this.nodeName=q;this.attr=o||{};this.children=p||[]}d.prototype=new j();d.prototype.appendTo=function(q){var r=document.createElement(this.nodeName);var p=this.children;for(var o=0;o<p.length;o++){p[o].render(r,l)}q.appendChild(r);return r};d.prototype.render=function(s,r){var u;if(r.nodeName!==this.nodeName){r.remove();u=this.appendTo(s)}else{u=r.node;var o;var q=this.children;var t=q.length;var p=r.children;var v=p.length;if(Math.abs(v-t)>2){this.render({appendChild:function(w){s.replaceChild(w,r.node)}},l);return}for(o=0;o<t;o++){q[o].render(u,p[o]||l)}for(o=t;o<v;o++){p[o].remove()}}this.node=u;this.syncAttributes(r.attr);this.removeAttributes(r.attr)};d.prototype.syncAttributes=function(p){var o=this.attr;for(var q in o){var s=o[q];var r=p[q];if(q==="style"){this.setStyle(s,r)}else{if(s!==r){this.setAttribute(q,s,r)}}}};d.prototype.setStyle=function(p,r){var q=this.node;var o;if(r){for(o in p){if(p[o]!==r[o]){q.style[o]=p[o]}}}else{for(o in p){q.style[o]=p[o]}}};d.prototype.removeStyle=function(q){var p=this.attr.style||{};var r=this.node;for(var o in q){if(p[o]===undefined){r.style[o]=""}}};d.prototype.removeAttributes=function(p){var o=this.attr;for(var q in p){if(q==="style"){this.removeStyle(p.style)}else{if(o[q]===undefined){this.removeAttribute(q)}}}};d.prototype.removeAttribute=function(o){var p=this.node;if(o==="style"){p.style.cssText=""}else{if(o==="className"){p.className=""}else{p.removeAttribute(o)}}};d.prototype.setAttribute=function(o,q){var p=this.node;if(p[o]!==undefined){p[o]=q}else{p.setAttribute(o,q)}};d.prototype.text=function(){var p="";for(var o=0;o<this.children.length;++o){p+=this.children[o].text()}return p};function b(o){this.nodeValue=String(o)}b.prototype=new j();b.prototype.nodeName="#text";b.prototype.render=function(p,o){var q;if(o.nodeName!==this.nodeName){o.remove();q=document.createTextNode(this.nodeValue);p.appendChild(q)}else{q=o.node;if(this.nodeValue!==o.nodeValue){if(q.parentNode){q.nodeValue=this.nodeValue}}}this.node=q};b.prototype.text=function(){return this.nodeValue};function h(o){this.html=o}h.prototype={nodeName:"#html",attr:{},remove:function(){for(var o=0;o<this.nodes.length;o++){var p=this.nodes[o];if(p.parentNode){p.parentNode.removeChild(p)}}},render:function(p,o){if(o.nodeName!==this.nodeName||o.html!==this.html){o.remove();var q=p.lastChild;i(p,this.html);this.nodes=[];for(var r=q?q.nextSibling:p.firstChild;r;r=r.nextSibling){this.nodes.push(r)}}else{this.nodes=o.nodes.slice(0)}}};var c=document.createElement("div");function i(p,o){c.innerHTML=o;while(c.firstChild){p.appendChild(c.firstChild)}}function g(o){return new h(o)}function f(q,o,p){return new d(q,o,p)}function m(o){return new b(o)}function e(o){this.root=o;this.children=[]}e.prototype={html:g,element:f,text:m,render:function(q){var p=this.children;var o;var s;for(o=0,s=q.length;o<s;o++){var r=p[o];if(!r){r=l}else{if(!r.node||!r.node.parentNode){r.remove();r=l}}q[o].render(this.root,r)}for(o=s;o<p.length;o++){p[o].remove()}this.children=q}};k.dom={html:g,text:m,element:f,Tree:e,Node:j}}(window.kendo));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.ooxml",["kendo.core"],a)}(function(){var a={id:"ooxml",name:"XLSX generation",category:"framework",advanced:true,depends:["core"]};(function(A,B){var S='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>';var O=B.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dc:creator>${creator}</dc:creator><cp:lastModifiedBy>${lastModifiedBy}</cp:lastModifiedBy><dcterms:created xsi:type="dcterms:W3CDTF">${created}</dcterms:created><dcterms:modified xsi:type="dcterms:W3CDTF">${modified}</dcterms:modified></cp:coreProperties>');var s=B.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size="2" baseType="variant"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>${sheets.length}</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size="${sheets.length}" baseType="lpstr"># for (var idx = 0; idx < sheets.length; idx++) { ## if (sheets[idx].options.title) { #<vt:lpstr>${sheets[idx].options.title}</vt:lpstr># } else { #<vt:lpstr>Sheet${idx+1}</vt:lpstr># } ## } #</vt:vector></TitlesOfParts><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>14.0300</AppVersion></Properties>');var E=B.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="xml" ContentType="application/xml" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/># for (var idx = 1; idx <= count; idx++) { #<Override PartName="/xl/worksheets/sheet${idx}.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /># } #<Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml" /><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml" /></Types>');var g=B.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="9303" /><workbookPr defaultThemeVersion="124226" /><bookViews><workbookView xWindow="240" yWindow="45" windowWidth="18195" windowHeight="7995" /></bookViews><sheets># for (var idx = 0; idx < sheets.length; idx++) { ## var options = sheets[idx].options; ## var name = options.name || options.title ## if (name) { #<sheet name="${name}" sheetId="${idx+1}" r:id="rId${idx+1}" /># } else { #<sheet name="Sheet${idx+1}" sheetId="${idx+1}" r:id="rId${idx+1}" /># } ## } #</sheets># if (filterNames.length || userNames.length) { #<definedNames> # for (var di = 0; di < filterNames.length; di++) { #<definedName name="_xlnm._FilterDatabase" hidden="1" localSheetId="${filterNames[di].localSheetId}">${filterNames[di].name}!$${filterNames[di].from}:$${filterNames[di].to}</definedName> # } # # for (var i = 0; i < userNames.length; ++i) { #<definedName name="${userNames[i].name}" hidden="${userNames[i].hidden ? 1 : 0}" # if (userNames[i].localSheetId != null) { # localSheetId="${userNames[i].localSheetId}" # } #>${userNames[i].value}</definedName> # } #</definedNames># } #<calcPr fullCalcOnLoad="1" calcId="145621" /></workbook>');var x=B.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" mc:Ignorable="x14ac"><dimension ref="A1" /><sheetViews><sheetView #if(index==0) {# tabSelected="1" #}# workbookViewId="0" #if (showGridLines === false) {# showGridLines="0" #}#># if (frozenRows || frozenColumns) { #<pane state="frozen"# if (frozenColumns) { # xSplit="${frozenColumns}"# } ## if (frozenRows) { # ySplit="${frozenRows}"# } # topLeftCell="${String.fromCharCode(65 + (frozenColumns || 0))}${(frozenRows || 0)+1}"/># } #</sheetView></sheetViews><sheetFormatPr x14ac:dyDescent="0.25" defaultRowHeight="#= defaults.rowHeight ? defaults.rowHeight * 0.75 : 15 #" # if (defaults.columnWidth) { # defaultColWidth="#= kendo.ooxml.toWidth(defaults.columnWidth) #" # } # /># if (defaultCellStyleId != null || (columns && columns.length > 0)) { #<cols># if (!columns || !columns.length) { #<col min="1" max="16384" style="${defaultCellStyleId}" # if (defaults.columnWidth) { # width="#= kendo.ooxml.toWidth(defaults.columnWidth) #" # } # /># } ## for (var ci = 0; ci < columns.length; ci++) { ## var column = columns[ci]; ## var columnIndex = typeof column.index === "number" ? column.index + 1 : (ci + 1); ## if (column.width === 0) { #<col #if(defaultCellStyleId!=null){# style="${defaultCellStyleId}" #}#min="${columnIndex}" max="${columnIndex}" hidden="1" customWidth="1" /># } else if (column.width) { #<col #if(defaultCellStyleId!=null){# style="${defaultCellStyleId}" #}#min="${columnIndex}" max="${columnIndex}" customWidth="1"# if (column.autoWidth) { # width="${((column.width*7+5)/7*256)/256}" bestFit="1"# } else { # width="#= kendo.ooxml.toWidth(column.width) #" # } #/># } ## } #</cols># } #<sheetData># for (var ri = 0; ri < data.length; ri++) { ## var row = data[ri]; ## var rowIndex = typeof row.index === "number" ? row.index + 1 : (ri + 1); #<row r="${rowIndex}" x14ac:dyDescent="0.25" # if (row.height === 0) { # hidden="1" # }   else if (row.height) { # ht="#= kendo.ooxml.toHeight(row.height) #" customHeight="1" # } # ># for (var ci = 0; ci < row.data.length; ci++) { ## var cell = row.data[ci];#<c r="#=cell.ref#"# if (cell.style) { # s="#=cell.style#" # } ## if (cell.type) { # t="#=cell.type#"# } #># if (cell.formula != null) { #<f>${cell.formula}</f># } ## if (cell.value != null) { #<v>${cell.value}</v># } #</c># } #</row># } #</sheetData># if (autoFilter) { #<autoFilter ref="${autoFilter.from}:${autoFilter.to}"/># } else if (filter) { ##= kendo.ooxml.spreadsheetFilters(filter) ## } ## if (mergeCells.length) { #<mergeCells count="${mergeCells.length}"># for (var ci = 0; ci < mergeCells.length; ci++) { #<mergeCell ref="${mergeCells[ci]}"/># } #</mergeCells># } ## if (validations.length) { #<dataValidations># for (var vi = 0; vi < validations.length; vi++) { ## var val = validations[vi]; #<dataValidation sqref="#= val.sqref.join(" ") #" showErrorMessage="#= val.showErrorMessage #" type="#= val.type #"# if (val.type != "list") {# operator="#= val.operator #" # } # allowBlank="#= val.allowBlank #" showDropDown="#= val.showDropDown #"# if (val.error) {# error="#= val.error #" # } ## if (val.errorTitle) {# errorTitle="#= val.errorTitle #" # } #># if (val.formula1) { #<formula1>#= val.formula1 #</formula1># } ## if (val.formula2) { #<formula2>#= val.formula2 #</formula2># } #</dataValidation># } #</dataValidations># } ## if (hyperlinks.length) { #<hyperlinks># for (var hi = 0; hi < hyperlinks.length; hi++) { #<hyperlink ref="${hyperlinks[hi].ref}" r:id="rId${hi}"/># } #</hyperlinks># } #<pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" /></worksheet>');var e=B.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"># for (var idx = 1; idx <= count; idx++) { #<Relationship Id="rId${idx}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet${idx}.xml" /># } #<Relationship Id="rId${count+1}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml" /><Relationship Id="rId${count+2}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml" /></Relationships>');var y=B.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"># for (var i = 0; i < hyperlinks.length; i++) { #<Relationship Id="rId${i}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink" Target="${hyperlinks[i].target}" TargetMode="External" /># } #</Relationships>');var v=B.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="${count}" uniqueCount="${uniqueCount}"># for (var index in indexes) { #<si><t>${index.substring(1)}</t></si># } #</sst>');var h=B.template('<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="${formats.length}"># for (var fi = 0; fi < formats.length; fi++) { ## var format = formats[fi]; #<numFmt formatCode="${format.format}" numFmtId="${165+fi}" /># } #</numFmts><fonts count="${fonts.length+1}" x14ac:knownFonts="1"><font><sz val="11" /><color theme="1" /><name val="Calibri" /><family val="2" /><scheme val="minor" /></font># for (var fi = 0; fi < fonts.length; fi++) { ## var font = fonts[fi]; #<font># if (font.fontSize) { #<sz val="${font.fontSize}" /># } else { #<sz val="11" /># } ## if (font.bold) { #<b/># } ## if (font.italic) { #<i/># } ## if (font.underline) { #<u/># } ## if (font.color) { #<color rgb="${font.color}" /># } else { #<color theme="1" /># } ## if (font.fontFamily) { #<name val="${font.fontFamily}" /><family val="2" /># } else { #<name val="Calibri" /><family val="2" /><scheme val="minor" /># } #</font># } #</fonts><fills count="${fills.length+2}"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill># for (var fi = 0; fi < fills.length; fi++) { ## var fill = fills[fi]; ## if (fill.background) { #<fill><patternFill patternType="solid"><fgColor rgb="${fill.background}"/></patternFill></fill># } ## } #</fills><borders count="${borders.length+1}"><border><left/><right/><top/><bottom/><diagonal/></border># for (var bi = 0; bi < borders.length; bi++) { ##= kendo.ooxml.borderTemplate(borders[bi]) ## } #</borders><cellStyleXfs count="1"><xf borderId="0" fillId="0" fontId="0" /></cellStyleXfs><cellXfs count="${styles.length+1}"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/># for (var si = 0; si < styles.length; si++) { ## var style = styles[si]; #<xf xfId="0"# if (style.fontId) { # fontId="${style.fontId}" applyFont="1"# } ## if (style.fillId) { # fillId="${style.fillId}" applyFill="1"# } ## if (style.numFmtId) { # numFmtId="${style.numFmtId}" applyNumberFormat="1"# } ## if (style.textAlign || style.verticalAlign || style.wrap) { # applyAlignment="1"# } ## if (style.borderId) { # borderId="${style.borderId}" applyBorder="1"# } #># if (style.textAlign || style.verticalAlign || style.wrap) { #<alignment# if (style.textAlign) { # horizontal="${style.textAlign}"# } ## if (style.verticalAlign) { # vertical="${style.verticalAlign}"# } ## if (style.wrap) { # wrapText="1"# } #/># } #</xf># } #</cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleMedium9" /></styleSheet>');function r(T){var U=Math.floor(T/26)-1;return(U>=0?r(U):"")+String.fromCharCode(65+T%26)}function J(U,T){return r(T)+(U+1)}function t(U,T){return r(T)+"$"+(U+1)}function N(T){var U=T.frozenRows||(T.freezePane||{}).rowSplit||1;return U-1}function n(T){return(T/7*100+0.5)/100}function Q(T){return T*0.75}function I(T){return(T+"").replace(/[\x00-\x08]/g,"").replace(/\n/g,"\r\n")}var K=new Date(1900,0,0);var z=B.Class.extend({init:function(U,T,V,W){this.options=U;this._strings=T;this._styles=V;this._borders=W;this._validations={}},relsToXML:function(){var T=this.options.hyperlinks||[];if(!T.length){return""}return y({hyperlinks:T})},toXML:function(aa){var ab=this.options.mergedCells||[];var ac=this.options.rows||[];var Y=k(ac,ab);this._readCells(Y);var U=this.options.filter;var V;if(U&&typeof U.from==="number"&&typeof U.to==="number"){U={from:J(N(this.options),U.from),to:J(N(this.options),U.to)}}else{if(U&&U.ref&&U.columns){V=U;U=null}}var X=[];for(var Z in this._validations){if(Object.prototype.hasOwnProperty.call(this._validations,Z)){X.push(this._validations[Z])}}var T=null;if(this.options.defaultCellStyle){T=this._lookupStyle(this.options.defaultCellStyle)}var W=this.options.freezePane||{};return x({frozenColumns:this.options.frozenColumns||W.colSplit,frozenRows:this.options.frozenRows||W.rowSplit,columns:this.options.columns,defaults:this.options.defaults||{},data:Y,index:aa,mergeCells:ab,autoFilter:U,filter:V,showGridLines:this.options.showGridLines,hyperlinks:this.options.hyperlinks||[],validations:X,defaultCellStyleId:T})},_lookupString:function(V){var U="$"+V;var T=this._strings.indexes[U];if(T!==undefined){V=T}else{V=this._strings.indexes[U]=this._strings.uniqueCount;this._strings.uniqueCount++}this._strings.count++;return V},_lookupStyle:function(V){var U=B.stringify(V);if(U=="{}"){return 0}var T=A.inArray(U,this._styles);if(T<0){T=this._styles.push(U)-1}return T+1},_lookupBorder:function(U){var V=B.stringify(U);if(V=="{}"){return}var T=A.inArray(V,this._borders);if(T<0){T=this._borders.push(V)-1}return T+1},_readCells:function(X){for(var W=0;W<X.length;W++){var Y=X[W];var V=Y.cells;Y.data=[];for(var U=0;U<V.length;U++){var T=this._cell(V[U],Y.index,U);if(T){Y.data.push(T)}}}},_cell:function(aa,ae,ad){if(!aa||aa===q){return null}var af=aa.value;var Y={};if(aa.borderLeft){Y.left=aa.borderLeft}if(aa.borderRight){Y.right=aa.borderRight}if(aa.borderTop){Y.top=aa.borderTop}if(aa.borderBottom){Y.bottom=aa.borderBottom}Y=this._lookupBorder(Y);var T=this.options.defaultCellStyle||{};var U={borderId:Y};(function(ag){ag("color");ag("background");ag("bold");ag("italic");ag("underline");if(!ag("fontFamily")){ag("fontName","fontFamily")}ag("fontSize");ag("format");if(!ag("textAlign")){ag("hAlign","textAlign")}if(!ag("verticalAlign")){ag("vAlign","verticalAlign")}ag("wrap")}(function(ai,ag){var ah=aa[ai];if(ah===undefined){ah=T[ai]}if(ah!==undefined){U[ag||ai]=ah;return true}}));var X=this.options.columns||[];var W=X[ad];var ac=typeof af;if(W&&W.autoWidth){var ab=af;if(ac==="number"){ab=B.toString(af,aa.format)}W.width=Math.max(W.width||0,(ab+"").length)}if(ac==="string"){af=I(af);af=this._lookupString(af);ac="s"}else{if(ac==="number"){ac="n"}else{if(ac==="boolean"){ac="b";af=+af}else{if(af&&af.getTime){ac=null;var Z=(af.getTimezoneOffset()-K.getTimezoneOffset())*B.date.MS_PER_MINUTE;af=(af-K-Z)/B.date.MS_PER_DAY+1;if(!U.format){U.format="mm-dd-yy"}}else{ac=null;af=null}}}}U=this._lookupStyle(U);var V=J(ae,ad);if(aa.validation){this._addValidation(aa.validation,V)}return{value:af,formula:aa.formula,type:ac,style:U,ref:V}},_addValidation:function(T,W){var V={showErrorMessage:T.type=="reject"?1:0,formula1:T.from,formula2:T.to,type:d[T.dataType]||T.dataType,operator:l[T.comparerType]||T.comparerType,allowBlank:T.allowNulls?1:0,showDropDown:T.showButton?0:1,error:T.messageTemplate,errorTitle:T.titleTemplate};var U=JSON.stringify(V);if(!this._validations[U]){this._validations[U]=V;V.sqref=[]}this._validations[U].sqref.push(W)}});var l={greaterThanOrEqualTo:"greaterThanOrEqual",lessThanOrEqualTo:"lessThanOrEqual"};var d={number:"decimal"};var f={General:0,"0":1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49,"[$-404]e/m/d":27,"m/d/yy":30,t0:59,"t0.00":60,"t#,##0":61,"t#,##0.00":62,"t0%":67,"t0.00%":68,"t# ?/?":69,"t# ??/??":70};function j(T){if(T.length<6){T=T.replace(/(\w)/g,function(V,U){return U+U})}T=T.substring(1).toUpperCase();if(T.length<8){T="FF"+T}return T}var F=B.Class.extend({init:function(T){this.options=T||{};this._strings={indexes:{},count:0,uniqueCount:0};this._styles=[];this._borders=[];this._sheets=A.map(this.options.sheets||[],A.proxy(function(U){U.defaults=this.options;return new z(U,this._strings,this._styles,this._borders)},this))},toDataURL:function(){if(typeof JSZip==="undefined"){throw new Error("JSZip not found. Check http://docs.telerik.com/kendo-ui/framework/excel/introduction#requirements for more details.")}var ak=new JSZip();var ai=ak.folder("docProps");ai.file("core.xml",O({creator:this.options.creator||"Kendo UI",lastModifiedBy:this.options.creator||"Kendo UI",created:this.options.date||new Date().toJSON(),modified:this.options.date||new Date().toJSON()}));var Y=this._sheets.length;ai.file("app.xml",s({sheets:this._sheets}));var V=ak.folder("_rels");V.file(".rels",S);var ae=ak.folder("xl");var aj=ae.folder("_rels");aj.file("workbook.xml.rels",e({count:Y}));var U={};ae.file("workbook.xml",g({sheets:this._sheets,filterNames:A.map(this._sheets,function(ao,an){var am=ao.options;var aq=am.name||am.title||"Sheet"+(an+1);U[aq.toLowerCase()]=an;var ap=am.filter;if(ap&&typeof ap.from!=="undefined"&&typeof ap.to!=="undefined"){return{localSheetId:an,name:aq,from:t(N(am),ap.from),to:t(N(am),ap.to)}}}),userNames:A.map(this.options.names||[],function(am){return{name:am.localName,localSheetId:am.sheet?U[am.sheet.toLowerCase()]:null,value:am.value,hidden:am.hidden}})}));var aa=ae.folder("worksheets");var T=aa.folder("_rels");for(var af=0;af<Y;af++){var W=this._sheets[af];var al=B.format("sheet{0}.xml",af+1);var ah=W.relsToXML();if(ah){T.file(al+".rels",ah)}aa.file(al,W.toXML(af))}var X=A.map(this._borders,A.parseJSON);var ad=A.map(this._styles,A.parseJSON);var ac=function(am){return am.underline||am.bold||am.italic||am.color||am.fontFamily||am.fontSize};var ab=A.map(ad,function(am){if(am.color){am.color=j(am.color)}if(ac(am)){return am}});var Z=A.map(ad,function(am){if(am.format&&f[am.format]===undefined){return am}});var ag=A.map(ad,function(am){if(am.background){am.background=j(am.background);return am}});ae.file("styles.xml",h({fonts:ab,fills:ag,formats:Z,borders:X,styles:A.map(ad,function(an){var am={};if(ac(an)){am.fontId=A.inArray(an,ab)+1}if(an.background){am.fillId=A.inArray(an,ag)+2}am.textAlign=an.textAlign;am.verticalAlign=an.verticalAlign;am.wrap=an.wrap;am.borderId=an.borderId;if(an.format){if(f[an.format]!==undefined){am.numFmtId=f[an.format]}else{am.numFmtId=165+A.inArray(an,Z)}}return am})}));ae.file("sharedStrings.xml",v(this._strings));ak.file("[Content_Types].xml",E({count:Y}));return"data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,"+ak.generate({compression:"DEFLATE"})}});function R(U){var T="thin";if(U===2){T="medium"}else{if(U===3){T="thick"}}return T}function G(U,V){var T="";if(V){T+="<"+U+' style="'+R(V.size)+'">';if(V.color){T+='<color rgb="'+j(V.color)+'"/>'}T+="</"+U+">"}return T}function u(T){return"<border>"+G("left",T.left)+G("right",T.right)+G("top",T.top)+G("bottom",T.bottom)+"</border>"}var q={};function k(Y,Z){var X=[];var W=[];C(Y,function(ac,aa){var ab={_source:ac,index:aa,height:ac.height,cells:[]};X.push(ab);W[aa]=ab});var U=P(X).slice(0);var T={rowData:X,rowsByIndex:W,mergedCells:Z};for(var V=0;V<U.length;V++){M(U[V],T);delete U[V]._source}return P(X)}function C(V,X){for(var U=0;U<V.length;U++){var W=V[U];if(!W){continue}var T=W.index;if(typeof T!=="number"){T=U}X(W,T)}}function P(T){return T.sort(function(V,U){return V.index-U.index})}function M(T,ae){var af=T._source;var Z=T.index;var ad=af.cells;var V=T.cells;if(!ad){return}for(var U=0;U<ad.length;U++){var ab=ad[U]||q;var Y=ab.rowSpan||1;var W=ab.colSpan||1;var X=p(V,ab);D(ab,V,X,W);if(Y>1||W>1){ae.mergedCells.push(J(Z,X)+":"+J(Z+Y-1,X+W-1))}if(Y>1){for(var aa=Z+1;aa<Z+Y;aa++){var ac=ae.rowsByIndex[aa];if(!ac){ac=ae.rowsByIndex[aa]={index:aa,cells:[]};ae.rowData.push(ac)}D(ab,ac.cells,X-1,W+1)}}}}function p(V,T){var U;if(typeof T.index==="number"){U=T.index;c(V,T,T.index)}else{U=H(V,T)}return U}function c(V,T,U){V[U]=T}function H(W,T){var U=W.length;for(var V=0;V<W.length+1;V++){if(!W[V]){W[V]=T;U=V;break}}return U}function D(T,Y,X,W){for(var V=1;V<W;V++){var U={borderTop:T.borderTop,borderRight:T.borderRight,borderBottom:T.borderBottom,borderLeft:T.borderLeft};c(Y,U,X+V)}}var L=B.template('<autoFilter ref="${ref}"># for (var i = 0; i < columns.length; ++i) { ## var col = columns[i]; #<filterColumn colId="${col.index}">#= generators[col.filter](col) #</filterColumn># } #</autoFilter>');var o=B.template('<customFilters# if (logic == "and") {# and="1"# } #># for (var i = 0; i < criteria.length; ++i) { ## var f = criteria[i]; ## var op = kendo.ooxml.spreadsheetFilters.customOperator(f); ## var val = kendo.ooxml.spreadsheetFilters.customValue(f); #<customFilter# if (op) {# operator="${op}"#}# val="${val}"/># } #</customFilters>');var m=B.template('<dynamicFilter type="${kendo.ooxml.spreadsheetFilters.dynamicFilterType(type)}" />');var i=B.template('<top10 percent="#= /percent$/i.test(type) ? 1 : 0 #" top="#= /^top/i.test(type) ? 1 : 0 #"  val="#: value #" />');var b=B.template('<filters# if (blanks) {# blank="1"#}#># for (var i = 0; i < values.length; ++i) { #<filter val="${values[i]}" /># } #</filters>');function w(T){return L({ref:T.ref,columns:T.columns,generators:{custom:o,dynamic:m,top:i,value:b}})}w.customOperator=function(T){return{eq:"equal",gt:"greaterThan",gte:"greaterThanOrEqual",lt:"lessThan",lte:"lessThanOrEqual",ne:"notEqual",doesnotstartwith:"notEqual",doesnotendwith:"notEqual",doesnotcontain:"notEqual",doesnotmatch:"notEqual"}[T.operator.toLowerCase()]};w.customValue=function(U){function T(V){return V.replace(/([*?])/g,"~$1")}switch(U.operator.toLowerCase()){case"startswith":case"doesnotstartwith":return T(U.value)+"*";case"endswith":case"doesnotendwith":return"*"+T(U.value);case"contains":case"doesnotcontain":return"*"+T(U.value)+"*"}return U.value};w.dynamicFilterType=function(T){return{quarter1:"Q1",quarter2:"Q2",quarter3:"Q3",quarter4:"Q4",january:"M1",february:"M2",march:"M3",april:"M4",may:"M5",june:"M6",july:"M7",august:"M8",september:"M9",october:"M10",november:"M11",december:"M12"}[T.toLowerCase()]||T};B.ooxml={Workbook:F,Worksheet:z,toWidth:n,toHeight:Q,borderTemplate:u,spreadsheetFilters:w}}(kendo.jQuery,kendo));return kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.excel",["kendo.core","kendo.data","kendo.ooxml"],a)}(function(){var a={id:"excel",name:"Excel export",category:"framework",advanced:true,mixin:true,depends:["data","ooxml"]};(function(b,c){c.ExcelExporter=c.Class.extend({init:function(d){d.columns=this._trimColumns(d.columns||[]);this.allColumns=b.map(this._leafColumns(d.columns||[]),this._prepareColumn);this.columns=b.grep(this.allColumns,function(h){return !h.hidden});this.options=d;var f=d.dataSource;if(f instanceof c.data.DataSource){this.dataSource=new f.constructor(b.extend({},f.options,{page:d.allPages?0:f.page(),filter:f.filter(),pageSize:d.allPages?f.total():f.pageSize(),sort:f.sort(),group:f.group(),aggregate:f.aggregate()}));var e=f.data();if(e.length>0){this.dataSource._data=e;var g=this.dataSource.transport;if(f._isServerGrouped()&&g.options&&g.options.data){g.options.data=null}}}else{this.dataSource=c.data.DataSource.create(f)}},_trimColumns:function(d){var e=this;return b.grep(d,function(g){var f=!!g.field;if(!f&&g.columns){f=e._trimColumns(g.columns).length>0}return f})},_leafColumns:function(f){var e=[];for(var d=0;d<f.length;d++){if(!f[d].columns){e.push(f[d]);continue}e=e.concat(this._leafColumns(f[d].columns))}return e},workbook:function(){return b.Deferred(b.proxy(function(e){this.dataSource.fetch().then(b.proxy(function(){var d={sheets:[{columns:this._columns(),rows:this._rows(),freezePane:this._freezePane(),filter:this._filter()}]};e.resolve(d,this.dataSource.view())},this))},this)).promise()},_prepareColumn:function(e){if(!e.field){return}var f=function(g){return g.get(e.field)};var d=null;if(e.values){d={};b.each(e.values,function(){d[this.value]=this.text});f=function(g){return d[g.get(e.field)]}}return b.extend({},e,{value:f,values:d,groupHeaderTemplate:c.template(e.groupHeaderTemplate||"#= title #: #= value #"),groupFooterTemplate:e.groupFooterTemplate?c.template(e.groupFooterTemplate):null,footerTemplate:e.footerTemplate?c.template(e.footerTemplate):null})},_filter:function(){if(!this.options.filterable){return null}var d=this._depth();return{from:d,to:d+this.columns.length-1}},_dataRow:function(d,e,h){if(this._hierarchical()){e=this.dataSource.level(d)+1}var n=[];for(var m=0;m<e;m++){n[m]={background:"#dfdfdf",color:"#333"}}if(h&&d.items){var g=b.grep(this.allColumns,function(q){return q.field==d.field})[0];var i=g&&g.title?g.title:d.field;var l=g?g.groupHeaderTemplate:null;var j=i+": "+d.value;var k=b.extend({title:i,field:d.field,value:g&&g.values?g.values[d.value]:d.value,aggregates:d.aggregates},d.aggregates[d.field]);if(l){j=l(k)}n.push({value:j,background:"#dfdfdf",color:"#333",colSpan:this.columns.length+h-e});var p=this._dataRows(d.items,e+1);p.unshift({type:"group-header",cells:n});return p.concat(this._footer(d))}else{var f=[];for(var o=0;o<this.columns.length;o++){f[o]=this._cell(d,this.columns[o])}if(this._hierarchical()){f[0].colSpan=h-e+1}return[{type:"data",cells:n.concat(f)}]}},_dataRows:function(d,h){var g=this._depth();var f=[];for(var e=0;e<d.length;e++){f.push.apply(f,this._dataRow(d[e],h,g))}return f},_footer:function(e){var f=[];var g=false;var d=b.map(this.columns,b.proxy(function(h){if(h.groupFooterTemplate){g=true;return{background:"#dfdfdf",color:"#333",value:h.groupFooterTemplate(b.extend({},this.dataSource.aggregates(),e.aggregates,e.aggregates[h.field]))}}else{return{background:"#dfdfdf",color:"#333"}}},this));if(g){f.push({type:"group-footer",cells:b.map(new Array(this.dataSource.group().length),function(){return{background:"#dfdfdf",color:"#333"}}).concat(d)})}return f},_isColumnVisible:function(d){return this._visibleColumns([d]).length>0&&(d.field||d.columns)},_visibleColumns:function(d){var e=this;return b.grep(d,function(g){var f=!g.hidden;if(f&&g.columns){f=e._visibleColumns(g.columns).length>0}return f})},_headerRow:function(f,d){var e=b.map(f.cells,function(g){return{background:"#7a7a7a",color:"#fff",value:g.title,colSpan:g.colSpan>1?g.colSpan:1,rowSpan:f.rowSpan>1&&!g.colSpan?f.rowSpan:1}});if(this._hierarchical()){e[0].colSpan=this._depth()+1}return{type:"header",cells:b.map(new Array(d.length),function(){return{background:"#7a7a7a",color:"#fff"}}).concat(e)}},_prependHeaderRows:function(g){var e=this.dataSource.group();var f=[{rowSpan:1,cells:[],index:0}];this._prepareHeaderRows(f,this.options.columns);for(var d=f.length-1;d>=0;d--){g.unshift(this._headerRow(f[d],e))}},_prepareHeaderRows:function(l,f,d,j){var k=j||l[l.length-1];var g=l[k.index+1];var m=0;var e;var i;for(var h=0;h<f.length;h++){e=f[h];if(this._isColumnVisible(e)){i={title:e.title||e.field,colSpan:0};k.cells.push(i);if(e.columns&&e.columns.length){if(!g){g={rowSpan:0,cells:[],index:l.length};l.push(g)}i.colSpan=this._trimColumns(this._visibleColumns(e.columns)).length;this._prepareHeaderRows(l,e.columns,i,g);m+=i.colSpan-1;k.rowSpan=l.length-k.index}}}if(d){d.colSpan+=m}},_rows:function(){var d=this.dataSource.group();var f=this._dataRows(this.dataSource.view(),0);if(this.columns.length){this._prependHeaderRows(f);var g=false;var e=b.map(this.columns,b.proxy(function(h){if(h.footerTemplate){g=true;var i=this.dataSource.aggregates();return{background:"#dfdfdf",color:"#333",value:h.footerTemplate(b.extend({},i,i[h.field]))}}else{return{background:"#dfdfdf",color:"#333"}}},this));if(g){f.push({type:"footer",cells:b.map(new Array(d.length),function(){return{background:"#dfdfdf",color:"#333"}}).concat(e)})}}return f},_headerDepth:function(h){var f=1;var e=0;for(var d=0;d<h.length;d++){if(h[d].columns){var g=this._headerDepth(h[d].columns);if(g>e){e=g}}}return f+e},_freezePane:function(){var e=this._visibleColumns(this.options.columns||[]);var d=this._visibleColumns(this._trimColumns(this._leafColumns(b.grep(e,function(f){return f.locked})))).length;return{rowSplit:this._headerDepth(e),colSplit:d?d+this.dataSource.group().length:0}},_cell:function(d,e){return{value:e.value(d)}},_hierarchical:function(){return this.options.hierarchy&&this.dataSource.level},_depth:function(){var g=this.dataSource;var f=0;var d,e,h;if(this._hierarchical()){d=g.view();for(e=0;e<d.length;e++){h=g.level(d[e]);if(h>f){f=h}}f++}else{f=g.group().length}return f},_columns:function(){var e=this._depth();var d=b.map(new Array(e),function(){return{width:20}});return d.concat(b.map(this.columns,function(f){return{width:parseInt(f.width,10),autoWidth:f.width?false:true}}))}});c.ExcelMixin={extend:function(d){d.events.push("excelExport");d.options.excel=b.extend(d.options.excel,this.options);d.saveAsExcel=this.saveAsExcel},options:{proxyURL:"",allPages:false,filterable:false,fileName:"Export.xlsx"},saveAsExcel:function(){var e=this.options.excel||{};var d=new c.ExcelExporter({columns:this.columns,dataSource:this.dataSource,allPages:e.allPages,filterable:e.filterable,hierarchy:e.hierarchy});d.workbook().then(b.proxy(function(g,h){if(!this.trigger("excelExport",{workbook:g,data:h})){var f=new c.ooxml.Workbook(g);c.saveAs({dataURI:f.toDataURL(),fileName:g.fileName||e.fileName,proxyURL:e.proxyURL,forceProxy:e.forceProxy})}},this))}}}(kendo.jQuery,kendo));return kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.data.signalr",["kendo.data"],a)}(function(){var a={id:"data.signalr",name:"SignalR",category:"framework",depends:["data"],hidden:true};(function(b){var c=kendo.data.RemoteTransport.extend({init:function(e){var d=e&&e.signalr?e.signalr:{};var g=d.promise;if(!g){throw new Error('The "promise" option must be set.')}if(typeof g.done!="function"||typeof g.fail!="function"){throw new Error('The "promise" option must be a Promise.')}this.promise=g;var f=d.hub;if(!f){throw new Error('The "hub" option must be set.')}if(typeof f.on!="function"||typeof f.invoke!="function"){throw new Error('The "hub" option is not a valid SignalR hub proxy.')}this.hub=f;kendo.data.RemoteTransport.fn.init.call(this,e)},push:function(e){var d=this.options.signalr.client||{};if(d.create){this.hub.on(d.create,e.pushCreate)}if(d.update){this.hub.on(d.update,e.pushUpdate)}if(d.destroy){this.hub.on(d.destroy,e.pushDestroy)}},_crud:function(e,g){var f=this.hub;var i=this.options.signalr.server;if(!i||!i[g]){throw new Error(kendo.format('The "server.{0}" option must be set.',g))}var d=[i[g]];var h=this.parameterMap(e.data,g);if(!b.isEmptyObject(h)){d.push(h)}this.promise.done(function(){f.invoke.apply(f,d).done(e.success).fail(e.error)})},read:function(d){this._crud(d,"read")},create:function(d){this._crud(d,"create")},update:function(d){this._crud(d,"update")},destroy:function(d){this._crud(d,"destroy")}});b.extend(true,kendo.data,{transports:{signalr:c}})}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("drawing/util",["kendo.core"],a)}(function(){(function(b){function c(){return b.Deferred()}function a(d){return b.when.apply(b,d)}kendo.drawing.util=kendo.drawing.util||{};kendo.deepExtend(kendo.drawing.util,{createPromise:c,promiseAll:a})}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.color",["kendo.core"],a)}(function(){var m={id:"color",name:"Color utils",category:"framework",advanced:true,description:"Color utilities used across components",depends:["core"]};window.kendo=window.kendo||{};var b=kendo.Class;var p=kendo.support;var j={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};var l=p.browser;var k=["transparent"];for(var g in j){if(j.hasOwnProperty(g)){k.push(g)}}k=new RegExp("^("+k.join("|")+")(\\W|$)","i");var n=b.extend({init:function(){},toHSV:function(){return this},toRGB:function(){return this},toHex:function(){return this.toBytes().toHex()},toBytes:function(){return this},toCss:function(){return"#"+this.toHex()},toCssRgba:function(){var i=this.toBytes();return"rgba("+i.r+", "+i.g+", "+i.b+", "+parseFloat(Number(this.a).toFixed(3))+")"},toDisplay:function(){if(l.msie&&l.version<9){return this.toCss()}return this.toCssRgba()},equals:function(i){return i===this||i!==null&&this.toCssRgba()===q(i).toCssRgba()},diff:function(i){if(i===null){return NaN}var s=this.toBytes();var r=i.toBytes();return Math.sqrt(Math.pow((s.r-r.r)*0.3,2)+Math.pow((s.g-r.g)*0.59,2)+Math.pow((s.b-r.b)*0.11,2))},clone:function(){var i=this.toBytes();if(i===this){i=new o(i.r,i.g,i.b,i.a)}return i}});var f=n.extend({init:function(u,t,i,s){n.fn.init.call(this);this.r=u;this.g=t;this.b=i;this.a=s},toHSV:function(){var t=this;var i=t.r;var x=t.g;var y=t.b;var u=Math.min(i,x,y);var z=Math.max(i,x,y);var A=z-u;var B=z;var w,C;if(A===0){return new a(0,0,B,this.a)}if(z!==0){C=A/z;if(i===z){w=(x-y)/A}else{if(x===z){w=2+(y-i)/A}else{w=4+(i-x)/A}}w*=60;if(w<0){w+=360}}else{C=0;w=-1}return new a(w,C,B,this.a)},toHSL:function(){var t=this;var i=t.r;var x=t.g;var z=t.b;var A=Math.max(i,x,z);var v=Math.min(i,x,z);var w,B,u=(A+v)/2;if(A===v){w=B=0}else{var y=A-v;B=u>0.5?y/(2-A-v):y/(A+v);switch(A){case i:w=(x-z)/y+(x<z?6:0);break;case x:w=(z-i)/y+2;break;case z:w=(i-x)/y+4;break;default:break}w*=60;B*=100;u*=100}return new h(w,B,u,this.a)},toBytes:function(){return new o(this.r*255,this.g*255,this.b*255,this.a)}});var o=f.extend({init:function(u,t,i,s){f.fn.init.call(this,Math.round(u),Math.round(t),Math.round(i),s)},toRGB:function(){return new f(this.r/255,this.g/255,this.b/255,this.a)},toHSV:function(){return this.toRGB().toHSV()},toHSL:function(){return this.toRGB().toHSL()},toHex:function(){return e(this.r,2)+e(this.g,2)+e(this.b,2)},toBytes:function(){return this}});function e(t,r,s){if(s===void 0){s="0"}var i=t.toString(16);while(r>i.length){i=s+i}return i}var a=n.extend({init:function(u,t,r,i){n.fn.init.call(this);this.h=u;this.s=t;this.v=r;this.a=i},toRGB:function(){var y=this;var A=y.h;var G=y.s;var E=y.v;var u,B,D;if(G===0){u=B=D=E}else{A/=60;var z=Math.floor(A);var C=A-z;var x=E*(1-G);var w=E*(1-G*C);var F=E*(1-G*(1-C));switch(z){case 0:u=E;B=F;D=x;break;case 1:u=w;B=E;D=x;break;case 2:u=x;B=E;D=F;break;case 3:u=x;B=w;D=E;break;case 4:u=F;B=x;D=E;break;default:u=E;B=x;D=w;break}}return new f(u,B,D,this.a)},toHSL:function(){return this.toRGB().toHSL()},toBytes:function(){return this.toRGB().toBytes()}});var h=n.extend({init:function(u,t,r,i){n.fn.init.call(this);this.h=u;this.s=t;this.l=r;this.a=i},toRGB:function(){var v=this;var x=v.h;var A=v.s;var w=v.l;var i,y,z;if(A===0){i=y=z=w}else{x/=360;A/=100;w/=100;var t=w<0.5?w*(1+A):w+A-w*A;var u=2*w-t;i=d(u,t,x+1/3);y=d(u,t,x);z=d(u,t,x-1/3)}return new f(i,y,z,this.a)},toHSV:function(){return this.toRGB().toHSV()},toBytes:function(){return this.toRGB().toBytes()}});function d(v,u,r){var i=r;if(i<0){i+=1}if(i>1){i-=1}if(i<1/6){return v+(u-v)*6*i}if(i<1/2){return u}if(i<2/3){return v+(u-v)*(2/3-i)*6}return v}function q(u,t){var i,s;if(u==null||u==="none"){return null}if(u instanceof n){return u}var r=u.toLowerCase();if(i=k.exec(r)){if(i[1]==="transparent"){r=new f(1,1,1,0)}else{r=q(j[i[1]],t)}r.match=[i[1]];return r}if(i=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(r)){s=new o(parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),1)}else{if(i=/^#?([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(r)){s=new o(parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16),1)}else{if(i=/^rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/.exec(r)){s=new o(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),1)}else{if(i=/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)/.exec(r)){s=new o(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),parseFloat(i[4]))}else{if(i=/^rgb\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*\)/.exec(r)){s=new f(parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])/100,1)}else{if(i=/^rgba\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9.]+)\s*\)/.exec(r)){s=new f(parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])/100,parseFloat(i[4]))}}}}}}if(s){s.match=i}else{if(!t){throw new Error("Cannot parse color: "+r)}}return s}var c=b.extend({init:function(x){var u=this;if(arguments.length===1){var w=c.formats;var v=this.resolveColor(x);for(var y=0;y<w.length;y++){var r=w[y].re;var i=w[y].process;var s=r.exec(v);if(s){var t=i(s);u.r=t[0];u.g=t[1];u.b=t[2]}}}else{this.r=arguments[0];this.g=arguments[1];this.b=arguments[2]}this.r=this.normalizeByte(this.r);this.g=this.normalizeByte(this.g);this.b=this.normalizeByte(this.b)},toHex:function(){var u=this.padDigit;var t=this.r.toString(16);var s=this.g.toString(16);var i=this.b.toString(16);return"#"+u(t)+u(s)+u(i)},resolveColor:function(r){var i=r||"black";if(i.charAt(0)==="#"){i=i.substr(1,6)}i=i.replace(/ /g,"");i=i.toLowerCase();i=c.namedColors[i]||i;return i},normalizeByte:function(i){if(i<0||isNaN(i)){return 0}return i>255?255:i},padDigit:function(i){return i.length===1?"0"+i:i},brightness:function(r){var i=Math.round;this.r=i(this.normalizeByte(this.r*r));this.g=i(this.normalizeByte(this.g*r));this.b=i(this.normalizeByte(this.b*r));return this},percBrightness:function(){return Math.sqrt(0.241*this.r*this.r+0.691*this.g*this.g+0.068*this.b*this.b)}});c.fromBytes=function(u,t,i,s){return new o(u,t,i,s!=null?s:1)};c.fromRGB=function(u,t,i,s){return new f(u,t,i,s!=null?s:1)};c.fromHSV=function(u,t,r,i){return new a(u,t,r,i!=null?i:1)};c.fromHSL=function(u,t,r,i){return new h(u,t,r,i!=null?i:1)};c.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(i){return[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(i){return[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(i){return[parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16)]}}];c.namedColors=j;kendo.deepExtend(kendo,{parseColor:q,Color:c})},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("util/text-metrics",["kendo.core"],a)}(function(){(function(c){window.kendo.util=window.kendo.util||{};var e=kendo.Class.extend({init:function(j){this._size=j;this._length=0;this._map={}},put:function(j,l){var m=this._map;var k={key:j,value:l};m[j]=k;if(!this._head){this._head=this._tail=k}else{this._tail.newer=k;k.older=this._tail;this._tail=k}if(this._length>=this._size){m[this._head.key]=null;this._head=this._head.newer;this._head.older=null}else{this._length++}},get:function(j){var k=this._map[j];if(k){if(k===this._head&&k!==this._tail){this._head=k.newer;this._head.older=null}if(k!==this._tail){if(k.older){k.older.newer=k.newer;k.newer.older=k.older}k.older=this._tail;k.newer=null;this._tail.newer=k;this._tail=k}return k.value}}});function h(j){var l=[];for(var k in j){l.push(k+j[k])}return l.sort().join("")}function g(l){var k=2166136261;for(var j=0;j<l.length;++j){k+=(k<<1)+(k<<4)+(k<<7)+(k<<8)+(k<<24);k^=l.charCodeAt(j)}return k>>>0}function d(){return{width:0,height:0,baseline:0}}var a={baselineMarkerSize:1};var i;if(typeof document!=="undefined"){i=document.createElement("div");i.style.cssText="position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: nowrap!important;"}var f=kendo.Class.extend({init:function(j){this._cache=new e(1000);this.options=c.extend({},a,j)},measure:function(s,j,m){if(!s){return d()}var n=h(j);var p=g(s+n);var k=this._cache.get(p);if(k){return k}var t=d();var o=m||i;var l=this._baselineMarker().cloneNode(false);for(var r in j){var q=j[r];if(typeof q!=="undefined"){o.style[r]=q}}o.textContent=s;o.appendChild(l);document.body.appendChild(o);if(String(s).length){t.width=o.offsetWidth-this.options.baselineMarkerSize;t.height=o.offsetHeight;t.baseline=l.offsetTop+this.options.baselineMarkerSize}if(t.width>0&&t.height>0){this._cache.put(p,t)}o.parentNode.removeChild(o);return t},_baselineMarker:function(){var j=document.createElement("div");j.style.cssText="display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;";return j}});f.current=new f();function b(l,k,j){return f.current.measure(l,k,j)}kendo.deepExtend(kendo.util,{LRUCache:e,TextMetrics:f,measureText:b,objectKey:h,hashKey:g})}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("drawing/kendo-drawing",["drawing/util","kendo.color","util/text-metrics"],a)}(function(){(function(dN){window.kendo=window.kendo||{};var dZ=kendo.drawing;var aY=dZ.util;var ak=kendo.Class;var aG=kendo.util;var c3=kendo.support;var aW=aY.createPromise;var c0=aY.promiseAll;var E={extend:function(d7){var d9=this;for(var d8 in this){if(d8!=="extend"){d7[d8]=d9[d8]}}},observers:function(){this._observers=this._observers||[];return this._observers},addObserver:function(d7){if(!this._observers){this._observers=[d7]}else{this._observers.push(d7)}return this},removeObserver:function(d8){var d9=this.observers();var d7=d9.indexOf(d8);if(d7!==-1){d9.splice(d7,1)}return this},trigger:function(d9,ea){var eb=this._observers;if(eb&&!this._suspended){for(var d7=0;d7<eb.length;d7++){var d8=eb[d7];if(d8[d9]){d8[d9](ea)}}}return this},optionsChange:function(d7){if(d7===void 0){d7={}}d7.element=this;this.trigger("optionsChange",d7)},geometryChange:function(){this.trigger("geometryChange",{element:this})},suspend:function(){this._suspended=(this._suspended||0)+1;return this},resume:function(){this._suspended=Math.max((this._suspended||0)-1,0);return this},_observerField:function(d8,d7){if(this[d8]){this[d8].removeObserver(this)}this[d8]=d7;d7.addObserver(this)}};function bu(d8,d7){d8.push.apply(d8,d7);return d8}var bp={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1000:"m"};function Y(d9){var d7=[1000,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1];var d8="";while(d9>0){if(d9<d7[0]){d7.shift()}else{d8+=bp[d7[0]];d9-=d7[0]}}return d8}var l="undefined";function bf(d7){return typeof d7!==l}var aC=1;function ca(){return"kdef"+aC++}var bv=Math.PI/180;var d3=Number.MAX_VALUE;var bI=-Number.MAX_VALUE;function bx(d7){return d7/bv}var ci="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var ar=String.fromCharCode;function bM(d8){var d7="";for(var d9=0;d9<d8.length;d9++){var ea=d8.charCodeAt(d9);if(ea<128){d7+=ar(ea)}else{if(ea<2048){d7+=ar(192|ea>>>6);d7+=ar(128|ea&63)}else{if(ea<65536){d7+=ar(224|ea>>>12);d7+=ar(128|ea>>>6&63);d7+=ar(128|ea&63)}}}}return d7}function dA(d9){var d7="";var d8=0;var ea=bM(d9);while(d8<ea.length){var eh=ea.charCodeAt(d8++);var ef=ea.charCodeAt(d8++);var ed=ea.charCodeAt(d8++);var eg=eh>>2;var ee=(eh&3)<<4|ef>>4;var ec=(ef&15)<<2|ed>>6;var eb=ed&63;if(isNaN(ef)){ec=eb=64}else{if(isNaN(ed)){eb=64}}d7=d7+ci.charAt(eg)+ci.charAt(ee)+ci.charAt(ec)+ci.charAt(eb)}return d7}function cr(d7){if(bf((d7.x||{}).location)){return{x:d7.x.location,y:d7.y.location}}return{x:d7.pageX||d7.clientX||0,y:d7.pageY||d7.clientY||0}}function cx(d7){if(d7===void 0){d7={}}return d7.touch?d7.touch.initialTouch:d7.target}function aI(d7){return d7===""||d7===null||d7==="none"||d7==="transparent"||!bf(d7)}function dj(d7){if(d7){return d7[d7.length-1]}}function cc(d9,d8,d7){return Math.max(Math.min(d9,d7),d8)}function dM(d7,d9){if(d7.length<2){return d7.slice()}function ea(ed,ec){var eg=[],eb=0,ee=0,ef=0;while(eb<ed.length&&ee<ec.length){if(d9(ed[eb],ec[ee])<=0){eg[ef++]=ed[eb++]}else{eg[ef++]=ec[ee++]}}if(eb<ed.length){eg.push.apply(eg,ed.slice(eb))}if(ee<ec.length){eg.push.apply(eg,ec.slice(ee))}return eg}return function d8(ec){if(ec.length<=1){return ec}var eb=Math.floor(ec.length/2);var ee=ec.slice(0,eb);var ed=ec.slice(eb);ee=d8(ee);ed=d8(ed);return ea(ee,ed)}(d7)}function K(d7){return d7*bv}function o(d7){if(d7){return Math.pow(10,d7)}return 1}function cg(d9,d7){var d8=o(d7);return Math.round(d9*d8)/d8}function bj(d8,d7){return bf(d8)?d8:d7}function aT(ea,d9){for(var d8 in d9){var eb=d8.trim().split(" ");for(var d7=0;d7<eb.length;d7++){ea.addEventListener(eb[d7],d9[d8],false)}}}function cY(d7){var d8=d7.getBoundingClientRect();var d9=document.documentElement;return{top:d8.top+(window.pageYOffset||d9.scrollTop)-(d9.clientTop||0),left:d8.left+(window.pageXOffset||d9.scrollLeft)-(d9.clientLeft||0)}}function s(ea,ec){var d8={};var eb=window.getComputedStyle(ea);var d9=Array.isArray(ec)?ec:[ec];for(var d7=0;d7<d9.length;d7++){var ed=d9[d7];d8[ed]=eb[ed]}return d8}function az(d7){if(isNaN(d7)){return d7}return d7+"px"}function dS(ea,d9){if(d9){var eb=d9.width;var d8=d9.height;if(bf(eb)){ea.style.width=az(eb)}if(bf(d8)){ea.style.height=az(d8)}}else{var d7=s(ea,["width","height"]);return{width:parseInt(d7.width,10),height:parseInt(d7.height,10)}}}function cZ(ea,d9){if(d9===void 0){d9={}}for(var d8 in d9){var eb=d8.trim().split(" ");for(var d7=0;d7<eb.length;d7++){ea.removeEventListener(eb[d7],d9[d8],false)}}}var du={append:bu,arabicToRoman:Y,createPromise:aW,defined:bf,definitionId:ca,deg:bx,encodeBase64:dA,eventCoordinates:cr,eventElement:cx,isTransparent:aI,last:dj,limitValue:cc,mergeSort:dM,promiseAll:c0,rad:K,round:cg,valueOrDefault:bj,bindEvents:aT,elementOffset:cY,elementSize:dS,elementStyles:s,unbindEvents:cZ,DEG_TO_RAD:bv,MAX_NUM:d3,MIN_NUM:bI};var cW={}.toString;var bR=ak.extend({init:function(d7,d8){var eb=this;if(d8===void 0){d8=""}this.prefix=d8;for(var d9 in d7){var ea=d7[d9];ea=eb._wrap(ea,d9);eb[d9]=ea}},get:function(ea){var d9=ea.split(".");var d7=this;while(d9.length&&d7){var d8=d9.shift();d7=d7[d8]}return d7},set:function(d9,d7){var d8=this.get(d9);if(d8!==d7){this._set(d9,this._wrap(d7,d9));this.optionsChange({field:this.prefix+d9,value:d7})}},_set:function(ec,ed){var ea=this;var ee=ec.indexOf(".")>=0;var d8=this;var ef=ec;if(ee){var d7=ef.split(".");var eb=this.prefix;while(d7.length>1){ef=d7.shift();eb+=ef+".";var d9=d8[ef];if(!d9){d9=new bR({},eb);d9.addObserver(ea);d8[ef]=d9}d8=d9}ef=d7[0]}d8._clear(ef);d8[ef]=ed},_clear:function(d8){var d7=this[d8];if(d7&&d7.removeObserver){d7.removeObserver(this)}},_wrap:function(d8,ea){var d9=cW.call(d8);var d7=d8;if(d7!==null&&bf(d7)&&d9==="[object Object]"){if(!(d8 instanceof bR)&&!(d8 instanceof ak)){d7=new bR(d7,this.prefix+ea+".")}d7.addObserver(this)}return d7}});E.extend(bR.prototype);function dc(d7){return function(d8){if(this[d7]!==d8){this[d7]=d8;this.geometryChange()}return this}}function O(d7){return function(){return this[d7]}}function c6(ea,d7){for(var d9=0;d9<d7.length;d9++){var d8=d7[d9];var eb=d8.charAt(0).toUpperCase()+d8.substring(1,d8.length);ea["set"+eb]=dc(d8);ea["get"+eb]=O(d8)}}var dm=ak.extend({init:function(d8,d7,ec,eb,ea,d9){if(d8===void 0){d8=0}if(d7===void 0){d7=0}if(ec===void 0){ec=0}if(eb===void 0){eb=0}if(ea===void 0){ea=0}if(d9===void 0){d9=0}this.a=d8;this.b=d7;this.c=ec;this.d=eb;this.e=ea;this.f=d9},multiplyCopy:function(d7){return new dm(this.a*d7.a+this.c*d7.b,this.b*d7.a+this.d*d7.b,this.a*d7.c+this.c*d7.d,this.b*d7.c+this.d*d7.d,this.a*d7.e+this.c*d7.f+this.e,this.b*d7.e+this.d*d7.f+this.f)},invert:function(){var ec=this;var d8=ec.a;var d7=ec.b;var ee=ec.c;var ed=ec.d;var eb=ec.e;var ea=ec.f;var d9=d8*ed-d7*ee;if(d9===0){return null}return new dm(ed/d9,-d7/d9,-ee/d9,d8/d9,(ee*ea-ed*eb)/d9,(d7*eb-d8*ea)/d9)},clone:function(){return new dm(this.a,this.b,this.c,this.d,this.e,this.f)},equals:function(d7){if(!d7){return false}return this.a===d7.a&&this.b===d7.b&&this.c===d7.c&&this.d===d7.d&&this.e===d7.e&&this.f===d7.f},round:function(d7){this.a=cg(this.a,d7);this.b=cg(this.b,d7);this.c=cg(this.c,d7);this.d=cg(this.d,d7);this.e=cg(this.e,d7);this.f=cg(this.f,d7);return this},toArray:function(d8){var d7=[this.a,this.b,this.c,this.d,this.e,this.f];if(bf(d8)){for(var d9=0;d9<d7.length;d9++){d7[d9]=cg(d7[d9],d8)}}return d7},toString:function(d7,d8){if(d8===void 0){d8=","}return this.toArray(d7).join(d8)}});dm.translate=function(d7,d8){return new dm(1,0,0,1,d7,d8)};dm.unit=function(){return new dm(1,0,0,1,0,0)};dm.rotate=function(d9,d7,ea){var d8=new dm();d8.a=Math.cos(K(d9));d8.b=Math.sin(K(d9));d8.c=-d8.b;d8.d=d8.a;d8.e=d7-d7*d8.a+ea*d8.b||0;d8.f=ea-ea*d8.a-d7*d8.b||0;return d8};dm.scale=function(d8,d7){return new dm(d8,0,0,d7,0,0)};dm.IDENTITY=dm.unit();function V(d7){if(d7&&typeof d7.matrix==="function"){return d7.matrix()}return d7}var dY=ak.extend({init:function(d7,d8){if(d7===void 0){d7=0}if(d8===void 0){d8=0}this.x=d7;this.y=d8},equals:function(d7){return d7&&d7.x===this.x&&d7.y===this.y},clone:function(){return new dY(this.x,this.y)},rotate:function(d9,d7){var d8=dY.create(d7)||dY.ZERO;return this.transform(dm.rotate(d9,d8.x,d8.y))},translate:function(d7,d8){this.x+=d7;this.y+=d8;this.geometryChange();return this},translateWith:function(d7){return this.translate(d7.x,d7.y)},move:function(d7,d8){this.x=this.y=0;return this.translate(d7,d8)},scale:function(d8,d7){if(d7===void 0){d7=d8}this.x*=d8;this.y*=d7;this.geometryChange();return this},scaleCopy:function(d8,d7){return this.clone().scale(d8,d7)},transform:function(ea){var d8=V(ea);var d9=this;var d7=d9.x;var eb=d9.y;this.x=d8.a*d7+d8.c*eb+d8.e;this.y=d8.b*d7+d8.d*eb+d8.f;this.geometryChange();return this},transformCopy:function(d8){var d7=this.clone();if(d8){d7.transform(d8)}return d7},distanceTo:function(d7){var d9=this.x-d7.x;var d8=this.y-d7.y;return Math.sqrt(d9*d9+d8*d8)},round:function(d7){this.x=cg(this.x,d7);this.y=cg(this.y,d7);this.geometryChange();return this},toArray:function(d9){var d8=bf(d9);var d7=d8?cg(this.x,d9):this.x;var ea=d8?cg(this.y,d9):this.y;return[d7,ea]},toString:function(d9,ea){if(ea===void 0){ea=" "}var d8=this;var d7=d8.x;var eb=d8.y;if(bf(d9)){d7=cg(d7,d9);eb=cg(eb,d9)}return d7+ea+eb}});dY.create=function(d8,d7){if(bf(d8)){if(d8 instanceof dY){return d8}else{if(arguments.length===1&&d8.length===2){return new dY(d8[0],d8[1])}}return new dY(d8,d7)}};dY.min=function(){var d9=arguments;var d8=d3;var eb=d3;for(var ea=0;ea<arguments.length;ea++){var d7=d9[ea];d8=Math.min(d7.x,d8);eb=Math.min(d7.y,eb)}return new dY(d8,eb)};dY.max=function(){var d8=arguments;var eb=bI;var ea=bI;for(var d9=0;d9<arguments.length;d9++){var d7=d8[d9];eb=Math.max(d7.x,eb);ea=Math.max(d7.y,ea)}return new dY(eb,ea)};dY.minPoint=function(){return new dY(bI,bI)};dY.maxPoint=function(){return new dY(d3,d3)};if(Object.defineProperties){Object.defineProperties(dY,{ZERO:{get:function(){return new dY(0,0)}}})}c6(dY.prototype,["x","y"]);E.extend(dY.prototype);var b2=ak.extend({init:function(d8,d7){if(d8===void 0){d8=0}if(d7===void 0){d7=0}this.width=d8;this.height=d7},equals:function(d7){return d7&&d7.width===this.width&&d7.height===this.height},clone:function(){return new b2(this.width,this.height)},toArray:function(ea){var d9=bf(ea);var d8=d9?cg(this.width,ea):this.width;var d7=d9?cg(this.height,ea):this.height;return[d8,d7]}});b2.create=function(d8,d7){if(bf(d8)){if(d8 instanceof b2){return d8}else{if(arguments.length===1&&d8.length===2){return new b2(d8[0],d8[1])}}return new b2(d8,d7)}};if(Object.defineProperties){Object.defineProperties(b2,{ZERO:{get:function(){return new b2(0,0)}}})}c6(b2.prototype,["width","height"]);E.extend(b2.prototype);var aV=ak.extend({init:function(d7,d8){if(d7===void 0){d7=new dY()}if(d8===void 0){d8=new b2()}this.setOrigin(d7);this.setSize(d8)},clone:function(){return new aV(this.origin.clone(),this.size.clone())},equals:function(d7){return d7&&d7.origin.equals(this.origin)&&d7.size.equals(this.size)},setOrigin:function(d7){this._observerField("origin",dY.create(d7));this.geometryChange();return this},getOrigin:function(){return this.origin},setSize:function(d7){this._observerField("size",b2.create(d7));this.geometryChange();return this},getSize:function(){return this.size},width:function(){return this.size.width},height:function(){return this.size.height},topLeft:function(){return this.origin.clone()},bottomRight:function(){return this.origin.clone().translate(this.width(),this.height())},topRight:function(){return this.origin.clone().translate(this.width(),0)},bottomLeft:function(){return this.origin.clone().translate(0,this.height())},center:function(){return this.origin.clone().translate(this.width()/2,this.height()/2)},bbox:function(d8){var d7=this.topLeft().transformCopy(d8);var ea=this.topRight().transformCopy(d8);var d9=this.bottomRight().transformCopy(d8);var eb=this.bottomLeft().transformCopy(d8);return aV.fromPoints(d7,ea,d9,eb)},transformCopy:function(d7){return aV.fromPoints(this.topLeft().transform(d7),this.bottomRight().transform(d7))},expand:function(d7,d8){if(d8===void 0){d8=d7}this.size.width+=2*d7;this.size.height+=2*d8;this.origin.translate(-d7,-d8);return this},expandCopy:function(d7,d8){return this.clone().expand(d7,d8)},containsPoint:function(d7){var d8=this.origin;var d9=this.bottomRight();return !(d7.x<d8.x||d7.y<d8.y||d9.x<d7.x||d9.y<d7.y)},_isOnPath:function(d7,ea){var d9=this.expandCopy(ea,ea);var d8=this.expandCopy(-ea,-ea);return d9.containsPoint(d7)&&!d8.containsPoint(d7)}});aV.fromPoints=function(){var d9=dY.min.apply(null,arguments);var d8=dY.max.apply(null,arguments);var d7=new b2(d8.x-d9.x,d8.y-d9.y);return new aV(d9,d7)};aV.union=function(d8,d7){return aV.fromPoints(dY.min(d8.topLeft(),d7.topLeft()),dY.max(d8.bottomRight(),d7.bottomRight()))};aV.intersect=function(d9,d7){var ea={left:d9.topLeft().x,top:d9.topLeft().y,right:d9.bottomRight().x,bottom:d9.bottomRight().y};var d8={left:d7.topLeft().x,top:d7.topLeft().y,right:d7.bottomRight().x,bottom:d7.bottomRight().y};if(ea.left<=d8.right&&d8.left<=ea.right&&ea.top<=d8.bottom&&d8.top<=ea.bottom){return aV.fromPoints(new dY(Math.max(ea.left,d8.left),Math.max(ea.top,d8.top)),new dY(Math.min(ea.right,d8.right),Math.min(ea.bottom,d8.bottom)))}};E.extend(aV.prototype);var aA=ak.extend({init:function(d7){if(d7===void 0){d7=dm.unit()}this._matrix=d7},clone:function(){return new aA(this._matrix.clone())},equals:function(d7){return d7&&d7._matrix.equals(this._matrix)},translate:function(d7,d8){this._matrix=this._matrix.multiplyCopy(dm.translate(d7,d8));this._optionsChange();return this},scale:function(d9,d8,d7){if(d8===void 0){d8=d9}if(d7===void 0){d7=null}var ea=d7;if(ea){ea=dY.create(ea);this._matrix=this._matrix.multiplyCopy(dm.translate(ea.x,ea.y))}this._matrix=this._matrix.multiplyCopy(dm.scale(d9,d8));if(ea){this._matrix=this._matrix.multiplyCopy(dm.translate(-ea.x,-ea.y))}this._optionsChange();return this},rotate:function(d9,d7){var d8=dY.create(d7)||dY.ZERO;this._matrix=this._matrix.multiplyCopy(dm.rotate(d9,d8.x,d8.y));this._optionsChange();return this},multiply:function(d8){var d7=V(d8);this._matrix=this._matrix.multiplyCopy(d7);this._optionsChange();return this},matrix:function(d7){if(d7){this._matrix=d7;this._optionsChange();return this}return this._matrix},_optionsChange:function(){this.optionsChange({field:"transform",value:this})}});E.extend(aA.prototype);function R(d7){if(d7===null){return null}if(d7 instanceof aA){return d7}return new aA(d7)}var a9=ak.extend({init:function(d7){this._initOptions(d7)},_initOptions:function(d8){if(d8===void 0){d8={}}var d9=d8.clip;var d7=d8.transform;if(d7){d8.transform=R(d7)}if(d9&&!d9.id){d9.id=ca()}this.options=new bR(d8);this.options.addObserver(this)},transform:function(d7){if(bf(d7)){this.options.set("transform",R(d7))}else{return this.options.get("transform")}},parentTransform:function(){var d7=this;var d9;while(d7.parent){d7=d7.parent;var d8=d7.transform();if(d8){d9=d8.matrix().multiplyCopy(d9||dm.unit())}}if(d9){return R(d9)}},currentTransform:function(d7){if(d7===void 0){d7=this.parentTransform()}var d9=this.transform();var eb=V(d9);var ea=V(d7);var d8;if(eb&&ea){d8=ea.multiplyCopy(eb)}else{d8=eb||ea}if(d8){return R(d8)}},visible:function(d7){if(bf(d7)){this.options.set("visible",d7);return this}return this.options.get("visible")!==false},clip:function(d8){var d7=this.options;if(bf(d8)){if(d8&&!d8.id){d8.id=ca()}d7.set("clip",d8);return this}return d7.get("clip")},opacity:function(d7){if(bf(d7)){this.options.set("opacity",d7);return this}return bj(this.options.get("opacity"),1)},clippedBBox:function(d8){var d9=this._clippedBBox(d8);if(d9){var d7=this.clip();return d7?aV.intersect(d9,d7.bbox(d8)):d9}},containsPoint:function(d8,d7){if(this.visible()){var d9=this.currentTransform(d7);var ea=d8;if(d9){ea=d8.transformCopy(d9.matrix().invert())}return this._hasFill()&&this._containsPoint(ea)||this._isOnPath&&this._hasStroke()&&this._isOnPath(ea)}return false},_hasFill:function(){var d7=this.options.fill;return d7&&!aI(d7.color)},_hasStroke:function(){var d7=this.options.stroke;return d7&&d7.width>0&&!aI(d7.color)},_clippedBBox:function(d7){return this.bbox(d7)}});a9.prototype.nodeType="Element";E.extend(a9.prototype);function dx(d7,ec,eb,d8){var ea=0;var d9=0;if(d8){ea=Math.atan2(d8.c*eb,d8.a*ec);if(d8.b!==0){d9=Math.atan2(d8.d*eb,d8.b*ec)}}return{x:ea,y:d9}}var d5=Math.PI/2;var bs=ak.extend({init:function(d8,d7){if(d8===void 0){d8=new dY()}if(d7===void 0){d7=0}this.setCenter(d8);this.setRadius(d7)},setCenter:function(d7){this._observerField("center",dY.create(d7));this.geometryChange();return this},getCenter:function(){return this.center},equals:function(d7){return d7&&d7.center.equals(this.center)&&d7.radius===this.radius},clone:function(){return new bs(this.center.clone(),this.radius)},pointAt:function(d7){return this._pointAt(K(d7))},bbox:function(ed){var d9=this;var d7=dx(this.center,this.radius,this.radius,ed);var ee=dY.maxPoint();var eb=dY.minPoint();for(var d8=0;d8<4;d8++){var ec=d9._pointAt(d7.x+d8*d5).transformCopy(ed);var ea=d9._pointAt(d7.y+d8*d5).transformCopy(ed);var ef=new dY(ec.x,ea.y);ee=dY.min(ee,ef);eb=dY.max(eb,ef)}return aV.fromPoints(ee,eb)},_pointAt:function(ea){var d9=this;var d8=d9.center;var d7=d9.radius;return new dY(d8.x+d7*Math.cos(ea),d8.y+d7*Math.sin(ea))},containsPoint:function(d9){var eb=this;var d8=eb.center;var d7=eb.radius;var ea=Math.pow(d9.x-d8.x,2)+Math.pow(d9.y-d8.y,2)<=Math.pow(d7,2);return ea},_isOnPath:function(d9,ea){var eb=this;var d8=eb.center;var d7=eb.radius;var ec=d8.distanceTo(d9);return d7-ea<=ec&&ec<=d7+ea}});c6(bs.prototype,["radius"]);E.extend(bs.prototype);var c1="Gradient";var bT={extend:function(d7){d7.fill=this.fill;d7.stroke=this.stroke},fill:function(d7,d9){var d8=this.options;if(bf(d7)){if(d7&&d7.nodeType!==c1){var ea={color:d7};if(bf(d9)){ea.opacity=d9}d8.set("fill",ea)}else{d8.set("fill",d7)}return this}return d8.get("fill")},stroke:function(d7,d9,d8){if(bf(d7)){this.options.set("stroke.color",d7);if(bf(d9)){this.options.set("stroke.width",d9)}if(bf(d8)){this.options.set("stroke.opacity",d8)}return this}return this.options.get("stroke")}};var aD=dm.IDENTITY.toString();var U={extend:function(d7){d7.bbox=this.bbox;d7.geometryChange=this.geometryChange},bbox:function(d9){var d8=V(this.currentTransform(d9));var d7=d8?d8.toString():aD;var ea;if(this._bboxCache&&this._matrixHash===d7){ea=this._bboxCache.clone()}else{ea=this._bbox(d8);this._bboxCache=ea?ea.clone():null;this._matrixHash=d7}var eb=this.options.get("stroke.width");if(eb&&ea){ea.expand(eb/2)}return ea},geometryChange:function(){delete this._bboxCache;this.trigger("geometryChange",{element:this})}};function bN(d7){var d8="_"+d7;return function(d9){if(bf(d9)){this._observerField(d8,d9);this.geometryChange();return this}return this[d8]}}function dL(d8,d9){for(var d7=0;d7<d9.length;d7++){d8[d9[d7]]=bN(d9[d7])}}var aU="#000";var c9=a9.extend({init:function(d8,d7){if(d8===void 0){d8=new bs()}if(d7===void 0){d7={}}a9.fn.init.call(this,d7);this.geometry(d8);if(!bf(this.options.stroke)){this.stroke(aU)}},rawBBox:function(){return this._geometry.bbox()},_bbox:function(d7){return this._geometry.bbox(d7)},_containsPoint:function(d7){return this.geometry().containsPoint(d7)},_isOnPath:function(d7){return this.geometry()._isOnPath(d7,this.options.stroke.width/2)}});c9.prototype.nodeType="Circle";bT.extend(c9.prototype);U.extend(c9.prototype);dL(c9.prototype,["geometry"]);var W=10;function bw(d8,d7,d9){if(d9===void 0){d9=W}return cg(Math.abs(d8-d7),d9)===0}function cE(d8,d7,d9){return d8<d7||bw(d8,d7,d9)}function aX(ei,eg,ef,ee){var ed=eg.x-ei.x;var d8=ee.x-ef.x;var ec=eg.y-ei.y;var d7=ee.y-ef.y;var ea=ei.x-ef.x;var d9=ei.y-ef.y;var eb=ed*d7-d8*ec;var ej=(ed*d9-ec*ea)/eb;var eh=(d8*d9-d7*ea)/eb;if(ej>=0&&ej<=1&&eh>=0&&eh<=1){return new dY(ei.x+eh*ed,ei.y+eh*ec)}}var at=45;var aL=Math.pow;var B=ak.extend({init:function(d7,d8){if(d7===void 0){d7=new dY()}if(d8===void 0){d8={}}this.setCenter(d7);this.radiusX=d8.radiusX;this.radiusY=d8.radiusY||d8.radiusX;this.startAngle=d8.startAngle;this.endAngle=d8.endAngle;this.anticlockwise=d8.anticlockwise||false},clone:function(){return new B(this.center,{radiusX:this.radiusX,radiusY:this.radiusY,startAngle:this.startAngle,endAngle:this.endAngle,anticlockwise:this.anticlockwise})},setCenter:function(d7){this._observerField("center",dY.create(d7));this.geometryChange();return this},getCenter:function(){return this.center},pointAt:function(d9){var d7=this.center;var d8=K(d9);return new dY(d7.x+this.radiusX*Math.cos(d8),d7.y+this.radiusY*Math.sin(d8))},curvePoints:function(){var ef=this;var eg=this.startAngle;var ec=this.anticlockwise?-1:1;var eb=[this.pointAt(eg)];var d9=this._arcInterval();var ei=d9.endAngle-d9.startAngle;var d7=Math.ceil(ei/at);var d8=ei/d7;var ed=eg;for(var ee=1;ee<=d7;ee++){var ea=ed+ec*d8;var eh=ef._intervalCurvePoints(ed,ea);eb.push(eh.cp1,eh.cp2,eh.p2);ed=ea}return eb},bbox:function(el){var ee=this;var eb=this._arcInterval();var ei=eb.startAngle;var ec=eb.endAngle;var ed=dx(this.center,this.radiusX,this.radiusY,el);var d9=bx(ed.x);var d7=bx(ed.y);var ej=this.pointAt(ec).transformCopy(el);var ea=dv(d9,ei);var d8=dv(d7,ei);var em=this.pointAt(ei).transformCopy(el);var ek=dY.min(em,ej);var eg=dY.max(em,ej);while(ea<ec||d8<ec){var eh=void 0;if(ea<ec){eh=ee.pointAt(ea).transformCopy(el);ea+=90}var ef=void 0;if(d8<ec){ef=ee.pointAt(d8).transformCopy(el);d8+=90}em=new dY(eh.x,ef.y);ek=dY.min(ek,em);eg=dY.max(eg,em)}return aV.fromPoints(ek,eg)},_arcInterval:function(){var ea=this;var d8=ea.startAngle;var d7=ea.endAngle;var eb=ea.anticlockwise;if(eb){var d9=d8;d8=d7;d7=d9}if(d8>d7||eb&&d8===d7){d7+=360}return{startAngle:d8,endAngle:d7}},_intervalCurvePoints:function(ec,d8){var ee=this.pointAt(ec);var ed=this.pointAt(d8);var eb=this._derivativeAt(ec);var d7=this._derivativeAt(d8);var ef=(K(d8)-K(ec))/3;var ea=new dY(ee.x+ef*eb.x,ee.y+ef*eb.y);var d9=new dY(ed.x-ef*d7.x,ed.y-ef*d7.y);return{p1:ee,cp1:ea,cp2:d9,p2:ed}},_derivativeAt:function(d8){var d7=K(d8);return new dY(-this.radiusX*Math.sin(d7),this.radiusY*Math.cos(d7))},containsPoint:function(el){var ed=this._arcInterval();var em=ed.endAngle-ed.startAngle;var ee=this;var d7=ee.center;var ec=ee.radiusX;var ea=ee.radiusY;var d9=d7.distanceTo(el);var ek=Math.atan2(el.y-d7.y,el.x-d7.x);var ei=ec*ea/Math.sqrt(aL(ec,2)*aL(Math.sin(ek),2)+aL(ea,2)*aL(Math.cos(ek),2));var eb=this.pointAt(this.startAngle).round(W);var eh=this.pointAt(this.endAngle).round(W);var d8=aX(d7,el.round(W),eb,eh);var eg;if(em<180){eg=d8&&cE(d7.distanceTo(d8),d9)&&cE(d9,ei)}else{var ef=D(d7.x,d7.y,ec,ea,el.x,el.y);if(ef!==360){ef=(360+ef)%360}var ej=ed.startAngle<=ef&&ef<=ed.endAngle;eg=ej&&cE(d9,ei)||!ej&&(!d8||d8.equals(el))}return eg},_isOnPath:function(d8,ea){var d9=this._arcInterval();var d7=this.center;var ec=D(d7.x,d7.y,this.radiusX,this.radiusY,d8.x,d8.y);if(ec!==360){ec=(360+ec)%360}var eb=d9.startAngle<=ec&&ec<=d9.endAngle;return eb&&this.pointAt(ec).distanceTo(d8)<=ea}});B.fromPoints=function(ed,d8,ec,ea,eb,d9){var d7=dF({x1:ed.x,y1:ed.y,x2:d8.x,y2:d8.y,rx:ec,ry:ea,largeArc:eb,swipe:d9});return new B(d7.center,{startAngle:d7.startAngle,endAngle:d7.endAngle,radiusX:ec,radiusY:ea,anticlockwise:d9===0})};c6(B.prototype,["radiusX","radiusY","startAngle","endAngle","anticlockwise"]);E.extend(B.prototype);function u(eb,d7,d9){var d8=d7;if(eb>d8){d8+=360}var ea=Math.abs(d8-eb);if(!d9){ea=360-ea}return ea}function D(d8,ee,ec,eb,d7,ed){var ea=cg((d7-d8)/ec,3);var d9=cg((ed-ee)/eb,3);return cg(bx(Math.atan2(d9,ea)))}function dF(ei){var ep=ei.x1;var d9=ei.y1;var eo=ei.x2;var d7=ei.y2;var eg=ei.rx;var ef=ei.ry;var ev=ei.largeArc;var en=ei.swipe;var ea,d8;var ek,eu;var ew,et,er,ex;if(d9!==d7){var ej=eo-ep;var es=d7-d9;var eq=aL(eg,2),ec=aL(ef,2);var em=(ec*ej*(ep+eo)+eq*es*(d9+d7))/(2*eq*es);var eh=em-d7;var el=-(ej*ec)/(eq*es);ew=1/eq+aL(el,2)/ec;et=2*(el*eh/ec-eo/eq);er=aL(eo,2)/eq+aL(eh,2)/ec-1;ex=Math.sqrt(aL(et,2)-4*ew*er);ea=(-et-ex)/(2*ew);d8=em+el*ea;ek=(-et+ex)/(2*ew);eu=em+el*ek}else{if(ep!==eo){et=-2*d7;er=aL((eo-ep)*ef/(2*eg),2)+aL(d7,2)-aL(ef,2);ex=Math.sqrt(aL(et,2)-4*er);ea=ek=(ep+eo)/2;d8=(-et-ex)/2;eu=(-et+ex)/2}else{return false}}var ee=D(ea,d8,eg,ef,ep,d9);var eb=D(ea,d8,eg,ef,eo,d7);var ed=u(ee,eb,en);if(ev&&ed<=180||!ev&&ed>180){ea=ek;d8=eu;ee=D(ea,d8,eg,ef,ep,d9);eb=D(ea,d8,eg,ef,eo,d7)}return{center:new dY(ea,d8),startAngle:ee,endAngle:eb}}function dv(d8,d9){var d7=d8;while(d7<d9){d7+=90}return d7}var bo=[].push;var r=[].pop;var cD=[].splice;var cR=[].shift;var bK=[].slice;var bB=[].unshift;var dp=ak.extend({init:function(d7){if(d7===void 0){d7=[]}this.length=0;this._splice(0,d7.length,d7)},elements:function(d7){if(d7){this._splice(0,this.length,d7);this._change();return this}return this.slice(0)},push:function(){var d8=arguments;var d7=bo.apply(this,d8);this._add(d8);return d7},slice:function(){return bK.call(this)},pop:function(){var d8=this.length;var d7=r.apply(this);if(d8){this._remove([d7])}return d7},splice:function(d8,d9){var ea=bK.call(arguments,2);var d7=this._splice(d8,d9,ea);this._change();return d7},shift:function(){var d8=this.length;var d7=cR.apply(this);if(d8){this._remove([d7])}return d7},unshift:function(){var d8=arguments;var d7=bB.apply(this,d8);this._add(d8);return d7},indexOf:function(d8){var ea=this;var d9=this.length;for(var d7=0;d7<d9;d7++){if(ea[d7]===d8){return d7}}return -1},_splice:function(d8,d9,ea){var d7=cD.apply(this,[d8,d9].concat(ea));this._clearObserver(d7);this._setObserver(ea);return d7},_add:function(d7){this._setObserver(d7);this._change()},_remove:function(d7){this._clearObserver(d7);this._change()},_setObserver:function(d8){var d9=this;for(var d7=0;d7<d8.length;d7++){d8[d7].addObserver(d9)}},_clearObserver:function(d8){var d9=this;for(var d7=0;d7<d8.length;d7++){d8[d7].removeObserver(d9)}},_change:function(){}});E.extend(dp.prototype);var dl=dp.extend({_change:function(){this.geometryChange()}});function cV(d7){var d8="_"+d7;return function(d9){if(bf(d9)){this._observerField(d8,dY.create(d9));this.geometryChange();return this}return this[d8]}}function bC(d8,d9){for(var d7=0;d7<d9.length;d7++){d8[d9[d7]]=cV(d9[d7])}}function ba(ea,d8,d7){var eb=bx(Math.atan2(d8.y-ea.y,d8.x-ea.x));var d9=d7.transformCopy(R().rotate(-eb,ea));return d9.x<ea.x}function a7(d7,ea,d8){var d9=1-d7;return Math.pow(d9,3)*d8[0][ea]+3*Math.pow(d9,2)*d7*d8[1][ea]+3*Math.pow(d7,2)*d9*d8[2][ea]+Math.pow(d7,3)*d8[3][ea]}function a3(d7,d8){return[-d7[0][d8]+3*d7[1][d8]-3*d7[2][d8]+d7[3][d8],3*(d7[0][d8]-2*d7[1][d8]+d7[2][d8]),3*(-d7[0][d8]+d7[1][d8]),d7[0][d8]]}var k=ak.extend({init:function(d8,d7){if(d8===void 0){d8=0}if(d7===void 0){d7=0}this.real=d8;this.img=d7},add:function(d7){return new k(cg(this.real+d7.real,W),cg(this.img+d7.img,W))},addConstant:function(d7){return new k(this.real+d7,this.img)},negate:function(){return new k(-this.real,-this.img)},multiply:function(d7){return new k(this.real*d7.real-this.img*d7.img,this.real*d7.img+this.img*d7.real)},multiplyConstant:function(d7){return new k(this.real*d7,this.img*d7)},nthRoot:function(ea){var d8=Math.atan2(this.img,this.real);var d9=Math.sqrt(Math.pow(this.img,2)+Math.pow(this.real,2));var d7=Math.pow(d9,1/ea);return new k(d7*Math.cos(d8/ea),d7*Math.sin(d8/ea))},equals:function(d7){return this.real===d7.real&&this.img===d7.img},isReal:function(){return this.img===0}});function aN(d7){return d7<0?-1:1}function dd(d9,d7,ea){var d8=Math.sqrt(Math.pow(d7,2)-4*d9*ea);return[(-d7+d8)/(2*d9),(-d7-d8)/(2*d9)]}function a8(em,ek,ei,eg){if(em===0){return dd(ek,ei,eg)}var ea=(3*em*ei-Math.pow(ek,2))/(3*Math.pow(em,2));var d8=(2*Math.pow(ek,3)-9*em*ek*ei+27*Math.pow(em,2)*eg)/(27*Math.pow(em,3));var ef=Math.pow(ea/3,3)+Math.pow(d8/2,2);var ee=new k(0,1);var eb=-ek/(3*em);var d9,d7,el,ej,eh,ed,ec;if(ef<0){d9=new k(-d8/2,Math.sqrt(-ef)).nthRoot(3);d7=new k(-d8/2,-Math.sqrt(-ef)).nthRoot(3)}else{d9=-d8/2+Math.sqrt(ef);d9=new k(aN(d9)*Math.pow(Math.abs(d9),1/3));d7=-d8/2-Math.sqrt(ef);d7=new k(aN(d7)*Math.pow(Math.abs(d7),1/3))}el=d9.add(d7);ed=d9.add(d7).multiplyConstant(-1/2);ec=d9.add(d7.negate()).multiplyConstant(Math.sqrt(3)/2);ej=ed.add(ee.multiply(ec));eh=ed.add(ee.negate().multiply(ec));var en=[];if(el.isReal()){en.push(cg(el.real+eb,W))}if(ej.isReal()){en.push(cg(ej.real+eb,W))}if(eh.isReal()){en.push(cg(eh.real+eb,W))}return en}function cz(ee,ed,eb,ea,d9){var d8=a3(ee,ea);var ef=a8(d8[0],d8[1],d8[2],d8[3]-ed[ea]);var d7;for(var ec=0;ec<ef.length;ec++){if(0<=ef[ec]&&ef[ec]<=1){d7=a7(ef[ec],eb,ee);if(Math.abs(d7-ed[eb])<=d9){return true}}}}function dR(ed,ec,ee){var d7=a3(ed,"x");var ef=a8(d7[0],d7[1],d7[2],d7[3]-ec.x);var eb,d9;var ea=0;for(var d8=0;d8<ef.length;d8++){eb=a7(ef[d8],"y",ed);d9=bw(eb,ec.y)||eb>ec.y;if(d9&&((ef[d8]===0||ef[d8]===1)&&ee.bottomRight().x>ec.x||0<ef[d8]&&ef[d8]<1)){ea++}}return ea}function b4(ed,ec,ee){var eb;if(ed.x!==ec.x){var ea=Math.min(ed.x,ec.x);var d8=Math.max(ed.x,ec.x);var d9=Math.min(ed.y,ec.y);var d7=Math.max(ed.y,ec.y);var ef=ea<=ee.x&&ee.x<d8;if(d9===d7){eb=ee.y<=d9&&ef}else{eb=ef&&(d7-d9)*((ed.x-ec.x)*(ed.y-ec.y)>0?ee.x-ea:d8-ee.x)/(d8-ea)+d9-ee.y>=0}}return eb?1:0}var co=ak.extend({init:function(d7,d9,d8){this.anchor(d7||new dY());this.controlIn(d9);this.controlOut(d8)},bboxTo:function(d9,d7){var d8=this.anchor().transformCopy(d7);var eb=d9.anchor().transformCopy(d7);var ea;if(this.controlOut()&&d9.controlIn()){ea=this._curveBoundingBox(d8,this.controlOut().transformCopy(d7),d9.controlIn().transformCopy(d7),eb)}else{ea=this._lineBoundingBox(d8,eb)}return ea},_lineBoundingBox:function(d8,d7){return aV.fromPoints(d8,d7)},_curveBoundingBox:function(ee,d9,d8,eb){var ed=[ee,d9,d8,eb];var ec=this._curveExtremesFor(ed,"x");var ea=this._curveExtremesFor(ed,"y");var d7=dU([ec.min,ec.max,ee.x,eb.x]);var ef=dU([ea.min,ea.max,ee.y,eb.y]);return aV.fromPoints(new dY(d7.min,ef.min),new dY(d7.max,ef.max))},_curveExtremesFor:function(d7,d8){var d9=this._curveExtremes(d7[0][d8],d7[1][d8],d7[2][d8],d7[3][d8]);return{min:a7(d9.min,d8,d7),max:a7(d9.max,d8,d7)}},_curveExtremes:function(d9,d8,d7,ei){var eg=d9-3*d8+3*d7-ei;var ef=-2*(d9-2*d8+d7);var ed=d9-d8;var eh=Math.sqrt(ef*ef-4*eg*ed);var ec=0;var eb=1;if(eg===0){if(ef!==0){ec=eb=-ed/ef}}else{if(!isNaN(eh)){ec=(-ef+eh)/(2*eg);eb=(-ef-eh)/(2*eg)}}var ea=Math.max(Math.min(ec,eb),0);if(ea<0||ea>1){ea=0}var ee=Math.min(Math.max(ec,eb),1);if(ee>1||ee<0){ee=1}return{min:ea,max:ee}},_intersectionsTo:function(d8,d7){var d9;if(this.controlOut()&&d8.controlIn()){d9=dR([this.anchor(),this.controlOut(),d8.controlIn(),d8.anchor()],d7,this.bboxTo(d8))}else{d9=b4(this.anchor(),d8.anchor(),d7)}return d9},_isOnCurveTo:function(ea,ed,d7,d9){var eg=this.bboxTo(ea).expand(d7,d7);if(eg.containsPoint(ed)){var eh=this.anchor();var ef=this.controlOut();var ec=ea.controlIn();var eb=ea.anchor();if(d9==="start"&&eh.distanceTo(ed)<=d7){return !ba(eh,ef,ed)}else{if(d9==="end"&&eb.distanceTo(ed)<=d7){return !ba(eb,ec,ed)}}var ee=[eh,ef,ec,eb];if(cz(ee,ed,"x","y",d7)||cz(ee,ed,"y","x",d7)){return true}var ei=R().rotate(45,ed);var d8=[eh.transformCopy(ei),ef.transformCopy(ei),ec.transformCopy(ei),eb.transformCopy(ei)];return cz(d8,ed,"x","y",d7)||cz(d8,ed,"y","x",d7)}},_isOnLineTo:function(ea,d7,d8){var ed=this.anchor();var eb=ea.anchor();var ec=bx(Math.atan2(eb.y-ed.y,eb.x-ed.x));var d9=new aV([ed.x,ed.y-d8/2],[ed.distanceTo(eb),d8]);return d9.containsPoint(d7.transformCopy(R().rotate(-ec,ed)))},_isOnPathTo:function(ea,d7,d9,eb){var d8;if(this.controlOut()&&ea.controlIn()){d8=this._isOnCurveTo(ea,d7,d9/2,eb)}else{d8=this._isOnLineTo(ea,d7,d9)}return d8}});bC(co.prototype,["anchor","controlIn","controlOut"]);E.extend(co.prototype);function dU(d8){var eb=d8.length;var ea=d3;var d7=bI;for(var d9=0;d9<eb;d9++){d7=Math.max(d7,d8[d9]);ea=Math.min(ea,d8[d9])}return{min:ea,max:d7}}var a2=a9.extend({init:function(d7){a9.fn.init.call(this,d7);this.segments=new dl();this.segments.addObserver(this);if(!bf(this.options.stroke)){this.stroke("#000");if(!bf(this.options.stroke.lineJoin)){this.options.set("stroke.lineJoin","miter")}}},moveTo:function(d7,d8){this.suspend();this.segments.elements([]);this.resume();this.lineTo(d7,d8);return this},lineTo:function(d8,ea){var d7=bf(ea)?new dY(d8,ea):d8;var d9=new co(d7);this.segments.push(d9);return this},curveTo:function(d9,eb,d7){if(this.segments.length>0){var d8=dj(this.segments);var ea=new co(d7,eb);this.suspend();d8.controlOut(d9);this.resume();this.segments.push(ea)}return this},arc:function(ef,ec,eb,d8,ed){if(this.segments.length>0){var eg=dj(this.segments);var ee=eg.anchor();var ea=K(ef);var d7=new dY(ee.x-eb*Math.cos(ea),ee.y-d8*Math.sin(ea));var d9=new B(d7,{startAngle:ef,endAngle:ec,radiusX:eb,radiusY:d8,anticlockwise:ed});this._addArcSegments(d9)}return this},arcTo:function(d8,ee,ec,ed,d9){if(this.segments.length>0){var d7=dj(this.segments);var ea=d7.anchor();var eb=B.fromPoints(ea,d8,ee,ec,ed,d9);this._addArcSegments(eb)}return this},_addArcSegments:function(d8){var ea=this;this.suspend();var d9=d8.curvePoints();for(var d7=1;d7<d9.length;d7+=3){ea.curveTo(d9[d7],d9[d7+1],d9[d7+2])}this.resume();this.geometryChange()},close:function(){this.options.closed=true;this.geometryChange();return this},rawBBox:function(){return this._bbox()},_containsPoint:function(d8){var d9=this.segments;var eb=d9.length;var ed=0;var ea,ec;for(var d7=1;d7<eb;d7++){ea=d9[d7-1];ec=d9[d7];ed+=ea._intersectionsTo(ec,d8)}if(this.options.closed||!d9[0].anchor().equals(d9[eb-1].anchor())){ed+=b4(d9[0].anchor(),d9[eb-1].anchor(),d8)}return ed%2!==0},_isOnPath:function(d8,eb){var ea=this.segments;var ec=ea.length;var d9=eb||this.options.stroke.width;if(ec>1){if(ea[0]._isOnPathTo(ea[1],d8,d9,"start")){return true}for(var d7=2;d7<=ec-2;d7++){if(ea[d7-1]._isOnPathTo(ea[d7],d8,d9)){return true}}if(ea[ec-2]._isOnPathTo(ea[ec-1],d8,d9,"end")){return true}}return false},_bbox:function(d7){var eb=this.segments;var ed=eb.length;var ea;if(ed===1){var d9=eb[0].anchor().transformCopy(d7);ea=new aV(d9,b2.ZERO)}else{if(ed>0){for(var ec=1;ec<ed;ec++){var d8=eb[ec-1].bboxTo(eb[ec],d7);if(ea){ea=aV.union(ea,d8)}else{ea=d8}}}}return ea}});a2.fromRect=function(d8,d7){return new a2(d7).moveTo(d8.topLeft()).lineTo(d8.topRight()).lineTo(d8.bottomRight()).lineTo(d8.bottomLeft()).close()};a2.fromPoints=function(ea,d8){if(ea){var eb=new a2(d8);for(var d9=0;d9<ea.length;d9++){var d7=dY.create(ea[d9]);if(d7){if(d9===0){eb.moveTo(d7)}else{eb.lineTo(d7)}}}return eb}};a2.fromArc=function(d9,d7){var ea=new a2(d7);var d8=d9.startAngle;var eb=d9.pointAt(d8);ea.moveTo(eb.x,eb.y);ea.arc(d8,d9.endAngle,d9.radiusX,d9.radiusY,d9.anticlockwise);return ea};a2.prototype.nodeType="Path";bT.extend(a2.prototype);U.extend(a2.prototype);var bq="#000";var da=a9.extend({init:function(d8,d7){if(d8===void 0){d8=new B()}if(d7===void 0){d7={}}a9.fn.init.call(this,d7);this.geometry(d8);if(!bf(this.options.stroke)){this.stroke(bq)}},_bbox:function(d7){return this._geometry.bbox(d7)},rawBBox:function(){return this.geometry().bbox()},toPath:function(){var d8=new a2();var d9=this.geometry().curvePoints();if(d9.length>0){d8.moveTo(d9[0].x,d9[0].y);for(var d7=1;d7<d9.length;d7+=3){d8.curveTo(d9[d7],d9[d7+1],d9[d7+2])}}return d8},_containsPoint:function(d7){return this.geometry().containsPoint(d7)},_isOnPath:function(d7){return this.geometry()._isOnPath(d7,this.options.stroke.width/2)}});da.prototype.nodeType="Arc";bT.extend(da.prototype);U.extend(da.prototype);dL(da.prototype,["geometry"]);function N(ed,d7,eb){var d8;for(var ea=0;ea<ed.length;ea++){var d9=ed[ea];if(d9.visible()){var ec=d7?d9.bbox(eb):d9.rawBBox();if(ec){if(d8){d8=aV.union(d8,ec)}else{d8=ec}}}}return d8}function aQ(ec,ea){var d7;for(var d9=0;d9<ec.length;d9++){var d8=ec[d9];if(d8.visible()){var eb=d8.clippedBBox(ea);if(eb){if(d7){d7=aV.union(d7,eb)}else{d7=eb}}}}return d7}var bP=a9.extend({init:function(d7){a9.fn.init.call(this,d7);this.paths=new dl();this.paths.addObserver(this);if(!bf(this.options.stroke)){this.stroke("#000")}},moveTo:function(d7,d9){var d8=new a2();d8.moveTo(d7,d9);this.paths.push(d8);return this},lineTo:function(d7,d8){if(this.paths.length>0){dj(this.paths).lineTo(d7,d8)}return this},curveTo:function(d8,d9,d7){if(this.paths.length>0){dj(this.paths).curveTo(d8,d9,d7)}return this},arc:function(d8,d7,eb,ea,d9){if(this.paths.length>0){dj(this.paths).arc(d8,d7,eb,ea,d9)}return this},arcTo:function(d7,eb,d9,ea,d8){if(this.paths.length>0){dj(this.paths).arcTo(d7,eb,d9,ea,d8)}return this},close:function(){if(this.paths.length>0){dj(this.paths).close()}return this},_bbox:function(d7){return N(this.paths,true,d7)},rawBBox:function(){return N(this.paths,false)},_containsPoint:function(d8){var d9=this.paths;for(var d7=0;d7<d9.length;d7++){if(d9[d7]._containsPoint(d8)){return true}}return false},_isOnPath:function(d8){var ea=this.paths;var d9=this.options.stroke.width;for(var d7=0;d7<ea.length;d7++){if(ea[d7]._isOnPath(d8,d9)){return true}}return false},_clippedBBox:function(d7){return aQ(this.paths,this.currentTransform(d7))}});bP.prototype.nodeType="MultiPath";bT.extend(bP.prototype);U.extend(bP.prototype);var aM="12px sans-serif";var dD="#000";var c8=a9.extend({init:function(d9,d7,d8){if(d7===void 0){d7=new dY()}if(d8===void 0){d8={}}a9.fn.init.call(this,d8);this.content(d9);this.position(d7);if(!this.options.font){this.options.font=aM}if(!bf(this.options.fill)){this.fill(dD)}},content:function(d7){if(bf(d7)){this.options.set("content",d7);return this}return this.options.get("content")},measure:function(){var d7=aG.measureText(this.content(),{font:this.options.get("font")});return d7},rect:function(){var d7=this.measure();var d8=this.position().clone();return new aV(d8,[d7.width,d7.height])},bbox:function(d8){var d7=V(this.currentTransform(d8));return this.rect().bbox(d7)},rawBBox:function(){return this.rect().bbox()},_containsPoint:function(d7){return this.rect().containsPoint(d7)}});c8.prototype.nodeType="Text";bT.extend(c8.prototype);bC(c8.prototype,["position"]);var dB=a9.extend({init:function(d9,d8,d7){if(d8===void 0){d8=new aV()}if(d7===void 0){d7={}}a9.fn.init.call(this,d7);this.src(d9);this.rect(d8)},src:function(d7){if(bf(d7)){this.options.set("src",d7);return this}return this.options.get("src")},bbox:function(d8){var d7=V(this.currentTransform(d8));return this._rect.bbox(d7)},rawBBox:function(){return this._rect.bbox()},_containsPoint:function(d7){return this._rect.containsPoint(d7)},_hasFill:function(){return this.src()}});dB.prototype.nodeType="Image";dL(dB.prototype,["rect"]);var cL={extend:function(d8,d7){d8.traverse=function(ec){var ea=this[d7];for(var d9=0;d9<ea.length;d9++){var eb=ea[d9];if(eb.traverse){eb.traverse(ec)}else{ec(eb)}}return this}}};var aE=a9.extend({init:function(d7){a9.fn.init.call(this,d7);this.children=[]},childrenChange:function(d9,d7,d8){this.trigger("childrenChange",{action:d9,items:d7,index:d8})},append:function(){bu(this.children,arguments);this._reparent(arguments,this);this.childrenChange("add",arguments);return this},insert:function(d7,d8){this.children.splice(d7,0,d8);d8.parent=this;this.childrenChange("add",[d8],d7);return this},insertAt:function(d8,d7){return this.insert(d7,d8)},remove:function(d8){var d7=this.children.indexOf(d8);if(d7>=0){this.children.splice(d7,1);d8.parent=null;this.childrenChange("remove",[d8],d7)}return this},removeAt:function(d7){if(0<=d7&&d7<this.children.length){var d8=this.children[d7];this.children.splice(d7,1);d8.parent=null;this.childrenChange("remove",[d8],d7)}return this},clear:function(){var d7=this.children;this.children=[];this._reparent(d7,null);this.childrenChange("remove",d7,0);return this},bbox:function(d7){return N(this.children,true,this.currentTransform(d7))},rawBBox:function(){return N(this.children,false)},_clippedBBox:function(d7){return aQ(this.children,this.currentTransform(d7))},currentTransform:function(d7){return a9.prototype.currentTransform.call(this,d7)||null},containsPoint:function(d9,d8){if(this.visible()){var eb=this.children;var ea=this.currentTransform(d8);for(var d7=0;d7<eb.length;d7++){if(eb[d7].containsPoint(d9,ea)){return true}}}return false},_reparent:function(ea,d9){var ec=this;for(var d7=0;d7<ea.length;d7++){var eb=ea[d7];var d8=eb.parent;if(d8&&d8!==ec&&d8.remove){d8.remove(eb)}eb.parent=d9}}});aE.prototype.nodeType="Group";cL.extend(aE.prototype,"children");function C(d7,eb,ea){var d8=ea.transform()||R();var d9=d8.matrix();d9.e+=d7.x-eb.origin.x;d9.f+=d7.y-eb.origin.y;d8.matrix(d9);ea.transform(d8)}function aw(d7,d9,ec,d8,eb){var ea;if(ec==="start"){ea=d9.origin[d8]}else{if(ec==="end"){ea=d9.origin[d8]+d9.size[eb]-d7}else{ea=d9.origin[d8]+(d9.size[eb]-d7)/2}}return ea}var bb={alignContent:"start",justifyContent:"start",alignItems:"start",spacing:0,orientation:"horizontal",lineSpacing:0,wrap:true};var F=aE.extend({init:function(d8,d7){aE.fn.init.call(this,dN.extend({},bb,d7));this._rect=d8;this._fieldMap={}},rect:function(d7){if(d7){this._rect=d7;return this}return this._rect},_initMap:function(){var d7=this.options;var d8=this._fieldMap;if(d7.orientation==="horizontal"){d8.sizeField="width";d8.groupsSizeField="height";d8.groupAxis="x";d8.groupsAxis="y"}else{d8.sizeField="height";d8.groupsSizeField="width";d8.groupAxis="y";d8.groupsAxis="x"}},reflow:function(){if(!this._rect||this.children.length===0){return}this._initMap();if(this.options.transform){this.transform(null)}var ef=this.options;var eb=this._rect;var eg=this._initGroups();var es=eg.groups;var ek=eg.groupsSize;var d7=this._fieldMap;var ea=d7.sizeField;var ee=d7.groupsSizeField;var er=d7.groupAxis;var et=d7.groupsAxis;var eu=new dY();var ev=new dY();var eq=new b2();var ec=aw(ek,eb,ef.alignContent,et,ee);var en,d9,ed,ej,eh;for(var el=0;el<es.length;el++){ej=es[el];eu[er]=en=aw(ej.size,eb,ef.justifyContent,er,ea);eu[et]=ec;eq[ea]=ej.size;eq[ee]=ej.lineSize;eh=new aV(eu,eq);for(var ep=0;ep<ej.bboxes.length;ep++){ed=ej.elements[ep];d9=ej.bboxes[ep];ev[er]=en;ev[et]=aw(d9.size[ee],eh,ef.alignItems,et,ee);C(ev,d9,ed);en+=d9.size[ea]+ef.spacing}ec+=ej.lineSize+ef.lineSpacing}if(!ef.wrap&&ej.size>eb.size[ea]){var ew=eb.size[ea]/eh.size[ea];var ei=eh.topLeft().scale(ew,ew);var eo=eh.size[ee]*ew;var d8=aw(eo,eb,ef.alignContent,et,ee);var em=R();if(er==="x"){em.translate(eb.origin.x-ei.x,d8-ei.y)}else{em.translate(d8-ei.x,eb.origin.y-ei.y)}em.scale(ew,ew);this.transform(em)}},_initGroups:function(){var ed=this;var eb=this;var el=eb.options;var d9=eb.children;var ee=el.lineSpacing;var d7=el.wrap;var ef=el.spacing;var eg=this._fieldMap.sizeField;var ej=this._newGroup();var ea=[];var d8=function(){ea.push(ej);ei+=ej.lineSize+ee};var ei=-ee;for(var eh=0;eh<d9.length;eh++){var ec=d9[eh];var ek=d9[eh].clippedBBox();if(ec.visible()&&ek){if(d7&&ej.size+ek.size[eg]+ef>ed._rect.size[eg]){if(ej.bboxes.length===0){ed._addToGroup(ej,ek,ec);d8();ej=ed._newGroup()}else{d8();ej=ed._newGroup();ed._addToGroup(ej,ek,ec)}}else{ed._addToGroup(ej,ek,ec)}}}if(ej.bboxes.length){d8()}return{groups:ea,groupsSize:ei}},_addToGroup:function(d8,d9,d7){d8.size+=d9.size[this._fieldMap.sizeField]+this.options.spacing;d8.lineSize=Math.max(d9.size[this._fieldMap.groupsSizeField],d8.lineSize);d8.bboxes.push(d9);d8.elements.push(d7)},_newGroup:function(){return{lineSize:0,size:-this.options.spacing,bboxes:[],elements:[]}}});var bO=a9.extend({init:function(d8,d7){if(d8===void 0){d8=new aV()}if(d7===void 0){d7={}}a9.fn.init.call(this,d7);this.geometry(d8);if(!bf(this.options.stroke)){this.stroke("#000")}},_bbox:function(d7){return this._geometry.bbox(d7)},rawBBox:function(){return this._geometry.bbox()},_containsPoint:function(d7){return this._geometry.containsPoint(d7)},_isOnPath:function(d7){return this.geometry()._isOnPath(d7,this.options.stroke.width/2)}});bO.prototype.nodeType="Rect";bT.extend(bO.prototype);U.extend(bO.prototype);dL(bO.prototype,["geometry"]);function bH(eb,ea,ee,d9,ed){for(var d8=0;d8<eb.length;d8++){var ec=eb[d8].clippedBBox();if(ec){var d7=ec.origin.clone();d7[d9]=aw(ec.size[ed],ea,ee||"start",d9,ed);C(d7,ec,eb[d8])}}}function ch(d8,d7,d9){bH(d8,d7,d9,"x","width")}function aZ(d8,d7,d9){bH(d8,d7,d9,"y","height")}function bW(d7,d8,d9,ec){if(d7.length>1){var ed=new dY();var eb=d7[0].bbox;for(var ee=1;ee<d7.length;ee++){var ea=d7[ee].element;var ef=d7[ee].bbox;ed[d8]=eb.origin[d8]+eb.size[ec];ed[d9]=ef.origin[d9];C(ed,ef,ea);ef.origin[d8]=ed[d8];eb=ef}}}function aK(d9){var ea=[];for(var d7=0;d7<d9.length;d7++){var d8=d9[d7];var eb=d8.clippedBBox();if(eb){ea.push({element:d8,bbox:eb})}}return ea}function de(d7){bW(aK(d7),"x","y","width")}function bX(d7){bW(aK(d7),"y","x","height")}function dV(d7,eb,ea){var ee=eb.size[ea];var d8=[];var ec=[];var ef=0;var d9,eg;var ei=function(){ec.push({element:d9,bbox:eg})};for(var ed=0;ed<d7.length;ed++){d9=d7[ed];eg=d9.clippedBBox();if(eg){var eh=eg.size[ea];if(ef+eh>ee){if(ec.length){d8.push(ec);ec=[];ei();ef=eh}else{ei();d8.push(ec);ec=[];ef=0}}else{ei();ef+=eh}}}if(ec.length){d8.push(ec)}return d8}function b3(d7,ee,d9,eb,ec){var d8=dV(d7,ee,ec);var eg=ee.origin.clone();var ei=[];for(var ef=0;ef<d8.length;ef++){var ed=d8[ef];var eh=ed[0];eg[eb]=eh.bbox.origin[eb];C(eg,eh.bbox,eh.element);eh.bbox.origin[d9]=eg[d9];bW(ed,d9,eb,ec);ei.push([]);for(var ea=0;ea<ed.length;ea++){ei[ef].push(ed[ea].element)}}return ei}function n(d8,d7){return b3(d8,d7,"x","y","width")}function cX(d8,d7){return b3(d8,d7,"y","x","height")}function c2(d9,eb){var ed=d9.clippedBBox();if(ed){var d8=ed.size;var ea=eb.size;if(ea.width<d8.width||ea.height<d8.height){var ec=Math.min(ea.width/d8.width,ea.height/d8.height);var d7=d9.transform()||R();d7.scale(ec,ec);d9.transform(d7)}}}var aP=dp.extend({_change:function(){this.optionsChange({field:"stops"})}});function a1(d7){return function(d8){if(bf(d8)){this.options.set(d7,d8);return this}return this.options.get(d7)}}function b7(d8,d9){for(var d7=0;d7<d9.length;d7++){d8[d9[d7]]=a1(d9[d7])}}var cp=ak.extend({init:function(d9,d7,d8){this.options=new bR({offset:d9,color:d7,opacity:bf(d8)?d8:1});this.options.addObserver(this)}});cp.create=function(d7){if(bf(d7)){var d8;if(d7 instanceof cp){d8=d7}else{if(d7.length>1){d8=new cp(d7[0],d7[1],d7[2])}else{d8=new cp(d7.offset,d7.color,d7.opacity)}}return d8}};b7(cp.prototype,["offset","color","opacity"]);E.extend(cp.prototype);var dQ=ak.extend({init:function(d7){if(d7===void 0){d7={}}this.stops=new aP(this._createStops(d7.stops));this.stops.addObserver(this);this._userSpace=d7.userSpace;this.id=ca()},userSpace:function(d7){if(bf(d7)){this._userSpace=d7;this.optionsChange();return this}return this._userSpace},_createStops:function(d9){if(d9===void 0){d9=[]}var d8=[];for(var d7=0;d7<d9.length;d7++){d8.push(cp.create(d9[d7]))}return d8},addStop:function(d9,d7,d8){this.stops.push(new cp(d9,d7,d8))},removeStop:function(d8){var d7=this.stops.indexOf(d8);if(d7>=0){this.stops.splice(d7,1)}}});dQ.prototype.nodeType="Gradient";E.extend(dQ.prototype);dN.extend(dQ.prototype,{optionsChange:function(d7){this.trigger("optionsChange",{field:"gradient"+(d7?"."+d7.field:""),value:this})},geometryChange:function(){this.optionsChange()}});var ds=dQ.extend({init:function(d7){if(d7===void 0){d7={}}dQ.fn.init.call(this,d7);this.start(d7.start||new dY());this.end(d7.end||new dY(1,0))}});bC(ds.prototype,["start","end"]);var b9=dQ.extend({init:function(d7){if(d7===void 0){d7={}}dQ.fn.init.call(this,d7);this.center(d7.center||new dY());this._radius=bf(d7.radius)?d7.radius:1;this._fallbackFill=d7.fallbackFill},radius:function(d7){if(bf(d7)){this._radius=d7;this.geometryChange();return this}return this._radius},fallbackFill:function(d7){if(bf(d7)){this._fallbackFill=d7;this.optionsChange();return this}return this._fallbackFill}});bC(b9.prototype,["center"]);function di(d7){return 0.5-Math.cos(d7*Math.PI)/2}function b1(d7){return d7}function dq(d7,ec,ed,eb){var d9=1.70158,ea=0,d8=eb;if(d7===0){return ed}if(d7===1){return ed+eb}if(!ea){ea=0.5}if(d8<Math.abs(eb)){d8=eb;d9=ea/4}else{d9=ea/(2*Math.PI)*Math.asin(eb/d8)}return d8*Math.pow(2,-10*d7)*Math.sin((Number(d7)-d9)*(1.1*Math.PI)/ea)+eb+ed}var ck={swing:di,linear:b1,easeOutElastic:dq};var bG=Date.now||function(){return new Date().getTime()};var i=ak.extend({init:function(d8,d7){this.options=dN.extend({},this.options,d7);this.element=d8},setup:function(){},step:function(){},play:function(){var ed=this;var d8=this.options;var ea=d8.duration;var d7=d8.delay;if(d7===void 0){d7=0}var ec=ck[d8.easing];var eb=bG()+d7;var d9=eb+ea;if(ea===0){this.step(1);this.abort()}else{setTimeout(function(){var ee=function(){if(ed._stopped){return}var eh=bG();var ei=cc(eh-eb,0,ea);var ef=ei/ea;var eg=ec(ef,ei,0,1,ea);ed.step(eg);if(eh<d9){kendo.animationFrame(ee)}else{ed.abort()}};ee()},d7)}},abort:function(){this._stopped=true},destroy:function(){this.abort()}});i.prototype.options={duration:500,easing:"swing"};var d6=ak.extend({init:function(){this._items=[]},register:function(d7,d8){this._items.push({name:d7,type:d8})},create:function(eb,d9){var d7=this._items;var d8;if(d9&&d9.type){var ec=d9.type.toLowerCase();for(var ea=0;ea<d7.length;ea++){if(d7[ea].name.toLowerCase()===ec){d8=d7[ea];break}}}if(d8){return new d8.type(eb,d9)}}});d6.current=new d6();i.create=function(d9,d8,d7){return d6.current.create(d9,d8,d7)};var a4={l:function(ec,d9){var eb=d9.parameters;var d8=d9.position;for(var ea=0;ea<eb.length;ea+=2){var d7=new dY(eb[ea],eb[ea+1]);if(d9.isRelative){d7.translateWith(d8)}ec.lineTo(d7.x,d7.y);d8.x=d7.x;d8.y=d7.y}},c:function(ee,d9){var ec=d9.parameters;var d8=d9.position;for(var eb=0;eb<ec.length;eb+=6){var ea=new dY(ec[eb],ec[eb+1]);var ed=new dY(ec[eb+2],ec[eb+3]);var d7=new dY(ec[eb+4],ec[eb+5]);if(d9.isRelative){ed.translateWith(d8);ea.translateWith(d8);d7.translateWith(d8)}ee.curveTo(ea,ed,d7);d8.x=d7.x;d8.y=d7.y}},v:function(d9,d7){var d8=d7.isRelative?0:d7.position.x;dH(d7.parameters,true,d8);this.l(d9,d7)},h:function(d9,d7){var d8=d7.isRelative?0:d7.position.y;dH(d7.parameters,false,d8);this.l(d9,d7)},a:function(ef,eg){var ee=eg.parameters;var ec=eg.position;for(var eb=0;eb<ee.length;eb+=7){var d8=ee[eb];var d7=ee[eb+1];var d9=ee[eb+3];var ea=ee[eb+4];var ed=new dY(ee[eb+5],ee[eb+6]);if(eg.isRelative){ed.translateWith(ec)}ef.arcTo(ed,d8,d7,d9,ea);ec.x=ed.x;ec.y=ed.y}},s:function(ef,eg){var ee=eg.parameters;var d8=eg.position;var ea=eg.previousCommand;var ed;if(ea==="s"||ea==="c"){ed=dj(dj(ef.paths).segments).controlIn()}for(var d7=0;d7<ee.length;d7+=4){var eb=new dY(ee[d7],ee[d7+1]);var ec=new dY(ee[d7+2],ee[d7+3]);var d9=void 0;if(eg.isRelative){eb.translateWith(d8);ec.translateWith(d8)}if(ed){d9=an(ed,d8)}else{d9=d8.clone()}ed=eb;ef.curveTo(d9,eb,ec);d8.x=ec.x;d8.y=ec.y}},q:function(ee,ea){var ed=ea.parameters;var d8=ea.position;for(var ec=0;ec<ed.length;ec+=4){var d9=new dY(ed[ec],ed[ec+1]);var eb=new dY(ed[ec+2],ed[ec+3]);if(ea.isRelative){d9.translateWith(d8);eb.translateWith(d8)}var d7=ao(d8,d9,eb);ee.curveTo(d7.controlOut,d7.controlIn,eb);d8.x=eb.x;d8.y=eb.y}},t:function(ef,eg){var ee=eg.parameters;var d8=eg.position;var d9=eg.previousCommand;var ea;if(d9==="q"||d9==="t"){var ec=dj(dj(ef.paths).segments);ea=ec.controlIn().clone().translateWith(d8.scaleCopy(-1/3)).scale(3/2)}for(var d7=0;d7<ee.length;d7+=2){var ed=new dY(ee[d7],ee[d7+1]);if(eg.isRelative){ed.translateWith(d8)}if(ea){ea=an(ea,d8)}else{ea=d8.clone()}var eb=ao(d8,ea,ed);ef.curveTo(eb.controlOut,eb.controlIn,ed);d8.x=ed.x;d8.y=ed.y}}};function dH(d8,eb,ea){var d9=eb?0:1;for(var d7=0;d7<d8.length;d7+=2){d8.splice(d7+d9,0,ea)}}function an(d8,d7){if(d8&&d7){return d7.scaleCopy(2).translate(-d8.x,-d8.y)}}var aq=1/3;function ao(d7,d8,d9){var ea=d8.clone().scale(2/3);return{controlOut:ea.clone().translateWith(d7.scaleCopy(aq)),controlIn:ea.translateWith(d9.scaleCopy(aq))}}var dt=/([a-df-z]{1})([^a-df-z]*)(z)?/gi;var cS=/[,\s]?([+\-]?(?:\d*\.\d+|\d+)(?:[eE][+\-]?\d+)?)/g;var cA="m";var p="z";function X(d8){var d7=[];d8.replace(cS,function(d9,ea){d7.push(parseFloat(ea))});return d7}var dG=ak.extend({parse:function(ea,d8){var d9=new bP(d8);var d7=new dY();var eb;ea.replace(dt,function(ec,ed,eh,ei){var eg=ed.toLowerCase();var ee=eg===ed;var ef=X(eh.trim());if(eg===cA){if(ee){d7.x+=ef[0];d7.y+=ef[1]}else{d7.x=ef[0];d7.y=ef[1]}d9.moveTo(d7.x,d7.y);if(ef.length>2){eg="l";ef.splice(0,2)}}if(a4[eg]){a4[eg](d9,{parameters:ef,position:d7,isRelative:ee,previousCommand:eb});if(ei&&ei.toLowerCase()===p){d9.close()}}else{if(eg!==cA){throw new Error("Error while parsing SVG path. Unsupported command: "+eg)}}eb=eg});return d9}});dG.current=new dG();a2.parse=function(d8,d7){return dG.current.parse(d8,d7)};var d2=ak.extend({init:function(){this._items=[]},register:function(d9,ea,d7){var d8=this._items;var ec=d8[0];var eb={name:d9,type:ea,order:d7};if(!ec||d7<ec.order){d8.unshift(eb)}else{d8.push(eb)}},create:function(eb,d9){var d7=this._items;var d8=d7[0];if(d9&&d9.type){var ec=d9.type.toLowerCase();for(var ea=0;ea<d7.length;ea++){if(d7[ea].name===ec){d8=d7[ea];break}}}if(d8){return new d8.type(eb,d9)}kendo.logToConsole("Warning: Unable to create Kendo UI Drawing Surface. Possible causes:\n- The browser does not support SVG and Canvas. User agent: "+navigator.userAgent)}});d2.current=new d2();var ah=["click","mouseenter","mouseleave","mousemove","resize","tooltipOpen","tooltipClose"];var d1=kendo.Observable.extend({init:function(d8,d7){kendo.Observable.fn.init.call(this);this.options=dN.extend({},d7);this.element=d8;this._click=this._handler("click");this._mouseenter=this._handler("mouseenter");this._mouseleave=this._handler("mouseleave");this._mousemove=this._handler("mousemove");this._visual=new aE();dS(d8,this.options);this.bind(ah,this.options);this._enableTracking()},draw:function(d7){this._visual.children.push(d7)},clear:function(){this._visual.children=[]},destroy:function(){this._visual=null;this.unbind()},eventTarget:function(d9){var ea=this;var d7=cx(d9);var d8;while(!d8&&d7){d8=d7._kendoNode;if(d7===ea.element){break}d7=d7.parentElement}if(d8){return d8.srcElement}},exportVisual:function(){return this._visual},getSize:function(){return dS(this.element)},currentSize:function(d7){if(d7){this._size=d7}else{return this._size}},setSize:function(d7){dS(this.element,d7);this.currentSize(d7);this._resize()},resize:function(d9){var d8=this.getSize();var d7=this.currentSize();if(d9||(d8.width>0||d8.height>0)&&(!d7||d8.width!==d7.width||d8.height!==d7.height)){this.currentSize(d8);this._resize(d8,d9);this.trigger("resize",d8)}},size:function(d7){if(!d7){return this.getSize()}this.setSize(d7)},suspendTracking:function(){this._suspendedTracking=true},resumeTracking:function(){this._suspendedTracking=false},_enableTracking:function(){},_resize:function(){},_handler:function(d7){var d8=this;return function(ea){var d9=d8.eventTarget(ea);if(d9&&!d8._suspendedTracking){d8.trigger(d7,{element:d9,originalEvent:ea,type:d7})}}},_elementOffset:function(){var d8=this.element;var eb=s(d8,["paddingLeft","paddingTop"]);var d7=eb.paddingLeft;var ea=eb.paddingTop;var d9=cY(d8);var ed=d9.left;var ec=d9.top;return{left:ed+parseInt(d7,10),top:ec+parseInt(ea,10)}},_surfacePoint:function(d8){var d9=this._elementOffset();var eb=cr(d8);var d7=eb.x-d9.left;var ea=eb.y-d9.top;return new dY(d7,ea)}});d1.create=function(d8,d7){return d2.current.create(d8,d7)};d1.support={};var ag=ak.extend({init:function(d7){this.childNodes=[];this.parent=null;if(d7){this.srcElement=d7;this.observe()}},destroy:function(){var d9=this;if(this.srcElement){this.srcElement.removeObserver(this)}var d8=this.childNodes;for(var d7=0;d7<d8.length;d7++){d9.childNodes[d7].destroy()}this.parent=null},load:function(){},observe:function(){if(this.srcElement){this.srcElement.addObserver(this)}},append:function(d7){this.childNodes.push(d7);d7.parent=this},insertAt:function(d7,d8){this.childNodes.splice(d8,0,d7);d7.parent=this},remove:function(d8,ea){var eb=this;var d7=d8+ea;for(var d9=d8;d9<d7;d9++){eb.childNodes[d9].removeSelf()}this.childNodes.splice(d8,ea)},removeSelf:function(){this.clear();this.destroy()},clear:function(){this.remove(0,this.childNodes.length)},invalidate:function(){if(this.parent){this.parent.invalidate()}},geometryChange:function(){this.invalidate()},optionsChange:function(){this.invalidate()},childrenChange:function(d7){if(d7.action==="add"){this.load(d7.items,d7.index)}else{if(d7.action==="remove"){this.remove(d7.index,d7.items.length)}}this.invalidate()}});function cf(d7,d8){return bf(d8)&&d8!==null?" "+d7+"='"+d8+"' ":""}function cH(d8){var d7="";for(var d9=0;d9<d8.length;d9++){d7+=cf(d8[d9][0],d8[d9][1])}return d7}function b0(d8){var d7="";for(var d9=0;d9<d8.length;d9++){var ea=d8[d9][1];if(bf(ea)){d7+=d8[d9][0]+":"+ea+";"}}if(d7!==""){return d7}}var S={};var bV="http://www.w3.org/2000/svg";var aa="none";var b=function(d7,d8){d7.innerHTML=d8};if(typeof document!=="undefined"){var dw="<svg xmlns='"+bV+"'></svg>";var v=document.createElement("div");var d0=typeof DOMParser!=="undefined";v.innerHTML=dw;if(d0&&v.firstChild.namespaceURI!==bV){b=function(d7,d9){var eb=new DOMParser();var ea=eb.parseFromString(d9,"text/xml");var d8=document.adoptNode(ea.documentElement);d7.innerHTML="";d7.appendChild(d8)}}}var bm=b;var al="transform";var cK={clip:"clip-path",fill:"fill"};function a5(d7,d8){return d7==="clip"||d7==="fill"&&(!d8||d8.nodeType==="Gradient")}function cO(){var ea=document.getElementsByTagName("base")[0];var d7=document.location.href;var d9=d7.indexOf("#");var d8="";if(ea&&!c3.browser.msie){if(d9!==-1){d7=d7.substring(0,d9)}d8=d7}return d8}function G(d7){return"url("+cO()+"#"+d7+")"}var T=ag.extend({init:function(d7){ag.fn.init.call(this,d7);this.definitions={}},destroy:function(){if(this.element){this.element._kendoNode=null;this.element=null}this.clearDefinitions();ag.fn.destroy.call(this)},load:function(ec,ee){var ed=this;for(var eb=0;eb<ec.length;eb++){var d7=ec[eb];var ea=d7.children;var d9=new S[d7.nodeType](d7);if(bf(ee)){ed.insertAt(d9,ee)}else{ed.append(d9)}d9.createDefinitions();if(ea&&ea.length>0){d9.load(ea)}var d8=ed.element;if(d8){d9.attachTo(d8,ee)}}},root:function(){var d7=this;while(d7.parent){d7=d7.parent}return d7},attachTo:function(d9,ea){var d7=document.createElement("div");bm(d7,"<svg xmlns='"+bV+"' version='1.1'>"+this.render()+"</svg>");var d8=d7.firstChild.firstChild;if(d8){if(bf(ea)){d9.insertBefore(d8,d9.childNodes[ea]||null)}else{d9.appendChild(d8)}this.setElement(d8)}},setElement:function(ea){if(this.element){this.element._kendoNode=null}this.element=ea;this.element._kendoNode=this;var d7=this.childNodes;for(var d9=0;d9<d7.length;d9++){var d8=ea.childNodes[d9];d7[d9].setElement(d8)}},clear:function(){this.clearDefinitions();if(this.element){this.element.innerHTML=""}var d8=this.childNodes;for(var d7=0;d7<d8.length;d7++){d8[d7].destroy()}this.childNodes=[]},removeSelf:function(){if(this.element){var d7=this.element.parentNode;if(d7){d7.removeChild(this.element)}this.element=null}ag.fn.removeSelf.call(this)},template:function(){return this.renderChildren()},render:function(){return this.template()},renderChildren:function(){var d8=this.childNodes;var d7="";for(var d9=0;d9<d8.length;d9++){d7+=d8[d9].render()}return d7},optionsChange:function(d9){var d8=d9.field;var d7=d9.value;if(d8==="visible"){this.css("display",d7?"":aa)}else{if(cK[d8]&&a5(d8,d7)){this.updateDefinition(d8,d7)}else{if(d8==="opacity"){this.attr("opacity",d7)}}}ag.fn.optionsChange.call(this,d9)},attr:function(d7,d8){if(this.element){this.element.setAttribute(d7,d8)}},allAttr:function(d7){var d9=this;for(var d8=0;d8<d7.length;d8++){d9.attr(d7[d8][0],d7[d8][1])}},css:function(d7,d8){if(this.element){this.element.style[d7]=d8}},allCss:function(d8){var d9=this;for(var d7=0;d7<d8.length;d7++){d9.css(d8[d7][0],d8[d7][1])}},removeAttr:function(d7){if(this.element){this.element.removeAttribute(d7)}},mapTransform:function(d8){var d7=[];if(d8){d7.push([al,"matrix("+d8.matrix().toString(6)+")"])}return d7},renderTransform:function(){return cH(this.mapTransform(this.srcElement.transform()))},transformChange:function(d7){if(d7){this.allAttr(this.mapTransform(d7))}else{this.removeAttr(al)}},mapStyle:function(){var d7=this.srcElement.options;var d8=[["cursor",d7.cursor]];if(d7.visible===false){d8.push(["display",aa])}return d8},renderStyle:function(){return cf("style",b0(this.mapStyle(true)))},renderOpacity:function(){return cf("opacity",this.srcElement.options.opacity)},createDefinitions:function(){var d7=this.srcElement;var ea=this.definitions;if(d7){var d8=d7.options;var ec;for(var eb in cK){var d9=d8.get(eb);if(d9&&a5(eb,d9)){ea[eb]=d9;ec=true}}if(ec){this.definitionChange({action:"add",definitions:ea})}}},definitionChange:function(d7){if(this.parent){this.parent.definitionChange(d7)}},updateDefinition:function(ea,eb){var d9=this.definitions;var ec=d9[ea];var d7=cK[ea];var d8={};if(ec){d8[ea]=ec;this.definitionChange({action:"remove",definitions:d8});delete d9[ea]}if(!eb){if(ec){this.removeAttr(d7)}}else{d8[ea]=eb;this.definitionChange({action:"add",definitions:d8});d9[ea]=eb;this.attr(d7,G(eb.id))}},clearDefinitions:function(){var d7=this.definitions;this.definitionChange({action:"remove",definitions:d7});this.definitions={}},renderDefinitions:function(){return cH(this.mapDefinitions())},mapDefinitions:function(){var d8=this.definitions;var d7=[];for(var d9 in d8){d7.push([cK[d9],G(d8[d9].id)])}return d7}});var bD=T.extend({template:function(){return"<stop "+this.renderOffset()+" "+this.renderStyle()+" />"},renderOffset:function(){return cf("offset",this.srcElement.offset())},mapStyle:function(){var d7=this.srcElement;return[["stop-color",d7.color()],["stop-opacity",d7.opacity()]]},optionsChange:function(d7){if(d7.field==="offset"){this.attr(d7.field,d7.value)}else{if(d7.field==="color"||d7.field==="opacity"){this.css("stop-"+d7.field,d7.value)}}}});var b5=T.extend({init:function(d7){T.fn.init.call(this,d7);this.id=d7.id;this.loadStops()},loadStops:function(){var eb=this;var ea=this.srcElement.stops;var d9=this.element;for(var d7=0;d7<ea.length;d7++){var d8=new bD(ea[d7]);eb.append(d8);if(d9){d8.attachTo(d9)}}},optionsChange:function(d7){if(d7.field==="gradient.stops"){ag.prototype.clear.call(this);this.loadStops()}else{if(d7.field==="gradient"){this.allAttr(this.mapCoordinates())}}},renderCoordinates:function(){return cH(this.mapCoordinates())},mapSpace:function(){return["gradientUnits",this.srcElement.userSpace()?"userSpaceOnUse":"objectBoundingBox"]}});var ac=b5.extend({template:function(){return"<linearGradient id='"+this.id+"' "+this.renderCoordinates()+">"+this.renderChildren()+"</linearGradient>"},mapCoordinates:function(){var d8=this.srcElement;var ea=d8.start();var d7=d8.end();var d9=[["x1",ea.x],["y1",ea.y],["x2",d7.x],["y2",d7.y],this.mapSpace()];return d9}});var aR=b5.extend({template:function(){return"<radialGradient id='"+this.id+"' "+this.renderCoordinates()+">"+this.renderChildren()+"</radialGradient>"},mapCoordinates:function(){var d9=this.srcElement;var d8=d9.center();var d7=d9.radius();var ea=[["cx",d8.x],["cy",d8.y],["r",d7],this.mapSpace()];return ea}});var dX=T.extend({init:function(d7){T.fn.init.call(this);this.srcElement=d7;this.id=d7.id;this.load([d7])},template:function(){return"<clipPath id='"+this.id+"'>"+this.renderChildren()+"</clipPath>"}});var bl=T.extend({init:function(){T.fn.init.call(this);this.definitionMap={}},attachTo:function(d7){this.element=d7},template:function(){return"<defs>"+this.renderChildren()+"</defs>"},definitionChange:function(d9){var d7=d9.definitions;var d8=d9.action;if(d8==="add"){this.addDefinitions(d7)}else{if(d8==="remove"){this.removeDefinitions(d7)}}},createDefinition:function(d8,d9){var d7;if(d8==="clip"){d7=dX}else{if(d8==="fill"){if(d9 instanceof ds){d7=ac}else{if(d9 instanceof b9){d7=aR}}}}return new d7(d9)},addDefinitions:function(d7){var d9=this;for(var d8 in d7){d9.addDefinition(d8,d7[d8])}},addDefinition:function(d9,d7){var ec=this;var d8=ec.element;var eb=ec.definitionMap;var ee=d7.id;var ed=eb[ee];if(!ed){var ea=this.createDefinition(d9,d7);eb[ee]={element:ea,count:1};this.append(ea);if(d8){ea.attachTo(this.element)}}else{ed.count++}},removeDefinitions:function(d7){var d9=this;for(var d8 in d7){d9.removeDefinition(d7[d8])}},removeDefinition:function(d7){var d8=this.definitionMap;var ea=d7.id;var d9=d8[ea];if(d9){d9.count--;if(d9.count===0){this.remove(this.childNodes.indexOf(d9.element),1);delete d8[ea]}}}});var br=T.extend({init:function(d7){T.fn.init.call(this);this.options=d7;this.defs=new bl()},attachTo:function(d7){this.element=d7;this.defs.attachTo(d7.firstElementChild)},clear:function(){ag.prototype.clear.call(this)},template:function(){return this.defs.render()+this.renderChildren()},definitionChange:function(d7){this.defs.definitionChange(d7)}});function a0(d8){var d7;try{d7=d8.getScreenCTM?d8.getScreenCTM():null}catch(ec){}if(d7){var eb=-d7.e%1;var ea=-d7.f%1;var d9=d8.style;if(eb!==0||ea!==0){d9.left=eb+"px";d9.top=ea+"px"}}}var be=d1.extend({init:function(d8,d7){d1.fn.init.call(this,d8,d7);this._root=new br(this.options);bm(this.element,this._template());this._rootElement=this.element.firstElementChild;a0(this._rootElement);this._root.attachTo(this._rootElement);aT(this.element,{click:this._click,mouseover:this._mouseenter,mouseout:this._mouseleave,mousemove:this._mousemove});this.resize()},destroy:function(){if(this._root){this._root.destroy();this._root=null;this._rootElement=null;cZ(this.element,{click:this._click,mouseover:this._mouseenter,mouseout:this._mouseleave,mousemove:this._mousemove})}d1.fn.destroy.call(this)},translate:function(d8){var d7=Math.round(d8.x)+" "+Math.round(d8.y)+" "+this._size.width+" "+this._size.height;this._offset=d8;this._rootElement.setAttribute("viewBox",d7)},draw:function(d7){d1.fn.draw.call(this,d7);this._root.load([d7])},clear:function(){d1.fn.clear.call(this);this._root.clear()},svg:function(){return"<?xml version='1.0' ?>"+this._template()},exportVisual:function(){var d9=this;var d8=d9._visual;var ea=d9._offset;if(ea){var d7=new aE();d7.children.push(d8);d7.transform(R().translate(-ea.x,-ea.y));d8=d7}return d8},_resize:function(){if(this._offset){this.translate(this._offset)}},_template:function(){return"<svg style='width: 100%; height: 100%; overflow: hidden;' xmlns='"+bV+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>"+this._root.render()+"</svg>"}});be.prototype.type="svg";if(typeof document!=="undefined"&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")){d1.support.svg=true;d2.current.register("svg",be,10)}var af=T.extend({template:function(){return"<g"+(this.renderTransform()+this.renderStyle()+this.renderOpacity()+this.renderDefinitions())+">"+this.renderChildren()+"</g>"},optionsChange:function(d7){if(d7.field==="transform"){this.transformChange(d7.value)}T.fn.optionsChange.call(this,d7)}});S.Group=af;var bF={dot:[1.5,3.5],dash:[4,3.5],longdash:[8,3.5],dashdot:[3.5,3.5,1.5,3.5],longdashdot:[8,3.5,1.5,3.5],longdashdotdot:[8,3.5,1.5,3.5,1.5,3.5]};var bU="solid";var bA="butt";var cd={"fill.opacity":"fill-opacity","stroke.color":"stroke","stroke.width":"stroke-width","stroke.opacity":"stroke-opacity"};var cP=" ";var e=T.extend({geometryChange:function(){this.attr("d",this.renderData());this.invalidate()},optionsChange:function(d8){switch(d8.field){case"fill":if(d8.value){this.allAttr(this.mapFill(d8.value))}else{this.removeAttr("fill")}break;case"fill.color":this.allAttr(this.mapFill({color:d8.value}));break;case"stroke":if(d8.value){this.allAttr(this.mapStroke(d8.value))}else{this.removeAttr("stroke")}break;case"transform":this.transformChange(d8.value);break;default:var d7=cd[d8.field];if(d7){this.attr(d7,d8.value)}break}T.fn.optionsChange.call(this,d8)},content:function(){if(this.element){this.element.textContent=this.srcElement.content()}},renderData:function(){return this.printPath(this.srcElement)},printPath:function(ef){var eb=this;var ec=ef.segments;var d7=ec.length;if(d7>0){var d9=[];var d8,ed;for(var ea=1;ea<d7;ea++){var ee=eb.segmentType(ec[ea-1],ec[ea]);if(ee!==ed){ed=ee;d9.push(ee)}if(ee==="L"){d9.push(eb.printPoints(ec[ea].anchor()))}else{d9.push(eb.printPoints(ec[ea-1].controlOut(),ec[ea].controlIn(),ec[ea].anchor()))}}d8="M"+this.printPoints(ec[0].anchor())+cP+d9.join(cP);if(ef.options.closed){d8+="Z"}return d8}},printPoints:function(){var d9=arguments;var ea=d9.length;var d7=[];for(var d8=0;d8<ea;d8++){d7.push(d9[d8].toString(3))}return d7.join(" ")},segmentType:function(d7,d8){return d7.controlOut()&&d8.controlIn()?"C":"L"},mapStroke:function(d8){var d7=[];if(d8&&!aI(d8.color)){d7.push(["stroke",d8.color]);d7.push(["stroke-width",d8.width]);d7.push(["stroke-linecap",this.renderLinecap(d8)]);d7.push(["stroke-linejoin",d8.lineJoin]);if(bf(d8.opacity)){d7.push(["stroke-opacity",d8.opacity])}if(bf(d8.dashType)){d7.push(["stroke-dasharray",this.renderDashType(d8)])}}else{d7.push(["stroke",aa])}return d7},renderStroke:function(){return cH(this.mapStroke(this.srcElement.options.stroke))},renderDashType:function(ec){var d8=ec.dashType;var eb=ec.width;if(eb===void 0){eb=1}if(d8&&d8!==bU){var d9=bF[d8.toLowerCase()];var d7=[];for(var ea=0;ea<d9.length;ea++){d7.push(d9[ea]*eb)}return d7.join(" ")}},renderLinecap:function(d8){var d7=d8.dashType;var d9=d8.lineCap;return d7&&d7!=="solid"?bA:d9},mapFill:function(d8){var d7=[];if(!(d8&&d8.nodeType==="Gradient")){if(d8&&!aI(d8.color)){d7.push(["fill",d8.color]);if(bf(d8.opacity)){d7.push(["fill-opacity",d8.opacity])}}else{d7.push(["fill",aa])}}return d7},renderFill:function(){return cH(this.mapFill(this.srcElement.options.fill))},template:function(){return"<path "+this.renderStyle()+" "+this.renderOpacity()+" "+cf("d",this.renderData())+""+this.renderStroke()+this.renderFill()+this.renderDefinitions()+this.renderTransform()+"></path>"}});S.Path=e;var ap=e.extend({renderData:function(){return this.printPath(this.srcElement.toPath())}});S.Arc=ap;var cb=e.extend({geometryChange:function(){var d7=this.center();this.attr("cx",d7.x);this.attr("cy",d7.y);this.attr("r",this.radius());this.invalidate()},center:function(){return this.srcElement.geometry().center},radius:function(){return this.srcElement.geometry().radius},template:function(){return"<circle "+this.renderStyle()+" "+this.renderOpacity()+"cx='"+this.center().x+"' cy='"+this.center().y+"' r='"+this.radius()+"'"+this.renderStroke()+" "+this.renderFill()+" "+this.renderDefinitions()+this.renderTransform()+" ></circle>"}});S.Circle=cb;var c=e.extend({geometryChange:function(){var d7=this.srcElement.geometry();this.attr("x",d7.origin.x);this.attr("y",d7.origin.y);this.attr("width",d7.size.width);this.attr("height",d7.size.height);this.invalidate()},size:function(){return this.srcElement.geometry().size},origin:function(){return this.srcElement.geometry().origin},template:function(){return"<rect "+this.renderStyle()+" "+this.renderOpacity()+" x='"+this.origin().x+"' y='"+this.origin().y+"' width='"+this.size().width+"' height='"+this.size().height+"' "+this.renderStroke()+" "+this.renderFill()+" "+this.renderDefinitions()+" "+this.renderTransform()+" />"}});S.Rect=c;var P=e.extend({geometryChange:function(){this.allAttr(this.mapPosition());this.invalidate()},optionsChange:function(d7){if(d7.field==="src"){this.allAttr(this.mapSource())}e.fn.optionsChange.call(this,d7)},mapPosition:function(){var d8=this.srcElement.rect();var d7=d8.topLeft();return[["x",d7.x],["y",d7.y],["width",d8.width()+"px"],["height",d8.height()+"px"]]},renderPosition:function(){return cH(this.mapPosition())},mapSource:function(d7){var d8=this.srcElement.src();if(d7){d8=kendo.htmlEncode(d8)}return[["xlink:href",d8]]},renderSource:function(){return cH(this.mapSource(true))},template:function(){return"<image preserveAspectRatio='none' "+this.renderStyle()+" "+this.renderTransform()+" "+this.renderOpacity()+this.renderPosition()+" "+this.renderSource()+" "+this.renderDefinitions()+"></image>"}});S.Image=P;function dP(d8){if(!d8||!d8.indexOf||d8.indexOf("&")<0){return d8}var d7=dP._element;d7.innerHTML=d8;return d7.textContent||d7.innerText}if(typeof document!=="undefined"){dP._element=document.createElement("span")}var cM=e.extend({geometryChange:function(){var d7=this.pos();this.attr("x",d7.x);this.attr("y",d7.y);this.invalidate()},optionsChange:function(d7){if(d7.field==="font"){this.attr("style",b0(this.mapStyle()));this.geometryChange()}else{if(d7.field==="content"){e.fn.content.call(this,this.srcElement.content())}}e.fn.optionsChange.call(this,d7)},mapStyle:function(d9){var d8=e.fn.mapStyle.call(this,d9);var d7=this.srcElement.options.font;if(d9){d7=kendo.htmlEncode(d7)}d8.push(["font",d7]);return d8},pos:function(){var d8=this.srcElement.position();var d7=this.srcElement.measure();return d8.clone().setY(d8.y+d7.baseline)},renderContent:function(){var d7=this.srcElement.content();d7=dP(d7);d7=kendo.htmlEncode(d7);return d7},template:function(){return"<text "+this.renderStyle()+" "+this.renderOpacity()+" x='"+this.pos().x+"' y='"+this.pos().y+"'"+this.renderStroke()+" "+this.renderTransform()+" "+this.renderDefinitions()+this.renderFill()+">"+this.renderContent()+"</text>"}});S.Text=cM;var aH=e.extend({renderData:function(){var ea=this;var d9=this.srcElement.paths;if(d9.length>0){var d7=[];for(var d8=0;d8<d9.length;d8++){d7.push(ea.printPath(d9[d8]))}return d7.join(" ")}}});S.MultiPath=aH;var d4={Circle:bs,Arc:B,Rect:aV,Point:dY,Segment:co,Matrix:dm,Size:b2,toMatrix:V,Transformation:aA,transform:R};function bE(ec){var d7=new br();var ed=ec.clippedBBox();var ea=ec;if(ed){var d9=ed.getOrigin();var eb=new aE();eb.transform(R().translate(-d9.x,-d9.y));eb.children.push(ec);ea=eb}d7.load([ea]);var d8="<?xml version='1.0' ?><svg xmlns='"+bV+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>"+d7.render()+"</svg>";d7.destroy();return d8}var d={Surface:be,RootNode:br,Node:T,GroupNode:af,ArcNode:ap,CircleNode:cb,RectNode:c,ImageNode:P,TextNode:cM,PathNode:e,MultiPathNode:aH,DefinitionNode:bl,ClipNode:dX,GradientStopNode:bD,LinearGradientNode:ac,RadialGradientNode:aR,exportGroup:bE};var b8={};function c7(ee,ef){var d9=ef.segments;if(d9.length===0){return}var eb=d9[0];var d8=eb.anchor();ee.moveTo(d8.x,d8.y);for(var d7=1;d7<d9.length;d7++){eb=d9[d7];d8=eb.anchor();var ed=d9[d7-1];var ec=ed.controlOut();var ea=eb.controlIn();if(ec&&ea){ee.bezierCurveTo(ec.x,ec.y,ea.x,ea.y,d8.x,d8.y)}else{ee.lineTo(d8.x,d8.y)}}if(ef.options.closed){ee.closePath()}}var a6=ag.extend({init:function(d7){ag.fn.init.call(this,d7);if(d7){this.initClip()}},initClip:function(){var d7=this.srcElement.clip();if(d7){this.clip=d7;d7.addObserver(this)}},clear:function(){if(this.srcElement){this.srcElement.removeObserver(this)}this.clearClip();ag.fn.clear.call(this)},clearClip:function(){if(this.clip){this.clip.removeObserver(this);delete this.clip}},setClip:function(d7){if(this.clip){d7.beginPath();c7(d7,this.clip);d7.clip()}},optionsChange:function(d7){if(d7.field==="clip"){this.clearClip();this.initClip()}ag.fn.optionsChange.call(this,d7)},setTransform:function(d7){if(this.srcElement){var d8=this.srcElement.transform();if(d8){d7.transform.apply(d7,d8.matrix().toArray(6))}}},loadElements:function(eb,ee,ec){var ed=this;for(var ea=0;ea<eb.length;ea++){var d7=eb[ea];var d9=d7.children;var d8=new b8[d7.nodeType](d7,ec);if(d9&&d9.length>0){d8.load(d9,ee,ec)}if(bf(ee)){ed.insertAt(d8,ee)}else{ed.append(d8)}}},load:function(d7,d9,d8){this.loadElements(d7,d9,d8);this.invalidate()},setOpacity:function(d7){if(this.srcElement){var d8=this.srcElement.opacity();if(bf(d8)){this.globalAlpha(d7,d8)}}},globalAlpha:function(d7,d9){var d8=d9;if(d8&&d7.globalAlpha){d8*=d7.globalAlpha}d7.globalAlpha=d8},visible:function(){var d7=this.srcElement;return !d7||d7&&d7.options.visible!==false}});var cn=a6.extend({renderTo:function(d7){if(!this.visible()){return}d7.save();this.setTransform(d7);this.setClip(d7);this.setOpacity(d7);var d9=this.childNodes;for(var d8=0;d8<d9.length;d8++){var ea=d9[d8];if(ea.visible()){ea.renderTo(d7)}}d7.restore()}});cL.extend(cn.prototype,"childNodes");b8.Group=cn;var bY=1000/60;var m=cn.extend({init:function(d8){cn.fn.init.call(this);this.canvas=d8;this.ctx=d8.getContext("2d");var d7=this._invalidate.bind(this);this.invalidate=kendo.throttle(function(){kendo.animationFrame(d7)},bY)},destroy:function(){cn.fn.destroy.call(this);this.canvas=null;this.ctx=null},load:function(d7,d9,d8){this.loadElements(d7,d9,d8);this._invalidate()},_invalidate:function(){if(!this.ctx){return}this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);this.renderTo(this.ctx)}});cL.extend(m.prototype,"childNodes");var df=ak.extend({init:function(){this.shapes=[]},_add:function(d7,d8){this.shapes.push({bbox:d8,shape:d7});d7._quadNode=this},pointShapes:function(d9){var ea=this.shapes;var eb=ea.length;var d8=[];for(var d7=0;d7<eb;d7++){if(ea[d7].bbox.containsPoint(d9)){d8.push(ea[d7].shape)}}return d8},insert:function(d7,d8){this._add(d7,d8)},remove:function(d9){var d8=this.shapes;var ea=d8.length;for(var d7=0;d7<ea;d7++){if(d8[d7].shape===d9){d8.splice(d7,1);break}}}});var ct=df.extend({init:function(d7){df.fn.init.call(this);this.children=[];this.rect=d7},inBounds:function(ea){var d8=this.rect;var eb=d8.bottomRight();var d9=ea.bottomRight();var d7=d8.origin.x<=ea.origin.x&&d8.origin.y<=ea.origin.y&&d9.x<=eb.x&&d9.y<=eb.y;return d7},pointShapes:function(d9){var ea=this.children;var eb=ea.length;var d8=df.fn.pointShapes.call(this,d9);for(var d7=0;d7<eb;d7++){bu(d8,ea[d7].pointShapes(d9))}return d8},insert:function(d8,eb){var d9=this.children;var ea=false;if(this.inBounds(eb)){if(this.shapes.length<4){this._add(d8,eb)}else{if(!d9.length){this._initChildren()}for(var d7=0;d7<d9.length;d7++){if(d9[d7].insert(d8,eb)){ea=true;break}}if(!ea){this._add(d8,eb)}}ea=true}return ea},_initChildren:function(){var eb=this;var ea=eb.rect;var d9=eb.children;var d8=ea.center();var ec=ea.width()/2;var d7=ea.height()/2;d9.push(new ct(new aV([ea.origin.x,ea.origin.y],[ec,d7])),new ct(new aV([d8.x,ea.origin.y],[ec,d7])),new ct(new aV([ea.origin.x,d8.y],[ec,d7])),new ct(new aV([d8.x,d8.y],[ec,d7])))}});var f=3000;var ae=10000;var A=75;var dW=ak.extend({init:function(){this.initRoots()},initRoots:function(){this.rootMap={};this.root=new df();this.rootElements=[]},clear:function(){var d9=this;var d8=this.rootElements;for(var d7=0;d7<d8.length;d7++){d9.remove(d8[d7])}this.initRoots()},pointShape:function(d9){var ea=(this.rootMap[Math.floor(d9.x/f)]||{})[Math.floor(d9.y/f)];var d8=this.root.pointShapes(d9);if(ea){d8=d8.concat(ea.pointShapes(d9))}this.assignZindex(d8);d8.sort(bz);for(var d7=0;d7<d8.length;d7++){if(d8[d7].containsPoint(d9)){return d8[d7]}}},assignZindex:function(eb){var ed=this;for(var d7=0;d7<eb.length;d7++){var d9=eb[d7];var ec=0;var ea=Math.pow(ae,A);var d8=[];while(d9){d8.push(d9);d9=d9.parent}while(d8.length){d9=d8.pop();ec+=((d9.parent?d9.parent.children:ed.rootElements).indexOf(d9)+1)*ea;ea/=ae}eb[d7]._zIndex=ec}},optionsChange:function(d7){if(d7.field==="transform"||d7.field==="stroke.width"){this.bboxChange(d7.element)}},geometryChange:function(d7){this.bboxChange(d7.element)},bboxChange:function(d8){var d9=this;if(d8.nodeType==="Group"){for(var d7=0;d7<d8.children.length;d7++){d9.bboxChange(d8.children[d7])}}else{if(d8._quadNode){d8._quadNode.remove(d8)}this._insertShape(d8)}},add:function(d7){var d8=Array.isArray(d7)?d7.slice(0):[d7];bu(this.rootElements,d8);this._insert(d8)},childrenChange:function(d8){var d9=this;if(d8.action==="remove"){for(var d7=0;d7<d8.items.length;d7++){d9.remove(d8.items[d7])}}else{this._insert(Array.prototype.slice.call(d8.items,0))}},_insert:function(d8){var d9=this;var d7;while(d8.length>0){d7=d8.pop();d7.addObserver(d9);if(d7.nodeType==="Group"){bu(d8,d7.children)}else{d9._insertShape(d7)}}},_insertShape:function(d8){var eb=d8.bbox();if(eb){var ea=this.getSectors(eb);var d7=ea[0][0];var ec=ea[1][0];if(this.inRoot(ea)){this.root.insert(d8,eb)}else{var d9=this.rootMap;if(!d9[d7]){d9[d7]={}}if(!d9[d7][ec]){d9[d7][ec]=new ct(new aV([d7*f,ec*f],[f,f]))}d9[d7][ec].insert(d8,eb)}}},remove:function(d9){var ea=this;d9.removeObserver(this);if(d9.nodeType==="Group"){var d8=d9.children;for(var d7=0;d7<d8.length;d7++){ea.remove(d8[d7])}}else{if(d9._quadNode){d9._quadNode.remove(d9);delete d9._quadNode}}},inRoot:function(d7){return d7[0].length>1||d7[1].length>1},getSectors:function(eb){var ea=eb.bottomRight();var d9=Math.floor(ea.x/f);var d8=Math.floor(ea.y/f);var ec=[[],[]];for(var d7=Math.floor(eb.origin.x/f);d7<=d9;d7++){ec[0].push(d7)}for(var ed=Math.floor(eb.origin.y/f);ed<=d8;ed++){ec[1].push(ed)}return ec}});function bz(d8,d7){if(d8._zIndex<d7._zIndex){return 1}if(d8._zIndex>d7._zIndex){return -1}return 0}var bd=d1.extend({init:function(ea,d8){d1.fn.init.call(this,ea,d8);this.element.innerHTML=this._template(this);var d7=this.element.firstElementChild;var d9=dS(ea);d7.width=d9.width;d7.height=d9.height;this._rootElement=d7;this._root=new m(d7);this._mouseTrackHandler=this._trackMouse.bind(this);aT(this.element,{click:this._mouseTrackHandler,mousemove:this._mouseTrackHandler})},destroy:function(){d1.fn.destroy.call(this);if(this._root){this._root.destroy();this._root=null}if(this._searchTree){this._searchTree.clear();delete this._searchTree}cZ(this.element,{click:this._mouseTrackHandler,mousemove:this._mouseTrackHandler})},draw:function(d7){d1.fn.draw.call(this,d7);this._root.load([d7],undefined,this.options.cors);if(this._searchTree){this._searchTree.add([d7])}},clear:function(){d1.fn.clear.call(this);this._root.clear();if(this._searchTree){this._searchTree.clear()}},eventTarget:function(d9){if(this._searchTree){var d7=this._surfacePoint(d9);var d8=this._searchTree.pointShape(d7);return d8}},image:function(){var d9=this;var d8=d9._root;var d7=d9._rootElement;var ea=[];d8.traverse(function(ec){if(ec.loading){ea.push(ec.loading)}});var eb=aW();c0(ea).then(function(){d8._invalidate();try{var ec=d7.toDataURL();eb.resolve(ec)}catch(ed){eb.reject(ed)}},function(ec){eb.reject(ec)});return eb},suspendTracking:function(){d1.fn.suspendTracking.call(this);if(this._searchTree){this._searchTree.clear();delete this._searchTree}},resumeTracking:function(){d1.fn.resumeTracking.call(this);if(!this._searchTree){this._searchTree=new dW();var d9=this._root.childNodes;var d8=[];for(var d7=0;d7<d9.length;d7++){d8.push(d9[d7].srcElement)}this._searchTree.add(d8)}},_resize:function(){this._rootElement.width=this._size.width;this._rootElement.height=this._size.height;this._root.invalidate()},_template:function(){return"<canvas style='width: 100%; height: 100%;'></canvas>"},_enableTracking:function(){this._searchTree=new dW();d1.fn._enableTracking.call(this)},_trackMouse:function(d9){if(this._suspendedTracking){return}var d8=this.eventTarget(d9);if(d9.type!=="click"){var d7=this._currentShape;if(d7&&d7!==d8){this.trigger("mouseleave",{element:d7,originalEvent:d9,type:"mouseleave"})}if(d8&&d7!==d8){this.trigger("mouseenter",{element:d8,originalEvent:d9,type:"mouseenter"})}this.trigger("mousemove",{element:d8,originalEvent:d9,type:"mousemove"});this._currentShape=d8}else{if(d8){this.trigger("click",{element:d8,originalEvent:d9,type:"click"})}}}});bd.prototype.type="canvas";if(typeof document!=="undefined"&&document.createElement("canvas").getContext){d1.support.canvas=true;d2.current.register("canvas",bd,20)}function ab(eb,ea){for(var d7=0;d7<ea.length;d7++){var d9=ea[d7];var d8=kendo.parseColor(d9.color());d8.a*=d9.opacity();eb.addColorStop(d9.offset(),d8.toCssRgba())}}var av=a6.extend({renderTo:function(d7){d7.save();this.setTransform(d7);this.setClip(d7);this.setOpacity(d7);d7.beginPath();this.renderPoints(d7,this.srcElement);this.setLineDash(d7);this.setLineCap(d7);this.setLineJoin(d7);this.setFill(d7);this.setStroke(d7);d7.restore()},setFill:function(d7){var d9=this.srcElement.options.fill;var d8=false;if(d9){if(d9.nodeType==="Gradient"){this.setGradientFill(d7,d9);d8=true}else{if(!aI(d9.color)){d7.fillStyle=d9.color;d7.save();this.globalAlpha(d7,d9.opacity);d7.fill();d7.restore();d8=true}}}return d8},setGradientFill:function(d9,eb){var ec=this.srcElement.rawBBox();var ea;if(eb instanceof ds){var ed=eb.start();var d8=eb.end();ea=d9.createLinearGradient(ed.x,ed.y,d8.x,d8.y)}else{if(eb instanceof b9){var d7=eb.center();ea=d9.createRadialGradient(d7.x,d7.y,0,d7.x,d7.y,eb.radius())}}ab(ea,eb.stops);d9.save();if(!eb.userSpace()){d9.transform(ec.width(),0,0,ec.height(),ec.origin.x,ec.origin.y)}d9.fillStyle=ea;d9.fill();d9.restore()},setStroke:function(d7){var d8=this.srcElement.options.stroke;if(d8&&!aI(d8.color)&&d8.width>0){d7.strokeStyle=d8.color;d7.lineWidth=bj(d8.width,1);d7.save();this.globalAlpha(d7,d8.opacity);d7.stroke();d7.restore();return true}},dashType:function(){var d7=this.srcElement.options.stroke;if(d7&&d7.dashType){return d7.dashType.toLowerCase()}},setLineDash:function(d8){var d7=this.dashType();if(d7&&d7!==bU){var d9=bF[d7];if(d8.setLineDash){d8.setLineDash(d9)}else{d8.mozDash=d9;d8.webkitLineDash=d9}}},setLineCap:function(d8){var d7=this.dashType();var d9=this.srcElement.options.stroke;if(d7&&d7!==bU){d8.lineCap=bA}else{if(d9&&d9.lineCap){d8.lineCap=d9.lineCap}}},setLineJoin:function(d7){var d8=this.srcElement.options.stroke;if(d8&&d8.lineJoin){d7.lineJoin=d8.lineJoin}},renderPoints:function(d7,d8){c7(d7,d8)}});b8.Path=av;var cF=av.extend({renderPoints:function(d7){var d8=this.srcElement.toPath();c7(d7,d8)}});b8.Arc=cF;var ax=av.extend({renderPoints:function(d9){var ea=this.srcElement.geometry();var d8=ea.center;var d7=ea.radius;d9.arc(d8.x,d8.y,d7,0,Math.PI*2)}});b8.Circle=ax;var bt=av.extend({renderPoints:function(d7){var ea=this.srcElement.geometry();var d8=ea.origin;var d9=ea.size;d7.rect(d8.x,d8.y,d9.width,d9.height)}});b8.Rect=bt;var bn=av.extend({init:function(d7,d9){av.fn.init.call(this,d7);this.onLoad=this.onLoad.bind(this);this.onError=this.onError.bind(this);this.loading=aW();var d8=this.img=new Image();if(d9&&!/^data:/i.test(d7.src())){d8.crossOrigin=d9}d8.src=d7.src();if(d8.complete){this.onLoad()}else{d8.onload=this.onLoad;d8.onerror=this.onError}},renderTo:function(d7){if(this.loading.state()==="resolved"){d7.save();this.setTransform(d7);this.setClip(d7);this.drawImage(d7);d7.restore()}},optionsChange:function(d7){if(d7.field==="src"){this.loading=aW();this.img.src=this.srcElement.src()}else{av.fn.optionsChange.call(this,d7)}},onLoad:function(){this.loading.resolve();this.invalidate()},onError:function(){this.loading.reject(new Error("Unable to load image '"+this.img.src+"'. Check for connectivity and verify CORS headers."))},drawImage:function(d7){var d9=this.srcElement.rect();var d8=d9.topLeft();d7.drawImage(this.img,d8.x,d8.y,d9.width(),d9.height())}});b8.Image=bn;var a=av.extend({renderTo:function(d7){var d9=this.srcElement;var ea=d9.position();var d8=d9.measure();d7.save();this.setTransform(d7);this.setClip(d7);this.setOpacity(d7);d7.beginPath();d7.font=d9.options.font;if(this.setFill(d7)){d7.fillText(d9.content(),ea.x,ea.y+d8.baseline)}if(this.setStroke(d7)){this.setLineDash(d7);d7.strokeText(d9.content(),ea.x,ea.y+d8.baseline)}d7.restore()}});b8.Text=a;var q=av.extend({renderPoints:function(d7){var d9=this.srcElement.paths;for(var d8=0;d8<d9.length;d8++){c7(d7,d9[d8])}}});b8.MultiPath=q;var I={Surface:bd,RootNode:m,Node:a6,GroupNode:cn,ArcNode:cF,CircleNode:ax,RectNode:bt,ImageNode:bn,TextNode:a,PathNode:av,MultiPathNode:q};function cI(ef,ej){var eb={width:"800px",height:"600px",cors:"Anonymous"};var ec=ef;var eg=ef.clippedBBox();if(eg){var ee=eg.getOrigin();ec=new aE();ec.transform(R().translate(-ee.x,-ee.y));ec.children.push(ef);var ei=eg.getSize();eb.width=ei.width+"px";eb.height=ei.height+"px"}var ea=dN.extend(eb,ej);var d8=document.createElement("div");var d7=d8.style;d7.display="none";d7.width=ea.width;d7.height=ea.height;document.body.appendChild(d8);var d9=new bd(d8,ea);d9.suspendTracking();d9.draw(ec);var eh=d9.image();var ed=function(){d9.destroy();document.body.removeChild(d8)};eh.then(ed,ed);return eh}function au(d9,d8){var d7=bE(d9);if(!d8||!d8.raw){d7="data:image/svg+xml;base64,"+dA(d7)}return aW().resolve(d7)}var cC=c3.browser;function aB(d7){return Array.prototype.slice.call(d7)}var bZ="KENDO-PSEUDO-ELEMENT";var cm={};var x={};x._root=x;var dK=c8.extend({init:function(d9,d8,d7){c8.fn.init.call(this,d9,d8.getOrigin(),d7);this._pdfRect=d8},rect:function(){return this._pdfRect},rawBBox:function(){return this._pdfRect}});function dn(d8,d7){if(d8.classList){d8.classList.add(d7)}else{d8.className+=" "+d7}}function dE(d8,d7){if(d8.classList){d8.classList.remove(d7)}else{d8.className=d8.className.split(/\s+/).reduce(function(d9,ea){if(ea!=d7){d9.push(ea)}return d9},[]).join(" ")}}function h(d7,d8){Object.keys(d8).forEach(function(d9){d7.style[d9]=d8[d9]})}var M=typeof Element!=="undefined"&&Element.prototype&&function(d7){if(d7.matches){return function(d9,d8){return d9.matches(d8)}}if(d7.webkitMatchesSelector){return function(d9,d8){return d9.webkitMatchesSelector(d8)}}if(d7.mozMatchesSelector){return function(d9,d8){return d9.mozMatchesSelector(d8)}}if(d7.msMatchesSelector){return function(d9,d8){return d9.msMatchesSelector(d8)}}return function(d8){return[].indexOf.call(document.querySelectorAll(d8),this)!==-1}}(Element.prototype);function by(d8,d7){if(d8.closest){return d8.closest(d7)}while(d8&&d8!==document){if(M(d8,d7)){return d8}d8=d8.parentNode}}var cj=function(d7){if(d7){return function d8(eb){var ee=eb.cloneNode(false);if(eb.nodeType==1){var ea=d7(eb),ed=d7(ee),d9;var ec=ea.data();for(d9 in ec){ed.data(d9,ec[d9])}if(/^canvas$/i.test(eb.tagName)){ee.getContext("2d").drawImage(eb,0,0)}else{if(/^input$/i.test(eb.tagName)){eb.removeAttribute("name")}else{for(d9=eb.firstChild;d9;d9=d9.nextSibling){ee.appendChild(d8(d9))}}}}return ee}}else{return function d8(d9){var eb=d9.cloneNode(true);var ea=d9.querySelectorAll("canvas");if(ea.length){aB(eb.querySelectorAll("canvas")).forEach(function(ed,ec){ed.getContext("2d").drawImage(ea[ec],0,0)})}aB(eb.querySelectorAll("input")).forEach(function(ec){ec.removeAttribute("name")});return eb}}}(typeof window!=="undefined"&&window.kendo&&window.kendo.jQuery);function dJ(d7){if(typeof d7=="number"){return{x:d7,y:d7}}if(Array.isArray(d7)){return{x:d7[0],y:d7[1]}}return{x:d7.x,y:d7.y}}function cv(d9,d8){if(!d8){d8={}}var ed=aW();if(!d9){return ed.reject("No element to export")}if(typeof window.getComputedStyle!="function"){throw new Error("window.getComputedStyle is missing.  You are using an unsupported browser, or running in IE8 compatibility mode.  Drawing HTML is supported in Chrome, Firefox, Safari and IE9+.")}kendo.pdf.defineFont(cu(d9.ownerDocument));var ec=dJ(d8.scale||1);function d7(ee){var ef=new aE();var eg=ee.getBoundingClientRect();dy(ef,[ec.x,0,0,ec.y,-eg.left*ec.x,-eg.top*ec.y]);x._clipbox=false;x._matrix=dm.unit();x._stackingContext={element:ee,group:ef};if(d8.avoidLinks===true){x._avoidLinks="a"}else{x._avoidLinks=d8.avoidLinks}dn(ee,"k-pdf-export");dC(ee,ef);dE(ee,"k-pdf-export");return ef}aS(d9,function(){var eg=d8&&d8.forcePageBreak;var ej=d8&&d8.paperSize&&d8.paperSize!="auto";var ei=kendo.pdf.getPaperOptions(function(em,en){if(em=="paperSize"){return ej?d8[em]:"A4"}return em in d8?d8[em]:en});var ef=ej&&ei.paperSize[0];var eh=ej&&ei.paperSize[1];var ek=d8.margin&&ei.margin;var ee=Boolean(ek);if(eg||eh){if(!ek){ek={left:0,top:0,right:0,bottom:0}}if(ef){ef/=ec.x}if(eh){eh/=ec.y}ek.left/=ec.x;ek.right/=ec.x;ek.top/=ec.y;ek.bottom/=ec.y;var el=new aE({pdf:{multiPage:true,paperSize:ej?ei.paperSize:"auto",_ignoreMargin:ee}});eb(function(en){if(d8.progress){var em=false,ep=0;(function eo(){if(ep<en.pages.length){var eq=d7(en.pages[ep]);el.append(eq);d8.progress({page:eq,pageNum:++ep,totalPages:en.pages.length,cancel:function(){em=true}});if(!em){setTimeout(eo)}else{en.container.parentNode.removeChild(en.container)}}else{en.container.parentNode.removeChild(en.container);ed.resolve(el)}}())}else{en.pages.forEach(function(eq){el.append(d7(eq))});en.container.parentNode.removeChild(en.container);ed.resolve(el)}},d9,eg,ef?ef-ek.left-ek.right:null,eh?eh-ek.top-ek.bottom:null,ek,d8)}else{ed.resolve(d7(d9))}});function ea(ee){if(ee!=null){if(typeof ee=="string"){ee=kendo.template(ee.replace(/^\s+|\s+$/g,""))}if(typeof ee=="function"){return function(eg){var ef=ee(eg);if(ef&&typeof ef=="string"){var eh=document.createElement("div");eh.innerHTML=ef;ef=eh.firstElementChild}return ef}}return function(){return ee.cloneNode(true)}}}function eb(el,eg,em,ex,eo,eu,ek){var es=ea(ek.template);var ez=eg.ownerDocument;var eq=[];var ev=ek._destructive?eg:cj(eg);var et=ez.createElement("KENDO-PDF-DOCUMENT");var ew=0;aB(ev.querySelectorAll("tfoot")).forEach(function(eA){eA.parentNode.appendChild(eA)});aB(ev.querySelectorAll("ol")).forEach(function(eA){aB(eA.children).forEach(function(eB,eC){eB.setAttribute("kendo-split-index",eC)})});h(et,{display:"block",position:"absolute",boxSizing:"content-box",left:"-10000px",top:"-10000px"});if(ex){h(et,{width:ex+"px",paddingLeft:eu.left+"px",paddingRight:eu.right+"px"});h(ev,{overflow:"hidden"})}eg.parentNode.insertBefore(et,eg);et.appendChild(ev);if(ek.beforePageBreak){setTimeout(function(){ek.beforePageBreak(et,ei)},15)}else{setTimeout(ei,15)}function ei(){if(em!="-"||eo){ey(ev)}var eC=ef();ev.parentNode.insertBefore(eC,ev);eC.appendChild(ev);if(es){var eB=eq.length;eq.forEach(function(eF,eD){var eE=es({element:eF,pageNum:eD+1,totalPages:eq.length});if(eE){eF.appendChild(eE);aS(eE,function(){if(--eB===0){eA()}})}})}else{eA()}function eA(){bc(eq,function(){el({pages:eq,container:et})})}}function er(eB){if(ek.keepTogether&&M(eB,ek.keepTogether)&&eB.offsetHeight<=eo-ew){return true}var eA=eB.tagName;if(/^h[1-6]$/i.test(eA)&&eB.offsetHeight>=eo-ew){return false}return eB.getAttribute("data-kendo-chart")||/^(?:img|tr|thead|th|tfoot|iframe|svg|object|canvas|input|textarea|select|video|h[1-6])/i.test(eB.tagName)}function ey(eD){var eF=cs(eD);var eC=parseFloat(dI(eF,"padding-bottom"));var eH=parseFloat(dI(eF,"border-bottom-width"));var eB=ew;ew+=eC+eH;var eA=true;for(var eE=eD.firstChild;eE;eE=eE.nextSibling){if(eE.nodeType==1){eA=false;if(M(eE,em)){ej(eE);continue}if(!eo){ey(eE);continue}if(!/^(?:static|relative)$/.test(dI(cs(eE),"position"))){continue}var eG=en(eE);if(eG==1){ej(eE)}else{if(eG){if(er(eE)){ej(eE)}else{ey(eE)}}else{ey(eE)}}}else{if(eE.nodeType==3&&eo){ep(eE,eA);eA=false}}}ew=eB}function ee(eA){var eB=eA.parentNode,eC=eB.firstChild;if(eA===eC){return true}if(eA===eB.children[0]){if(eC.nodeType==7||eC.nodeType==8){return true}if(eC.nodeType==3){return !/\S/.test(eC.data)}}return false}function ej(eE){if(eE.nodeType==1&&eE!==ev&&ee(eE)){return ej(eE.parentNode)}var eF,eC,eH,eD,eA;eF=by(eE,"table");eC=eF&&eF.querySelector("colgroup");if(ek.repeatHeaders){eH=eF&&eF.querySelector("thead");eD=by(eE,'.k-grid[data-role="grid"]');if(eD&&eD.querySelector(".k-auto-scrollable")){eA=eD.querySelector(".k-grid-header")}}var eG=ef();var eB=ez.createRange();eB.setStartBefore(ev);eB.setEndBefore(eE);eG.appendChild(eB.extractContents());ev.parentNode.insertBefore(eG,ev);eh(eE.parentNode);if(eF){eF=by(eE,"table");if(ek.repeatHeaders&&eH){eF.insertBefore(eH.cloneNode(true),eF.firstChild)}if(eC){eF.insertBefore(eC.cloneNode(true),eF.firstChild)}}if(ek.repeatHeaders&&eA){eD=by(eE,'.k-grid[data-role="grid"]');eD.insertBefore(eA.cloneNode(true),eD.firstChild)}}function ef(){var eA=ez.createElement("KENDO-PDF-PAGE");h(eA,{display:"block",boxSizing:"content-box",width:ex?ex+"px":"auto",padding:eu.top+"px "+eu.right+"px "+eu.bottom+"px "+eu.left+"px",position:"relative",height:eo?eo+"px":"auto",overflow:eo||ex?"hidden":"visible",clear:"both"});if(ek&&ek.pageClassName){eA.className=ek.pageClassName}eq.push(eA);return eA}function en(eA){var eB=eA.getBoundingClientRect();if(eB.width===0||eB.height===0){return 0}var eD=ev.getBoundingClientRect().top;var eC=eo-ew;return eB.height>eC?3:eB.top-eD>eC?1:eB.bottom-eD>eC?2:0}function ep(eF,eB){if(!/\S/.test(eF.data)){return}var eA=eF.data.length;var eC=ez.createRange();eC.selectNodeContents(eF);var eH=en(eC);if(!eH){return}var eD=eF;if(eH==1){if(eB){ej(eF.parentNode)}else{ej(eF)}}else{(function eE(eJ,eK,eI){eC.setEnd(eF,eK);if(eJ==eK||eK==eI){return eK}if(en(eC)){return eE(eJ,eJ+eK>>1,eK)}else{return eE(eK,eK+eI>>1,eI)}}(0,eA>>1,eA));if(!/\S/.test(eC.toString())&&eB){ej(eF.parentNode)}else{eD=eF.splitText(eC.endOffset);var eG=ef();eC.setStartBefore(ev);eG.appendChild(eC.extractContents());ev.parentNode.insertBefore(eG,ev);eh(eD.parentNode)}}ep(eD)}function eh(eB){var eA=by(eB,"li");if(eA){eA.setAttribute("kendo-no-bullet","1");eh(eA.parentNode)}}}return ed}cv.getFontFaces=cu;cv.drawText=function(d7){var d8=new aE();x._clipbox=false;x._matrix=dm.unit();x._stackingContext={element:d7,group:d8};bJ(d7,cs(d7),d8);if(d7.firstChild.nodeType==3){ay(d7,d7.firstChild,d8)}else{dr(d7,d8)}cN();return d8};var aJ=function(){var eh=/^((-webkit-|-moz-|-o-|-ms-)?linear-gradient\s*)\(/;var ea=/^([-0-9.]+%)/;var eb=/^([-0-9.]+px)/;var d8=/^(left|right|top|bottom|to|center)\W/;var ej=/^([-0-9.]+(deg|grad|rad|turn))/;var ei=/^(\s+)/;var d7=/^(\()/;var ed=/^(\))/;var ec=/^(,)/;var ek=/^(url)\(/;var d9=/^(.*?)\)/;var eg={},ef={};function ee(en){var es=en;if(J(eg,es)){return eg[es]}function em(){var et=ei.exec(en);if(et){en=en.substr(et[1].length)}}function er(eu){em();var et=eu.exec(en);if(et){en=en.substr(et[1].length);return et[1]}}function eq(){var et=kendo.parseColor(en,true);var ew,ev;if(et){var eu=/^#[0-9a-f]+/i.exec(en)||/^rgba?\(.*?\)/i.exec(en)||/^..*?\b/.exec(en);en=en.substr(eu[0].length);et=et.toRGB();if(!(ew=er(eb))){ev=er(ea)}return{color:et,length:ew,percent:ev}}}function ep(ev){var et;var ew,eu;var eB=[];var ex=false;if(er(d7)){et=er(ej);if(et){et=dg(et);er(ec)}else{ew=er(d8);if(ew=="to"){ew=er(d8)}else{if(ew&&/^-/.test(ev)){ex=true}}eu=er(d8);er(ec)}if(/-moz-/.test(ev)&&et==null&&ew==null){var eA=er(ea),ez=er(ea);ex=true;if(eA=="0%"){ew="left"}else{if(eA=="100%"){ew="right"}}if(ez=="0%"){eu="top"}else{if(ez=="100%"){eu="bottom"}}er(ec)}while(en&&!er(ed)){var ey=eq();if(!ey){break}eB.push(ey);er(ec)}return{type:"linear",angle:et,to:ew&&eu?ew+" "+eu:ew?ew:eu?eu:null,stops:eB,reverse:ex}}}function eo(){if(er(d7)){var et=er(d9);et=et.replace(/^['"]+|["']+$/g,"");er(ed);return{type:"url",url:et}}}var el;if(el=er(eh)){el=ep(el)}else{if(el=er(ek)){el=eo()}}return eg[es]=el||{type:"none"}}return function(el){if(J(ef,el)){return ef[el]}return ef[el]=w(el).map(ee)}}();var w=function(){var d7={};return function(ei,ec){if(!ec){ec=/^\s*,\s*/}var ee=ei+ec;if(J(d7,ee)){return d7[ee]}var ed=[];var d8=0,eh=0;var ef=0;var eg=false;var eb;function d9(ej){return eb=ej.exec(ei.substr(eh))}function ea(ej){return ej.replace(/^\s+|\s+$/g,"")}while(eh<ei.length){if(!eg&&d9(/^[\(\[\{]/)){ef++;eh++}else{if(!eg&&d9(/^[\)\]\}]/)){ef--;eh++}else{if(!eg&&d9(/^[\"\']/)){eg=eb[0];eh++}else{if(eg=="'"&&d9(/^\\\'/)){eh+=2}else{if(eg=='"'&&d9(/^\\\"/)){eh+=2}else{if(eg=="'"&&d9(/^\'/)){eg=false;eh++}else{if(eg=='"'&&d9(/^\"/)){eg=false;eh++}else{if(d9(ec)){if(!eg&&!ef&&eh>d8){ed.push(ea(ei.substring(d8,eh)));d8=eh+eb[0].length}eh+=eb[0].length}else{eh++}}}}}}}}}if(d8<eh){ed.push(ea(ei.substring(d8,eh)))}return d7[ee]=ed}}();var aO=function(d7){return function(ea){var d9=d7[ea];if(!d9){var d8;if(d8=/url\((['"]?)([^'")]*?)\1\)\s+format\((['"]?)truetype\3\)/.exec(ea)){d9=d7[ea]=d8[2]}else{if(d8=/url\((['"]?)([^'")]*?\.ttf)\1\)/.exec(ea)){d9=d7[ea]=d8[2]}}}return d9}}(Object.create?Object.create(null):{});var ai=function(d7){return function(d9){var d8=d7[d9];if(d8==null){d8=d7[d9]=aG.measureText("Mapq",{font:d9}).height}return d8}}(Object.create?Object.create(null):{});function cu(eb){if(eb==null){eb=document}var d9={};for(var ea=0;ea<eb.styleSheets.length;++ea){d8(eb.styleSheets[ea])}return d9;function d8(ef){if(ef){var eg=null;try{eg=ef.cssRules}catch(ee){}if(eg){ec(ef,eg)}}}function ed(ef){var eg=dI(ef.style,"src");if(eg){return w(eg).reduce(function(eh,ej){var ei=aO(ej);if(ei){eh.push(ei)}return eh},[])}else{var ee=aO(ef.cssText);return ee?[ee]:[]}}function ec(el,em){for(var ei=0;ei<em.length;++ei){var ef=em[ei];switch(ef.type){case 3:d8(ef.styleSheet);break;case 5:var eg=ef.style;var eh=w(dI(eg,"font-family"));var ek=/^([56789]00|bold)$/i.test(dI(eg,"font-weight"));var ej="italic"==dI(eg,"font-style");var ee=ed(ef);if(ee.length>0){d7(el,eh,ek,ej,ee[0])}}}}function d7(ei,eh,eg,ee,ef){if(!/^data:/i.test(ef)){if(!(/^[^\/:]+:\/\//.test(ef)||/^\//.test(ef))){ef=String(ei.href).replace(/[^\/]*$/,"")+ef}}eh.forEach(function(ej){ej=ej.replace(/^(['"]?)(.*?)\1$/,"$2");if(eg){ej+="|bold"}if(ee){ej+="|italic"}d9[ej]=ef})}}function J(d8,d7){return Object.prototype.hasOwnProperty.call(d8,d7)}function db(d7){d7="_counter_"+d7;return x[d7]}function bQ(d8){var d7=[],d9=x;d8="_counter_"+d8;while(d9){if(J(d9,d8)){d7.push(d9[d8])}d9=Object.getPrototypeOf(d9)}return d7.reverse()}function H(d7,d9){var d8=x;d7="_counter_"+d7;while(d8&&!J(d8,d7)){d8=Object.getPrototypeOf(d8)}if(!d8){d8=x._root}d8[d7]=(d8[d7]||0)+(d9==null?1:d9)}function ad(d7,d8){d7="_counter_"+d7;x[d7]=d8==null?0:d8}function cq(d7,eb,ea){for(var d9=0;d9<d7.length;){var d8=d7[d9++];var ec=parseFloat(d7[d9]);if(isNaN(ec)){eb(d8,ea)}else{eb(d8,ec);++d9}}}function cT(d9,d8){var d7=kendo.parseColor(d9,true);if(d7){d7=d7.toRGB();if(d8){d7=d7.toCssRgba()}else{if(d7.a===0){d7=null}}}return d7}function bc(d8,ea){var d9=0;d8.forEach(function(ee){var eb=ee.querySelectorAll("img");for(var ed=0;ed<eb.length;++ed){var ec=eb[ed];if(!ec.complete){d9++;ec.onload=ec.onerror=d7}}});if(!d9){d7()}function d7(){if(--d9<=0){ea()}}}function aS(d7,ed){var ec=[];function eb(ee){if(!cm[ee]){cm[ee]=true;ec.push(ee)}}(function ea(ee){if(/^img$/i.test(ee.tagName)){eb(ee.src)}aJ(dI(cs(ee),"background-image")).forEach(function(ef){if(ef.type=="url"){eb(ef.url)}});if(ee.children){aB(ee.children).forEach(ea)}}(d7));var d9=ec.length;function d8(){if(--d9<=0){ed()}}if(d9===0){d8()}ec.forEach(function(ef){var ee=cm[ef]=new window.Image();if(!/^data:/i.test(ef)){ee.crossOrigin="Anonymous"}ee.src=ef;if(ee.complete){d8()}else{ee.onload=d8;ee.onerror=function(){cm[ef]=null;d8()}}})}function dk(d9){var d7="";do{var d8=d9%26;d7=String.fromCharCode(97+d8)+d7;d9=Math.floor(d9/26)}while(d9>0);return d7}function bJ(d9,ea,eb){x=Object.create(x);x[d9.tagName.toLowerCase()]={element:d9,style:ea};var d8=dI(ea,"text-decoration");if(d8&&d8!="none"){var d7=dI(ea,"color");d8.split(/\s+/g).forEach(function(ec){if(!x[ec]){x[ec]=d7}})}if(cQ(ea)){x._stackingContext={element:d9,group:eb}}}function cN(){x=Object.getPrototypeOf(x)}function dO(d8){if(x._clipbox!=null){var d7=d8.bbox(x._matrix);if(x._clipbox){x._clipbox=aV.intersect(x._clipbox,d7)}else{x._clipbox=d7}}}function j(){var d7=x._clipbox;if(d7==null){return true}if(d7){return d7.width()===0||d7.height()===0}}function cQ(d7){function d8(d9){return dI(d7,d9)}if(d8("transform")!="none"||d8("position")!="static"||d8("z-index")!="auto"||d8("opacity")<1){return true}}function cs(d7,d8){return window.getComputedStyle(d7,d8||null)}function dI(d7,d9){var d8=d7.getPropertyValue(d9);if(d8==null||d8===""){if(cC.webkit){d8=d7.getPropertyValue("-webkit-"+d9)}else{if(cC.mozilla){d8=d7.getPropertyValue("-moz-"+d9)}else{if(cC.opera){d8=d7.getPropertyValue("-o-"+d9)}else{if(cC.msie){d8=d7.getPropertyValue("-ms-"+d9)}}}}}return d8}function dT(d8,ea,d9,d7){d8.setProperty(ea,d9,d7);if(cC.webkit){d8.setProperty("-webkit-"+ea,d9,d7)}else{if(cC.mozilla){d8.setProperty("-moz-"+ea,d9,d7)}else{if(cC.opera){d8.setProperty("-o-"+ea,d9,d7)}else{if(cC.msie){d8.setProperty("-ms-"+ea,d9,d7);ea="ms"+ea.replace(/(^|-)([a-z])/g,function(eb,ed,ec){return ed+ec.toUpperCase()});d8[ea]=d9}}}}}function bg(d8,d7){d7="border-"+d7;return{width:parseFloat(dI(d8,d7+"-width")),style:dI(d8,d7+"-style"),color:cT(dI(d8,d7+"-color"),true)}}function L(d8,ea){var d9=d8.style.cssText;var d7=ea();d8.style.cssText=d9;return d7}function am(d8,d7){var d9=dI(d8,"border-"+d7+"-radius").split(/\s+/g).map(parseFloat);if(d9.length==1){d9.push(d9[0])}return bh({x:d9[0],y:d9[1]})}function b6(d7){var d8=d7.getBoundingClientRect();d8=c5(d8,"border-*-width",d7);d8=c5(d8,"padding-*",d7);return d8}function c5(eb,ee,d9){var ea,d7,d8,ec,ed;if(typeof ee=="string"){ea=cs(d9);d7=parseFloat(dI(ea,ee.replace("*","top")));d8=parseFloat(dI(ea,ee.replace("*","right")));ec=parseFloat(dI(ea,ee.replace("*","bottom")));ed=parseFloat(dI(ea,ee.replace("*","left")))}else{if(typeof ee=="number"){d7=d8=ec=ed=ee}}return{top:eb.top+d7,right:eb.right-d8,bottom:eb.bottom-ec,left:eb.left+ed,width:eb.right-eb.left-d8-ed,height:eb.bottom-eb.top-ec-d7}}function cy(ea){var d7=dI(ea,"transform");if(d7=="none"){return null}var d9=/^\s*matrix\(\s*(.*?)\s*\)\s*$/.exec(d7);if(d9){var d8=dI(ea,"transform-origin");d9=d9[1].split(/\s*,\s*/g).map(parseFloat);d8=d8.split(/\s+/g).map(parseFloat);return{matrix:d9,origin:d8}}}function c4(d7){return 180*d7/Math.PI%360}function dg(d8){var d7=parseFloat(d8);if(/grad$/.test(d8)){return Math.PI*d7/200}else{if(/rad$/.test(d8)){return d7}else{if(/turn$/.test(d8)){return Math.PI*d7*2}else{if(/deg$/.test(d8)){return Math.PI*d7/180}}}}}function dy(d8,d7){d7=new dm(d7[0],d7[1],d7[2],d7[3],d7[4],d7[5]);d8.transform(d7);return d7}function ce(d7,d8){d7.clip(d8)}function g(eb,d7,ec,d8){var ea=new B([d7,ec],d8).curvePoints(),d9=1;while(d9<ea.length){eb.curveTo(ea[d9++],ea[d9++],ea[d9++])}}function bh(d7){if(d7.x<=0||d7.y<=0){d7.x=d7.y=0}return d7}function Z(eb,d8,ek,ea,ec){var ej=Math.max(0,d8.x),eh=Math.max(0,d8.y);var d9=Math.max(0,ek.x),d7=Math.max(0,ek.y);var ei=Math.max(0,ea.x),eg=Math.max(0,ea.y);var ef=Math.max(0,ec.x),ee=Math.max(0,ec.y);var ed=Math.min(eb.width/(ej+d9),eb.height/(d7+eg),eb.width/(ei+ef),eb.height/(ee+eh));if(ed<1){ej*=ed;eh*=ed;d9*=ed;d7*=ed;ei*=ed;eg*=ed;ef*=ed;ee*=ed}return{tl:{x:ej,y:eh},tr:{x:d9,y:d7},br:{x:ei,y:eg},bl:{x:ef,y:ee}}}function cJ(ed,ee,eh){var d8=cs(ed);var ea=am(d8,"top-left");var em=am(d8,"top-right");var ef=am(d8,"bottom-left");var eb=am(d8,"bottom-right");if(eh=="padding"||eh=="content"){var ej=bg(d8,"top");var ek=bg(d8,"right");var eg=bg(d8,"bottom");var d9=bg(d8,"left");ea.x-=d9.width;ea.y-=ej.width;em.x-=ek.width;em.y-=ej.width;eb.x-=ek.width;eb.y-=eg.width;ef.x-=d9.width;ef.y-=eg.width;if(eh=="content"){var el=parseFloat(dI(d8,"padding-top"));var d7=parseFloat(dI(d8,"padding-right"));var ei=parseFloat(dI(d8,"padding-bottom"));var ec=parseFloat(dI(d8,"padding-left"));ea.x-=ec;ea.y-=el;em.x-=d7;em.y-=el;eb.x-=d7;eb.y-=ei;ef.x-=ec;ef.y-=ei}}if(typeof eh=="number"){ea.x-=eh;ea.y-=eh;em.x-=eh;em.y-=eh;eb.x-=eh;eb.y-=eh;ef.x-=eh;ef.y-=eh}return aj(ee,ea,em,eb,ef)}function aj(eb,ef,ed,eg,d7){var ea=Z(eb,ef,ed,eg,d7);var d9=ea.tl;var eh=ea.tr;var d8=ea.br;var ec=ea.bl;var ee=new a2({fill:null,stroke:null});ee.moveTo(eb.left,eb.top+d9.y);if(d9.x){g(ee,eb.left+d9.x,eb.top+d9.y,{startAngle:-180,endAngle:-90,radiusX:d9.x,radiusY:d9.y})}ee.lineTo(eb.right-eh.x,eb.top);if(eh.x){g(ee,eb.right-eh.x,eb.top+eh.y,{startAngle:-90,endAngle:0,radiusX:eh.x,radiusY:eh.y})}ee.lineTo(eb.right,eb.bottom-d8.y);if(d8.x){g(ee,eb.right-d8.x,eb.bottom-d8.y,{startAngle:0,endAngle:90,radiusX:d8.x,radiusY:d8.y})}ee.lineTo(eb.left+ec.x,eb.bottom);if(ec.x){g(ee,eb.left+ec.x,eb.bottom-ec.y,{startAngle:90,endAngle:180,radiusX:ec.x,radiusY:ec.y})}return ee.close()}function z(d9,d7){var d8=String(parseFloat(d9));switch(d7){case"decimal-leading-zero":if(d8.length<2){d8="0"+d8}return d8;case"lower-roman":return Y(d9).toLowerCase();case"upper-roman":return Y(d9).toUpperCase();case"lower-latin":case"lower-alpha":return dk(d9-1);case"upper-latin":case"upper-alpha":return dk(d9-1).toUpperCase();default:return d8}}function dh(ea,eb){function ec(ed,ee,ef){if(!ef){return z(db(ed)||0,ee)}ef=ef.replace(/^\s*(["'])(.*)\1\s*$/,"$2");return bQ(ed).map(function(eg){return z(eg,ee)}).join(ef)}var d9=w(eb,/^\s+/);var d8=[],d7;d9.forEach(function(ee){var ed;if(d7=/^\s*(["'])(.*)\1\s*$/.exec(ee)){d8.push(d7[2].replace(/\\([0-9a-f]{4})/gi,function(ef,eg){return String.fromCharCode(parseInt(eg,16))}))}else{if(d7=/^\s*counter\((.*?)\)\s*$/.exec(ee)){ed=w(d7[1]);d8.push(ec(ed[0],ed[1]))}else{if(d7=/^\s*counters\((.*?)\)\s*$/.exec(ee)){ed=w(d7[1]);d8.push(ec(ed[0],ed[2],ed[1]))}else{if(d7=/^\s*attr\((.*?)\)\s*$/.exec(ee)){d8.push(ea.getAttribute(d7[1])||"")}else{d8.push(ee)}}}}});return d8.join("")}function aF(d9){if(d9.cssText){return d9.cssText}var d7=[];for(var d8=0;d8<d9.length;++d8){d7.push(d9[d8]+": "+dI(d9,d9[d8]))}return d7.join(";\n")}function cU(d9,eb){if(d9.tagName==bZ){dr(d9,eb);return}var d8=[];function ea(ef,ed){var ee=cs(d9,ef);if(ee.content&&ee.content!="normal"&&ee.content!="none"&&ee.width!="0px"){var ec=d9.ownerDocument.createElement(bZ);ec.style.cssText=aF(ee);ec.textContent=dh(d9,ee.content);d9.insertBefore(ec,ed);d8.push(ec)}}ea(":before",d9.firstChild);ea(":after",null);var d7=d9.className;d9.className+=" kendo-pdf-hide-pseudo-elements";dr(d9,eb);d9.className=d7;d8.forEach(function(ec){d9.removeChild(ec)})}function dr(d8,ek){var et=cs(d8);var eo=bg(et,"top");var ex=bg(et,"right");var ei=bg(et,"bottom");var ea=bg(et,"left");var ed=am(et,"top-left");var ef=am(et,"top-right");var eg=am(et,"bottom-left");var ej=am(et,"bottom-right");var eq=dI(et,"direction");var ec=dI(et,"background-color");ec=cT(ec);var d7=aJ(dI(et,"background-image"));var ev=w(dI(et,"background-repeat"));var ep=w(dI(et,"background-position"));var el=w(dI(et,"background-origin"));var ew=w(dI(et,"background-size"));if(cC.msie&&cC.version<10){ep=w(d8.currentStyle.backgroundPosition)}var em=c5(d8.getBoundingClientRect(),"border-*-width",d8);(function(){var eC=dI(et,"clip");var eD=/^\s*rect\((.*)\)\s*$/.exec(eC);if(eD){var eH=eD[1].split(/[ ,]+/g);var eG=eH[0]=="auto"?em.top:parseFloat(eH[0])+em.top;var eI=eH[1]=="auto"?em.right:parseFloat(eH[1])+em.left;var eA=eH[2]=="auto"?em.bottom:parseFloat(eH[2])+em.top;var eB=eH[3]=="auto"?em.left:parseFloat(eH[3])+em.left;var eE=new aE();var eF=new a2().moveTo(eB,eG).lineTo(eI,eG).lineTo(eI,eA).lineTo(eB,eA).close();ce(eE,eF);ek.append(eE);ek=eE;dO(eF)}}());var ee,es,d9;var er=dI(et,"display");if(er=="table-row"){ee=[];for(es=0,d9=d8.children;es<d9.length;++es){ee.push(d9[es].getBoundingClientRect())}}else{ee=d8.getClientRects();if(ee.length==1){ee=[d8.getBoundingClientRect()]}}ee=ez(ee);for(es=0;es<ee.length;++es){eb(ee[es],es===0,es==ee.length-1)}if(ee.length>0&&er=="list-item"&&!d8.getAttribute("kendo-no-bullet")){eu(ee[0])}(function(){function eA(){var eC=cJ(d8,em,"padding");var eB=new aE();ce(eB,eC);ek.append(eB);ek=eB;dO(eC)}if(bi(d8)){eA()}else{if(/^(hidden|auto|scroll)/.test(dI(et,"overflow"))){eA()}else{if(/^(hidden|auto|scroll)/.test(dI(et,"overflow-x"))){eA()}else{if(/^(hidden|auto|scroll)/.test(dI(et,"overflow-y"))){eA()}}}}}());if(!cw(d8,ek)){Q(d8,ek)}return ek;function ez(eE){if(/^td$/i.test(d8.tagName)){var eF=x.table;if(eF&&dI(eF.style,"border-collapse")=="collapse"){var eD=bg(eF.style,"left").width;var eA=bg(eF.style,"top").width;if(eD===0&&eA===0){return eE}var eG=eF.element.getBoundingClientRect();var eC=eF.element.rows[0].cells[0];var eB=eC.getBoundingClientRect();if(eB.top==eG.top||eB.left==eG.left){return aB(eE).map(function(eH){return{left:eH.left+eD,top:eH.top+eA,right:eH.right+eD,bottom:eH.bottom+eA,height:eH.height,width:eH.width}})}}}return eE}function eh(eC,eF,eA,eI,eG,eH,eE,eJ){if(eA<=0){return}var eK,eB=new aE();dy(eB,eJ);ek.append(eB);bh(eH);bh(eE);eK=new a2({fill:{color:eC},stroke:null});eB.append(eK);eK.moveTo(eH.x?Math.max(eH.x,eI):0,0).lineTo(eF-(eE.x?Math.max(eE.x,eG):0),0).lineTo(eF-Math.max(eE.x,eG),eA).lineTo(Math.max(eH.x,eI),eA).close();if(eH.x){eD(eI,eH,[-1,0,0,1,eH.x,0])}if(eE.x){eD(eG,eE,[1,0,0,1,eF-eE.x,0])}function eD(eO,eN,eM){var eQ=Math.PI/2*eO/(eO+eA);var eL={x:eN.x-eO,y:eN.y-eA};var eP=new a2({fill:{color:eC},stroke:null}).moveTo(0,0);dy(eP,eM);g(eP,0,eN.y,{startAngle:-90,endAngle:-c4(eQ),radiusX:eN.x,radiusY:eN.y});if(eL.x>0&&eL.y>0){eP.lineTo(eL.x*Math.cos(eQ),eN.y-eL.y*Math.sin(eQ));g(eP,0,eN.y,{startAngle:-c4(eQ),endAngle:-90,radiusX:eL.x,radiusY:eL.y,anticlockwise:true})}else{if(eL.x>0){eP.lineTo(eL.x,eA).lineTo(0,eA)}else{eP.lineTo(eL.x,eA).lineTo(eL.x,0)}}eB.append(eP.close())}}function en(eC){var eB=new aE();ce(eB,aj(eC,ed,ef,ej,eg));ek.append(eB);if(d8.tagName=="A"&&d8.href&&!/^#?$/.test(d8.getAttribute("href"))){if(!x._avoidLinks||!M(d8,x._avoidLinks)){eB._pdfLink={url:d8.href,top:eC.top,right:eC.right,bottom:eC.bottom,left:eC.left}}}if(ec){var eD=new a2({fill:{color:ec.toCssRgba()},stroke:null});eD.moveTo(eC.left,eC.top).lineTo(eC.right,eC.top).lineTo(eC.right,eC.bottom).lineTo(eC.left,eC.bottom).close();eB.append(eD)}for(var eA=d7.length;--eA>=0;){ey(eB,eC,d7[eA],ev[eA%ev.length],ep[eA%ep.length],el[eA%el.length],ew[eA%ew.length])}}function ey(eI,eF,eA,eD,eC,eB,eH){if(!eA||eA=="none"){return}if(eA.type=="url"){if(/^url\(\"data:image\/svg/i.test(eA.url)){return}var eE=cm[eA.url];if(eE&&eE.width>0&&eE.height>0){eG(eI,eF,eE.width,eE.height,function(eK,eJ){eK.append(new dB(eA.url,eJ))})}}else{if(eA.type=="linear"){eG(eI,eF,eF.width,eF.height,bS(eA))}else{return}}function eG(eT,eL,eU,eJ,eO){var eK=eU/eJ,eM;var eR=eL;if(eB=="content-box"){eR=c5(eR,"border-*-width",d8);eR=c5(eR,"padding-*",d8)}else{if(eB=="padding-box"){eR=c5(eR,"border-*-width",d8)}}if(!/^\s*auto(\s+auto)?\s*$/.test(eH)){if(eH=="contain"){eM=Math.min(eR.width/eU,eR.height/eJ);eU*=eM;eJ*=eM}else{if(eH=="cover"){eM=Math.max(eR.width/eU,eR.height/eJ);eU*=eM;eJ*=eM}else{var eX=eH.split(/\s+/g);if(/%$/.test(eX[0])){eU=eR.width*parseFloat(eX[0])/100}else{eU=parseFloat(eX[0])}if(eX.length==1||eX[1]=="auto"){eJ=eU/eK}else{if(/%$/.test(eX[1])){eJ=eR.height*parseFloat(eX[1])/100}else{eJ=parseFloat(eX[1])}}}}}var eQ=String(eC);switch(eQ){case"bottom":eQ="50% 100%";break;case"top":eQ="50% 0";break;case"left":eQ="0 50%";break;case"right":eQ="100% 50%";break;case"center":eQ="50% 50%";break}eQ=eQ.split(/\s+/);if(eQ.length==1){eQ[1]="50%"}if(/%$/.test(eQ[0])){eQ[0]=parseFloat(eQ[0])/100*(eR.width-eU)}else{eQ[0]=parseFloat(eQ[0])}if(/%$/.test(eQ[1])){eQ[1]=parseFloat(eQ[1])/100*(eR.height-eJ)}else{eQ[1]=parseFloat(eQ[1])}var eP=new aV([eR.left+eQ[0],eR.top+eQ[1]],[eU,eJ]);function eW(){while(eP.origin.x>eL.left){eP.origin.x-=eU}}function eV(){while(eP.origin.y>eL.top){eP.origin.y-=eJ}}function eN(){while(eP.origin.x<eL.right){eO(eT,eP.clone());eP.origin.x+=eU}}if(eD=="no-repeat"){eO(eT,eP)}else{if(eD=="repeat-x"){eW();eN()}else{if(eD=="repeat-y"){eV();while(eP.origin.y<eL.bottom){eO(eT,eP.clone());eP.origin.y+=eJ}}else{if(eD=="repeat"){eW();eV();var eS=eP.origin.clone();while(eP.origin.y<eL.bottom){eP.origin.x=eS.x;eN();eP.origin.y+=eJ}}}}}}}function eu(){var eB=dI(et,"list-style-type");if(eB=="none"){return}var eD=dI(et,"list-style-position");function eA(eE){L(d8,function(){d8.style.position="relative";var eF=d8.ownerDocument.createElement(bZ);eF.style.position="absolute";eF.style.boxSizing="border-box";if(eD=="outside"){eF.style.width="6em";eF.style.left="-6.8em";eF.style.textAlign="right"}else{eF.style.left="0px"}eE(eF);d8.insertBefore(eF,d8.firstChild);dC(eF,ek);d8.removeChild(eF)})}function eC(eH){var eE=d8.parentNode.children;var eF=d8.getAttribute("kendo-split-index");if(eF!=null){return eH(eF|0,eE.length)}for(var eG=0;eG<eE.length;++eG){if(eE[eG]===d8){return eH(eG,eE.length)}}}switch(eB){case"circle":case"disc":case"square":eA(function(eE){eE.style.fontSize="60%";eE.style.lineHeight="200%";eE.style.paddingRight="0.5em";eE.style.fontFamily="DejaVu Serif";eE.innerHTML={disc:"\u25CF",circle:"\u25EF",square:"\u25A0"}[eB]});break;case"decimal":case"decimal-leading-zero":eA(function(eE){eC(function(eF){++eF;if(eB=="decimal-leading-zero"&&eF<10){eF="0"+eF}eE.innerHTML=eF+"."})});break;case"lower-roman":case"upper-roman":eA(function(eE){eC(function(eF){eF=Y(eF+1);if(eB=="upper-roman"){eF=eF.toUpperCase()}eE.innerHTML=eF+"."})});break;case"lower-latin":case"lower-alpha":case"upper-latin":case"upper-alpha":eA(function(eE){eC(function(eF){eF=dk(eF);if(/^upper/i.test(eB)){eF=eF.toUpperCase()}eE.innerHTML=eF+"."})});break}}function eb(eH,eD,eF){if(eH.width===0||eH.height===0){return}en(eH);var eL=ea.width>0&&(eD&&eq=="ltr"||eF&&eq=="rtl");var eC=ex.width>0&&(eF&&eq=="ltr"||eD&&eq=="rtl");if(eo.width===0&&ea.width===0&&ex.width===0&&ei.width===0){return}if(eo.color==ex.color&&eo.color==ei.color&&eo.color==ea.color){if(eo.width==ex.width&&eo.width==ei.width&&eo.width==ea.width){if(eL&&eC){eH=c5(eH,eo.width/2);var eK=cJ(d8,eH,eo.width/2);eK.options.stroke={color:eo.color,width:eo.width};ek.append(eK);return}}}if(ed.x===0&&ef.x===0&&ej.x===0&&eg.x===0){if(eo.width<2&&ea.width<2&&ex.width<2&&ei.width<2){if(eo.width>0){ek.append(new a2({stroke:{width:eo.width,color:eo.color}}).moveTo(eH.left,eH.top+eo.width/2).lineTo(eH.right,eH.top+eo.width/2))}if(ei.width>0){ek.append(new a2({stroke:{width:ei.width,color:ei.color}}).moveTo(eH.left,eH.bottom-ei.width/2).lineTo(eH.right,eH.bottom-ei.width/2))}if(eL){ek.append(new a2({stroke:{width:ea.width,color:ea.color}}).moveTo(eH.left+ea.width/2,eH.top).lineTo(eH.left+ea.width/2,eH.bottom))}if(eC){ek.append(new a2({stroke:{width:ex.width,color:ex.color}}).moveTo(eH.right-ex.width/2,eH.top).lineTo(eH.right-ex.width/2,eH.bottom))}return}}var eG=Z(eH,ed,ef,ej,eg);var eB=eG.tl;var eJ=eG.tr;var eA=eG.br;var eI=eG.bl;eh(eo.color,eH.width,eo.width,ea.width,ex.width,eB,eJ,[1,0,0,1,eH.left,eH.top]);eh(ei.color,eH.width,ei.width,ex.width,ea.width,eA,eI,[-1,0,0,-1,eH.right,eH.bottom]);function eE(eM){return{x:eM.y,y:eM.x}}eh(ea.color,eH.height,ea.width,ei.width,eo.width,eE(eI),eE(eB),[0,-1,1,0,eH.left,eH.bottom]);eh(ex.color,eH.height,ex.width,eo.width,ei.width,eE(eJ),eE(eA),[0,1,-1,0,eH.right,eH.top])}}function bS(d7){return function(el,ei){var d9=ei.width(),eo=ei.height();switch(d7.type){case"linear":var ea=d7.angle!=null?d7.angle:Math.PI;switch(d7.to){case"top":ea=0;break;case"left":ea=-Math.PI/2;break;case"bottom":ea=Math.PI;break;case"right":ea=Math.PI/2;break;case"top left":case"left top":ea=-Math.atan2(eo,d9);break;case"top right":case"right top":ea=Math.atan2(eo,d9);break;case"bottom left":case"left bottom":ea=Math.PI+Math.atan2(eo,d9);break;case"bottom right":case"right bottom":ea=Math.PI-Math.atan2(eo,d9);break}if(d7.reverse){ea-=Math.PI}ea%=2*Math.PI;if(ea<0){ea+=2*Math.PI}var ec=Math.abs(d9*Math.sin(ea))+Math.abs(eo*Math.cos(ea));var ee=Math.atan(d9*Math.tan(ea)/eo);var ef=Math.sin(ee),en=Math.cos(ee);var ed=Math.abs(ef)+Math.abs(en);var ej=ed/2*ef;var eh=ed/2*en;if(ea>Math.PI/2&&ea<=3*Math.PI/2){ej=-ej;eh=-eh}var eg=[],ek=0;var em=d7.stops.map(function(er,eq){var es=er.percent;if(es){es=parseFloat(es)/100}else{if(er.length){es=parseFloat(er.length)/ec}else{if(eq===0){es=0}else{if(eq==d7.stops.length-1){es=1}}}}var ep={color:er.color.toCssRgba(),offset:es};if(es!=null){ek=es;eg.forEach(function(ev,eu){var et=ev.stop;et.offset=ev.left+(ek-ev.left)*(eu+1)/(eg.length+1)});eg=[]}else{eg.push({left:ek,stop:ep})}return ep});var d8=[0.5-ej,0.5+eh];var eb=[0.5+ej,0.5-eh];el.append(a2.fromRect(ei).stroke(null).fill(new ds({start:d8,end:eb,stops:em,userSpace:false})));break;case"radial":if(window.console&&window.console.log){window.console.log("Radial gradients are not yet supported in HTML renderer")}break}}}function cw(d7,eb){if(window.kendo&&window.kendo.jQuery&&d7.getAttribute(window.kendo.attr("role"))){var ea=window.kendo.widgetInstance(window.kendo.jQuery(d7));if(ea&&(ea.exportDOMVisual||ea.exportVisual)){var d8;if(ea.exportDOMVisual){d8=ea.exportDOMVisual()}else{d8=ea.exportVisual()}if(!d8){return false}var d9=new aE();d9.children.push(d8);var ec=d7.getBoundingClientRect();d9.transform(R().translate(ec.left,ec.top));eb.append(d9);return true}}}function bk(d8,d7,ec){var ea=b6(d8);var d9=new aV([ea.left,ea.top],[ea.width,ea.height]);var eb=new dB(d7,d9);ce(eb,cJ(d8,ea,"content"));ec.append(eb)}function cl(d9,d8){var d7=cs(d9);var ee=cs(d8);var eb=parseFloat(dI(d7,"z-index"));var ea=parseFloat(dI(ee,"z-index"));var ed=dI(d7,"position");var ec=dI(ee,"position");if(isNaN(eb)&&isNaN(ea)){if(/static|absolute/.test(ed)&&/static|absolute/.test(ec)){return 0}if(ed=="static"){return -1}if(ec=="static"){return 1}return 0}if(isNaN(eb)){return ea===0?0:ea>0?-1:1}if(isNaN(ea)){return eb===0?0:eb>0?1:-1}return parseFloat(eb)-parseFloat(ea)}function bi(d7){return/^(?:textarea|select|input)$/i.test(d7.tagName)}function bL(d7){if(d7.selectedOptions&&d7.selectedOptions.length>0){return d7.selectedOptions[0]}return d7.options[d7.selectedIndex]}function cG(d8,eb){var d9=cs(d8);var d7=dI(d9,"color");var ea=d8.getBoundingClientRect();if(d8.type=="checkbox"){eb.append(a2.fromRect(new aV([ea.left+1,ea.top+1],[ea.width-2,ea.height-2])).stroke(d7,1));if(d8.checked){eb.append(new a2().stroke(d7,1.2).moveTo(ea.left+0.22*ea.width,ea.top+0.55*ea.height).lineTo(ea.left+0.45*ea.width,ea.top+0.75*ea.height).lineTo(ea.left+0.78*ea.width,ea.top+0.22*ea.width))}}else{eb.append(new c9(new bs([(ea.left+ea.right)/2,(ea.top+ea.bottom)/2],Math.min(ea.width-2,ea.height-2)/2)).stroke(d7,1));if(d8.checked){eb.append(new c9(new bs([(ea.left+ea.right)/2,(ea.top+ea.bottom)/2],Math.min(ea.width-8,ea.height-8)/2)).fill(d7).stroke(null))}}}function y(d9,ee){var d7=d9.tagName.toLowerCase();if(d7=="input"&&(d9.type=="checkbox"||d9.type=="radio")){return cG(d9,ee)}var ed=d9.parentNode;var ec=d9.ownerDocument;var eb=ec.createElement(bZ);var ea;eb.style.cssText=aF(cs(d9));if(d7=="input"){eb.style.whiteSpace="pre"}if(d7=="select"||d7=="textarea"){eb.style.overflow="auto"}if(d7=="select"){if(d9.multiple){for(var d8=0;d8<d9.options.length;++d8){ea=ec.createElement(bZ);ea.style.cssText=aF(cs(d9.options[d8]));ea.style.display="block";ea.textContent=d9.options[d8].textContent;eb.appendChild(ea)}}else{ea=bL(d9);if(ea){eb.textContent=ea.textContent}}}else{eb.textContent=d9.value}ed.insertBefore(eb,d9);eb.scrollLeft=d9.scrollLeft;eb.scrollTop=d9.scrollTop;d9.style.display="none";Q(eb,ee);d9.style.display="";ed.removeChild(eb)}function Q(ea,ei){if(x._stackingContext.element===ea){x._stackingContext.group=ei}switch(ea.tagName.toLowerCase()){case"img":bk(ea,ea.src,ei);break;case"canvas":try{bk(ea,ea.toDataURL("image/png"),ei)}catch(eg){}break;case"textarea":case"input":case"select":y(ea,ei);break;default:var d7=[],eh=[],ef=[],d9=[];for(var eb=ea.firstChild;eb;eb=eb.nextSibling){switch(eb.nodeType){case 3:if(/\S/.test(eb.data)){ay(ea,eb,ei)}break;case 1:var d8=cs(eb);var ee=dI(d8,"display");var ed=dI(d8,"float");var ec=dI(d8,"position");if(ec!="static"){d9.push(eb)}else{if(ee!="inline"){if(ed!="none"){eh.push(eb)}else{d7.push(eb)}}else{ef.push(eb)}}break}}dM(d7,cl).forEach(function(ej){dC(ej,ei)});dM(eh,cl).forEach(function(ej){dC(ej,ei)});dM(ef,cl).forEach(function(ej){dC(ej,ei)});dM(d9,cl).forEach(function(ej){dC(ej,ei)})}}function ay(d9,er,eg){if(j()){return}var eu=cs(d9);if(parseFloat(dI(eu,"text-indent"))<-500){return}var en=er.data;var ee=0;var ed=en.search(/\S\s*$/)+1;if(!ed){return}var ea=dI(eu,"font-size");var eb=dI(eu,"line-height");var ep=[dI(eu,"font-style"),dI(eu,"font-variant"),dI(eu,"font-weight"),ea,dI(eu,"font-family")].join(" ");ea=parseFloat(ea);eb=parseFloat(eb);if(ea===0){return}var es=dI(eu,"color");var eo=d9.ownerDocument.createRange();var ej=dI(eu,"text-align");var ek=ej=="justify";var d7=dI(eu,"white-space");var ew,d8;if(cC.msie){ew=eu.textOverflow;if(ew=="ellipsis"){d8=d9.style.textOverflow;d9.style.textOverflow="clip"}}var et=d9.getBoundingClientRect().width/ea*5;if(et===0){et=500}var ec=null;var ei=x.underline;var ef=x["line-through"];var ex=x.overline;var em=ei||ef||ex;while(!eh()){}if(cC.msie&&ew=="ellipsis"){d9.style.textOverflow=d8}if(em){eo.selectNode(er);aB(eo.getClientRects()).forEach(el)}return;function ev(ez){if(cC.msie||cC.chrome){var eB=ez.getClientRects(),eC={top:Infinity,right:-Infinity,bottom:-Infinity,left:Infinity};for(var eA=0;eA<eB.length;++eA){var ey=eB[eA];if(ey.width<=1||ey.bottom===ec){continue}eC.left=Math.min(ey.left,eC.left);eC.top=Math.min(ey.top,eC.top);eC.right=Math.max(ey.right,eC.right);eC.bottom=Math.max(ey.bottom,eC.bottom)}eC.width=eC.right-eC.left;eC.height=eC.bottom-eC.top;return eC}return ez.getBoundingClientRect()}function eh(){var eG=ee;var eD,eF=en.substr(ee).search(/\S/);ee+=eF;if(eF<0||ee>=ed){return true}eo.setStart(er,ee);eo.setEnd(er,ee+1);eD=ev(eo);var eH=false;if(ek){eF=en.substr(ee).search(/\s/);if(eF>=0){eo.setEnd(er,ee+eF);var ey=ev(eo);if(ey.bottom==eD.bottom){eD=ey;eH=true;ee+=eF}}}if(!eH){eF=function ez(eJ,eL,eI){eo.setEnd(er,eL);var eK=ev(eo);if(eK.bottom!=eD.bottom&&eJ<eL){return ez(eJ,eJ+eL>>1,eL)}else{if(eK.right!=eD.right){eD=eK;if(eL<eI){return ez(eL,eL+eI>>1,eI)}else{return eL}}else{return eL}}}(ee,Math.min(ed,ee+et),ed);if(eF==ee){return true}ee=eF;eF=eo.toString().search(/\s+$/);if(eF===0){return false}if(eF>0){eo.setEnd(er,eo.startOffset+eF);eD=ev(eo)}}if(cC.msie){eD=eo.getClientRects()[0]}var eE=eo.toString();if(!/^(?:pre|pre-wrap)$/i.test(d7)){eE=eE.replace(/\s+/g," ")}else{if(/\t/.test(eE)){var eC=0;for(eF=eG;eF<eo.startOffset;++eF){var eA=en.charCodeAt(eF);if(eA==9){eC+=8-eC%8}else{if(eA==10||eA==13){eC=0}else{eC++}}}while((eF=eE.search("\t"))>=0){var eB="        ".substr(0,8-(eC+eF)%8);eE=eE.substr(0,eF)+eB+eE.substr(eF+1)}}}if(!eH){ec=eD.bottom}eq(eE,eD)}function eq(eC,ez){if(cC.msie&&!isNaN(eb)){var ey=ai(ep);var eA=(ez.top+ez.bottom-ey)/2;ez={top:eA,right:ez.right,bottom:eA+ey,left:ez.left,height:ey,width:ez.right-ez.left}}var eB=new dK(eC,new aV([ez.left,ez.top],[ez.width,ez.height]),{font:ep,fill:{color:es}});eg.append(eB)}function el(ez){ey(ei,ez.bottom);ey(ef,ez.bottom-ez.height/2.7);ey(ex,ez.top);function ey(eA,eD){if(eA){var eB=ea/12;var eC=new a2({stroke:{width:eB,color:eA}});eD-=eB;eC.moveTo(ez.left,eD).lineTo(ez.right,eD);eg.append(eC)}}}}function cB(ea,ef,ed){var d9;if(ed!="auto"){d9=x._stackingContext.group;ed=parseFloat(ed)}else{d9=ef;ed=0}var ee=d9.children;for(var eb=0;eb<ee.length;++eb){if(ee[eb]._dom_zIndex!=null&&ee[eb]._dom_zIndex>ed){break}}var ec=new aE();d9.insert(eb,ec);ec._dom_zIndex=ed;if(d9!==ef){if(x._clipbox){var d8=x._matrix.invert();var d7=x._clipbox.transformCopy(d8);ce(ec,a2.fromRect(d7))}}return ec}function dC(ea,d8){var d7=cs(ea);var ec=dI(d7,"counter-reset");if(ec){cq(w(ec,/^\s+/),ad,0)}var ed=dI(d7,"counter-increment");if(ed){cq(w(ed,/^\s+/),H,1)}if(/^(style|script|link|meta|iframe|svg|col|colgroup)$/i.test(ea.tagName)){return}if(x._clipbox==null){return}var eb=parseFloat(dI(d7,"opacity"));var d9=dI(d7,"visibility");var ee=dI(d7,"display");if(eb===0||d9=="hidden"||ee=="none"){return}var ef=cy(d7);var eh;var eg=dI(d7,"z-index");if((ef||eb<1)&&eg=="auto"){eg=0}eh=cB(ea,d8,eg);if(eb<1){eh.opacity(eb*eh.opacity())}bJ(ea,d7,eh);if(!ef){cU(ea,eh)}else{L(ea,function(){dT(ea.style,"transform","none","important");dT(ea.style,"transition","none","important");if(dI(d7,"position")=="static"){dT(ea.style,"position","relative","important")}var ek=ea.getBoundingClientRect();var ej=ek.left+ef.origin[0];var el=ek.top+ef.origin[1];var ei=[1,0,0,1,-ej,-el];ei=dz(ei,ef.matrix);ei=dz(ei,[1,0,0,1,ej,el]);ei=dy(eh,ei);x._matrix=x._matrix.multiplyCopy(ei);cU(ea,eh)})}cN()}function dz(ek,ei){var ea=ek[0],ej=ek[1],ee=ek[2],d9=ek[3],eh=ek[4],ed=ek[5];var d8=ei[0],eg=ei[1],ec=ei[2],d7=ei[3],ef=ei[4],eb=ei[5];return[ea*d8+ej*ec,ea*eg+ej*d7,ee*d8+d9*ec,ee*eg+d9*d7,eh*d8+ed*ec+ef,eh*eg+ed*d7+eb]}var t={svg:d,canvas:I,util:du,PathParser:dG,Surface:d1,BaseNode:ag,SurfaceFactory:d2,OptionsStore:bR,exportImage:cI,exportSVG:au,QuadNode:ct,ShapesQuadTree:dW,ObserversMixin:E,Element:a9,Circle:c9,Arc:da,Path:a2,MultiPath:bP,Text:c8,Image:dB,Group:aE,Layout:F,Rect:bO,align:ch,vAlign:aZ,stack:de,vStack:bX,wrap:n,vWrap:cX,fit:c2,LinearGradient:ds,RadialGradient:b9,GradientStop:cp,Gradient:dQ,Animation:i,AnimationFactory:d6,drawDOM:cv};kendo.deepExtend(kendo,{drawing:t,geometry:d4});kendo.drawing.Segment=kendo.geometry.Segment;kendo.dataviz.drawing=kendo.drawing;kendo.dataviz.geometry=kendo.geometry;kendo.drawing.util.measureText=kendo.util.measureText;kendo.drawing.util.objectKey=kendo.util.objectKey;kendo.drawing.Color=kendo.Color;kendo.util.encodeBase64=kendo.drawing.util.encodeBase64}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.popup",["kendo.core"],a)}(function(){var a={id:"popup",name:"Pop-up",category:"framework",depends:["core"],advanced:true};(function(u,f){var v=window.kendo,B=v.ui,b=B.Widget,D=v.support,g=v.getOffset,G=v._outerWidth,K=v._outerHeight,H="open",J="close",E="deactivate",e="activate",q="center",o="left",M="right",w="top",r="bottom",z="absolute",I="hidden",F="body",i="location",C="position",O="visible",l="effects",m="k-state-active",p="k-state-border",n=/k-state-border-(\w+)/,c=".k-picker-wrap, .k-dropdown-wrap, .k-link",A="down",N=u(document.documentElement),j=u(window),k="scroll",y=D.transitions.css,L=y+"transform",d=u.extend,x=".kendoPopup",t=["font-size","font-family","font-stretch","font-style","font-weight","line-height"];function s(P,Q){if(!P||!Q){return false}return P===Q||u.contains(P,Q)}var h=b.extend({init:function(R,Q){var S=this,P;Q=Q||{};if(Q.isRtl){Q.origin=Q.origin||r+" "+M;Q.position=Q.position||w+" "+M}b.fn.init.call(S,R,Q);R=S.element;Q=S.options;S.collisions=Q.collision?Q.collision.split(" "):[];S.downEvent=v.applyEventMap(A,v.guid());if(S.collisions.length===1){S.collisions.push(S.collisions[0])}P=u(S.options.anchor).closest(".k-popup,.k-group").filter(":not([class^=km-])");Q.appendTo=u(u(Q.appendTo)[0]||P[0]||document.body);S.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl",!!Q.isRtl).css({position:z}).appendTo(Q.appendTo).on("mouseenter"+x,function(){S._hovered=true}).on("mouseleave"+x,function(){S._hovered=false});S.wrapper=u();if(Q.animation===false){Q.animation={open:{effects:{}},close:{hide:true,effects:{}}}}d(Q.animation.open,{complete:function(){S.wrapper.css({overflow:O});S._activated=true;S._trigger(e)}});d(Q.animation.close,{complete:function(){S._animationClose()}});S._mousedownProxy=function(T){S._mousedown(T)};if(D.mobileOS.android){S._resizeProxy=function(T){setTimeout(function(){S._resize(T)},600)}}else{S._resizeProxy=function(T){S._resize(T)}}if(Q.toggleTarget){u(Q.toggleTarget).on(Q.toggleEvent+x,u.proxy(S.toggle,S))}},events:[H,e,J,E],options:{name:"Popup",toggleEvent:"click",origin:r+" "+o,position:w+" "+o,anchor:F,appendTo:null,collision:"flip fit",viewport:window,copyAnchorStyles:true,autosize:false,modal:false,adjustSize:{width:0,height:0},animation:{open:{effects:"slideIn:down",transition:true,duration:200},close:{duration:100,hide:true}}},_animationClose:function(){var Q=this;var P=Q.wrapper.data(i);Q.wrapper.hide();if(P){Q.wrapper.css(P)}if(Q.options.anchor!=F){Q._hideDirClass()}Q._closing=false;Q._trigger(E)},destroy:function(){var S=this,P=S.options,Q=S.element.off(x),R;b.fn.destroy.call(S);if(P.toggleTarget){u(P.toggleTarget).off(x)}if(!P.modal){N.unbind(S.downEvent,S._mousedownProxy);S._toggleResize(false)}v.destroy(S.element.children());Q.removeData();if(P.appendTo[0]===document.body){R=Q.parent(".k-animation-container");if(R[0]){R.remove()}else{Q.remove()}}},open:function(X,W){var V=this,S={isFixed:!isNaN(parseInt(W,10)),x:X,y:W},U=V.element,Y=V.options,R,Q,T=u(Y.anchor),P=U[0]&&U.hasClass("km-widget");if(!V.visible()){if(Y.copyAnchorStyles){if(P&&t[0]=="font-size"){t.shift()}U.css(v.getComputedStyles(T[0],t))}if(U.data("animating")||V._trigger(H)){return}V._activated=false;if(!Y.modal){N.unbind(V.downEvent,V._mousedownProxy).bind(V.downEvent,V._mousedownProxy);V._toggleResize(false);V._toggleResize(true)}V.wrapper=Q=v.wrap(U,Y.autosize).css({overflow:I,display:"block",position:z});if(D.mobileOS.android){Q.css(L,"translatez(0)")}Q.css(C);if(u(Y.appendTo)[0]==document.body){Q.css(w,"-10000px")}V.flipped=V._position(S);R=V._openAnimation();if(Y.anchor!=F){V._showDirClass(R)}U.data(l,R.effects).kendoStop(true).kendoAnimate(R)}},_openAnimation:function(){var P=d(true,{},this.options.animation.open);P.effects=v.parseEffects(P.effects,this.flipped);return P},_hideDirClass:function(){var P=u(this.options.anchor);var R=((P.attr("class")||"").match(n)||["","down"])[1];var Q=p+"-"+R;P.removeClass(Q).children(c).removeClass(m).removeClass(Q);this.element.removeClass(p+"-"+v.directions[R].reverse)},_showDirClass:function(Q){var R=Q.effects.slideIn?Q.effects.slideIn.direction:"down";var P=p+"-"+R;u(this.options.anchor).addClass(P).children(c).addClass(m).addClass(P);this.element.addClass(p+"-"+v.directions[R].reverse)},position:function(){if(this.visible()){this.flipped=this._position()}},toggle:function(){var P=this;P[P.visible()?J:H]()},visible:function(){return this.element.is(":"+O)},close:function(V){var S=this,Q=S.options,R,U,P,T;if(S.visible()){R=S.wrapper[0]?S.wrapper:v.wrap(S.element).hide();S._toggleResize(false);if(S._closing||S._trigger(J)){S._toggleResize(true);return}S.element.find(".k-popup").each(function(){var X=u(this),W=X.data("kendoPopup");if(W){W.close(V)}});N.unbind(S.downEvent,S._mousedownProxy);if(V){U={hide:true,effects:{}}}else{U=d(true,{},Q.animation.close);P=S.element.data(l);T=U.effects;if(!T&&!v.size(T)&&P&&v.size(P)){U.effects=P;U.reverse=true}S._closing=true}S.element.kendoStop(true);R.css({overflow:I});S.element.kendoAnimate(U);if(V){S._animationClose()}}},_trigger:function(P){return this.trigger(P,{type:P})},_resize:function(Q){var P=this;if(D.resize.indexOf(Q.type)!==-1){clearTimeout(P._resizeTimeout);P._resizeTimeout=setTimeout(function(){P._position();P._resizeTimeout=null},50)}else{if(!P._hovered||P._activated&&P.element.hasClass("k-list-container")){P.close()}}},_toggleResize:function(P){var R=P?"on":"off";var Q=D.resize;if(!(D.mobileOS.ios||D.mobileOS.android)){Q+=" "+k}this._scrollableParents()[R](k,this._resizeProxy);j[R](Q,this._resizeProxy)},_mousedown:function(U){var T=this,Q=T.element[0],X=T.options,S=u(X.anchor)[0],W=X.toggleTarget,V=v.eventTarget(U),R=u(V).closest(".k-popup"),P=R.parent().parent(".km-shim").length;R=R[0];if(!P&&R&&R!==T.element[0]){return}if(u(U.target).closest("a").data("rel")==="popover"){return}if(!s(Q,V)&&!s(S,V)&&!(W&&s(u(W)[0],V))){T.close()}},_fit:function(P,S,Q){var R=0;if(P+S>Q){R=Q-(P+S)}if(P<0){R=-P}return R},_flip:function(V,U,R,Q,T,P,W){var S=0;W=W||U;if(P!==T&&P!==q&&T!==q){if(V+W>Q){S+=-(R+U)}if(V+S<0){S+=R+U}}return S},_scrollableParents:function(){return u(this.options.anchor).parentsUntil("body").filter(function(P,Q){return v.isScrollable(Q)})},_position:function(aa){var ag=this,S=ag.element,ad=ag.wrapper,X=ag.options,ar=u(X.viewport),al=D.zoomLevel(),at=!!(ar[0]==window&&window.innerWidth&&al<=1.02),af=u(X.anchor),Q=X.origin.toLowerCase().split(" "),ah=X.position.toLowerCase().split(" "),Y=ag.collisions,R,au,T,ak=10002,aj=0,W=document.documentElement,V,aq,ao,U;if(X.viewport===window){aq={top:window.pageYOffset||document.documentElement.scrollTop||0,left:window.pageXOffset||document.documentElement.scrollLeft||0}}else{aq=ar.offset()}if(at){ao=window.innerWidth;U=window.innerHeight}else{ao=ar.width();U=ar.height()}if(at&&W.scrollHeight-W.clientHeight>0){ao-=v.support.scrollbar()}R=af.parents().filter(ad.siblings());if(R[0]){T=Math.max(Number(R.css("zIndex")),0);if(T){ak=T+10}else{au=af.parentsUntil(R);for(V=au.length;aj<V;aj++){T=Number(u(au[aj]).css("zIndex"));if(T&&ak<T){ak=T+10}}}}ad.css("zIndex",ak);if(aa&&aa.isFixed){ad.css({left:aa.x,top:aa.y})}else{ad.css(ag._align(Q,ah))}var ae=g(ad,C,af[0]===ad.offsetParent()[0]),ac=g(ad),ap=af.offsetParent().parent(".k-animation-container,.k-popup,.k-group");if(ap.length){ae=g(ad,C,true);ac=g(ad)}ac.top-=aq.top;ac.left-=aq.left;if(!ag.wrapper.data(i)){ad.data(i,d({},ae))}var ab=d({},ac),P=d({},ae),Z=X.adjustSize;if(Y[0]==="fit"){P.top+=ag._fit(ab.top,K(ad)+Z.height,U/al)}if(Y[1]==="fit"){P.left+=ag._fit(ab.left,G(ad)+Z.width,ao/al)}var an=d({},P);var ai=K(S);var am=K(ad);if(!ad.height()&&ai){am=am+ai}if(Y[0]==="flip"){P.top+=ag._flip(ab.top,ai,K(af),U/al,Q[0],ah[0],am)}if(Y[1]==="flip"){P.left+=ag._flip(ab.left,G(S),G(af),ao/al,Q[1],ah[1],G(ad))}S.css(C,z);ad.css(P);return P.left!=an.left||P.top!=an.top},_align:function(ag,ah){var V=this,R=V.wrapper,U=u(V.options.anchor),W=ag[0],af=ag[1],Z=ah[0],Q=ah[1],aa=g(U),T=u(V.options.appendTo),ac,ab=G(R),Y=K(R),P=G(U),ae=K(U),X=aa.top,S=aa.left,ad=Math.round;if(T[0]!=document.body){ac=g(T);X-=ac.top;S-=ac.left}if(W===r){X+=ae}if(W===q){X+=ad(ae/2)}if(Z===r){X-=Y}if(Z===q){X-=ad(Y/2)}if(af===M){S+=P}if(af===q){S+=ad(P/2)}if(Q===M){S-=ab}if(Q===q){S-=ad(ab/2)}return{top:X,left:S}}});B.plugin(h)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("drawing/surface-tooltip",["kendo.popup","drawing/kendo-drawing"],a)}(function(){(function(e){var b=".kendo";var i=window.kendo;var c=i.deepExtend;var k=i.drawing.util;var d=k.defined;var f=k.limitValue;var g=k.eventCoordinates;var n=i._outerWidth;var l=i._outerHeight;var h=e.proxy;var j='<div class="k-tooltip"><div class="k-tooltip-content"></div></div>';var a='<div class="k-tooltip-button"><a href="\\#" class="k-icon k-i-close">close</a></div>';var m=i.Class.extend({init:function(o,p){this.element=e(j);this.content=this.element.children(".k-tooltip-content");p=p||{};this.options=c({},this.options,this._tooltipOptions(p));this.popupOptions={appendTo:p.appendTo,animation:p.animation,copyAnchorStyles:false,collision:"fit fit"};this._openPopupHandler=e.proxy(this._openPopup,this);this.surface=o;this._bindEvents()},options:{position:"top",showOn:"mouseenter",offset:7,autoHide:true,hideDelay:0,showAfter:100},_bindEvents:function(){this._showHandler=h(this._showEvent,this);this._surfaceLeaveHandler=h(this._surfaceLeave,this);this._mouseleaveHandler=h(this._mouseleave,this);this._mousemoveHandler=h(this._mousemove,this);this.surface.bind("click",this._showHandler);this.surface.bind("mouseenter",this._showHandler);this.surface.bind("mouseleave",this._mouseleaveHandler);this.surface.bind("mousemove",this._mousemoveHandler);this.surface.element.on("mouseleave"+b,this._surfaceLeaveHandler);this.element.on("click"+b,".k-tooltip-button",h(this._hideClick,this))},getPopup:function(){if(!this.popup){this.popup=new i.ui.Popup(this.element,this.popupOptions)}return this.popup},destroy:function(){var o=this.popup;this.surface.unbind("click",this._showHandler);this.surface.unbind("mouseenter",this._showHandler);this.surface.unbind("mouseleave",this._mouseleaveHandler);this.surface.unbind("mousemove",this._mousemoveHandler);this.surface.element.off("mouseleave"+b,this._surfaceLeaveHandler);this.element.off("click"+b);if(o){o.destroy();delete this.popup}delete this.popupOptions;clearTimeout(this._timeout);delete this.element;delete this.content;delete this.surface},_tooltipOptions:function(o){o=o||{};return{position:o.position,showOn:o.showOn,offset:o.offset,autoHide:o.autoHide,width:o.width,height:o.height,content:o.content,shared:o.shared,hideDelay:o.hideDelay,showAfter:o.showAfter}},_tooltipShape:function(o){while(o&&!o.options.tooltip){o=o.parent}return o},_updateContent:function(r,o,p){var q=p.content;if(i.isFunction(q)){q=q({element:o,target:r})}if(q){this.content.html(q);return true}},_position:function(w,D,B,o){var u=D.position;var x=D.offset||0;var q=this.surface;var t=q._instance._elementOffset();var C=q.getSize();var r=q._instance._offset;var A=w.bbox();var p=B.width;var z=B.height;var s=0,y=0;A.origin.translate(t.left,t.top);if(r){A.origin.translate(-r.x,-r.y)}if(u=="cursor"&&o){var v=g(o);s=v.x-p/2;y=v.y-z-x}else{if(u=="left"){s=A.origin.x-p-x;y=A.center().y-z/2}else{if(u=="right"){s=A.bottomRight().x+x;y=A.center().y-z/2}else{if(u=="bottom"){s=A.center().x-p/2;y=A.bottomRight().y+x}else{s=A.center().x-p/2;y=A.origin.y-z-x}}}}return{left:f(s,t.left,t.left+C.width),top:f(y,t.top,t.top+C.height)}},show:function(o,p){this._show(o,o,c({},this.options,this._tooltipOptions(o.options.tooltip),p))},hide:function(){var o=this.popup;var p=this._current;delete this._current;clearTimeout(this._showTimeout);if(o&&o.visible()&&p&&!this.surface.trigger("tooltipClose",{element:p.shape,target:p.target,popup:o})){o.close()}},_hideClick:function(o){o.preventDefault();this.hide()},_show:function(v,q,s,t,r){var u=this._current;clearTimeout(this._timeout);if(u&&(u.shape===q&&s.shared||u.target===v)){return}clearTimeout(this._showTimeout);var p=this.getPopup();if(!this.surface.trigger("tooltipOpen",{element:q,target:v,popup:p})&&this._updateContent(v,q,s)){this._autoHide(s);var o=this._measure(s);if(p.visible()){p.close(true)}this._current={options:s,elementSize:o,shape:q,target:v,position:this._position(s.shared?q:v,s,o,t)};if(r){this._showTimeout=setTimeout(this._openPopupHandler,s.showAfter||0)}else{this._openPopup()}}},_openPopup:function(){var p=this._current;var o=p.position;this.getPopup().open(o.left,o.top)},_autoHide:function(o){if(o.autoHide&&this._closeButton){this.element.removeClass("k-tooltip-closable");this._closeButton.remove();delete this._closeButton}if(!o.autoHide&&!this._closeButton){this.element.addClass("k-tooltip-closable");this._closeButton=e(a).prependTo(this.element)}},_showEvent:function(q){var o=this._tooltipShape(q.element);if(o){var p=c({},this.options,this._tooltipOptions(o.options.tooltip));if(p&&p.showOn==q.type){this._show(q.element,o,p,q.originalEvent,true)}}},_measure:function(q){var p=this.getPopup();var r,o;this.element.css({width:"auto",height:"auto"});var s=p.visible();if(!s){p.wrapper.show()}this.element.css({width:d(q.width)?q.width:"auto",height:d(q.height)?q.height:"auto"});r=n(this.element);o=l(this.element);if(!s){p.wrapper.hide()}return{width:r,height:o}},_mouseleave:function(q){if(this.popup&&!this._popupRelatedTarget(q.originalEvent)){var o=this;var p=o._current;if(p&&p.options.autoHide){o._timeout=setTimeout(function(){clearTimeout(o._showTimeout);o.hide()},p.options.hideDelay||0)}}},_mousemove:function(r){var q=this._current;if(q&&r.element){var p=q.options;if(p.position=="cursor"){var o=this._position(r.element,p,q.elementSize,r.originalEvent);q.position=o;this.getPopup().wrapper.css({left:o.left,top:o.top})}}},_surfaceLeave:function(o){if(this.popup&&!this._popupRelatedTarget(o)){clearTimeout(this._showTimeout);this.hide()}},_popupRelatedTarget:function(o){return o.relatedTarget&&e(o.relatedTarget).closest(this.popup.wrapper).length}});i.drawing.SurfaceTooltip=m}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("drawing/surface",["drawing/kendo-drawing","drawing/surface-tooltip"],a)}(function(){(function(c){var e=window.kendo;var h=e.drawing;var i=h.Surface;var g=e.ui.Widget;var b=e.deepExtend;var f=c.proxy;e.support.svg=i.support.svg;e.support.canvas=i.support.canvas;var d=g.extend({init:function(k,j){this.options=b({},this.options,j);g.fn.init.call(this,k,this.options);this._instance=i.create(this.element[0],j);if(this._instance.translate){this.translate=a}this._triggerInstanceHandler=f(this._triggerInstanceEvent,this);this._bindHandler("click");this._bindHandler("mouseenter");this._bindHandler("mouseleave");this._bindHandler("mousemove");this._enableTracking()},options:{name:"Surface",tooltip:{}},events:["click","mouseenter","mouseleave","mousemove","resize","tooltipOpen","tooltipClose"],_triggerInstanceEvent:function(j){this.trigger(j.type,j)},_bindHandler:function(j){this._instance.bind(j,this._triggerInstanceHandler)},draw:function(j){this._instance.draw(j)},clear:function(){if(this._instance){this._instance.clear()}this.hideTooltip()},destroy:function(){if(this._instance){this._instance.destroy();delete this._instance}if(this._tooltip){this._tooltip.destroy();delete this._tooltip}g.fn.destroy.call(this)},exportVisual:function(){return this._instance.exportVisual()},eventTarget:function(j){return this._instance.eventTarget(j)},showTooltip:function(j,k){if(this._tooltip){this._tooltip.show(j,k)}},hideTooltip:function(){if(this._tooltip){this._tooltip.hide()}},suspendTracking:function(){this._instance.suspendTracking();this.hideTooltip()},resumeTracking:function(){this._instance.resumeTracking()},getSize:function(){return{width:this.element.width(),height:this.element.height()}},setSize:function(j){this.element.css({width:j.width,height:j.height});this._size=j;this._instance.currentSize(j);this._resize()},_resize:function(){this._instance.currentSize(this._size);this._instance._resize()},_enableTracking:function(){if(e.ui.Popup){this._tooltip=new h.SurfaceTooltip(this,this.options.tooltip||{})}}});e.ui.plugin(d);d.create=function(k,j){return new d(k,j)};e.drawing.Surface=d;function a(j){this._instance.translate(j)}}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("drawing/html",["drawing/kendo-drawing"],a)}(function(){(function(c){var d=window.kendo;var a=d.drawing;var b=a.drawDOM;a.drawDOM=function(f,e){return b(c(f)[0],e)};a.drawDOM.drawText=b.drawText;a.drawDOM.getFontFaces=b.getFontFaces}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.drawing",["drawing/util","drawing/kendo-drawing","drawing/surface-tooltip","drawing/surface","drawing/html"],a)}(function(){var a={id:"drawing",name:"Drawing API",category:"framework",description:"The Kendo UI low-level drawing API",depends:["core","color","popup"]}},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.validator",["kendo.core"],a)}(function(){var a={id:"validator",name:"Validator",category:"web",description:"The Validator offers an easy way to do a client-side form validation.",depends:["core"]};(function(i,j){var u=window.kendo,g=u.ui.Widget,z=".kendoValidator",A="k-invalid-msg",v=new RegExp(A,"i"),B="k-invalid",C="k-valid",p=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/i,F=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,f=":input:not(:button,[type=submit],[type=reset],[disabled],[readonly])",d=":checkbox:not([disabled],[readonly])",D="[type=number],[type=range]",c="blur",l="name",o="form",b="novalidate",h="validate",r="change",E="validateInput",x=i.proxy,w=function(H,G){if(typeof G==="string"){G=new RegExp("^(?:"+G+")$")}return G.test(H)},e=function(H,G,J){var I=H.val();if(H.filter(G).length&&I!==""){return w(I,J)}return true},k=function(G,H){if(G.length){return G[0].attributes[H]!=null}return false};if(!u.ui.validator){u.ui.validator={rules:{},messages:{}}}function y(I){var H=u.ui.validator.ruleResolvers||{},J={},G;for(G in H){i.extend(true,J,H[G].resolve(I))}return J}function t(G){return G.replace(/&amp/g,"&amp;").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">")}function q(G){G=(G+"").split(".");if(G.length>1){return G[1].length}return 0}function s(G){if(i.parseHTML){return i(i.parseHTML(G))}return i(G)}function n(L,M){var K=i(),I,H;for(var G=0,J=L.length;G<J;G++){I=L[G];if(v.test(I.className)){H=I.getAttribute(u.attr("for"));if(H===M){K=K.add(I)}}}return K}var m=g.extend({init:function(I,H){var K=this,G=y(I),J="["+u.attr("validate")+"!=false]";H=H||{};H.rules=i.extend({},u.ui.validator.rules,G.rules,H.rules);H.messages=i.extend({},u.ui.validator.messages,G.messages,H.messages);g.fn.init.call(K,I,H);K._errorTemplate=u.template(K.options.errorTemplate);if(K.element.is(o)){K.element.attr(b,b)}K._inputSelector=f+J;K._checkboxSelector=d+J;K._errors={};K._attachEvents();K._isValidated=false},events:[h,r,E],options:{name:"Validator",errorTemplate:'<span class="k-widget k-tooltip k-tooltip-validation"><span class="k-icon k-i-warning"> </span> #=message#</span>',messages:{required:"{0} is required",pattern:"{0} is not valid",min:"{0} should be greater than or equal to {1}",max:"{0} should be smaller than or equal to {1}",step:"{0} is not valid",email:"{0} is not valid email",url:"{0} is not valid URL",date:"{0} is not valid date",dateCompare:"End date should be greater than or equal to the start date"},rules:{required:function(G){var I=G.filter("[type=checkbox]").length&&!G.is(":checked"),H=G.val();return !(k(G,"required")&&(!H||H===""||H.length===0||I))},pattern:function(G){if(G.filter("[type=text],[type=email],[type=url],[type=tel],[type=search],[type=password]").filter("[pattern]").length&&G.val()!==""){return w(G.val(),G.attr("pattern"))}return true},min:function(G){if(G.filter(D+",["+u.attr("type")+"=number]").filter("[min]").length&&G.val()!==""){var H=parseFloat(G.attr("min"))||0,I=u.parseFloat(G.val());return H<=I}return true},max:function(H){if(H.filter(D+",["+u.attr("type")+"=number]").filter("[max]").length&&H.val()!==""){var G=parseFloat(H.attr("max"))||0,I=u.parseFloat(H.val());return G>=I}return true},step:function(I){if(I.filter(D+",["+u.attr("type")+"=number]").filter("[step]").length&&I.val()!==""){var J=parseFloat(I.attr("min"))||0,K=parseFloat(I.attr("step"))||1,L=parseFloat(I.val()),G=q(K),H;if(G){H=Math.pow(10,G);return Math.floor((L-J)*H)%(K*H)/Math.pow(100,G)===0}return(L-J)%K===0}return true},email:function(G){return e(G,"[type=email],["+u.attr("type")+"=email]",p)},url:function(G){return e(G,"[type=url],["+u.attr("type")+"=url]",F)},date:function(G){if(G.filter("[type^=date],["+u.attr("type")+"=date]").length&&G.val()!==""){return u.parseDate(G.val(),G.attr(u.attr("format")))!==null}return true}},validateOnBlur:true},destroy:function(){g.fn.destroy.call(this);this.element.off(z)},value:function(){if(!this._isValidated){return false}return this.errors().length===0},_submit:function(G){if(!this.validate()){G.stopPropagation();G.stopImmediatePropagation();G.preventDefault();return false}return true},_checkElement:function(G){var H=this.value();this.validateInput(G);if(this.value()!==H){this.trigger(r)}},_attachEvents:function(){var G=this;if(G.element.is(o)){G.element.on("submit"+z,x(G._submit,G))}if(G.options.validateOnBlur){if(!G.element.is(f)){G.element.on(c+z,G._inputSelector,function(){G._checkElement(i(this))});G.element.on("click"+z,G._checkboxSelector,function(){G._checkElement(i(this))})}else{G.element.on(c+z,function(){G._checkElement(G.element)});if(G.element.is(d)){G.element.on("click"+z,function(){G._checkElement(G.element)})}}}},validate:function(){var I;var H;var G=false;var J;var L=this.value();this._errors={};if(!this.element.is(f)){var K=false;I=this.element.find(this._inputSelector);for(H=0,J=I.length;H<J;H++){if(!this.validateInput(I.eq(H))){K=true}}G=!K}else{G=this.validateInput(this.element)}this.trigger(h,{valid:G});if(L!==G){this.trigger(r)}return G},validateInput:function(O){O=i(O);this._isValidated=true;var J=this,P=J._errorTemplate,R=J._checkValidity(O),G=R.valid,K="."+A,Q=O.attr(l)||"",L=J._findMessageContainer(Q).add(O.next(K).filter(function(){var S=i(this);if(S.filter("["+u.attr("for")+"]").length){return S.attr(u.attr("for"))===Q}return true})).hide(),M,I=!O.attr("aria-invalid");O.removeAttr("aria-invalid");if(!G){M=J._extractMessage(O,R.key);J._errors[Q]=M;var H=s(P({message:t(M)}));var N=L.attr("id");J._decorateMessageContainer(H,Q);if(N){H.attr("id",N)}if(!L.replaceWith(H).length){H.insertAfter(O)}H.show();O.attr("aria-invalid",true)}else{delete J._errors[Q]}if(I!==G){this.trigger(E,{valid:G,input:O})}O.toggleClass(B,!G);O.toggleClass(C,G);return G},hideMessages:function(){var I=this,H="."+A,G=I.element;if(!G.is(f)){G.find(H).hide()}else{G.next(H).hide()}},_findMessageContainer:function(L){var H=u.ui.validator.messageLocators,I,K=i();for(var G=0,J=this.element.length;G<J;G++){K=K.add(n(this.element[G].getElementsByTagName("*"),L))}for(I in H){K=K.add(H[I].locate(this.element,L))}return K},_decorateMessageContainer:function(H,J){var G=u.ui.validator.messageLocators,I;H.addClass(A).attr(u.attr("for"),J||"");for(I in G){G[I].decorate(H,J)}H.attr("role","alert")},_extractMessage:function(H,G){var J=this,I=J.options.messages[G],K=H.attr(l);I=u.isFunction(I)?I(H):I;return u.format(H.attr(u.attr(G+"-msg"))||H.attr("validationMessage")||H.attr("title")||I||"",K,H.attr(G)||H.attr(u.attr(G)))},_checkValidity:function(G){var I=this.options.rules,H;for(H in I){if(!I[H].call(this,G)){return{valid:false,key:H}}}return{valid:true}},errors:function(){var H=[],I=this._errors,G;for(G in I){H.push(I[G])}return H}});u.ui.plugin(m)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.userevents",["kendo.core"],a)}(function(){var a={id:"userevents",name:"User Events",category:"framework",depends:["core"],hidden:true};(function(i,m){var u=window.kendo,p=u.support,A=u.Class,q=u.Observable,c=i.now,E=i.extend,d=p.mobileOS,v=d&&d.android,t=800,w=p.browser.msie?5:0,j="press",D="hold",e="select",B="start",H="move",l="end",g="cancel",F="tap",o="release",r="gesturestart",b="gesturechange",h="gestureend",C="gesturetap";var G={api:0,touch:0,mouse:9,pointer:9};var k=!p.touch||p.mouseAndTouchPresent;function z(P,O){var L=P.x.location,N=P.y.location,K=O.x.location,M=O.y.location,J=L-K,I=N-M;return{center:{x:(L+K)/2,y:(N+M)/2},distance:Math.sqrt(J*J+I*I)}}function y(O){var N=[],J=O.originalEvent,M=O.currentTarget,I=0,L,K,P;if(O.api){N.push({id:2,event:O,target:O.target,currentTarget:O.target,location:O,type:"api"})}else{if(O.type.match(/touch/)){K=J?J.changedTouches:[];for(L=K.length;I<L;I++){P=K[I];N.push({location:P,event:O,target:P.target,currentTarget:M,id:P.identifier,type:"touch"})}}else{if(p.pointers||p.msPointers){N.push({location:J,event:O,target:O.target,currentTarget:M,id:J.pointerId,type:"pointer"})}else{N.push({id:1,event:O,target:O.target,currentTarget:M,location:O,type:"mouse"})}}}return N}var n=A.extend({init:function(J,I){var K=this;K.axis=J;K._updateLocationData(I);K.startLocation=K.location;K.velocity=K.delta=0;K.timeStamp=c()},move:function(I){var K=this,M=I["page"+K.axis],J=c(),L=J-K.timeStamp||1;if(!M&&v){return}K.delta=M-K.location;K._updateLocationData(I);K.initialDelta=M-K.startLocation;K.velocity=K.delta/L;K.timeStamp=J},_updateLocationData:function(I){var K=this,J=K.axis;K.location=I["page"+J];K.client=I["client"+J];K.screen=I["screen"+J]}});var s=A.extend({init:function(J,K,I){E(this,{x:new n("X",I.location),y:new n("Y",I.location),type:I.type,useClickAsTap:J.useClickAsTap,threshold:J.threshold||G[I.type],userEvents:J,target:K,currentTarget:I.currentTarget,initialTouch:I.target,id:I.id,pressEvent:I,_moved:false,_finished:false})},press:function(){this._holdTimeout=setTimeout(i.proxy(this,"_hold"),this.userEvents.minHold);this._trigger(j,this.pressEvent)},_hold:function(){this._trigger(D,this.pressEvent)},move:function(I){var J=this;if(J._finished){return}J.x.move(I.location);J.y.move(I.location);if(!J._moved){if(J._withinIgnoreThreshold()){return}if(!f.current||f.current===J.userEvents){J._start(I)}else{return J.dispose()}}if(!J._finished){J._trigger(H,I)}},end:function(I){this.endTime=c();if(this._finished){return}this._finished=true;this._trigger(o,I);if(this._moved){this._trigger(l,I)}else{if(!this.useClickAsTap){this._trigger(F,I)}}clearTimeout(this._holdTimeout);this.dispose()},dispose:function(){var I=this.userEvents,J=I.touches;this._finished=true;this.pressEvent=null;clearTimeout(this._holdTimeout);J.splice(i.inArray(this,J),1)},skip:function(){this.dispose()},cancel:function(){this.dispose()},isMoved:function(){return this._moved},_start:function(I){clearTimeout(this._holdTimeout);this.startTime=c();this._moved=true;this._trigger(B,I)},_trigger:function(J,K){var L=this,I=K.event,M={touch:L,x:L.x,y:L.y,target:L.target,event:I};if(L.userEvents.notify(J,M)){I.preventDefault()}},_withinIgnoreThreshold:function(){var J=this.x.initialDelta,I=this.y.initialDelta;return Math.sqrt(J*J+I*I)<=this.threshold}});function x(L){var K=u.eventMap.up.split(" "),I=0,J=K.length;for(;I<J;I++){L(K[I])}}var f=q.extend({init:function(J,I){var M=this,L,K=u.guid();I=I||{};L=M.filter=I.filter;M.threshold=I.threshold||w;M.minHold=I.minHold||t;M.touches=[];M._maxTouches=I.multiTouch?2:1;M.allowSelection=I.allowSelection;M.captureUpIfMoved=I.captureUpIfMoved;M.useClickAsTap=!I.fastTap&&!p.delayedClick();M.eventNS=K;J=i(J).handler(M);q.fn.init.call(M);E(M,{element:J,surface:I.global&&k?i(J[0].ownerDocument.documentElement):i(I.surface||J),stopPropagation:I.stopPropagation,pressed:false});M.surface.handler(M).on(u.applyEventMap("move",K),"_move").on(u.applyEventMap("up cancel",K),"_end");J.on(u.applyEventMap("down",K),L,"_start");if(M.useClickAsTap){J.on(u.applyEventMap("click",K),L,"_click")}if(p.pointers||p.msPointers){if(p.browser.version<11){J.css("-ms-touch-action","pinch-zoom double-tap-zoom")}else{J.css("touch-action",I.touchAction||"none")}}if(I.preventDragEvent){J.on(u.applyEventMap("dragstart",K),u.preventDefault)}J.on(u.applyEventMap("mousedown",K),L,{root:J},"_select");if(M.captureUpIfMoved&&p.eventCapture){var O=M.surface[0],N=i.proxy(M.preventIfMoving,M);x(function(P){O.addEventListener(P,N,true)})}M.bind([j,D,F,B,H,l,o,g,r,b,h,C,e],I)},preventIfMoving:function(I){if(this._isMoved()){I.preventDefault()}},destroy:function(){var I=this;if(I._destroyed){return}I._destroyed=true;if(I.captureUpIfMoved&&p.eventCapture){var J=I.surface[0];x(function(K){J.removeEventListener(K,I.preventIfMoving)})}I.element.kendoDestroy(I.eventNS);I.surface.kendoDestroy(I.eventNS);I.element.removeData("handler");I.surface.removeData("handler");I._disposeAll();I.unbind();delete I.surface;delete I.element;delete I.currentTarget},capture:function(){f.current=this},cancel:function(){this._disposeAll();this.trigger(g)},notify:function(I,K){var J=this,L=J.touches;if(this._isMultiTouch()){switch(I){case H:I=b;break;case l:I=h;break;case F:I=C;break}E(K,{touches:L},z(L[0],L[1]))}return this.trigger(I,E(K,{type:I}))},press:function(I,K,J){this._apiCall("_start",I,K,J)},move:function(I,J){this._apiCall("_move",I,J)},end:function(I,J){this._apiCall("_end",I,J)},_isMultiTouch:function(){return this.touches.length>1},_maxTouchesReached:function(){return this.touches.length>=this._maxTouches},_disposeAll:function(){var I=this.touches;while(I.length>0){I.pop().dispose()}},_isMoved:function(){return i.grep(this.touches,function(I){return I.isMoved()}).length},_select:function(I){if(!this.allowSelection||this.trigger(e,{event:I})){I.preventDefault()}},_start:function(O){var N=this,Q=0,I=N.filter,P,M=y(O),J=M.length,L,K=O.which;if(K&&K>1||N._maxTouchesReached()){return}f.current=null;N.currentTarget=O.currentTarget;if(N.stopPropagation){O.stopPropagation()}for(;Q<J;Q++){if(N._maxTouchesReached()){break}L=M[Q];if(I){P=i(L.currentTarget)}else{P=N.element}if(!P.length){continue}L=new s(N,P,L);N.touches.push(L);L.press();if(N._isMultiTouch()){N.notify("gesturestart",{})}}},_move:function(I){this._eachTouch("move",I)},_end:function(I){this._eachTouch("end",I)},_click:function(J){var I={touch:{initialTouch:J.target,target:i(J.currentTarget),endTime:c(),x:{location:J.pageX,client:J.clientX},y:{location:J.pageY,client:J.clientY}},x:J.pageX,y:J.pageY,target:i(J.currentTarget),event:J,type:"tap"};if(this.trigger("tap",I)){J.preventDefault()}},_eachTouch:function(Q,O){var N=this,J={},M=y(O),K=N.touches,R,L,P,I;for(R=0;R<K.length;R++){L=K[R];J[L.id]=L}for(R=0;R<M.length;R++){P=M[R];I=J[P.id];if(I){I[Q](P)}}},_apiCall:function(J,I,L,K){this[J]({api:true,pageX:I,pageY:L,clientX:I,clientY:L,target:i(K||this.element)[0],stopPropagation:i.noop,preventDefault:i.noop})}});f.defaultThreshold=function(I){w=I};f.minHold=function(I){t=I};u.getTouches=y;u.touchDelta=z;u.UserEvents=f}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.draganddrop",["kendo.core","kendo.userevents"],a)}(function(){var a={id:"draganddrop",name:"Drag & drop",category:"framework",description:"Drag & drop functionality for any DOM element.",depends:["core","userevents"]};(function(D,q){var E=window.kendo,J=E.support,j=window.document,R=D(window),b=E.Class,k=E.ui.Widget,i=E.Observable,O=E.UserEvents,Q=D.proxy,p=D.extend,r=E.getOffset,s={},Y={},f={},y,I=E.elementUnderCursor,V="keyup",C="change",L="dragstart",S="hold",w="drag",H="dragend",c="dragcancel",G="hintDestroyed",n="dragenter",v="dragleave",M="drop";function B(Z,ab){try{return D.contains(Z,ab)||Z==ab}catch(aa){return false}}function A(Z,aa){return parseInt(Z.css(aa),10)||0}function P(aa,Z){return Math.min(Math.max(aa,Z.min),Z.max)}function h(ab,af){var ae=r(ab),ah=E._outerWidth,ag=E._outerHeight,ad=ae.left+A(ab,"borderLeftWidth")+A(ab,"paddingLeft"),ac=ae.top+A(ab,"borderTopWidth")+A(ab,"paddingTop"),aa=ad+ab.width()-ah(af,true),Z=ac+ab.height()-ag(af,true);return{x:{min:ad,max:aa},y:{min:ac,max:Z}}}function u(ag,aa,ab){var af,ad,ac=0,ae=aa&&aa.length,Z=ab&&ab.length;while(ag&&ag.parentNode){for(ac=0;ac<ae;ac++){af=aa[ac];if(af.element[0]===ag){return{target:af,targetElement:ag}}}for(ac=0;ac<Z;ac++){ad=ab[ac];if(D.contains(ad.element[0],ag)&&J.matchesSelector.call(ag,ad.options.filter)){return{target:ad,targetElement:ag}}}ag=ag.parentNode}return q}var U=i.extend({init:function(aa,Z){var ab=this,ac=aa[0];ab.capture=false;if(ac.addEventListener){D.each(E.eventMap.down.split(" "),function(){ac.addEventListener(this,Q(ab._press,ab),true)});D.each(E.eventMap.up.split(" "),function(){ac.addEventListener(this,Q(ab._release,ab),true)})}else{D.each(E.eventMap.down.split(" "),function(){ac.attachEvent(this,Q(ab._press,ab))});D.each(E.eventMap.up.split(" "),function(){ac.attachEvent(this,Q(ab._release,ab))})}i.fn.init.call(ab);ab.bind(["press","release"],Z||{})},captureNext:function(){this.capture=true},cancelCapture:function(){this.capture=false},_press:function(aa){var Z=this;Z.trigger("press");if(Z.capture){aa.preventDefault()}},_release:function(aa){var Z=this;Z.trigger("release");if(Z.capture){aa.preventDefault();Z.cancelCapture()}}});var x=i.extend({init:function(Z){var aa=this;i.fn.init.call(aa);aa.forcedEnabled=false;D.extend(aa,Z);aa.scale=1;if(aa.horizontal){aa.measure="offsetWidth";aa.scrollSize="scrollWidth";aa.axis="x"}else{aa.measure="offsetHeight";aa.scrollSize="scrollHeight";aa.axis="y"}},makeVirtual:function(){D.extend(this,{virtual:true,forcedEnabled:true,_virtualMin:0,_virtualMax:0})},virtualSize:function(aa,Z){if(this._virtualMin!==aa||this._virtualMax!==Z){this._virtualMin=aa;this._virtualMax=Z;this.update()}},outOfBounds:function(Z){return Z>this.max||Z<this.min},forceEnabled:function(){this.forcedEnabled=true},getSize:function(){return this.container[0][this.measure]},getTotal:function(){return this.element[0][this.scrollSize]},rescale:function(Z){this.scale=Z},update:function(Z){var ad=this,ac=ad.virtual?ad._virtualMax:ad.getTotal(),ab=ac*ad.scale,aa=ad.getSize();if(ac===0&&!ad.forcedEnabled){return}ad.max=ad.virtual?-ad._virtualMin:0;ad.size=aa;ad.total=ab;ad.min=Math.min(ad.max,aa-ab);ad.minScale=aa/ac;ad.centerOffset=(ab-aa)/2;ad.enabled=ad.forcedEnabled||ab>aa;if(!Z){ad.trigger(C,ad)}}});var N=i.extend({init:function(Z){var aa=this;i.fn.init.call(aa);aa.x=new x(p({horizontal:true},Z));aa.y=new x(p({horizontal:false},Z));aa.container=Z.container;aa.forcedMinScale=Z.minScale;aa.maxScale=Z.maxScale||100;aa.bind(C,Z)},rescale:function(Z){this.x.rescale(Z);this.y.rescale(Z);this.refresh()},centerCoordinates:function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},refresh:function(){var Z=this;Z.x.update();Z.y.update();Z.enabled=Z.x.enabled||Z.y.enabled;Z.minScale=Z.forcedMinScale||Math.min(Z.x.minScale,Z.y.minScale);Z.fitScale=Math.max(Z.x.minScale,Z.y.minScale);Z.trigger(C)}});var W=i.extend({init:function(Z){var aa=this;p(aa,Z);i.fn.init.call(aa)},outOfBounds:function(){return this.dimension.outOfBounds(this.movable[this.axis])},dragMove:function(ae){var ab=this,ad=ab.dimension,aa=ab.axis,ac=ab.movable,Z=ac[aa]+ae;if(!ad.enabled){return}if(Z<ad.min&&ae<0||Z>ad.max&&ae>0){ae*=ab.resistance}ac.translateAxis(aa,ae);ab.trigger(C,ab)}});var F=b.extend({init:function(aa){var ac=this,Z,ae,ab,ad;p(ac,{elastic:true},aa);ab=ac.elastic?0.5:0;ad=ac.movable;ac.x=Z=new W({axis:"x",dimension:ac.dimensions.x,resistance:ab,movable:ad});ac.y=ae=new W({axis:"y",dimension:ac.dimensions.y,resistance:ab,movable:ad});ac.userEvents.bind(["press","move","end","gesturestart","gesturechange"],{gesturestart:function(af){ac.gesture=af;ac.offset=ac.dimensions.container.offset()},press:function(af){if(D(af.event.target).closest("a").is("[data-navigate-on-press=true]")){af.sender.cancel()}},gesturechange:function(am){var ag=ac.gesture,aj=ag.center,ah=am.center,an=am.distance/ag.distance,ai=ac.dimensions.minScale,af=ac.dimensions.maxScale,ao;if(ad.scale<=ai&&an<1){an+=(1-an)*0.8}if(ad.scale*an>=af){an=af/ad.scale}var al=ad.x+ac.offset.left,ak=ad.y+ac.offset.top;ao={x:(al-aj.x)*an+ah.x-al,y:(ak-aj.y)*an+ah.y-ak};ad.scaleWith(an);Z.dragMove(ao.x);ae.dragMove(ao.y);ac.dimensions.rescale(ad.scale);ac.gesture=am;am.preventDefault()},move:function(af){if(af.event.target.tagName.match(/textarea|input/i)){return}if(Z.dimension.enabled||ae.dimension.enabled){Z.dragMove(af.x.delta);ae.dragMove(af.y.delta);af.preventDefault()}else{af.touch.skip()}},end:function(af){af.preventDefault()}})}});var K=J.transitions.prefix+"Transform",g;if(J.hasHW3D){g=function(Z,ab,aa){return"translate3d("+Z+"px,"+ab+"px,0) scale("+aa+")"}}else{g=function(Z,ab,aa){return"translate("+Z+"px,"+ab+"px) scale("+aa+")"}}var t=i.extend({init:function(Z){var aa=this;i.fn.init.call(aa);aa.element=D(Z);aa.element[0].style.webkitTransformOrigin="left top";aa.x=0;aa.y=0;aa.scale=1;aa._saveCoordinates(g(aa.x,aa.y,aa.scale))},translateAxis:function(Z,aa){this[Z]+=aa;this.refresh()},scaleTo:function(Z){this.scale=Z;this.refresh()},scaleWith:function(Z){this.scale*=Z;this.refresh()},translate:function(Z){this.x+=Z.x;this.y+=Z.y;this.refresh()},moveAxis:function(Z,aa){this[Z]=aa;this.refresh()},moveTo:function(Z){p(this,Z);this.refresh()},refresh:function(){var aa=this,Z=aa.x,ac=aa.y,ab;if(aa.round){Z=Math.round(Z);ac=Math.round(ac)}ab=g(Z,ac,aa.scale);if(ab!=aa.coordinates){if(E.support.browser.msie&&E.support.browser.version<10){aa.element[0].style.position="absolute";aa.element[0].style.left=aa.x+"px";aa.element[0].style.top=aa.y+"px"}else{aa.element[0].style[K]=ab}aa._saveCoordinates(ab);aa.trigger(C)}},_saveCoordinates:function(Z){this.coordinates=Z}});function z(ac,ab){var ad=ab.options.group,Z=ac[ad],aa;k.fn.destroy.call(ab);if(Z.length>1){for(aa=0;aa<Z.length;aa++){if(Z[aa]==ab){Z.splice(aa,1);break}}}else{Z.length=0;delete ac[ad]}}var l=k.extend({init:function(aa,Z){var ab=this;k.fn.init.call(ab,aa,Z);var ac=ab.options.group;if(!(ac in Y)){Y[ac]=[ab]}else{Y[ac].push(ab)}},events:[n,v,M],options:{name:"DropTarget",group:"default"},destroy:function(){z(Y,this)},_trigger:function(aa,ac){var ab=this,Z=s[ab.options.group];if(Z){return ab.trigger(aa,p({},ac.event,{draggable:Z,dropTarget:ac.dropTarget}))}},_over:function(Z){this._trigger(n,Z)},_out:function(Z){this._trigger(v,Z)},_drop:function(ab){var aa=this,Z=s[aa.options.group];if(Z){Z.dropped=!aa._trigger(M,ab)}}});l.destroyGroup=function(ab){var aa=Y[ab]||f[ab],Z;if(aa){for(Z=0;Z<aa.length;Z++){k.fn.destroy.call(aa[Z])}aa.length=0;delete Y[ab];delete f[ab]}};l._cache=Y;var e=l.extend({init:function(aa,Z){var ab=this;k.fn.init.call(ab,aa,Z);var ac=ab.options.group;if(!(ac in f)){f[ac]=[ab]}else{f[ac].push(ab)}},destroy:function(){z(f,this)},options:{name:"DropTargetArea",group:"default",filter:null}});var o=k.extend({init:function(aa,Z){var ab=this;k.fn.init.call(ab,aa,Z);ab._activated=false;ab.userEvents=new O(ab.element,{global:true,allowSelection:true,filter:ab.options.filter,threshold:ab.options.distance,start:Q(ab._start,ab),hold:Q(ab._hold,ab),move:Q(ab._drag,ab),end:Q(ab._end,ab),cancel:Q(ab._cancel,ab),select:Q(ab._select,ab)});ab._afterEndHandler=Q(ab._afterEnd,ab);ab._captureEscape=Q(ab._captureEscape,ab)},events:[S,L,w,H,c,G],options:{name:"Draggable",distance:E.support.touch?0:5,group:"default",cursorOffset:null,axis:null,container:null,filter:null,ignore:null,holdToDrag:false,autoScroll:false,dropped:false},cancelHold:function(){this._activated=false},_captureEscape:function(aa){var Z=this;if(aa.keyCode===E.keys.ESC){Z._trigger(c,{event:aa});Z.userEvents.cancel()}},_updateHint:function(ae){var ad=this,af,ab=ad.options,aa=ad.boundaries,ac=ab.axis,Z=ad.options.cursorOffset;if(Z){af={left:ae.x.location+Z.left,top:ae.y.location+Z.top}}else{ad.hintOffset.left+=ae.x.delta;ad.hintOffset.top+=ae.y.delta;af=D.extend({},ad.hintOffset)}if(aa){af.top=P(af.top,aa.y);af.left=P(af.left,aa.x)}if(ac==="x"){delete af.top}else{if(ac==="y"){delete af.left}}ad.hint.css(af)},_shouldIgnoreTarget:function(aa){var Z=this.options.ignore;return Z&&D(aa).is(Z)},_select:function(Z){if(!this._shouldIgnoreTarget(Z.event.target)){Z.preventDefault()}},_start:function(ac){var ab=this,aa=ab.options,Z=aa.container,ae=aa.hint;if(this._shouldIgnoreTarget(ac.touch.initialTouch)||aa.holdToDrag&&!ab._activated){ab.userEvents.cancel();return}ab.currentTarget=ac.target;ab.currentTargetOffset=r(ab.currentTarget);if(ae){if(ab.hint){ab.hint.stop(true,true).remove()}ab.hint=E.isFunction(ae)?D(ae.call(ab,ab.currentTarget)):ae;var ad=r(ab.currentTarget);ab.hintOffset=ad;ab.hint.css({position:"absolute",zIndex:20000,left:ad.left,top:ad.top}).appendTo(j.body);ab.angular("compile",function(){ab.hint.removeAttr("ng-repeat");var af=D(ac.target);while(!af.data("$$kendoScope")&&af.length){af=af.parent()}return{elements:ab.hint.get(),scopeFrom:af.data("$$kendoScope")}})}s[aa.group]=ab;ab.dropped=false;if(Z){ab.boundaries=h(Z,ab.hint)}D(j).on(V,ab._captureEscape);if(ab._trigger(L,ac)){ab.userEvents.cancel();ab._afterEnd()}ab.userEvents.capture()},_hold:function(Z){this.currentTarget=Z.target;if(this._trigger(S,Z)){this.userEvents.cancel()}else{this._activated=true}},_drag:function(ab){ab.preventDefault();var aa=this._elementUnderCursor(ab);if(this.options.autoScroll&&this._cursorElement!==aa){this._scrollableParent=m(aa);this._cursorElement=aa}this._lastEvent=ab;this._processMovement(ab,aa);if(this.options.autoScroll){if(this._scrollableParent[0]){var Z=d(ab.x.location,ab.y.location,X(this._scrollableParent));this._scrollCompenstation=D.extend({},this.hintOffset);this._scrollVelocity=Z;if(Z.y===0&&Z.x===0){clearInterval(this._scrollInterval);this._scrollInterval=null}else{if(!this._scrollInterval){this._scrollInterval=setInterval(D.proxy(this,"_autoScroll"),50)}}}}if(this.hint){this._updateHint(ab)}},_processMovement:function(aa,Z){this._withDropTarget(Z,function(ac,ab){if(!ac){if(y){y._trigger(v,p(aa,{dropTarget:D(y.targetElement)}));y=null}return}if(y){if(ab===y.targetElement){return}y._trigger(v,p(aa,{dropTarget:D(y.targetElement)}))}ac._trigger(n,p(aa,{dropTarget:D(ab)}));y=p(ac,{targetElement:ab})});this._trigger(w,p(aa,{dropTarget:y,elementUnderCursor:Z}))},_autoScroll:function(){var ah=this._scrollableParent[0],ac=this._scrollVelocity,ab=this._scrollCompenstation;if(!ah){return}var aa=this._elementUnderCursor(this._lastEvent);this._processMovement(this._lastEvent,aa);var ae,Z;var ai=ah===T()[0];if(ai){ae=j.body.scrollHeight>R.height();Z=j.body.scrollWidth>R.width()}else{ae=ah.offsetHeight<=ah.scrollHeight;Z=ah.offsetWidth<=ah.scrollWidth}var ag=ah.scrollTop+ac.y;var aj=ae&&ag>0&&ag<ah.scrollHeight;var ad=ah.scrollLeft+ac.x;var af=Z&&ad>0&&ad<ah.scrollWidth;if(aj){ah.scrollTop+=ac.y}if(af){ah.scrollLeft+=ac.x}if(ai&&(af||aj)){if(aj){ab.top+=ac.y}if(af){ab.left+=ac.x}this.hint.css(ab)}},_end:function(Z){this._withDropTarget(this._elementUnderCursor(Z),function(ab,aa){if(ab){ab._drop(p({},Z,{dropTarget:D(aa)}));y=null}});this._cancel(this._trigger(H,Z))},_cancel:function(aa){var Z=this;Z._scrollableParent=null;this._cursorElement=null;clearInterval(this._scrollInterval);Z._activated=false;if(Z.hint&&!Z.dropped){setTimeout(function(){Z.hint.stop(true,true);if(aa){Z._afterEndHandler()}else{Z.hint.animate(Z.currentTargetOffset,"fast",Z._afterEndHandler)}},0)}else{Z._afterEnd()}},_trigger:function(Z,ab){var aa=this;return aa.trigger(Z,p({},ab.event,{x:ab.x,y:ab.y,currentTarget:aa.currentTarget,initialTarget:ab.touch?ab.touch.initialTouch:null,dropTarget:ab.dropTarget,elementUnderCursor:ab.elementUnderCursor}))},_elementUnderCursor:function(aa){var Z=I(aa),ab=this.hint;if(ab&&B(ab[0],Z)){ab.hide();Z=I(aa);if(!Z){Z=I(aa)}ab.show()}return Z},_withDropTarget:function(ac,ae){var Z,ad=this.options.group,aa=Y[ad],ab=f[ad];if(aa&&aa.length||ab&&ab.length){Z=u(ac,aa,ab);if(Z){ae(Z.target,Z.targetElement)}else{ae()}}},destroy:function(){var Z=this;k.fn.destroy.call(Z);Z._afterEnd();Z.userEvents.destroy();this._scrollableParent=null;this._cursorElement=null;clearInterval(this._scrollInterval);Z.currentTarget=null},_afterEnd:function(){var Z=this;if(Z.hint){Z.hint.remove()}delete s[Z.options.group];Z.trigger("destroy");Z.trigger(G);D(j).off(V,Z._captureEscape)}});E.ui.plugin(l);E.ui.plugin(e);E.ui.plugin(o);E.TapCapture=U;E.containerBoundaries=h;p(E.ui,{Pane:F,PaneDimensions:N,Movable:t});function X(aa){var Z=T()[0],ad,ac,ab;if(aa[0]===Z){ac=Z.scrollTop;ab=Z.scrollLeft;return{top:ac,left:ab,bottom:ac+R.height(),right:ab+R.width()}}else{ad=aa.offset();ad.bottom=ad.top+aa.height();ad.right=ad.left+aa.width();return ad}}function T(){return D(E.support.browser.chrome?j.body:j.documentElement)}function m(aa){var Z=T();if(!aa||aa===j.body||aa===j.documentElement){return Z}var ab=D(aa)[0];while(ab&&!E.isScrollable(ab)&&ab!==j.body){ab=ab.parentNode}if(ab===j.body){return Z}return D(ab)}function d(aa,Z,ac){var ab={x:0,y:0};var ad=50;if(aa-ac.left<ad){ab.x=-(ad-(aa-ac.left))}else{if(ac.right-aa<ad){ab.x=ad-(ac.right-aa)}}if(Z-ac.top<ad){ab.y=-(ad-(Z-ac.top))}else{if(ac.bottom-Z<ad){ab.y=ad-(ac.bottom-Z)}}return ab}E.ui.Draggable.utils={autoScrollVelocity:d,scrollableViewPort:X,findScrollableParent:m}}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.mobile.scroller",["kendo.fx","kendo.draganddrop"],a)}(function(){var a={id:"mobile.scroller",name:"Scroller",category:"mobile",description:"The Kendo Mobile Scroller widget enables touch friendly kinetic scrolling for the contents of a given DOM element.",depends:["fx","draganddrop"]};(function(i,j){var x=window.kendo,d=x.mobile,e=x.effects,w=d.ui,A=i.proxy,D=i.extend,c=w.Widget,B=x.Class,z=x.ui.Movable,E=x.ui.Pane,p=x.ui.PaneDimensions,h=e.Transition,I=e.Animation,v=Math.abs,H=500,y=0.7,G=0.96,l=10,F=55,r=0.5,J=5,b="km-scroller-release",g="km-scroller-refresh",f="pull",s="change",o="resize",t="scroll",n=2;var m=I.extend({init:function(K){var L=this;I.fn.init.call(L);D(L,K);L.userEvents.bind("gestureend",A(L.start,L));L.tapCapture.bind("press",A(L.cancel,L))},enabled:function(){return this.movable.scale<this.dimensions.minScale},done:function(){return this.dimensions.minScale-this.movable.scale<0.01},tick:function(){var K=this.movable;K.scaleWith(1.1);this.dimensions.rescale(K.scale)},onEnd:function(){var K=this.movable;K.scaleTo(this.dimensions.minScale);this.dimensions.rescale(K.scale)}});var u=I.extend({init:function(K){var L=this;I.fn.init.call(L);D(L,K,{transition:new h({axis:K.axis,movable:K.movable,onEnd:function(){L._end()}})});L.tapCapture.bind("press",function(){L.cancel()});L.userEvents.bind("end",A(L.start,L));L.userEvents.bind("gestureend",A(L.start,L));L.userEvents.bind("tap",A(L.onEnd,L))},onCancel:function(){this.transition.cancel()},freeze:function(K){var L=this;L.cancel();L._moveTo(K)},onEnd:function(){var K=this;if(K.paneAxis.outOfBounds()){K._snapBack()}else{K._end()}},done:function(){return v(this.velocity)<1},start:function(M){var L=this,K;if(!L.dimension.enabled){return}if(L.paneAxis.outOfBounds()){L._snapBack()}else{K=M.touch.id===n?0:M.touch[L.axis].velocity;L.velocity=Math.max(Math.min(K*L.velocityMultiplier,F),-F);L.tapCapture.captureNext();I.fn.start.call(L)}},tick:function(){var L=this,N=L.dimension,M=L.paneAxis.outOfBounds()?r:L.friction,O=L.velocity*=M,K=L.movable[L.axis]+O;if(!L.elastic&&N.outOfBounds(K)){K=Math.max(Math.min(K,N.max),N.min);L.velocity=0}L.movable.moveAxis(L.axis,K)},_end:function(){this.tapCapture.cancelCapture();this.end()},_snapBack:function(){var K=this,M=K.dimension,L=K.movable[K.axis]>M.max?M.max:M.min;K._moveTo(L)},_moveTo:function(K){this.transition.moveTo({location:K,duration:H,ease:h.easeOutExpo})}});var k=I.extend({init:function(K){var L=this;x.effects.Animation.fn.init.call(this);D(L,K,{origin:{},destination:{},offset:{}})},tick:function(){this._updateCoordinates();this.moveTo(this.origin)},done:function(){return v(this.offset.y)<J&&v(this.offset.x)<J},onEnd:function(){this.moveTo(this.destination);if(this.callback){this.callback.call()}},setCoordinates:function(L,K){this.offset={};this.origin=L;this.destination=K},setCallback:function(K){if(K&&x.isFunction(K)){this.callback=K}else{K=j}},_updateCoordinates:function(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4};this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}}});var q=B.extend({init:function(L){var N=this,K=L.axis==="x",M=i('<div class="km-touch-scrollbar km-'+(K?"horizontal":"vertical")+'-scrollbar" />');D(N,L,{element:M,elementSize:0,movable:new z(M),scrollMovable:L.movable,alwaysVisible:L.alwaysVisible,size:K?"width":"height"});N.scrollMovable.bind(s,A(N.refresh,N));N.container.append(M);if(L.alwaysVisible){N.show()}},refresh:function(){var P=this,O=P.axis,R=P.dimension,N=R.size,L=P.scrollMovable,Q=N/R.total,K=Math.round(-L[O]*Q),M=Math.round(N*Q);if(Q>=1){this.element.css("display","none")}else{this.element.css("display","")}if(K+M>N){M=N-K}else{if(K<0){M+=K;K=0}}if(P.elementSize!=M){P.element.css(P.size,M+"px");P.elementSize=M}P.movable.moveAxis(O,K)},show:function(){this.element.css({opacity:y,visibility:"visible"})},hide:function(){if(!this.alwaysVisible){this.element.css({opacity:0})}}});var C=c.extend({init:function(O,U){var Q=this;c.fn.init.call(Q,O,U);O=Q.element;Q._native=Q.options.useNative&&x.support.hasNativeScrolling;if(Q._native){O.addClass("km-native-scroller").prepend('<div class="km-scroll-header"/>');D(Q,{scrollElement:O,fixedContainer:O.children().first()});return}O.css("overflow","hidden").addClass("km-scroll-wrapper").wrapInner('<div class="km-scroll-container"/>').prepend('<div class="km-scroll-header"/>');var V=O.children().eq(1),T=new x.TapCapture(O),S=new z(V),K=new p({element:V,container:O,forcedEnabled:Q.options.zoom}),P=this.options.avoidScrolling,R=new x.UserEvents(O,{touchAction:"pan-y",fastTap:true,allowSelection:true,preventDragEvent:true,captureUpIfMoved:true,multiTouch:Q.options.zoom,start:function(ab){K.refresh();var Y=v(ab.x.velocity),W=v(ab.y.velocity),aa=Y*2>=W,X=i.contains(Q.fixedContainer[0],ab.event.target),Z=W*2>=Y;if(!X&&!P(ab)&&Q.enabled&&(K.x.enabled&&aa||K.y.enabled&&Z)){R.capture()}else{R.cancel()}}}),M=new E({movable:S,dimensions:K,userEvents:R,elastic:Q.options.elastic}),L=new m({movable:S,dimensions:K,userEvents:R,tapCapture:T}),N=new k({moveTo:function(W){Q.scrollTo(W.x,W.y)}});S.bind(s,function(){Q.scrollTop=-S.y;Q.scrollLeft=-S.x;Q.trigger(t,{scrollTop:Q.scrollTop,scrollLeft:Q.scrollLeft})});if(Q.options.mousewheelScrolling){O.on("DOMMouseScroll mousewheel",A(this,"_wheelScroll"))}D(Q,{movable:S,dimensions:K,zoomSnapBack:L,animatedScroller:N,userEvents:R,pane:M,tapCapture:T,pulled:false,enabled:true,scrollElement:V,scrollTop:0,scrollLeft:0,fixedContainer:O.children().first()});Q._initAxis("x");Q._initAxis("y");Q._wheelEnd=function(){Q._wheel=false;Q.userEvents.end(0,Q._wheelY)};K.refresh();if(Q.options.pullToRefresh){Q._initPullToRefresh()}},_wheelScroll:function(K){if(!this._wheel){this._wheel=true;this._wheelY=0;this.userEvents.press(0,this._wheelY)}clearTimeout(this._wheelTimeout);this._wheelTimeout=setTimeout(this._wheelEnd,50);var L=x.wheelDeltaY(K);if(L){this._wheelY+=L;this.userEvents.move(0,this._wheelY)}K.preventDefault()},makeVirtual:function(){this.dimensions.y.makeVirtual()},virtualSize:function(L,K){this.dimensions.y.virtualSize(L,K)},height:function(){return this.dimensions.y.size},scrollHeight:function(){return this.scrollElement[0].scrollHeight},scrollWidth:function(){return this.scrollElement[0].scrollWidth},options:{name:"Scroller",zoom:false,pullOffset:140,visibleScrollHints:false,elastic:true,useNative:false,mousewheelScrolling:true,avoidScrolling:function(){return false},pullToRefresh:false,messages:{pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"}},events:[f,t,o],_resize:function(){if(!this._native){this.contentResized()}},setOptions:function(K){var L=this;c.fn.setOptions.call(L,K);if(K.pullToRefresh){L._initPullToRefresh()}},reset:function(){if(this._native){this.scrollElement.scrollTop(0)}else{this.movable.moveTo({x:0,y:0});this._scale(1)}},contentResized:function(){this.dimensions.refresh();if(this.pane.x.outOfBounds()){this.movable.moveAxis("x",this.dimensions.x.min)}if(this.pane.y.outOfBounds()){this.movable.moveAxis("y",this.dimensions.y.min)}},zoomOut:function(){var K=this.dimensions;K.refresh();this._scale(K.fitScale);this.movable.moveTo(K.centerCoordinates())},enable:function(){this.enabled=true},disable:function(){this.enabled=false},scrollTo:function(K,L){if(this._native){this.scrollElement.scrollLeft(v(K));this.scrollElement.scrollTop(v(L))}else{this.dimensions.refresh();this.movable.moveTo({x:K,y:L})}},animatedScrollTo:function(K,O,N){var M,L;if(this._native){this.scrollTo(K,O)}else{M={x:this.movable.x,y:this.movable.y};L={x:K,y:O};this.animatedScroller.setCoordinates(M,L);this.animatedScroller.setCallback(N);this.animatedScroller.start()}},pullHandled:function(){var K=this;K.refreshHint.removeClass(g);K.hintContainer.html(K.pullTemplate({}));K.yinertia.onEnd();K.xinertia.onEnd();K.userEvents.cancel()},destroy:function(){c.fn.destroy.call(this);if(this.userEvents){this.userEvents.destroy()}},_scale:function(K){this.dimensions.rescale(K);this.movable.scaleTo(K)},_initPullToRefresh:function(){var K=this;K.dimensions.y.forceEnabled();K.pullTemplate=x.template(K.options.messages.pullTemplate);K.releaseTemplate=x.template(K.options.messages.releaseTemplate);K.refreshTemplate=x.template(K.options.messages.refreshTemplate);K.scrollElement.prepend('<span class="km-scroller-pull"><span class="km-icon"></span><span class="km-loading-left"></span><span class="km-loading-right"></span><span class="km-template">'+K.pullTemplate({})+"</span></span>");K.refreshHint=K.scrollElement.children().first();K.hintContainer=K.refreshHint.children(".km-template");K.pane.y.bind("change",A(K._paneChange,K));K.userEvents.bind("end",A(K._dragEnd,K))},_dragEnd:function(){var K=this;if(!K.pulled){return}K.pulled=false;K.refreshHint.removeClass(b).addClass(g);K.hintContainer.html(K.refreshTemplate({}));K.yinertia.freeze(K.options.pullOffset/2);K.trigger("pull")},_paneChange:function(){var K=this;if(K.movable.y/r>K.options.pullOffset){if(!K.pulled){K.pulled=true;K.refreshHint.removeClass(g).addClass(b);K.hintContainer.html(K.releaseTemplate({}))}}else{if(K.pulled){K.pulled=false;K.refreshHint.removeClass(b);K.hintContainer.html(K.pullTemplate({}))}}},_initAxis:function(K){var N=this,Q=N.movable,P=N.dimensions[K],O=N.tapCapture,M=N.pane[K],L=new q({axis:K,movable:Q,dimension:P,container:N.element,alwaysVisible:N.options.visibleScrollHints});P.bind(s,function(){L.refresh()});M.bind(s,function(){L.show()});N[K+"inertia"]=new u({axis:K,paneAxis:M,movable:Q,tapCapture:O,userEvents:N.userEvents,dimension:P,elastic:N.options.elastic,friction:N.options.friction||G,velocityMultiplier:N.options.velocityMultiplier||l,end:function(){L.hide();N.trigger("scrollEnd",{axis:K,scrollTop:N.scrollTop,scrollLeft:N.scrollLeft})}})}});w.plugin(C)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.groupable",["kendo.core","kendo.draganddrop"],a)}(function(){var a={id:"groupable",name:"Groupable",category:"framework",depends:["core","draganddrop"],advanced:true};(function(g,b){var i=window.kendo,n=i.ui.Widget,o=i._outerWidth,j=g.proxy,k=false,c=".kendoGroupable",f="change",d=i.template('<div class="k-group-indicator" data-#=data.ns#field="${data.field}" data-#=data.ns#title="${data.title || ""}" data-#=data.ns#dir="${data.dir || "asc"}"><a href="\\#" class="k-link"><span class="k-icon k-i-sort-${(data.dir || "asc") == "asc" ? "asc-sm" : "desc-sm"}" title="(sorted ${(data.dir || "asc") == "asc" ? "ascending": "descending"})"></span>${data.title ? data.title: data.field}</a><a class="k-button k-button-icon k-button-bare"><span class="k-icon k-i-close"></span></a></div>',{useWithBlock:false}),e=function(p){var q=p.attr(i.attr("title"));if(q){q=i.htmlEncode(q)}return g('<div class="k-header k-drag-clue" />').css({width:p.width(),paddingLeft:p.css("paddingLeft"),paddingRight:p.css("paddingRight"),lineHeight:p.height()+"px",paddingTop:p.css("paddingTop"),paddingBottom:p.css("paddingBottom")}).html(q||p.attr(i.attr("field"))).prepend('<span class="k-icon k-drag-status k-i-cancel" />')},m=g('<div class="k-grouping-dropclue"/>');function h(p){return p.position().top+3}var l=n.extend({init:function(s,r){var t=this,w=i.guid(),v=j(t._intializePositions,t),p,u,q=t._dropCuePositions=[];n.fn.init.call(t,s,r);k=i.support.isRtl(s);u=k?"right":"left";t.draggable=p=t.options.draggable||new i.ui.Draggable(t.element,{filter:t.options.draggableElements,hint:e,group:w});t.groupContainer=g(t.options.groupContainer,t.element).kendoDropTarget({group:p.options.group,dragenter:function(x){if(t._canDrag(x.draggable.currentTarget)){x.draggable.hint.find(".k-drag-status").removeClass("k-i-cancel").addClass("k-i-plus");m.css("top",h(t.groupContainer)).css(u,0).appendTo(t.groupContainer)}},dragleave:function(x){x.draggable.hint.find(".k-drag-status").removeClass("k-i-plus").addClass("k-i-cancel");m.remove()},drop:function(D){var A=D.draggable.currentTarget,C=A.attr(i.attr("field")),E=A.attr(i.attr("title")),B=t.indicator(C),z=t._dropCuePositions,y=z[z.length-1],x;if(!A.hasClass("k-group-indicator")&&!t._canDrag(A)){return}if(y){x=t._dropCuePosition(i.getOffset(m).left+parseInt(y.element.css("marginLeft"),10)*(k?-1:1)+parseInt(y.element.css("marginRight"),10));if(x&&t._canDrop(g(B),x.element,x.left)){if(x.before){x.element.before(B||t.buildIndicator(C,E))}else{x.element.after(B||t.buildIndicator(C,E))}t._change()}}else{t.groupContainer.append(t.buildIndicator(C,E));t._change()}}}).kendoDraggable({filter:"div.k-group-indicator",hint:e,group:p.options.group,dragcancel:j(t._dragCancel,t),dragstart:function(B){var x=B.currentTarget,z=parseInt(x.css("marginLeft"),10),y=x.position(),A=k?y.left-z:y.left+o(x);v();m.css({top:h(t.groupContainer),left:A}).appendTo(t.groupContainer);this.hint.find(".k-drag-status").removeClass("k-i-cancel").addClass("k-i-plus")},dragend:function(){t._dragEnd(this)},drag:j(t._drag,t)}).on("click"+c,".k-button",function(x){x.preventDefault();t._removeIndicator(g(this).parent())}).on("click"+c,".k-link",function(z){var y=g(this).parent(),x=t.buildIndicator(y.attr(i.attr("field")),y.attr(i.attr("title")),y.attr(i.attr("dir"))=="asc"?"desc":"asc");y.before(x).remove();t._change();z.preventDefault()});p.bind(["dragend","dragcancel","dragstart","drag"],{dragend:function(){t._dragEnd(this)},dragcancel:j(t._dragCancel,t),dragstart:function(A){var x,y,z;if(!t.options.allowDrag&&!t._canDrag(A.currentTarget)){A.preventDefault();return}v();if(q.length){x=q[q.length-1].element;y=parseInt(x.css("marginRight"),10);z=x.position().left+o(x)+y}else{z=0}},drag:j(t._drag,t)});t.dataSource=t.options.dataSource;if(t.dataSource&&t._refreshHandler){t.dataSource.unbind(f,t._refreshHandler)}else{t._refreshHandler=j(t.refresh,t)}if(t.dataSource){t.dataSource.bind("change",t._refreshHandler);t.refresh()}},refresh:function(){var p=this,q=p.dataSource;if(p.groupContainer){p.groupContainer.empty().append(g.map(q.group()||[],function(t){var u=t.field;var r=i.attr("field");var s=p.element.find(p.options.filter).filter(function(){return g(this).attr(r)===u});return p.buildIndicator(t.field,s.attr(i.attr("title")),t.dir)}).join(""))}p._invalidateGroupContainer()},destroy:function(){var p=this;n.fn.destroy.call(p);p.groupContainer.off(c);if(p.groupContainer.data("kendoDropTarget")){p.groupContainer.data("kendoDropTarget").destroy()}if(p.groupContainer.data("kendoDraggable")){p.groupContainer.data("kendoDraggable").destroy()}if(!p.options.draggable){p.draggable.destroy()}if(p.dataSource&&p._refreshHandler){p.dataSource.unbind("change",p._refreshHandler);p._refreshHandler=null}p.groupContainer=p.element=p.draggable=null},events:["change"],options:{name:"Groupable",filter:"th",draggableElements:"th",messages:{empty:"Drag a column header and drop it here to group by that column"}},indicator:function(q){var p=g(".k-group-indicator",this.groupContainer);return g.grep(p,function(r){return g(r).attr(i.attr("field"))===q})[0]},buildIndicator:function(q,r,p){return d({field:q.replace(/"/g,"'"),dir:p,title:r,ns:i.ns})},descriptors:function(){var r=this,u=g(".k-group-indicator",r.groupContainer),v,t,s,p,q;v=r.element.find(r.options.filter).map(function(){var w=g(this),x=w.attr(i.attr("aggregates")),y=w.attr(i.attr("field"));if(x&&x!==""){t=x.split(",");x=[];for(p=0,q=t.length;p<q;p++){x.push({field:y,aggregate:t[p]})}}return x}).toArray();return g.map(u,function(w){w=g(w);s=w.attr(i.attr("field"));return{field:s,dir:w.attr(i.attr("dir")),aggregates:v||[]}})},_removeIndicator:function(p){var q=this;p.remove();q._invalidateGroupContainer();q._change()},_change:function(){var q=this;if(q.dataSource){var p=q.descriptors();if(q.trigger("change",{groups:p})){q.refresh();return}q.dataSource.group(p)}},_dropCuePosition:function(q){var r=this._dropCuePositions;if(!m.is(":visible")||r.length===0){return}q=Math.ceil(q);var p=r[r.length-1],v=p.left,s=p.right,u=parseInt(p.element.css("marginLeft"),10),t=parseInt(p.element.css("marginRight"),10);if(q>=s&&!k||q<v&&k){q={left:p.element.position().left+(!k?o(p.element)+t:-u),element:p.element,before:false}}else{q=g.grep(r,function(w){return w.left<=q&&q<=w.right||k&&q>w.right})[0];if(q){q={left:k?q.element.position().left+o(q.element)+t:q.element.position().left-u,element:q.element,before:true}}}return q},_drag:function(q){var p=this._dropCuePosition(q.x.location);if(p){m.css({left:p.left,right:"auto"})}},_canDrag:function(p){var q=p.attr(i.attr("field"));return p.attr(i.attr("groupable"))!="false"&&q&&(p.hasClass("k-group-indicator")||!this.indicator(q))},_canDrop:function(s,t,q){var r=s.next(),p=s[0]!==t[0]&&(!r[0]||t[0]!==r[0]||(!k&&q>r.position().left||k&&q<r.position().left));return p},_dragEnd:function(p){var r=this,s=p.currentTarget.attr(i.attr("field")),q=r.indicator(s);if(p!==r.options.draggable&&!p.dropped&&q){r._removeIndicator(g(q))}r._dragCancel()},_dragCancel:function(){m.remove();this._dropCuePositions=[]},_intializePositions:function(){var p=this,r=g(".k-group-indicator",p.groupContainer),q;p._dropCuePositions=g.map(r,function(s){s=g(s);q=i.getOffset(s).left;return{left:parseInt(q,10),right:parseInt(q+o(s),10),element:s}})},_invalidateGroupContainer:function(){var p=this.groupContainer;if(p&&p.is(":empty")){p.html(this.options.messages.empty)}}});i.ui.plugin(l)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.reorderable",["kendo.core","kendo.draganddrop"],a)}(function(){var a={id:"reorderable",name:"Reorderable",category:"framework",depends:["core","draganddrop"],advanced:true};(function(d,c){var g=window.kendo,l=g._outerWidth,j=g._outerHeight,k=g.getOffset,h=g.ui.Widget,e="change",f="k-reorderable";function b(n,m){n=d(n);if(m){n.find(".k-drag-status").removeClass("k-i-plus").addClass("k-i-cancel")}else{n.find(".k-drag-status").removeClass("k-i-cancel").addClass("k-i-plus")}}var i=h.extend({init:function(o,n){var p=this,m,q=g.guid()+"-reorderable";h.fn.init.call(p,o,n);o=p.element.addClass(f);n=p.options;p.draggable=m=n.draggable||new g.ui.Draggable(o,{group:q,autoScroll:true,filter:n.filter,hint:n.hint});p.reorderDropCue=d('<div class="k-reorder-cue"><div class="k-icon k-i-arrow-60-down"></div><div class="k-icon k-i-arrow-60-up"></div></div>');o.find(m.options.filter).kendoDropTarget({group:m.options.group,dragenter:function(t){if(!p._draggable){return}var v=this.element,u;var r=!p._dropTargetAllowed(v)||p._isLastDraggable();b(t.draggable.hint,r);if(!r){u=k(v);var s=u.left;if(n.inSameContainer&&!n.inSameContainer({source:v,target:p._draggable,sourceIndex:p._index(v),targetIndex:p._index(p._draggable)})){p._dropTarget=v}else{if(p._index(v)>p._index(p._draggable)){s+=l(v)}}p.reorderDropCue.css({height:j(v),top:u.top,left:s}).appendTo(document.body)}},dragleave:function(r){b(r.draggable.hint,true);p.reorderDropCue.remove();p._dropTarget=null},drop:function(){p._dropTarget=null;if(!p._draggable){return}var s=this.element;var r=p._draggable;if(p._dropTargetAllowed(s)&&!p._isLastDraggable()){p.trigger(e,{element:p._draggable,target:s,oldIndex:p._index(r),newIndex:p._index(s),position:k(p.reorderDropCue).left>k(s).left?"after":"before"})}}});m.bind(["dragcancel","dragend","dragstart","drag"],{dragcancel:function(){p.reorderDropCue.remove();p._draggable=null;p._elements=null},dragend:function(){p.reorderDropCue.remove();p._draggable=null;p._elements=null},dragstart:function(r){p._draggable=r.currentTarget;p._elements=p.element.find(p.draggable.options.filter)},drag:function(t){if(!p._dropTarget||this.hint.find(".k-drag-status").hasClass("k-i-cancel")){return}var s=k(p._dropTarget).left;var r=l(p._dropTarget);if(t.pageX>s+r/2){p.reorderDropCue.css({left:s+r})}else{p.reorderDropCue.css({left:s})}}})},options:{name:"Reorderable",filter:"*"},events:[e],_isLastDraggable:function(){var q=this.options.inSameContainer,m=this._draggable[0],p=this._elements.get(),o=false,n;if(!q){return false}while(!o&&p.length>0){n=p.pop();o=m!==n&&q({source:m,target:n,sourceIndex:this._index(m),targetIndex:this._index(n)})}return !o},_dropTargetAllowed:function(p){var o=this.options.inSameContainer,n=this.options.dragOverContainers,m=this._draggable;if(m[0]===p[0]){return false}if(!o||!n){return true}if(o({source:m,target:p,sourceIndex:this._index(m),targetIndex:this._index(p)})){return true}return n(this._index(m),this._index(p))},_index:function(m){return this._elements.index(m)},destroy:function(){var m=this;h.fn.destroy.call(m);m.element.find(m.draggable.options.filter).each(function(){var n=d(this);if(n.data("kendoDropTarget")){n.data("kendoDropTarget").destroy()}});if(m.draggable){m.draggable.destroy();m.draggable.element=m.draggable=null}m.elements=m.reorderDropCue=m._elements=m._draggable=null}});g.ui.plugin(i)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.resizable",["kendo.core","kendo.draganddrop"],a)}(function(){var a={id:"resizable",name:"Resizable",category:"framework",depends:["core","draganddrop"],advanced:true};(function(h,f){var k=window.kendo,m=k.ui,n=m.Widget,l=h.proxy,c=k.isFunction,j=h.extend,e="horizontal",g="vertical",o="start",b="resize",i="resizeend";var d=n.extend({init:function(q,p){var r=this;n.fn.init.call(r,q,p);r.orientation=r.options.orientation.toLowerCase()!=g?e:g;r._positionMouse=r.orientation==e?"x":"y";r._position=r.orientation==e?"left":"top";r._sizingDom=r.orientation==e?"outerWidth":"outerHeight";r.draggable=new m.Draggable(p.draggableElement||q,{distance:1,filter:p.handle,drag:l(r._resize,r),dragcancel:l(r._cancel,r),dragstart:l(r._start,r),dragend:l(r._stop,r)});r.userEvents=r.draggable.userEvents},events:[b,i,o],options:{name:"Resizable",orientation:e},resize:function(){},_max:function(s){var r=this,p=r.hint?r.hint[r._sizingDom]():0,q=r.options.max;return c(q)?q(s):q!==f?r._initialElementPosition+q-p:q},_min:function(r){var q=this,p=q.options.min;return c(p)?p(r):p!==f?q._initialElementPosition+p:p},_start:function(r){var q=this,s=q.options.hint,p=h(r.currentTarget);q._initialElementPosition=p.position()[q._position];q._initialMousePosition=r[q._positionMouse].startLocation;if(s){q.hint=c(s)?h(s(p)):s;q.hint.css({position:"absolute"}).css(q._position,q._initialElementPosition).appendTo(q.element)}q.trigger(o,r);q._maxPosition=q._max(r);q._minPosition=q._min(r);h(document.body).css("cursor",p.css("cursor"))},_resize:function(s){var q=this,t=q._maxPosition,u=q._minPosition,r=q._initialElementPosition+(s[q._positionMouse].location-q._initialMousePosition),p;p=u!==f?Math.max(u,r):r;q.position=p=t!==f?Math.min(t,p):p;if(q.hint){q.hint.toggleClass(q.options.invalidClass||"",p==t||p==u).css(q._position,p)}q.resizing=true;q.trigger(b,j(s,{position:p}))},_stop:function(q){var p=this;if(p.hint){p.hint.remove()}p.resizing=false;p.trigger(i,j(q,{position:p.position}));h(document.body).css("cursor","")},_cancel:function(q){var p=this;if(p.hint){p.position=f;p.hint.css(p._position,p._initialElementPosition);p._stop(q)}},destroy:function(){var p=this;n.fn.destroy.call(p);if(p.draggable){p.draggable.destroy()}},press:function(r){if(!r){return}var p=r.position(),q=this;q.userEvents.press(p.left,p.top,r[0]);q.targetPosition=p;q.target=r},move:function(t){var r=this,q=r._position,p=r.targetPosition,s=r.position;if(s===f){s=p[q]}p[q]=s+t;r.userEvents.move(p.left,p.top)},end:function(){this.userEvents.end();this.target=this.position=f}});k.ui.plugin(d)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.sortable",["kendo.draganddrop"],a)}(function(){var a={id:"sortable",name:"Sortable",category:"framework",depends:["draganddrop"]};(function(g,i){var o=window.kendo,d=o.ui.Widget,b=o._outerWidth,c=o._outerHeight,r="start",v="beforeMove",u="move",h="end",l="change",f="cancel",j="sort",q="remove",k="receive",m=">*",s=-1;function t(w,y){try{return g.contains(w,y)||w==y}catch(x){return false}}function p(w){return w.clone()}function n(w){return w.clone().removeAttr("id").css("visibility","hidden")}var e=d.extend({init:function(x,w){var y=this;d.fn.init.call(y,x,w);if(!y.options.placeholder){y.options.placeholder=n}if(!y.options.hint){y.options.hint=p}y.draggable=y._createDraggable()},events:[r,v,u,h,l,f],options:{name:"Sortable",hint:null,placeholder:null,filter:m,holdToDrag:false,disabled:null,container:null,connectWith:null,handler:null,cursorOffset:null,axis:null,ignore:null,autoScroll:false,cursor:"auto",moveOnDragEnter:false},destroy:function(){this.draggable.destroy();d.fn.destroy.call(this)},_createDraggable:function(){var y=this,x=y.element,w=y.options;return new o.ui.Draggable(x,{filter:w.filter,hint:o.isFunction(w.hint)?w.hint:g(w.hint),holdToDrag:w.holdToDrag,container:w.container?g(w.container):null,cursorOffset:w.cursorOffset,axis:w.axis,ignore:w.ignore,autoScroll:w.autoScroll,dragstart:g.proxy(y._dragstart,y),dragcancel:g.proxy(y._dragcancel,y),drag:g.proxy(y._drag,y),dragend:g.proxy(y._dragend,y)})},_dragstart:function(A){var w=this.draggedElement=A.currentTarget,z=this.options.disabled,y=this.options.handler,x=this.options.placeholder,B=this.placeholder=o.isFunction(x)?g(x.call(this,w)):g(x);if(z&&w.is(z)){A.preventDefault()}else{if(y&&!g(A.initialTarget).is(y)){A.preventDefault()}else{if(this.trigger(r,{item:w,draggableEvent:A})){A.preventDefault()}else{w.css("display","none");w.before(B);this._setCursor()}}}},_dragcancel:function(){this._cancel();this.trigger(f,{item:this.draggedElement});this._resetCursor()},_drag:function(B){var D=this.draggedElement,C=this._findTarget(B),E,w={left:B.x.location,top:B.y.location},z,y={x:B.x.delta,y:B.y.delta},F,I,G,x=this.options.axis,A=this.options.moveOnDragEnter,H={item:D,list:this,draggableEvent:B};if(x==="x"||x==="y"){this._movementByAxis(x,w,y[x],H);return}if(C){E=this._getElementCenter(C.element);z={left:Math.round(w.left-E.left),top:Math.round(w.top-E.top)};g.extend(H,{target:C.element});if(C.appendToBottom){this._movePlaceholder(C,null,H);return}if(C.appendAfterHidden){this._movePlaceholder(C,"next",H)}if(this._isFloating(C.element)){if(y.x<0&&A||!A&&z.left<0){F="prev"}else{if(y.x>0&&A||!A&&z.left>0){F="next"}}}else{if(y.y<0&&A||!A&&z.top<0){F="prev"}else{if(y.y>0&&A||!A&&z.top>0){F="next"}}}if(F){G=F==="prev"?jQuery.fn.prev:jQuery.fn.next;I=G.call(C.element);while(I.length&&!I.is(":visible")){I=G.call(I)}if(I[0]!=this.placeholder[0]){this._movePlaceholder(C,F,H)}}}},_dragend:function(y){var C=this.placeholder,z=this.draggedElement,w=this.indexOf(z),A=this.indexOf(C),B=this.options.connectWith,x,F,D,E;this._resetCursor();D={action:j,item:z,oldIndex:w,newIndex:A,draggableEvent:y};if(A>=0){F=this.trigger(h,D)}else{x=C.parents(B).getKendoSortable();D.action=q;E=g.extend({},D,{action:k,oldIndex:s,newIndex:x.indexOf(C)});F=!(!this.trigger(h,D)&&!x.trigger(h,E))}if(F||A===w){this._cancel();return}C.replaceWith(z);z.show();this.draggable.dropped=true;D={action:this.indexOf(z)!=s?j:q,item:z,oldIndex:w,newIndex:this.indexOf(z),draggableEvent:y};this.trigger(l,D);if(x){E=g.extend({},D,{action:k,oldIndex:s,newIndex:x.indexOf(z)});x.trigger(l,E)}},_findTarget:function(A){var x=this._findElementUnderCursor(A),w,z=this.options.connectWith,y;if(g.contains(this.element[0],x)){w=this.items();y=w.filter(x)[0]||w.has(x)[0];return y?{element:g(y),sortable:this}:null}else{if(this.element[0]==x&&this._isEmpty()){return{element:this.element,sortable:this,appendToBottom:true}}else{if(this.element[0]==x&&this._isLastHidden()){y=this.items().eq(0);return{element:y,sortable:this,appendAfterHidden:true}}else{if(z){return this._searchConnectedTargets(x,A)}}}}},_findElementUnderCursor:function(y){var x=o.elementUnderCursor(y),w=y.sender;if(t(w.hint[0],x)){w.hint.hide();x=o.elementUnderCursor(y);if(!x){x=o.elementUnderCursor(y)}w.hint.show()}return x},_searchConnectedTargets:function(z,C){var B=g(this.options.connectWith),x,w,A;for(var y=0;y<B.length;y++){x=B.eq(y).getKendoSortable();if(g.contains(B[y],z)){if(x){w=x.items();A=w.filter(z)[0]||w.has(z)[0];if(A){x.placeholder=this.placeholder;return{element:g(A),sortable:x}}else{return null}}}else{if(B[y]==z){if(x&&x._isEmpty()){return{element:B.eq(y),sortable:x,appendToBottom:true}}else{if(this._isCursorAfterLast(x,C)){A=x.items().last();return{element:A,sortable:x}}}}}}},_isCursorAfterLast:function(B,z){var y=B.items().last(),w={left:z.x.location,top:z.y.location},x,A;x=o.getOffset(y);x.top+=c(y);x.left+=b(y);if(this._isFloating(y)){A=x.left-w.left}else{A=x.top-w.top}return A<0?true:false},_movementByAxis:function(z,y,C,A){var x=z==="x"?y.left:y.top,B=C<0?this.placeholder.prev():this.placeholder.next(),w;if(B.length&&!B.is(":visible")){B=C<0?B.prev():B.next()}g.extend(A,{target:B});w=this._getElementCenter(B);if(w){w=z==="x"?w.left:w.top}if(B.length&&C<0&&x-w<0){this._movePlaceholder({element:B,sortable:this},"prev",A)}else{if(B.length&&C>0&&x-w>0){this._movePlaceholder({element:B,sortable:this},"next",A)}}},_movePlaceholder:function(y,x,w){var z=this.placeholder;if(!y.sortable.trigger(v,w)){if(!x){y.element.append(z)}else{if(x==="prev"){y.element.before(z)}else{if(x==="next"){y.element.after(z)}}}y.sortable.trigger(u,w)}},_setCursor:function(){var x=this.options.cursor,w;if(x&&x!=="auto"){w=g(document.body);this._originalCursorType=w.css("cursor");w.css({cursor:x});if(!this._cursorStylesheet){this._cursorStylesheet=g("<style>* { cursor: "+x+" !important; }</style>")}this._cursorStylesheet.appendTo(w)}},_resetCursor:function(){if(this._originalCursorType){g(document.body).css("cursor",this._originalCursorType);this._originalCursorType=null;this._cursorStylesheet.remove()}},_getElementCenter:function(x){var w=x.length?o.getOffset(x):null;if(w){w.top+=c(x)/2;w.left+=b(x)/2}return w},_isFloating:function(w){return/left|right/.test(w.css("float"))||/inline|table-cell/.test(w.css("display"))},_cancel:function(){this.draggedElement.show();this.placeholder.remove()},_items:function(){var x=this.options.filter,w;if(x){w=this.element.find(x)}else{w=this.element.children()}return w},indexOf:function(y){var x=this._items(),z=this.placeholder,w=this.draggedElement;if(z&&y[0]==z[0]){return x.not(w).index(y)}else{return x.not(z).index(y)}},items:function(){var x=this.placeholder,w=this._items();if(x){w=w.not(x)}return w},_isEmpty:function(){return !this.items().length},_isLastHidden:function(){return this.items().length===1&&this.items().is(":hidden")}});o.ui.plugin(e)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.selectable",["kendo.core","kendo.userevents"],a)}(function(){var a={id:"selectable",name:"Selectable",category:"framework",depends:["core","userevents"],advanced:true};(function(d,g){var o=window.kendo,c=o.ui.Widget,q=d.proxy,l=Math.abs,p="aria-selected",e="k-state-selected",h="k-state-selecting",n="k-selectable",k="change",r=".kendoSelectable",j="k-state-unselecting",b="input,a,textarea,.k-multiselect-wrap,select,button,.k-button>span,.k-button>img,span.k-icon.k-i-arrow-60-down,span.k-icon.k-i-arrow-60-up",i=o.support.browser.msie,m=false;(function(t){(function(){t('<div class="parent"><span /></div>').on("click",">*",function(){m=true}).find("span").click().end().off()}())}(d));var s=c.extend({init:function(v,u){var w=this,t;c.fn.init.call(w,v,u);w._marquee=d("<div class='k-marquee'><div class='k-marquee-color'></div></div>");w._lastActive=null;w.element.addClass(n);w.relatedTarget=w.options.relatedTarget;t=w.options.multiple;if(this.options.aria&&t){w.element.attr("aria-multiselectable",true)}w.userEvents=new o.UserEvents(w.element,{global:true,allowSelection:true,filter:(!m?"."+n+" ":"")+w.options.filter,tap:q(w._tap,w)});if(t){w.userEvents.bind("start",q(w._start,w)).bind("move",q(w._move,w)).bind("end",q(w._end,w)).bind("select",q(w._select,w))}},events:[k],options:{name:"Selectable",filter:">*",multiple:false,relatedTarget:d.noop},_isElement:function(x){var w=this.element;var u,v=w.length,t=false;x=x[0];for(u=0;u<v;u++){if(w[u]===x){t=true;break}}return t},_tap:function(x){var y=d(x.target),w=this,u=x.event.ctrlKey||x.event.metaKey,B=w.options.multiple,z=B&&x.event.shiftKey,v,A=x.event.which,t=x.event.button;if(!w._isElement(y.closest("."+n))||A&&A==3||t&&t==2){return}if(!this._allowSelection(x.event.target)){return}v=y.hasClass(e);if(!B||!u){w.clear()}y=y.add(w.relatedTarget(y));if(z){w.selectRange(w._firstSelectee(),y)}else{if(v&&u){w._unselect(y);w._notify(k)}else{w.value(y)}w._lastActive=w._downTarget=y}},_start:function(x){var v=this,w=d(x.target),u=w.hasClass(e),t,y=x.event.ctrlKey||x.event.metaKey;if(!this._allowSelection(x.event.target)){return}v._downTarget=w;if(!v._isElement(w.closest("."+n))){v.userEvents.cancel();return}if(v.options.useAllItems){v._items=v.element.find(v.options.filter)}else{t=w.closest(v.element);v._items=t.find(v.options.filter)}x.sender.capture();v._marquee.appendTo(document.body).css({left:x.x.client+1,top:x.y.client+1,width:0,height:0});if(!y){v.clear()}w=w.add(v.relatedTarget(w));if(u){v._selectElement(w,true);if(y){w.addClass(j)}}},_move:function(v){var u=this,t={left:v.x.startLocation>v.x.location?v.x.location:v.x.startLocation,top:v.y.startLocation>v.y.location?v.y.location:v.y.startLocation,width:l(v.x.initialDelta),height:l(v.y.initialDelta)};u._marquee.css(t);u._invalidateSelectables(t,v.event.ctrlKey||v.event.metaKey);v.preventDefault()},_end:function(){var t=this;t._marquee.remove();t._unselect(t.element.find(t.options.filter+"."+j)).removeClass(j);var u=t.element.find(t.options.filter+"."+h);u=u.add(t.relatedTarget(u));t.value(u);t._lastActive=t._downTarget;t._items=null},_invalidateSelectables:function(u,A){var t,x,z=this._downTarget[0],v=this._items,y,w;for(t=0,x=v.length;t<x;t++){w=v.eq(t);y=w.add(this.relatedTarget(w));if(f(w,u)){if(w.hasClass(e)){if(A&&z!==w[0]){y.removeClass(e).addClass(j)}}else{if(!w.hasClass(h)&&!w.hasClass(j)){y.addClass(h)}}}else{if(w.hasClass(h)){y.removeClass(h)}else{if(A&&w.hasClass(j)){y.removeClass(j).addClass(e)}}}}},value:function(v){var u=this,t=q(u._selectElement,u);if(v){v.each(function(){t(this)});u._notify(k);return}return u.element.find(u.options.filter+"."+e)},_firstSelectee:function(){var u=this,t;if(u._lastActive!==null){return u._lastActive}t=u.value();return t.length>0?t[0]:u.element.find(u.options.filter)[0]},_selectElement:function(u,w){var v=d(u),t=!w&&this._notify("select",{element:u});v.removeClass(h);if(!t){v.addClass(e);if(this.options.aria){v.attr(p,true)}}},_notify:function(u,t){t=t||{};return this.trigger(u,t)},_unselect:function(t){t.removeClass(e);if(this.options.aria){t.attr(p,false)}return t},_select:function(t){if(this._allowSelection(t.event.target)){if(!i||i&&!d(o._activeElement()).is(b)){t.preventDefault()}}},_allowSelection:function(t){if(d(t).is(b)){this.userEvents.cancel();this._downTarget=null;return false}return true},resetTouchEvents:function(){this.userEvents.cancel()},clear:function(){var t=this.element.find(this.options.filter+"."+e);this._unselect(t)},selectRange:function(y,u){var x=this,t,w,v;x.clear();if(x.element.length>1){v=x.options.continuousItems()}if(!v||!v.length){v=x.element.find(x.options.filter)}y=d.inArray(d(y)[0],v);u=d.inArray(d(u)[0],v);if(y>u){w=y;y=u;u=w}if(!x.options.useAllItems){u+=x.element.length-1}for(t=y;t<=u;t++){x._selectElement(v[t])}x._notify(k)},destroy:function(){var t=this;c.fn.destroy.call(t);t.element.off(r);t.userEvents.destroy();t._marquee=t._lastActive=t.element=t.userEvents=null}});s.parseOptions=function(u){var t=typeof u==="string"&&u.toLowerCase();return{multiple:t&&t.indexOf("multiple")>-1,cell:t&&t.indexOf("cell")>-1}};function f(w,t){if(!w.is(":visible")){return false}var x=o.getOffset(w),v=t.left+t.width,u=t.top+t.height;x.right=x.left+o._outerWidth(w);x.bottom=x.top+o._outerHeight(w);return !(x.left>v||x.right<t.left||x.top>u||x.bottom<t.top)}o.ui.plugin(s)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.button",["kendo.core"],a)}(function(){var a={id:"button",name:"Button",category:"web",description:"The Button widget displays styled buttons.",depends:["core"]};(function(f,d){var i=window.kendo,m=i.ui.Widget,k=f.proxy,q=i.keys,j="click",p="k-button",o="k-button-icon",b="k-button-icontext",c=".kendoButton",h="disabled",l="k-state-disabled",n="k-state-focused",e="k-state-selected";var g=m.extend({init:function(s,r){var t=this;m.fn.init.call(t,s,r);s=t.wrapper=t.element;r=t.options;s.addClass(p).attr("role","button");r.enable=r.enable&&!s.attr(h);t.enable(r.enable);t._tabindex();t._graphics();s.on(j+c,k(t._click,t)).on("focus"+c,k(t._focus,t)).on("blur"+c,k(t._blur,t)).on("keydown"+c,k(t._keydown,t)).on("keyup"+c,k(t._keyup,t));i.notify(t)},destroy:function(){var r=this;r.wrapper.off(c);m.fn.destroy.call(r)},events:[j],options:{name:"Button",icon:"",spriteCssClass:"",imageUrl:"",enable:true},_isNativeButton:function(){return this.element.prop("tagName").toLowerCase()=="button"},_click:function(r){if(this.options.enable){if(this.trigger(j,{event:r})){r.preventDefault()}}},_focus:function(){if(this.options.enable){this.element.addClass(n)}},_blur:function(){this.element.removeClass(n)},_keydown:function(s){var r=this;if(!r._isNativeButton()){if(s.keyCode==q.ENTER||s.keyCode==q.SPACEBAR){if(s.keyCode==q.SPACEBAR){s.preventDefault();if(r.options.enable){r.element.addClass(e)}}r._click(s)}}},_keyup:function(){this.element.removeClass(e)},_graphics:function(){var v=this,t=v.element,z=v.options,w=z.icon,r=z.spriteCssClass,y=z.imageUrl,x,u,s;if(r||y||w){s=true;t.contents().filter(function(){return !f(this).hasClass("k-sprite")&&!f(this).hasClass("k-icon")&&!f(this).hasClass("k-image")}).each(function(A,B){if(B.nodeType==1||B.nodeType==3&&f.trim(B.nodeValue).length>0){s=false}});if(s){t.addClass(o)}else{t.addClass(b)}}if(w){x=t.children("span.k-icon").first();if(!x[0]){x=f('<span class="k-icon"></span>').prependTo(t)}x.addClass("k-i-"+w)}else{if(r){x=t.children("span.k-sprite").first();if(!x[0]){x=f('<span class="k-sprite"></span>').prependTo(t)}x.addClass(r)}else{if(y){u=t.children("img.k-image").first();if(!u[0]){u=f('<img alt="icon" class="k-image" />').prependTo(t)}u.attr("src",y)}}}},enable:function(r){var u=this,s=u.element;if(r===d){r=true}r=!!r;u.options.enable=r;s.toggleClass(l,!r).attr("aria-disabled",!r).attr(h,!r);try{s.blur()}catch(t){}}});i.ui.plugin(g)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.pager",["kendo.data"],a)}(function(){var a={id:"pager",name:"Pager",category:"framework",depends:["data"],advanced:true};(function(e,g){var m=window.kendo,l=m.ui,c=l.Widget,r=e.proxy,v=".k-i-seek-w",q=".k-i-seek-e",x=".k-i-arrow-w",y=".k-i-arrow-e",k="change",s=".kendoPager",f="click",d="keydown",t="disabled",w=m.template('<a href="\\#" aria-label="#=text#" title="#=text#" class="k-link k-pager-nav #= wrapClassName #"><span class="k-icon #= className #"></span></a>');function b(B,z,D,A,C){return B({idx:z,text:D,ns:m.ns,numeric:A,title:C||""})}function u(z,B,A){return w({className:z.substring(1),text:B,wrapClassName:A||""})}function i(A,z,C,B){A.find(z).parent().attr(m.attr("page"),C).attr("tabindex",-1).toggleClass("k-state-disabled",B)}function h(z,A){i(z,v,1,A<=1)}function n(z,A){i(z,x,Math.max(1,A-1),A<=1)}function o(z,B,A){i(z,y,Math.min(A,B+1),B>=A)}function j(z,B,A){i(z,q,A,B>=A)}var p=c.extend({init:function(B,A){var D=this,E,C;c.fn.init.call(D,B,A);A=D.options;D.dataSource=m.data.DataSource.create(A.dataSource);D.linkTemplate=m.template(D.options.linkTemplate);D.selectTemplate=m.template(D.options.selectTemplate);D.currentPageTemplate=m.template(D.options.currentPageTemplate);E=D.page();C=D.totalPages();D._refreshHandler=r(D.refresh,D);D.dataSource.bind(k,D._refreshHandler);if(A.previousNext){if(!D.element.find(v).length){D.element.append(u(v,A.messages.first,"k-pager-first"));h(D.element,E,C)}if(!D.element.find(x).length){D.element.append(u(x,A.messages.previous));n(D.element,E,C)}}if(A.numeric){D.list=D.element.find(".k-pager-numbers");if(!D.list.length){D.list=e('<ul class="k-pager-numbers k-reset" />').appendTo(D.element)}}if(A.input){if(!D.element.find(".k-pager-input").length){D.element.append('<span class="k-pager-input k-label">'+A.messages.page+'<input class="k-textbox">'+m.format(A.messages.of,C)+"</span>")}D.element.on(d+s,".k-pager-input input",r(D._keydown,D))}if(A.previousNext){if(!D.element.find(y).length){D.element.append(u(y,A.messages.next));o(D.element,E,C)}if(!D.element.find(q).length){D.element.append(u(q,A.messages.last,"k-pager-last"));j(D.element,E,C)}}if(A.pageSizes){if(!D.element.find(".k-pager-sizes").length){var z=A.pageSizes.length?A.pageSizes:["all",5,10,20];var F=e.map(z,function(G){if(G.toLowerCase&&G.toLowerCase()==="all"){return"<option value='all'>"+A.messages.allPages+"</option>"}return"<option>"+G+"</option>"});e('<span class="k-pager-sizes k-label"><select/>'+A.messages.itemsPerPage+"</span>").appendTo(D.element).find("select").html(F.join("")).end().appendTo(D.element)}D.element.find(".k-pager-sizes select").val(D.pageSize());if(m.ui.DropDownList){D.element.find(".k-pager-sizes select").show().kendoDropDownList()}D.element.on(k+s,".k-pager-sizes select",r(D._change,D))}if(A.refresh){if(!D.element.find(".k-pager-refresh").length){D.element.append('<a href="#" class="k-pager-refresh k-link" title="'+A.messages.refresh+'"><span class="k-icon k-i-reload"></span></a>')}D.element.on(f+s,".k-pager-refresh",r(D._refreshClick,D))}if(A.info){if(!D.element.find(".k-pager-info").length){D.element.append('<span class="k-pager-info k-label" />')}}D.element.on(f+s,"a",r(D._click,D)).addClass("k-pager-wrap k-widget k-floatwrap");D.element.on(f+s,".k-current-page",r(D._toggleActive,D));if(A.autoBind){D.refresh()}m.notify(D)},destroy:function(){var z=this;c.fn.destroy.call(z);z.element.off(s);z.dataSource.unbind(k,z._refreshHandler);z._refreshHandler=null;m.destroy(z.element);z.element=z.list=null},events:[k],options:{name:"Pager",selectTemplate:'<li><span class="k-state-selected">#=text#</span></li>',currentPageTemplate:'<li class="k-current-page"><span class="k-link k-pager-nav">#=text#</span></li>',linkTemplate:'<li><a tabindex="-1" href="\\#" class="k-link" data-#=ns#page="#=idx#" #if (title !== "") {# title="#=title#" #}#>#=text#</a></li>',buttonCount:10,autoBind:true,numeric:true,info:true,input:false,previousNext:true,pageSizes:false,refresh:false,messages:{allPages:"All",display:"{0} - {1} of {2} items",empty:"No items to display",page:"Page",of:"of {0}",itemsPerPage:"items per page",first:"Go to the first page",previous:"Go to the previous page",next:"Go to the next page",last:"Go to the last page",refresh:"Refresh",morePages:"More pages"}},setDataSource:function(A){var z=this;z.dataSource.unbind(k,z._refreshHandler);z.dataSource=z.options.dataSource=A;A.bind(k,z._refreshHandler);if(z.options.autoBind){A.fetch()}},refresh:function(J){var I=this,N,E,A=1,G,K=I.page(),F="",P=I.options,L=I.pageSize(),M=I.dataSource.total(),H=I.totalPages(),z=I.linkTemplate,B=P.buttonCount;if(J&&J.action=="itemchange"){return}if(P.numeric){if(K>B){G=K%B;A=G===0?K-B+1:K-G+1}E=Math.min(A+B-1,H);if(A>1){F+=b(z,A-1,"...",false,P.messages.morePages)}for(N=A;N<=E;N++){F+=b(N==K?I.selectTemplate:z,N,N,true)}if(E<H){F+=b(z,N,"...",false,P.messages.morePages)}if(F===""){F=I.selectTemplate({text:0})}F=this.currentPageTemplate({text:K})+F;I.list.removeClass("k-state-expanded").html(F)}if(P.info){if(M>0){F=m.format(P.messages.display,Math.min((K-1)*L+1,M),Math.min(K*L,M),M)}else{F=P.messages.empty}I.element.find(".k-pager-info").html(F)}if(P.input){I.element.find(".k-pager-input").html(I.options.messages.page+'<input class="k-textbox">'+m.format(P.messages.of,H)).find("input").val(K).attr(t,M<1).toggleClass("k-state-disabled",M<1)}if(P.previousNext){h(I.element,K,H);n(I.element,K,H);o(I.element,K,H);j(I.element,K,H)}if(P.pageSizes){var D=I.element.find(".k-pager-sizes option[value='all']").length>0;var C=D&&L===this.dataSource.total();var O=L;if(C){L="all";O=P.messages.allPages}I.element.find(".k-pager-sizes select").val(L).filter("["+m.attr("role")+"=dropdownlist]").kendoDropDownList("value",L).kendoDropDownList("text",O)}},_keydown:function(B){if(B.keyCode===m.keys.ENTER){var z=this.element.find(".k-pager-input").find("input"),A=parseInt(z.val(),10);if(isNaN(A)||A<1||A>this.totalPages()){A=this.page()}z.val(A);this.page(A)}},_refreshClick:function(z){z.preventDefault();this.dataSource.read()},_change:function(B){var A=B.currentTarget.value;var z=parseInt(A,10);var C=this.dataSource;if(!isNaN(z)){C.pageSize(z)}else{if((A+"").toLowerCase()=="all"){C.pageSize(C.total())}}},_toggleActive:function(){this.list.toggleClass("k-state-expanded")},_click:function(A){var z=e(A.currentTarget);A.preventDefault();if(!z.is(".k-state-disabled")){this.page(z.attr(m.attr("page")))}},totalPages:function(){return Math.ceil((this.dataSource.total()||0)/(this.pageSize()||1))},pageSize:function(){return this.dataSource.pageSize()||this.dataSource.total()},page:function(z){if(z!==g){if(this.trigger("pageChange",{index:z})){return}this.dataSource.page(z);this.trigger(k,{index:z})}else{if(this.dataSource.total()>0){return this.dataSource.page()}else{return 0}}}});l.plugin(p)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.notification",["kendo.core","kendo.popup"],a)}(function(){var a={id:"notification",name:"Notification",category:"web",description:"The Notification widget displays user alerts.",depends:["core","popup"],features:[{id:"notification-fx",name:"Animation",description:"Support for animation",depends:["fx"]}]};(function(h,j){var t=window.kendo,c=t.ui.Widget,x=h.proxy,A=h.extend,b=window.setTimeout,i="click",g="show",z="hide",w="k-notification",d=".k-notification-wrap .k-i-close",p="k-hiding",e="info",B="success",m="warning",k="error",u="top",r="left",o="bottom",q="right",f="up",y=".kendoNotification",l='<div class="k-widget k-notification"></div>',s='<div class="k-notification-wrap"><span class="k-icon k-i-#=typeIcon#" title="#=typeIcon#"></span>#=content#<span class="k-icon k-i-close" title="Hide"></span></div>',n=s.replace("#=content#","#:content#");var v=c.extend({init:function(D,C){var E=this;c.fn.init.call(E,D,C);C=E.options;if(!C.appendTo||!h(C.appendTo).is(D)){E.element.hide()}E._compileTemplates(C.templates);E._guid="_"+t.guid();E._isRtl=t.support.isRtl(D);E._compileStacking(C.stacking,C.position.top,C.position.left);t.notify(E)},events:[g,z],options:{name:"Notification",position:{pinned:true,top:null,left:null,bottom:20,right:20},stacking:"default",hideOnClick:true,button:false,allowHideAfter:0,autoHideAfter:5000,appendTo:null,width:null,height:null,templates:[],animation:{open:{effects:"fade:in",duration:300},close:{effects:"fade:out",duration:600,hide:true}}},_compileTemplates:function(C){var D=this;var E=t.template;D._compiled={};h.each(C,function(F,G){D._compiled[G.type]=E(G.template||h("#"+G.templateId).html())});D._defaultCompiled=E(s);D._safeCompiled=E(n)},_getCompiled:function(C,D){var E=D?this._safeCompiled:this._defaultCompiled;return C?this._compiled[C]||E:E},_compileStacking:function(G,J,I){var H=this,F={paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0},D=I!==null?r:q,E,C;switch(G){case"down":E=o+" "+D;C=u+" "+D;delete F.paddingBottom;break;case q:E=u+" "+q;C=u+" "+r;delete F.paddingRight;break;case r:E=u+" "+r;C=u+" "+q;delete F.paddingLeft;break;case f:E=u+" "+D;C=o+" "+D;delete F.paddingTop;break;default:if(J!==null){E=o+" "+D;C=u+" "+D;delete F.paddingBottom}else{E=u+" "+D;C=o+" "+D;delete F.paddingTop}break}H._popupOrigin=E;H._popupPosition=C;H._popupPaddings=F},_attachPopupEvents:function(D,C){var F=this,I=D.allowHideAfter,E=!isNaN(I)&&I>0,H;function G(J){J.on(i+y,function(){F._hidePopup(C)})}if(D.hideOnClick){C.bind("activate",function(){if(E){b(function(){G(C.element)},I)}else{G(C.element)}})}else{if(D.button){H=C.element.find(d);if(E){b(function(){G(H)},I)}else{G(H)}}}},_showPopup:function(J,F){var H=this,G=F.autoHideAfter,D=F.position.left,I=F.position.top,E,C;C=h("."+H._guid+":not(."+p+")").last();E=new t.ui.Popup(J,{anchor:C[0]?C:document.body,origin:H._popupOrigin,position:H._popupPosition,animation:F.animation,modal:true,collision:"",isRtl:H._isRtl,close:function(){H._triggerHide(this.element)},deactivate:function(K){K.sender.element.off(y);K.sender.element.find(d).off(y);K.sender.destroy()}});H._attachPopupEvents(F,E);if(C[0]){E.open()}else{if(D===null){D=h(window).width()-J.width()-F.position.right}if(I===null){I=h(window).height()-J.height()-F.position.bottom}E.open(D,I)}E.wrapper.addClass(H._guid).css(A({margin:0,zIndex:10050},H._popupPaddings));if(F.position.pinned){E.wrapper.css("position","fixed");if(C[0]){H._togglePin(E.wrapper,true)}}else{if(!C[0]){H._togglePin(E.wrapper,false)}}if(G>0){b(function(){H._hidePopup(E)},G)}},_hidePopup:function(C){C.wrapper.addClass(p);C.close()},_togglePin:function(F,D){var E=h(window),C=D?-1:1;F.css({top:parseInt(F.css(u),10)+C*E.scrollTop(),left:parseInt(F.css(r),10)+C*E.scrollLeft()})},_attachStaticEvents:function(C,H){var E=this,G=C.allowHideAfter,D=!isNaN(G)&&G>0;function F(I){I.on(i+y,x(E._hideStatic,E,H))}if(C.hideOnClick){if(D){b(function(){F(H)},G)}else{F(H)}}else{if(C.button){if(D){b(function(){F(H.find(d))},G)}else{F(H.find(d))}}}},_showStatic:function(H,C){var E=this,D=C.autoHideAfter,F=C.animation,G=C.stacking==f||C.stacking==r?"prependTo":"appendTo";H.addClass(E._guid)[G](C.appendTo).hide().kendoAnimate(F.open||false);E._attachStaticEvents(C,H);if(D>0){b(function(){E._hideStatic(H)},D)}},_hideStatic:function(C){C.kendoAnimate(A(this.options.animation.close||false,{complete:function(){C.off(y).find(d).off(y);C.remove()}}));this._triggerHide(C)},_triggerHide:function(C){this.trigger(z,{element:C});this.angular("cleanup",function(){return{elements:C}})},show:function(G,E,H){var F=this,D=F.options,J=h(l),C,I;if(!E){E=e}if(G!==null&&G!==j&&G!==""){if(t.isFunction(G)){G=G()}I={typeIcon:E,content:""};if(h.isPlainObject(G)){C=A(I,G)}else{C=A(I,{content:G})}J.addClass(w+"-"+E).toggleClass(w+"-button",D.button).attr("data-role","alert").css({width:D.width,height:D.height}).append(F._getCompiled(E,H)(C));F.angular("compile",function(){return{elements:J,data:[{dataItem:C}]}});if(h(D.appendTo)[0]){F._showStatic(J,D)}else{F._showPopup(J,D)}F.trigger(g,{element:J})}return F},showText:function(D,C){this.show(D,C,true)},info:function(C){return this.show(C,e)},success:function(C){return this.show(C,B)},warning:function(C){return this.show(C,m)},error:function(C){return this.show(C,k)},hide:function(){var C=this,D=C.getNotifications();if(C.options.appendTo){D.each(function(E,F){C._hideStatic(h(F))})}else{D.each(function(E,G){var F=h(G).data("kendoPopup");if(F){C._hidePopup(F)}})}return C},getNotifications:function(){var D=this,C=h("."+D._guid+":not(."+p+")");if(D.options.appendTo){return C}else{return C.children("."+w)}},setOptions:function(E){var D=this,C;c.fn.setOptions.call(D,E);C=D.options;if(E.templates!==j){D._compileTemplates(C.templates)}if(E.stacking!==j||E.position!==j){D._compileStacking(C.stacking,C.position.top,C.position.left)}},destroy:function(){c.fn.destroy.call(this);this.getNotifications().off(y).find(d).off(y)}});t.ui.plugin(v)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.tooltip",["kendo.core","kendo.popup"],a)}(function(){var a={id:"tooltip",name:"Tooltip",category:"web",description:"The Tooltip widget displays a popup hint for a given html element.",depends:["core","popup"],features:[{id:"tooltip-fx",name:"Animation",description:"Support for animation",depends:["fx"]}]};(function(h,j){var v=window.kendo,c=v.ui.Widget,k=v.ui.Popup,b=v.isFunction,u=h.isPlainObject,C=h.extend,x=h.proxy,i=h(document),w=v.isLocalUrl,e="_tt_active",f="aria-describedby",g="show",A="hide",l="error",s="contentLoad",D="requestStart",E="k-content-frame",t='<div role="tooltip" class="k-widget k-tooltip#if (!autoHide) {# k-tooltip-closable#}#">#if (!autoHide) {# <div class="k-tooltip-button"><a href="\\#" class="k-icon k-i-close" title="Close"></a></div> #}#<div class="k-tooltip-content"></div>#if (callout){ #<div class="k-callout k-callout-#=dir#"></div>#}#</div>',n=v.template("<iframe frameborder='0' class='"+E+"' src='#= content.url #'>This page requires frames in order to show content</iframe>"),z=".kendoTooltip",r={bottom:{origin:"bottom center",position:"top center"},top:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"},center:{position:"center center",origin:"center center"}},G={top:"bottom",bottom:"top",left:"right",right:"left",center:"center"},m={bottom:"n",top:"s",left:"e",right:"w",center:"n"},o={horizontal:{offset:"top",size:"outerHeight"},vertical:{offset:"left",size:"outerWidth"}},q=function(H){return H.target.data(v.ns+"title")};function p(H){while(H.length){B(H);H=H.parent()}}function B(H){var I=H.data(v.ns+"title");if(I){H.attr("title",I);H.removeData(v.ns+"title")}}function F(H){var I=H.attr("title");if(I){H.data(v.ns+"title",I);H.attr("title","")}}function d(H){while(H.length&&!H.is("body")){F(H);H=H.parent()}}var y=c.extend({init:function(I,H){var K=this,J;c.fn.init.call(K,I,H);J=K.options.position.match(/left|right/)?"horizontal":"vertical";K.dimensions=o[J];K._documentKeyDownHandler=x(K._documentKeyDown,K);K.element.on(K.options.showOn+z,K.options.filter,x(K._showOn,K)).on("mouseenter"+z,K.options.filter,x(K._mouseenter,K));if(this.options.autoHide){K.element.on("mouseleave"+z,K.options.filter,x(K._mouseleave,K))}},options:{name:"Tooltip",filter:"",content:q,showAfter:100,callout:true,position:"bottom",showOn:"mouseenter",autoHide:true,width:null,height:null,animation:{open:{effects:"fade:in",duration:0},close:{effects:"fade:out",duration:40,hide:true}}},events:[g,A,s,l,D],_mouseenter:function(H){d(h(H.currentTarget))},_showOn:function(J){var H=this;var I=h(J.currentTarget);if(H.options.showOn&&H.options.showOn.match(/click|focus/)){H._show(I)}else{clearTimeout(H.timeout);H.timeout=setTimeout(function(){H._show(I)},H.options.showAfter)}},_appendContent:function(M){var K=this,L=K.options.content,I=K.content,H=K.options.iframe,J;if(u(L)&&L.url){if(!("iframe" in K.options)){H=!w(L.url)}K.trigger(D,{options:L,target:M});if(!H){I.empty();v.ui.progress(I,true);K._ajaxRequest(L)}else{I.hide();J=I.find("."+E)[0];if(J){J.src=L.url||J.src}else{I.html(n({content:L}))}I.find("."+E).off("load"+z).on("load"+z,function(){K.trigger(s);I.show()})}}else{if(L&&b(L)){L=L({sender:this,target:M});I.html(L||"")}else{I.html(L)}}K.angular("compile",function(){return{elements:I}})},_ajaxRequest:function(H){var I=this;jQuery.ajax(C({type:"GET",dataType:"html",cache:false,error:function(K,J){v.ui.progress(I.content,false);I.trigger(l,{status:J,xhr:K})},success:x(function(J){v.ui.progress(I.content,false);I.content.html(J);I.trigger(s)},I)},H))},_documentKeyDown:function(H){if(H.keyCode===v.keys.ESC){this.hide()}},refresh:function(){var I=this,H=I.popup;if(H&&H.options.anchor){I._appendContent(H.options.anchor)}},hide:function(){if(this.popup){this.popup.close()}},show:function(H){H=H||this.element;d(H);this._show(H)},_show:function(J){var H=this,I=H.target();if(!H.popup){H._initPopup()}if(I&&I[0]!=J[0]){H.popup.close();H.popup.element.kendoStop(true,true)}if(!I||I[0]!=J[0]){H._appendContent(J);H.popup.options.anchor=J}H.popup.one("deactivate",function(){p(J);J.removeAttr(f);this.element.removeAttr("id").attr("aria-hidden",true);i.off("keydown"+z,H._documentKeyDownHandler)});H.popup.open()},_initPopup:function(){var I=this,H=I.options,J=h(v.template(t)({callout:H.callout&&H.position!=="center",dir:m[H.position],autoHide:H.autoHide}));I.popup=new k(J,C({activate:function(){var K=this.options.anchor,L=K[0].id||I.element[0].id;if(L){K.attr(f,L+e);this.element.attr("id",L+e)}if(H.callout){I._positionCallout()}this.element.removeAttr("aria-hidden");i.on("keydown"+z,I._documentKeyDownHandler);I.trigger(g)},close:function(){I.trigger(A)},copyAnchorStyles:false,animation:H.animation},r[H.position]));J.css({width:H.width,height:H.height});I.content=J.find(".k-tooltip-content");I.arrow=J.find(".k-callout");if(H.autoHide){J.on("mouseleave"+z,x(I._mouseleave,I))}else{J.on("click"+z,".k-tooltip-button",x(I._closeButtonClick,I))}},_closeButtonClick:function(H){H.preventDefault();this.hide()},_mouseleave:function(K){if(this.popup){var I=h(K.currentTarget),L=I.offset(),J=K.pageX,H=K.pageY;L.right=L.left+v._outerWidth(I);L.bottom=L.top+v._outerHeight(I);if(J>L.left&&J<L.right&&H>L.top&&H<L.bottom){return}this.popup.close()}else{p(h(K.currentTarget))}clearTimeout(this.timeout)},_positionCallout:function(){var O=this,N=O.options.position,H=O.dimensions,L=H.offset,J=O.popup,M=J.options.anchor,K=h(M).offset(),Q=parseInt(O.arrow.css("border-top-width"),10),I=h(J.element).offset(),R=m[J.flipped?G[N]:N],P=K[L]-I[L]+h(M)[H.size]()/2-Q;O.arrow.removeClass("k-callout-n k-callout-s k-callout-w k-callout-e").addClass("k-callout-"+R).css(L,P)},target:function(){if(this.popup){return this.popup.options.anchor}return null},destroy:function(){var H=this.popup;if(H){H.element.off(z);H.destroy()}clearTimeout(this.timeout);this.element.off(z);i.off("keydown"+z,this._documentKeyDownHandler);c.fn.destroy.call(this)}});v.ui.plugin(y)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.list",["kendo.data","kendo.popup"],a)}(function(){var a={id:"list",name:"List",category:"framework",depends:["data","popup"],hidden:true};(function(D,o){var E=window.kendo,H=E.ui,J=E._outerWidth,O=E._outerHeight,h=H.Widget,z=E.keys,I=E.support,t=E.htmlEncode,j=E._activeElement,s=E.data.ObservableArray,w="id",C="change",F="k-state-focused",r="k-state-hover",v="k-i-loading",G="k-loading-hidden",K="open",N="close",d="cascade",u="select",A="selected",M="requestStart",l="requestEnd",g="width",n=D.extend,L=D.proxy,x=D.isArray,e=I.browser,m=e.msie,Q=m&&e.version<9,R=/"/g,b={ComboBox:"DropDownList",DropDownList:"ComboBox"};var p=E.ui.DataBoundWidget.extend({init:function(T,S){var V=this,U=V.ns,W;h.fn.init.call(V,T,S);T=V.element;S=V.options;V._isSelect=T.is(u);if(V._isSelect&&V.element[0].length){if(!S.dataSource){S.dataTextField=S.dataTextField||"text";S.dataValueField=S.dataValueField||"value"}}V.ul=D('<ul unselectable="on" class="k-list k-reset"/>').attr({tabIndex:-1,"aria-hidden":true});V.list=D("<div class='k-list-container'/>").append(V.ul).on("mousedown"+U,L(V._listMousedown,V));W=T.attr(w);if(W){V.list.attr(w,W+"-list");V.ul.attr(w,W+"_listbox")}V._header();V._noData();V._footer();V._accessors();V._initValue()},options:{valuePrimitive:false,footerTemplate:"",headerTemplate:"",noDataTemplate:"No data found."},setOptions:function(S){h.fn.setOptions.call(this,S);if(S&&S.enable!==o){S.enabled=S.enable}this._header();this._noData();this._footer();this._renderFooter();this._renderNoData()},focus:function(){this._focused.focus()},readonly:function(S){this._editable({readonly:S===o?true:S,disable:false})},enable:function(S){this._editable({readonly:false,disable:!(S=S===o?true:S)})},_listOptions:function(U){var V=this;var T=V.options;var W=T.virtual;var S=L(V._listBound,V);W=typeof W==="object"?W:{};U=D.extend({autoBind:false,selectable:true,dataSource:V.dataSource,click:L(V._click,V),change:L(V._listChange,V),activate:L(V._activateItem,V),deactivate:L(V._deactivateItem,V),dataBinding:function(){V.trigger("dataBinding")},dataBound:S,height:T.height,dataValueField:T.dataValueField,dataTextField:T.dataTextField,groupTemplate:T.groupTemplate,fixedGroupTemplate:T.fixedGroupTemplate,template:T.template},U,W);if(!U.template){U.template="#:"+E.expr(U.dataTextField,"data")+"#"}if(T.$angular){U.$angular=T.$angular}return U},_initList:function(){var T=this;var S=T._listOptions({selectedItemChange:L(T._listChange,T)});if(!T.options.virtual){T.listView=new E.ui.StaticList(T.ul,S)}else{T.listView=new E.ui.VirtualList(T.ul,S)}T.listView.bind("listBound",L(T._listBound,T));T._setListValue()},_setListValue:function(S){S=S||this.options.value;if(S!==o){this.listView.value(S).done(L(this._updateSelectionState,this))}},_updateSelectionState:D.noop,_listMousedown:function(S){if(!this.filterInput||this.filterInput[0]!==S.target){S.preventDefault()}},_isFilterEnabled:function(){var S=this.options.filter;return S&&S!=="none"},_hideClear:function(){var S=this;if(S._clear){this._clear.addClass(G)}},_showClear:function(){var S=this;if(S._clear){this._clear.removeClass(G)}},_clearValue:function(){this._clearText();this._accessor("");this.listView.value([]);if(this._isFilterEnabled()){this._filter({word:"",open:false})}this._change()},_clearText:function(){this.text("")},_clearFilter:function(){if(!this.options.virtual){this.listView.bound(false)}this._filterSource()},_filterSource:function(U,T){var Z=this;var ab=Z.options;var S=Z.dataSource;var aa=n({},S.filter()||{});var W=U||aa.filters&&aa.filters.length&&!U;var Y=c(aa,ab.dataTextField);if((U||Y)&&Z.trigger("filtering",{filter:U})){return}var V={filters:[],logic:"and"};if(k(U)){V.filters.push(U)}if(k(aa)){V.filters.push(aa)}if(Z._cascading){this.listView.setDSFilter(V)}var X=n({},{page:W?1:S.page(),pageSize:W?S.options.pageSize:S.pageSize(),sort:S.sort(),filter:S.filter(),group:S.group(),aggregate:S.aggregate()},{filter:V});S[T?"read":"query"](S._mergeState(X))},_angularElement:function(S,T){if(!S){return}this.angular(T,function(){return{elements:S}})},_noData:function(){var S=D(this.noData);var T=this.options.noDataTemplate;this.angular("cleanup",function(){return{elements:S}});E.destroy(S);S.remove();if(!T){this.noData=null;return}this.noData=D('<div class="k-nodata" style="display:none"><div></div></div>').appendTo(this.list);this.noDataTemplate=typeof T!=="function"?E.template(T):T},_renderNoData:function(){var S=this.noData;if(!S){return}this._angularElement(S,"cleanup");S.children(":first").html(this.noDataTemplate({instance:this}));this._angularElement(S,"compile")},_toggleNoData:function(S){D(this.noData).toggle(S)},_footer:function(){var T=D(this.footer);var S=this.options.footerTemplate;this._angularElement(T,"cleanup");E.destroy(T);T.remove();if(!S){this.footer=null;return}this.footer=D('<div class="k-footer"></div>').appendTo(this.list);this.footerTemplate=typeof S!=="function"?E.template(S):S},_renderFooter:function(){var S=this.footer;if(!S){return}this._angularElement(S,"cleanup");S.html(this.footerTemplate({instance:this}));this._angularElement(S,"compile")},_header:function(){var U=D(this.header);var S=this.options.headerTemplate;this._angularElement(U,"cleanup");E.destroy(U);U.remove();if(!S){this.header=null;return}var T=typeof S!=="function"?E.template(S):S;U=D(T({}));this.header=U[0]?U:null;this.list.prepend(U);this._angularElement(this.header,"compile")},_allowOpening:function(){return this.options.noDataTemplate||this.dataSource.flatView().length},_initValue:function(){var S=this,T=S.options.value;if(T!==null){S.element.val(T)}else{T=S._accessor();S.options.value=T}S._old=T},_ignoreCase:function(){var T=this,S=T.dataSource.reader.model,U;if(S&&S.fields){U=S.fields[T.options.dataTextField];if(U&&U.type&&U.type!=="string"){T.options.ignoreCase=false}}},_focus:function(S){return this.listView.focus(S)},_filter:function(T){var U=this;var X=U.options;var S=X.ignoreCase;var V=X.dataTextField;var W={value:S?T.word.toLowerCase():T.word,field:V,operator:X.filter,ignoreCase:S};U._open=T.open;U._filterSource(W)},search:function(T){var S=this.options;T=typeof T==="string"?T:this._inputValue();clearTimeout(this._typingTimeout);if(!S.enforceMinLength&&!T.length||T.length>=S.minLength){this._state="filter";if(!this._isFilterEnabled()){this._searchByWord(T)}else{this._filter({word:T,open:true})}}},current:function(S){return this._focus(S)},items:function(){return this.ul[0].children},destroy:function(){var T=this;var S=T.ns;h.fn.destroy.call(T);T._unbindDataSource();T.listView.destroy();T.list.off(S);T.popup.destroy();if(T._form){T._form.off("reset",T._resetHandler)}},dataItem:function(S){var T=this;if(S===o){return T.listView.selectedDataItems()[0]}if(typeof S!=="number"){if(T.options.virtual){return T.dataSource.getByUid(D(S).data("uid"))}S=D(T.items()).index(S)}return T.dataSource.flatView()[S]},_activateItem:function(){var S=this.listView.focus();if(S){this._focused.add(this.filterInput).attr("aria-activedescendant",S.attr("id"))}},_deactivateItem:function(){this._focused.add(this.filterInput).removeAttr("aria-activedescendant")},_accessors:function(){var X=this;var W=X.element;var V=X.options;var S=E.getter;var T=W.attr(E.attr("text-field"));var U=W.attr(E.attr("value-field"));if(!V.dataTextField&&T){V.dataTextField=T}if(!V.dataValueField&&U){V.dataValueField=U}X._text=S(V.dataTextField);X._value=S(V.dataValueField)},_aria:function(V){var U=this,S=U.options,T=U._focused.add(U.filterInput);if(S.suggest!==o){T.attr("aria-autocomplete",S.suggest?"both":"list")}V=V?V+" "+U.ul[0].id:U.ul[0].id;T.attr("aria-owns",V);U.ul.attr("aria-live",!U._isFilterEnabled()?"off":"polite")},_blur:function(){var S=this;S._change();S.close()},_change:function(){var U=this;var T=U.selectedIndex;var W=U.options.value;var V=U.value();var S;if(U._isSelect&&!U.listView.bound()&&W){V=W}if(V!==f(U._old,typeof V)){S=true}else{if(T!==o&&T!==U._oldIndex){S=true}}if(S){U._old=V;U._oldIndex=T;if(!U._typing){U.element.trigger(C)}U.trigger(C)}U.typing=false},_data:function(){return this.dataSource.view()},_enable:function(){var U=this,S=U.options,T=U.element.is("[disabled]");if(S.enable!==o){S.enabled=S.enable}if(!S.enabled||T){U.enable(false)}else{U.readonly(U.element.is("[readonly]"))}},_dataValue:function(S){var T=this._value(S);if(T===o){T=this._text(S)}return T},_offsetHeight:function(){var S=0;var T=this.listView.content.prevAll(":visible");T.each(function(){var U=D(this);if(U.hasClass("k-list-filter")){S+=O(U.children())}else{S+=O(U)}});return S},_height:function(X){var W=this;var Y=W.list;var S=W.options.height;var Z=W.popup.visible();var V;var T;var U;if(X||W.options.noDataTemplate){T=Y.add(Y.parent(".k-animation-container")).show();if(!Y.is(":visible")){T.hide();return}S=W.listView.content[0].scrollHeight>S?S:"auto";T.height(S);if(S!=="auto"){V=W._offsetHeight();U=O(D(W.footer))||0;S=S-V-U}W.listView.content.height(S);if(!Z){T.hide()}}return S},_adjustListWidth:function(){var V=this.list,U=V[0].style.width,W=this.wrapper,T,S;if(!V.data(g)&&U){return}T=window.getComputedStyle?window.getComputedStyle(W[0],null):0;S=parseFloat(T&&T.width)||J(W);if(T&&e.msie){S+=parseFloat(T.paddingLeft)+parseFloat(T.paddingRight)+parseFloat(T.borderLeftWidth)+parseFloat(T.borderRightWidth)}if(V.css("box-sizing")!=="border-box"){U=S-(J(V)-V.width())}else{U=S}V.css({fontFamily:W.css("font-family"),width:this.options.autoWidth?"auto":U,minWidth:U}).data(g,U);return true},_openHandler:function(S){this._adjustListWidth();if(this.trigger(K)){S.preventDefault()}else{this._focused.attr("aria-expanded",true);this.ul.attr("aria-hidden",false)}},_closeHandler:function(S){if(this.trigger(N)){S.preventDefault()}else{this._focused.attr("aria-expanded",false);this.ul.attr("aria-hidden",true)}},_focusItem:function(){var S=this.listView;var U=!S.focus();var T=q(S.select());if(T===o&&this.options.highlightFirst&&U){T=0}if(T!==o){S.focus(T)}else{if(U){S.scrollToIndex(0)}}},_calculateGroupPadding:function(T){var S=this.ul.children(".k-first:first");var U=this.listView.content.prev(".k-group-header");var V=0;if(U[0]&&U[0].style.display!=="none"){if(T!=="auto"){V=E.support.scrollbar()}V+=parseFloat(S.css("border-right-width"),10)+parseFloat(S.children(".k-group").css("padding-right"),10);U.css("padding-right",V)}},_calculatePopupHeight:function(T){var S=this._height(this.dataSource.flatView().length||T);this._calculateGroupPadding(S)},_resizePopup:function(S){if(this.options.virtual){return}if(!this.popup.element.is(":visible")){this.popup.one("open",function(T){return L(function(){this._calculatePopupHeight(T)},this)}.call(this,S))}else{this._calculatePopupHeight(S)}},_popup:function(){var S=this;S.popup=new H.Popup(S.list,n({},S.options.popup,{anchor:S.wrapper,open:L(S._openHandler,S),close:L(S._closeHandler,S),animation:S.options.animation,isRtl:I.isRtl(S.wrapper)}))},_makeUnselectable:function(){if(Q){this.list.find("*").not(".k-textbox").attr("unselectable","on")}},_toggleHover:function(S){D(S.currentTarget).toggleClass(r,S.type==="mouseenter")},_toggle:function(T,V){var U=this;var S=I.mobileOS&&(I.touch||I.MSPointers||I.pointers);T=T!==o?T:!U.popup.visible();if(!V&&!S&&U._focused[0]!==j()){U._prevent=true;U._focused.focus();U._prevent=false}U[T?K:N]()},_triggerCascade:function(){var S=this;if(!S._cascadeTriggered||S._old!==S.value()||S._oldIndex!==S.selectedIndex){S._cascadeTriggered=true;S.trigger(d,{userTriggered:S._userTriggered})}},_triggerChange:function(){if(this._valueBeforeCascade!==this.value()){this.trigger(C)}},_unbindDataSource:function(){var S=this;S.dataSource.unbind(M,S._requestStartHandler).unbind(l,S._requestEndHandler).unbind("error",S._errorHandler)},requireValueMapper:function(S,U){var T=(S.value instanceof Array?S.value.length:S.value)||(U instanceof Array?U.length:U);if(T&&S.virtual&&typeof S.virtual.valueMapper!=="function"){throw new Error("ValueMapper is not provided while the value is being set. See http://docs.telerik.com/kendo-ui/controls/editors/combobox/virtualization#the-valuemapper-function")}}});function f(T,S){if(T!==o&&T!==""&&T!==null){if(S==="boolean"){T=Boolean(T)}else{if(S==="number"){T=Number(T)}else{if(S==="string"){T=T.toString()}}}}return T}n(p,{inArray:function(V,T){var S,U,W=T.children;if(!V||V.parentNode!==T){return -1}for(S=0,U=W.length;S<U;S++){if(V===W[S]){return S}}return -1},unifyType:f});E.ui.List=p;H.Select=p.extend({init:function(T,S){p.fn.init.call(this,T,S);this._initial=this.element.val()},setDataSource:function(U){var T=this;var S;T.options.dataSource=U;T._dataSource();if(T.listView.bound()){T._initialIndex=null}T.listView.setDataSource(T.dataSource);if(T.options.autoBind){T.dataSource.fetch()}S=T._parentWidget();if(S){T._cascadeSelect(S)}},close:function(){this.popup.close()},select:function(S){var T=this;if(S===o){return T.selectedIndex}else{return T._select(S).done(function(){T._old=T._accessor();T._oldIndex=T.selectedIndex})}},_accessor:function(T,S){return this[this._isSelect?"_accessorSelect":"_accessorInput"](T,S)},_accessorInput:function(T){var S=this.element[0];if(T===o){return S.value}else{if(T===null){T=""}S.value=T}},_accessorSelect:function(V,S){var U=this.element[0];var T;if(V===o){return i(U).value||""}i(U).selected=false;if(S===o){S=-1}T=V!==null&&V!=="";if(T&&S==-1){this._custom(V)}else{if(V){U.value=V}else{U.selectedIndex=S}}},_custom:function(V){var T=this;var S=T.element;var U=T._customOption;if(!U){U=D("<option/>");T._customOption=U;S.append(U)}U.text(V);U[0].selected=true},_hideBusy:function(){var S=this;clearTimeout(S._busy);S._arrowIcon.removeClass(v);S._focused.attr("aria-busy",false);S._busy=null;S._showClear()},_showBusy:function(){var S=this;S._request=true;if(S._busy){return}S._busy=setTimeout(function(){if(S._arrowIcon){S._focused.attr("aria-busy",true);S._arrowIcon.addClass(v);S._hideClear()}},100)},_requestEnd:function(){this._request=false;this._hideBusy()},_dataSource:function(){var V=this,U=V.element,T=V.options,W=T.dataSource||{},S;W=D.isArray(W)?{data:W}:W;if(V._isSelect){S=U[0].selectedIndex;if(S>-1){T.index=S}W.select=U;W.fields=[{field:T.dataTextField},{field:T.dataValueField}]}if(V.dataSource){V._unbindDataSource()}else{V._requestStartHandler=L(V._showBusy,V);V._requestEndHandler=L(V._requestEnd,V);V._errorHandler=L(V._hideBusy,V)}V.dataSource=E.data.DataSource.create(W).bind(M,V._requestStartHandler).bind(l,V._requestEndHandler).bind("error",V._errorHandler)},_firstItem:function(){this.listView.focusFirst()},_lastItem:function(){this.listView.focusLast()},_nextItem:function(){this.listView.focusNext()},_prevItem:function(){this.listView.focusPrev()},_move:function(W){var U=this;var Z=U.listView;var ab=W.keyCode;var aa=ab===z.DOWN;var S;var T;var X;if(ab===z.UP||aa){if(W.altKey){U.toggle(aa)}else{if(!Z.bound()){if(!U._fetch){U.dataSource.one(C,function(){U._fetch=false;U._move(W)});U._fetch=true;U._filterSource()}W.preventDefault();return true}X=U._focus();if(!U._fetch&&(!X||X.hasClass("k-state-selected"))){if(aa){U._nextItem();if(!U._focus()){U._lastItem()}}else{U._prevItem();if(!U._focus()){U._firstItem()}}}S=Z.dataItemByIndex(Z.getElementIndex(U._focus()));if(U.trigger(u,{dataItem:S,item:U._focus()})){U._focus(X);return}U._select(U._focus(),true).done(function(){if(!U.popup.visible()){U._blur()}})}W.preventDefault();T=true}else{if(ab===z.ENTER||ab===z.TAB){if(U.popup.visible()){W.preventDefault()}X=U._focus();S=U.dataItem();if(!U.popup.visible()&&(!S||U.text()!==U._text(S))){X=null}var ac=U.filterInput&&U.filterInput[0]===j();if(X){S=Z.dataItemByIndex(Z.getElementIndex(X));var V=U._value(S)!==p.unifyType(U.value(),typeof U._value(S));if(V&&U.trigger(u,{dataItem:S,item:X})){return}U._select(X)}else{if(U.input){U._accessor(U.input.val());U.listView.value(U.input.val())}}if(U._focusElement){U._focusElement(U.wrapper)}if(ac&&ab===z.TAB){U.wrapper.focusout()}else{U._blur()}U.close();T=true}else{if(ab===z.ESC){if(U.popup.visible()){W.preventDefault()}U.close();T=true}else{if(U.popup.visible()&&(ab===z.PAGEDOWN||ab===z.PAGEUP)){W.preventDefault();var Y=ab===z.PAGEDOWN?1:-1;Z.scrollWith(Y*Z.screenHeight());T=true}}}}return T},_fetchData:function(){var S=this;var T=!!S.dataSource.view().length;if(S._request||S.options.cascadeFrom){return}if(!S.listView.bound()&&!S._fetch&&!T){S._fetch=true;S.dataSource.fetch().done(function(){S._fetch=false})}},_options:function(W,aa,ac){var Z=this,X=Z.element,V=X[0],U=W.length,ae="",Y,T,ad,S,ab=0;if(aa){ae=aa}for(;ab<U;ab++){Y="<option";T=W[ab];ad=Z._text(T);S=Z._value(T);if(S!==o){S+="";if(S.indexOf('"')!==-1){S=S.replace(R,"&quot;")}Y+=' value="'+S+'"'}Y+=">";if(ad!==o){Y+=t(ad)}Y+="</option>";ae+=Y}X.html(ae);if(ac!==o){V.value=ac;if(V.value&&!ac){V.selectedIndex=-1}}if(V.selectedIndex!==-1){Y=i(V);if(Y){Y.setAttribute(A,A)}}},_reset:function(){var U=this,S=U.element,V=S.attr("form"),T=V?D("#"+V):S.closest("form");if(T[0]){U._resetHandler=function(){setTimeout(function(){U.value(U._initial)})};U._form=T.on("reset",U._resetHandler)}},_parentWidget:function(){var T=this.options.name;if(!this.options.cascadeFrom){return}var S=D("#"+this.options.cascadeFrom);var U=S.data("kendo"+T);if(!U){U=S.data("kendo"+b[T])}return U},_cascade:function(){var V=this;var T=V.options;var S=T.cascadeFrom;var U;if(S){U=V._parentWidget();if(!U){return}V._cascadeHandlerProxy=L(V._cascadeHandler,V);V._cascadeFilterRequests=[];T.autoBind=false;U.bind("set",function(){V.one("set",function(W){V._selectedValue=W.value})});U.first(d,V._cascadeHandlerProxy);if(U.listView.bound()){V._toggleCascadeOnFocus();V._cascadeSelect(U)}else{U.one("dataBound",function(){V._toggleCascadeOnFocus()});if(!U.value()){V.enable(false)}}}},_toggleCascadeOnFocus:function(){var U=this;var T=U._parentWidget();var S=m?"blur":"focusout";T._focused.add(T.filterInput).bind("focus",function(){T.unbind(d,U._cascadeHandlerProxy);T.first(C,U._cascadeHandlerProxy)});T._focused.add(T.filterInput).bind(S,function(){T.unbind(C,U._cascadeHandlerProxy);T.first(d,U._cascadeHandlerProxy)})},_cascadeHandler:function(U){var S=this._parentWidget();var T=this.value();this._userTriggered=U.userTriggered;if(this.listView.bound()){this._clearSelection(S,true)}this._cascadeSelect(S,T)},_cascadeChange:function(S){var T=this;var U=T._accessor()||T._selectedValue;if(!T._cascadeFilterRequests.length){T._selectedValue=null}if(T._userTriggered){T._clearSelection(S,true)}else{if(U){if(U!==T.listView.value()[0]){T.value(U)}if(!T.dataSource.view()[0]||T.selectedIndex===-1){T._clearSelection(S,true)}}else{if(T.dataSource.flatView().length){T.select(T.options.index)}}}T.enable();T._triggerCascade();T._triggerChange();T._userTriggered=false},_cascadeSelect:function(V,Y){var X=this;var T=V.dataItem();var Z=T?V._value(T):null;var S=X.options.cascadeFromField||V.options.dataValueField;var W;X._valueBeforeCascade=Y!==o?Y:X.value();if(Z||Z===0){W=X.dataSource.filter()||{};c(W,S);var U=function(){var aa=X._cascadeFilterRequests.shift();if(aa){X.unbind("dataBound",aa)}aa=X._cascadeFilterRequests[0];if(aa){X.first("dataBound",aa)}X._cascadeChange(V)};X._cascadeFilterRequests.push(U);if(X._cascadeFilterRequests.length===1){X.first("dataBound",U)}X._cascading=true;X._filterSource({field:S,operator:"eq",value:Z});X._cascading=false}else{X.enable(false);X._clearSelection(V);X._triggerCascade();X._triggerChange();X._userTriggered=false}}});var B=".StaticList";var P=E.ui.DataBoundWidget.extend({init:function(T,S){h.fn.init.call(this,T,S);this.element.attr("role","listbox").on("click"+B,"li",L(this._click,this)).on("mouseenter"+B,"li",function(){D(this).addClass(r)}).on("mouseleave"+B,"li",function(){D(this).removeClass(r)});this.content=this.element.wrap("<div class='k-list-scroller' unselectable='on'></div>").parent();this.header=this.content.before('<div class="k-group-header" style="display:none"></div>').prev();this.bound(false);this._optionID=E.guid();this._selectedIndices=[];this._view=[];this._dataItems=[];this._values=[];var U=this.options.value;if(U){this._values=D.isArray(U)?U.slice(0):[U]}this._getter();this._templates();this.setDataSource(this.options.dataSource);this._onScroll=L(function(){var V=this;clearTimeout(V._scrollId);V._scrollId=setTimeout(function(){V._renderHeader()},50)},this)},options:{name:"StaticList",dataValueField:null,valuePrimitive:false,selectable:true,template:null,groupTemplate:null,fixedGroupTemplate:null},events:["click",C,"activate","deactivate","dataBinding","dataBound","selectedItemChange"],setDataSource:function(U){var S=this;var V=U||{};var T;V=D.isArray(V)?{data:V}:V;V=E.data.DataSource.create(V);if(S.dataSource){S.dataSource.unbind(C,S._refreshHandler);T=S.value();S.value([]);S.bound(false);S.value(T)}else{S._refreshHandler=L(S.refresh,S)}S.setDSFilter(V.filter());S.dataSource=V.bind(C,S._refreshHandler);S._fixedHeader()},skip:function(){return this.dataSource.skip()},setOptions:function(S){h.fn.setOptions.call(this,S);this._getter();this._templates();this._render()},destroy:function(){this.element.off(B);if(this._refreshHandler){this.dataSource.unbind(C,this._refreshHandler)}clearTimeout(this._scrollId);h.fn.destroy.call(this)},dataItemByIndex:function(S){return this.dataSource.flatView()[S]},screenHeight:function(){return this.content[0].clientHeight},scrollToIndex:function(S){var T=this.element[0].children[S];if(T){this.scroll(T)}},scrollWith:function(S){this.content.scrollTop(this.content.scrollTop()+S)},scroll:function(X){if(!X){return}if(X[0]){X=X[0]}var W=this.content[0],Y=X.offsetTop,U=X.offsetHeight,T=W.scrollTop,S=W.clientHeight,V=Y+U;if(T>Y){T=Y}else{if(V>T+S){T=V-S}}W.scrollTop=T},selectedDataItems:function(S){if(S===o){return this._dataItems.slice()}this._dataItems=S;this._values=this._getValues(S)},_getValues:function(T){var S=this._valueGetter;return D.map(T,function(U){return S(U)})},focusNext:function(){var S=this.focus();if(!S){S=0}else{S=S.next()}this.focus(S)},focusPrev:function(){var S=this.focus();if(!S){S=this.element[0].children.length-1}else{S=S.prev()}this.focus(S)},focusFirst:function(){this.focus(this.element[0].children[0])},focusLast:function(){this.focus(q(this.element[0].children))},focus:function(T){var U=this;var V=U._optionID;var S;if(T===o){return U._current}T=q(U._get(T));T=D(this.element[0].children[T]);if(U._current){U._current.removeClass(F).removeAttr("aria-selected").removeAttr(w);U.trigger("deactivate")}S=!!T[0];if(S){T.addClass(F);U.scroll(T);T.attr("id",V)}U._current=S?T:null;U.trigger("activate")},focusIndex:function(){return this.focus()?this.focus().index():o},skipUpdate:function(S){this._skipUpdate=S},select:function(Z){var U=this;var X=U.options.selectable;var Y=X!=="multiple"&&X!==false;var S=U._selectedIndices;var W=[];var T=[];var ab;if(Z===o){return S.slice()}Z=U._get(Z);if(Z.length===1&&Z[0]===-1){Z=[]}var aa=D.Deferred().resolve();var V=U.isFiltered();if(V&&!Y&&U._deselectFiltered(Z)){return aa}if(Y&&!V&&D.inArray(q(Z),S)!==-1){if(U._dataItems.length&&U._view.length){U._dataItems=[U._view[S[0]].item]}return aa}ab=U._deselect(Z);T=ab.removed;Z=ab.indices;if(Z.length){if(Y){Z=[q(Z)]}W=U._select(Z)}if(W.length||T.length){U._valueComparer=null;U.trigger(C,{added:W,removed:T})}return aa},removeAt:function(S){this._selectedIndices.splice(S,1);this._values.splice(S,1);this._valueComparer=null;return{position:S,dataItem:this._dataItems.splice(S,1)[0]}},setValue:function(S){S=D.isArray(S)||S instanceof s?S.slice(0):[S];this._values=S;this._valueComparer=null},value:function(U){var T=this;var S=T._valueDeferred;var V;if(U===o){return T._values.slice()}T.setValue(U);if(!S||S.state()==="resolved"){T._valueDeferred=S=D.Deferred()}if(T.bound()){V=T._valueIndices(T._values);if(T.options.selectable==="multiple"){T.select(-1)}T.select(V);S.resolve()}T._skipUpdate=false;return S},items:function(){return this.element.children(".k-item")},_click:function(S){if(!S.isDefaultPrevented()){if(!this.trigger("click",{item:D(S.currentTarget)})){this.select(S.currentTarget)}}},_valueExpr:function(W,U){var X=this;var T=0;var S;var V;var Y=[];if(!X._valueComparer||X._valueType!==W){X._valueType=W;for(;T<U.length;T++){Y.push(f(U[T],W))}S="for (var idx = 0; idx < "+Y.length+"; idx++) { if (current === values[idx]) {   return idx; }} return -1;";V=new Function("current","values",S);X._valueComparer=function(Z){return V(Z,Y)}}return X._valueComparer},_dataItemPosition:function(U,T){var V=this._valueGetter(U);var S=this._valueExpr(typeof V,T);return S(V)},_getter:function(){this._valueGetter=E.getter(this.options.dataValueField)},_deselect:function(ae){var aa=this;var S=aa.element[0].children;var ab=aa.options.selectable;var T=aa._selectedIndices;var ac=aa._dataItems;var ad=aa._values;var Z=[];var X=0;var W;var Y,U;var V=0;ae=ae.slice();if(ab===true||!ae.length){for(;X<T.length;X++){D(S[T[X]]).removeClass("k-state-selected");Z.push({position:X,dataItem:ac[X]})}aa._values=[];aa._dataItems=[];aa._selectedIndices=[]}else{if(ab==="multiple"){for(;X<ae.length;X++){Y=ae[X];if(!D(S[Y]).hasClass("k-state-selected")){continue}for(W=0;W<T.length;W++){U=T[W];if(U===Y){D(S[U]).removeClass("k-state-selected");Z.push({position:W+V,dataItem:ac.splice(W,1)[0]});T.splice(W,1);ae.splice(X,1);ad.splice(W,1);V+=1;X-=1;W-=1;break}}}}}return{indices:ae,removed:Z}},_deselectFiltered:function(Y){var W=this.element[0].children;var V,U,T;var X=[];var S=0;for(;S<Y.length;S++){U=Y[S];V=this._view[U].item;T=this._dataItemPosition(V,this._values);if(T>-1){X.push(this.removeAt(T));D(W[U]).removeClass("k-state-selected")}}if(X.length){this.trigger(C,{added:[],removed:X});return true}return false},_select:function(Z){var X=this;var V=X.element[0].children;var Y=X._view;var U,T;var W=[];var S=0;if(q(Z)!==-1){X.focus(Z)}for(;S<Z.length;S++){T=Z[S];U=Y[T];if(T===-1||!U){continue}U=U.item;X._selectedIndices.push(T);X._dataItems.push(U);X._values.push(X._valueGetter(U));D(V[T]).addClass("k-state-selected").attr("aria-selected",true);W.push({dataItem:U})}return W},getElementIndex:function(S){return D(S).data("offset-index")},_get:function(S){if(typeof S==="number"){S=[S]}else{if(!x(S)){S=this.getElementIndex(S);S=[S!==o?S:-1]}}return S},_template:function(){var U=this;var S=U.options;var T=S.template;if(!T){T=E.template('<li tabindex="-1" role="option" unselectable="on" class="k-item">${'+E.expr(S.dataTextField,"data")+"}</li>",{useWithBlock:false})}else{T=E.template(T);T=function(V){return'<li tabindex="-1" role="option" unselectable="on" class="k-item">'+T(V)+"</li>"}}return T},_templates:function(){var V;var S=this.options;var U={template:S.template,groupTemplate:S.groupTemplate,fixedGroupTemplate:S.fixedGroupTemplate};for(var T in U){V=U[T];if(V&&typeof V!=="function"){U[T]=E.template(V)}}this.templates=U},_normalizeIndices:function(U){var T=[];var S=0;for(;S<U.length;S++){if(U[S]!==o){T.push(U[S])}}return T},_valueIndices:function(T,W){var V=this._view;var S=0;var U;W=W?W.slice():[];if(!T.length){return[]}for(;S<V.length;S++){U=this._dataItemPosition(V[S].item,T);if(U!==-1){W[U]=S}}return this._normalizeIndices(W)},_firstVisibleItem:function(){var T=this.element[0];var W=this.content[0];var X=W.scrollTop;var Y=D(T.children[0]).height();var U=Math.floor(X/Y)||0;var V=T.children[U]||T.lastChild;var S=V.offsetTop<X;while(V){if(S){if(V.offsetTop+Y>X||!V.nextSibling){break}V=V.nextSibling}else{if(V.offsetTop<=X||!V.previousSibling){break}V=V.previousSibling}}return this._view[D(V).data("offset-index")]},_fixedHeader:function(){if(this.isGrouped()&&this.templates.fixedGroupTemplate){this.header.show();this.content.scroll(this._onScroll)}else{this.header.hide();this.content.off("scroll",this._onScroll)}},_renderHeader:function(){var S=this.templates.fixedGroupTemplate;if(!S){return}var T=this._firstVisibleItem();if(T){this.header.html(S(T.group))}},_renderItem:function(U){var W='<li tabindex="-1" role="option" unselectable="on" class="k-item';var T=U.item;var S=U.index!==0;var V=U.selected;if(S&&U.newGroup){W+=" k-first"}if(V){W+=" k-state-selected"}W+='"'+(V?' aria-selected="true"':"")+' data-offset-index="'+U.index+'">';W+=this.templates.template(T);if(S&&U.newGroup){W+='<div class="k-group">'+this.templates.groupTemplate(U.group)+"</div>"}return W+"</li>"},_render:function(){var X="";var W=0;var Z=0;var S;var T=[];var Y=this.dataSource.view();var ac=this.value();var ab,U,V;var aa=this.isGrouped();if(aa){for(W=0;W<Y.length;W++){ab=Y[W];U=true;for(V=0;V<ab.items.length;V++){S={selected:this._selected(ab.items[V],ac),item:ab.items[V],group:ab.value,newGroup:U,index:Z};T[Z]=S;Z+=1;X+=this._renderItem(S);U=false}}}else{for(W=0;W<Y.length;W++){S={selected:this._selected(Y[W],ac),item:Y[W],index:W};T[W]=S;X+=this._renderItem(S)}}this._view=T;this.element[0].innerHTML=X;if(aa&&T.length){this._renderHeader()}},_selected:function(U,T){var S=!this.isFiltered()||this.options.selectable==="multiple";return S&&this._dataItemPosition(U,T)!==-1},setDSFilter:function(S){this._lastDSFilter=n({},S)},isFiltered:function(){if(!this._lastDSFilter){this.setDSFilter(this.dataSource.filter())}return !E.data.Query.compareFilters(this.dataSource.filter(),this._lastDSFilter)},refresh:function(X){var V=this;var W=X&&X.action;var T=V.options.skipUpdateOnBind;var U=W==="itemchange";var S;V.trigger("dataBinding");V._angularItems("cleanup");V._fixedHeader();V._render();V.bound(true);if(U||W==="remove"){S=y(V._dataItems,X.items);if(S.changed.length){if(U){V.trigger("selectedItemChange",{items:S.changed})}else{V.value(V._getValues(S.unchanged))}}}else{if(V.isFiltered()||V._skipUpdate){V.focus(0);if(V._skipUpdate){V._skipUpdate=false;V._selectedIndices=V._valueIndices(V._values,V._selectedIndices)}}else{if(!T&&(!W||W==="add")){V.value(V._values)}}}if(V._valueDeferred){V._valueDeferred.resolve()}V._angularItems("compile");V.trigger("dataBound")},bound:function(S){if(S===o){return this._bound}this._bound=S},isGrouped:function(){return(this.dataSource.group()||[]).length}});H.plugin(P);function q(S){return S[S.length-1]}function i(S){var T=S.selectedIndex;return T>-1?S.options[T]:{}}function y(W,V){var ab=V.length;var S=W.length;var T;var aa;var Z,X;var Y=[];var U=[];if(S){for(Z=0;Z<S;Z++){T=W[Z];aa=false;for(X=0;X<ab;X++){if(T===V[X]){aa=true;Y.push({index:Z,item:T});break}}if(!aa){U.push(T)}}}return{changed:Y,unchanged:U}}function k(S){if(!S||D.isEmptyObject(S)){return false}if(S.filters&&!S.filters.length){return false}return true}function c(V,U){var S;var T=false;if(V.filters){S=D.grep(V.filters,function(W){T=c(W,U);if(W.filters){return W.filters.length}else{return W.field!=U}});if(!T&&V.filters.length!==S.length){T=true}V.filters=S}return T}}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.calendar",["kendo.core"],a)}(function(){var a={id:"calendar",name:"Calendar",category:"web",description:"The Calendar widget renders a graphical calendar that supports navigation and selection.",depends:["core"]};(function(an,t){var o=window.kendo,au=o.support,R=o.ui,h=R.Widget,K=o.keys,Z=o.parseDate,ao=o.date.adjustDST,ai=o.date.weekInYear,ag=o._extractFormat,N=o.template,j=o.getCulture,Y=o.support.transitions,ab=Y?Y.css+"transform-origin":"",ad=N('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link" href="\\#" data-#=data.ns#value="#=data.dateString#">#=data.value#</a></td>',{useWithBlock:false}),ax=N('<td role="gridcell">&nbsp;</td>',{useWithBlock:false}),aC=N('<td class="k-alt">#= data.weekNumber #</td>',{useWithBlock:false}),aq=o.support.browser,Q=aq.msie&&aq.version<9,g=o._outerHeight,A=o._outerWidth,V=".kendoCalendar",al="click"+V,B="keydown"+V,aj="id",G="min",b="left",aa="slideIn",d="month",at="century",E="change",y="navigate",ay="value",k="k-state-hover",n="k-state-disabled",r="k-state-focused",z="k-other-month",aD=' class="'+z+'"',c="k-nav-today",p="td:has(.k-link)",e="blur"+V,U="focus",I=U+V,m=au.touch?"touchstart":"mouseenter",aw=au.touch?"touchstart"+V:"mouseenter"+V,T=au.touch?"touchend"+V+" touchmove"+V:"mouseleave"+V,am=60000,C=86400000,aB="_prevArrow",v="_nextArrow",P="aria-disabled",f="aria-selected",w=an.proxy,W=an.extend,ae=Date,O={month:0,year:1,decade:2,century:3};var q=h.extend({init:function(aF,aE){var aG=this,aH,aI;h.fn.init.call(aG,aF,aE);aF=aG.wrapper=aG.element;aE=aG.options;aE.url=window.unescape(aE.url);aG.options.disableDates=D(aG.options.disableDates);aG._templates();aG._header();aG._footer(aG.footer);aI=aF.addClass("k-widget k-calendar "+(aE.weekNumber?" k-week-number":"")).on(aw+" "+T,p,ap).on(B,"table.k-content",w(aG._move,aG)).on(al,p,function(aL){var aJ=aL.currentTarget.firstChild,aK=aG._toDateObject(aJ);if(aJ.href.indexOf("#")!=-1){aL.preventDefault()}if(aG._view.name=="month"&&aG.options.disableDates(aK)){return}aG._click(an(aJ))}).on("mouseup"+V,"table.k-content, .k-footer",function(){aG._focusView(aG.options.focusOnNav!==false)}).attr(aj);if(aI){aG._cellID=aI+"_cell_selected"}ar(aE);aH=Z(aE.value,aE.format,aE.culture);aG._index=O[aE.start];aG._current=new ae(+H(aH,aE.min,aE.max));aG._addClassProxy=function(){aG._active=true;if(aG._cell.hasClass(n)){var aJ=aG._view.toDateString(af());aG._cell=aG._cellByDate(aJ)}aG._cell.addClass(r)};aG._removeClassProxy=function(){aG._active=false;aG._cell.removeClass(r)};aG.value(aH);o.notify(aG)},options:{name:"Calendar",value:null,min:new ae(1900,0,1),max:new ae(2099,11,31),dates:[],url:"",culture:"",footer:"",format:"",month:{},weekNumber:false,start:d,depth:d,animation:{horizontal:{effects:aa,reverse:true,duration:500,divisor:2},vertical:{effects:"zoomIn",duration:400}}},events:[E,y],setOptions:function(aE){var aF=this;ar(aE);aE.disableDates=D(aE.disableDates);h.fn.setOptions.call(aF,aE);aF._templates();aF._footer(aF.footer);aF._index=O[aF.options.start];aF.navigate()},destroy:function(){var aF=this,aE=aF._today;aF.element.off(V);aF._title.off(V);aF[aB].off(V);aF[v].off(V);o.destroy(aF._table);if(aE){o.destroy(aE.off(V))}h.fn.destroy.call(aF)},current:function(){return this._current},view:function(){return this._view},focus:function(aE){aE=aE||this._table;this._bindTable(aE);aE.focus()},min:function(aE){return this._option(G,aE)},max:function(aE){return this._option("max",aE)},navigateToPast:function(){this._navigate(aB,-1)},navigateToFuture:function(){this._navigate(v,1)},navigateUp:function(){var aF=this,aE=aF._index;if(aF._title.hasClass(n)){return}aF.navigate(aF._current,++aE)},navigateDown:function(aG){var aF=this,aE=aF._index,aH=aF.options.depth;if(!aG){return}if(aE===O[aH]){if(!ac(aF._value,aF._current)||!ac(aF._value,aG)){aF.value(aG);aF.trigger(E)}return}aF.navigate(aG,--aE)},navigate:function(aO,aM){aM=isNaN(aM)?O[aM]:aM;var aK=this,aH=aK.options,aS=aH.culture,aP=aH.min,aR=aH.max,aV=aK._title,aQ=aK._table,aE=aK._oldTable,aN=aK._value,aL=aK._current,aJ=aO&&+aO>+aL,aF=aM!==t&&aM!==aK._index,aG,aW,aU,aI;if(!aO){aO=aL}aK._current=aO=new ae(+H(aO,aP,aR));if(aM===t){aM=aK._index}else{aK._index=aM}aK._view=aW=i.views[aM];aU=aW.compare;aI=aM===O[at];aV.toggleClass(n,aI).attr(P,aI);aI=aU(aO,aP)<1;aK[aB].toggleClass(n,aI).attr(P,aI);aI=aU(aO,aR)>-1;aK[v].toggleClass(n,aI).attr(P,aI);if(aQ&&aE&&aE.data("animating")){aE.kendoStop(true,true);aQ.kendoStop(true,true)}aK._oldTable=aQ;if(!aQ||aK._changeView){aV.html(aW.title(aO,aP,aR,aS));aK._table=aG=an(aW.content(W({min:aP,max:aR,date:aO,url:aH.url,dates:aH.dates,format:aH.format,culture:aS,disableDates:aH.disableDates,isWeekColumnVisible:aH.weekNumber},aK[aW.name])));L(aG,aW.name);S(aG);var aT=aQ&&aQ.data("start")===aG.data("start");aK._animate({from:aQ,to:aG,vertical:aF,future:aJ,replace:aT});aK.trigger(y);aK._focus(aO)}if(aM===O[aH.depth]&&aN&&!aK.options.disableDates(aN)){aK._class("k-state-selected",aN)}aK._class(r,aO);if(!aQ&&aK._cell){aK._cell.removeClass(r)}aK._changeView=true},value:function(aK){var aJ=this,aG=aJ._view,aH=aJ.options,aF=aJ._view,aI=aH.min,aE=aH.max;if(aK===t){return aJ._value}if(aK===null){aJ._current=new Date(aJ._current.getFullYear(),aJ._current.getMonth(),aJ._current.getDate())}aK=Z(aK,aH.format,aH.culture);if(aK!==null){aK=new ae(+aK);if(!M(aK,aI,aE)){aK=null}}if(aK===null||!aJ.options.disableDates(aK)){aJ._value=aK}else{if(aJ._value===t){aJ._value=null}}if(aF&&aK===null&&aJ._cell){aJ._cell.removeClass("k-state-selected")}else{aJ._changeView=!aK||aG&&aG.compare(aK,aJ._current)!==0;aJ.navigate(aK)}},_move:function(aI){var aG=this,aS=aG.options,aQ=aI.keyCode,aL=aG._view,aH=aG._index,aF=aG.options.min,aM=aG.options.max,aP=new ae(+aG._current),aJ=o.support.isRtl(aG.wrapper),aO=aG.options.disableDates,aN,aK,aE,aR;if(aI.target===aG._table[0]){aG._active=true}if(aI.ctrlKey){if(aQ==K.RIGHT&&!aJ||aQ==K.LEFT&&aJ){aG.navigateToFuture();aK=true}else{if(aQ==K.LEFT&&!aJ||aQ==K.RIGHT&&aJ){aG.navigateToPast();aK=true}else{if(aQ==K.UP){aG.navigateUp();aK=true}else{if(aQ==K.DOWN){aG._click(an(aG._cell[0].firstChild));aK=true}}}}}else{if(aQ==K.RIGHT&&!aJ||aQ==K.LEFT&&aJ){aN=1;aK=true}else{if(aQ==K.LEFT&&!aJ||aQ==K.RIGHT&&aJ){aN=-1;aK=true}else{if(aQ==K.UP){aN=aH===0?-7:-4;aK=true}else{if(aQ==K.DOWN){aN=aH===0?7:4;aK=true}else{if(aQ==K.ENTER){aG._click(an(aG._cell[0].firstChild));aK=true}else{if(aQ==K.HOME||aQ==K.END){aE=aQ==K.HOME?"first":"last";aR=aL[aE](aP);aP=new ae(aR.getFullYear(),aR.getMonth(),aR.getDate(),aP.getHours(),aP.getMinutes(),aP.getSeconds(),aP.getMilliseconds());aK=true}else{if(aQ==K.PAGEUP){aK=true;aG.navigateToPast()}else{if(aQ==K.PAGEDOWN){aK=true;aG.navigateToFuture()}}}}}}}}if(aN||aE){if(!aE){aL.setDate(aP,aN)}if(aO(aP)){aP=aG._nextNavigatable(aP,aN)}if(M(aP,aF,aM)){aG._focus(H(aP,aS.min,aS.max))}}}if(aK){aI.preventDefault()}return aG._current},_nextNavigatable:function(aL,aK){var aH=this,aF=true,aI=aH._view,aG=aH.options.min,aJ=aH.options.max,aM=aH.options.disableDates,aE=new Date(aL.getTime());aI.setDate(aE,-aK);while(aF){aI.setDate(aL,aK);if(!M(aL,aG,aJ)){aL=aE;break}aF=aM(aL)}return aL},_animate:function(aE){var aF=this,aI=aE.from,aH=aE.to,aG=aF._active;if(!aI){aH.insertAfter(aF.element[0].firstChild);aF._bindTable(aH)}else{if(aI.parent().data("animating")){aI.off(V);aI.parent().kendoStop(true,true).remove();aI.remove();aH.insertAfter(aF.element[0].firstChild);aF._focusView(aG)}else{if(!aI.is(":visible")||aF.options.animation===false||aE.replace){aH.insertAfter(aI);aI.off(V).remove();aF._focusView(aG)}else{aF[aE.vertical?"_vertical":"_horizontal"](aI,aH,aE.future)}}}},_horizontal:function(aL,aK,aE){var aI=this,aJ=aI._active,aF=aI.options.animation.horizontal,aH=aF.effects,aG=A(aL);if(aH&&aH.indexOf(aa)!=-1){aL.add(aK).css({width:aG});aL.wrap("<div/>");aI._focusView(aJ,aL);aL.parent().css({position:"relative",width:aG*2,"float":b,"margin-left":aE?0:-aG});aK[aE?"insertAfter":"insertBefore"](aL);W(aF,{effects:aa+":"+(aE?"right":b),complete:function(){aL.off(V).remove();aI._oldTable=null;aK.unwrap();aI._focusView(aJ)}});aL.parent().kendoStop(true,true).kendoAnimate(aF)}},_vertical:function(aL,aK){var aI=this,aG=aI.options.animation.vertical,aH=aG.effects,aJ=aI._active,aF,aE;if(aH&&aH.indexOf("zoom")!=-1){aK.css({position:"absolute",top:g(aL.prev()),left:0}).insertBefore(aL);if(ab){aF=aI._cellByDate(aI._view.toDateString(aI._current));aE=aF.position();aE=aE.left+parseInt(aF.width()/2,10)+"px "+(aE.top+parseInt(aF.height()/2,10)+"px");aK.css(ab,aE)}aL.kendoStop(true,true).kendoAnimate({effects:"fadeOut",duration:600,complete:function(){aL.off(V).remove();aI._oldTable=null;aK.css({position:"static",top:0,left:0});aI._focusView(aJ)}});aK.kendoStop(true,true).kendoAnimate(aG)}},_cellByDate:function(aE){return this._table.find("td:not(."+z+")").filter(function(){return an(this.firstChild).attr(o.attr(ay))===aE})},_class:function(aG,aF){var aH=this,aK=aH._cellID,aE=aH._cell,aJ=aH._view.toDateString(aF),aI;if(aE){aE.removeAttr(f).removeAttr("aria-label").removeAttr(aj)}if(aF&&aH._view.name=="month"){aI=aH.options.disableDates(aF)}aE=aH._table.find("td:not(."+z+")").removeClass(aG).filter(function(){return an(this.firstChild).attr(o.attr(ay))===aJ}).attr(f,true);if(aG===r&&!aH._active&&aH.options.focusOnNav!==false||aI){aG=""}aE.addClass(aG);if(aE[0]){aH._cell=aE}if(aK){aE.attr(aj,aK);aH._table.removeAttr("aria-activedescendant").attr("aria-activedescendant",aK)}},_bindTable:function(aE){aE.on(I,this._addClassProxy).on(e,this._removeClassProxy)},_click:function(aH){var aG=this,aE=aG.options,aF=new Date(+aG._current),aI=aG._toDateObject(aH);ao(aI,0);if(aG._view.name=="month"&&aG.options.disableDates(aI)){aI=aG._value}aG._view.setDate(aF,aI);aG.navigateDown(H(aF,aE.min,aE.max))},_focus:function(aG){var aF=this,aE=aF._view;if(aE.compare(aG,aF._current)!==0){aF.navigate(aG)}else{aF._current=aG;aF._class(r,aG)}},_focusView:function(aF,aE){if(aF){this.focus(aE)}},_footer:function(aG){var aH=this,aE=af(),aF=aH.element,aI=aF.find(".k-footer");if(!aG){aH._toggle(false);aI.hide();return}if(!aI[0]){aI=an('<div class="k-footer"><a href="#" class="k-link k-nav-today"></a></div>').appendTo(aF)}aH._today=aI.show().find(".k-link").html(aG(aE)).attr("title",o.toString(aE,"D",aH.options.culture));aH._toggle()},_header:function(){var aG=this,aF=aG.element,aE;if(!aF.find(".k-header")[0]){aF.html('<div class="k-header"><a href="#" role="button" class="k-link k-nav-prev"><span class="k-icon k-i-arrow-60-left"></span></a><a href="#" role="button" aria-live="assertive" aria-atomic="true" class="k-link k-nav-fast"></a><a href="#" role="button" class="k-link k-nav-next"><span class="k-icon k-i-arrow-60-right"></span></a></div>')}aE=aF.find(".k-link").on(aw+" "+T+" "+I+" "+e,ap).click(false);aG._title=aE.eq(1).on(al,function(){aG._active=aG.options.focusOnNav!==false;aG.navigateUp()});aG[aB]=aE.eq(0).on(al,function(){aG._active=aG.options.focusOnNav!==false;aG.navigateToPast()});aG[v]=aE.eq(2).on(al,function(){aG._active=aG.options.focusOnNav!==false;aG.navigateToFuture()})},_navigate:function(aI,aE){var aH=this,aF=aH._index+1,aG=new ae(+aH._current);aI=aH[aI];if(!aI.hasClass(n)){if(aF>3){aG.setFullYear(aG.getFullYear()+100*aE)}else{i.views[aF].setDate(aG,aE)}aH.navigate(aG)}},_option:function(aG,aJ){var aH=this,aE=aH.options,aF=aH._value||aH._current,aI;if(aJ===t){return aE[aG]}aJ=Z(aJ,aE.format,aE.culture);if(!aJ){return}aE[aG]=new ae(+aJ);if(aG===G){aI=aJ>aF}else{aI=aF>aJ}if(aI||X(aF,aJ)){if(aI){aH._value=null}aH._changeView=true}if(!aH._changeView){aH._changeView=!!(aE.month.content||aE.month.empty)}aH.navigate(aH._value);aH._toggle()},_toggle:function(aE){var aI=this,aG=aI.options,aF=aI.options.disableDates(af()),aH=aI._today;if(aE===t){aE=M(af(),aG.min,aG.max)}if(aH){aH.off(al);if(aE&&!aF){aH.addClass(c).removeClass(n).on(al,w(aI._todayClick,aI))}else{aH.removeClass(c).addClass(n).on(al,u)}}},_todayClick:function(aH){var aG=this,aI=O[aG.options.depth],aF=aG.options.disableDates,aE=af();aH.preventDefault();if(aF(aE)){return}if(aG._view.compare(aG._current,aE)===0&&aG._index==aI){aG._changeView=false}aG._value=aE;aG.navigate(aE,aI);aG.trigger(E)},_toDateObject:function(aE){var aF=an(aE).attr(o.attr(ay)).split("/");aF=new ae(aF[0],aF[1],aF[2]);return aF},_templates:function(){var aH=this,aF=aH.options,aK=aF.footer,aJ=aF.month,aG=aJ.content,aE=aJ.weekNumber,aI=aJ.empty;aH.month={content:N('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link#=data.linkClass#" href="#=data.url#" '+o.attr("value")+'="#=data.dateString#" title="#=data.title#">'+(aG||"#=data.value#")+"</a></td>",{useWithBlock:!!aG}),empty:N('<td role="gridcell">'+(aI||"&nbsp;")+"</td>",{useWithBlock:!!aI}),weekNumber:N('<td class="k-alt">'+(aE||"#= data.weekNumber #")+"</td>",{useWithBlock:!!aE})};aH.footer=aK!==false?N(aK||'#= kendo.toString(data,"D","'+aF.culture+'") #',{useWithBlock:false}):null}});R.plugin(q);var i={firstDayOfMonth:function(aE){return new ae(aE.getFullYear(),aE.getMonth(),1)},firstVisibleDay:function(aH,aE){aE=aE||o.culture().calendar;var aF=aE.firstDay,aG=new ae(aH.getFullYear(),aH.getMonth(),0,aH.getHours(),aH.getMinutes(),aH.getSeconds(),aH.getMilliseconds());while(aG.getDay()!=aF){i.setTime(aG,-1*C)}return aG},setTime:function(aE,aI){var aF=aE.getTimezoneOffset(),aH=new ae(aE.getTime()+aI),aG=aH.getTimezoneOffset()-aF;aE.setTime(aH.getTime()+aG*am)},views:[{name:d,title:function(aG,aH,aE,aF){return aA(aF).months.names[aG.getMonth()]+" "+aG.getFullYear()},content:function(aF){var aN=this,aR=0,aS=aF.min,aV=aF.max,aZ=aF.date,aJ=aF.dates,aW=aF.format,aX=aF.culture,aM=aF.url,a0=aF.isWeekColumnVisible,aI=aM&&aJ[0],aE=aA(aX),aU=aE.firstDay,aL=aE.days,aQ=x(aL.names,aU),aG=x(aL.namesShort,aU),aH=i.firstVisibleDay(aZ,aE),aT=aN.first(aZ),aK=aN.last(aZ),aP=aN.toDateString,aY=new ae(),aO='<table tabindex="0" role="grid" class="k-content" cellspacing="0" data-start="'+aP(aH)+'"><thead><tr role="row">';if(a0){aO+='<th scope="col" class="k-alt"></th>'}for(;aR<7;aR++){aO+='<th scope="col" title="'+aQ[aR]+'">'+aG[aR]+"</th>"}aY=new ae(aY.getFullYear(),aY.getMonth(),aY.getDate());ao(aY,0);aY=+aY;return ah({cells:42,perRow:7,html:aO+='</tr></thead><tbody><tr role="row">',start:aH,isWeekColumnVisible:a0,weekNumber:aF.weekNumber,min:new ae(aS.getFullYear(),aS.getMonth(),aS.getDate()),max:new ae(aV.getFullYear(),aV.getMonth(),aV.getDate()),content:aF.content,empty:aF.empty,setter:aN.setDate,disableDates:aF.disableDates,build:function(a5,a1,a6){var a2=[],a3=a5.getDay(),a7="",a4="#";if(a5<aT||a5>aK){a2.push(z)}if(a6(a5)){a2.push(n)}if(+a5===aY){a2.push("k-today")}if(a3===0||a3===6){a2.push("k-weekend")}if(aI&&s(+a5,aJ)){a4=aM.replace("{0}",o.toString(a5,aW,aX));a7=" k-action-link"}return{date:a5,dates:aJ,ns:o.ns,title:o.toString(a5,"D",aX),value:a5.getDate(),dateString:aP(a5),cssClass:a2[0]?' class="'+a2.join(" ")+'"':"",linkClass:a7,url:a4}},weekNumberBuild:function(a1){return{weekNumber:ai(a1,a1),currentDate:a1}}})},first:function(aE){return i.firstDayOfMonth(aE)},last:function(aF){var aG=new ae(aF.getFullYear(),aF.getMonth()+1,0),aH=i.firstDayOfMonth(aF),aE=Math.abs(aG.getTimezoneOffset()-aH.getTimezoneOffset());if(aE){aG.setHours(aH.getHours()+aE/60)}return aG},compare:function(aJ,aI){var aF,aE=aJ.getMonth(),aH=aJ.getFullYear(),aK=aI.getMonth(),aG=aI.getFullYear();if(aH>aG){aF=1}else{if(aH<aG){aF=-1}else{aF=aE==aK?0:aE>aK?1:-1}}return aF},setDate:function(aF,aG){var aE=aF.getHours();if(aG instanceof ae){aF.setFullYear(aG.getFullYear(),aG.getMonth(),aG.getDate())}else{i.setTime(aF,aG*C)}ao(aF,aE)},toDateString:function(aE){return aE.getFullYear()+"/"+aE.getMonth()+"/"+aE.getDate()}},{name:"year",title:function(aE){return aE.getFullYear()},content:function(aG){var aI=aA(aG.culture).months.namesAbbr,aF=this.toDateString,aH=aG.min,aE=aG.max;return ah({min:new ae(aH.getFullYear(),aH.getMonth(),1),max:new ae(aE.getFullYear(),aE.getMonth(),1),start:new ae(aG.date.getFullYear(),0,1),setter:this.setDate,build:function(aJ){return{value:aI[aJ.getMonth()],ns:o.ns,dateString:aF(aJ),cssClass:""}}})},first:function(aE){return new ae(aE.getFullYear(),0,aE.getDate())},last:function(aE){return new ae(aE.getFullYear(),11,aE.getDate())},compare:function(aF,aE){return az(aF,aE)},setDate:function(aF,aG){var aH,aE=aF.getHours();if(aG instanceof ae){aH=aG.getMonth();aF.setFullYear(aG.getFullYear(),aH,aF.getDate());if(aH!==aF.getMonth()){aF.setDate(0)}}else{aH=aF.getMonth()+aG;aF.setMonth(aH);if(aH>11){aH-=12}if(aH>0&&aF.getMonth()!=aH){aF.setDate(0)}}ao(aF,aE)},toDateString:function(aE){return aE.getFullYear()+"/"+aE.getMonth()+"/1"}},{name:"decade",title:function(aF,aG,aE){return l(aF,aG,aE,10)},content:function(aF){var aG=aF.date.getFullYear(),aE=this.toDateString;return ah({start:new ae(aG-aG%10-1,0,1),min:new ae(aF.min.getFullYear(),0,1),max:new ae(aF.max.getFullYear(),0,1),setter:this.setDate,build:function(aI,aH){return{value:aI.getFullYear(),ns:o.ns,dateString:aE(aI),cssClass:aH===0||aH==11?aD:""}}})},first:function(aE){var aF=aE.getFullYear();return new ae(aF-aF%10,aE.getMonth(),aE.getDate())},last:function(aE){var aF=aE.getFullYear();return new ae(aF-aF%10+9,aE.getMonth(),aE.getDate())},compare:function(aF,aE){return az(aF,aE,10)},setDate:function(aE,aF){ak(aE,aF,1)},toDateString:function(aE){return aE.getFullYear()+"/0/1"}},{name:at,title:function(aF,aG,aE){return l(aF,aG,aE,100)},content:function(aH){var aJ=aH.date.getFullYear(),aI=aH.min.getFullYear(),aF=aH.max.getFullYear(),aG=this.toDateString,aK=aI,aE=aF;aK=aK-aK%10;aE=aE-aE%10;if(aE-aK<10){aE=aK+9}return ah({start:new ae(aJ-aJ%100-10,0,1),min:new ae(aK,0,1),max:new ae(aE,0,1),setter:this.setDate,build:function(aN,aL){var aO=aN.getFullYear(),aM=aO+9;if(aO<aI){aO=aI}if(aM>aF){aM=aF}return{ns:o.ns,value:aO+" - "+aM,dateString:aG(aN),cssClass:aL===0||aL==11?aD:""}}})},first:function(aE){var aF=aE.getFullYear();return new ae(aF-aF%100,aE.getMonth(),aE.getDate())},last:function(aE){var aF=aE.getFullYear();return new ae(aF-aF%100+99,aE.getMonth(),aE.getDate())},compare:function(aF,aE){return az(aF,aE,100)},setDate:function(aE,aF){ak(aE,aF,10)},toDateString:function(aE){var aF=aE.getFullYear();return aF-aF%10+"/0/1"}}]};function l(aH,aI,aF,aJ){var aL=aH.getFullYear(),aK=aI.getFullYear(),aE=aF.getFullYear(),aG;aL=aL-aL%aJ;aG=aL+(aJ-1);if(aL<aK){aL=aK}if(aG>aE){aG=aE}return aL+"-"+aG}function ah(aT){var aR=0,aL,aK=aT.min,aP=aT.max,aF=aT.start,aH=aT.setter,aS=aT.build,aJ=aT.weekNumberBuild,aG=aT.cells||12,aQ=aT.isWeekColumnVisible,aI=aT.perRow||4,aE=aT.weekNumber||aC,aO=aT.content||ad,aN=aT.empty||ax,aM=aT.html||'<table tabindex="0" role="grid" class="k-content k-meta-view" cellspacing="0"><tbody><tr role="row">';if(aQ){aM+=aE(aJ(aF))}for(;aR<aG;aR++){if(aR>0&&aR%aI===0){aM+='</tr><tr role="row">';if(aQ){aM+=aE(aJ(aF))}}aF=new ae(aF.getFullYear(),aF.getMonth(),aF.getDate(),0,0,0);ao(aF,0);aL=aS(aF,aR,aT.disableDates);aM+=M(aF,aK,aP)?aO(aL):aN(aL);aH(aF,1)}return aM+"</tr></tbody></table>"}function az(aJ,aI,aF){var aH=aJ.getFullYear(),aK=aI.getFullYear(),aG=aK,aE=0;if(aF){aK=aK-aK%aF;aG=aK-aK%aF+aF-1}if(aH>aG){aE=1}else{if(aH<aK){aE=-1}}return aE}function af(){var aE=new ae();return new ae(aE.getFullYear(),aE.getMonth(),aE.getDate())}function H(aH,aG,aE){var aF=af();if(aH){aF=new ae(+aH)}if(aG>aF){aF=new ae(+aG)}else{if(aE<aF){aF=new ae(+aE)}}return aF}function M(aF,aG,aE){return +aF>=+aG&&+aF<=+aE}function x(aF,aE){return aF.slice(aE).concat(aF.slice(0,aE))}function ak(aE,aF,aG){aF=aF instanceof ae?aF.getFullYear():aE.getFullYear()+aG*aF;aE.setFullYear(aF)}function ap(aF){var aE=an(this).hasClass("k-state-disabled");if(!aE){an(this).toggleClass(k,m.indexOf(aF.type)>-1||aF.type==U)}}function u(aE){aE.preventDefault()}function aA(aE){return j(aE).calendars.standard}function ar(aF){var aH=O[aF.start],aG=O[aF.depth],aE=j(aF.culture);aF.format=ag(aF.format||aE.calendars.standard.patterns.d);if(isNaN(aH)){aH=0;aF.start=d}if(aG===t||aG>aH){aF.depth=d}if(aF.dates===null){aF.dates=[]}}function S(aE){if(Q){aE.find("*").attr("unselectable","on")}}function L(aE,aF){aE.addClass("k-"+aF)}function s(aE,aH){for(var aF=0,aG=aH.length;aF<aG;aF++){if(aE===+aH[aF]){return true}}return false}function F(aF,aE){if(aF){return aF.getFullYear()===aE.getFullYear()&&aF.getMonth()===aE.getMonth()&&aF.getDate()===aE.getDate()}return false}function X(aF,aE){if(aF){return aF.getFullYear()===aE.getFullYear()&&aF.getMonth()===aE.getMonth()}return false}function D(aE){if(o.isFunction(aE)){return aE}if(an.isArray(aE)){return av(aE)}return an.noop}function J(aG){var aE=[];for(var aF=0;aF<aG.length;aF++){aE.push(aG[aF].setHours(0,0,0,0))}return aE}function av(aE){var aI,aL,aF=[],aM=["su","mo","tu","we","th","fr","sa"],aG="if (found) { return true } else {return false}";if(aE[0] instanceof ae){aF=J(aE);aI="var found = date && $.inArray(date.setHours(0, 0, 0, 0),["+aF+"]) > -1;"+aG}else{for(var aH=0;aH<aE.length;aH++){var aK=aE[aH].slice(0,2).toLowerCase();var aJ=an.inArray(aK,aM);if(aJ>-1){aF.push(aJ)}}aI="var found = date && $.inArray(date.getDay(),["+aF+"]) > -1;"+aG}aL=new Function("date",aI);return aL}function ac(aE,aF){if(aE instanceof Date&&aF instanceof Date){aE=aE.getTime();aF=aF.getTime()}return aE===aF}i.isEqualDatePart=F;i.isEqualDate=ac;i.makeUnselectable=S;i.restrictValue=H;i.isInRange=M;i.addClassToViewContainer=L;i.normalize=ar;i.viewsEnum=O;i.disabled=D;o.calendar=i}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.datepicker",["kendo.calendar","kendo.popup"],a)}(function(){var a={id:"datepicker",name:"DatePicker",category:"web",description:"The DatePicker widget allows the user to select a date from a calendar or by direct input.",depends:["calendar","popup"]};(function(z,l){var A=window.kendo,H=A.ui,c=H.Widget,n=A.parseDate,t=A.keys,d=A.template,g=A._activeElement,p="<div />",J="<span />",P=".kendoDatePicker",I="click"+P,M="open",Q="close",x="change",w="disabled",h="readonly",K="k-state-default",D="k-state-focused",u="k-state-selected",m="k-state-disabled",o="k-state-hover",e="mouseenter"+P+" mouseleave"+P,E="mousedown"+P,s="id",r="min",R="max",f="month",i="aria-disabled",y="aria-expanded",G="aria-hidden",L=A.calendar,B=L.isInRange,b=L.restrictValue,v=L.isEqualDatePart,k=z.extend,O=z.proxy,j=Date;function N(S){var U=S.parseFormats,T=S.format;L.normalize(S);U=z.isArray(U)?U:[U];if(!U.length){U.push("yyyy-MM-dd")}if(z.inArray(T,U)===-1){U.splice(0,0,S.format)}S.parseFormats=U}function C(S){S.preventDefault()}var F=function(T){var U=this,W,S=document.body,V=z(p).attr(G,"true").addClass("k-calendar-container").appendTo(S);U.options=T=T||{};W=T.id;if(W){W+="_dateview";V.attr(s,W);U._dateViewID=W}U.popup=new H.Popup(V,k(T.popup,T,{name:"Popup",isRtl:A.support.isRtl(T.anchor)}));U.div=V;U.value(T.value)};F.prototype={_calendar:function(){var T=this;var U=T.calendar;var S=T.options;var V;if(!U){V=z(p).attr(s,A.guid()).appendTo(T.popup.element).on(E,C).on(I,"td:has(.k-link)",O(T._click,T));T.calendar=U=new H.Calendar(V);T._setOptions(S);A.calendar.makeUnselectable(U.element);U.navigate(T._value||T._current,S.start);T.value(T._value)}},_setOptions:function(S){this.calendar.setOptions({focusOnNav:false,change:S.change,culture:S.culture,dates:S.dates,depth:S.depth,footer:S.footer,format:S.format,max:S.max,min:S.min,month:S.month,weekNumber:S.weekNumber,start:S.start,disableDates:S.disableDates})},setOptions:function(T){var S=this.options;var U=T.disableDates;if(U){T.disableDates=L.disabled(U)}this.options=k(S,T,{change:S.change,close:S.close,open:S.open});if(this.calendar){this._setOptions(this.options)}},destroy:function(){this.popup.destroy()},open:function(){var S=this;S._calendar();S.popup.open()},close:function(){this.popup.close()},min:function(S){this._option(r,S)},max:function(S){this._option(R,S)},toggle:function(){var S=this;S[S.popup.visible()?Q:M]()},move:function(X){var U=this,T=X.keyCode,W=U.calendar,S=X.ctrlKey&&T==t.DOWN||T==t.ENTER,V=false;if(X.altKey){if(T==t.DOWN){U.open();X.preventDefault();V=true}else{if(T==t.UP){U.close();X.preventDefault();V=true}}}else{if(U.popup.visible()){if(T==t.ESC||S&&W._cell.hasClass(u)){U.close();X.preventDefault();return true}U._current=W._move(X);V=true}}return V},current:function(S){this._current=S;this.calendar._focus(S)},value:function(V){var T=this,W=T.calendar,S=T.options,U=S.disableDates;if(U&&U(V)){V=null}T._value=V;T._current=new j(+b(V,S.min,S.max));if(W){W.value(V)}},_click:function(S){if(S.currentTarget.className.indexOf(u)!==-1){this.close()}},_option:function(S,U){var T=this;var V=T.calendar;T.options[S]=U;if(V){V[S](U)}}};F.normalize=N;A.DateView=F;var q=c.extend({init:function(T,S){var V=this,U,X;c.fn.init.call(V,T,S);T=V.element;S=V.options;S.disableDates=A.calendar.disabled(S.disableDates);S.min=n(T.attr("min"))||n(S.min);S.max=n(T.attr("max"))||n(S.max);N(S);V._initialOptions=k({},S);V._wrapper();V.dateView=new F(k({},S,{id:T.attr(s),anchor:V.wrapper,change:function(){V._change(this.value());V.close()},close:function(Y){if(V.trigger(Q)){Y.preventDefault()}else{T.attr(y,false);X.attr(G,true)}},open:function(aa){var Z=V.options,Y;if(V.trigger(M)){aa.preventDefault()}else{if(V.element.val()!==V._oldText){Y=n(T.val(),Z.parseFormats,Z.culture);V.dateView[Y?"current":"value"](Y)}T.attr(y,true);X.attr(G,false);V._updateARIA(Y)}}}));X=V.dateView.div;V._icon();try{T[0].setAttribute("type","text")}catch(W){T[0].type="text"}T.addClass("k-input").attr({role:"combobox","aria-expanded":false,"aria-owns":V.dateView._dateViewID});V._reset();V._template();U=T.is("[disabled]")||z(V.element).parents("fieldset").is(":disabled");if(U){V.enable(false)}else{V.readonly(T.is("[readonly]"))}V._old=V._update(S.value||V.element.val());V._oldText=T.val();A.notify(V)},events:[M,Q,x],options:{name:"DatePicker",value:null,footer:"",format:"",culture:"",parseFormats:[],min:new Date(1900,0,1),max:new Date(2099,11,31),start:f,depth:f,animation:{},month:{},dates:[],ARIATemplate:'Current focused date is #=kendo.toString(data.current, "D")#'},setOptions:function(S){var T=this;var U=T._value;c.fn.setOptions.call(T,S);S=T.options;S.min=n(S.min);S.max=n(S.max);N(S);T.dateView.setOptions(S);if(U){T.element.val(A.toString(U,S.format,S.culture));T._updateARIA(U)}},_editable:function(U){var X=this,W=X._dateIcon.off(P),V=X.element.off(P),Y=X._inputWrapper.off(P),S=U.readonly,T=U.disable;if(!S&&!T){Y.addClass(K).removeClass(m).on(e,X._toggleHover);V.removeAttr(w).removeAttr(h).attr(i,false).on("keydown"+P,O(X._keydown,X)).on("focusout"+P,O(X._blur,X)).on("focus"+P,function(){X._inputWrapper.addClass(D)});W.on(I,O(X._click,X)).on(E,C)}else{Y.addClass(T?m:K).removeClass(T?K:m);V.attr(w,T).attr(h,S).attr(i,T)}},readonly:function(S){this._editable({readonly:S===l?true:S,disable:false})},enable:function(S){this._editable({readonly:false,disable:!(S=S===l?true:S)})},destroy:function(){var S=this;c.fn.destroy.call(S);S.dateView.destroy();S.element.off(P);S._dateIcon.off(P);S._inputWrapper.off(P);if(S._form){S._form.off("reset",S._resetHandler)}},open:function(){this.dateView.open()},close:function(){this.dateView.close()},min:function(S){return this._option(r,S)},max:function(S){return this._option(R,S)},value:function(T){var S=this;if(T===l){return S._value}S._old=S._update(T);if(S._old===null){S.element.val("")}S._oldText=S.element.val()},_toggleHover:function(S){z(S.currentTarget).toggleClass(o,S.type==="mouseenter")},_blur:function(){var S=this,T=S.element.val();S.close();if(T!==S._oldText){S._change(T)}S._inputWrapper.removeClass(D)},_click:function(){var T=this,S=T.element;T.dateView.toggle();if(!A.support.touch&&S[0]!==g()){S.focus()}},_change:function(W){var V=this,U=V.element.val(),T;W=V._update(W);T=!A.calendar.isEqualDate(V._old,W);var X=T&&!V._typing;var S=U!==V.element.val();if(X||S){V.element.trigger(x)}if(T){V._old=W;V._oldText=V.element.val();V.trigger(x)}V._typing=false},_keydown:function(W){var T=this,S=T.dateView,U=T.element.val(),V=false;if(!S.popup.visible()&&W.keyCode==t.ENTER&&U!==T._oldText){T._change(U)}else{V=S.move(W);T._updateARIA(S._current);if(!V){T._typing=true}}},_icon:function(){var U=this,S=U.element,T;T=S.next("span.k-select");if(!T[0]){T=z('<span unselectable="on" class="k-select" aria-label="select"><span class="k-icon k-i-calendar"></span></span>').insertAfter(S)}U._dateIcon=T.attr({role:"button","aria-controls":U.dateView._dateViewID})},_option:function(T,V){var U=this,S=U.options;if(V===l){return S[T]}V=n(V,S.parseFormats,S.culture);if(!V){return}S[T]=new j(+V);U.dateView[T](V)},_update:function(Z){var W=this,aa=W.options,U=aa.min,Y=aa.max,X=W._value,S=n(Z,aa.parseFormats,aa.culture),T=S===null&&X===null||S instanceof Date&&X instanceof Date,V;if(aa.disableDates(S)){S=null;if(!W._old&&!W.element.val()){Z=null}}if(+S===+X&&T){V=A.toString(S,aa.format,aa.culture);if(V!==Z){W.element.val(S===null?Z:V)}return S}if(S!==null&&v(S,U)){S=b(S,U,Y)}else{if(!B(S,U,Y)){S=null}}W._value=S;W.dateView.value(S);W.element.val(A.toString(S||Z,aa.format,aa.culture));W._updateARIA(S);return S},_wrapper:function(){var T=this,S=T.element,U;U=S.parents(".k-datepicker");if(!U[0]){U=S.wrap(J).parent().addClass("k-picker-wrap k-state-default");U=U.wrap(J).parent()}U[0].style.cssText=S[0].style.cssText;S.css({width:"100%",height:S[0].style.height});T.wrapper=U.addClass("k-widget k-datepicker k-header").addClass(S[0].className);T._inputWrapper=z(U[0].firstChild)},_reset:function(){var U=this,S=U.element,V=S.attr("form"),T=V?z("#"+V):S.closest("form");if(T[0]){U._resetHandler=function(){U.value(S[0].defaultValue);U.max(U._initialOptions.max);U.min(U._initialOptions.min)};U._form=T.on("reset",U._resetHandler)}},_template:function(){this._ariaTemplate=d(this.options.ARIATemplate)},_updateARIA:function(T){var S;var U=this;var V=U.dateView.calendar;U.element.removeAttr("aria-activedescendant");if(V){S=V._cell;S.attr("aria-label",U._ariaTemplate({current:T||V.current()}));U.element.attr("aria-activedescendant",S.attr("id"))}}});H.plugin(q)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.autocomplete",["kendo.list","kendo.mobile.scroller"],a)}(function(){var a={id:"autocomplete",name:"AutoComplete",category:"web",description:"The AutoComplete widget provides suggestions depending on the typed text.It also allows multiple value entries.",depends:["list"],features:[{id:"mobile-scroller",name:"Mobile scroller",description:"Support for kinetic scrolling in mobile device",depends:["mobile.scroller"]},{id:"virtualization",name:"VirtualList",description:"Support for virtualization",depends:["virtuallist"]}]};(function(f,i){var r=window.kendo,l=r.support,n=r.caret,j=r._activeElement,u=l.placeholder,q=r.ui,b=q.List,p=r.keys,e=r.data.DataSource,d="aria-disabled",A="aria-readonly",o="change",z="k-state-default",y="disabled",c="readonly",k="k-state-focused",g="k-state-selected",C="k-state-disabled",m="k-state-hover",B=".kendoAutoComplete",s="mouseenter"+B+" mouseleave"+B,v=f.proxy;function x(D,F,E){return E?F.substring(0,D).split(E).length-1:0}function h(D,F,E){return F.split(E)[x(D,F,E)]}function w(E,I,G,F,D){var H=I.split(F);H.splice(x(E,I,F),1,G);if(F&&H[H.length-1]!==""){H.push("")}return H.join(D)}var t=b.extend({init:function(E,D){var G=this,H,F;G.ns=B;D=f.isArray(D)?{dataSource:D}:D;b.fn.init.call(G,E,D);E=G.element;D=G.options;D.placeholder=D.placeholder||E.attr("placeholder");if(u){E.attr("placeholder",D.placeholder)}G._wrapper();G._loader();G._clearButton();G._dataSource();G._ignoreCase();E[0].type="text";H=G.wrapper;G._popup();E.addClass("k-input").on("keydown"+B,v(G._keydown,G)).on("keypress"+B,v(G._keypress,G)).on("paste"+B,v(G._search,G)).on("focus"+B,function(){G._prev=G._accessor();G._oldText=G._prev;G._placeholder(false);H.addClass(k)}).on("focusout"+B,function(){G._change();G._placeholder();H.removeClass(k)}).attr({autocomplete:"off",role:"textbox","aria-haspopup":true});G._clear.on("click"+B,v(G._clearValue,G));G._enable();G._old=G._accessor();if(E[0].id){E.attr("aria-owns",G.ul[0].id)}G._aria();G._placeholder();G._initList();F=f(G.element).parents("fieldset").is(":disabled");if(F){G.enable(false)}G.listView.bind("click",function(I){I.preventDefault()});G._resetFocusItemHandler=f.proxy(G._resetFocusItem,G);r.notify(G)},options:{name:"AutoComplete",enabled:true,suggest:false,template:"",groupTemplate:"#:data#",fixedGroupTemplate:"#:data#",dataTextField:"",minLength:1,enforceMinLength:false,delay:200,height:200,filter:"startswith",ignoreCase:true,highlightFirst:false,separator:null,placeholder:"",animation:{},virtual:false,value:null,clearButton:true},_dataSource:function(){var D=this;if(D.dataSource&&D._refreshHandler){D._unbindDataSource()}else{D._progressHandler=v(D._showBusy,D);D._errorHandler=v(D._hideBusy,D)}D.dataSource=e.create(D.options.dataSource).bind("progress",D._progressHandler).bind("error",D._errorHandler)},setDataSource:function(D){this.options.dataSource=D;this._dataSource();this.listView.setDataSource(this.dataSource)},events:["open","close",o,"select","filtering","dataBinding","dataBound"],setOptions:function(D){var E=this._listOptions(D);b.fn.setOptions.call(this,D);this.listView.setOptions(E);this._accessors();this._aria()},_listOptions:function(D){var E=b.fn._listOptions.call(this,f.extend(D,{skipUpdateOnBind:true}));E.dataValueField=E.dataTextField;E.selectedItemChange=null;return E},_editable:function(F){var H=this,G=H.element,I=H.wrapper.off(B),D=F.readonly,E=F.disable;if(!D&&!E){I.addClass(z).removeClass(C).on(s,H._toggleHover);G.removeAttr(y).removeAttr(c).attr(d,false).attr(A,false)}else{I.addClass(E?C:z).removeClass(E?z:C);G.attr(y,E).attr(c,D).attr(d,E).attr(A,D)}},close:function(){var D=this;var E=D.listView.focus();if(E){E.removeClass(g)}D.popup.close()},destroy:function(){var D=this;D.element.off(B);D._clear.off(B);D.wrapper.off(B);b.fn.destroy.call(D)},refresh:function(){this.listView.refresh()},select:function(D){this._select(D)},search:function(I){var G=this,E=G.options,D=E.ignoreCase,H=G._separator(),F;I=I||G._accessor();clearTimeout(G._typingTimeout);if(H){I=h(n(G.element)[0],I,H)}F=I.length;if(!E.enforceMinLength&&!F||F>=E.minLength){G._open=true;G._mute(function(){this.listView.value([])});G._filterSource({value:D?I.toLowerCase():I,operator:E.filter,field:E.dataTextField,ignoreCase:D});G.one("close",f.proxy(G._unifySeparators,G))}},suggest:function(D){var I=this,M=I._last,L=I._accessor(),F=I.element[0],H=n(F)[0],G=I._separator(),J=L.split(G),E=x(H,L,G),N=H,K;if(M==p.BACKSPACE||M==p.DELETE){I._last=i;return}D=D||"";if(typeof D!=="string"){if(D[0]){D=I.dataSource.view()[b.inArray(D[0],I.ul[0])]}D=D?I._text(D):""}if(H<=0){H=L.toLowerCase().indexOf(D.toLowerCase())+1}K=L.substring(0,H).lastIndexOf(G);K=K>-1?H-(K+G.length):H;L=J[E].substring(0,K);if(D){D=D.toString();K=D.toLowerCase().indexOf(L.toLowerCase());if(K>-1){D=D.substring(K+L.length);N=H+D.length;L+=D}if(G&&J[J.length-1]!==""){J.push("")}}J[E]=L;I._accessor(J.join(G||""));if(F===j()){n(F,H,N)}},value:function(D){if(D!==i){this.listView.value(D);this._accessor(D);this._old=this._accessor();this._oldText=this._accessor()}else{return this._accessor()}},_click:function(H){var G=H.item;var F=this;var E=F.element;var D=F.listView.dataItemByIndex(F.listView.getElementIndex(G));H.preventDefault();F._active=true;if(F.trigger("select",{dataItem:D,item:G})){F.close();return}F._oldText=E.val();F._select(G).done(function(){F._blur();n(E,E.val().length)})},_clearText:f.noop,_resetFocusItem:function(){var D=this.options.highlightFirst?0:-1;if(this.options.virtual){this.listView.scrollTo(0)}this.listView.focus(D)},_listBound:function(){var H=this;var D=H.popup;var E=H.options;var J=H.dataSource.flatView();var G=J.length;var F=H.element[0]===j();var I;H._renderFooter();H._renderNoData();H._toggleNoData(!J.length);H._resizePopup();D.position();if(G){if(E.suggest&&F){H.suggest(J[0])}}if(H._open){H._open=false;I=H._allowOpening()?"open":"close";if(H._typingTimeout&&!F){I="close"}if(G){H._resetFocusItem();if(E.virtual){H.popup.unbind("activate",H._resetFocusItemHandler).one("activate",H._resetFocusItemHandler)}}D[I]();H._typingTimeout=i}if(H._touchScroller){H._touchScroller.reset()}H._hideBusy();H._makeUnselectable();H.trigger("dataBound")},_mute:function(D){this._muted=true;D.call(this);this._muted=false},_listChange:function(){var D=this._active||this.element[0]===j();if(D&&!this._muted){this._selectValue(this.listView.selectedDataItems()[0])}},_selectValue:function(D){var E=this._separator();var F="";if(D){F=this._text(D)}if(F===null){F=""}if(E){F=w(n(this.element)[0],this._accessor(),F,E,this._defaultSeparator())}this._prev=F;this._accessor(F);this._placeholder()},_unifySeparators:function(){this._accessor(this.value().split(this._separator()).join(this._defaultSeparator()));return this},_change:function(){var E=this;var G=E._unifySeparators().value();var D=G!==b.unifyType(E._old,typeof G);var H=D&&!E._typing;var F=E._oldText!==G;E._old=G;E._oldText=G;if(H||F){E.element.trigger(o)}if(D){E.trigger(o)}E.typing=false},_accessor:function(F){var E=this,D=E.element[0];if(F!==i){D.value=F===null?"":F;E._placeholder()}else{F=D.value;if(D.className.indexOf("k-readonly")>-1){if(F===E.options.placeholder){return""}else{return F}}return F}},_keydown:function(J){var G=this;var F=J.keyCode;var D=G.listView;var K=G.popup.visible();var I=D.focus();G._last=F;if(F===p.DOWN){if(K){this._move(I?"focusNext":"focusFirst")}J.preventDefault()}else{if(F===p.UP){if(K){this._move(I?"focusPrev":"focusLast")}J.preventDefault()}else{if(F===p.ENTER||F===p.TAB){if(F===p.ENTER&&K){J.preventDefault()}if(K&&I){var E=D.dataItemByIndex(D.getElementIndex(I));if(G.trigger("select",{dataItem:E,item:I})){return}this._select(I)}this._blur()}else{if(F===p.ESC){if(K){J.preventDefault()}G.close()}else{if(G.popup.visible()&&(F===p.PAGEDOWN||F===p.PAGEUP)){J.preventDefault();var H=F===p.PAGEDOWN?1:-1;D.scrollWith(H*D.screenHeight())}else{G._search()}}}}}},_keypress:function(){this._oldText=this.element.val();this._typing=true},_move:function(D){this.listView[D]();if(this.options.suggest){this.suggest(this.listView.focus())}},_hideBusy:function(){var D=this;clearTimeout(D._busy);D._loading.hide();D.element.attr("aria-busy",false);D._busy=null;D._showClear()},_showBusy:function(){var D=this;if(D._busy){return}D._busy=setTimeout(function(){D.element.attr("aria-busy",true);D._loading.show();D._hideClear()},100)},_placeholder:function(D){if(u){return}var F=this,E=F.element,H=F.options.placeholder,G;if(H){G=E.val();if(D===i){D=!G}if(!D){if(G!==H){H=G}else{H=""}}if(G===F._old&&!D){return}E.toggleClass("k-readonly",D).val(H);if(!H&&E[0]===document.activeElement){n(E[0],0,0)}}},_separator:function(){var D=this.options.separator;if(D instanceof Array){return new RegExp(D.join("|"),"gi")}return D},_defaultSeparator:function(){var D=this.options.separator;if(D instanceof Array){return D[0]}return D},_inputValue:function(){return this.element.val()},_search:function(){var D=this;clearTimeout(D._typingTimeout);D._typingTimeout=setTimeout(function(){if(D._prev!==D._accessor()){D._prev=D._accessor();D.search()}},D.options.delay)},_select:function(D){var E=this;E._active=true;return E.listView.select(D).done(function(){E._active=false})},_loader:function(){this._loading=f('<span class="k-icon k-i-loading" style="display:none"></span>').insertAfter(this.element)},_clearButton:function(){this._clear=f('<span unselectable="on" class="k-icon k-clear-value k-i-close" title="clear"></span>').attr({role:"button",tabIndex:-1});if(this.options.clearButton){this._clear.insertAfter(this.element)}},_toggleHover:function(D){f(D.currentTarget).toggleClass(m,D.type==="mouseenter")},_wrapper:function(){var E=this,D=E.element,G=D[0],F;F=D.parent();if(!F.is("span.k-widget")){F=D.wrap("<span />").parent()}F.attr("tabindex",-1);F.attr("role","presentation");F[0].style.cssText=G.style.cssText;D.css({width:"100%",height:G.style.height});E._focused=E.element;E.wrapper=F.addClass("k-widget k-autocomplete k-header").addClass(G.className)}});q.plugin(t)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.dropdownlist",["kendo.list","kendo.mobile.scroller"],a)}(function(){var a={id:"dropdownlist",name:"DropDownList",category:"web",description:"The DropDownList widget displays a list of values and allows the selection of a single value from the list.",depends:["list"],features:[{id:"mobile-scroller",name:"Mobile scroller",description:"Support for kinetic scrolling in mobile device",depends:["mobile.scroller"]},{id:"virtualization",name:"VirtualList",description:"Support for virtualization",depends:["virtuallist"]}]};(function(g,h){var u=window.kendo,t=u.ui,b=t.List,r=t.Select,k=u.support,i=u._activeElement,d=u.data.ObservableObject,q=u.keys,B=".kendoDropDownList",y="disabled",c="readonly",p="change",l="k-state-focused",z="k-state-default",C="k-state-disabled",e="aria-disabled",v="mouseenter"+B+" mouseleave"+B,s="tabindex",o="filter",f="accept",n="The `optionLabel` option is not valid due to missing fields. Define a custom optionLabel as shown here http://docs.telerik.com/kendo-ui/api/javascript/ui/dropdownlist#configuration-optionLabel",x=g.proxy;var j=r.extend({init:function(F,E){var I=this;var D=E&&E.index;var H,J,G;I.ns=B;E=g.isArray(E)?{dataSource:E}:E;r.fn.init.call(I,F,E);E=I.options;F=I.element.on("focus"+B,x(I._focusHandler,I));I._focusInputHandler=g.proxy(I._focusInput,I);I.optionLabel=g();I._optionLabel();I._inputTemplate();I._reset();I._prev="";I._word="";I._wrapper();I._tabindex();I.wrapper.data(s,I.wrapper.attr(s));I._span();I._popup();I._mobile();I._dataSource();I._ignoreCase();I._filterHeader();I._aria();I._enable();I._oldIndex=I.selectedIndex=-1;if(D!==h){E.index=D}I._initialIndex=E.index;I.requireValueMapper(I.options);I._initList();I._cascade();if(E.autoBind){I.dataSource.fetch()}else{if(I.selectedIndex===-1){J=E.text||"";if(!J){H=E.optionLabel;if(H&&E.index===0){J=H}else{if(I._isSelect){J=F.children(":selected").text()}}}I._textAccessor(J)}}G=g(I.element).parents("fieldset").is(":disabled");if(G){I.enable(false)}I.listView.bind("click",function(K){K.preventDefault()});u.notify(I)},options:{name:"DropDownList",enabled:true,autoBind:true,index:0,text:null,value:null,delay:500,height:200,dataTextField:"",dataValueField:"",optionLabel:"",cascadeFrom:"",cascadeFromField:"",ignoreCase:true,animation:{},filter:"none",minLength:1,enforceMinLength:false,virtual:false,template:null,valueTemplate:null,optionLabelTemplate:null,groupTemplate:"#:data#",fixedGroupTemplate:"#:data#"},events:["open","close",p,"select","filtering","dataBinding","dataBound","cascade","set"],setOptions:function(D){r.fn.setOptions.call(this,D);this.listView.setOptions(this._listOptions(D));this._optionLabel();this._inputTemplate();this._accessors();this._filterHeader();this._enable();this._aria();if(!this.value()&&this.hasOptionLabel()){this.select(0)}},destroy:function(){var D=this;r.fn.destroy.call(D);D.wrapper.off(B);D.element.off(B);D._inputWrapper.off(B);D._arrow.off();D._arrow=null;D._arrowIcon=null;D.optionLabel.off()},open:function(){var D=this;if(D.popup.visible()){return}if(!D.listView.bound()||D._state===f){D._open=true;D._state="rebind";if(D.filterInput){D.filterInput.val("");D._prev=""}if(D.filterInput&&D.options.minLength!==1){D.refresh();D.popup.one("activate",D._focusInputHandler);D.popup.open();D._resizeFilterInput()}else{D._filterSource()}}else{if(D._allowOpening()){D.popup.one("activate",D._focusInputHandler);D.popup.open();D._resizeFilterInput();D._focusItem()}}},_focusInput:function(){this._focusElement(this.filterInput)},_resizeFilterInput:function(){var D=this.filterInput;var E=this._prevent;if(!D){return}var G=this.filterInput[0]===i();var F=u.caret(this.filterInput[0])[0];this._prevent=true;D.css("display","none").css("width",this.popup.element.css("width")).css("display","inline-block");if(G){D.focus();u.caret(D[0],F)}this._prevent=E},_allowOpening:function(){return this.hasOptionLabel()||this.filterInput||r.fn._allowOpening.call(this)},toggle:function(D){this._toggle(D,true)},current:function(D){var E;if(D===h){E=this.listView.focus();if(!E&&this.selectedIndex===0&&this.hasOptionLabel()){return this.optionLabel}return E}this._focus(D)},dataItem:function(E){var F=this;var D=null;if(E===null){return E}if(E===h){D=F.listView.selectedDataItems()[0]}else{if(typeof E!=="number"){if(F.options.virtual){return F.dataSource.getByUid(g(E).data("uid"))}if(E.hasClass("k-list-optionlabel")){E=-1}else{E=g(F.items()).index(E)}}else{if(F.hasOptionLabel()){E-=1}}D=F.dataSource.flatView()[E]}if(!D){D=F._optionLabelDataItem()}return D},refresh:function(){this.listView.refresh()},text:function(G){var F=this;var E;var D=F.options.ignoreCase;G=G===null?"":G;if(G!==h){if(typeof G!=="string"){F._textAccessor(G);return}E=D?G.toLowerCase():G;F._select(function(H){H=F._text(H);if(D){H=(H+"").toLowerCase()}return H===E}).done(function(){F._textAccessor(F.dataItem()||G)})}else{return F._textAccessor()}},_clearFilter:function(){g(this.filterInput).val("");r.fn._clearFilter.call(this)},value:function(F){var E=this;var D=E.listView;var G=E.dataSource;if(F===h){F=E._accessor()||E.listView.value()[0];return F===h||F===null?"":F}E.requireValueMapper(E.options,F);if(F||!E.hasOptionLabel()){E._initialIndex=null}this.trigger("set",{value:F});if(E._request&&E.options.cascadeFrom&&E.listView.bound()){if(E._valueSetter){G.unbind(p,E._valueSetter)}E._valueSetter=x(function(){E.value(F)},E);G.one(p,E._valueSetter);return}if(E._isFilterEnabled()&&D.bound()&&D.isFiltered()){E._clearFilter()}else{E._fetchData()}D.value(F).done(function(){E._old=E._accessor();E._oldIndex=E.selectedIndex})},hasOptionLabel:function(){return this.optionLabel&&!!this.optionLabel[0]},_optionLabel:function(){var G=this;var D=G.options;var F=D.optionLabel;var E=D.optionLabelTemplate;if(!F){G.optionLabel.off().remove();G.optionLabel=g();return}if(!E){E="#:";if(typeof F==="string"){E+="data"}else{E+=u.expr(D.dataTextField,"data")}E+="#"}if(typeof E!=="function"){E=u.template(E)}G.optionLabelTemplate=E;if(!G.hasOptionLabel()){G.optionLabel=g('<div class="k-list-optionlabel"></div>').prependTo(G.list)}G.optionLabel.html(E(F)).off().click(x(G._click,G)).on(v,G._toggleHover);G.angular("compile",function(){return{elements:G.optionLabel,data:[{dataItem:G._optionLabelDataItem()}]}})},_optionLabelText:function(){var D=this.options.optionLabel;return typeof D==="string"?D:this._text(D)},_optionLabelDataItem:function(){var E=this;var D=E.options.optionLabel;if(E.hasOptionLabel()){return g.isPlainObject(D)?new d(D):E._assignInstance(E._optionLabelText(),"")}return null},_buildOptions:function(H){var F=this;if(!F._isSelect){return}var G=F.listView.value()[0];var E=F._optionLabelDataItem();var D=E&&F._value(E);if(G===h||G===null){G=""}if(E){if(D===h||D===null){D=""}E='<option value="'+D+'">'+F._text(E)+"</option>"}F._options(H,E,G);if(G!==b.unifyType(F._accessor(),typeof G)){F._customOption=null;F._custom(G)}},_listBound:function(){var F=this;var H=F._initialIndex;var E=F._state===o;var G=F.dataSource.flatView();var D;F._presetValue=false;F._renderFooter();F._renderNoData();F._toggleNoData(!G.length);F._resizePopup(true);F.popup.position();F._buildOptions(G);F._makeUnselectable();if(!E){if(F._open){F.toggle(F._allowOpening())}F._open=false;if(!F._fetch){if(G.length){if(!F.listView.value().length&&H>-1&&H!==null){F.select(H)}F._initialIndex=null;D=F.listView.selectedDataItems()[0];if(D&&F.text()!==F._text(D)){F._selectValue(D)}}else{if(F._textAccessor()!==F._optionLabelText()){F.listView.value("");F._selectValue(null);F._oldIndex=F.selectedIndex}}}}F._hideBusy();F.trigger("dataBound")},_listChange:function(){this._selectValue(this.listView.selectedDataItems()[0]);if(this._presetValue||this._old&&this._oldIndex===-1){this._oldIndex=this.selectedIndex}},_filterPaste:function(){this._search()},_focusHandler:function(){this.wrapper.focus()},_focusinHandler:function(){this._inputWrapper.addClass(l);this._prevent=false},_focusoutHandler:function(){var D=this;var E=window.self!==window.top;if(!D._prevent){clearTimeout(D._typingTimeout);if(k.mobileOS.ios&&E){D._change()}else{D._blur()}D._inputWrapper.removeClass(l);D._prevent=true;D._open=false;D.element.blur()}},_wrapperMousedown:function(){this._prevent=!!this.filterInput},_wrapperClick:function(D){D.preventDefault();this.popup.unbind("activate",this._focusInputHandler);this._focused=this.wrapper;this._toggle()},_editable:function(F){var H=this;var G=H.element;var E=F.disable;var D=F.readonly;var J=H.wrapper.add(H.filterInput).off(B);var I=H._inputWrapper.off(v);if(!D&&!E){G.removeAttr(y).removeAttr(c);I.addClass(z).removeClass(C).on(v,H._toggleHover);J.attr(s,J.data(s)).attr(e,false).on("keydown"+B,x(H._keydown,H)).on("focusin"+B,x(H._focusinHandler,H)).on("focusout"+B,x(H._focusoutHandler,H)).on("mousedown"+B,x(H._wrapperMousedown,H)).on("paste"+B,x(H._filterPaste,H));H.wrapper.on("click"+B,x(H._wrapperClick,H));if(!H.filterInput){J.on("keypress"+B,x(H._keypress,H))}}else{if(E){J.removeAttr(s);I.addClass(C).removeClass(z)}else{I.addClass(z).removeClass(C);J.on("focusin"+B,x(H._focusinHandler,H)).on("focusout"+B,x(H._focusoutHandler,H))}}G.attr(y,E).attr(c,D);J.attr(e,E)},_keydown:function(J){var F=this;var E=J.keyCode;var G=J.altKey;var K;var I;var D=F.popup.visible();if(F.filterInput){K=F.filterInput[0]===i()}if(E===q.LEFT){E=q.UP;I=true}else{if(E===q.RIGHT){E=q.DOWN;I=true}}if(I&&K){return}J.keyCode=E;if(G&&E===q.UP||E===q.ESC){F._focusElement(F.wrapper)}if(F._state===o&&E===q.ESC){F._clearFilter()}if(E===q.ENTER&&F._typingTimeout&&F.filterInput&&D){J.preventDefault();return}I=F._move(J);if(I){return}if(!D||!F.filterInput){var H=F._focus();if(E===q.HOME){I=true;F._firstItem()}else{if(E===q.END){I=true;F._lastItem()}}if(I){if(F.trigger("select",{dataItem:F._getElementDataItem(F._focus()),item:F._focus()})){F._focus(H);return}F._select(F._focus(),true).done(function(){if(!D){F._blur()}})}}if(!G&&!I&&F.filterInput){F._search()}},_matchText:function(F,E){var D=this.options.ignoreCase;if(F===h||F===null){return false}F=F+"";if(D){F=F.toLowerCase()}return F.indexOf(E)===0},_shuffleData:function(E,D){var F=this._optionLabelDataItem();if(F){E=[F].concat(E)}return E.slice(D).concat(E.slice(0,D))},_selectNext:function(){var G=this;var H=G.dataSource.flatView();var I=H.length+(G.hasOptionLabel()?1:0);var E=m(G._word,G._last);var K=G.selectedIndex;var F;var J;if(K===-1){K=0}else{K+=E?1:0;K=A(K,I)}H=H.toJSON?H.toJSON():H.slice();H=G._shuffleData(H,K);for(var D=0;D<I;D++){J=G._text(H[D]);if(E&&G._matchText(J,G._last)){break}else{if(G._matchText(J,G._word)){break}}}if(D!==I){F=G._focus();G._select(A(K+D,I)).done(function(){var L=function(){if(!G.popup.visible()){G._change()}};if(G.trigger("select",{dataItem:G._getElementDataItem(G._focus()),item:G._focus()})){G._select(F).done(L)}else{L()}})}},_keypress:function(F){var D=this;if(F.which===0||F.keyCode===u.keys.ENTER){return}var E=String.fromCharCode(F.charCode||F.keyCode);if(D.options.ignoreCase){E=E.toLowerCase()}if(E===" "){F.preventDefault()}D._word+=E;D._last=E;D._search()},_popupOpen:function(){var D=this.popup;D.wrapper=u.wrap(D.element);if(D.element.closest(".km-root")[0]){D.wrapper.addClass("km-popup km-widget");this.wrapper.addClass("km-widget")}},_popup:function(){r.fn._popup.call(this);this.popup.one("open",x(this._popupOpen,this))},_getElementDataItem:function(D){if(!D||!D[0]){return null}if(D[0]===this.optionLabel[0]){return this._optionLabelDataItem()}return this.listView.dataItemByIndex(this.listView.getElementIndex(D))},_click:function(F){var E=this;var D=F.item||g(F.currentTarget);F.preventDefault();if(E.trigger("select",{dataItem:E._getElementDataItem(D),item:D})){E.close();return}E._userTriggered=true;E._select(D).done(function(){E._focusElement(E.wrapper);E._blur()})},_focusElement:function(F){var H=i();var I=this.wrapper;var G=this.filterInput;var E=F===G?I:G;var D=k.mobileOS&&(k.touch||k.MSPointers||k.pointers);if(G&&G[0]===F[0]&&D){return}if(G&&E[0]===H){this._prevent=true;this._focused=F.focus()}},_searchByWord:function(F){if(!F){return}var E=this;var D=E.options.ignoreCase;if(D){F=F.toLowerCase()}E._select(function(G){return E._matchText(E._text(G),F)})},_inputValue:function(){return this.text()},_search:function(){var D=this;var E=D.dataSource;clearTimeout(D._typingTimeout);if(D._isFilterEnabled()){D._typingTimeout=setTimeout(function(){var F=D.filterInput.val();if(D._prev!==F){D._prev=F;D.search(F);D._resizeFilterInput()}D._typingTimeout=null},D.options.delay)}else{D._typingTimeout=setTimeout(function(){D._word=""},D.options.delay);if(!D.listView.bound()){E.fetch().done(function(){D._selectNext()});return}D._selectNext()}},_get:function(F){var H,G,D;var I=typeof F==="function";var E=!I?g(F):g();if(this.hasOptionLabel()){if(typeof F==="number"){if(F>-1){F-=1}}else{if(E.hasClass("k-list-optionlabel")){F=-1}}}if(I){H=this.dataSource.flatView();for(D=0;D<H.length;D++){if(F(H[D])){F=D;G=true;break}}if(!G){F=-1}}return F},_firstItem:function(){if(this.hasOptionLabel()){this._focus(this.optionLabel)}else{this.listView.focusFirst()}},_lastItem:function(){this._resetOptionLabel();this.listView.focusLast()},_nextItem:function(){if(this.optionLabel.hasClass("k-state-focused")){this._resetOptionLabel();this.listView.focusFirst()}else{this.listView.focusNext()}},_prevItem:function(){if(this.optionLabel.hasClass("k-state-focused")){return}this.listView.focusPrev();if(!this.listView.focus()){this._focus(this.optionLabel)}},_focusItem:function(){var D=this.listView;var F=D.focus();var E=D.select();E=E[E.length-1];if(E===h&&this.options.highlightFirst&&!F){E=0}if(E!==h){D.focus(E)}else{if(this.options.optionLabel){this._focus(this.optionLabel);this._select(this.optionLabel)}else{D.scrollToIndex(0)}}},_resetOptionLabel:function(D){this.optionLabel.removeClass("k-state-focused"+(D||"")).removeAttr("id")},_focus:function(E){var D=this.listView;var F=this.optionLabel;if(E===h){E=D.focus();if(!E&&F.hasClass("k-state-focused")){E=F}return E}this._resetOptionLabel();E=this._get(E);D.focus(E);if(E===-1){F.addClass("k-state-focused").attr("id",D._optionID);this._focused.add(this.filterInput).removeAttr("aria-activedescendant").attr("aria-activedescendant",D._optionID)}},_select:function(E,D){var F=this;E=F._get(E);return F.listView.select(E).done(function(){if(!D&&F._state===o){F._state=f}if(E===-1){F._selectValue(null)}})},_selectValue:function(E){var G=this;var F=G.options.optionLabel;var D=G.listView.select();var H="";var I="";D=D[D.length-1];if(D===h){D=-1}this._resetOptionLabel(" k-state-selected");if(E){I=E;H=G._dataValue(E);if(F){D+=1}}else{if(F){G._focus(G.optionLabel.addClass("k-state-selected"));I=G._optionLabelText();if(typeof F==="string"){H=""}else{H=G._value(F)}D=0}}G.selectedIndex=D;if(H===null){H=""}G._textAccessor(I);G._accessor(H,D);G._triggerCascade()},_mobile:function(){var F=this,E=F.popup,G=k.mobileOS,D=E.element.parents(".km-root").eq(0);if(D.length&&G){E.options.animation.open.effects=G.android||G.meego?"fadeIn":G.ios||G.wp?"slideIn:up":E.options.animation.open.effects}},_filterHeader:function(){var D;if(this.filterInput){this.filterInput.off(B).parent().remove();this.filterInput=null}if(this._isFilterEnabled()){D='<span class="k-icon k-i-zoom"></span>';this.filterInput=g('<input class="k-textbox"/>').attr({placeholder:this.element.attr("placeholder"),title:this.element.attr("title"),role:"listbox","aria-haspopup":true,"aria-expanded":false});this.list.prepend(g('<span class="k-list-filter" />').append(this.filterInput.add(D)))}},_span:function(){var E=this,G=E.wrapper,F="span.k-input",D;D=G.find(F);if(!D[0]){G.append('<span unselectable="on" class="k-dropdown-wrap k-state-default"><span unselectable="on" class="k-input">&nbsp;</span><span unselectable="on" class="k-select" aria-label="select"><span class="k-icon k-i-arrow-60-down"></span></span></span>').append(E.element);D=G.find(F)}E.span=D;E._inputWrapper=g(G[0].firstChild);E._arrow=G.find(".k-select");E._arrowIcon=E._arrow.find(".k-icon")},_wrapper:function(){var E=this,D=E.element,G=D[0],F;F=D.parent();if(!F.is("span.k-widget")){F=D.wrap("<span />").parent();F[0].style.cssText=G.style.cssText;F[0].title=G.title}E._focused=E.wrapper=F.addClass("k-widget k-dropdown k-header").addClass(G.className).css("display","").attr({accesskey:D.attr("accesskey"),unselectable:"on",role:"listbox","aria-haspopup":true,"aria-expanded":false});D.hide().removeAttr("accesskey")},_clearSelection:function(D){this.select(D.value()?0:-1)},_inputTemplate:function(){var E=this,D=E.options.valueTemplate;if(!D){D=g.proxy(u.template("#:this._text(data)#",{useWithBlock:false}),E)}else{D=u.template(D)}E.valueTemplate=D;if(E.hasOptionLabel()&&!E.options.optionLabelTemplate){try{E.valueTemplate(E._optionLabelDataItem())}catch(F){throw new Error(n)}}},_textAccessor:function(J){var E=null;var H=this.valueTemplate;var G=this._optionLabelText();var F=this.span;if(J===h){return F.text()}if(g.isPlainObject(J)||J instanceof d){E=J}else{if(G&&G===J){E=this.options.optionLabel}}if(!E){E=this._assignInstance(J,this._accessor())}if(this.hasOptionLabel()){if(E===G||this._text(E)===G){H=this.optionLabelTemplate;if(typeof this.options.optionLabel==="string"&&!this.options.optionLabelTemplate){E=G}}}var D=function(){return{elements:F.get(),data:[{dataItem:E}]}};this.angular("cleanup",D);try{F.html(H(E))}catch(I){F.html("")}this.angular("compile",D)},_preselect:function(D,E){if(!D&&!E){E=this._optionLabelText()}this._accessor(D);this._textAccessor(E);this._old=this._accessor();this._oldIndex=this.selectedIndex;this.listView.setValue(D);this._initialIndex=null;this._presetValue=true},_assignInstance:function(G,E){var F=this.options.dataTextField;var D={};if(F){w(D,F.split("."),G);w(D,this.options.dataValueField.split("."),E);D=new d(D)}else{D=G}return D}});function w(F,E,G){var D=0,I=E.length-1,H;for(;D<I;++D){H=E[D];if(!(H in F)){F[H]={}}F=F[H]}F[E[I]]=G}function A(D,E){if(D>=E){D-=E}return D}function m(F,E){for(var D=0;D<F.length;D++){if(F.charAt(D)!==E){return false}}return true}t.plugin(j)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.combobox",["kendo.list","kendo.mobile.scroller"],a)}(function(){var a={id:"combobox",name:"ComboBox",category:"web",description:"The ComboBox widget allows the selection from pre-defined values or entering a new value.",depends:["list"],features:[{id:"mobile-scroller",name:"Mobile scroller",description:"Support for kinetic scrolling in mobile device",depends:["mobile.scroller"]},{id:"virtualization",name:"VirtualList",description:"Support for virtualization",depends:["virtuallist"]}]};(function(f,h){var t=window.kendo,s=t.ui,b=s.List,r=s.Select,o=t.caret,m=t.support,v=m.placeholder,i=t._activeElement,q=t.keys,B=".kendoComboBox",g="click"+B,k="mousedown"+B,x="disabled",c="readonly",p="change",y="k-state-default",l="k-state-focused",A="k-state-disabled",d="aria-disabled",n="filter",e="accept",j="rebind",u="mouseenter"+B+" mouseleave"+B,w=f.proxy;var z=r.extend({init:function(D,C){var F=this,G,E;F.ns=B;C=f.isArray(C)?{dataSource:C}:C;r.fn.init.call(F,D,C);C=F.options;D=F.element.on("focus"+B,w(F._focusHandler,F));C.placeholder=C.placeholder||D.attr("placeholder");F._reset();F._wrapper();F._input();F._clearButton();F._tabindex(F.input);F._popup();F._dataSource();F._ignoreCase();F._enable();F._oldIndex=F.selectedIndex=-1;F._aria();F._initialIndex=C.index;F.requireValueMapper(F.options);F._initList();F._cascade();if(C.autoBind){F._filterSource()}else{G=C.text;if(!G&&F._isSelect){G=D.children(":selected").text()}if(G){F._setText(G)}}if(!G){F._placeholder()}E=f(F.element).parents("fieldset").is(":disabled");if(E){F.enable(false)}t.notify(F)},options:{name:"ComboBox",enabled:true,index:-1,text:null,value:null,autoBind:true,delay:200,dataTextField:"",dataValueField:"",minLength:1,enforceMinLength:false,height:200,highlightFirst:true,filter:"none",placeholder:"",suggest:false,cascadeFrom:"",cascadeFromField:"",ignoreCase:true,animation:{},virtual:false,template:null,groupTemplate:"#:data#",fixedGroupTemplate:"#:data#",clearButton:true,syncValueAndText:true},events:["open","close",p,"select","filtering","dataBinding","dataBound","cascade","set"],setOptions:function(C){r.fn.setOptions.call(this,C);this.listView.setOptions(C);this._accessors();this._aria()},destroy:function(){var C=this;C.input.off(B);C.element.off(B);C._inputWrapper.off(B);clearTimeout(C._pasteTimeout);C._arrow.off(g+" "+k);C._clear.off(g+" "+k);r.fn.destroy.call(C)},_change:function(){var F=this;var G=F.text();var E=G&&G!==F._oldText&&G!==F.options.placeholder;var C=F.selectedIndex;var D=C===-1;if(!F.options.syncValueAndText&&!F.value()&&D&&E){F._old="";F._oldIndex=C;F._oldText=G;if(!F._typing){F.element.trigger(p)}F.trigger(p);F._typing=false;return}r.fn._change.call(F)},_focusHandler:function(){this.input.focus()},_arrowClick:function(){this._toggle()},_inputFocus:function(){this._inputWrapper.addClass(l);this._placeholder(false)},_inputFocusout:function(){var E=this;var F=E.value();E._inputWrapper.removeClass(l);clearTimeout(E._typingTimeout);E._typingTimeout=null;E.text(E.text());var D=E._focus();var C=this.listView.dataItemByIndex(this.listView.getElementIndex(D));if(F!==E.value()&&E.trigger("select",{dataItem:C,item:D})){E.value(F);return}E._placeholder();E._blur();E.element.blur()},_inputPaste:function(){var C=this;clearTimeout(C._pasteTimeout);C._pasteTimeout=null;C._pasteTimeout=setTimeout(function(){C.search()})},_editable:function(G){var H=this,F=G.disable,E=G.readonly,J=H._inputWrapper.off(B),D=H.element.add(H.input.off(B)),I=H._arrow.off(g+" "+k),C=H._clear;if(!E&&!F){J.addClass(y).removeClass(A).on(u,H._toggleHover);D.removeAttr(x).removeAttr(c).attr(d,false);I.on(g,w(H._arrowClick,H)).on(k,function(K){K.preventDefault()});C.on(g,w(H._clearValue,H)).on(k,function(K){K.preventDefault()});H.input.on("keydown"+B,w(H._keydown,H)).on("focus"+B,w(H._inputFocus,H)).on("focusout"+B,w(H._inputFocusout,H)).on("paste"+B,w(H._inputPaste,H))}else{J.addClass(F?A:y).removeClass(F?y:A);D.attr(x,F).attr(c,E).attr(d,F)}},open:function(){var C=this;var D=C._state;if(C.popup.visible()){return}if(!C.listView.bound()&&D!==n||D===e){C._open=true;C._state=j;if(C.options.minLength!==1){C.refresh();C._openPopup()}else{C._filterSource()}}else{if(C._allowOpening()){C._openPopup();C._focusItem()}}},_scrollToFocusedItem:function(){var C=this.listView;C.scrollToIndex(C.getElementIndex(C.focus()))},_openPopup:function(){this.popup.one("activate",w(this._scrollToFocusedItem,this));this.popup.open()},_updateSelectionState:function(){var C=this;var E=C.options.text;var D=C.options.value;if(C.listView.isFiltered()){return}if(C.selectedIndex===-1){if(E===h||E===null){E=D}C._accessor(D);C.input.val(E||C.input.val());C._placeholder()}else{if(C._oldIndex===-1){C._oldIndex=C.selectedIndex}}},_buildOptions:function(E){var C=this;if(!C._isSelect){return}var D=C._customOption;if(C._state===j){C._state=""}C._customOption=h;C._options(E,"",C.value());if(D&&D[0].selected){C._custom(D.val())}},_updateSelection:function(){var F=this;var C=F.listView;var G=F._initialIndex;var H=G!==null&&G>-1;var E=F._state===n;if(E){f(C.focus()).removeClass("k-state-selected");return}if(F._fetch){return}if(!C.value().length){if(H){F.select(G)}else{if(F._accessor()){C.value(F._accessor())}}}F._initialIndex=null;var D=C.selectedDataItems()[0];if(!D){return}if(F._value(D)!==F.value()){F._custom(F._value(D))}if(F.text()&&F.text()!==F._text(D)){F._selectValue(D)}},_updateItemFocus:function(){var C=this.listView;if(!this.options.highlightFirst){C.focus(-1)}else{if(!C.focus()&&!C.focusIndex()){C.focus(0)}}},_listBound:function(){var F=this;var D=F.input[0]===i();var G=F.dataSource.flatView();var E=F.listView.skip();var C=E===h||E===0;F._presetValue=false;F._renderFooter();F._renderNoData();F._toggleNoData(!G.length);F._resizePopup();F.popup.position();F._buildOptions(G);F._makeUnselectable();F._updateSelection();if(G.length&&C){F._updateItemFocus();if(F.options.suggest&&D&&F.input.val()){F.suggest(G[0])}}if(F._open){F._open=false;if(F._typingTimeout&&!D){F.popup.close()}else{F.toggle(F._allowOpening())}F._typingTimeout=null}F._hideBusy();F.trigger("dataBound")},_listChange:function(){this._selectValue(this.listView.selectedDataItems()[0]);if(this._presetValue){this._oldIndex=this.selectedIndex}},_get:function(D){var F,E,C;if(typeof D==="function"){F=this.dataSource.flatView();for(C=0;C<F.length;C++){if(D(F[C])){D=C;E=true;break}}if(!E){D=-1}}return D},_select:function(D,C){var E=this;D=E._get(D);if(D===-1){E.input[0].value="";E._accessor("")}return E.listView.select(D).done(function(){if(!C&&E._state===n){E._state=e}})},_selectValue:function(D){var C=this.listView.select();var E="";var F="";C=C[C.length-1];if(C===h){C=-1}this.selectedIndex=C;if(C===-1&&!D){F=this.input[0].value;if(this.options.syncValueAndText){E=F}this.listView.focus(-1)}else{if(D){E=this._dataValue(D);F=this._text(D)}if(E===null){E=""}}this._prev=this.input[0].value=F;this._accessor(E!==h?E:F,C);this._placeholder();this._triggerCascade()},refresh:function(){this.listView.refresh()},suggest:function(I){var G=this;var F=G.input[0];var H=G.text();var E=o(F)[0];var D=G._last;var C;if(D==q.BACKSPACE||D==q.DELETE){G._last=h;return}I=I||"";if(typeof I!=="string"){if(I[0]){I=G.dataSource.view()[b.inArray(I[0],G.ul[0])]}I=I?G._text(I):""}if(E<=0){E=H.toLowerCase().indexOf(I.toLowerCase())+1}if(I){I=I.toString();C=I.toLowerCase().indexOf(H.toLowerCase());if(C>-1){H+=I.substring(C+H.length)}}else{H=H.substring(0,E)}if(H.length!==E||!I){F.value=H;if(F===i()){o(F,E,H.length)}}},text:function(I){I=I===null?"":I;var G=this;var D=G.input[0];var C=G.options.ignoreCase;var F=I;var E;var H;if(I===h){return D.value}if(G.options.autoBind===false&&!G.listView.bound()){G._setText(I);return}E=G.dataItem();if(E&&G._text(E)===I){H=G._value(E);if(H===b.unifyType(G._old,typeof H)){G._triggerCascade();return}}if(C){F=F.toLowerCase()}G._select(function(J){J=G._text(J);if(C){J=(J+"").toLowerCase()}return J===F}).done(function(){if(G.selectedIndex<0){D.value=I;if(G.options.syncValueAndText){G._accessor(I)}G._triggerCascade()}G._prev=D.value})},toggle:function(C){this._toggle(C,true)},value:function(F){var E=this;var D=E.options;var C=E.listView;if(F===h){F=E._accessor()||E.listView.value()[0];return F===h||F===null?"":F}E.requireValueMapper(E.options,F);E.trigger("set",{value:F});if(F===D.value&&E.input.val()===D.text){return}E._accessor(F);if(E._isFilterEnabled()&&C.bound()&&C.isFiltered()){E._clearFilter()}else{E._fetchData()}C.value(F).done(function(){if(E.selectedIndex===-1){E._accessor(F);E.input.val(F);E._placeholder(true)}E._old=E._accessor();E._oldIndex=E.selectedIndex;E._prev=E.input.val();if(E._state===n){E._state=e}})},_click:function(F){var E=this;var D=F.item;var C=E.listView.dataItemByIndex(E.listView.getElementIndex(D));F.preventDefault();if(E.trigger("select",{dataItem:C,item:D})){E.close();return}E._userTriggered=true;E._select(D).done(function(){E._blur()})},_inputValue:function(){return this.text()},_searchByWord:function(H){var F=this;var E=F.options;var I=F.dataSource;var D=E.ignoreCase;var C=function(J){var K=F._text(J);if(K!==h){K=K+"";if(K!==""&&H===""){return false}if(D){K=K.toLowerCase()}return K.indexOf(H)===0}};if(D){H=H.toLowerCase()}if(!F.ul[0].firstChild){I.one(p,function(){if(I.view()[0]){F.search(H)}}).fetch();return}this.listView.focus(this._get(C));var G=this.listView.focus();if(G){if(E.suggest){F.suggest(G)}this.open()}if(this.options.highlightFirst&&!H){this.listView.focusFirst()}},_input:function(){var H=this,F=H.element.removeClass("k-input")[0],G=F.accessKey,J=H.wrapper,I="input.k-input",E=F.name||"",D,C;if(E){E='name="'+E+'_input" '}D=J.find(I);if(!D[0]){J.append('<span tabindex="-1" unselectable="on" class="k-dropdown-wrap k-state-default"><input '+E+'class="k-input" type="text" autocomplete="off"/><span unselectable="on" class="k-select" aria-label="select"><span class="k-icon k-i-arrow-60-down"></span></span></span>').append(H.element);D=J.find(I)}D[0].style.cssText=F.style.cssText;D[0].title=F.title;C=parseInt(this.element.prop("maxlength")||this.element.attr("maxlength"),10);if(C>-1){D[0].maxLength=C}D.addClass(F.className).css({width:"100%",height:F.style.height}).attr({role:"combobox","aria-expanded":false}).show();if(v){D.attr("placeholder",H.options.placeholder)}if(G){F.accessKey="";D[0].accessKey=G}H._focused=H.input=D;H._inputWrapper=f(J[0].firstChild);H._arrow=J.find(".k-select").attr({role:"button",tabIndex:-1});H._arrowIcon=H._arrow.find(".k-icon");if(F.id){H._arrow.attr("aria-controls",H.ul[0].id)}},_clearButton:function(){this._clear=f('<span unselectable="on" class="k-icon k-clear-value k-i-close" title="clear"></span>').attr({role:"button",tabIndex:-1});if(this.options.clearButton){this._clear.insertAfter(this.input);this.wrapper.addClass("k-combobox-clearable")}},_keydown:function(E){var D=this,C=E.keyCode;D._last=C;clearTimeout(D._typingTimeout);D._typingTimeout=null;if(C!=q.TAB&&!D._move(E)){D._search()}},_placeholder:function(C){if(v){return}var E=this,D=E.input,G=E.options.placeholder,F;if(G){F=E.value();if(C===h){C=!F}D.toggleClass("k-readonly",C);if(!C){if(!F){G=""}else{return}}D.val(G);if(!G&&D[0]===i()){o(D[0],0,0)}}},_search:function(){var C=this;C._typingTimeout=setTimeout(function(){var D=C.text();if(C._prev!==D){C._prev=D;if(C.options.filter==="none"){C.listView.select(-1)}C.search(D)}C._typingTimeout=null},C.options.delay)},_setText:function(C){this.input.val(C);this._prev=C},_wrapper:function(){var D=this,C=D.element,E=C.parent();if(!E.is("span.k-widget")){E=C.hide().wrap("<span />").parent();E[0].style.cssText=C[0].style.cssText}D.wrapper=E.addClass("k-widget k-combobox k-header").addClass(C[0].className).css("display","")},_clearSelection:function(E,C){var F=this;var D=E.value();var G=D&&E.selectedIndex===-1;if(this.selectedIndex==-1&&this.value()){return}if(C||!D||G){F.options.value="";F.value("")}},_preselect:function(C,D){this.input.val(D);this._accessor(C);this._old=this._accessor();this._oldIndex=this.selectedIndex;this.listView.setValue(C);this._placeholder();this._initialIndex=null;this._presetValue=true}});s.plugin(z)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.multiselect",["kendo.list","kendo.mobile.scroller"],a)}(function(){var a={id:"multiselect",name:"MultiSelect",category:"web",description:"The MultiSelect widget allows the selection from pre-defined values.",depends:["list"],features:[{id:"mobile-scroller",name:"Mobile scroller",description:"Support for kinetic scrolling in mobile device",depends:["mobile.scroller"]},{id:"virtualization",name:"VirtualList",description:"Support for virtualization",depends:["virtuallist"]}]};(function(z,j){var A=window.kendo,C=A.ui,l=C.List,u=A.keys,d=A._activeElement,n=A.data.ObservableArray,G=z.proxy,q="id",p="li",D="accept",i="filter",K="rebind",F="open",J="close",y="change",t="progress",o="select",I="deselect",g="aria-disabled",s="k-state-focused",B="k-loading-hidden",h="k-state-hover",k="k-state-disabled",x="disabled",e="readonly",H=".kendoMultiSelect",E="click"+H,M="keydown"+H,b="mouseenter"+H,m="mouseleave"+H,c=b+" "+m,L=/"/g,r=z.isArray,w=["font-family","font-size","font-stretch","font-style","font-weight","letter-spacing","text-transform","line-height"];var v=l.extend({init:function(O,N){var Q=this,R,P;Q.ns=H;l.fn.init.call(Q,O,N);Q._optionsMap={};Q._customOptions={};Q._wrapper();Q._tagList();Q._input();Q._textContainer();Q._loader();Q._clearButton();Q._tabindex(Q.input);O=Q.element.attr("multiple","multiple").hide();N=Q.options;if(!N.placeholder){N.placeholder=O.data("placeholder")}R=O.attr(q);if(R){Q._tagID=R+"_tag_active";R=R+"_taglist";Q.tagList.attr(q,R)}Q._aria(R);Q._dataSource();Q._ignoreCase();Q._popup();Q._tagTemplate();Q.requireValueMapper(Q.options);Q._initList();Q._reset();Q._enable();Q._placeholder();if(N.autoBind){Q.dataSource.fetch()}else{if(N.value){Q._preselect(N.value)}}P=z(Q.element).parents("fieldset").is(":disabled");if(P){Q.enable(false)}A.notify(Q)},options:{name:"MultiSelect",tagMode:"multiple",enabled:true,autoBind:true,autoClose:true,highlightFirst:true,dataTextField:"",dataValueField:"",filter:"startswith",ignoreCase:true,minLength:1,enforceMinLength:false,delay:100,value:null,maxSelectedItems:null,placeholder:"",height:200,animation:{},virtual:false,itemTemplate:"",tagTemplate:"",groupTemplate:"#:data#",fixedGroupTemplate:"#:data#",clearButton:true},events:[F,J,y,o,I,"filtering","dataBinding","dataBound"],setDataSource:function(N){this.options.dataSource=N;this._state="";this._dataSource();this.listView.setDataSource(this.dataSource);if(this.options.autoBind){this.dataSource.fetch()}},setOptions:function(N){var O=this._listOptions(N);l.fn.setOptions.call(this,N);this.listView.setOptions(O);this._accessors();this._aria(this.tagList.attr(q));this._tagTemplate()},currentTag:function(N){var O=this;if(N!==j){if(O._currentTag){O._currentTag.removeClass(s).removeAttr(q);O.input.removeAttr("aria-activedescendant")}if(N){N.addClass(s).attr(q,O._tagID);O.input.attr("aria-activedescendant",O._tagID)}O._currentTag=N}else{return O._currentTag}},dataItems:function(){return this.listView.selectedDataItems()},destroy:function(){var O=this,N=O.ns;clearTimeout(O._busy);clearTimeout(O._typingTimeout);O.wrapper.off(N);O.tagList.off(N);O.input.off(N);O._clear.off(N);l.fn.destroy.call(O)},_activateItem:function(){l.fn._activateItem.call(this);this.currentTag(null)},_listOptions:function(N){var Q=this;var O=l.fn._listOptions.call(Q,z.extend(N,{selectedItemChange:G(Q._selectedItemChange,Q),selectable:"multiple"}));var R=this.options.itemTemplate||this.options.template;var P=O.itemTemplate||R||O.template;if(!P){P="#:"+A.expr(O.dataTextField,"data")+"#"}O.template=P;return O},_setListValue:function(){l.fn._setListValue.call(this,this._initialValues.slice(0))},_listChange:function(R){var Q=this.dataSource.flatView();var P=this._optionsMap;var N=this._value;if(this._state===K){this._state=""}for(var O=0;O<R.added.length;O++){if(P[N(R.added[O].dataItem)]===j){this._render(Q);break}}this._selectValue(R.added,R.removed)},_selectedItemChange:function(Q){var O=Q.items;var P;var N;for(N=0;N<O.length;N++){P=O[N];this.tagList.children().eq(P.index).children("span:first").html(this.tagTextTemplate(P.item))}},_wrapperMousedown:function(R){var P=this;var N=R.target.nodeName.toLowerCase()!=="input";var Q=z(R.target);var O=Q.hasClass("k-select")||Q.hasClass("k-icon");if(O){O=!Q.closest(".k-select").children(".k-i-arrow-60-down").length}if(N&&!(O&&A.support.mobileOS)){R.preventDefault()}if(!O){if(P.input[0]!==d()&&N){P.input.focus()}if(P.options.minLength===1){P.open()}}},_inputFocus:function(){this._placeholder(false);this.wrapper.addClass(s)},_inputFocusout:function(){var N=this;clearTimeout(N._typingTimeout);N.wrapper.removeClass(s);N._placeholder(!N.listView.selectedDataItems()[0],true);N.close();if(N._state===i){N._state=D;N.listView.skipUpdate(true)}N.element.blur()},_removeTag:function(W){var T=this;var O=T._state;var S=W.index();var V=T.listView;var U=V.value()[S];var N=T.listView.selectedDataItems()[S];var P=T._customOptions[U];var R;if(T.trigger(I,{dataItem:N,item:W})){T._close();return}if(P===j&&(O===D||O===i)){P=T._optionsMap[U]}var Q=function(){T.currentTag(null);T._change();T._close()};if(P===j){V.select(V.select()[S]).done(Q)}else{R=T.element[0].children[P];R.selected=false;V.removeAt(S);W.remove();Q()}},_tagListClick:function(O){var N=z(O.currentTarget);if(!N.children(".k-i-arrow-60-down").length){this._removeTag(N.closest(p))}},_clearClick:function(){this.value(null);this.trigger("change")},_editable:function(Q){var R=this,P=Q.disable,O=Q.readonly,T=R.wrapper.off(H),S=R.tagList.off(H),N=R.element.add(R.input.off(H));if(!O&&!P){T.removeClass(k).on(c,R._toggleHover).on("mousedown"+H+" touchend"+H,G(R._wrapperMousedown,R));R.input.on(M,G(R._keydown,R)).on("paste"+H,G(R._search,R)).on("focus"+H,G(R._inputFocus,R)).on("focusout"+H,G(R._inputFocusout,R));R._clear.on("click"+H,G(R._clearClick,R));N.removeAttr(x).removeAttr(e).attr(g,false);S.on(b,p,function(){z(this).addClass(h)}).on(m,p,function(){z(this).removeClass(h)}).on(E,"li.k-button .k-select",G(R._tagListClick,R))}else{if(P){T.addClass(k)}else{T.removeClass(k)}N.attr(x,P).attr(e,O).attr(g,P)}},_close:function(){var N=this;if(N.options.autoClose){N.close()}else{N.popup.position()}},_filterSource:function(N,O){if(!O){O=this._retrieveData}this._retrieveData=false;l.fn._filterSource.call(this,N,O)},close:function(){this.popup.close()},open:function(){var N=this;if(N._request){N._retrieveData=false}if(N._retrieveData||!N.listView.bound()||N._state===D){N._open=true;N._state=K;N.listView.skipUpdate(true);N._filterSource()}else{if(N._allowOpening()){N.popup.open();N._focusItem()}}},toggle:function(N){N=N!==j?N:!this.popup.visible();this[N?F:J]()},refresh:function(){this.listView.refresh()},_listBound:function(){var O=this;var P=O.dataSource.flatView();var N=O.listView.skip();O._render(P);O._renderFooter();O._renderNoData();O._toggleNoData(!P.length);O._resizePopup();if(O._open){O._open=false;O.toggle(O._allowOpening())}O.popup.position();if(O.options.highlightFirst&&(N===j||N===0)){O.listView.focusFirst()}if(O._touchScroller){O._touchScroller.reset()}O._hideBusy();O._makeUnselectable();O.trigger("dataBound")},_inputValue:function(){var O=this;var N=O.input.val();if(O.options.placeholder===N){N=""}return N},value:function(R){var P=this;var N=P.listView;var O=N.value().slice();var S=P.options.maxSelectedItems;var Q=N.bound()&&N.isFiltered();if(R===j){return O}P.requireValueMapper(P.options,R);R=P._normalizeValues(R);if(S!==null&&R.length>S){R=R.slice(0,S)}if(Q){P._clearFilter()}N.value(R);P._old=N.value();if(!Q){P._fetchData()}},_preselect:function(P,O){var N=this;if(!r(P)&&!(P instanceof A.data.ObservableArray)){P=[P]}if(z.isPlainObject(P[0])||P[0] instanceof A.data.ObservableObject||!N.options.dataValueField){N.dataSource.data(P);N.value(O||N._initialValues);N._retrieveData=true}},_setOption:function(P,O){var N=this.element[0].children[this._optionsMap[P]];if(N){N.selected=O}},_fetchData:function(){var O=this;var P=!!O.dataSource.view().length;var N=O.listView.value().length===0;if(N||O._request){return}if(O._retrieveData||!O._fetch&&!P){O._fetch=true;O._retrieveData=false;O.dataSource.read().done(function(){O._fetch=false})}},_isBound:function(){return this.listView.bound()&&!this._retrieveData},_dataSource:function(){var P=this,O=P.element,N=P.options,Q=N.dataSource||{};Q=r(Q)?{data:Q}:Q;Q.select=O;Q.fields=[{field:N.dataTextField},{field:N.dataValueField}];if(P.dataSource&&P._refreshHandler){P._unbindDataSource()}else{P._progressHandler=G(P._showBusy,P);P._errorHandler=G(P._hideBusy,P)}P.dataSource=A.data.DataSource.create(Q).bind(t,P._progressHandler).bind("error",P._errorHandler)},_reset:function(){var P=this,N=P.element,Q=N.attr("form"),O=Q?z("#"+Q):N.closest("form");if(O[0]){P._resetHandler=function(){setTimeout(function(){P.value(P._initialValues);P._placeholder()})};P._form=O.on("reset",P._resetHandler)}},_initValue:function(){var N=this.options.value||this.element.val();this._old=this._initialValues=this._normalizeValues(N)},_normalizeValues:function(O){var N=this;if(O===null){O=[]}else{if(O&&z.isPlainObject(O)){O=[N._value(O)]}else{if(O&&z.isPlainObject(O[0])){O=z.map(O,function(P){return N._value(P)})}else{if(!r(O)&&!(O instanceof n)){O=[O]}else{if(r(O)){O=O.slice()}}}}}return O},_change:function(){var N=this,O=N.value();if(!f(O,N._old)){N._old=O.slice();N.trigger(y);N.element.trigger(y)}},_click:function(P){var O=this;var N=P.item;P.preventDefault();O._select(N).done(function(){O._change();O._close()})},_keydown:function(P){var O=this;var U=P.keyCode;var W=O._currentTag;var T=O.listView;var Q=T.focus();var V=O.input.val();var R=A.support.isRtl(O.wrapper);var N=O.popup.visible();if(U===u.DOWN){P.preventDefault();if(!N){O.open();if(!Q){T.focusFirst()}return}if(Q){T.focusNext();if(!T.focus()){T.focusLast()}}else{T.focusFirst()}}else{if(U===u.UP){if(N){if(Q){T.focusPrev()}if(!T.focus()){O.close()}}P.preventDefault()}else{if(U===u.LEFT&&!R||U===u.RIGHT&&R){if(!V){W=W?W.prev():z(O.tagList[0].lastChild);if(W[0]){O.currentTag(W)}}}else{if(U===u.RIGHT&&!R||U===u.LEFT&&R){if(!V&&W){W=W.next();O.currentTag(W[0]?W:null)}}else{if(U===u.ENTER&&N){O._select(Q).done(function(){O._change();O._close()});P.preventDefault()}else{if(U===u.ESC){if(N){P.preventDefault()}else{O.currentTag(null)}O.close()}else{if(U===u.HOME){if(N){T.focusFirst()}else{if(!V){W=O.tagList[0].firstChild;if(W){O.currentTag(z(W))}}}}else{if(U===u.END){if(N){T.focusLast()}else{if(!V){W=O.tagList[0].lastChild;if(W){O.currentTag(z(W))}}}}else{if((U===u.DELETE||U===u.BACKSPACE)&&!V){if(O.options.tagMode==="single"){T.value([]);O._change();O._close();return}if(U===u.BACKSPACE&&!W){W=z(O.tagList[0].lastChild)}if(W&&W[0]){O._removeTag(W)}}else{if(O.popup.visible()&&(U===u.PAGEDOWN||U===u.PAGEUP)){P.preventDefault();var S=U===u.PAGEDOWN?1:-1;T.scrollWith(S*T.screenHeight())}else{clearTimeout(O._typingTimeout);setTimeout(function(){O._scale()});O._search()}}}}}}}}}}},_hideBusy:function(){var N=this;clearTimeout(N._busy);N.input.attr("aria-busy",false);N._loading.addClass(B);N._request=false;N._busy=null;N._showClear()},_showBusyHandler:function(){this.input.attr("aria-busy",true);this._loading.removeClass(B);this._hideClear()},_showBusy:function(){var N=this;N._request=true;if(N._busy){return}N._busy=setTimeout(G(N._showBusyHandler,N),100)},_placeholder:function(U,N){var R=this;var S=R.input;var P=d();var T=R.options.placeholder;var O=S.val();var V=S[0]===P;var Q=O.length;if(!V||R.options.autoClose||O===T){Q=0;O=""}if(U===j){U=false;if(S[0]!==P){U=!R.listView.selectedDataItems()[0]}}R._prev=O;S.toggleClass("k-readonly",U).val(U?T:O);if(V&&!N){A.caret(S[0],Q,Q)}R._scale()},_scale:function(){var P=this,R=P.wrapper,N=R.width(),O=P._span.text(P.input.val()),Q;if(!R.is(":visible")){O.appendTo(document.documentElement);N=Q=O.width()+25;O.appendTo(R)}else{Q=O.width()+25}P.input.width(Q>N?N:Q)},_option:function(Q,P,O){var N="<option";if(Q!==j){Q+="";if(Q.indexOf('"')!==-1){Q=Q.replace(L,"&quot;")}N+=' value="'+Q+'"'}if(O){N+=" selected"}N+=">";if(P!==j){N+=A.htmlEncode(P)}return N+="</option>"},_render:function(S){var R=this.listView.selectedDataItems();var W=this.listView.value();var P=S.length;var Q;var X="";var N;var V;var U;if(W.length!==R.length){R=this._buildSelectedItems(W)}var O={};var T={};for(U=0;U<P;U++){N=S[U];V=this._value(N);Q=this._selectedItemIndex(V,R);if(Q!==-1){R.splice(Q,1)}T[V]=U;X+=this._option(V,this._text(N),Q!==-1)}if(R.length){for(U=0;U<R.length;U++){N=R[U];V=this._value(N);O[V]=P;T[V]=P;P+=1;X+=this._option(V,this._text(N),true)}}this._customOptions=O;this._optionsMap=T;this.element.html(X)},_buildSelectedItems:function(Q){var R=this.options.dataValueField;var P=this.options.dataTextField;var O=[];var S;for(var N=0;N<Q.length;N++){S={};S[R]=Q[N];S[P]=Q[N];O.push(S)}return O},_selectedItemIndex:function(P,Q){var O=this._value;var N=0;for(;N<Q.length;N++){if(P===O(Q[N])){return N}}return -1},_search:function(){var N=this;N._typingTimeout=setTimeout(function(){var O=N.input.val();if(N._prev!==O){N._prev=O;N.search(O)}},N.options.delay)},_allowOpening:function(){return this._allowSelection()&&l.fn._allowOpening.call(this)},_allowSelection:function(){var N=this.options.maxSelectedItems;return N===null||N>this.listView.value().length},_angularTagItems:function(O){var N=this;N.angular(O,function(){return{elements:N.tagList[0].children,data:z.map(N.dataItems(),function(P){return{dataItem:P}})}})},_selectValue:function(T,O){var P=this;var V=P.value();var S=P.dataSource.total();var R=P.tagList;var Q=P._value;var N;var W;var U;P._angularTagItems("cleanup");if(P.options.tagMode==="multiple"){for(U=O.length-1;U>-1;U--){N=O[U];R[0].removeChild(R[0].children[N.position]);P._setOption(Q(N.dataItem),false)}for(U=0;U<T.length;U++){W=T[U];R.append(P.tagTemplate(W.dataItem));P._setOption(Q(W.dataItem),true)}}else{if(!P._maxTotal||P._maxTotal<S){P._maxTotal=S}R.html("");if(V.length){R.append(P.tagTemplate({values:V,dataItems:P.dataItems(),maxTotal:P._maxTotal,currentTotal:S}))}for(U=O.length-1;U>-1;U--){P._setOption(Q(O[U].dataItem),false)}for(U=0;U<T.length;U++){P._setOption(Q(T[U].dataItem),true)}}P._angularTagItems("compile");P._placeholder()},_select:function(R){var O=z.Deferred().resolve();if(!R){return O}var S=this;var N=S.listView;var Q=N.dataItemByIndex(N.getElementIndex(R));var P=R.hasClass("k-state-selected");if(S._state===K){S._state=""}if(!S._allowSelection()){return O}if(S.trigger(P?I:o,{dataItem:Q,item:R})){S._close();return O}return N.select(R).done(function(){S._placeholder();if(S._state===i){S._state=D;N.skipUpdate(true)}})},_input:function(){var Q=this;var O=Q.element;var P=O[0].accessKey;var N=Q._innerWrapper.children("input.k-input");if(!N[0]){N=z('<input class="k-input" style="width: 25px" />').appendTo(Q._innerWrapper)}O.removeAttr("accesskey");Q._focused=Q.input=N.attr({accesskey:P,autocomplete:"off",role:"listbox",title:O[0].title,"aria-expanded":false})},_tagList:function(){var N=this,O=N._innerWrapper.children("ul");if(!O[0]){O=z('<ul role="listbox" deselectable="on" class="k-reset"/>').appendTo(N._innerWrapper)}N.tagList=O},_tagTemplate:function(){var R=this;var O=R.options;var P=O.tagTemplate;var N=O.dataSource;var S=O.tagMode==="multiple";var Q;if(R.element[0].length&&!N){O.dataTextField=O.dataTextField||"text";O.dataValueField=O.dataValueField||"value"}Q=S?A.template("#:"+A.expr(O.dataTextField,"data")+"#",{useWithBlock:false}):A.template("#:values.length# item(s) selected");R.tagTextTemplate=P=P?A.template(P):Q;R.tagTemplate=function(T){return'<li class="k-button" deselectable="on"><span deselectable="on">'+P(T)+'</span><span unselectable="on" aria-label="'+(S?"delete":"open")+'" class="k-select"><span class="k-icon '+(S?"k-i-close":"k-i-arrow-60-down")+'"></span></span></li>'}},_loader:function(){this._loading=z('<span class="k-icon k-i-loading '+B+'"></span>').insertAfter(this.input)},_clearButton:function(){this._clear=z('<span deselectable="on" class="k-icon k-clear-value k-i-close" title="clear"></span>').attr({role:"button",tabIndex:-1});if(this.options.clearButton){this._clear.insertAfter(this.input)}},_textContainer:function(){var N=A.getComputedStyles(this.input[0],w);N.position="absolute";N.visibility="hidden";N.top=-3333;N.left=-3333;this._span=z("<span/>").css(N).appendTo(this.wrapper)},_wrapper:function(){var O=this,N=O.element,P=N.parent("span.k-multiselect");if(!P[0]){P=N.wrap('<div class="k-widget k-multiselect k-header" deselectable="on" />').parent();P[0].style.cssText=N[0].style.cssText;P[0].title=N[0].title;z('<div class="k-multiselect-wrap k-floatwrap" deselectable="on" />').insertBefore(N)}O.wrapper=P.addClass(N[0].className).css("display","");O._innerWrapper=z(P[0].firstChild)}});function f(O,N){var P;if(O===null&&N!==null||O!==null&&N===null){return false}P=O.length;if(P!==N.length){return false}while(P--){if(O[P]!==N[P]){return false}}return true}C.plugin(v)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.slider",["kendo.draganddrop"],a)}(function(){var a={id:"slider",name:"Slider",category:"web",description:"The Slider widget provides a rich input for selecting values or ranges of values.",depends:["draganddrop"]};(function(E,l){var H=window.kendo,d=H.ui.Widget,k=H.ui.Draggable,X=H._outerWidth,ac=H._outerHeight,j=E.extend,z=H.format,p=H.parseFloat,Y=E.proxy,t=E.isArray,A=Math,Q=H.support,L=Q.pointers,T=Q.msPointers,D="change",c="slide",N=".slider",M="touchstart"+N+" mousedown"+N,V=L?"pointerdown"+N:T?"MSPointerDown"+N:M,e="touchend"+N+" mouseup"+N,h=L?"pointerup":T?"MSPointerUp"+N:e,r="moveSelection",y="keydown"+N,S="click"+N,i="mouseover"+N,ab="focus"+N,O="blur"+N,f=".k-draghandle",g=".k-slider-track",I=".k-tick",s="k-state-selected",R="k-state-focused",Z="k-state-default",x="k-state-disabled",C="disabled",F="undefined",v="tabindex",q=H.getTouches;var ad=d.extend({init:function(af,ae){var ag=this;d.fn.init.call(ag,af,ae);ae=ag.options;ag._isHorizontal=ae.orientation=="horizontal";ag._isRtl=ag._isHorizontal&&H.support.isRtl(af);ag._position=ag._isHorizontal?"left":"bottom";ag._sizeFn=ag._isHorizontal?"width":"height";ag._outerSize=ag._isHorizontal?X:ac;ae.tooltip.format=ae.tooltip.enabled?ae.tooltip.format||"{0}":"{0}";if(ae.smallStep<=0){throw new Error("Kendo UI Slider smallStep must be a positive number.")}ag._createHtml();ag.wrapper=ag.element.closest(".k-slider");ag._trackDiv=ag.wrapper.find(g);ag._setTrackDivWidth();ag._maxSelection=ag._trackDiv[ag._sizeFn]();ag._sliderItemsInit();ag._reset();ag._tabindex(ag.wrapper.find(f));ag[ae.enabled?"enable":"disable"]();var ah=H.support.isRtl(ag.wrapper)?-1:1;ag._keyMap={37:G(-1*ah*ae.smallStep),40:G(-ae.smallStep),39:G(+1*ah*ae.smallStep),38:G(+ae.smallStep),35:K(ae.max),36:K(ae.min),33:G(+ae.largeStep),34:G(-ae.largeStep)};H.notify(ag)},events:[D,c],options:{enabled:true,min:0,max:10,smallStep:1,largeStep:5,orientation:"horizontal",tickPlacement:"both",tooltip:{enabled:true,format:"{0}"}},_distance:function(){return aa(this.options.max-this.options.min)},_resize:function(){this._setTrackDivWidth();this.wrapper.find(".k-slider-items").remove();this._maxSelection=this._trackDiv[this._sizeFn]();this._sliderItemsInit();this._refresh();if(this.options.enabled){this.enable(true)}},_sliderItemsInit:function(){var ag=this,af=ag.options;var ae=ag._maxSelection/((af.max-af.min)/af.smallStep);var ah=ag._calculateItemsWidth(A.floor(ag._distance()/af.smallStep));if(af.tickPlacement!="none"&&ae>=2){E(this.element).parent().find(".k-slider-items").remove();ag._trackDiv.before(n(af,ag._distance()));ag._setItemsWidth(ah);ag._setItemsTitle()}ag._calculateSteps(ah);if(af.tickPlacement!="none"&&ae>=2&&af.largeStep>=af.smallStep){ag._setItemsLargeTick()}},getSize:function(){return H.dimensions(this.wrapper)},_setTrackDivWidth:function(){var ae=this,af=parseFloat(ae._trackDiv.css(ae._isRtl?"right":ae._position),10)*2;ae._trackDiv[ae._sizeFn](ae.wrapper[ae._sizeFn]()-2-af)},_setItemsWidth:function(aj){var ah=this,ao=ah.options,af=0,am=aj.length-1,ai=ah.wrapper.find(I),ae,an=0,al=2,ag=ai.length,ak=0;for(ae=0;ae<ag-2;ae++){E(ai[ae+1])[ah._sizeFn](aj[ae])}if(ah._isHorizontal){E(ai[af]).addClass("k-first")[ah._sizeFn](aj[am-1]);E(ai[am]).addClass("k-last")[ah._sizeFn](aj[am])}else{E(ai[am]).addClass("k-first")[ah._sizeFn](aj[am]);E(ai[af]).addClass("k-last")[ah._sizeFn](aj[am-1])}if(ah._distance()%ao.smallStep!==0&&!ah._isHorizontal){for(ae=0;ae<aj.length;ae++){ak+=aj[ae]}an=ah._maxSelection-ak;an+=parseFloat(ah._trackDiv.css(ah._position),10)+al;ah.wrapper.find(".k-slider-items").css("padding-top",an)}},_setItemsTitle:function(){var al=this,ah=al.options,ag=al.wrapper.find(I),aj=ah.min,ak=ag.length,ai=al._isHorizontal&&!al._isRtl?0:ak-1,af=al._isHorizontal&&!al._isRtl?ak:-1,ae=al._isHorizontal&&!al._isRtl?1:-1;for(;ai-af!==0;ai+=ae){E(ag[ai]).attr("title",z(ah.tooltip.format,aa(aj)));aj+=ah.smallStep}},_setItemsLargeTick:function(){var ai=this,af=ai.options,ae=ai.wrapper.find(I),ag=0,ah,aj;if(u(af.largeStep)%u(af.smallStep)===0||ai._distance()/af.largeStep>=3){if(!ai._isHorizontal&&!ai._isRtl){ae=E.makeArray(ae).reverse()}for(ag=0;ag<ae.length;ag++){ah=E(ae[ag]);aj=ai._values[ag];var ak=aa(u(aj-this.options.min));if(ak%u(af.smallStep)===0&&ak%u(af.largeStep)===0){ah.addClass("k-tick-large").html("<span class='k-label'>"+ah.attr("title")+"</span>");if(ag!==0&&ag!==ae.length-1){ah.css("line-height",ah[ai._sizeFn]()+"px")}}}}},_calculateItemsWidth:function(am){var ah=this,al=ah.options,ag=parseFloat(ah._trackDiv.css(ah._sizeFn))+1,ae=ah._distance(),ak=ag/ae,ai,aj,af;if(ae/al.smallStep-A.floor(ae/al.smallStep)>0){ag-=ae%al.smallStep*ak}ai=ag/am;aj=[];for(af=0;af<am-1;af++){aj[af]=ai}aj[am-1]=aj[am]=ai/2;return ah._roundWidths(aj)},_roundWidths:function(ag){var ah=0,af=ag.length,ae;for(ae=0;ae<af;ae++){ah+=ag[ae]-A.floor(ag[ae]);ag[ae]=A.floor(ag[ae])}ah=A.round(ah);return this._addAdditionalSize(ah,ag)},_addAdditionalSize:function(ae,ah){if(ae===0){return ah}var ag=parseFloat(ah.length-1)/parseFloat(ae==1?ae:ae-1),af;for(af=0;af<ae;af++){ah[parseInt(A.round(ag*af),10)]+=1}return ah},_calculateSteps:function(ai){var ah=this,al=ah.options,af=al.min,ak=0,ae=ah._distance(),am=A.ceil(ae/al.smallStep),ag=1,aj;am+=ae/al.smallStep%1===0?1:0;ai.splice(0,0,ai[am-2]*2);ai.splice(am-1,1,ai.pop()*2);ah._pixelSteps=[ak];ah._values=[af];if(am===0){return}while(ag<am){ak+=(ai[ag-1]+ai[ag])/2;ah._pixelSteps[ag]=ak;af+=al.smallStep;ah._values[ag]=aa(af);ag++}aj=ae%al.smallStep===0?am-1:am;ah._pixelSteps[aj]=ah._maxSelection;ah._values[aj]=al.max;if(ah._isRtl){ah._pixelSteps.reverse();ah._values.reverse()}},_getValueFromPosition:function(al,ag){var ak=this,af=ak.options,aj=A.max(af.smallStep*(ak._maxSelection/ak._distance()),0),ae=0,ai=aj/2,ah;if(ak._isHorizontal){ae=al-ag.startPoint;if(ak._isRtl){ae=ak._maxSelection-ae}}else{ae=ag.startPoint-al}if(ak._maxSelection-(parseInt(ak._maxSelection%aj,10)-3)/2<ae){return af.max}for(ah=0;ah<ak._pixelSteps.length;ah++){if(A.abs(ak._pixelSteps[ah]-ae)-1<=ai){return aa(ak._values[ah])}}},_getFormattedValue:function(al,ag){var ah=this,af="",aj=ah.options.tooltip,ae,ai,ak;if(t(al)){ai=al[0];ak=al[1]}else{if(ag&&ag.type){ai=ag.selectionStart;ak=ag.selectionEnd}}if(ag){ae=ag.tooltipTemplate}if(!ae&&aj.template){ae=H.template(aj.template)}if(t(al)||ag&&ag.type){if(ae){af=ae({selectionStart:ai,selectionEnd:ak})}else{ai=z(aj.format,ai);ak=z(aj.format,ak);af=ai+" - "+ak}}else{if(ag){ag.val=al}if(ae){af=ae({value:al})}else{af=z(aj.format,al)}}return af},_getDraggableArea:function(){var ae=this,af=H.getOffset(ae._trackDiv);return{startPoint:ae._isHorizontal?af.left:af.top+ae._maxSelection,endPoint:ae._isHorizontal?af.left+ae._maxSelection:af.top}},_createHtml:function(){var ah=this,ag=ah.element,af=ah.options,ae=ag.find("input");if(ae.length==2){ae.eq(0).prop("value",m(af.selectionStart));ae.eq(1).prop("value",m(af.selectionEnd))}else{ag.prop("value",m(af.value))}ag.wrap(P(af,ag,ah._isHorizontal)).hide();if(af.showButtons){ag.before(B(af,"increase",ah._isHorizontal,ah._isRtl)).before(B(af,"decrease",ah._isHorizontal,ah._isRtl))}ag.before(b(af,ag))},_focus:function(ah){var af=this,ag=ah.target,ai=af.value(),ae=af._drag;if(!ae){if(ag==af.wrapper.find(f).eq(0)[0]){ae=af._firstHandleDrag;af._activeHandle=0}else{ae=af._lastHandleDrag;af._activeHandle=1}ai=ai[af._activeHandle]}E(ag).addClass(R+" "+s);if(ae){af._activeHandleDrag=ae;ae.selectionStart=af.options.selectionStart;ae.selectionEnd=af.options.selectionEnd;ae._updateTooltip(ai)}},_focusWithMouse:function(ag){ag=E(ag);var af=this,ae=ag.is(f)?ag.index():0;window.setTimeout(function(){af.wrapper.find(f)[ae==2?1:0].focus()},1);af._setTooltipTimeout()},_blur:function(ag){var af=this,ae=af._activeHandleDrag;E(ag.target).removeClass(R+" "+s);if(ae){ae._removeTooltip();delete af._activeHandleDrag;delete af._activeHandle}},_setTooltipTimeout:function(){var ae=this;ae._tooltipTimeout=window.setTimeout(function(){var af=ae._drag||ae._activeHandleDrag;if(af){af._removeTooltip()}},300)},_clearTooltipTimeout:function(){var af=this;window.clearTimeout(this._tooltipTimeout);var ae=af._drag||af._activeHandleDrag;if(ae&&ae.tooltipDiv){ae.tooltipDiv.stop(true,false).css("opacity",1)}},_reset:function(){var ag=this,ae=ag.element,ah=ae.attr("form"),af=ah?E("#"+ah):ae.closest("form");if(af[0]){ag._form=af.on("reset",Y(ag._formResetHandler,ag))}},min:function(ae){if(!ae){return this.options.min}this.setOptions({min:ae})},max:function(ae){if(!ae){return this.options.max}this.setOptions({max:ae})},setOptions:function(ae){d.fn.setOptions.call(this,ae);this._sliderItemsInit();this._refresh()},destroy:function(){if(this._form){this._form.off("reset",this._formResetHandler)}d.fn.destroy.call(this)}});function P(ae,ah,ak){var ag=ak?" k-slider-horizontal":" k-slider-vertical",ai=ae.style?ae.style:ah.attr("style"),af=ah.attr("class")?" "+ah.attr("class"):"",aj="";if(ae.tickPlacement=="bottomRight"){aj=" k-slider-bottomright"}else{if(ae.tickPlacement=="topLeft"){aj=" k-slider-topleft"}}ai=ai?" style='"+ai+"'":"";return"<div class='k-widget k-slider"+ag+af+"'"+ai+"><div class='k-slider-wrap"+(ae.showButtons?" k-slider-buttons":"")+aj+"'></div></div>"}function B(af,ah,ai,ae){var ag="";if(ai){if(!ae&&ah=="increase"||ae&&ah!="increase"){ag="k-i-arrow-60-right"}else{ag="k-i-arrow-60-left"}}else{if(ah=="increase"){ag="k-i-arrow-60-up"}else{ag="k-i-arrow-60-down"}}return"<a class='k-button k-button-"+ah+"' title='"+af[ah+"ButtonTitle"]+"' aria-label='"+af[ah+"ButtonTitle"]+"'><span class='k-icon "+ag+"'></span></a>"}function n(af,ai){var ae="<ul class='k-reset k-slider-items'>",ah=A.floor(aa(ai/af.smallStep))+1,ag;for(ag=0;ag<ah;ag++){ae+="<li class='k-tick' role='presentation'>&nbsp;</li>"}ae+="</ul>";return ae}function b(ae,ag){var ah=ag.is("input")?1:2,af=ah==2?ae.leftDragHandleTitle:ae.dragHandleTitle;return"<div class='k-slider-track'><div class='k-slider-selection'><!-- --></div><a href='#' class='k-draghandle' title='"+af+"' role='slider' aria-valuemin='"+ae.min+"' aria-valuemax='"+ae.max+"' aria-valuenow='"+(ah>1?ae.selectionStart||ae.min:ae.value||ae.min)+"'>Drag</a>"+(ah>1?"<a href='#' class='k-draghandle' title='"+ae.rightDragHandleTitle+"'role='slider' aria-valuemin='"+ae.min+"' aria-valuemax='"+ae.max+"' aria-valuenow='"+(ae.selectionEnd||ae.max)+"'>Drag</a>":"")+"</div>"}function G(ae){return function(af){return af+ae}}function K(ae){return function(){return ae}}function m(ae){return(ae+"").replace(".",H.cultures.current.numberFormat["."])}function o(ag){var af=ag.toString();var ae=0;af=af.split(".");if(af[1]){ae=af[1].length}ae=ae>10?10:ae;return ae}function aa(ag){var ae,af;ag=parseFloat(ag,10);ae=o(ag);af=A.pow(10,ae||0);return A.round(ag*af)/af}function w(af,ae){var ag=p(af.getAttribute(ae));if(ag===null){ag=l}return ag}function W(ae){return typeof ae!==F}function u(ae){return ae*10000}var J=ad.extend({init:function(ag,af){var ah=this,ae;ag.type="text";af=j({},{value:w(ag,"value"),min:w(ag,"min"),max:w(ag,"max"),smallStep:w(ag,"step")},af);ag=E(ag);if(af&&af.enabled===l){af.enabled=!ag.is("[disabled]")}ad.fn.init.call(ah,ag,af);af=ah.options;if(!W(af.value)||af.value===null){af.value=af.min;ag.prop("value",m(af.min))}af.value=A.max(A.min(af.value,af.max),af.min);ae=ah.wrapper.find(f);this._selection=new J.Selection(ae,ah,af);ah._drag=new J.Drag(ae,"",ah,af)},options:{name:"Slider",showButtons:true,increaseButtonTitle:"Increase",decreaseButtonTitle:"Decrease",dragHandleTitle:"drag",tooltip:{format:"{0:#,#.##}"},value:null},enable:function(ah){var ai=this,ag=ai.options,aj,af;ai.disable();if(ah===false){return}ai.wrapper.removeClass(x).addClass(Z);ai.wrapper.find("input").removeAttr(C);aj=function(am){var ao=q(am)[0];if(!ao){return}var an=ai._isHorizontal?ao.location.pageX:ao.location.pageY,ak=ai._getDraggableArea(),al=E(am.target);if(al.hasClass("k-draghandle")){al.addClass(R+" "+s);return}ai._update(ai._getValueFromPosition(an,ak));ai._focusWithMouse(am.target);ai._drag.dragstart(am);am.preventDefault()};ai.wrapper.find(I+", "+g).on(V,aj).end().on(V,function(){E(document.documentElement).one("selectstart",H.preventDefault)}).on(h,function(){ai._drag._end()});ai.wrapper.find(f).attr(v,0).on(e,function(){ai._setTooltipTimeout()}).on(S,function(ak){ai._focusWithMouse(ak.target);ak.preventDefault()}).on(ab,Y(ai._focus,ai)).on(O,Y(ai._blur,ai));af=Y(function(ak){var al=ai._nextValueByIndex(ai._valueIndex+ak*1);ai._setValueInRange(al);ai._drag._updateTooltip(al)},ai);if(ag.showButtons){var ae=Y(function(al,ak){this._clearTooltipTimeout();if(al.which===1||Q.touch&&al.which===0){af(ak);this.timeout=setTimeout(Y(function(){this.timer=setInterval(function(){af(ak)},60)},this),200)}},ai);ai.wrapper.find(".k-button").on(e,Y(function(ak){this._clearTimer();ai._focusWithMouse(ak.target)},ai)).on(i,function(ak){E(ak.currentTarget).addClass("k-state-hover")}).on("mouseout"+N,Y(function(ak){E(ak.currentTarget).removeClass("k-state-hover");this._clearTimer()},ai)).eq(0).on(M,Y(function(ak){ae(ak,1)},ai)).click(false).end().eq(1).on(M,Y(function(ak){ae(ak,-1)},ai)).click(H.preventDefault)}ai.wrapper.find(f).off(y,false).on(y,Y(this._keydown,ai));ag.enabled=true},disable:function(){var ae=this;ae.wrapper.removeClass(Z).addClass(x);E(ae.element).prop(C,C);ae.wrapper.find(".k-button").off(M).on(M,H.preventDefault).off(e).on(e,H.preventDefault).off("mouseleave"+N).on("mouseleave"+N,H.preventDefault).off(i).on(i,H.preventDefault);ae.wrapper.find(I+", "+g).off(V).off(h);ae.wrapper.find(f).attr(v,-1).off(e).off(y).off(S).off(ab).off(O);ae.options.enabled=false},_update:function(af){var ae=this,ag=ae.value()!=af;ae.value(af);if(ag){ae.trigger(D,{value:ae.options.value})}},value:function(ag){var af=this,ae=af.options;ag=aa(ag);if(isNaN(ag)){return ae.value}if(ag>=ae.min&&ag<=ae.max){if(ae.value!=ag){af.element.prop("value",m(ag));ae.value=ag;af._refreshAriaAttr(ag);af._refresh()}}},_refresh:function(){this.trigger(r,{value:this.options.value})},_refreshAriaAttr:function(ah){var ag=this,af=ag._drag,ae;if(af&&af._tooltipDiv){ae=af._tooltipDiv.text()}else{ae=ag._getFormattedValue(ah,null)}this.wrapper.find(f).attr("aria-valuenow",ah).attr("aria-valuetext",ae)},_clearTimer:function(){clearTimeout(this.timeout);clearInterval(this.timer)},_keydown:function(af){var ae=this;if(af.keyCode in ae._keyMap){ae._clearTooltipTimeout();ae._setValueInRange(ae._keyMap[af.keyCode](ae.options.value));ae._drag._updateTooltip(ae.value());af.preventDefault()}},_setValueInRange:function(ag){var af=this,ae=af.options;ag=aa(ag);if(isNaN(ag)){af._update(ae.min);return}ag=A.max(A.min(ag,ae.max),ae.min);af._update(ag)},_nextValueByIndex:function(ae){var af=this._values.length;if(this._isRtl){ae=af-1-ae}return this._values[A.max(0,A.min(ae,af-1))]},_formResetHandler:function(){var af=this,ae=af.options.min;setTimeout(function(){var ag=af.element[0].value;af.value(ag===""||isNaN(ag)?ae:ag)})},destroy:function(){var ae=this;ad.fn.destroy.call(ae);ae.wrapper.off(N).find(".k-button").off(N).end().find(f).off(N).end().find(I+", "+g).off(N).end();ae._drag.draggable.destroy();ae._drag._removeTooltip(true)}});J.Selection=function(ae,ag,af){function ah(ao){var aj=ao-af.min,ai=ag._valueIndex=A.ceil(aa(aj/af.smallStep)),al=parseInt(ag._pixelSteps[ai],10),an=ag._trackDiv.find(".k-slider-selection"),ak=parseInt(ag._outerSize(ae)/2,10),am=ag._isRtl?2:0;an[ag._sizeFn](ag._isRtl?ag._maxSelection-al:al);ae.css(ag._position,al-ak-am)}ah(af.value);ag.bind([c,r],function(ai){ah(parseFloat(ai.value,10))});ag.bind(D,function(ai){ah(parseFloat(ai.sender.value(),10))})};J.Drag=function(ag,ah,ae,af){var ai=this;ai.owner=ae;ai.options=af;ai.element=ag;ai.type=ah;ai.draggable=new k(ag,{distance:0,dragstart:Y(ai._dragstart,ai),drag:Y(ai.drag,ai),dragend:Y(ai.dragend,ai),dragcancel:Y(ai.dragcancel,ai)});ag.click(false)};J.Drag.prototype={dragstart:function(ae){this.owner._activeDragHandle=this;this.draggable.userEvents.cancel();this._dragstart(ae);this.dragend()},_dragstart:function(ah){var ag=this,ae=ag.owner,af=ag.options;if(!af.enabled){ah.preventDefault();return}this.owner._activeDragHandle=this;ae.element.off(i);ae.wrapper.find("."+R).removeClass(R+" "+s);ag.element.addClass(R+" "+s);E(document.documentElement).css("cursor","pointer");ag.dragableArea=ae._getDraggableArea();ag.step=A.max(af.smallStep*(ae._maxSelection/ae._distance()),0);if(ag.type){ag.selectionStart=af.selectionStart;ag.selectionEnd=af.selectionEnd;ae._setZIndex(ag.type)}else{ag.oldVal=ag.val=af.value}ag._removeTooltip(true);ag._createTooltip()},_createTooltip:function(){var ai=this,ae=ai.owner,ak=ai.options.tooltip,ag="",ah=E(window),af,aj;if(!ak.enabled){return}if(ak.template){af=ai.tooltipTemplate=H.template(ak.template)}E(".k-slider-tooltip").remove();ai.tooltipDiv=E("<div class='k-widget k-tooltip k-slider-tooltip'><!-- --></div>").appendTo(document.body);ag=ae._getFormattedValue(ai.val||ae.value(),ai);if(!ai.type){aj="k-callout-"+(ae._isHorizontal?"s":"e");ai.tooltipInnerDiv="<div class='k-callout "+aj+"'><!-- --></div>";ag+=ai.tooltipInnerDiv}ai.tooltipDiv.html(ag);ai._scrollOffset={top:ah.scrollTop(),left:ah.scrollLeft()};ai.moveTooltip()},drag:function(ak){var aj=this,af=aj.owner,ae=ak.x.location,al=ak.y.location,ai=aj.dragableArea.startPoint,ag=aj.dragableArea.endPoint,ah;ak.preventDefault();if(af._isHorizontal){if(af._isRtl){aj.val=aj.constrainValue(ae,ai,ag,ae<ag)}else{aj.val=aj.constrainValue(ae,ai,ag,ae>=ag)}}else{aj.val=aj.constrainValue(al,ag,ai,al<=ag)}if(aj.oldVal!=aj.val){aj.oldVal=aj.val;if(aj.type){if(aj.type=="firstHandle"){if(aj.val<aj.selectionEnd){aj.selectionStart=aj.val}else{aj.selectionStart=aj.selectionEnd=aj.val}}else{if(aj.val>aj.selectionStart){aj.selectionEnd=aj.val}else{aj.selectionStart=aj.selectionEnd=aj.val}}ah={values:[aj.selectionStart,aj.selectionEnd],value:[aj.selectionStart,aj.selectionEnd]}}else{ah={value:aj.val}}af.trigger(c,ah)}aj._updateTooltip(aj.val)},_updateTooltip:function(ai){var ag=this,ae=ag.options,ah=ae.tooltip,af="";if(!ah.enabled){return}if(!ag.tooltipDiv){ag._createTooltip()}af=ag.owner._getFormattedValue(aa(ai),ag);if(!ag.type){af+=ag.tooltipInnerDiv}ag.tooltipDiv.html(af);ag.moveTooltip()},dragcancel:function(){this.owner._refresh();E(document.documentElement).css("cursor","");return this._end()},dragend:function(){var af=this,ae=af.owner;E(document.documentElement).css("cursor","");if(af.type){ae._update(af.selectionStart,af.selectionEnd)}else{ae._update(af.val);af.draggable.userEvents._disposeAll()}af.draggable.userEvents.cancel();return af._end()},_end:function(){var af=this,ae=af.owner;ae._focusWithMouse(af.element);ae.element.on(i);return false},_removeTooltip:function(af){var ag=this,ae=ag.owner;if(ag.tooltipDiv&&ae.options.tooltip.enabled&&ae.options.enabled){if(af){ag.tooltipDiv.remove();ag.tooltipDiv=null}else{ag.tooltipDiv.fadeOut("slow",function(){E(this).remove();ag.tooltipDiv=null})}}},moveTooltip:function(){var am=this,af=am.owner,ap=0,ag=0,ak=am.element,aj=H.getOffset(ak),ai=8,ao=E(window),ah=am.tooltipDiv.find(".k-callout"),ae=X(am.tooltipDiv),at=ac(am.tooltipDiv),al,aq,ar,an;if(am.type){al=af.wrapper.find(f);aj=H.getOffset(al.eq(0));aq=H.getOffset(al.eq(1));if(af._isHorizontal){ap=aq.top;ag=aj.left+(aq.left-aj.left)/2}else{ap=aj.top+(aq.top-aj.top)/2;ag=aq.left}an=X(al.eq(0))+2*ai}else{ap=aj.top;ag=aj.left;an=X(ak)+2*ai}if(af._isHorizontal){ag-=parseInt((ae-af._outerSize(ak))/2,10);ap-=at+ah.height()+ai}else{ap-=parseInt((at-af._outerSize(ak))/2,10);ag-=ae+ah.width()+ai}if(af._isHorizontal){ar=am._flip(ap,at,an,ac(ao)+am._scrollOffset.top);ap+=ar;ag+=am._fit(ag,ae,X(ao)+am._scrollOffset.left)}else{ar=am._flip(ag,ae,an,X(ao)+am._scrollOffset.left);ap+=am._fit(ap,at,ac(ao)+am._scrollOffset.top);ag+=ar}if(ar>0&&ah){ah.removeClass();ah.addClass("k-callout k-callout-"+(af._isHorizontal?"n":"w"))}am.tooltipDiv.css({top:ap,left:ag})},_fit:function(af,ah,ae){var ag=0;if(af+ah>ae){ag=ae-(af+ah)}if(af<0){ag=-af}return ag},_flip:function(ai,ah,af,ae){var ag=0;if(ai+ah>ae){ag+=-(af+ah)}if(ai+ag<0){ag+=af+ah}return ag},constrainValue:function(af,ag,ae,ai){var ah=this,aj=0;if(ag<af&&af<ae){aj=ah.owner._getValueFromPosition(af,ah.dragableArea)}else{if(ai){aj=ah.options.max}else{aj=ah.options.min}}return aj}};H.ui.plugin(J);var U=ad.extend({init:function(ai,ah){var ak=this,af=E(ai).find("input"),ae=af.eq(0)[0],aj=af.eq(1)[0];ae.type="text";aj.type="text";if(ah&&ah.showButtons){if(window.console){window.console.warn("showbuttons option is not supported for the range slider, ignoring")}ah.showButtons=false}ah=j({},{selectionStart:w(ae,"value"),min:w(ae,"min"),max:w(ae,"max"),smallStep:w(ae,"step")},{selectionEnd:w(aj,"value"),min:w(aj,"min"),max:w(aj,"max"),smallStep:w(aj,"step")},ah);if(ah&&ah.enabled===l){ah.enabled=!af.is("[disabled]")}ad.fn.init.call(ak,ai,ah);ah=ak.options;if(!W(ah.selectionStart)||ah.selectionStart===null){ah.selectionStart=ah.min;af.eq(0).prop("value",m(ah.min))}if(!W(ah.selectionEnd)||ah.selectionEnd===null){ah.selectionEnd=ah.max;af.eq(1).prop("value",m(ah.max))}var ag=ak.wrapper.find(f);this._selection=new U.Selection(ag,ak,ah);ak._firstHandleDrag=new J.Drag(ag.eq(0),"firstHandle",ak,ah);ak._lastHandleDrag=new J.Drag(ag.eq(1),"lastHandle",ak,ah)},options:{name:"RangeSlider",leftDragHandleTitle:"drag",rightDragHandleTitle:"drag",tooltip:{format:"{0:#,#.##}"},selectionStart:null,selectionEnd:null},enable:function(af){var ag=this,ae=ag.options,ah;ag.disable();if(af===false){return}ag.wrapper.removeClass(x).addClass(Z);ag.wrapper.find("input").removeAttr(C);ah=function(al){var aj=q(al)[0];if(!aj){return}var aq=ag._isHorizontal?aj.location.pageX:aj.location.pageY,an=ag._getDraggableArea(),ai=ag._getValueFromPosition(aq,an),am=E(al.target),ao,ap,ak;if(am.hasClass("k-draghandle")){ag.wrapper.find("."+R).removeClass(R+" "+s);am.addClass(R+" "+s);return}if(ai<ae.selectionStart){ao=ai;ap=ae.selectionEnd;ak=ag._firstHandleDrag}else{if(ai>ag.selectionEnd){ao=ae.selectionStart;ap=ai;ak=ag._lastHandleDrag}else{if(ai-ae.selectionStart<=ae.selectionEnd-ai){ao=ai;ap=ae.selectionEnd;ak=ag._firstHandleDrag}else{ao=ae.selectionStart;ap=ai;ak=ag._lastHandleDrag}}}ak.dragstart(al);ag._setValueInRange(ao,ap);ag._focusWithMouse(ak.element)};ag.wrapper.find(I+", "+g).on(V,ah).end().on(V,function(){E(document.documentElement).one("selectstart",H.preventDefault)}).on(h,function(){if(ag._activeDragHandle){ag._activeDragHandle._end()}});ag.wrapper.find(f).attr(v,0).on(e,function(){ag._setTooltipTimeout()}).on(S,function(ai){ag._focusWithMouse(ai.target);ai.preventDefault()}).on(ab,Y(ag._focus,ag)).on(O,Y(ag._blur,ag));ag.wrapper.find(f).off(y,H.preventDefault).eq(0).on(y,Y(function(ai){this._keydown(ai,"firstHandle")},ag)).end().eq(1).on(y,Y(function(ai){this._keydown(ai,"lastHandle")},ag));ag.options.enabled=true},disable:function(){var ae=this;ae.wrapper.removeClass(Z).addClass(x);ae.wrapper.find("input").prop(C,C);ae.wrapper.find(I+", "+g).off(V).off(h);ae.wrapper.find(f).attr(v,-1).off(e).off(y).off(S).off(ab).off(O);ae.options.enabled=false},_keydown:function(aj,ai){var ah=this,al=ah.options.selectionStart,af=ah.options.selectionEnd,ae,ak,ag;if(aj.keyCode in ah._keyMap){ah._clearTooltipTimeout();if(ai=="firstHandle"){ag=ah._activeHandleDrag=ah._firstHandleDrag;al=ah._keyMap[aj.keyCode](al);if(al>af){af=al}}else{ag=ah._activeHandleDrag=ah._lastHandleDrag;af=ah._keyMap[aj.keyCode](af);if(al>af){al=af}}ah._setValueInRange(aa(al),aa(af));ae=Math.max(al,ah.options.selectionStart);ak=Math.min(af,ah.options.selectionEnd);ag.selectionEnd=Math.max(ak,ah.options.selectionStart);ag.selectionStart=Math.min(ae,ah.options.selectionEnd);ag._updateTooltip(ah.value()[ah._activeHandle]);aj.preventDefault()}},_update:function(ag,ah){var af=this,ae=af.value();var ai=ae[0]!=ag||ae[1]!=ah;af.value([ag,ah]);if(ai){af.trigger(D,{values:[ag,ah],value:[ag,ah]})}},value:function(ae){if(ae&&ae.length){return this._value(ae[0],ae[1])}else{return this._value()}},_value:function(aj,ae){var ag=this,af=ag.options,ah=af.selectionStart,ai=af.selectionEnd;if(isNaN(aj)&&isNaN(ae)){return[ah,ai]}else{aj=aa(aj);ae=aa(ae)}if(aj>=af.min&&aj<=af.max&&ae>=af.min&&ae<=af.max&&aj<=ae){if(ah!=aj||ai!=ae){ag.element.find("input").eq(0).prop("value",m(aj)).end().eq(1).prop("value",m(ae));af.selectionStart=aj;af.selectionEnd=ae;ag._refresh();ag._refreshAriaAttr(aj,ae)}}},values:function(af,ae){if(t(af)){return this._value(af[0],af[1])}else{return this._value(af,ae)}},_refresh:function(){var af=this,ae=af.options;af.trigger(r,{values:[ae.selectionStart,ae.selectionEnd],value:[ae.selectionStart,ae.selectionEnd]});if(ae.selectionStart==ae.max&&ae.selectionEnd==ae.max){af._setZIndex("firstHandle")}},_refreshAriaAttr:function(aj,ae){var ai=this,af=ai.wrapper.find(f),ah=ai._activeHandleDrag,ag;ag=ai._getFormattedValue([aj,ae],ah);af.eq(0).attr("aria-valuenow",aj);af.eq(1).attr("aria-valuenow",ae);af.attr("aria-valuetext",ag)},_setValueInRange:function(af,ag){var ae=this.options;af=A.max(A.min(af,ae.max),ae.min);ag=A.max(A.min(ag,ae.max),ae.min);if(af==ae.max&&ag==ae.max){this._setZIndex("firstHandle")}this._update(A.min(af,ag),A.max(af,ag))},_setZIndex:function(ae){this.wrapper.find(f).each(function(af){E(this).css("z-index",ae=="firstHandle"?1-af:af)})},_formResetHandler:function(){var af=this,ae=af.options;setTimeout(function(){var ah=af.element.find("input");var ai=ah[0].value;var ag=ah[1].value;af.values(ai===""||isNaN(ai)?ae.min:ai,ag===""||isNaN(ag)?ae.max:ag)})},destroy:function(){var ae=this;ad.fn.destroy.call(ae);ae.wrapper.off(N).find(I+", "+g).off(N).end().find(f).off(N);ae._firstHandleDrag.draggable.destroy();ae._lastHandleDrag.draggable.destroy()}});U.Selection=function(ae,ah,ag){function ai(ao){ao=ao||[];var an=ao[0]-ag.min,aj=ao[1]-ag.min,am=A.ceil(aa(an/ag.smallStep)),ap=A.ceil(aa(aj/ag.smallStep)),aq=ah._pixelSteps[am],ar=ah._pixelSteps[ap],ak=parseInt(ah._outerSize(ae.eq(0))/2,10),al=ah._isRtl?2:0;ae.eq(0).css(ah._position,aq-ak-al).end().eq(1).css(ah._position,ar-ak-al);af(aq,ar)}function af(al,am){var aj,an,ak=ah._trackDiv.find(".k-slider-selection");aj=A.abs(al-am);ak[ah._sizeFn](aj);if(ah._isRtl){an=A.max(al,am);ak.css("right",ah._maxSelection-an-1)}else{an=A.min(al,am);ak.css(ah._position,an-1)}}ai(ah.value());ah.bind([D,c,r],function(aj){ai(aj.values)})};H.ui.plugin(U)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.colorpicker",["kendo.core","kendo.color","kendo.popup","kendo.slider","kendo.userevents","kendo.button"],a)}(function(){var a={id:"colorpicker",name:"Color tools",category:"web",description:"Color selection widgets",depends:["core","color","popup","slider","userevents","button"]};(function(g,m,h){var p=window.kendo,o=p.ui,e=o.Widget,v=p.parseColor,B=p.Color,w=p.keys,t="background-color",i="k-state-selected",d="000000,7f7f7f,880015,ed1c24,ff7f27,fff200,22b14c,00a2e8,3f48cc,a349a4,ffffff,c3c3c3,b97a57,ffaec9,ffc90e,efe4b0,b5e61d,99d9ea,7092be,c8bfe7",r="FFFFFF,FFCCFF,FF99FF,FF66FF,FF33FF,FF00FF,CCFFFF,CCCCFF,CC99FF,CC66FF,CC33FF,CC00FF,99FFFF,99CCFF,9999FF,9966FF,9933FF,9900FF,FFFFCC,FFCCCC,FF99CC,FF66CC,FF33CC,FF00CC,CCFFCC,CCCCCC,CC99CC,CC66CC,CC33CC,CC00CC,99FFCC,99CCCC,9999CC,9966CC,9933CC,9900CC,FFFF99,FFCC99,FF9999,FF6699,FF3399,FF0099,CCFF99,CCCC99,CC9999,CC6699,CC3399,CC0099,99FF99,99CC99,999999,996699,993399,990099,FFFF66,FFCC66,FF9966,FF6666,FF3366,FF0066,CCFF66,CCCC66,CC9966,CC6666,CC3366,CC0066,99FF66,99CC66,999966,996666,993366,990066,FFFF33,FFCC33,FF9933,FF6633,FF3333,FF0033,CCFF33,CCCC33,CC9933,CC6633,CC3333,CC0033,99FF33,99CC33,999933,996633,993333,990033,FFFF00,FFCC00,FF9900,FF6600,FF3300,FF0000,CCFF00,CCCC00,CC9900,CC6600,CC3300,CC0000,99FF00,99CC00,999900,996600,993300,990000,66FFFF,66CCFF,6699FF,6666FF,6633FF,6600FF,33FFFF,33CCFF,3399FF,3366FF,3333FF,3300FF,00FFFF,00CCFF,0099FF,0066FF,0033FF,0000FF,66FFCC,66CCCC,6699CC,6666CC,6633CC,6600CC,33FFCC,33CCCC,3399CC,3366CC,3333CC,3300CC,00FFCC,00CCCC,0099CC,0066CC,0033CC,0000CC,66FF99,66CC99,669999,666699,663399,660099,33FF99,33CC99,339999,336699,333399,330099,00FF99,00CC99,009999,006699,003399,000099,66FF66,66CC66,669966,666666,663366,660066,33FF66,33CC66,339966,336666,333366,330066,00FF66,00CC66,009966,006666,003366,000066,66FF33,66CC33,669933,666633,663333,660033,33FF33,33CC33,339933,336633,333333,330033,00FF33,00CC33,009933,006633,003333,000033,66FF00,66CC00,669900,666600,663300,660000,33FF00,33CC00,339900,336600,333300,330000,00FF00,00CC00,009900,006600,003300,000000",y="#ffffff",A={apply:"Apply",cancel:"Cancel",noColor:"no color",clearColor:"Clear color"},u=".kendoColorTools",f="click"+u,q="keydown"+u,z=p.support.browser,n=z.msie&&z.version<9;var s=e.extend({init:function(E,D){var F=this,G;e.fn.init.call(F,E,D);E=F.element;D=F.options;F._value=D.value=v(D.value);F._tabIndex=E.attr("tabIndex")||0;G=F._ariaId=D.ariaId;if(G){E.attr("aria-labelledby",G)}if(D._standalone){F._triggerSelect=F._triggerChange}},options:{name:"ColorSelector",value:null,_standalone:true},events:["change","select","cancel"],color:function(D){if(D!==h){this._value=v(D);this._updateUI(this._value)}return this._value},value:function(D){D=this.color(D);if(D){if(this.options.opacity){D=D.toCssRgba()}else{D=D.toCss()}}return D||null},enable:function(D){if(arguments.length===0){D=true}g(".k-disabled-overlay",this.wrapper).remove();if(!D){this.wrapper.append("<div class='k-disabled-overlay'></div>")}this._onEnable(D)},_select:function(D,E){var F=this._value;D=this.color(D);if(!E){this.element.trigger("change");if(!D.equals(F)){this.trigger("change",{value:this.value()})}else{if(!this._standalone){this.trigger("cancel")}}}},_triggerSelect:function(D){c(this,"select",D)},_triggerChange:function(D){c(this,"change",D)},destroy:function(){if(this.element){this.element.off(u)}if(this.wrapper){this.wrapper.off(u).find("*").off(u)}this.wrapper=null;e.fn.destroy.call(this)},_updateUI:g.noop,_selectOnHide:function(){return null},_cancel:function(){this.trigger("cancel")}});function c(E,F,D){D=v(D);if(D&&!D.equals(E.color())){if(F=="change"){E._value=D}if(D.a!=1){D=D.toCssRgba()}else{D=D.toCss()}E.trigger(F,{value:D})}}var j=s.extend({init:function(G,F){var I=this;s.fn.init.call(I,G,F);G=I.wrapper=I.element;F=I.options;var E=F.palette;if(E=="websafe"){E=r;F.columns=18}else{if(E=="basic"){E=d}}if(typeof E=="string"){E=E.split(",")}if(g.isArray(E)){E=g.map(E,function(K){return v(K)})}I._selectedID=(F.ariaId||p.guid())+"_selected";G.addClass("k-widget k-colorpalette").attr("role","grid").attr("aria-readonly","true").append(g(I._template({colors:E,columns:F.columns,tileSize:F.tileSize,value:I._value,id:F.ariaId}))).on(f,".k-item",function(K){I._select(g(K.currentTarget).css(t))}).attr("tabIndex",I._tabIndex).on(q,C(I._keydown,I));var J=F.tileSize,H,D;if(J){if(/number|string/.test(typeof J)){H=D=parseFloat(J)}else{if(typeof J=="object"){H=parseFloat(J.width);D=parseFloat(J.height)}else{throw new Error("Unsupported value for the 'tileSize' argument")}}G.find(".k-item").css({width:H,height:D})}},focus:function(){this.wrapper.focus()},options:{name:"ColorPalette",columns:10,tileSize:null,palette:"basic"},_onEnable:function(D){if(D){this.wrapper.attr("tabIndex",this._tabIndex)}else{this.wrapper.removeAttr("tabIndex")}},_keydown:function(J){var G,K=this.wrapper,E=K.find(".k-item"),I=E.filter("."+i).get(0),H=J.keyCode;if(H==w.LEFT){G=x(E,I,-1)}else{if(H==w.RIGHT){G=x(E,I,1)}else{if(H==w.DOWN){G=x(E,I,this.options.columns)}else{if(H==w.UP){G=x(E,I,-this.options.columns)}else{if(H==w.ENTER){k(J);if(I){this._select(g(I).css(t))}}else{if(H==w.ESC){this._cancel()}}}}}}if(G){k(J);this._current(G);try{var D=v(G.css(t));this._triggerSelect(D)}catch(F){}}},_current:function(D){this.wrapper.find("."+i).removeClass(i).attr("aria-selected",false).removeAttr("id");g(D).addClass(i).attr("aria-selected",true).attr("id",this._selectedID);this.element.removeAttr("aria-activedescendant").attr("aria-activedescendant",this._selectedID)},_updateUI:function(D){var E=null;this.wrapper.find(".k-item").each(function(){var F=v(g(this).css(t));if(F&&F.equals(D)){E=this;return false}});this._current(E)},_template:p.template('<table class="k-palette k-reset" role="presentation"><tr role="row"># for (var i = 0; i < colors.length; ++i) { ## var selected = colors[i].equals(value); ## if (i && i % columns == 0) { # </tr><tr role="row"> # } #<td role="gridcell" unselectable="on" style="background-color:#= colors[i].toCss() #"#= selected ? " aria-selected=true" : "" # #=(id && i === 0) ? "id=\\""+id+"\\" " : "" # class="k-item#= selected ? " '+i+'" : "" #" aria-label="#= colors[i].toCss() #"></td># } #</tr></table>')});var l=s.extend({init:function(E,D){var F=this;s.fn.init.call(F,E,D);D=F.options;E=F.element;F.wrapper=E.addClass("k-widget k-flatcolorpicker").append(F._template(D));F._hueElements=g(".k-hsv-rectangle, .k-transparency-slider .k-slider-track",E);F._selectedColor=g(".k-selected-color-display",E);F._colorAsText=g("input.k-color-value",E);F._sliders();F._hsvArea();F._updateUI(F._value||v("#f00"));E.find("input.k-color-value").on(q,function(J){var H=this;if(J.keyCode==w.ENTER){try{var G=v(H.value);var K=F.color();F._select(G,G.equals(K))}catch(I){g(H).addClass("k-state-error")}}else{if(F.options.autoupdate){setTimeout(function(){var L=v(H.value,true);if(L){F._updateUI(L,true)}},10)}}}).end().on(f,".k-controls button.apply",function(){if(F.options._clearedColor){F.trigger("change")}else{F._select(F._getHSV())}}).on(f,".k-controls button.cancel",function(){F._updateUI(F.color());F._cancel()});if(n){F._applyIEFilter()}},destroy:function(){this._hueSlider.destroy();if(this._opacitySlider){this._opacitySlider.destroy()}this._hueSlider=this._opacitySlider=this._hsvRect=this._hsvHandle=this._hueElements=this._selectedColor=this._colorAsText=null;s.fn.destroy.call(this)},options:{name:"FlatColorPicker",opacity:false,buttons:false,input:true,preview:true,clearButton:false,autoupdate:true,messages:A},_applyIEFilter:function(){var D=this.element.find(".k-hue-slider .k-slider-track")[0],E=D.currentStyle.backgroundImage;E=E.replace(/^url\([\'\"]?|[\'\"]?\)$/g,"");D.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+E+"', sizingMethod='scale')"},_sliders:function(){var F=this,E=F.element;function D(H){F._updateUI(F._getHSV(H.value,null,null,null))}F._hueSlider=E.find(".k-hue-slider").kendoSlider({min:0,max:360,tickPlacement:"none",showButtons:false,slide:D,change:D}).data("kendoSlider");function G(H){F._updateUI(F._getHSV(null,null,null,H.value/100))}F._opacitySlider=E.find(".k-transparency-slider").kendoSlider({min:0,max:100,tickPlacement:"none",showButtons:false,slide:G,change:G}).data("kendoSlider")},_hsvArea:function(){var G=this,F=G.element,D=F.find(".k-hsv-rectangle"),E=D.find(".k-draghandle").attr("tabIndex",0).on(q,C(G._keydown,G));function H(I,O){var N=this.offset,L=I-N.left,J=O-N.top,M=this.width,K=this.height;L=L<0?0:L>M?M:L;J=J<0?0:J>K?K:J;G._svChange(L/M,1-J/K)}G._hsvEvents=new p.UserEvents(D,{global:true,press:function(I){this.offset=p.getOffset(D);this.width=D.width();this.height=D.height();E.focus();H.call(this,I.x.location,I.y.location)},start:function(){D.addClass("k-dragging");E.focus()},move:function(I){I.preventDefault();H.call(this,I.x.location,I.y.location)},end:function(){D.removeClass("k-dragging")}});G._hsvRect=D;G._hsvHandle=E},_onEnable:function(D){this._hueSlider.enable(D);if(this._opacitySlider){this._opacitySlider.enable(D)}this.wrapper.find("input").attr("disabled",!D);var E=this._hsvRect.find(".k-draghandle");if(D){E.attr("tabIndex",this._tabIndex)}else{E.removeAttr("tabIndex")}},_keydown:function(G){var F=this;function D(J,H){var I=F._getHSV();I[J]+=H*(G.shiftKey?0.01:0.05);if(I[J]<0){I[J]=0}if(I[J]>1){I[J]=1}F._updateUI(I);k(G)}function E(H){var I=F._getHSV();I.h+=H*(G.shiftKey?1:5);if(I.h<0){I.h=0}if(I.h>359){I.h=359}F._updateUI(I);k(G)}switch(G.keyCode){case w.LEFT:if(G.ctrlKey){E(-1)}else{D("s",-1)}break;case w.RIGHT:if(G.ctrlKey){E(1)}else{D("s",1)}break;case w.UP:D(G.ctrlKey&&F._opacitySlider?"a":"v",1);break;case w.DOWN:D(G.ctrlKey&&F._opacitySlider?"a":"v",-1);break;case w.ENTER:F._select(F._getHSV());break;case w.F2:F.wrapper.find("input.k-color-value").focus().select();break;case w.ESC:F._cancel();break}},focus:function(){this._hsvHandle.focus()},_getHSV:function(J,I,G,F){var K=this._hsvRect,H=K.width(),D=K.height(),E=this._hsvHandle.position();if(J==null){J=this._hueSlider.value()}if(I==null){I=E.left/H}if(G==null){G=1-E.top/D}if(F==null){F=this._opacitySlider?this._opacitySlider.value()/100:1}return B.fromHSV(J,I,G,F)},_svChange:function(F,E){var D=this._getHSV(null,F,E,null);this._updateUI(D)},_updateUI:function(D,G){var F=this,E=F._hsvRect;if(!D){return}this._colorAsText.removeClass("k-state-error");F._selectedColor.css(t,D.toDisplay());if(!G){F._colorAsText.val(F._opacitySlider?D.toCssRgba():D.toCss())}F._triggerSelect(D);D=D.toHSV();F._hsvHandle.css({left:D.s*E.width()+"px",top:(1-D.v)*E.height()+"px"});F._hueElements.css(t,B.fromHSV(D.h,1,1,1).toCss());F._hueSlider.value(D.h);if(F._opacitySlider){F._opacitySlider.value(100*D.a)}},_selectOnHide:function(){return this.options.buttons?null:this._getHSV()},_template:p.template('# if (preview) { #<div class="k-selected-color"><div class="k-selected-color-display"><div class="k-color-input"><input class="k-color-value" # if (clearButton && !_standalone) { #placeholder="#: messages.noColor #" # } ##= !data.input ? \'style="visibility: hidden;"\' : "" #># if (clearButton && !_standalone) { #<span class="k-clear-color k-button-bare" title="#: messages.clearColor #"></span># } #</div></div></div># } ## if (clearButton && !_standalone && !preview) { #<div class="k-clear-color-container"><span class="k-clear-color k-button-bare">#: messages.clearColor #</span></div># } #<div class="k-hsv-rectangle"><div class="k-hsv-gradient"></div><div class="k-draghandle"></div></div><input class="k-hue-slider" /># if (opacity) { #<input class="k-transparency-slider" /># } ## if (buttons) { #<div unselectable="on" class="k-controls"><button class="k-button k-primary apply">#: messages.apply #</button> <button class="k-button cancel">#: messages.cancel #</button></div># } #')});function x(H,D,G){H=Array.prototype.slice.call(H);var F=H.length;var E=H.indexOf(D);if(E<0){return G<0?H[F-1]:H[0]}E+=G;if(E<0){E+=F}else{E%=F}return H[E]}var b=e.extend({init:function(F,E){var H=this;e.fn.init.call(H,F,E);E=H.options;F=H.element;var I=F.attr("value")||F.val();if(I){I=v(I,true)}else{I=v(E.value,true)}H._value=E.value=I;var G=H.wrapper=g(H._template(E));F.hide().after(G);if(F.is("input")){F.appendTo(G);var D=F.closest("label");var K=F.attr("id");if(K){D=D.add('label[for="'+K+'"]')}D.click(function(L){H.open();L.preventDefault()})}H._tabIndex=F.attr("tabIndex")||0;H.enable(!F.attr("disabled"));var J=F.attr("accesskey");if(J){F.attr("accesskey",null);G.attr("accesskey",J)}H.bind("activate",function(L){if(!L.isDefaultPrevented()){H.toggle()}});H._updateUI(I)},destroy:function(){this.wrapper.off(u).find("*").off(u);if(this._popup){this._selector.destroy();this._popup.destroy()}this._selector=this._popup=this.wrapper=null;e.fn.destroy.call(this)},enable:function(D){var F=this,H=F.wrapper,E=H.children(".k-picker-wrap"),G=E.find(".k-select");if(arguments.length===0){D=true}F.element.attr("disabled",!D);H.attr("aria-disabled",!D);G.off(u).on("mousedown"+u,k);H.addClass("k-state-disabled").removeAttr("tabIndex").add("*",H).off(u);if(D){H.removeClass("k-state-disabled").attr("tabIndex",F._tabIndex).on("mouseenter"+u,function(){E.addClass("k-state-hover")}).on("mouseleave"+u,function(){E.removeClass("k-state-hover")}).on("focus"+u,function(){E.addClass("k-state-focused")}).on("blur"+u,function(){E.removeClass("k-state-focused")}).on(q,C(F._keydown,F)).on(f,".k-select",C(F.toggle,F)).on(f,F.options.toolIcon?".k-tool-icon":".k-selected-color",function(){F.trigger("activate")})}else{F.close()}},_template:p.template('<span role="textbox" aria-haspopup="true" class="k-widget k-colorpicker k-header"><span class="k-picker-wrap k-state-default"># if (toolIcon) { #<span class="k-icon k-tool-icon #= toolIcon #"><span class="k-selected-color"></span></span># } else { #<span class="k-selected-color"><span class="k-icon k-i-line" style="display: none;"></span></span># } #<span class="k-select" unselectable="on" aria-label="select"><span class="k-icon k-i-arrow-60-down"></span></span></span></span>'),options:{name:"ColorPicker",palette:null,columns:10,toolIcon:null,value:null,messages:A,opacity:false,buttons:true,preview:true,clearButton:false,ARIATemplate:'Current selected color is #=data || ""#'},events:["activate","change","select","open","close"],open:function(){if(!this.element.prop("disabled")){this._getPopup().open()}},close:function(){var D=this._selector&&this._selector.options||{};D._closing=true;this._getPopup().close();delete D._closing},toggle:function(){if(!this.element.prop("disabled")){this._getPopup().toggle()}},_noColorIcon:function(){return this.wrapper.find(".k-picker-wrap > .k-selected-color > .k-icon.k-i-line")},color:s.fn.color,value:s.fn.value,_select:s.fn._select,_triggerSelect:s.fn._triggerSelect,_isInputTypeColor:function(){var D=this.element[0];return/^input$/i.test(D.tagName)&&/^color$/i.test(D.type)},_updateUI:function(E){var D="";if(E){if(this._isInputTypeColor()||E.a==1){D=E.toCss()}else{D=E.toCssRgba()}this.element.val(D)}if(!this._ariaTemplate){this._ariaTemplate=p.template(this.options.ARIATemplate)}this.wrapper.attr("aria-label",this._ariaTemplate(D));this._triggerSelect(E);this.wrapper.find(".k-selected-color").css(t,E?E.toDisplay():y);this._noColorIcon()[D?"hide":"show"]()},_keydown:function(E){var D=E.keyCode;if(this._getPopup().visible()){if(D==w.ESC){this._selector._cancel()}else{this._selector._keydown(E)}k(E)}else{if(D==w.ENTER||D==w.DOWN){this.open();k(E)}}},_getPopup:function(){var H=this,E=H._popup;if(!E){var G=H.options;var F;if(G.palette){F=j}else{F=l}G._standalone=false;delete G.select;delete G.change;delete G.cancel;var I=p.guid();var D=H._selector=new F(g('<div id="'+I+'"/>').appendTo(document.body),G);H.wrapper.attr("aria-owns",I);H._popup=E=D.wrapper.kendoPopup({anchor:H.wrapper,adjustSize:{width:5,height:0}}).data("kendoPopup");D.element.find(".k-clear-color").kendoButton({icon:"reset-color",click:function(J){D.options._clearedColor=true;H.value(null);H._updateUI(null);D._colorAsText.val("");D._hsvHandle.css({top:"0px",left:"0px"});D._selectedColor.css(t,y);J.preventDefault()}});D.bind({select:function(J){H._updateUI(v(J.value));delete D.options._clearedColor},change:function(){if(!D.options._clearedColor){H._select(D.color())}H.close()},cancel:function(){if(D.options._clearedColor&&!H.value()&&D.value()){H._select(D.color(),true)}H.close()}});E.bind({close:function(M){if(H.trigger("close")){M.preventDefault();return}H.wrapper.children(".k-picker-wrap").removeClass("k-state-focused");var K=D._selectOnHide();var J=D.value();var N=H.value();var L=D.options;if(!K){setTimeout(function(){if(H.wrapper){H.wrapper.focus()}});if(!L._closing&&L._clearedColor&&!N&&J){H._select(J,true)}else{H._updateUI(H.color())}}else{if(!(L._clearedColor&&!N)){H._select(K)}}},open:function(J){if(H.trigger("open")){J.preventDefault()}else{H.wrapper.children(".k-picker-wrap").addClass("k-state-focused")}},activate:function(){D._select(H.color(),true);D.focus();H.wrapper.children(".k-picker-wrap").addClass("k-state-focused")}})}return E}});function k(D){D.preventDefault()}function C(E,D){return function(){return E.apply(D,arguments)}}o.plugin(j);o.plugin(l);o.plugin(b)}(jQuery,parseInt));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.numerictextbox",["kendo.core","kendo.userevents"],a)}(function(){var a={id:"numerictextbox",name:"NumericTextBox",category:"web",description:"The NumericTextBox widget can format and display numeric, percentage or currency textbox.",depends:["core","userevents"]};(function(z,n){var A=window.kendo,r=A.caret,u=A.keys,D=A.ui,b=D.Widget,h=A._activeElement,k=A._extractFormat,s=A.parseFloat,K=A.support.placeholder,p=A.getCulture,y="change",x="disabled",i="readonly",f="k-input",g="spin",I=".kendoNumericTextBox",C="touchend",q="mouseleave"+I,e="mouseenter"+I+" "+q,F="k-state-default",B="k-state-focused",t="k-state-hover",J="focus",E=".",v="k-state-selected",o="k-state-disabled",l="aria-disabled",d=/^(-)?(\d*)$/,w=null,G=z.proxy,m=z.extend;var H=b.extend({init:function(O,T){var P=this,R=T&&T.step!==n,N,Q,L,S,M;b.fn.init.call(P,O,T);T=P.options;O=P.element.on("focusout"+I,G(P._focusout,P)).attr("role","spinbutton");T.placeholder=T.placeholder||O.attr("placeholder");P._initialOptions=m({},T);N=P.min(O.attr("min"));Q=P.max(O.attr("max"));L=P._parse(O.attr("step"));if(T.min===w&&N!==w){T.min=N}if(T.max===w&&Q!==w){T.max=Q}if(!R&&L!==w){T.step=L}P._reset();P._wrapper();P._arrows();P._input();if(!A.support.mobileOS){P._text.on(J+I,G(P._click,P))}else{P._text.on(C+I+" "+J+I,function(){if(A.support.browser.edge){P._text.one(J+I,function(){P._toggleText(false);O.focus()})}else{P._toggleText(false);O.focus()}})}O.attr("aria-valuemin",T.min!==w?T.min*T.factor:T.min).attr("aria-valuemax",T.max!==w?T.max*T.factor:T.max);T.format=k(T.format);S=T.value;P.value(S!==w?S:O.val());M=O.is("[disabled]")||z(P.element).parents("fieldset").is(":disabled");if(M){P.enable(false)}else{P.readonly(O.is("[readonly]"))}A.notify(P)},options:{name:"NumericTextBox",decimals:w,restrictDecimals:false,min:w,max:w,value:w,step:1,round:true,culture:"",format:"n",spinners:true,placeholder:"",factor:1,upArrowText:"Increase value",downArrowText:"Decrease value"},events:[y,g],_editable:function(N){var P=this,O=P.element,M=N.disable,L=N.readonly,Q=P._text.add(O),R=P._inputWrapper.off(e);P._toggleText(true);P._upArrowEventHandler.unbind("press");P._downArrowEventHandler.unbind("press");O.off("keydown"+I).off("keypress"+I).off("paste"+I);if(!L&&!M){R.addClass(F).removeClass(o).on(e,P._toggleHover);Q.removeAttr(x).removeAttr(i).attr(l,false);P._upArrowEventHandler.bind("press",function(S){S.preventDefault();P._spin(1);P._upArrow.addClass(v)});P._downArrowEventHandler.bind("press",function(S){S.preventDefault();P._spin(-1);P._downArrow.addClass(v)});P.element.on("keydown"+I,G(P._keydown,P)).on("keypress"+I,G(P._keypress,P)).on("paste"+I,G(P._paste,P))}else{R.addClass(M?o:F).removeClass(M?F:o);Q.attr(x,M).attr(i,L).attr(l,M)}},readonly:function(L){this._editable({readonly:L===n?true:L,disable:false})},enable:function(L){this._editable({readonly:false,disable:!(L=L===n?true:L)})},destroy:function(){var L=this;L.element.add(L._text).add(L._upArrow).add(L._downArrow).add(L._inputWrapper).off(I);L._upArrowEventHandler.destroy();L._downArrowEventHandler.destroy();if(L._form){L._form.off("reset",L._resetHandler)}b.fn.destroy.call(L)},min:function(L){return this._option("min",L)},max:function(L){return this._option("max",L)},step:function(L){return this._option("step",L)},value:function(N){var M=this,L;if(N===n){return M._value}N=M._parse(N);L=M._adjust(N);if(N!==L){return}M._update(N);M._old=M._value},focus:function(){this._focusin()},_adjust:function(P){var O=this,M=O.options,N=M.min,L=M.max;if(P===w){return P}if(N!==w&&P<N){P=N}else{if(L!==w&&P>L){P=L}}return P},_arrows:function(){var P=this,M,Q=function(){clearTimeout(P._spinning);M.removeClass(v)},N=P.options,L=N.spinners,O=P.element;M=O.siblings(".k-icon");if(!M[0]){M=z(j("increase",N.upArrowText)+j("decrease",N.downArrowText)).insertAfter(O);M.wrapAll('<span class="k-select"/>')}if(!L){M.parent().toggle(L);P._inputWrapper.addClass("k-expand-padding")}P._upArrow=M.eq(0);P._upArrowEventHandler=new A.UserEvents(P._upArrow,{release:Q});P._downArrow=M.eq(1);P._downArrowEventHandler=new A.UserEvents(P._downArrow,{release:Q})},_blur:function(){var M=this,L=M.options.factor,N=M.element.val();M._toggleText(true);if(L&&L!==1){N=parseFloat(N);if(N!==null){N=N/L}}M._change(N)},_click:function(M){var L=this;clearTimeout(L._focusing);L._focusing=setTimeout(function(){var Q=M.target,T=r(Q)[0],S=Q.value.substring(0,T),R=L._format(L.options.format),U=R[","],V,O,N,P=0;if(U){O=new RegExp("\\"+U,"g");N=new RegExp("([\\d\\"+U+"]+)(\\"+R[E]+")?(\\d+)?")}if(N){V=N.exec(S)}if(V){P=V[0].replace(O,"").length;if(S.indexOf("(")!=-1&&L._value<0){P++}}L._focusin();r(L.element[0],P)})},_change:function(M){var L=this;L._update(M);M=L._value;if(L._old!=M){L._old=M;if(!L._typing){L.element.trigger(y)}L.trigger(y)}L._typing=false},_culture:function(L){return L||p(this.options.culture)},_focusin:function(){var L=this;L._inputWrapper.addClass(B);L._toggleText(false);L.element[0].focus()},_focusout:function(){var L=this;clearTimeout(L._focusing);L._inputWrapper.removeClass(B).removeClass(t);L._blur()},_format:function(N,M){var L=this._culture(M).numberFormat;N=N.toLowerCase();if(N.indexOf("c")>-1){L=L.currency}else{if(N.indexOf("p")>-1){L=L.percent}}return L},_input:function(){var P=this,L=P.options,O="k-formatted-value",M=P.element.addClass(f).show()[0],N=M.accessKey,S=P.wrapper,R;R=S.find(E+O);if(!R[0]){R=z('<input type="text"/>').insertBefore(M).addClass(O)}try{M.setAttribute("type","text")}catch(Q){M.type="text"}P._initialTitle=M.title;R[0].title=M.title;R[0].tabIndex=M.tabIndex;R[0].style.cssText=M.style.cssText;R.prop("placeholder",L.placeholder);if(N){R.attr("accesskey",N);M.accessKey=""}P._text=R.addClass(M.className).attr({role:"spinbutton","aria-valuemin":L.min!==w?L.min*L.factor:L.min,"aria-valuemax":L.max!==w?L.max*L.factor:L.max})},_keydown:function(N){var M=this,L=N.keyCode;M._key=L;if(L==u.DOWN){M._step(-1)}else{if(L==u.UP){M._step(1)}else{if(L==u.ENTER){M._change(M.element.val())}else{M._typing=true}}}},_keypress:function(P){if(P.which===0||P.metaKey||P.ctrlKey||P.keyCode===u.BACKSPACE||P.keyCode===u.ENTER){return}var O=this;var L=O.options.min;var M=O.element;var T=r(M);var S=T[0];var U=T[1];var N=String.fromCharCode(P.which);var Q=O._format(O.options.format);var W=O._key===u.NUMPAD_DOT;var R=M.val();var V;if(W){N=Q[E]}R=R.substring(0,S)+N+R.substring(U);V=O._numericRegex(Q).test(R);if(V&&W){M.val(R);r(M,S+N.length);P.preventDefault()}else{if(L!==null&&L>=0&&R.charAt(0)==="-"||!V){P.preventDefault()}}O._key=0},_numericRegex:function(L){var O=this;var P=L[E];var M=O.options.decimals;var N="*";if(P===E){P="\\"+P}if(M===w){M=L.decimals}if(M===0){return d}if(O.options.restrictDecimals){N="{0,"+M+"}"}if(O._separator!==P){O._separator=P;O._floatRegExp=new RegExp("^(-)?(((\\d+("+P+"\\d"+N+")?)|("+P+"\\d"+N+")))?$")}return O._floatRegExp},_paste:function(P){var N=this;var M=P.target;var O=M.value;var L=N._format(N.options.format);setTimeout(function(){var Q=N._parse(M.value);var R=N._numericRegex(L).test(M.value);if(Q===w||N._adjust(Q)!==Q||!R){N._update(O)}})},_option:function(N,P){var O=this,M=O.element,L=O.options;if(P===n){return L[N]}P=O._parse(P);if(!P&&N==="step"){return}L[N]=P;M.add(O._text).attr("aria-value"+N,P);M.attr(N,P)},_spin:function(M,N){var L=this;N=N||500;clearTimeout(L._spinning);L._spinning=setTimeout(function(){L._spin(M,50)},N);L._step(M)},_step:function(N){var M=this,L=M.element,O=M._parse(L.val())||0;if(h()!=L[0]){M._focusin()}if(M.options.factor&&O){O=O/M.options.factor}O+=M.options.step*N;M._update(M._adjust(O));M._typing=false;M.trigger(g)},_toggleHover:function(L){z(L.currentTarget).toggleClass(t,L.type==="mouseenter")},_toggleText:function(L){var M=this;M._text.toggle(L);M.element.toggle(!L)},_parse:function(M,L){return s(M,this._culture(L),this.options.format)},_round:function(M,L){var N=this.options.round?A._round:c;return N(M,L)},_update:function(S){var N=this,T=N.options,P=T.factor,R=T.format,L=T.decimals,M=N._culture(),O=N._format(R,M),Q;if(L===w){L=O.decimals}S=N._parse(S,M);Q=S!==w;if(Q){S=parseFloat(N._round(S,L),10)}N._value=S=N._adjust(S);N._placeholder(A.toString(S,R,M));if(Q){if(P){S=parseFloat(N._round(S*P,L),10)}S=S.toString();if(S.indexOf("e")!==-1){S=N._round(+S,L)}S=S.replace(E,O[E])}else{S=null}N.element.val(S);N.element.add(N._text).attr("aria-valuenow",S)},_placeholder:function(M){var L=this._text;L.val(M);if(!K&&!M){L.val(this.options.placeholder)}L.attr("title",this._initialTitle||L.val())},_wrapper:function(){var N=this,L=N.element,M=L[0],O;O=L.parents(".k-numerictextbox");if(!O.is("span.k-numerictextbox")){O=L.hide().wrap('<span class="k-numeric-wrap k-state-default" />').parent();O=O.wrap("<span/>").parent()}O[0].style.cssText=M.style.cssText;M.style.width="";N.wrapper=O.addClass("k-widget k-numerictextbox").addClass(M.className).css("display","");N._inputWrapper=z(O[0].firstChild)},_reset:function(){var N=this,L=N.element,O=L.attr("form"),M=O?z("#"+O):L.closest("form");if(M[0]){N._resetHandler=function(){setTimeout(function(){N.value(L[0].value);N.max(N._initialOptions.max);N.min(N._initialOptions.min)})};N._form=M.on("reset",N._resetHandler)}}});function j(M,N){var L="k-i-arrow-"+(M==="increase"?"60-up":"60-down");return'<span unselectable="on" class="k-link k-link-'+M+'" aria-label="'+N+'" title="'+N+'"><span unselectable="on" class="k-icon '+L+'"></span></span>'}function c(M,L){var N=parseFloat(M,10).toString().split(E);if(N[1]){N[1]=N[1].substring(0,L)}return N.join(E)}D.plugin(H)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.filtermenu",["kendo.datepicker","kendo.numerictextbox","kendo.dropdownlist","kendo.binder"],a)}(function(){var a={id:"filtermenu",name:"Filtering Menu",category:"framework",depends:["datepicker","numerictextbox","dropdownlist","binder"],advanced:true};(function(j,m){var w=window.kendo,v=w.ui,z=j.proxy,x="kendoPopup",d="init",C="refresh",p="change",B=".kendoFilterMenu",A="Is equal to",E="Is not equal to",t={number:"numerictextbox",date:"datepicker"},e={string:"text",number:"number",date:"date"},b=w.isFunction,f=v.Widget;var y='<div><div class="k-filter-help-text">#=messages.info#</div><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label><div><button type="submit" class="k-button k-primary">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>';var h='<div><div class="k-filter-help-text">#=messages.info#</div><select title="#=messages.operator#" data-#=ns#bind="value: filters[0].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select title="#=messages.value#" data-#=ns#bind="value:filters[0].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#" data-#=ns#value-primitive="true"></select>#}else{#<input title="#=messages.value#" data-#=ns#bind="value:filters[0].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}##if(extra){#<select title="#=messages.logic#" class="k-filter-and" data-#=ns#bind="value: logic" data-#=ns#role="dropdownlist"><option value="and">#=messages.and#</option><option value="or">#=messages.or#</option></select><select title="#=messages.additionalOperator#" data-#=ns#bind="value: filters[1].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select title="#=messages.additionalValue#" data-#=ns#bind="value:filters[1].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#" data-#=ns#value-primitive="true"></select>#}else{#<input title="#=messages.additionalValue#" data-#=ns#bind="value: filters[1].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""#/>#}##}#<div><button type="submit" class="k-button k-primary">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>';var s='<div data-#=ns#role="view" data-#=ns#init-widgets="false" data-#=ns#use-native-scrolling="true" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-i-cancel">#=messages.cancel#</button>#=title#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form title="#=messages.info#" class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[0].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[0].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#if(extra){#</ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="and" />#=messages.and#</label></li><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="or" />#=messages.or#</label></li></ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label">#=messages.additionalOperator#<select data-#=ns#bind="value: filters[1].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.additionalValue##if(values){#<select data-#=ns#bind="value:filters[1].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[1].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#}#</ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></div></form></div>';var g='<div data-#=ns#role="view" data-#=ns#init-widgets="false" data-#=ns#use-native-scrolling="true" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-i-cancel">#=messages.cancel#</button>#=title#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form title="#=messages.info#" class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label></li><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label></li></ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></form></div>';function G(I,H){if(I.filters){I.filters=j.grep(I.filters,function(J){G(J,H);if(J.filters){return J.filters.length}else{return J.field!=H}})}}function l(J){var I,L,K,M,N,H;if(J&&J.length){H=[];for(I=0,L=J.length;I<L;I++){K=J[I];N=K.text!==""?K.text||K.value||K:K.text;M=K.value==null?K.text||K:K.value;H[I]={text:N,value:M}}}return H}function D(H,I){return j.grep(H,function(J){if(J.filters){J.filters=j.grep(J.filters,function(K){return K.field!=I});return J.filters.length}return J.field!=I})}var r=f.extend({init:function(K,J){var N=this,L="string",H,I,M,O;f.fn.init.call(N,K,J);H=N.operators=J.operators||{};K=N.element;J=N.options;if(!J.appendToElement){M=K.addClass("k-with-icon k-filterable").find(".k-grid-filter");if(!M[0]){M=K.prepend('<a class="k-grid-filter" href="#" title="'+J.messages.filter+'"><span class="k-icon k-i-filter"></span></a>').find(".k-grid-filter")}M.attr("tabindex",-1).on("click"+B,z(N._click,N))}N.link=M||j();N.dataSource=i.create(J.dataSource);N.field=J.field||K.attr(w.attr("field"));N.model=N.dataSource.reader.model;N._parse=function(P){return P!=null?P+"":P};if(N.model&&N.model.fields){O=N.model.fields[N.field];if(O){L=O.type||"string";if(O.parse){N._parse=z(O.parse,O)}}}if(J.values){L="enums"}N.type=L;H=H[L]||J.operators[L];for(I in H){break}N._defaultFilter=function(){return{field:N.field,operator:I||"eq",value:""}};N._refreshHandler=z(N.refresh,N);N.dataSource.bind(p,N._refreshHandler);if(J.appendToElement){N._init()}else{N.refresh()}},_init:function(){var H=this,I=H.options.ui,J=b(I),K;H.pane=H.options.pane;if(H.pane){H._isMobile=true}if(!J){K=I||t[H.type]}if(H._isMobile){H._createMobileForm(K)}else{H._createForm(K)}H.form.on("submit"+B,z(H._submit,H)).on("reset"+B,z(H._reset,H));if(J){H.form.find(".k-textbox").removeClass("k-textbox").each(function(){I(j(this))})}H.form.find("["+w.attr("role")+"=numerictextbox]").removeClass("k-textbox").end().find("["+w.attr("role")+"=datetimepicker]").removeClass("k-textbox").end().find("["+w.attr("role")+"=timepicker]").removeClass("k-textbox").end().find("["+w.attr("role")+"=datepicker]").removeClass("k-textbox");H.refresh();H.trigger(d,{field:H.field,container:H.form});w.cycleForm(H.form)},_createForm:function(L){var K=this,I=K.options,H=K.operators||{},J=K.type;H=H[J]||I.operators[J];K.form=j('<form title="'+K.options.messages.info+'" class="k-filter-menu"/>').html(w.template(J==="boolean"?y:h)({field:K.field,format:I.format,ns:w.ns,messages:I.messages,extra:I.extra,operators:H,type:J,role:L,values:l(I.values)}));if(!I.appendToElement){K.popup=K.form[x]({anchor:K.link,open:z(K._open,K),activate:z(K._activate,K),close:function(){if(K.options.closeCallback){K.options.closeCallback(K.element)}}}).data(x)}else{K.element.append(K.form);K.popup=K.element.closest(".k-popup").data(x)}K.form.on("keydown"+B,z(K._keydown,K))},_createMobileForm:function(L){var K=this,I=K.options,H=K.operators||{},J=K.type;H=H[J]||I.operators[J];K.form=j("<div />").html(w.template(J==="boolean"?g:s)({field:K.field,title:I.title||K.field,format:I.format,ns:w.ns,messages:I.messages,extra:I.extra,operators:H,type:J,role:L,useRole:!w.support.input.date&&J==="date"||J==="number",inputType:e[J],values:l(I.values)}));K.view=K.pane.append(K.form.html());K.form=K.view.element.find("form");K.view.element.on("click",".k-submit",function(M){K.form.submit();M.preventDefault()}).on("click",".k-i-cancel",function(M){K._closeForm();M.preventDefault()})},refresh:function(){var J=this,K=J.dataSource.filter()||{filters:[],logic:"and"};var I=[J._defaultFilter()];var H=J._defaultFilter().operator;if(J.options.extra||H!=="isnull"&&H!=="isnotnull"){I.push(J._defaultFilter())}J.filterModel=w.observable({logic:"and",filters:I});if(J.form){w.bind(J.form.children().first(),J.filterModel)}if(J._bind(K)){J.link.addClass("k-state-active")}else{J.link.removeClass("k-state-active")}},destroy:function(){var H=this;f.fn.destroy.call(H);if(H.form){w.unbind(H.form);w.destroy(H.form);H.form.unbind(B);if(H.popup){H.popup.destroy();H.popup=null}H.form=null}if(H.view){H.view.purge();H.view=null}H.link.unbind(B);if(H._refreshHandler){H.dataSource.unbind(p,H._refreshHandler);H.dataSource=null}H.element=H.link=H._refreshHandler=H.filterModel=null},_bind:function(O){var M=this,I=O.filters,P,J,Q=false,N=0,K=M.filterModel,L,H;for(P=0,J=I.length;P<J;P++){H=I[P];if(H.field==M.field){K.set("logic",O.logic);L=K.filters[N];if(!L){K.filters.push({field:M.field});L=K.filters[N]}L.set("value",M._parse(H.value));L.set("operator",H.operator);N++;Q=true}else{if(H.filters){Q=Q||M._bind(H)}}}return Q},_stripFilters:function(H){return j.grep(H,function(I){return I.value!==""&&I.value!=null||(I.operator==="isnull"||I.operator==="isnotnull"||I.operator==="isempty"||I.operator==="isnotempty")})},_merge:function(O){var N=this,J=O.logic||"and",M=this._stripFilters(O.filters),K,I=N.dataSource.filter()||{filters:[],logic:"and"},H,L;G(I,N.field);for(H=0,L=M.length;H<L;H++){K=M[H];K.value=N._parse(K.value)}if(M.length){if(I.filters.length){O.filters=M;if(I.logic!=="and"){I.filters=[{logic:I.logic,filters:I.filters}];I.logic="and"}if(M.length>1){I.filters.push(O)}else{I.filters.push(M[0])}}else{I.filters=M;I.logic=J}}return I},filter:function(I){var H=this._stripFilters(I.filters);if(H.length&&this.trigger("change",{filter:{logic:I.logic,filters:H},field:this.field})){return}I=this._merge(I);if(I.filters.length){this.dataSource.filter(I)}},clear:function(){var H=this,I=H.dataSource.filter()||{filters:[]};if(this.trigger("change",{filter:null,field:H.field})){return}I.filters=j.grep(I.filters,function(J){if(J.filters){J.filters=D(J.filters,H.field);return J.filters.length}return J.field!=H.field});if(!I.filters.length){I=null}H.dataSource.filter(I)},_submit:function(H){H.preventDefault();H.stopPropagation();this.filter(this.filterModel.toJSON());this._closeForm()},_reset:function(){this.clear();if(this.options.search){this.container.find("label").parent().show()}this._closeForm()},_closeForm:function(){if(this._isMobile){this.pane.navigate("",this.options.animations.right)}else{this.popup.close()}},_click:function(H){H.preventDefault();H.stopPropagation();if(!this.popup&&!this.pane){this._init()}if(this._isMobile){this.pane.navigate(this.view,this.options.animations.left)}else{this.popup.toggle()}},_open:function(){var H;j(".k-filter-menu").not(this.form).each(function(){H=j(this).data(x);if(H){H.close()}})},_activate:function(){this.form.find(":kendoFocusable:first").focus()},_keydown:function(H){if(H.keyCode==w.keys.ESC){this.popup.close()}},events:[d,"change"],options:{name:"FilterMenu",extra:true,appendToElement:false,type:"string",operators:{string:{eq:A,neq:E,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with",isnull:"Is null",isnotnull:"Is not null",isempty:"Is empty",isnotempty:"Is not empty"},number:{eq:A,neq:E,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than",isnull:"Is null",isnotnull:"Is not null"},date:{eq:A,neq:E,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before",isnull:"Is null",isnotnull:"Is not null"},enums:{eq:A,neq:E,isnull:"Is null",isnotnull:"Is not null"}},messages:{info:"Show items with value that:",isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",and:"And",or:"Or",selectValue:"-Select value-",operator:"Operator",value:"Value",additionalValue:"Additional value",additionalOperator:"Additional operator",logic:"Filters logic",cancel:"Cancel"},animations:{left:"slide",right:"slide:right"}}});var o=".kendoFilterMultiCheck";function n(I,H){if(I.filters){I.filters=j.grep(I.filters,function(J){n(J,H);if(J.filters){return J.filters.length}else{return J.field==H&&J.operator=="eq"}})}}function k(H){if(H.logic=="and"&&H.filters.length>1){return[]}if(H.filters){return j.map(H.filters,function(I){return k(I)})}else{if(H.value!==null&&H.value!==m){return[H.value]}else{return[]}}}function c(K,N){var I=w.getter(N,true),H=[],L=0,J={};while(L<K.length){var M=K[L++],O=I(M);if(O!==m&&O!==null&&!J.hasOwnProperty(O)){H.push(M);J[O]=true}}return H}function F(H,I){return function(K){var J=H(K);return c(J,I)}}var i=w.data.DataSource;var q='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-i-cancel">#=messages.cancel#</button>#=title#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form class="k-filter-menu k-mobile-list">#if(search){#<div class=\'k-textbox k-space-right\'><input placeholder=\'#=messages.search#\'/><span class=\'k-icon k-i-zoom\' /></div>#}#<ul class="k-multicheck-wrap"></ul></li><li class="k-button-container">#if(messages.selectedItemsFormat){#<div class=\'k-filter-selected-items\'></div>#}#<button type="reset" class="k-button">#=messages.clear#</button></li></ul></form></div>';var u=f.extend({init:function(J,I){f.fn.init.call(this,J,I);I=this.options;this.element=j(J);var K=this.field=this.options.field||this.element.attr(w.attr("field"));var H=I.checkSource;if(this._foreignKeyValues()){this.checkSource=i.create(I.values);this.checkSource.fetch()}else{if(I.forceUnique){H=I.dataSource.options;delete H.pageSize;this.checkSource=i.create(H);this.checkSource.reader.data=F(this.checkSource.reader.data,this.field)}else{this.checkSource=i.create(H)}}this.dataSource=I.dataSource;this.model=this.dataSource.reader.model;this._parse=function(L){return L+""};if(this.model&&this.model.fields){K=this.model.fields[this.field];if(K){if(K.type=="number"){this._parse=parseFloat}else{if(K.parse){this._parse=z(K.parse,K)}}this.type=K.type||"string"}}if(!I.appendToElement){this._createLink()}else{this._init()}this._refreshHandler=z(this.refresh,this);this.dataSource.bind(p,this._refreshHandler)},_createLink:function(){var H=this.element;var I=H.addClass("k-with-icon k-filterable").find(".k-grid-filter");if(!I[0]){I=H.prepend('<a class="k-grid-filter" href="#"><span class="k-icon k-i-filter"/></a>').find(".k-grid-filter")}this._link=I.attr("tabindex",-1).on("click"+B,z(this._click,this))},_init:function(){var J=this;var H=this.options.forceUnique;var I=this.options;this.pane=I.pane;if(this.pane){this._isMobile=true}this._createForm();if(this._foreignKeyValues()){this.refresh()}else{if(H&&!this.checkSource.options.serverPaging&&this.dataSource.data().length){this.checkSource.data(c(this.dataSource.data(),this.field));this.refresh()}else{this._attachProgress();this.checkSource.fetch(function(){J.refresh.call(J)})}}if(!this.options.forceUnique){this.checkChangeHandler=function(){J.container.empty();J.refresh()};this.checkSource.bind(p,this.checkChangeHandler)}this.form.on("keydown"+o,z(this._keydown,this)).on("submit"+o,z(this._filter,this)).on("reset"+o,z(this._reset,this));this.trigger(d,{field:this.field,container:this.form})},_attachProgress:function(){var H=this;this._progressHandler=function(){v.progress(H.container,true)};this._progressHideHandler=function(){v.progress(H.container,false)};this.checkSource.bind("progress",this._progressHandler).bind("change",this._progressHideHandler)},_input:function(){var H=this;H._clearTypingTimeout();H._typingTimeout=setTimeout(function(){H.search()},100)},_clearTypingTimeout:function(){if(this._typingTimeout){clearTimeout(this._typingTimeout);this._typingTimeout=null}},search:function(){var H=this.options.ignoreCase;var J=this.searchTextBox[0].value;var M=this.container.find("label");if(H){J=J.toLowerCase()}var K=0;if(this.options.checkAll&&M.length){M[0].parentNode.style.display=J?"none":"";K++}while(K<M.length){var I=M[K];var L=I.textContent||I.innerText;if(H){L=L.toLowerCase()}I.parentNode.style.display=L.indexOf(J)>=0?"":"none";K++}},_activate:function(){this.form.find(":kendoFocusable:first").focus()},_createForm:function(){var H=this.options;var J="";if(!this._isMobile){if(H.search){J+="<div class='k-textbox k-space-right'><input placeholder='"+H.messages.search+"'/><span class='k-icon k-i-zoom' /></div>"}J+="<ul class='k-reset k-multicheck-wrap'></ul>";if(H.messages.selectedItemsFormat){J+="<div class='k-filter-selected-items'>"+w.format(H.messages.selectedItemsFormat,0)+"</div>"}J+="<button type='submit' class='k-button k-primary'>"+H.messages.filter+"</button>";J+="<button type='reset' class='k-button'>"+H.messages.clear+"</button>";this.form=j('<form class="k-filter-menu"/>').html(J);this.container=this.form.find(".k-multicheck-wrap")}if(this._isMobile){var K=this;K.form=j("<div />").html(w.template(q)({field:K.field,title:H.title||K.field,ns:w.ns,messages:H.messages,search:H.search}));K.view=K.pane.append(K.form.html());K.form=K.view.element.find("form");var I=this.view.element;this.container=I.find(".k-multicheck-wrap");I.on("click",".k-submit",function(L){K.form.submit();L.preventDefault()}).on("click",".k-i-cancel",function(L){K._closeForm();L.preventDefault()})}else{if(!H.appendToElement){this.popup=this.form.kendoPopup({anchor:this._link,activate:z(this._activate,this)}).data(x)}else{this.popup=this.element.closest(".k-popup").data(x);this.element.append(this.form)}}if(H.search){this.searchTextBox=this.form.find(".k-textbox > input");this.searchTextBox.on("input",z(this._input,this))}},createCheckAllItem:function(){var H=this.options;var I=w.template(H.itemTemplate({field:"all",mobile:this._isMobile}));var J=j(I({all:H.messages.checkAll}));this.container.prepend(J);this.checkBoxAll=J.find(":checkbox").eq(0).addClass("k-check-all");this.checkAllHandler=z(this.checkAll,this);this.checkBoxAll.on(p+o,this.checkAllHandler)},updateCheckAllState:function(){if(this.options.messages.selectedItemsFormat){this.form.find(".k-filter-selected-items").text(w.format(this.options.messages.selectedItemsFormat,this.container.find(":checked:not(.k-check-all)").length))}if(this.checkBoxAll){var H=this.container.find(":checkbox:not(.k-check-all)").length==this.container.find(":checked:not(.k-check-all)").length;this.checkBoxAll.prop("checked",H)}},refresh:function(J){var H=this.options.forceUnique;var K=this.dataSource;var I=this.getFilterArray();if(this._link){this._link.toggleClass("k-state-active",I.length!==0)}if(this.form){if(J&&H&&J.sender===K&&!K.options.serverPaging&&(J.action=="itemchange"||J.action=="add"||J.action=="remove"||K.options.autoSync&&J.action==="sync")&&!this._foreignKeyValues()){this.checkSource.data(c(this.dataSource.data(),this.field));this.container.empty()}if(this.container.is(":empty")){this.createCheckBoxes()}this.checkValues(I);this.trigger(C)}},getFilterArray:function(){var I=j.extend(true,{},{filters:[],logic:"and"},this.dataSource.filter());n(I,this.field);var H=k(I);return H},createCheckBoxes:function(){var H=this.options;var L;var J={field:this.field,format:H.format,mobile:this._isMobile,type:this.type};if(!this.options.forceUnique){L=this.checkSource.view()}else{if(this._foreignKeyValues()){L=this.checkSource.data();J.valueField="value";J.field="text"}else{L=this.checkSource.data()}}var I=w.template(H.itemTemplate(J));var K=w.render(I,L);if(H.checkAll){this.createCheckAllItem()}this.container.on(p+o,":checkbox",z(this.updateCheckAllState,this));this.container.append(K)},checkAll:function(){var H=this.checkBoxAll.is(":checked");this.container.find(":checkbox").prop("checked",H)},checkValues:function(H){var I=this;j(j.grep(this.container.find(":checkbox").prop("checked",false),function(L){var K=false;if(j(L).is(".k-check-all")){return}var M=I._parse(j(L).val());for(var J=0;J<H.length;J++){if(I.type=="date"){K=H[J].getTime()==M.getTime()}else{K=H[J]==M}if(K){return K}}})).prop("checked",true);this.updateCheckAllState()},_filter:function(I){I.preventDefault();I.stopPropagation();var J={logic:"or"};var H=this;J.filters=j.map(this.form.find(":checkbox:checked:not(.k-check-all)"),function(K){return{value:j(K).val(),operator:"eq",field:H.field}});if(J.filters.length&&this.trigger("change",{filter:J,field:H.field})){return}J=this._merge(J);if(J.filters.length){this.dataSource.filter(J)}this._closeForm()},_stripFilters:function(H){return j.grep(H,function(I){return I.value!=null})},_foreignKeyValues:function(){var H=this.options;return H.values&&!H.checkSource},destroy:function(){var H=this;f.fn.destroy.call(H);if(H.form){w.unbind(H.form);w.destroy(H.form);H.form.unbind(o);if(H.popup){H.popup.destroy();H.popup=null}H.form=null;if(H.container){H.container.unbind(o);H.container=null}if(H.checkBoxAll){H.checkBoxAll.unbind(o)}}if(H.view){H.view.purge();H.view=null}if(H._link){H._link.unbind(B)}if(H._refreshHandler){H.dataSource.unbind(p,H._refreshHandler);H.dataSource=null}if(H.checkChangeHandler){H.checkSource.unbind(p,H.checkChangeHandler)}if(H._progressHandler){H.checkSource.unbind("progress",H._progressHandler)}if(H._progressHideHandler){H.checkSource.unbind("change",H._progressHideHandler)}this._clearTypingTimeout();this.searchTextBox=null;H.element=H.checkSource=H.container=H.checkBoxAll=H._link=H._refreshHandler=H.checkAllHandler=null},options:{name:"FilterMultiCheck",itemTemplate:function(J){var M=J.field;var L=J.format;var I=J.valueField;var H=J.mobile;var K="";if(I===m){I=M}if(J.type=="date"){K=":yyyy-MM-ddTHH:mm:sszzz"}return"<li class='k-item'><label class='k-label'><input type='checkbox' class='"+(H?"k-check":"")+"'  value='#:kendo.format('{0"+K+"}',"+I+")#'/>#:kendo.format('"+(L?L:"{0}")+"', "+M+")#</label></li>"},checkAll:true,search:false,ignoreCase:true,appendToElement:false,messages:{checkAll:"Select All",clear:"Clear",filter:"Filter",search:"Search",cancel:"Cancel",selectedItemsFormat:"{0} items selected"},forceUnique:true,animations:{left:"slide",right:"slide:right"}},events:[d,C,"change"]});j.extend(u.fn,{_click:r.fn._click,_keydown:r.fn._keydown,_reset:r.fn._reset,_closeForm:r.fn._closeForm,clear:r.fn.clear,_merge:r.fn._merge});v.plugin(r);v.plugin(u)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.menu",["kendo.popup"],a)}(function(){var a={id:"menu",name:"Menu",category:"web",description:"The Menu widget displays hierarchical data as a multi-level menu.",depends:["popup"]};(function(N,s){var Q=window.kendo,Y=Q.ui,j=Q._activeElement,al=Q.support.touch&&Q.support.mobileOS,X="mousedown",ac="click",p=N.extend,aj=N.proxy,ai=N.each,g=Q.template,I=Q.keys,f=Y.Widget,C=/^(ul|a|div)$/i,S=".kendoMenu",T="img",ah="open",r="k-menu",H="k-link",W="k-last",ao="close",U="timer",w="k-first",n="k-image",D="select",l="zIndex",q="activate",ag="deactivate",G="touchstart"+S+" MSPointerDown"+S+" pointerdown"+S,R=Q.support.pointers,ad=Q.support.msPointers,ar=ad||R,h=R?"pointerover":ad?"MSPointerOver":"mouseenter",v=R?"pointerout":ad?"MSPointerOut":"mouseleave",P=al||ar,aq=N(document.documentElement),V="kendoPopup",t="k-state-default",ap="k-state-hover",m="k-state-focused",k="k-state-disabled",A="k-state-selected",i=".k-menu",ab=".k-menu-group",ak=ab+",.k-animation-container",c=":not(.k-list) > .k-item",z=".k-item.k-state-disabled",o=".k-item:not(.k-state-disabled)",e=".k-item:not(.k-state-disabled) > .k-link",O=":not(.k-item.k-separator)",x=O+":eq(0)",F=O+":last",J="div:not(.k-animation-container,.k-list-container)",aa={"2":1,touch:1},b={content:g("<div #= contentCssAttributes(item) # tabindex='-1'>#= content(item) #</div>"),group:g("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) # role='menu' aria-hidden='true'>#= renderItems(data) #</ul>"),itemWrapper:g("<#= tag(item) # class='#= textClass(item) #'#= textAttributes(item) #>#= image(data) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:g("<li class='#= wrapperCssClass(group, item) #' #= itemCssAttributes(item) # role='menuitem'  #=item.items ? \"aria-haspopup='true'\": \"\"##=item.enabled === false ? \"aria-disabled='true'\" : ''#>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),image:g("<img #= imageCssAttributes(item) # alt='' src='#= item.imageUrl #' />"),arrow:g("<span class='#= arrowClass(item, group) #'></span>"),sprite:g("<span class='k-sprite #= spriteCssClass #'></span>"),empty:g("")},y={wrapperCssClass:function(aw,av){var at="k-item",au=av.index;if(av.enabled===false){at+=" k-state-disabled"}else{at+=" k-state-default"}if(aw.firstLevel&&au===0){at+=" k-first"}if(au==aw.length-1){at+=" k-last"}if(av.cssClass){at+=" "+av.cssClass}if(av.attr&&av.attr.hasOwnProperty("class")){at+=" "+av.attr["class"]}if(av.selected){at+=" "+A}return at},itemCssAttributes:function(aw){var au="";var av=aw.attr||{};for(var at in av){if(av.hasOwnProperty(at)&&at!=="class"){au+=at+'="'+av[at]+'" '}}return au},imageCssAttributes:function(aw){var au="";var av=aw.imageAttr||{};if(!av["class"]){av["class"]=n}else{av["class"]+=" "+n}for(var at in av){if(av.hasOwnProperty(at)){au+=at+'="'+av[at]+'" '}}return au},contentCssAttributes:function(ax){var au="";var aw=ax.contentAttr||{};var av="k-content k-group k-menu-group";if(!aw["class"]){aw["class"]=av}else{aw["class"]+=" "+av}for(var at in aw){if(aw.hasOwnProperty(at)){au+=at+'="'+aw[at]+'" '}}return au},textClass:function(){return H},textAttributes:function(at){return at.url?" href='"+at.url+"'":""},arrowClass:function(au,av){var at="k-icon";if(av.horizontal){at+=" k-i-arrow-60-down"}else{at+=" k-i-arrow-60-right"}return at},text:function(at){return at.encoded===false?at.text:Q.htmlEncode(at.text)},tag:function(at){return at.url?"a":"span"},groupAttributes:function(at){return at.expanded!==true?" style='display:none'":""},groupCssClass:function(){return"k-group k-menu-group"},content:function(at){return at.content?at.content:"&nbsp;"}};function M(au,at){au=au.split(" ")[!at+0]||au;return au.replace("top","up").replace("bottom","down")}function an(ax,au,aw){ax=ax.split(" ")[!au+0]||ax;var av={origin:["bottom",aw?"right":"left"],position:["top",aw?"right":"left"]},at=/left|right/.test(ax);if(at){av.origin=["top",ax];av.position[1]=Q.directions[ax].reverse}else{av.origin[0]=ax;av.position[0]=Q.directions[ax].reverse}av.origin=av.origin.join(" ");av.position=av.position.join(" ");return av}function L(at,av){try{return N.contains(at,av)}catch(au){return false}}function d(at){at=N(at);at.addClass("k-item").children(T).addClass(n);at.children("a").addClass(H).children(T).addClass(n);at.filter(":not([disabled])").addClass(t);at.filter(".k-separator").empty().append("&nbsp;");at.filter("li[disabled]").addClass(k).removeAttr("disabled").attr("aria-disabled",true);if(!at.filter("[role]").length){at.attr("role","menuitem")}if(!at.children("."+H).length){at.contents().filter(function(){return !this.nodeName.match(C)&&!(this.nodeType==3&&!N.trim(this.nodeValue))}).wrapAll("<span class='"+H+"'/>")}u(at);B(at)}function u(at){at=N(at);at.find("> .k-link > [class*=k-i-arrow]:not(.k-sprite)").remove();at.filter(":has(.k-menu-group)").children(".k-link:not(:has([class*=k-i-arrow]:not(.k-sprite)))").each(function(){var av=N(this),au=ae(av);av.append("<span class='k-icon "+au+"'/>")})}function ae(aw){var av,au=aw.parent().parent(),at=Q.support.isRtl(au);if(au.hasClass(r+"-horizontal")){av=" k-i-arrow-60-down"}else{if(at){av=" k-i-arrow-60-left"}else{av=" k-i-arrow-60-right"}}return av}function B(at){at=N(at);at.filter(".k-first:not(:first-child)").removeClass(w);at.filter(".k-last:not(:last-child)").removeClass(W);at.filter(":first-child").addClass(w);at.filter(":last-child").addClass(W)}function am(av,at){var au=K(at);if(au){Z(av,au)}if(at.items){N(av).children("ul").children("li").each(function(aw){am(this,at.items[aw])})}}function Z(au,at){N(au).children(".k-link").data({selectHandler:at})}function K(at){var au=at.select,av=Q.isFunction;if(au&&av(au)){return au}return null}var af=f.extend({init:function(au,at){var av=this;f.fn.init.call(av,au,at);au=av.wrapper=av.element;at=av.options;av._initData(at);av._updateClasses();av._animations(at);av.nextItemZIndex=100;av._tabindex();av._focusProxy=aj(av._focusHandler,av);au.on(G,o,av._focusProxy).on(ac+S,z,false).on(ac+S,o,aj(av._click,av)).on("keydown"+S,aj(av._keydown,av)).on("focus"+S,aj(av._focus,av)).on("focus"+S,".k-content",aj(av._focus,av)).on(G+" "+X+S,".k-content",aj(av._preventClose,av)).on("blur"+S,aj(av._removeHoverItem,av)).on("blur"+S,"[tabindex]",aj(av._checkActiveElement,av)).on(h+S,o,aj(av._mouseenter,av)).on(v+S,o,aj(av._mouseleave,av)).on(h+S+" "+v+S+" "+X+S+" "+ac+S,e,aj(av._toggleHover,av));if(at.openOnClick){av.clicked=false;av._documentClickHandler=aj(av._documentClick,av);N(document).click(av._documentClickHandler)}au.attr("role","menubar");if(au[0].id){av._ariaId=Q.format("{0}_mn_active",au[0].id)}Q.notify(av)},events:[ah,ao,q,ag,D],options:{name:"Menu",animation:{open:{duration:200},close:{duration:100}},orientation:"horizontal",direction:"default",openOnClick:false,closeOnClick:true,hoverDelay:100,popupCollision:s},_initData:function(at){var au=this;if(at.dataSource){au.angular("cleanup",function(){return{elements:au.element.children()}});au.element.empty();au.append(at.dataSource,au.element);au.angular("compile",function(){return{elements:au.element.children()}})}},setOptions:function(at){var au=this.options.animation;this._animations(at);at.animation=p(true,au,at.animation);if("dataSource" in at){this._initData(at)}this._updateClasses();f.fn.setOptions.call(this,at)},destroy:function(){var at=this;f.fn.destroy.call(at);at.element.off(S);if(at._documentClickHandler){N(document).unbind("click",at._documentClickHandler)}Q.destroy(at.element)},enable:function(au,at){this._toggleDisabled(au,at!==false);return this},disable:function(at){this._toggleDisabled(at,false);return this},append:function(av,at){at=this.element.find(at);var au=this._insert(av,at,at.length?at.find("> .k-menu-group, > .k-animation-container > .k-menu-group"):null);ai(au.items,function(aw){au.group.append(this);u(this);am(this,av[aw]||av)});u(at);B(au.group.find(".k-first, .k-last").add(au.items));return this},insertBefore:function(av,at){at=this.element.find(at);var au=this._insert(av,at,at.parent());ai(au.items,function(aw){at.before(this);u(this);B(this);am(this,av[aw]||av)});B(at);return this},insertAfter:function(av,at){at=this.element.find(at);var au=this._insert(av,at,at.parent());ai(au.items,function(aw){at.after(this);u(this);B(this);am(this,av[aw]||av)});B(at);return this},_insert:function(aA,au,ay){var az=this,av,at;if(!au||!au.length){ay=az.element}var ax=N.isPlainObject(aA),aw={firstLevel:ay.hasClass(r),horizontal:ay.hasClass(r+"-horizontal"),expanded:true,length:ay.children().length};if(au&&!ay.length){ay=N(af.renderGroup({group:aw})).appendTo(au)}if(ax||N.isArray(aA)){av=N(N.map(ax?[aA]:aA,function(aC,aB){if(typeof aC==="string"){return N(aC).get()}else{return N(af.renderItem({group:aw,item:p(aC,{index:aB})})).get()}}))}else{if(typeof aA=="string"&&aA.charAt(0)!="<"){av=az.element.find(aA)}else{av=N(aA)}at=av.find("> ul").addClass("k-menu-group").attr("role","menu");av=av.filter("li");av.add(at.find("> li")).each(function(){d(this)})}return{items:av,group:ay}},remove:function(au){au=this.element.find(au);var aw=this,av=au.parentsUntil(aw.element,c),ax=au.parent("ul:not(.k-menu)");au.remove();if(ax&&!ax.children(c).length){var at=ax.parent(".k-animation-container");if(at.length){at.remove()}else{ax.remove()}}if(av.length){av=av.eq(0);u(av);B(av)}return aw},open:function(aw){var ax=this,av=ax.options,at=av.orientation=="horizontal",ay=av.direction,au=Q.support.isRtl(ax.wrapper);aw=ax.element.find(aw);if(/^(top|bottom|default)$/.test(ay)){if(au){ay=at?(ay+" left").replace("default","bottom"):"left"}else{ay=at?(ay+" right").replace("default","bottom"):"right"}}aw.siblings().find(">.k-popup:visible,>.k-animation-container>.k-popup:visible").each(function(){var az=N(this).data("kendoPopup");if(az){az.close(true)}});aw.each(function(){var az=N(this);clearTimeout(az.data(U));az.data(U,setTimeout(function(){var aF=az.find(".k-menu-group:first:hidden"),aB;if(aF[0]&&ax._triggerEvent({item:az[0],type:ah})===false){if(!aF.find(".k-menu-group")[0]&&aF.children(".k-item").length>1){var aA=N(window).height(),aE=function(){aF.css({maxHeight:aA-(Q._outerHeight(aF)-aF.height())-Q.getShadows(aF).bottom,overflow:"auto"})};if(Q.support.browser.msie&&Q.support.browser.version<=7){setTimeout(aE,0)}else{aE()}}else{aF.css({maxHeight:"",overflow:""})}az.data(l,az.css(l));az.css(l,ax.nextItemZIndex++);aB=aF.data(V);var aI=az.parent().hasClass(r),aC=aI&&at,aH=an(ay,aI,au),aD=av.animation.open.effects,aG=aD!==s?aD:"slideIn:"+M(ay,aI);if(!aB){aB=aF.kendoPopup({activate:function(){ax._triggerEvent({item:this.wrapper.parent(),type:q})},deactivate:function(aJ){aJ.sender.element.removeData("targetTransform").css({opacity:""});ax._triggerEvent({item:this.wrapper.parent(),type:ag})},origin:aH.origin,position:aH.position,collision:av.popupCollision!==s?av.popupCollision:aC?"fit":"fit flip",anchor:az,appendTo:az,animation:{open:p(true,{effects:aG},av.animation.open),close:av.animation.close},close:function(aK){var aJ=aK.sender.wrapper.parent();if(!ax._triggerEvent({item:aJ[0],type:ao})){aJ.css(l,aJ.data(l));aJ.removeData(l);if(al){aJ.removeClass(ap);ax._removeHoverItem()}}else{aK.preventDefault()}}}).data(V)}else{aB=aF.data(V);aB.options.origin=aH.origin;aB.options.position=aH.position;aB.options.animation.open.effects=aG}aF.removeAttr("aria-hidden");aB.open()}},ax.options.hoverDelay))});return ax},close:function(at,aw){var av=this,au=av.element;at=au.find(at);if(!at.length){at=au.find(">.k-item")}at.each(function(){var ax=N(this);if(!aw&&av._isRootItem(ax)){av.clicked=false}clearTimeout(ax.data(U));ax.data(U,setTimeout(function(){var ay=ax.find(".k-menu-group:not(.k-list-container):not(.k-calendar-container):first:visible").data(V);if(ay){ay.close();ay.element.attr("aria-hidden",true)}},av.options.hoverDelay))});return av},_toggleDisabled:function(at,au){this.element.find(at).each(function(){N(this).toggleClass(t,au).toggleClass(k,!au).attr("aria-disabled",!au)})},_toggleHover:function(av){var au=N(Q.eventTarget(av)||av.target).closest(c),at=av.type==h||X.indexOf(av.type)!==-1;if(!au.parents("li."+k).length){au.toggleClass(ap,at||av.type=="mousedown"||av.type=="click")}this._removeHoverItem()},_preventClose:function(){if(!this.options.closeOnClick){this._closurePrevented=true}},_checkActiveElement:function(aw){var au=this,at=N(aw?aw.currentTarget:this._hoverItem()),av=au._findRootParent(at)[0];if(!this._closurePrevented){setTimeout(function(){if(!document.hasFocus()||!L(av,Q._activeElement())&&aw&&!L(av,aw.currentTarget)){au.close(av)}},0)}this._closurePrevented=false},_removeHoverItem:function(){var at=this._hoverItem();if(at&&at.hasClass(m)){at.removeClass(m);this._oldHoverItem=null}},_updateClasses:function(){var av=this.element,at=".k-menu-init div ul",au;av.removeClass("k-menu-horizontal k-menu-vertical");av.addClass("k-widget k-reset k-header k-menu-init "+r).addClass(r+"-"+this.options.orientation);av.find("li > ul").filter(function(){return !Q.support.matchesSelector.call(this,at)}).addClass("k-group k-menu-group").attr("role","menu").attr("aria-hidden",av.is(":visible")).end().find("li > div").addClass("k-content").attr("tabindex","-1");au=av.find("> li,.k-menu-group > li");av.removeClass("k-menu-init");au.each(function(){d(this)})},_mouseenter:function(aw){var av=this,au=N(aw.currentTarget),at=au.children(".k-animation-container").length||au.children(ab).length;if(aw.delegateTarget!=au.parents(i)[0]){return}if((!av.options.openOnClick||av.clicked)&&!al&&!((R||ad)&&aw.originalEvent.pointerType in aa&&av._isRootItem(au.closest(c)))){if(!L(aw.currentTarget,aw.relatedTarget)&&at){av.open(au)}}if(av.options.openOnClick&&av.clicked||P){au.siblings().each(aj(function(ax,ay){av.close(ay,true)},av))}},_mouseleave:function(aw){var av=this,au=N(aw.currentTarget),at=au.children(".k-animation-container").length||au.children(ab).length;if(au.parentsUntil(".k-animation-container",".k-list-container,.k-calendar-container")[0]){aw.stopImmediatePropagation();return}if(!av.options.openOnClick&&!al&&!((R||ad)&&aw.originalEvent.pointerType in aa)&&!L(aw.currentTarget,aw.relatedTarget||aw.target)&&at&&!L(aw.currentTarget,Q._activeElement())){av.close(au)}},_click:function(aH){var aA=this,aC,aw=aA.options,aM=N(Q.eventTarget(aH)),aE=aM[0],au=aM[0]?aM[0].nodeName.toUpperCase():"",aD=au=="INPUT"||au=="SELECT"||au=="BUTTON"||au=="LABEL",az=aM.closest("."+H),av=aM.closest(c),aI=av[0],aF=az.attr("href"),aG,aJ,ax=aM.attr("href"),aL=N("<a href='#' />").attr("href"),aB=!!aF&&aF!==aL,aK=aB&&!!aF.match(/^#/),ay=!!ax&&ax!==aL,at=aw.openOnClick&&aJ&&aA._isRootItem(av);while(aE&&aE.parentNode!=aI){aE=aE.parentNode}if(N(aE).is(J)){return}if(av.hasClass(k)){aH.preventDefault();return}if(!aH.handled&&aA._triggerSelect(aM,aI)&&!aD){aH.preventDefault()}aH.handled=true;aG=av.children(ak);aJ=aG.is(":visible");if(aw.closeOnClick&&(!aB||aK)&&(!aG.length||at)){av.removeClass(ap).css("height");aA._oldHoverItem=aA._findRootParent(av);aA.close(az.parentsUntil(aA.element,c));aA.clicked=false;if("MSPointerUp".indexOf(aH.type)!=-1){aH.preventDefault()}return}if(aB&&aH.enterKey){az[0].click()}if((!aA._isRootItem(av)||!aw.openOnClick)&&!Q.support.touch&&!((R||ad)&&aA._isRootItem(av.closest(c)))){return}if(!aB&&!aD&&!ay){aH.preventDefault()}aA.clicked=true;aC=aG.is(":visible")?ao:ah;if(!aw.closeOnClick&&aC==ao){return}aA[aC](av)},_triggerSelect:function(ay,ax){var aw=ay.data("selectHandler"),au;if(aw){au=this._getEventData(ay);aw.call(this,au)}var av=au&&au.isDefaultPrevented();var at=this._triggerEvent({item:ax,type:D});return av||at},_getEventData:function(au){var at={sender:this,target:au,_defaultPrevented:false,preventDefault:function(){this._defaultPrevented=true},isDefaultPrevented:function(){return this._defaultPrevented}};return at},_documentClick:function(at){if(L(this.element[0],at.target)){return}this.clicked=false},_focus:function(ax){var au=this,aw=ax.target,at=au._hoverItem(),av=j();if(aw!=au.wrapper[0]&&!N(aw).is(":kendoFocusable")){ax.stopPropagation();N(aw).closest(".k-content").closest(".k-menu-group").closest(".k-item").addClass(m);au.wrapper.focus();return}if(av===ax.currentTarget){if(at.length){au._moveHover([],at)}else{if(!au._oldHoverItem){au._moveHover([],au.wrapper.children().first())}}}},_keydown:function(aA){var ay=this,aw=aA.keyCode,ax=ay._oldHoverItem,az,au,at,av=Q.support.isRtl(ay.wrapper);if(aA.target!=aA.currentTarget&&aw!=I.ESC){return}if(!ax){ax=ay._oldHoverItem=ay._hoverItem()}au=ay._itemBelongsToVertival(ax);at=ay._itemHasChildren(ax);if(aw==I.RIGHT){az=ay[av?"_itemLeft":"_itemRight"](ax,au,at)}else{if(aw==I.LEFT){az=ay[av?"_itemRight":"_itemLeft"](ax,au,at)}else{if(aw==I.DOWN){az=ay._itemDown(ax,au,at)}else{if(aw==I.UP){az=ay._itemUp(ax,au,at)}else{if(aw==I.ESC){az=ay._itemEsc(ax,au)}else{if(aw==I.ENTER||aw==I.SPACEBAR){az=ax.children(".k-link");if(az.length>0){ay._click({target:az[0],preventDefault:function(){},enterKey:true});ay._moveHover(ax,ay._findRootParent(ax))}}else{if(aw==I.TAB){az=ay._findRootParent(ax);ay._moveHover(ax,az);ay._checkActiveElement();return}}}}}}}if(az&&az[0]){aA.preventDefault();aA.stopPropagation()}},_hoverItem:function(){return this.wrapper.find(".k-item.k-state-hover,.k-item.k-state-focused").filter(":visible")},_itemBelongsToVertival:function(au){var at=this.wrapper.hasClass("k-menu-vertical");if(!au.length){return at}return au.parent().hasClass("k-menu-group")||at},_itemHasChildren:function(at){if(!at.length){return false}return at.children("ul.k-menu-group, div.k-animation-container").length>0},_moveHover:function(av,at){var au=this,aw=au._ariaId;if(av.length&&at.length){av.removeClass(m)}if(at.length){if(at[0].id){aw=at[0].id}at.addClass(m);au._oldHoverItem=at;if(aw){au.element.removeAttr("aria-activedescendant");N("#"+aw).removeAttr("id");at.attr("id",aw);au.element.attr("aria-activedescendant",aw)}}},_findRootParent:function(at){if(this._isRootItem(at)){return at}else{return at.parentsUntil(i,"li.k-item").last()}},_isRootItem:function(at){return at.parent().hasClass(r)},_itemRight:function(ay,aw,av){var ax=this,au,at;if(ay.hasClass(k)){return}if(!aw){au=ay.nextAll(x);if(!au.length){au=ay.prevAll(F)}}else{if(av){ax.open(ay);au=ay.find(".k-menu-group").children().first()}else{if(ax.options.orientation=="horizontal"){at=ax._findRootParent(ay);ax.close(at);au=at.nextAll(x)}}}if(au&&!au.length){au=ax.wrapper.children(".k-item").first()}else{if(!au){au=[]}}ax._moveHover(ay,au);return au},_itemLeft:function(aw,au){var av=this,at;if(!au){at=aw.prevAll(x);if(!at.length){at=aw.nextAll(F)}}else{at=aw.parent().closest(".k-item");av.close(at);if(av._isRootItem(at)&&av.options.orientation=="horizontal"){at=at.prevAll(x)}}if(!at.length){at=av.wrapper.children(".k-item").last()}av._moveHover(aw,at);return at},_itemDown:function(ax,av,au){var aw=this,at;if(!av){if(!au||ax.hasClass(k)){return}else{aw.open(ax);at=ax.find(".k-menu-group").children().first()}}else{at=ax.nextAll(x)}if(!at.length&&ax.length){at=ax.parent().children().first()}else{if(!ax.length){at=aw.wrapper.children(".k-item").first()}}aw._moveHover(ax,at);return at},_itemUp:function(aw,au){var av=this,at;if(!au){return}else{at=aw.prevAll(x)}if(!at.length&&aw.length){at=aw.parent().children().last()}else{if(!aw.length){at=av.wrapper.children(".k-item").last()}}av._moveHover(aw,at);return at},_itemEsc:function(aw,au){var av=this,at;if(!au){return aw}else{at=aw.parent().closest(".k-item");av.close(at);av._moveHover(aw,at)}return at},_triggerEvent:function(au){var at=this;return at.trigger(au.type,{type:au.type,item:au.item})},_focusHandler:function(av){var au=this,at=N(Q.eventTarget(av)).closest(c);if(at.hasClass(k)){return}setTimeout(function(){au._moveHover([],at);if(at.children(".k-content")[0]){at.parent().closest(".k-item").removeClass(m)}},200)},_animations:function(at){if(at&&"animation" in at&&!at.animation){at.animation={open:{effects:{}},close:{hide:true,effects:{}}}}}});p(af,{renderItem:function(at){at=p({menu:{},group:{}},at);var av=b.empty,au=at.item;return b.item(p(at,{image:au.imageUrl?b.image:av,sprite:au.spriteCssClass?b.sprite:av,itemWrapper:b.itemWrapper,renderContent:af.renderContent,arrow:au.items||au.content?b.arrow:av,subGroup:af.renderGroup},y))},renderGroup:function(at){return b.group(p({renderItems:function(aw){var ay="",ax=0,av=aw.items,au=av?av.length:0,az=p({length:au},aw.group);for(;ax<au;ax++){ay+=af.renderItem(p(aw,{group:az,item:p({index:ax},av[ax])}))}return ay}},at,y))},renderContent:function(at){return b.content(p(at,y))}});var E=af.extend({init:function(au,at){var av=this;af.fn.init.call(av,au,at);av._marker=Q.guid().substring(0,8);av.target=N(av.options.target);av._popup();av._wire()},options:{name:"ContextMenu",filter:null,showOn:"contextmenu",orientation:"vertical",alignToAnchor:false,target:"body"},events:[ah,ao,q,ag,D],setOptions:function(at){var au=this;af.fn.setOptions.call(au,at);au.target.off(au.showOn+S+au._marker,au._showProxy);if(au.userEvents){au.userEvents.destroy()}au.target=N(au.options.target);if(at.orientation&&au.popup.wrapper[0]){au.popup.element.unwrap()}au._wire();af.fn.setOptions.call(this,at)},destroy:function(){var at=this;at.target.off(at.options.showOn+S+at._marker);aq.off(Q.support.mousedown+S+at._marker,at._closeProxy);if(at.userEvents){at.userEvents.destroy()}af.fn.destroy.call(at)},open:function(at,av){var au=this;at=N(at)[0];if(L(au.element[0],N(at)[0])){af.fn.open.call(au,at)}else{if(au._triggerEvent({item:au.element,type:ah})===false){if(au.popup.visible()&&au.options.filter){au.popup.close(true);au.popup.element.kendoStop(true)}if(av!==s){au.popup.wrapper.hide();au.popup.open(at,av)}else{au.popup.options.anchor=(at?at:au.popup.anchor)||au.target;au.popup.element.kendoStop(true);au.popup.open()}aq.off(au.popup.downEvent,au.popup._mousedownProxy);aq.on(Q.support.mousedown+S+au._marker,au._closeProxy)}}return au},close:function(){var at=this;if(L(at.element[0],N(arguments[0])[0])){af.fn.close.call(at,arguments[0])}else{if(at.popup.visible()){if(at._triggerEvent({item:at.element,type:ao})===false){at.popup.close();aq.off(Q.support.mousedown+S,at._closeProxy);at.unbind(D,at._closeTimeoutProxy)}}}},_showHandler:function(aw){var av=aw,ax,au=this,at=au.options;if(aw.event){av=aw.event;av.pageX=aw.x.location;av.pageY=aw.y.location}if(L(au.element[0],aw.relatedTarget||aw.target)){return}au._eventOrigin=av;av.preventDefault();av.stopImmediatePropagation();au.element.find("."+m).removeClass(m);if(at.filter&&Q.support.matchesSelector.call(av.currentTarget,at.filter)||!at.filter){if(at.alignToAnchor){au.popup.options.anchor=av.currentTarget;au.open(av.currentTarget)}else{au.popup.options.anchor=av.currentTarget;if(au._targetChild){ax=au.target.offset();au.open(av.pageX-ax.left,av.pageY-ax.top)}else{au.open(av.pageX,av.pageY)}}}},_closeHandler:function(ay){var aw=this,ax=N(ay.relatedTarget||ay.target),av=ax.closest(aw.target.selector)[0]==aw.target[0],au=ax.closest(o).children(ak),az=L(aw.element[0],ax[0]);aw._eventOrigin=ay;var at=ay.which!==3;if(aw.popup.visible()&&(at&&av||!av)&&(aw.options.closeOnClick&&!au[0]&&az||!az)){if(az){this.unbind(D,this._closeTimeoutProxy);aw.bind(D,aw._closeTimeoutProxy)}else{aw.close()}}},_wire:function(){var au=this,at=au.options,av=au.target;au._showProxy=aj(au._showHandler,au);au._closeProxy=aj(au._closeHandler,au);au._closeTimeoutProxy=aj(au.close,au);if(av[0]){if(Q.support.mobileOS&&at.showOn=="contextmenu"){au.userEvents=new Q.UserEvents(av,{filter:at.filter,allowSelection:false});av.on(at.showOn+S+au._marker,false);au.userEvents.bind("hold",au._showProxy)}else{if(at.filter){av.on(at.showOn+S+au._marker,at.filter,au._showProxy)}else{av.on(at.showOn+S+au._marker,au._showProxy)}}}},_triggerEvent:function(aw){var av=this,au=N(av.popup.options.anchor)[0],at=av._eventOrigin;av._eventOrigin=s;return av.trigger(aw.type,p({type:aw.type,item:aw.item||this.element[0],target:au},at?{event:at}:{}))},_popup:function(){var at=this;at._triggerProxy=aj(at._triggerEvent,at);at.popup=at.element.addClass("k-context-menu").kendoPopup({anchor:at.target||"body",copyAnchorStyles:at.options.copyAnchorStyles,collision:at.options.popupCollision||"fit",animation:at.options.animation,activate:at._triggerProxy,deactivate:at._triggerProxy,appendTo:at.options.appendTo}).data("kendoPopup");at._targetChild=L(at.target[0],at.popup.element[0])}});Y.plugin(af);Y.plugin(E)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.columnmenu",["kendo.popup","kendo.filtermenu","kendo.menu"],a)}(function(){var a={id:"columnmenu",name:"Column Menu",category:"framework",depends:["popup","filtermenu","menu"],advanced:true};(function(i,j){var r=window.kendo,q=r.ui,v=i.proxy,z=i.extend,n=i.grep,A=i.map,y=i.inArray,l="k-state-selected",x="asc",g="desc",p="change",d="init",f="select",s="kendoPopup",b="kendoFilterMenu",m="kendoMenu",w=".kendoColumnMenu",e=q.Widget;function u(C){return i.trim(C).replace(/&nbsp;/gi,"")}function c(F,G){var E={};var D,C,H;for(D=0,C=F.length;D<C;D++){H=F[D];E[H[G]]=H}return E}function k(E){var D=[];for(var C=0;C<E.length;C++){if(!E[C].columns){D.push(E[C]);continue}D=D.concat(k(E[C].columns))}return D}var h=e.extend({init:function(D,C){var F=this,E;e.fn.init.call(F,D,C);D=F.element;C=F.options;F.owner=C.owner;F.dataSource=C.dataSource;F.field=D.attr(r.attr("field"));F.title=D.attr(r.attr("title"));E=D.find(".k-header-column-menu");if(!E[0]){E=D.addClass("k-with-icon").prepend('<a class="k-header-column-menu" href="#" title="'+C.messages.settings+'"><span class="k-icon k-i-more-vertical"></span></a>').find(".k-header-column-menu")}F.link=E.attr("tabindex",-1).on("click"+w,v(F._click,F));F.wrapper=i('<div class="k-column-menu"/>');F._refreshHandler=v(F.refresh,F);F.dataSource.bind(p,F._refreshHandler)},_init:function(){var C=this;C.pane=C.options.pane;if(C.pane){C._isMobile=true}if(C._isMobile){C._createMobileMenu()}else{C._createMenu()}C.owner._muteAngularRebind(function(){C._angularItems("compile")});C._sort();C._columns();C._filter();C._lockColumns();C.trigger(d,{field:C.field,container:C.wrapper})},events:[d,"sort","filtering"],options:{name:"ColumnMenu",messages:{sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filter:"Filter",columns:"Columns",done:"Done",settings:"Column Settings",lock:"Lock",unlock:"Unlock"},filter:"",columns:true,sortable:true,filterable:true,animations:{left:"slide"}},_createMenu:function(){var D=this,C=D.options;D.wrapper.html(r.template(B)({uid:r.guid(),ns:r.ns,messages:C.messages,sortable:C.sortable,filterable:C.filterable,columns:D._ownerColumns(),showColumns:C.columns,lockedColumns:C.lockedColumns}));D.popup=D.wrapper[s]({anchor:D.link,open:v(D._open,D),activate:v(D._activate,D),close:function(){if(D.options.closeCallback){D.options.closeCallback(D.element)}}}).data(s);D.menu=D.wrapper.children()[m]({orientation:"vertical",closeOnClick:false}).data(m)},_createMobileMenu:function(){var E=this,C=E.options;var D=r.template(t)({ns:r.ns,field:E.field,title:E.title||E.field,messages:C.messages,sortable:C.sortable,filterable:C.filterable,columns:E._ownerColumns(),showColumns:C.columns,lockedColumns:C.lockedColumns});E.view=E.pane.append(D);E.wrapper=E.view.element.find(".k-column-menu");E.menu=new o(E.wrapper.children(),{pane:E.pane});E.view.element.on("click",".k-done",function(F){E.close();F.preventDefault()});if(E.options.lockedColumns){E.view.bind("show",function(){E._updateLockedColumns()})}},_angularItems:function(D){var C=this;C.angular(D,function(){var E=C.wrapper.find(".k-columns-item input["+r.attr("field")+"]").map(function(){return i(this).closest("li")});var F=A(C._ownerColumns(),function(G){return{column:G._originalObject}});return{elements:E,data:F}})},destroy:function(){var C=this;C._angularItems("cleanup");e.fn.destroy.call(C);if(C.filterMenu){C.filterMenu.destroy()}if(C._refreshHandler){C.dataSource.unbind(p,C._refreshHandler)}if(C.options.columns&&C.owner){if(C._updateColumnsMenuHandler){C.owner.unbind("columnShow",C._updateColumnsMenuHandler);C.owner.unbind("columnHide",C._updateColumnsMenuHandler)}if(C._updateColumnsLockedStateHandler){C.owner.unbind("columnLock",C._updateColumnsLockedStateHandler);C.owner.unbind("columnUnlock",C._updateColumnsLockedStateHandler)}}if(C.menu){C.menu.element.off(w);C.menu.destroy()}C.wrapper.off(w);if(C.popup){C.popup.destroy()}if(C.view){C.view.purge()}C.link.off(w);C.owner=null;C.wrapper=null;C.element=null},close:function(){this.menu.close();if(this.popup){this.popup.close();this.popup.element.off("keydown"+w)}},_click:function(D){D.preventDefault();D.stopPropagation();var C=this.options;if(C.filter&&this.element.is(!C.filter)){return}if(!this.popup&&!this.pane){this._init()}if(this._isMobile){this.pane.navigate(this.view,this.options.animations.left)}else{this.popup.toggle()}},_open:function(){var C=this;i(".k-column-menu").not(C.wrapper).each(function(){i(this).data(s).close()});C.popup.element.on("keydown"+w,function(D){if(D.keyCode==r.keys.ESC){C.close()}});if(C.options.lockedColumns){C._updateLockedColumns()}},_activate:function(){this.menu.element.focus()},_ownerColumns:function(){var C=k(this.owner.columns),D=n(C,function(F){var E=true,G=u(F.title||"");if(F.menu===false||!F.field&&!G.length){E=false}return E});return A(D,function(E){return{originalField:E.field,field:E.field||E.title,title:E.title||E.field,hidden:E.hidden,index:y(E,C),locked:!!E.locked,_originalObject:E}})},_sort:function(){var C=this;if(C.options.sortable){C.refresh();C.menu.bind(f,function(F){var E=i(F.item),D;if(E.hasClass("k-sort-asc")){D=x}else{if(E.hasClass("k-sort-desc")){D=g}}if(!D){return}E.parent().find(".k-sort-"+(D==x?g:x)).removeClass(l);C._sortDataSource(E,D);C.close()})}},_sortDataSource:function(L,F){var I=this,H=I.options.sortable,D=H.compare===null?j:H.compare,C=I.dataSource,J,E,G=C.sort()||[];var K=L.hasClass(l)&&H&&H.allowUnsort!==false;F=!K?F:j;if(I.trigger("sort",{sort:{field:I.field,dir:F,compare:D}})){return}if(K){L.removeClass(l)}else{L.addClass(l)}if(H.mode==="multiple"){for(J=0,E=G.length;J<E;J++){if(G[J].field===I.field){G.splice(J,1);break}}G.push({field:I.field,dir:F,compare:D})}else{G=[{field:I.field,dir:F,compare:D}]}C.sort(G)},_columns:function(){var C=this;if(C.options.columns){C._updateColumnsMenu();C._updateColumnsMenuHandler=v(C._updateColumnsMenu,C);C.owner.bind(["columnHide","columnShow"],C._updateColumnsMenuHandler);C._updateColumnsLockedStateHandler=v(C._updateColumnsLockedState,C);C.owner.bind(["columnUnlock","columnLock"],C._updateColumnsLockedStateHandler);C.menu.bind(f,function(I){var G=i(I.item),D,F,E=k(C.owner.columns),H;if(C._isMobile){I.preventDefault()}if(!G.parent().closest("li.k-columns-item")[0]){return}D=G.find(":checkbox");if(D.attr("disabled")){return}H=D.attr(r.attr("field"));F=n(E,function(J){return J.field==H||J.title==H})[0];if(F.hidden===true){C.owner.showColumn(F)}else{C.owner.hideColumn(F)}})}},_updateColumnsMenu:function(){var K,D,I,J,G;var F=r.attr("field"),M=r.attr("locked"),E=n(this._ownerColumns(),function(O){return !O.hidden}),C=n(E,function(O){return O.originalField}),L=n(C,function(O){return O.locked===true}).length,N=n(C,function(O){return O.locked!==true}).length;E=A(E,function(O){return O.field});this.wrapper.find("[role='menuitemcheckbox']").attr("aria-checked",false);var H=this.wrapper.find(".k-columns-item input["+F+"]").prop("disabled",false).prop("checked",false);for(K=0,D=H.length;K<D;K++){I=H.eq(K);G=I.attr(M)==="true";J=false;if(y(I.attr(F),E)>-1){J=true;I.prop("checked",J)}I.closest("[role='menuitemcheckbox']").attr("aria-checked",J);if(J){if(L==1&&G){I.prop("disabled",true)}if(N==1&&!G){I.prop("disabled",true)}}}},_updateColumnsLockedState:function(){var C,G,J,F;var I=r.attr("field");var E=r.attr("locked");var D=c(this._ownerColumns(),"field");var H=this.wrapper.find(".k-columns-item input[type=checkbox]");for(C=0,G=H.length;C<G;C++){J=H.eq(C);F=D[J.attr(I)];if(F){J.attr(E,F.locked)}}this._updateColumnsMenu()},_filter:function(){var D=this,E=b,C=D.options;if(C.filterable!==false){if(C.filterable.multi){E="kendoFilterMultiCheck";if(C.filterable.dataSource){C.filterable.checkSource=C.filterable.dataSource;delete C.filterable.dataSource}}D.filterMenu=D.wrapper.find(".k-filterable")[E](z(true,{},{appendToElement:true,dataSource:C.dataSource,values:C.values,field:D.field,title:D.title,change:function(F){if(D.trigger("filtering",{filter:F.filter,field:F.field})){F.preventDefault()}}},C.filterable)).data(E);if(D._isMobile){D.menu.bind(f,function(G){var F=i(G.item);if(F.hasClass("k-filter-item")){D.pane.navigate(D.filterMenu.view,D.options.animations.left)}})}}},_lockColumns:function(){var C=this;C.menu.bind(f,function(E){var D=i(E.item);if(D.hasClass("k-lock")){C.owner.lockColumn(C.field);C.close()}else{if(D.hasClass("k-unlock")){C.owner.unlockColumn(C.field);C.close()}}})},_updateLockedColumns:function(){var I=this.field;var D=this.owner.columns;var F=n(D,function(J){return J.field==I||J.title==I})[0];if(!F){return}var C=F.locked===true;var H=n(D,function(J){return !J.hidden&&(J.locked&&C||!J.locked&&!C)}).length;var G=this.wrapper.find(".k-lock").removeClass("k-state-disabled");var E=this.wrapper.find(".k-unlock").removeClass("k-state-disabled");if(C||H==1){G.addClass("k-state-disabled")}if(!C||H==1){E.addClass("k-state-disabled")}this._updateColumnsLockedState()},refresh:function(){var F=this,D=F.options.dataSource.sort()||[],H,G=F.field,C,E;F.wrapper.find(".k-sort-asc, .k-sort-desc").removeClass(l);for(C=0,E=D.length;C<E;C++){H=D[C];if(G==H.field){F.wrapper.find(".k-sort-"+H.dir).addClass(l)}}F.link[F._filterExist(F.dataSource.filter())?"addClass":"removeClass"]("k-state-active")},_filterExist:function(F){var G=false;var D;if(!F){return}F=F.filters;for(var C=0,E=F.length;C<E;C++){D=F[C];if(D.field==this.field){G=true}else{if(D.filters){G=G||this._filterExist(D)}}}return G}});var B='<ul id="#=uid#">#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-icon k-i-sort-asc-sm"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-icon k-i-sort-desc-sm"></span>${messages.sortDescending}</span></li>#if(showColumns || filterable){#<li class="k-separator" role="presentation"></li>#}##}##if(showColumns){#<li class="k-item k-columns-item" aria-haspopup="true"><span class="k-link"><span class="k-icon k-i-columns"></span>${messages.columns}</span><ul>#for (var idx = 0; idx < columns.length; idx++) {#<li role="menuitemcheckbox" aria-checked="false"><input type="checkbox" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#"/>#=columns[idx].title#</li>#}#</ul></li>#if(filterable || lockedColumns){#<li class="k-separator" role="presentation"></li>#}##}##if(filterable){#<li class="k-item k-filter-item" aria-haspopup="true"><span class="k-link"><span class="k-icon k-i-filter"></span>${messages.filter}</span><ul><li><div class="k-filterable"></div></li></ul></li>#if(lockedColumns){#<li class="k-separator" role="presentation"></li>#}##}##if(lockedColumns){#<li class="k-item k-lock"><span class="k-link"><span class="k-icon k-i-lock"></span>${messages.lock}</span></li><li class="k-item k-unlock"><span class="k-link"><span class="k-icon k-i-unlock"></span>${messages.unlock}</span></li>#}#</ul>';var t='<div data-#=ns#role="view" data-#=ns#init-widgets="false" data-#=ns#use-native-scrolling="true" class="k-grid-column-menu"><div data-#=ns#role="header" class="k-header">${messages.settings}<button class="k-button k-done">#=messages.done#</button></div><div class="k-column-menu k-mobile-list"><ul><li><span class="k-link">${title}</span><ul>#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-icon k-i-sort-asc-sm"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-icon k-i-sort-desc-sm"></span>${messages.sortDescending}</span></li>#}##if(lockedColumns){#<li class="k-item k-lock"><span class="k-link"><span class="k-icon k-i-lock"></span>${messages.lock}</span></li><li class="k-item k-unlock"><span class="k-link"><span class="k-icon k-i-unlock"></span>${messages.unlock}</span></li>#}##if(filterable){#<li class="k-item k-filter-item"><span class="k-link k-filterable"><span class="k-icon k-i-filter"></span>${messages.filter}</span></li>#}#</ul></li>#if(showColumns){#<li class="k-columns-item"><span class="k-link">${messages.columns}</span><ul>#for (var idx = 0; idx < columns.length; idx++) {#<li class="k-item"><label class="k-label"><input type="checkbox" class="k-check" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#"/>#=columns[idx].title#</label></li>#}#</ul></li>#}#</ul></div></div>';var o=e.extend({init:function(D,C){e.fn.init.call(this,D,C);this.element.on("click"+w,"li.k-item:not(.k-separator):not(.k-state-disabled)","_click")},events:[f],_click:function(C){if(!i(C.target).is("[type=checkbox]")){C.preventDefault()}this.trigger(f,{item:C.currentTarget})},close:function(){this.options.pane.navigate("")},destroy:function(){e.fn.destroy.call(this);this.element.off(w)}});q.plugin(h)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.columnsorter",["kendo.core"],a)}(function(){var a={id:"columnsorter",name:"Column Sorter",category:"framework",depends:["core"],advanced:true};(function(g,c){var k=window.kendo;var l=k.ui;var m=l.Widget;var p="dir";var e="asc";var o="single";var i="field";var h="desc";var b=".kendoColumnSorter";var d=".k-link";var n="aria-sort";var j=g.proxy;var f=m.extend({init:function(r,q){var t=this,s;m.fn.init.call(t,r,q);t._refreshHandler=j(t.refresh,t);t.dataSource=t.options.dataSource.bind("change",t._refreshHandler);t.directions=t.options.initialDirection===e?[e,h]:[h,e];s=t.element.find(d);if(!s[0]){s=t.element.wrapInner('<a class="k-link" href="#"/>').find(d)}t.link=s;t.element.on("click"+b,j(t._click,t))},options:{name:"ColumnSorter",mode:o,allowUnsort:true,compare:null,filter:"",initialDirection:e},events:["change"],destroy:function(){var q=this;m.fn.destroy.call(q);q.element.off(b);q.dataSource.unbind("change",q._refreshHandler);q._refreshHandler=q.element=q.link=q.dataSource=null},refresh:function(){var v=this,t=v.dataSource.sort()||[],q,u,x,r,s=v.element,w=s.attr(k.attr(i));s.removeAttr(k.attr(p));s.removeAttr(n);for(q=0,u=t.length;q<u;q++){x=t[q];if(w==x.field){s.attr(k.attr(p),x.dir)}}r=s.attr(k.attr(p));s.find(".k-i-sort-asc-sm,.k-i-sort-desc-sm").remove();if(r===e){g('<span class="k-icon k-i-sort-asc-sm" />').appendTo(v.link);s.attr(n,"ascending")}else{if(r===h){g('<span class="k-icon k-i-sort-desc-sm" />').appendTo(v.link);s.attr(n,"descending")}}},_toggleSortDirection:function(q){var r=this.directions;if(q===r[r.length-1]&&this.options.allowUnsort){return c}return r[0]===q?r[1]:r[0]},_click:function(w){var v=this,t=v.element,x=t.attr(k.attr(i)),s=t.attr(k.attr(p)),z=v.options,q=v.options.compare===null?c:v.options.compare,u=v.dataSource.sort()||[],y,r;w.preventDefault();if(z.filter&&!t.is(z.filter)){return}s=this._toggleSortDirection(s);if(this.trigger("change",{sort:{field:x,dir:s,compare:q}})){return}if(z.mode===o){u=[{field:x,dir:s,compare:q}]}else{if(z.mode==="multiple"){for(y=0,r=u.length;y<r;y++){if(u[y].field===x){u.splice(y,1);break}}u.push({field:x,dir:s,compare:q})}}this.dataSource.sort(u)}});l.plugin(f)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.editable",["kendo.datepicker","kendo.numerictextbox","kendo.validator","kendo.binder"],a)}(function(){var a={id:"editable",name:"Editable",category:"framework",depends:["datepicker","numerictextbox","validator","binder"],hidden:true};(function(d,g){var p=window.kendo,o=p.ui,c=o.Widget,v=d.extend,f=p.support.browser.msie&&p.support.browser.version<9,b=p.isFunction,m=d.isPlainObject,u=d.inArray,n=/("|\%|'|\[|\]|\$|\.|\,|\:|\;|\+|\*|\&|\!|\#|\(|\)|<|>|\=|\?|\@|\^|\{|\}|\~|\/|\||`)/g,t='<div class="k-widget k-tooltip k-tooltip-validation" style="margin:0.5em"><span class="k-icon k-i-warning"> </span>#=message#<div class="k-callout k-callout-n"></div></div>',l="change";var s=["url","email","number","date","boolean"];function i(w){w=w!=null?w:"";return w.type||d.type(w)||"string"}function q(w){w.find(":input:not(:button, ["+p.attr("role")+"=upload], ["+p.attr("skip")+"], [type=file]), select").each(function(){var x=p.attr("bind"),z=this.getAttribute(x)||"",y=this.type==="checkbox"||this.type==="radio"?"checked:":"value:",A=this.name;if(z.indexOf(y)===-1&&A){z+=(z.length?",":"")+y+A;d(this).attr(x,z)}})}function j(E){var B=(E.model.fields||E.model)[E.field],z=i(B),w=B?B.validation:{},C,D=p.attr("type"),x=p.attr("bind"),A,y={name:E.field};for(C in w){A=w[C];if(u(C,s)>=0){y[D]=C}else{if(!b(A)){y[C]=m(A)?A.value||C:A}}y[p.attr(C+"-msg")]=A.message}if(u(z,s)>=0){y[D]=z}y[x]=(z==="boolean"?"checked:":"value:")+E.field;return y}function e(y){var x,A,z,B,C,w;if(y&&y.length){w=[];for(x=0,A=y.length;x<A;x++){z=y[x];C=z.text||z.value||z;B=z.value==null?z.text||z:z.value;w[x]={text:C,value:B}}}return w}var k={number:function(x,y){var w=j(y);d('<input type="text"/>').attr(w).appendTo(x).kendoNumericTextBox({format:y.format});d("<span "+p.attr("for")+'="'+y.field+'" class="k-invalid-msg"/>').hide().appendTo(x)},date:function(x,y){var w=j(y),z=y.format;if(z){z=p._extractFormat(z)}w[p.attr("format")]=z;d('<input type="text"/>').attr(w).appendTo(x).kendoDatePicker({format:y.format});d("<span "+p.attr("for")+'="'+y.field+'" class="k-invalid-msg"/>').hide().appendTo(x)},string:function(x,y){var w=j(y);d('<input type="text" class="k-input k-textbox"/>').attr(w).appendTo(x)},"boolean":function(x,y){var w=j(y);d('<input type="checkbox" />').attr(w).appendTo(x)},values:function(x,z){var w=j(z);var y=p.stringify(e(z.values));d("<select "+p.attr("text-field")+'="text"'+p.attr("value-field")+'="value"'+p.attr("source")+"='"+(y?y.replace(/\'/g,"&apos;"):y)+"'"+p.attr("role")+'="dropdownlist"/>').attr(w).appendTo(x);d("<span "+p.attr("for")+'="'+z.field+'" class="k-invalid-msg"/>').hide().appendTo(x)}};function h(x,A){var w=x?x.validation||{}:{},z,y;for(z in w){y=w[z];if(m(y)&&y.value){y=y.value}if(b(y)){A[z]=y}}}var r=c.extend({init:function(x,w){var y=this;if(w.target){w.$angular=w.target.options.$angular}c.fn.init.call(y,x,w);y._validateProxy=d.proxy(y._validate,y);y.refresh()},events:[l],options:{name:"Editable",editors:k,clearContainer:true,errorTemplate:t},editor:function(F,x){var B=this,D=B.options.editors,H=m(F),G=H?F.field:F,z=B.options.model||{},y=H&&F.values,E=y?"values":i(x),C=H&&F.editor,A=C?F.editor:D[E],w=B.element.find("["+p.attr("container-for")+"="+G.replace(n,"\\$1")+"]");A=A?A:D.string;if(C&&typeof F.editor==="string"){A=function(I){I.append(F.editor)}}w=w.length?w:B.element;A(w,v(true,{},H?F:{field:G},{model:z}))},_validate:function(y){var w=this,A,B=y.value,E=w._validationEventInProgress,C={},z=p.attr("bind"),D=y.field.replace(n,"\\$1"),x=new RegExp("(value|checked)\\s*:\\s*"+D+"\\s*(,|$)");C[y.field]=y.value;A=d(":input["+z+'*="'+D+'"]',w.element).filter("["+p.attr("validate")+"!='false']").filter(function(){return x.test(d(this).attr(z))});if(A.length>1){A=A.filter(function(){var F=d(this);return !F.is(":radio")||F.val()==B})}try{w._validationEventInProgress=true;if(!w.validatable.validateInput(A)||!E&&w.trigger(l,{values:C})){y.preventDefault()}}finally{w._validationEventInProgress=false}},end:function(){return this.validatable.validate()},destroy:function(){var w=this;w.angular("cleanup",function(){return{elements:w.element}});c.fn.destroy.call(w);w.options.model.unbind("set",w._validateProxy);p.unbind(w.element);if(w.validatable){w.validatable.destroy()}p.destroy(w.element);w.element.removeData("kendoValidator");if(w.element.is("["+p.attr("role")+"=editable]")){w.element.removeAttr(p.attr("role"))}},refresh:function(){var C=this,F,x,A=C.options.fields||[],w=C.options.clearContainer?C.element.empty():C.element,z=C.options.model||{},H={},E,I,G,y,B;if(!d.isArray(A)){A=[A]}for(F=0,x=A.length;F<x;F++){E=A[F];I=m(E);G=I?E.field:E;y=(z.fields||z)[G];h(y,H);C.editor(E,y)}if(C.options.target){C.angular("compile",function(){return{elements:w,data:w.map(function(){return{dataItem:z}})}})}if(!x){B=z.fields||z;for(G in B){h(B[G],H)}}q(w);if(C.validatable){C.validatable.destroy()}p.bind(w,C.options.model);C.options.model.unbind("set",C._validateProxy);C.options.model.bind("set",C._validateProxy);C.validatable=new p.ui.Validator(w,{validateOnBlur:false,errorTemplate:C.options.errorTemplate||g,rules:H});var D=w.find(":kendoFocusable").eq(0).focus();if(f){D.focus()}}});o.plugin(r)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.window",["kendo.draganddrop"],a)}(function(){var a={id:"window",name:"Window",category:"web",description:"The Window widget displays content in a modal or non-modal HTML window.",depends:["draganddrop"],features:[{id:"window-fx",name:"Animation",description:"Support for animation",depends:["fx"]}]};(function(y,m){var C=window.kendo,c=C.ui.Widget,j=C.ui.Draggable,ag=y.isPlainObject,e=C._activeElement,R=C._outerWidth,ab=C._outerHeight,V=y.proxy,h=y.extend,T=y.each,d=C.template,Q="body",b,D=".kendoWindow",x=".k-window",ac=".k-window-title",z=ac+"bar",q=".k-window-content",o=".k-resize-handle",l=".k-overlay",g="k-content-frame",s="k-i-loading",F="k-state-hover",L="k-state-focused",u="k-window-maximized",af=":visible",U="hidden",H="cursor",S="open",i="activate",K="deactivate",aa="close",t="refresh",v="minimize",E="maximize",B="resizeStart",ae="resize",J="resizeEnd",N="dragstart",G="dragend",A="error",M="overflow",f="zIndex",Z=".k-window-actions .k-i-window-minimize,.k-window-actions .k-i-window-maximize",Y=".k-i-pin",w=".k-i-unpin",W=Y+","+w,P=".k-window-titlebar .k-window-action",n=".k-window-titlebar .k-i-refresh",I=C.isLocalUrl;function O(ah){return typeof ah!="undefined"}function X(aj,ah,ai){return Math.max(Math.min(parseInt(aj,10),ai===Infinity?ai:parseInt(ai,10)),parseInt(ah,10))}function r(){return !this.type||this.type.toLowerCase().indexOf("script")>=0}var k=c.extend({init:function(al,au){var ao=this,ah,ak={},ai,aq,an,am=false,ap,at,ar=au&&au.actions&&!au.actions.length,aj;c.fn.init.call(ao,al,au);au=ao.options;an=au.position;al=ao.element;ap=au.content;if(ar){au.actions=[]}ao.appendTo=y(au.appendTo);if(ap&&!ag(ap)){ap=au.content={url:ap}}al.find("script").filter(r).remove();if(!al.parent().is(ao.appendTo)&&(an.top===m||an.left===m)){if(al.is(af)){ak=al.offset();am=true}else{ai=al.css("visibility");aq=al.css("display");al.css({visibility:U,display:""});ak=al.offset();al.css({visibility:ai,display:aq})}if(an.top===m){an.top=ak.top}if(an.left===m){an.left=ak.left}}if(!O(au.visible)||au.visible===null){au.visible=al.is(af)}ah=ao.wrapper=al.closest(x);if(!al.is(".k-content")||!ah[0]){al.addClass("k-window-content k-content");ao._createWindow(al,au);ah=ao.wrapper=al.closest(x);ao._dimensions()}ao._position();if(au.pinned){ao.pin(true)}if(ap){ao.refresh(ap)}if(au.visible){ao.toFront()}at=ah.children(q);ao._tabindex(at);if(au.visible&&au.modal){ao._overlay(ah.is(af)).css({opacity:0.5})}ah.on("mouseenter"+D,P,V(ao._buttonEnter,ao)).on("mouseleave"+D,P,V(ao._buttonLeave,ao)).on("click"+D,"> "+P,V(ao._windowActionHandler,ao));at.on("keydown"+D,V(ao._keydown,ao)).on("focus"+D,V(ao._focus,ao)).on("blur"+D,V(ao._blur,ao));this._resizable();this._draggable();aj=al.attr("id");if(aj){aj=aj+"_wnd_title";ah.children(z).children(ac).attr("id",aj);at.attr({role:"dialog","aria-labelledby":aj})}ah.add(ah.children(".k-resize-handle,"+z)).on("mousedown"+D,V(ao.toFront,ao));ao.touchScroller=C.touchScroller(al);ao._resizeHandler=V(ao._onDocumentResize,ao);ao._marker=C.guid().substring(0,8);y(window).on("resize"+D+ao._marker,ao._resizeHandler);if(au.visible){ao.trigger(S);ao.trigger(i)}C.notify(ao)},_buttonEnter:function(ah){y(ah.currentTarget).addClass(F)},_buttonLeave:function(ah){y(ah.currentTarget).removeClass(F)},_focus:function(){this.wrapper.addClass(L)},_blur:function(){this.wrapper.removeClass(L)},_dimensions:function(){var ao=this.wrapper;var ai=this.options;var ak=ai.width;var ah=ai.height;var am=ai.maxHeight;var al=["minWidth","minHeight","maxWidth","maxHeight"];this.title(ai.title);for(var aj=0;aj<al.length;aj++){var an=ai[al[aj]]||"";if(an!=Infinity){ao.css(al[aj],an)}}if(am!=Infinity){this.element.css("maxHeight",am)}if(ak){if(ak.toString().indexOf("%")>0){ao.width(ak)}else{ao.width(X(ak,ai.minWidth,ai.maxWidth))}}else{ao.width("")}if(ah){if(ah.toString().indexOf("%")>0){ao.height(ah)}else{ao.height(X(ah,ai.minHeight,ai.maxHeight))}}else{ao.height("")}if(!ai.visible){ao.hide()}},_position:function(){var ai=this.wrapper,ah=this.options.position;if(ah.top===0){ah.top=ah.top.toString()}if(ah.left===0){ah.left=ah.left.toString()}ai.css({top:ah.top||"",left:ah.left||""})},_animationOptions:function(aj){var ai=this.options.animation;var ah={open:{effects:{}},close:{hide:true,effects:{}}};return ai&&ai[aj]||ah[aj]},_resize:function(){C.resize(this.element.children())},_resizable:function(){var ah=this.options.resizable;var ai=this.wrapper;if(this.resizing){ai.off("dblclick"+D).children(o).remove();this.resizing.destroy();this.resizing=null}if(ah){ai.on("dblclick"+D,z,V(function(aj){if(!y(aj.target).closest(".k-window-action").length){this.toggleMaximization()}},this));T("n e s w se sw ne nw".split(" "),function(aj,ak){ai.append(b.resizeHandle(ak))});this.resizing=new ad(this)}ai=null},_draggable:function(){var ah=this.options.draggable;if(this.dragging){this.dragging.destroy();this.dragging=null}if(ah){this.dragging=new p(this,ah.dragHandle||z)}},_actions:function(){var ak=this.options.actions;var ai=this.wrapper.children(z);var ah=ai.find(".k-window-actions");var aj=["maximize","minimize"];ak=y.map(ak,function(al){return{name:y.inArray(al.toLowerCase(),aj)>-1?"window-"+al:al}});ah.html(C.render(b.action,ak))},setOptions:function(ah){c.fn.setOptions.call(this,ah);var ai=this.options.scrollable!==false;this.restore();this._dimensions();this._position();this._resizable();this._draggable();this._actions();if(typeof ah.modal!=="undefined"){var aj=this.options.visible!==false;this._overlay(ah.modal&&aj)}this.element.css(M,ai?"":"hidden")},events:[S,i,K,aa,v,E,t,B,ae,J,N,G,A],options:{name:"Window",animation:{open:{effects:{zoom:{direction:"in"},fade:{direction:"in"}},duration:350},close:{effects:{zoom:{direction:"out",properties:{scale:0.7}},fade:{direction:"out"}},duration:350,hide:true}},title:"",actions:["Close"],autoFocus:true,modal:false,resizable:true,draggable:true,minWidth:90,minHeight:50,maxWidth:Infinity,maxHeight:Infinity,pinned:false,scrollable:true,position:{},content:null,visible:null,height:null,width:null,appendTo:"body",isMaximized:false,isMinimized:false},_closable:function(){return y.inArray("close",y.map(this.options.actions,function(ah){return ah.toLowerCase()}))>-1},_keydown:function(aq){var ap=this,av=ap.options,au=C.keys,at=aq.keyCode,aj=ap.wrapper,al,ao,ai=10,ak=ap.options.isMaximized,am,ah,ar,an;if(aq.target!=aq.currentTarget||ap._closing){return}if(at==au.ESC&&ap._closable()){ap._close(false)}if(av.draggable&&!aq.ctrlKey&&!ak){al=C.getOffset(aj);if(at==au.UP){ao=aj.css("top",al.top-ai)}else{if(at==au.DOWN){ao=aj.css("top",al.top+ai)}else{if(at==au.LEFT){ao=aj.css("left",al.left-ai)}else{if(at==au.RIGHT){ao=aj.css("left",al.left+ai)}}}}}if(av.resizable&&aq.ctrlKey&&!ak){if(at==au.UP){ao=true;ah=aj.height()-ai}else{if(at==au.DOWN){ao=true;ah=aj.height()+ai}}if(at==au.LEFT){ao=true;am=aj.width()-ai}else{if(at==au.RIGHT){ao=true;am=aj.width()+ai}}if(ao){ar=X(am,av.minWidth,av.maxWidth);an=X(ah,av.minHeight,av.maxHeight);if(!isNaN(ar)){aj.width(ar);ap.options.width=ar+"px"}if(!isNaN(an)){aj.height(an);ap.options.height=an+"px"}ap.resize()}}if(ao){aq.preventDefault()}},_overlay:function(ai){var ah=this.appendTo.children(l),aj=this.wrapper;if(!ah.length){ah=y("<div class='k-overlay' />")}ah.insertBefore(aj[0]).toggle(ai).css(f,parseInt(aj.css(f),10)-1);return ah},_actionForIcon:function(ai){var ah=/\bk-i(-\w+)+\b/.exec(ai[0].className)[0];return{"k-i-close":"_close","k-i-window-maximize":"maximize","k-i-window-minimize":"minimize","k-i-window-restore":"restore","k-i-refresh":"refresh","k-i-pin":"pin","k-i-unpin":"unpin"}[ah]},_windowActionHandler:function(aj){if(this._closing){return}var ah=y(aj.target).closest(".k-window-action").find(".k-icon");var ai=this._actionForIcon(ah);if(ai){aj.preventDefault();this[ai]();return false}},_modals:function(){var ah=this;var ai=y(x).filter(function(){var al=y(this);var ak=ah._object(al);var aj=ak&&ak.options;return aj&&aj.modal&&aj.visible&&aj.appendTo===ah.options.appendTo&&al.is(af)}).sort(function(ak,aj){return +y(ak).css("zIndex")-+y(aj).css("zIndex")});ah=null;return ai},_object:function(ah){var ai=ah.children(q);var aj=C.widgetInstance(ai);if(aj instanceof k){return aj}return m},center:function(){var al=this,ah=al.options.position,ao=al.wrapper,aj=y(window),am=0,an=0,ai,ak;if(al.options.isMaximized){return al}if(!al.options.pinned){am=aj.scrollTop();an=aj.scrollLeft()}ak=an+Math.max(0,(aj.width()-ao.width())/2);ai=am+Math.max(0,(aj.height()-ao.height()-parseInt(ao.css("paddingTop"),10))/2);ao.css({left:ak,top:ai});ah.top=ai;ah.left=ak;return al},title:function(am){var ak=this,an=ak.wrapper,ai=ak.options,ah=an.children(z),al=ah.children(ac),aj;if(!arguments.length){return al.html()}if(am===false){an.addClass("k-window-titleless");ah.remove()}else{if(!ah.length){an.prepend(b.titlebar(ai));ak._actions();ah=an.children(z)}else{al.html(am)}aj=parseInt(ab(ah),10);an.css("padding-top",aj);ah.css("margin-top",-aj)}ak.options.title=am;return ak},content:function(ai,ak){var aj=this.wrapper.children(q),ah=aj.children(".km-scroll-container");aj=ah[0]?ah:aj;if(!O(ai)){return aj.html()}this.angular("cleanup",function(){return{elements:aj.children()}});C.destroy(this.element.children());aj.empty().html(ai);this.angular("compile",function(){var al=[];for(var am=aj.length;--am>=0;){al.push({dataItem:ak})}return{elements:aj.children(),data:al}});return this},open:function(){var ak=this,ah=ak.wrapper,ap=ak.options,ao=this._animationOptions("open"),am=ah.children(q),aj,ai,an=y(document);if(!ak.trigger(S)){if(ak._closing){ah.kendoStop(true,true)}ak._closing=false;ak.toFront();if(ap.autoFocus){ak.element.focus()}ap.visible=true;if(ap.modal){ai=!!ak._modals().length;aj=ak._overlay(ai);aj.kendoStop(true,true);if(ao.duration&&C.effects.Fade&&!ai){var al=C.fx(aj).fadeIn();al.duration(ao.duration||0);al.endValue(0.5);al.play()}else{aj.css("opacity",0.5)}aj.show()}if(!ah.is(af)){am.css(M,U);ah.show().kendoStop().kendoAnimate({effects:ao.effects,duration:ao.duration,complete:V(this._activate,this)})}}if(ap.isMaximized){ak._documentScrollTop=an.scrollTop();ak._documentScrollLeft=an.scrollLeft();y("html, body").css(M,U)}return ak},_activate:function(){var ah=this.options.scrollable!==false;if(this.options.autoFocus){this.element.focus()}this.element.css(M,ah?"":"hidden");C.resize(this.element.children());this.trigger(i)},_removeOverlay:function(ak){var al=this._modals();var aj=this.options;var an=aj.modal&&!al.length;var ai=aj.modal?this._overlay(true):y(m);var am=this._animationOptions("close");if(an){if(!ak&&am.duration&&C.effects.Fade){var ah=C.fx(ai).fadeOut();ah.duration(am.duration||0);ah.startValue(0.5);ah.play()}else{this._overlay(false).remove()}}else{if(al.length){this._object(al.last())._overlay(true)}}},_close:function(al){var aj=this,an=aj.wrapper,ah=aj.options,ai=this._animationOptions("open"),ak=this._animationOptions("close"),am=y(document);if(an.is(af)&&!aj.trigger(aa,{userTriggered:!al})){if(aj._closing){return}aj._closing=true;ah.visible=false;y(x).each(function(ap,ao){var aq=y(ao).children(q);if(ao!=an&&aq.find("> ."+g).length>0){aq.children(l).remove()}});this._removeOverlay();an.kendoStop().kendoAnimate({effects:ak.effects||ai.effects,reverse:ak.reverse===true,duration:ak.duration,complete:V(this._deactivate,this)})}if(aj.options.isMaximized){y("html, body").css(M,"");if(aj._documentScrollTop&&aj._documentScrollTop>0){am.scrollTop(aj._documentScrollTop)}if(aj._documentScrollLeft&&aj._documentScrollLeft>0){am.scrollLeft(aj._documentScrollLeft)}}},_deactivate:function(){var ai=this;ai.wrapper.hide().css("opacity","");ai.trigger(K);if(ai.options.modal){var ah=ai._object(ai._modals().last());if(ah){ah.toFront()}}},close:function(){this._close(true);return this},_actionable:function(ah){return y(ah).is(P+","+P+" .k-icon,:input,a")},_shouldFocus:function(aj){var ai=e(),ah=this.element;return this.options.autoFocus&&!y(ai).is(ah)&&!this._actionable(aj)&&(!ah.find(ai).length||!ah.find(aj).length)},toFront:function(am){var al=this,ah=al.wrapper,aj=ah[0],ao=+ah.css(f),ak=ao,an=am&&am.target||null;y(x).each(function(at,ar){var aq=y(ar),av=aq.css(f),au=aq.children(q);if(!isNaN(av)){ao=Math.max(+av,ao)}if(ar!=aj&&au.find("> ."+g).length>0){au.append(b.overlay)}});if(!ah[0].style.zIndex||ak<ao){ah.css(f,ao+2)}al.element.find("> .k-overlay").remove();if(al._shouldFocus(an)){al.element.focus();var ai=y(window).scrollTop(),ap=parseInt(ah.position().top,10);if(!al.options.pinned&&ap>0&&ap<ai){if(ai>0){y(window).scrollTop(ap)}else{ah.css("top",ai)}}}ah=null;return al},toggleMaximization:function(){if(this._closing){return this}return this[this.options.isMaximized?"restore":"maximize"]()},restore:function(){var ai=this;var ah=ai.options;var aj=ah.minHeight;var al=ai.restoreOptions;var ak=y(document);if(!ah.isMaximized&&!ah.isMinimized){return ai}if(aj&&aj!=Infinity){ai.wrapper.css("min-height",aj)}ai.wrapper.css({position:ah.pinned?"fixed":"absolute",left:al.left,top:al.top,width:al.width,height:al.height}).removeClass(u).find(".k-window-content,.k-resize-handle").show().end().find(".k-window-titlebar .k-i-window-restore").parent().remove().end().end().find(Z).parent().show().end().end().find(W).parent().show();ai.options.width=al.width;ai.options.height=al.height;y("html, body").css(M,"");if(this._documentScrollTop&&this._documentScrollTop>0){ak.scrollTop(this._documentScrollTop)}if(this._documentScrollLeft&&this._documentScrollLeft>0){ak.scrollLeft(this._documentScrollLeft)}ah.isMaximized=ah.isMinimized=false;ai.resize();return ai},_sizingAction:function(am,al){var aj=this,ak=aj.wrapper,ai=ak[0].style,ah=aj.options;if(ah.isMaximized||ah.isMinimized){return aj}aj.restoreOptions={width:ai.width,height:ai.height};ak.children(o).hide().end().children(z).find(Z).parent().hide().eq(0).before(b.action({name:"window-restore"}));al.call(aj);aj.wrapper.children(z).find(W).parent().toggle(am!=="maximize");aj.trigger(am);return aj},maximize:function(){this._sizingAction("maximize",function(){var ai=this,ak=ai.wrapper,ah=ak.position(),aj=y(document);h(ai.restoreOptions,{left:ah.left,top:ah.top});ak.css({left:0,top:0,position:"fixed"}).addClass(u);this._documentScrollTop=aj.scrollTop();this._documentScrollLeft=aj.scrollLeft();y("html, body").css(M,U);ai.options.isMaximized=true;ai._onDocumentResize()});return this},isMaximized:function(){return this.options.isMaximized},minimize:function(){this._sizingAction("minimize",function(){var ah=this;ah.wrapper.css({height:"",minHeight:""});ah.element.hide();ah.options.isMinimized=true});return this},isMinimized:function(){return this.options.isMinimized},pin:function(ai){var ah=this,al=y(window),am=ah.wrapper,ak=parseInt(am.css("top"),10),aj=parseInt(am.css("left"),10);if(ai||!ah.options.pinned&&!ah.options.isMaximized){am.css({position:"fixed",top:ak-al.scrollTop(),left:aj-al.scrollLeft()});am.children(z).find(Y).addClass("k-i-unpin").removeClass("k-i-pin");ah.options.pinned=true}},unpin:function(){var ah=this,ak=y(window),al=ah.wrapper,aj=parseInt(al.css("top"),10),ai=parseInt(al.css("left"),10);if(ah.options.pinned&&!ah.options.isMaximized){al.css({position:"",top:aj+ak.scrollTop(),left:ai+ak.scrollLeft()});al.children(z).find(w).addClass("k-i-pin").removeClass("k-i-unpin");ah.options.pinned=false}},_onDocumentResize:function(){var ak=this,am=ak.wrapper,aj=y(window),al=C.support.zoomLevel(),ah,ai;if(!ak.options.isMaximized){return}ah=aj.width()/al;ai=aj.height()/al-parseInt(am.css("padding-top"),10);am.css({width:ah,height:ai});ak.options.width=ah;ak.options.height=ai;ak.resize()},refresh:function(aj){var an=this,am=an.options,ak=y(an.element),al,ah,ai;if(!ag(aj)){aj={url:aj}}aj=h({},am.content,aj);ah=O(am.iframe)?am.iframe:aj.iframe;ai=aj.url;if(ai){if(!O(ah)){ah=!I(ai)}if(!ah){an._ajaxRequest(aj)}else{al=ak.find("."+g)[0];if(al){al.src=ai||al.src}else{ak.html(b.contentFrame(h({},am,{content:aj})))}ak.find("."+g).unbind("load"+D).on("load"+D,V(this._triggerRefresh,this))}}else{if(aj.template){an.content(d(aj.template)({}))}an.trigger(t)}ak.toggleClass("k-window-iframecontent",!!ah);return an},_triggerRefresh:function(){this.trigger(t)},_ajaxComplete:function(){clearTimeout(this._loadingIconTimeout);this.wrapper.find(n).removeClass(s)},_ajaxError:function(ai,ah){this.trigger(A,{status:ah,xhr:ai})},_ajaxSuccess:function(ah){return function(aj){var ai=aj;if(ah){ai=d(ah)(aj||{})}this.content(ai,aj);this.element.prop("scrollTop",0);this.trigger(t)}},_showLoading:function(){this.wrapper.find(n).addClass(s)},_ajaxRequest:function(ah){this._loadingIconTimeout=setTimeout(V(this._showLoading,this),100);y.ajax(h({type:"GET",dataType:"html",cache:false,error:V(this._ajaxError,this),complete:V(this._ajaxComplete,this),success:V(this._ajaxSuccess(ah.template),this)},ah))},_destroy:function(){if(this.resizing){this.resizing.destroy()}if(this.dragging){this.dragging.destroy()}this.wrapper.off(D).children(q).off(D).end().find(".k-resize-handle,.k-window-titlebar").off(D);y(window).off("resize"+D+this._marker);clearTimeout(this._loadingIconTimeout);c.fn.destroy.call(this);this.unbind(m);C.destroy(this.wrapper);this._removeOverlay(true)},destroy:function(){this._destroy();this.wrapper.empty().remove();this.wrapper=this.appendTo=this.element=y()},_createWindow:function(){var ak=this.element,aj=this.options,ah,al,ai=C.support.isRtl(ak);if(aj.scrollable===false){ak.css("overflow","hidden")}al=y(b.wrapper(aj));ah=ak.find("iframe:not(.k-content)").map(function(){var am=this.getAttribute("src");this.src="";return am});al.toggleClass("k-rtl",ai).appendTo(this.appendTo).append(ak).find("iframe:not(.k-content)").each(function(am){this.src=ah[am]});al.find(".k-window-title").css(ai?"left":"right",R(al.find(".k-window-actions"))+10);ak.css("visibility","").show();ak.find("[data-role=editor]").each(function(){var am=y(this).data("kendoEditor");if(am){am.refresh()}});al=ak=null}});b={wrapper:d("<div class='k-widget k-window' />"),action:d("<a role='button' href='\\#' class='k-window-action k-link' aria-label='#= name #'><span class='k-icon k-i-#= name.toLowerCase() #'></span></a>"),titlebar:d("<div class='k-window-titlebar k-header'>&nbsp;<span class='k-window-title'>#= title #</span><div class='k-window-actions' /></div>"),overlay:"<div class='k-overlay' />",contentFrame:d("<iframe frameborder='0' title='#= title #' class='"+g+"' src='#= content.url #'>This page requires frames in order to show content</iframe>"),resizeHandle:d("<div class='k-resize-handle k-resize-#= data #'></div>")};function ad(ai){var ah=this;ah.owner=ai;ah._preventDragging=false;ah._draggable=new j(ai.wrapper,{filter:">"+o,group:ai.wrapper.id+"-resizing",dragstart:V(ah.dragstart,ah),drag:V(ah.drag,ah),dragend:V(ah.dragend,ah)});ah._draggable.userEvents.bind("press",V(ah.addOverlay,ah));ah._draggable.userEvents.bind("release",V(ah.removeOverlay,ah))}ad.prototype={addOverlay:function(){this.owner.wrapper.append(b.overlay)},removeOverlay:function(){this.owner.wrapper.find(l).remove()},dragstart:function(aj){var ai=this;var ah=ai.owner;var ak=ah.wrapper;ai._preventDragging=ah.trigger(B);if(ai._preventDragging){return}ai.elementPadding=parseInt(ak.css("padding-top"),10);ai.initialPosition=C.getOffset(ak,"position");ai.resizeDirection=aj.currentTarget.prop("className").replace("k-resize-handle k-resize-","");ai.initialSize={width:ak.width(),height:ak.height()};ai.containerOffset=C.getOffset(ah.appendTo,"position");ak.children(o).not(aj.currentTarget).hide();y(Q).css(H,aj.currentTarget.css(H))},drag:function(aq){if(this._preventDragging){return}var ap=this,al=ap.owner,ai=al.wrapper,ax=al.options,au=ap.resizeDirection,ao=ap.containerOffset,am=ap.initialPosition,aw=ap.initialSize,an,ah,ak,av,at=Math.max(aq.x.location,0),ar=Math.max(aq.y.location,0);if(au.indexOf("e")>=0){an=at-am.left-ao.left;ai.width(X(an,ax.minWidth,ax.maxWidth))}else{if(au.indexOf("w")>=0){av=am.left+aw.width+ao.left;an=X(av-at,ax.minWidth,ax.maxWidth);ai.css({left:av-an-ao.left,width:an})}}var aj=ar;if(al.options.pinned){aj-=y(window).scrollTop()}if(au.indexOf("s")>=0){ah=aj-am.top-ap.elementPadding-ao.top;ai.height(X(ah,ax.minHeight,ax.maxHeight))}else{if(au.indexOf("n")>=0){ak=am.top+aw.height+ao.top;ah=X(ak-aj,ax.minHeight,ax.maxHeight);ai.css({top:ak-ah-ao.top,height:ah})}}if(an){al.options.width=an+"px"}if(ah){al.options.height=ah+"px"}al.resize()},dragend:function(aj){if(this._preventDragging){return}var ai=this,ah=ai.owner,ak=ah.wrapper;ak.children(o).not(aj.currentTarget).show();y(Q).css(H,"");if(ah.touchScroller){ah.touchScroller.reset()}if(aj.keyCode==27){ak.css(ai.initialPosition).css(ai.initialSize)}ah.trigger(J);return false},destroy:function(){if(this._draggable){this._draggable.destroy()}this._draggable=this.owner=null}};function p(aj,ah){var ai=this;ai.owner=aj;ai._preventDragging=false;ai._draggable=new j(aj.wrapper,{filter:ah,group:aj.wrapper.id+"-moving",dragstart:V(ai.dragstart,ai),drag:V(ai.drag,ai),dragend:V(ai.dragend,ai),dragcancel:V(ai.dragcancel,ai)});ai._draggable.userEvents.stopPropagation=false}p.prototype={dragstart:function(ak){var aj=this.owner,ah=aj.element,al=ah.find(".k-window-actions"),ai=C.getOffset(aj.appendTo);this._preventDragging=aj.trigger(N);if(this._preventDragging){return}aj.initialWindowPosition=C.getOffset(aj.wrapper,"position");aj.initialPointerPosition={left:ak.x.client,top:ak.y.client};aj.startPosition={left:ak.x.client-aj.initialWindowPosition.left,top:ak.y.client-aj.initialWindowPosition.top};if(al.length>0){aj.minLeftPosition=R(al)+parseInt(al.css("right"),10)-R(ah)}else{aj.minLeftPosition=20-R(ah)}aj.minLeftPosition-=ai.left;aj.minTopPosition=-ai.top;aj.wrapper.append(b.overlay).children(o).hide();y(Q).css(H,ak.currentTarget.css(H))},drag:function(aj){if(this._preventDragging){return}var ai=this.owner;var ah=ai.options.position;ah.top=Math.max(aj.y.client-ai.startPosition.top,ai.minTopPosition);ah.left=Math.max(aj.x.client-ai.startPosition.left,ai.minLeftPosition);if(C.support.transforms){y(ai.wrapper).css("transform","translate("+(aj.x.client-ai.initialPointerPosition.left)+"px, "+(aj.y.client-ai.initialPointerPosition.top)+"px)")}else{y(ai.wrapper).css(ah)}},_finishDrag:function(){var ah=this.owner;ah.wrapper.children(o).toggle(!ah.options.isMinimized).end().find(l).remove();y(Q).css(H,"")},dragcancel:function(ah){if(this._preventDragging){return}this._finishDrag();ah.currentTarget.closest(x).css(this.owner.initialWindowPosition)},dragend:function(){if(this._preventDragging){return}y(this.owner.wrapper).css(this.owner.options.position).css("transform","");this._finishDrag();this.owner.trigger(G);return false},destroy:function(){if(this._draggable){this._draggable.destroy()}this._draggable=this.owner=null}};C.ui.plugin(k)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.mobile.view",["kendo.core","kendo.fx","kendo.mobile.scroller","kendo.view"],a)}(function(){var a={id:"mobile.view",name:"View",category:"mobile",description:"Mobile View",depends:["core","fx","mobile.scroller","view"],hidden:true};(function(z,q){var A=window.kendo,B=A.mobile,C=B.ui,s=A.attr,k=C.Widget,D=A.ViewClone,p="init",y='<div style="height: 100%; width: 100%; position: absolute; top: 0; left: 0; z-index: 20000; display: none" />',b="beforeShow",d="show",v="afterShow",l="beforeHide",o="transitionEnd",j="transitionStart",n="hide",t="destroy",e=A.attrValue,L=A.roleSelector,c=A.directiveSelector,f=A.compileMobileDirective;function G(N){var Q=N.find(L("popover")),M,P,O=C.roles;for(M=0,P=Q.length;M<P;M++){A.initWidget(Q[M],{},O)}}function I(M){if(!A.triggeredByInput(M)){M.preventDefault()}}var J=k.extend({init:function(N,M){k.fn.init.call(this,N,M);this.params={};z.extend(this,M);this.transition=this.transition||this.defaultTransition;this._id();if(!this.options.$angular){this._layout();this._overlay();this._scroller();this._model()}else{this._overlay()}},events:[p,b,d,v,l,n,t,j,o],options:{name:"View",title:"",layout:null,getLayout:z.noop,reload:false,transition:"",defaultTransition:"",useNativeScrolling:false,stretch:false,zoom:false,model:null,modelScope:window,scroller:{},initWidgets:true},enable:function(M){if(typeof M=="undefined"){M=true}if(M){this.overlay.hide()}else{this.overlay.show()}},destroy:function(){if(this.layout){this.layout.detach(this)}this.trigger(t);k.fn.destroy.call(this);if(this.scroller){this.scroller.destroy()}if(this.options.$angular){this.element.scope().$destroy()}A.destroy(this.element)},purge:function(){this.destroy();this.element.remove()},triggerBeforeShow:function(){if(this.trigger(b,{view:this})){return false}return true},triggerBeforeHide:function(){if(this.trigger(l,{view:this})){return false}return true},showStart:function(){var M=this.element;M.css("display","");if(!this.inited){this.inited=true;this.trigger(p,{view:this})}else{this._invokeNgController()}if(this.layout){this.layout.attach(this)}this._padIfNativeScrolling();this.trigger(d,{view:this});A.resize(M)},showEnd:function(){this.trigger(v,{view:this});this._padIfNativeScrolling()},hideEnd:function(){var M=this;M.element.hide();M.trigger(n,{view:M});if(M.layout){M.layout.trigger(n,{view:M,layout:M.layout})}},beforeTransition:function(M){this.trigger(j,{type:M})},afterTransition:function(M){this.trigger(o,{type:M})},_padIfNativeScrolling:function(){if(B.appLevelNativeScrolling()){var P=A.support.mobileOS&&A.support.mobileOS.android,Q=B.application.skin()||"",M=B.application.os.android||Q.indexOf("android")>-1,R=Q==="flat"||Q.indexOf("material")>-1,O=(P||M)&&!R?"footer":"header",N=(P||M)&&!R?"header":"footer";this.content.css({paddingTop:this[O].height(),paddingBottom:this[N].height()})}},contentElement:function(){var M=this;return M.options.stretch?M.content:M.scrollerContent},clone:function(){return new D(this)},_scroller:function(){var M=this;if(B.appLevelNativeScrolling()){return}if(M.options.stretch){M.content.addClass("km-stretched-view")}else{M.content.kendoMobileScroller(z.extend(M.options.scroller,{zoom:M.options.zoom,useNative:M.options.useNativeScrolling}));M.scroller=M.content.data("kendoMobileScroller");M.scrollerContent=M.scroller.scrollElement}if(A.support.kineticScrollNeeded){z(M.element).on("touchmove",".km-header",I);if(!M.options.useNativeScrolling&&!M.options.stretch){z(M.element).on("touchmove",".km-content",I)}}},_model:function(){var O=this,N=O.element,M=O.options.model;if(typeof M==="string"){M=A.getter(M)(O.options.modelScope)}O.model=M;G(N);O.element.css("display","");if(O.options.initWidgets){if(M){A.bind(N,M,C,A.ui,A.dataviz.ui)}else{B.init(N.children())}}O.element.css("display","none")},_id:function(){var M=this.element,N=M.attr("id")||"";this.id=e(M,"url")||"#"+N;if(this.id=="#"){this.id=A.guid();M.attr("id",this.id)}},_layout:function(){var M=L("content"),N=this.element;N.addClass("km-view");this.header=N.children(L("header")).addClass("km-header");this.footer=N.children(L("footer")).addClass("km-footer");if(!N.children(M)[0]){N.wrapInner("<div "+s("role")+'="content"></div>')}this.content=N.children(L("content")).addClass("km-content");this.element.prepend(this.header).append(this.footer);this.layout=this.options.getLayout(this.layout);if(this.layout){this.layout.setup(this)}},_overlay:function(){this.overlay=z(y).appendTo(this.element)},_invokeNgController:function(){var M,N;if(this.options.$angular){M=this.element.controller();N=this.options.$angular[0];if(M){var O=z.proxy(this,"_callController",M,N);if(/^\$(digest|apply)$/.test(N.$$phase)){O()}else{N.$apply(O)}}}},_callController:function(M,N){this.element.injector().invoke(M.constructor,M,{$scope:N})}});function g(M){M.each(function(){A.initWidget(z(this),{},C.roles)})}var h=k.extend({init:function(N,M){k.fn.init.call(this,N,M);N=this.element;this.header=N.children(this._locate("header")).addClass("km-header");this.footer=N.children(this._locate("footer")).addClass("km-footer");this.elements=this.header.add(this.footer);G(N);if(!this.options.$angular){A.mobile.init(this.element.children())}this.element.detach();this.trigger(p,{layout:this})},_locate:function(M){return this.options.$angular?c(M):L(M)},options:{name:"Layout",id:null,platform:null},events:[p,d,n],setup:function(M){if(!M.header[0]){M.header=this.header}if(!M.footer[0]){M.footer=this.footer}},detach:function(M){var N=this;if(M.header===N.header&&N.header[0]){M.element.prepend(N.header.detach()[0].cloneNode(true))}if(M.footer===N.footer&&N.footer.length){M.element.append(N.footer.detach()[0].cloneNode(true))}},attach:function(M){var N=this,O=N.currentView;if(O){N.detach(O)}if(M.header===N.header){N.header.detach();M.element.children(L("header")).remove();M.element.prepend(N.header)}if(M.footer===N.footer){N.footer.detach();M.element.children(L("footer")).remove();M.element.append(N.footer)}N.trigger(d,{layout:N,view:M});N.currentView=M}});var i=A.Observable,u=/<body[^>]*>(([\u000a\u000d\u2028\u2029]|.)*)<\/body>/i,r="loadStart",m="loadComplete",K="showStart",H="sameViewRequested",x="viewShow",F="viewTypeDetermined",E="after";var w=i.extend({init:function(P){var Q=this,N,O,M,R;i.fn.init.call(Q);z.extend(Q,P);Q.sandbox=z("<div />");M=Q.container;N=Q._hideViews(M);Q.rootView=N.first();if(!Q.rootView[0]&&P.rootNeeded){if(M[0]==A.mobile.application.element[0]){O='Your kendo mobile application element does not contain any direct child elements with data-role="view" attribute set. Make sure that you instantiate the mobile application using the correct container.'}else{O='Your pane element does not contain any direct child elements with data-role="view" attribute set.'}throw new Error(O)}Q.layouts={};Q.viewContainer=new A.ViewContainer(Q.container);Q.viewContainer.bind("accepted",function(S){S.view.params=Q.params});Q.viewContainer.bind("complete",function(S){Q.trigger(x,{view:S.view})});Q.viewContainer.bind(E,function(){Q.trigger(E)});this.getLayoutProxy=z.proxy(this,"_getLayout");Q._setupLayouts(M);R=M.children(Q._locate("modalview drawer"));if(Q.$angular){Q.$angular[0].viewOptions={defaultTransition:Q.transition,loader:Q.loader,container:Q.container,getLayout:Q.getLayoutProxy};R.each(function(S,T){f(z(T),P.$angular[0])})}else{g(R)}this.bind(this.events,P)},events:[K,E,x,r,m,H,F],destroy:function(){A.destroy(this.container);for(var M in this.layouts){this.layouts[M].destroy()}},view:function(){return this.viewContainer.view},showView:function(O,S,R){O=O.replace(new RegExp("^"+this.remoteViewURLPrefix),"");if(O===""&&this.remoteViewURLPrefix){O="/"}if(O.replace(/^#/,"")===this.url){this.trigger(H);return false}this.trigger(K);var Q=this,N=function(T){return Q.viewContainer.show(T,S,O)},P=Q._findViewElement(O),M=A.widgetInstance(P);Q.url=O.replace(/^#/,"");Q.params=R;if(M&&M.reload){M.purge();P=[]}this.trigger(F,{remote:P.length===0,url:O});if(P[0]){if(!M){M=Q._createView(P)}return N(M)}else{if(this.serverNavigation){location.href=O}else{Q._loadView(O,N)}return true}},append:function(S,R){var P=this.sandbox,Q=(R||"").split("?")[0],O=this.container,N,T,M;if(u.test(S)){S=RegExp.$1}P[0].innerHTML=S;O.append(P.children("script, style"));N=this._hideViews(P);M=N.first();if(!M.length){N=M=P.wrapInner("<div data-role=view />").children()}if(Q){M.hide().attr(s("url"),Q)}this._setupLayouts(P);T=P.children(this._locate("modalview drawer"));O.append(P.children(this._locate("layout modalview drawer")).add(N));g(T);return this._createView(M)},_locate:function(M){return this.$angular?c(M):L(M)},_findViewElement:function(N){var O,M=N.split("?")[0];if(!M){return this.rootView}O=this.container.children("["+s("url")+"='"+M+"']");if(!O[0]&&M.indexOf("/")===-1){O=this.container.children(M.charAt(0)==="#"?M:"#"+M)}return O},_createView:function(M){if(this.$angular){return f(M,this.$angular[0])}else{return A.initWidget(M,{defaultTransition:this.transition,loader:this.loader,container:this.container,getLayout:this.getLayoutProxy,modelScope:this.modelScope,reload:e(M,"reload")},C.roles)}},_getLayout:function(M){if(M===""){return null}return M?this.layouts[M]:this.layouts[this.layout]},_loadView:function(M,N){if(this._xhr){this._xhr.abort()}this.trigger(r);this._xhr=z.get(A.absoluteURL(M,this.remoteViewURLPrefix),"html").always(z.proxy(this,"_xhrComplete",N,M))},_xhrComplete:function(P,N,M){var O=true;if(typeof M==="object"){if(M.status===0){if(M.responseText&&M.responseText.length>0){O=true;M=M.responseText}else{return}}}this.trigger(m);if(O){P(this.append(M,N))}},_hideViews:function(M){return M.children(this._locate("view splitview")).hide()},_setupLayouts:function(M){var O=this,N;M.children(O._locate("layout")).each(function(){if(O.$angular){N=f(z(this),O.$angular[0])}else{N=A.initWidget(z(this),{},C.roles)}var P=N.options.platform;if(!P||P===B.application.os.name){O.layouts[N.options.id]=N}else{N.destroy()}})}});A.mobile.ViewEngine=w;C.plugin(J);C.plugin(h)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.mobile.loader",["kendo.core"],a)}(function(){var a={id:"mobile.loader",name:"Loader",category:"mobile",description:"Mobile Loader",depends:["core"],hidden:true};(function(d,g){var f=window.kendo,c=f.mobile.ui,b=c.Widget,e=d.map(f.eventMap,function(i){return i}).join(" ").split(" ");var h=b.extend({init:function(i,j){var l=this,k=d('<div class="km-loader"><span class="km-loading km-spin"></span><span class="km-loading-left"></span><span class="km-loading-right"></span></div>');b.fn.init.call(l,k,j);l.container=i;l.captureEvents=false;l._attachCapture();k.append(l.options.loading).hide().appendTo(i)},options:{name:"Loader",loading:"<h1>Loading...</h1>",timeout:100},show:function(){var i=this;clearTimeout(i._loading);if(i.options.loading===false){return}i.captureEvents=true;i._loading=setTimeout(function(){i.element.show()},i.options.timeout)},hide:function(){this.captureEvents=false;clearTimeout(this._loading);this.element.hide()},changeMessage:function(i){this.options.loading=i;this.element.find(">h1").html(i)},transition:function(){this.captureEvents=true;this.container.css("pointer-events","none")},transitionDone:function(){this.captureEvents=false;this.container.css("pointer-events","")},_attachCapture:function(){var l=this;l.captureEvents=false;function j(i){if(l.captureEvents){i.preventDefault()}}for(var k=0;k<e.length;k++){l.container[0].addEventListener(e[k],j,true)}}});c.plugin(h)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.mobile.pane",["kendo.mobile.view","kendo.mobile.loader"],a)}(function(){var a={id:"mobile.pane",name:"Pane",category:"mobile",description:"Mobile Pane",depends:["mobile.view","mobile.loader"],hidden:true};(function(f,h){var p=window.kendo,e=p.mobile,j=p.roleSelector,o=e.ui,d=o.Widget,i=e.ViewEngine,r=o.View,k=e.ui.Loader,v="external",b="href",q="#!",u="navigate",s="viewShow",m="sameViewRequested",c=p.support.mobileOS,l=c.ios&&!c.appMode&&c.flatVersion>=700,g=/popover|actionsheet|modalview|drawer/,w="#:back",n=p.attrValue;var t=d.extend({init:function(y,x){var z=this;d.fn.init.call(z,y,x);x=z.options;y=z.element;y.addClass("km-pane");if(z.options.collapsible){y.addClass("km-collapsible-pane")}this.history=[];this.historyCallback=function(B,D,A){var C=z.transition;z.transition=null;if(l&&A){C="none"}return z.viewEngine.showView(B,C,D)};this._historyNavigate=function(A){if(A===w){if(z.history.length===1){return}z.history.pop();A=z.history[z.history.length-1]}else{z.history.push(A)}z.historyCallback(A,p.parseQueryStringParams(A))};this._historyReplace=function(A){var B=p.parseQueryStringParams(A);z.history[z.history.length-1]=A;z.historyCallback(A,B)};z.loader=new k(y,{loading:z.options.loading});z.viewEngine=new i({container:y,transition:x.transition,modelScope:x.modelScope,rootNeeded:!x.initial,serverNavigation:x.serverNavigation,remoteViewURLPrefix:x.root||"",layout:x.layout,$angular:x.$angular,loader:z.loader,showStart:function(){z.loader.transition();z.closeActiveDialogs()},after:function(){z.loader.transitionDone()},viewShow:function(A){z.trigger(s,A)},loadStart:function(){z.loader.show()},loadComplete:function(){z.loader.hide()},sameViewRequested:function(){z.trigger(m)},viewTypeDetermined:function(A){if(!A.remote||!z.options.serverNavigation){z.trigger(u,{url:A.url})}}});this._setPortraitWidth();p.onResize(function(){z._setPortraitWidth()});z._setupAppLinks()},closeActiveDialogs:function(){var x=this.element.find(j("actionsheet popover modalview")).filter(":visible");x.each(function(){p.widgetInstance(f(this),o).close()})},navigateToInitial:function(){var x=this.options.initial;if(x){this.navigate(x)}return x},options:{name:"Pane",portraitWidth:"",transition:"",layout:"",collapsible:false,initial:null,modelScope:window,loading:"<h1>Loading...</h1>"},events:[u,s,m],append:function(x){return this.viewEngine.append(x)},destroy:function(){d.fn.destroy.call(this);this.viewEngine.destroy();this.userEvents.destroy()},navigate:function(x,y){if(x instanceof r){x=x.id}this.transition=y;this._historyNavigate(x)},replace:function(x,y){if(x instanceof r){x=x.id}this.transition=y;this._historyReplace(x)},bindToRouter:function(x){var z=this,A=this.history,y=this.viewEngine;x.bind("init",function(E){var B=E.url,D=x.pushState?B:"/";y.rootView.attr(p.attr("url"),D);var C=A.length;if(B==="/"&&C){x.navigate(A[C-1],true);E.preventDefault()}});x.bind("routeMissing",function(B){if(!z.historyCallback(B.url,B.params,B.backButtonPressed)){B.preventDefault()}});x.bind("same",function(){z.trigger(m)});z._historyNavigate=function(B){x.navigate(B)};z._historyReplace=function(B){x.replace(B)}},hideLoading:function(){this.loader.hide()},showLoading:function(){this.loader.show()},changeLoadingMessage:function(x){this.loader.changeMessage(x)},view:function(){return this.viewEngine.view()},_setPortraitWidth:function(){var y,x=this.options.portraitWidth;if(x){y=p.mobile.application.element.is(".km-vertical")?x:"auto";this.element.css("width",y)}},_setupAppLinks:function(){var A=this,z="tab",y="[data-"+p.ns+"navigate-on-press]",x=f.map(["button","backbutton","detailbutton","listview-link"],function(B){return j(B)+":not("+y+")"}).join(",");this.element.handler(this).on("down",j(z)+","+y,"_mouseup").on("click",j(z)+","+x+","+y,"_appLinkClick");this.userEvents=new p.UserEvents(this.element,{fastTap:true,filter:x,tap:function(B){B.event.currentTarget=B.touch.currentTarget;A._mouseup(B.event)}});this.element.css("-ms-touch-action","")},_appLinkClick:function(z){var x=f(z.currentTarget).attr("href");var y=x&&x[0]!=="#"&&this.options.serverNavigation;if(!y&&n(f(z.currentTarget),"rel")!=v){z.preventDefault()}},_mouseup:function(A){if(A.which>1||A.isDefaultPrevented()){return}var z=this,D=f(A.currentTarget),C=n(D,"transition"),E=n(D,"rel")||"",B=n(D,"target"),x=D.attr(b),F=l&&D[0].offsetHeight===0,y=x&&x[0]!=="#"&&this.options.serverNavigation;if(F||y||E===v||typeof x==="undefined"||x===q){return}D.attr(b,q);setTimeout(function(){D.attr(b,x)});if(E.match(g)){p.widgetInstance(f(x),o).openFor(D);if(E==="actionsheet"||E==="drawer"){A.stopPropagation()}}else{if(B==="_top"){z=e.application.pane}else{if(B){z=f("#"+B).data("kendoMobilePane")}}z.navigate(x,C)}A.preventDefault()}});t.wrap=function(x){if(!x.is(j("view"))){x=x.wrap("<div data-"+p.ns+'role="view" data-stretch="true"></div>').parent()}var y=x.wrap('<div class="km-pane-wrapper"><div></div></div>').parent(),z=new t(y);z.navigate("");return z};o.plugin(t)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.mobile.popover",["kendo.popup","kendo.mobile.pane"],a)}(function(){var a={id:"mobile.popover",name:"PopOver",category:"mobile",description:"The mobile PopOver widget represents a transient view which is displayed when the user taps on a navigational widget or area on the screen. ",depends:["popup","mobile.pane"]};(function(f,g){var n=window.kendo,e=n.mobile,m=e.ui,r="hide",s="open",d="close",i='<div class="km-popup-wrapper" />',q='<div class="km-popup-arrow" />',j='<div class="km-popup-overlay" />',p="km-up km-down km-left km-right",c=m.Widget,o={down:{origin:"bottom center",position:"top center"},up:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"}},l={animation:{open:{effects:"fade:in",duration:0},close:{effects:"fade:out",duration:400}}},k={horizontal:{offset:"top",size:"height"},vertical:{offset:"left",size:"width"}},t={up:"down",down:"up",left:"right",right:"left"};var h=c.extend({init:function(y,x){var A=this,w=y.closest(".km-modalview-wrapper"),u=y.closest(".km-root").children(".km-pane").first(),v=w[0]?w:u,B,z;if(x.viewport){u=x.viewport}else{if(!u[0]){u=window}}if(x.container){v=x.container}else{if(!v[0]){v=document.body}}B={viewport:u,copyAnchorStyles:false,autosize:true,open:function(){A.overlay.show()},activate:f.proxy(A._activate,A),deactivate:function(){A.overlay.hide();if(!A._apiCall){A.trigger(r)}A._apiCall=false}};c.fn.init.call(A,y,x);y=A.element;x=A.options;y.wrap(i).addClass("km-popup").show();z=A.options.direction.match(/left|right/)?"horizontal":"vertical";A.dimensions=k[z];A.wrapper=y.parent().css({width:x.width,height:x.height}).addClass("km-popup-wrapper km-"+x.direction).hide();A.arrow=f(q).prependTo(A.wrapper).hide();A.overlay=f(j).appendTo(v).hide();B.appendTo=A.overlay;if(x.className){A.overlay.addClass(x.className)}A.popup=new n.ui.Popup(A.wrapper,f.extend(true,B,l,o[x.direction]))},options:{name:"Popup",width:240,height:"",direction:"down",container:null,viewport:null},events:[r],show:function(u){this.popup.options.anchor=f(u);this.popup.open()},hide:function(){this._apiCall=true;this.popup.close()},destroy:function(){c.fn.destroy.call(this);this.popup.destroy();this.overlay.remove()},target:function(){return this.popup.options.anchor},_activate:function(){var B=this,E=B.options.direction,u=B.dimensions,z=u.offset,w=B.popup,A=w.options.anchor,x=f(A).offset(),v=f(w.element).offset(),G=w.flipped?t[E]:E,y=B.arrow[u.size]()*2,D=B.element[u.size]()-B.arrow[u.size](),F=f(A)[u.size](),C=x[z]-v[z]+F/2;if(C<y){C=y}if(C>D){C=D}B.wrapper.removeClass(p).addClass("km-"+G);B.arrow.css(z,C).show()}});var b=c.extend({init:function(v,u){var w=this,x;w.initialOpen=false;c.fn.init.call(w,v,u);x=f.extend({className:"km-popover-root",hide:function(){w.trigger(d)}},this.options.popup);w.popup=new h(w.element,x);w.popup.overlay.on("move",function(y){if(y.target==w.popup.overlay[0]){y.preventDefault()}});w.pane=new m.Pane(w.element,f.extend(this.options.pane,{$angular:this.options.$angular}));n.notify(w,m)},options:{name:"PopOver",popup:{},pane:{}},events:[s,d],open:function(u){this.popup.show(u);if(!this.initialOpen){if(!this.pane.navigateToInitial()){this.pane.navigate("")}this.popup.popup._position();this.initialOpen=true}else{this.pane.view()._invokeNgController()}},openFor:function(u){this.open(u);this.trigger(s,{target:this.popup.target()})},close:function(){this.popup.hide()},destroy:function(){c.fn.destroy.call(this);this.pane.destroy();this.popup.destroy();n.destroy(this.element)}});m.plugin(h);m.plugin(b)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.mobile.shim",["kendo.popup"],a)}(function(){var a={id:"mobile.shim",name:"Shim",category:"mobile",description:"Mobile Shim",depends:["popup"],hidden:true};(function(e,b){var f=window.kendo,h=f.mobile.ui,j=f.ui.Popup,c='<div class="km-shim"/>',d="hide",i=h.Widget;var g=i.extend({init:function(o,v){var q=this,l=f.mobile.application,n=f.support.mobileOS,k=l?l.os.name:n?n.name:"ios",t=k==="ios"||k==="wp"||(l?l.os.skin:false),s=k==="blackberry",r=v.align||(t?"bottom center":s?"center right":"center center"),p=v.position||(t?"bottom center":s?"center right":"center center"),u=v.effect||(t?"slideIn:up":s?"slideIn:left":"fade:in"),m=e(c).handler(q).hide();i.fn.init.call(q,o,v);q.shim=m;o=q.element;v=q.options;if(v.className){q.shim.addClass(v.className)}if(!v.modal){q.shim.on("down","_hide")}(l?l.element:e(document.body)).append(m);q.popup=new j(q.element,{anchor:m,modal:true,appendTo:m,origin:r,position:p,animation:{open:{effects:u,duration:v.duration},close:{duration:v.duration}},close:function(x){var w=false;if(!q._apiCall){w=q.trigger(d)}if(w){x.preventDefault()}q._apiCall=false},deactivate:function(){m.hide()},open:function(){m.show()}});f.notify(q)},events:[d],options:{name:"Shim",modal:false,align:b,position:b,effect:b,duration:200},show:function(){this.popup.open()},hide:function(){this._apiCall=true;this.popup.close()},destroy:function(){i.fn.destroy.call(this);this.shim.kendoDestroy();this.popup.destroy();this.shim.remove()},_hide:function(k){if(!k||!e.contains(this.shim.children().children(".k-popup")[0],k.target)){this.popup.close()}}});h.plugin(g)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.mobile.actionsheet",["kendo.mobile.popover","kendo.mobile.shim"],a)}(function(){var a={id:"mobile.actionsheet",name:"ActionSheet",category:"mobile",description:"The mobile ActionSheet widget displays a set of choices related to a task the user initiates.",depends:["mobile.popover","mobile.shim"]};(function(h,e){var k=window.kendo,q=k.support,n=k.mobile.ui,l=n.Shim,p=n.Popup,o=n.Widget,g="open",j="close",m="command",c="li>a",d="actionsheetContext",b='<div class="km-actionsheet-wrapper" />',i=k.template('<li class="km-actionsheet-cancel"><a href="\\#">#:cancel#</a></li>');var f=o.extend({init:function(t,s){var v=this,x,r,u,w=q.mobileOS;o.fn.init.call(v,t,s);s=v.options;u=s.type;t=v.element;if(u==="auto"){r=w&&w.tablet}else{r=u==="tablet"}x=r?p:l;if(s.cancelTemplate){i=k.template(s.cancelTemplate)}t.addClass("km-actionsheet").append(i({cancel:v.options.cancel})).wrap(b).on("up",c,"_click").on("click",c,k.preventDefault);v.view().bind("destroy",function(){v.destroy()});v.wrapper=t.parent().addClass(u?" km-actionsheet-"+u:"");v.shim=new x(v.wrapper,h.extend({modal:w.ios&&w.majorVersion<7,className:"km-actionsheet-root"},v.options.popup));v._closeProxy=h.proxy(v,"_close");v._shimHideProxy=h.proxy(v,"_shimHide");v.shim.bind("hide",v._shimHideProxy);if(r){k.onResize(v._closeProxy)}k.notify(v,n)},events:[g,j,m],options:{name:"ActionSheet",cancel:"Cancel",type:"auto",popup:{height:"auto"}},open:function(t,r){var s=this;s.target=h(t);s.context=r;s.shim.show(t)},close:function(){this.context=this.target=null;this.shim.hide()},openFor:function(t){var s=this,r=t.data(d);s.open(t,r);s.trigger(g,{target:t,context:r})},destroy:function(){o.fn.destroy.call(this);k.unbindResize(this._closeProxy);this.shim.destroy()},_click:function(v){if(v.isDefaultPrevented()){return}var u=h(v.currentTarget);var t=u.data("action");if(t){var s={target:this.target,context:this.context},r=this.options.$angular;if(r){this.element.injector().get("$parse")(t)(r[0])(s)}else{k.getter(t)(window)(s)}}this.trigger(m,{target:this.target,context:this.context,currentTarget:u});v.preventDefault();this._close()},_shimHide:function(r){if(!this.trigger(j)){this.context=this.target=null}else{r.preventDefault()}},_close:function(r){if(!this.trigger(j)){this.close()}else{r.preventDefault()}}});n.plugin(f)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.progressbar",["kendo.core"],a)}(function(){var a={id:"progressbar",name:"ProgressBar",category:"web",description:"The ProgressBar offers rich functionality for displaying and tracking progress",depends:["core"]};(function(j,m){var w=window.kendo,v=w.ui,e=v.Widget,G="horizontal",z="vertical",l=0,o=100,D=0,i=5,c="k-progressbar",d="k-progressbar-reverse",F="k-progressbar-indeterminate",q="k-complete",p="k-state-selected",n="k-progress-status",E="k-state-selected",h="k-state-default",y="k-state-disabled",u={VALUE:"value",PERCENT:"percent",CHUNK:"chunk"},s="change",x="complete",r="boolean",g=Math,B=j.extend,A=j.proxy,b=100,C=400,t=3,f={progressStatus:"<span class='k-progress-status-wrap'><span class='k-progress-status'></span></span>"};var k=e.extend({init:function(I,H){var J=this;e.fn.init.call(this,I,H);H=J.options;J._progressProperty=H.orientation===G?"width":"height";J._fields();H.value=J._validateValue(H.value);J._validateType(H.type);J._wrapper();J._progressAnimation();if(H.value!==H.min&&H.value!==false){J._updateProgress()}},setOptions:function(H){var I=this;e.fn.setOptions.call(I,H);if(H.hasOwnProperty("reverse")){I.wrapper.toggleClass("k-progressbar-reverse",H.reverse)}if(H.hasOwnProperty("enable")){I.enable(H.enable)}I._progressAnimation();I._validateValue();I._updateProgress()},events:[s,x],options:{name:"ProgressBar",orientation:G,reverse:false,min:l,max:o,value:D,enable:true,type:u.VALUE,chunkCount:i,showStatus:true,animation:{}},_fields:function(){var H=this;H._isStarted=false;H.progressWrapper=H.progressStatus=j()},_validateType:function(H){var I=false;j.each(u,function(J,K){if(K===H){I=true;return false}});if(!I){throw new Error(w.format("Invalid ProgressBar type '{0}'",H))}},_wrapper:function(){var K=this;var H=K.wrapper=K.element;var J=K.options;var I=J.orientation;var L;H.addClass("k-widget "+c);H.addClass(c+"-"+(I===G?G:z));if(J.enable===false){H.addClass(y)}if(J.reverse){H.addClass(d)}if(J.value===false){H.addClass(F)}if(J.type===u.CHUNK){K._addChunkProgressWrapper()}else{if(J.showStatus){K.progressStatus=K.wrapper.prepend(f.progressStatus).find("."+n);L=J.value!==false?J.value:J.min;if(J.type===u.VALUE){K.progressStatus.text(L)}else{K.progressStatus.text(K._calculatePercentage(L).toFixed()+"%")}}}},value:function(H){return this._value(H)},_value:function(J){var I=this;var H=I.options;var K;if(J===m){return H.value}else{if(typeof J!==r){J=I._roundValue(J);if(!isNaN(J)){K=I._validateValue(J);if(K!==H.value){I.wrapper.removeClass(F);H.value=K;I._isStarted=true;I._updateProgress()}}}else{if(!J){I.wrapper.addClass(F);H.value=false}}}},_roundValue:function(I){I=parseFloat(I);var H=g.pow(10,t);return g.floor(I*H)/H},_validateValue:function(J){var I=this;var H=I.options;if(J!==false){if(J<=H.min||J===true){return H.min}else{if(J>=H.max){return H.max}}}else{if(J===false){return false}}if(isNaN(I._roundValue(J))){return H.min}return J},_updateProgress:function(){var J=this;var I=J.options;var H=J._calculatePercentage();if(I.type===u.CHUNK){J._updateChunks(H);J._onProgressUpdateAlways(I.value)}else{J._updateProgressWrapper(H)}},_updateChunks:function(H){var K=this;var I=K.options;var N=I.chunkCount;var M=parseInt(b/N*100,10)/100;var O=parseInt(H*100,10)/100;var L=g.floor(O/M);var J;if(I.orientation===G&&!I.reverse||I.orientation===z&&I.reverse){J=K.wrapper.find("li.k-item:lt("+L+")")}else{J=K.wrapper.find("li.k-item:gt(-"+(L+1)+")")}K.wrapper.find("."+E).removeClass(E).addClass(h);J.removeClass(h).addClass(E)},_updateProgressWrapper:function(H){var J=this;var I=J.options;var M=J.wrapper.find("."+p);var L=J._isStarted?J._animation.duration:0;var K={};if(M.length===0){J._addRegularProgressWrapper()}K[J._progressProperty]=H+"%";J.progressWrapper.animate(K,{duration:L,start:A(J._onProgressAnimateStart,J),progress:A(J._onProgressAnimate,J),complete:A(J._onProgressAnimateComplete,J,I.value),always:A(J._onProgressUpdateAlways,J,I.value)})},_onProgressAnimateStart:function(){this.progressWrapper.show()},_onProgressAnimate:function(L){var K=this;var J=K.options;var I=parseFloat(L.elem.style[K._progressProperty],10);var H;if(J.showStatus){H=10000/parseFloat(K.progressWrapper[0].style[K._progressProperty]);K.progressWrapper.find(".k-progress-status-wrap").css(K._progressProperty,H+"%")}if(J.type!==u.CHUNK&&I<=98){K.progressWrapper.removeClass(q)}},_onProgressAnimateComplete:function(J){var K=this;var H=K.options;var L=parseFloat(K.progressWrapper[0].style[K._progressProperty]);var I;if(H.type!==u.CHUNK&&L>98){K.progressWrapper.addClass(q)}if(H.showStatus){if(H.type===u.VALUE){I=J}else{if(H.type==u.PERCENT){I=K._calculatePercentage(J).toFixed()+"%"}else{I=g.floor(K._calculatePercentage(J))+"%"}}K.progressStatus.text(I)}if(J===H.min){K.progressWrapper.hide()}},_onProgressUpdateAlways:function(I){var J=this;var H=J.options;if(J._isStarted){J.trigger(s,{value:I})}if(I===H.max&&J._isStarted){J.trigger(x,{value:H.max})}},enable:function(I){var J=this;var H=J.options;H.enable=typeof I==="undefined"?true:I;J.wrapper.toggleClass(y,!H.enable)},destroy:function(){var H=this;e.fn.destroy.call(H)},_addChunkProgressWrapper:function(){var L=this;var I=L.options;var H=L.wrapper;var M=b/I.chunkCount;var K="";if(I.chunkCount<=1){I.chunkCount=1}K+="<ul class='k-reset'>";for(var J=I.chunkCount-1;J>=0;J--){K+="<li class='k-item k-state-default'></li>"}K+="</ul>";H.append(K).find(".k-item").css(L._progressProperty,M+"%").first().addClass("k-first").end().last().addClass("k-last");L._normalizeChunkSize()},_normalizeChunkSize:function(){var J=this;var I=J.options;var L=J.wrapper.find(".k-item:last");var H=parseFloat(L[0].style[J._progressProperty]);var K=b-I.chunkCount*H;if(K>0){L.css(J._progressProperty,H+K+"%")}},_addRegularProgressWrapper:function(){var H=this;H.progressWrapper=j("<div class='"+p+"'></div>").appendTo(H.wrapper);if(H.options.showStatus){H.progressWrapper.append(f.progressStatus);H.progressStatus=H.wrapper.find("."+n)}},_calculateChunkSize:function(){var I=this;var J=I.options.chunkCount;var H=I.wrapper.find("ul.k-reset");return(parseInt(H.css(I._progressProperty),10)-(J-1))/J},_calculatePercentage:function(K){var L=this;var I=L.options;var M=K!==m?K:I.value;var J=I.min;var H=I.max;L._onePercent=g.abs((H-J)/100);return g.abs((M-J)/L._onePercent)},_progressAnimation:function(){var I=this;var H=I.options;var J=H.animation;if(J===false){I._animation={duration:0}}else{I._animation=B({duration:C},H.animation)}}});w.ui.plugin(k)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("pdf/core",["kendo.core","kendo.color","kendo.drawing"],a)}(function(){(function(y){window.kendo.pdf=window.kendo.pdf||{};var a4=y.support;var a8=a4.browser;var q=y.drawing;var aP=q.util;var ae=y.geometry;var z=typeof Uint8Array!=="undefined";var m=function(){var bh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{decode:function(bl){var bm=bl.replace(/[^A-Za-z0-9\+\/\=]/g,""),bk=0,bi=bm.length,bj=[];while(bk<bi){var bt=bh.indexOf(bm.charAt(bk++));var br=bh.indexOf(bm.charAt(bk++));var bp=bh.indexOf(bm.charAt(bk++));var bn=bh.indexOf(bm.charAt(bk++));var bs=bt<<2|br>>>4;var bq=(br&15)<<4|bp>>>2;var bo=(bp&3)<<6|bn;bj.push(bs);if(bp!=64){bj.push(bq)}if(bn!=64){bj.push(bo)}}return bj},encode:function(bs){var bk=0,bi=bs.length;var bj="";while(bk<bi){var br=bs[bk++];var bp=bs[bk++];var bn=bs[bk++];var bq=br>>>2;var bo=(br&3)<<4|bp>>>4;var bm=(bp&15)<<2|bn>>>6;var bl=bn&63;if(bk-bi==2){bm=bl=64}else{if(bk-bi==1){bl=64}}bj+=bh.charAt(bq)+bh.charAt(bo)+bh.charAt(bm)+bh.charAt(bl)}return bj}}}();function f(bH){var bq=0,bo=0;if(bH==null){bH=z?new Uint8Array(256):[]}else{bo=bH.length}var by=z?function(bI){if(bI>=bH.length){var bJ=new Uint8Array(Math.max(bI+256,bH.length*2));bJ.set(bH,0);bH=bJ}}:function(){};var bF=z?function(){return new Uint8Array(bH.buffer,0,bo)}:function(){return bH};var bE=z?function(bJ){if(typeof bJ=="string"){return bA(bJ)}var bI=bJ.length;by(bq+bI);bH.set(bJ,bq);bq+=bI;if(bq>bo){bo=bq}}:function(bI){if(typeof bI=="string"){return bA(bI)}for(var bJ=0;bJ<bI.length;++bJ){bv(bI[bJ])}};var bx=z?function(bK,bJ){if(bH.buffer.slice){return new Uint8Array(bH.buffer.slice(bK,bK+bJ))}else{var bI=new Uint8Array(bJ);bI.set(new Uint8Array(bH.buffer,bK,bJ));return bI}}:function(bJ,bI){return bH.slice(bJ,bJ+bI)};function bt(){return bq>=bo}function bi(){return bq<bo?bH[bq++]:0}function bv(bI){by(bq);bH[bq++]=bI&255;if(bq>bo){bo=bq}}function bm(){return bi()<<8|bi()}function bC(bI){bv(bI>>8);bv(bI)}function bu(){var bI=bm();return bI>=32768?bI-65536:bI}function bj(bI){bC(bI<0?bI+65536:bI)}function bG(){return bm()*65536+bm()}function br(bI){bC(bI>>>16&65535);bC(bI&65535)}function bh(){var bI=bG();return bI>=2147483648?bI-4294967296:bI}function bw(bI){br(bI<0?bI+4294967296:bI)}function bn(){return bG()/65536}function bD(bI){br(Math.round(bI*65536))}function bl(){return bh()/65536}function bB(bI){bw(Math.round(bI*65536))}function bz(bI){return bs(bI,bi)}function bk(bI){return String.fromCharCode.apply(String,bz(bI))}function bA(bJ){for(var bI=0;bI<bJ.length;++bI){bv(bJ.charCodeAt(bI))}}function bs(bL,bI){for(var bJ=new Array(bL),bK=0;bK<bL;++bK){bJ[bK]=bI()}return bJ}var bp={eof:bt,readByte:bi,writeByte:bv,readShort:bm,writeShort:bC,readLong:bG,writeLong:br,readFixed:bn,writeFixed:bD,readShort_:bu,writeShort_:bj,readLong_:bh,writeLong_:bw,readFixed_:bl,writeFixed_:bB,read:bz,write:bE,readString:bk,writeString:bA,times:bs,get:bF,slice:bx,offset:function(bI){if(bI!=null){bq=bI;return bp}return bq},skip:function(bI){bq+=bI},toString:function(){throw new Error("FIX CALLER.  BinaryStream is no longer convertible to string!")},length:function(){return bo},saveExcursion:function(bI){var bJ=bq;try{return bI()}finally{bq=bJ}},writeBase64:function(bI){if(window.atob){bA(window.atob(bI))}else{bE(m.decode(bI))}},base64:function(){return m.encode(bF())}};return bp}function a5(bk){var bj=[],bi=0,bl=bk.length,bm,bh;while(bi<bl){bm=bk.charCodeAt(bi++);if(bm>=55296&&bm<=56319&&bi<bl){bh=bk.charCodeAt(bi++);if((bh&64512)==56320){bj.push(((bm&1023)<<10)+(bh&1023)+65536)}else{bj.push(bm);bi--}}else{bj.push(bm)}}return bj}function P(bh){return bh.map(function(bj){var bi="";if(bj>65535){bj-=65536;bi+=String.fromCharCode(bj>>>10&1023|55296);bj=56320|bj&1023}bi+=String.fromCharCode(bj);return bi}).join("")}function M(bi,bh){return Object.prototype.hasOwnProperty.call(bi,bh)}function aV(bh){return Object.keys(bh).sort(function(bj,bi){return bj-bi}).map(parseFloat)}function g(bk){this.raw=bk;this.scalerType=bk.readLong();this.tableCount=bk.readShort();this.searchRange=bk.readShort();this.entrySelector=bk.readShort();this.rangeShift=bk.readShort();var bi=this.tables={};for(var bh=0;bh<this.tableCount;++bh){var bj={tag:bk.readString(4),checksum:bk.readLong(),offset:bk.readLong(),length:bk.readLong()};bi[bj.tag]=bj}}g.prototype={readTable:function(bi,bh){var bj=this.tables[bi];if(!bj){throw new Error("Table "+bi+" not found in directory")}return this[bi]=bj.table=new bh(this,bj)},render:function(bs){var bl=this;var bw=Object.keys(bs).length;var bq=Math.pow(2,Math.floor(Math.log(bw)/Math.LN2));var bo=bq*16;var bh=Math.floor(Math.log(bq)/Math.LN2);var bu=bw*16-bo;var bk=f();bk.writeLong(this.scalerType);bk.writeShort(bw);bk.writeShort(bo);bk.writeShort(bh);bk.writeShort(bu);var bm=bw*16;var bj=bk.offset()+bm;var bp=null;var bi=f();for(var bv in bs){if(M(bs,bv)){var bt=bs[bv];bk.writeString(bv);bk.writeLong(bl.checksum(bt));bk.writeLong(bj);bk.writeLong(bt.length);bi.write(bt);if(bv=="head"){bp=bj}bj+=bt.length;while(bj%4){bi.writeByte(0);bj++}}}bk.write(bi.get());var bn=this.checksum(bk.get());var br=2981146554-bn;bk.offset(bp+8);bk.writeLong(br);return bk.get()},checksum:function(bi){bi=f(bi);var bh=0;while(!bi.eof()){bh+=bi.readLong()}return bh&4294967295}};function k(bh){function bi(bk,bl){this.definition=bl;this.length=bl.length;this.offset=bl.offset;this.file=bk;this.rawData=bk.raw;this.parse(bk.raw)}bi.prototype.raw=function(){return this.rawData.slice(this.offset,this.length)};for(var bj in bh){if(M(bh,bj)){bi[bj]=bi.prototype[bj]=bh[bj]}}return bi}var aL=k({parse:function(bh){bh.offset(this.offset);this.version=bh.readLong();this.revision=bh.readLong();this.checkSumAdjustment=bh.readLong();this.magicNumber=bh.readLong();this.flags=bh.readShort();this.unitsPerEm=bh.readShort();this.created=bh.read(8);this.modified=bh.read(8);this.xMin=bh.readShort_();this.yMin=bh.readShort_();this.xMax=bh.readShort_();this.yMax=bh.readShort_();this.macStyle=bh.readShort();this.lowestRecPPEM=bh.readShort();this.fontDirectionHint=bh.readShort_();this.indexToLocFormat=bh.readShort_();this.glyphDataFormat=bh.readShort_()},render:function(bi){var bh=f();bh.writeLong(this.version);bh.writeLong(this.revision);bh.writeLong(0);bh.writeLong(this.magicNumber);bh.writeShort(this.flags);bh.writeShort(this.unitsPerEm);bh.write(this.created);bh.write(this.modified);bh.writeShort_(this.xMin);bh.writeShort_(this.yMin);bh.writeShort_(this.xMax);bh.writeShort_(this.yMax);bh.writeShort(this.macStyle);bh.writeShort(this.lowestRecPPEM);bh.writeShort_(this.fontDirectionHint);bh.writeShort_(bi);bh.writeShort_(this.glyphDataFormat);return bh.get()}});var W=k({parse:function(bh){bh.offset(this.offset);var bi=this.file.head.indexToLocFormat;if(bi===0){this.offsets=bh.times(this.length/2,function(){return 2*bh.readShort()})}else{this.offsets=bh.times(this.length/4,bh.readLong)}},offsetOf:function(bh){return this.offsets[bh]},lengthOf:function(bh){return this.offsets[bh+1]-this.offsets[bh]},render:function(bj){var bh=f();var bk=bj[bj.length-1]>65535;for(var bi=0;bi<bj.length;++bi){if(bk){bh.writeLong(bj[bi])}else{bh.writeShort(bj[bi]/2)}}return{format:bk?1:0,table:bh.get()}}});var a=k({parse:function(bh){bh.offset(this.offset);this.version=bh.readLong();this.ascent=bh.readShort_();this.descent=bh.readShort_();this.lineGap=bh.readShort_();this.advanceWidthMax=bh.readShort();this.minLeftSideBearing=bh.readShort_();this.minRightSideBearing=bh.readShort_();this.xMaxExtent=bh.readShort_();this.caretSlopeRise=bh.readShort_();this.caretSlopeRun=bh.readShort_();this.caretOffset=bh.readShort_();bh.skip(4*2);this.metricDataFormat=bh.readShort_();this.numOfLongHorMetrics=bh.readShort()},render:function(bi){var bh=f();bh.writeLong(this.version);bh.writeShort_(this.ascent);bh.writeShort_(this.descent);bh.writeShort_(this.lineGap);bh.writeShort(this.advanceWidthMax);bh.writeShort_(this.minLeftSideBearing);bh.writeShort_(this.minRightSideBearing);bh.writeShort_(this.xMaxExtent);bh.writeShort_(this.caretSlopeRise);bh.writeShort_(this.caretSlopeRun);bh.writeShort_(this.caretOffset);bh.write([0,0,0,0,0,0,0,0]);bh.writeShort_(this.metricDataFormat);bh.writeShort(bi.length);return bh.get()}});var a7=k({parse:function(bh){bh.offset(this.offset);this.version=bh.readLong();this.numGlyphs=bh.readShort();this.maxPoints=bh.readShort();this.maxContours=bh.readShort();this.maxComponentPoints=bh.readShort();this.maxComponentContours=bh.readShort();this.maxZones=bh.readShort();this.maxTwilightPoints=bh.readShort();this.maxStorage=bh.readShort();this.maxFunctionDefs=bh.readShort();this.maxInstructionDefs=bh.readShort();this.maxStackElements=bh.readShort();this.maxSizeOfInstructions=bh.readShort();this.maxComponentElements=bh.readShort();this.maxComponentDepth=bh.readShort()},render:function(bh){var bi=f();bi.writeLong(this.version);bi.writeShort(bh.length);bi.writeShort(this.maxPoints);bi.writeShort(this.maxContours);bi.writeShort(this.maxComponentPoints);bi.writeShort(this.maxComponentContours);bi.writeShort(this.maxZones);bi.writeShort(this.maxTwilightPoints);bi.writeShort(this.maxStorage);bi.writeShort(this.maxFunctionDefs);bi.writeShort(this.maxInstructionDefs);bi.writeShort(this.maxStackElements);bi.writeShort(this.maxSizeOfInstructions);bi.writeShort(this.maxComponentElements);bi.writeShort(this.maxComponentDepth);return bi.get()}});var v=k({parse:function(bk){bk.offset(this.offset);var bj=this.file,bi=bj.hhea;this.metrics=bk.times(bi.numOfLongHorMetrics,function(){return{advance:bk.readShort(),lsb:bk.readShort_()}});var bh=bj.maxp.numGlyphs-bj.hhea.numOfLongHorMetrics;this.leftSideBearings=bk.times(bh,bk.readShort_)},forGlyph:function(bj){var bh=this.metrics;var bi=bh.length;if(bj<bi){return bh[bj]}return{advance:bh[bi-1].advance,lsb:this.leftSideBearings[bj-bi]}},render:function(bi){var bl=this;var bj=f();for(var bk=0;bk<bi.length;++bk){var bh=bl.forGlyph(bi[bk]);bj.writeShort(bh.advance);bj.writeShort_(bh.lsb)}return bj.get()}});var ai=function(){function bi(bo){this.raw=bo}bi.prototype={compound:false,render:function(){return this.raw.get()}};var bn=1;var bl=8;var bh=32;var bk=64;var bj=128;function bm(br){this.raw=br;var bp=this.glyphIds=[];var bq=this.idOffsets=[];while(true){var bo=br.readShort();bq.push(br.offset());bp.push(br.readShort());if(!(bo&bh)){break}br.skip(bo&bn?4:2);if(bo&bj){br.skip(8)}else{if(bo&bk){br.skip(4)}else{if(bo&bl){br.skip(2)}}}}}bm.prototype={compound:true,render:function(bp){var bs=this;var bo=f(this.raw.get());for(var bq=0;bq<this.glyphIds.length;++bq){var br=bs.glyphIds[bq];bo.offset(bs.idOffsets[bq]);bo.writeShort(bp[br])}return bo.get()}};return k({parse:function(){this.cache={}},glyphFor:function(bq){var bo=this.cache;if(M(bo,bq)){return bo[bq]}var bu=this.file.loca;var br=bu.lengthOf(bq);if(br===0){return bo[bq]=null}var bw=this.rawData;var bv=this.offset+bu.offsetOf(bq);var bA=f(bw.slice(bv,br));var bs=bA.readShort_();var bp=bA.readShort_();var bz=bA.readShort_();var bx=bA.readShort_();var bt=bA.readShort_();var by=bo[bq]=bs==-1?new bm(bA):new bi(bA);by.numberOfContours=bs;by.xMin=bp;by.yMin=bz;by.xMax=bx;by.yMax=bt;return by},render:function(br,bu,bp){var bo=f(),bt=[];for(var bq=0;bq<bu.length;++bq){var bv=bu[bq];var bs=br[bv];bt.push(bo.offset());if(bs){bo.write(bs.render(bp))}}bt.push(bo.offset());return{table:bo.get(),offsets:bt}}})}();var az=function(){function bh(bj,bi){this.text=bj;this.length=bj.length;this.platformID=bi.platformID;this.platformSpecificID=bi.platformSpecificID;this.languageID=bi.languageID;this.nameID=bi.nameID}return k({parse:function(bn){bn.offset(this.offset);bn.readShort();var bm=bn.readShort();var bl=this.offset+bn.readShort();var bj=bn.times(bm,function(){return{platformID:bn.readShort(),platformSpecificID:bn.readShort(),languageID:bn.readShort(),nameID:bn.readShort(),length:bn.readShort(),offset:bn.readShort()+bl}});var bi=this.strings={};for(var bk=0;bk<bj.length;++bk){var bp=bj[bk];bn.offset(bp.offset);var bo=bn.readString(bp.length);if(!bi[bp.nameID]){bi[bp.nameID]=[]}bi[bp.nameID].push(new bh(bo,bp))}this.postscriptEntry=bi[6][0];this.postscriptName=this.postscriptEntry.text.replace(/[^\x20-\x7F]/g,"")},render:function(bp){var bl=this;var bq=this.strings;var bm=0;for(var bk in bq){if(M(bq,bk)){bm+=bq[bk].length}}var bj=f();var br=f();bj.writeShort(0);bj.writeShort(bm);bj.writeShort(6+12*bm);for(bk in bq){if(M(bq,bk)){var bn=bk==6?[new bh(bp,bl.postscriptEntry)]:bq[bk];for(var bi=0;bi<bn.length;++bi){var bo=bn[bi];bj.writeShort(bo.platformID);bj.writeShort(bo.platformSpecificID);bj.writeShort(bo.languageID);bj.writeShort(bo.nameID);bj.writeShort(bo.length);bj.writeShort(br.offset());br.writeString(bo.text)}}}bj.write(br.get());return bj.get()}})}();var X=function(){var bh=".notdef .null nonmarkingreturn space exclam quotedbl numbersign dollar percent ampersand quotesingle parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore grave a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde Adieresis Aring Ccedilla Eacute Ntilde Odieresis Udieresis aacute agrave acircumflex adieresis atilde aring ccedilla eacute egrave ecircumflex edieresis iacute igrave icircumflex idieresis ntilde oacute ograve ocircumflex odieresis otilde uacute ugrave ucircumflex udieresis dagger degree cent sterling section bullet paragraph germandbls registered copyright trademark acute dieresis notequal AE Oslash infinity plusminus lessequal greaterequal yen mu partialdiff summation product pi integral ordfeminine ordmasculine Omega ae oslash questiondown exclamdown logicalnot radical florin approxequal Delta guillemotleft guillemotright ellipsis nonbreakingspace Agrave Atilde Otilde OE oe endash emdash quotedblleft quotedblright quoteleft quoteright divide lozenge ydieresis Ydieresis fraction currency guilsinglleft guilsinglright fi fl daggerdbl periodcentered quotesinglbase quotedblbase perthousand Acircumflex Ecircumflex Aacute Edieresis Egrave Iacute Icircumflex Idieresis Igrave Oacute Ocircumflex apple Ograve Uacute Ucircumflex Ugrave dotlessi circumflex tilde macron breve dotaccent ring cedilla hungarumlaut ogonek caron Lslash lslash Scaron scaron Zcaron zcaron brokenbar Eth eth Yacute yacute Thorn thorn minus multiply onesuperior twosuperior threesuperior onehalf onequarter threequarters franc Gbreve gbreve Idotaccent Scedilla scedilla Cacute cacute Ccaron ccaron dcroat".split(/\s+/g);return k({parse:function(bk){var bl=this;bk.offset(this.offset);this.format=bk.readLong();this.italicAngle=bk.readFixed_();this.underlinePosition=bk.readShort_();this.underlineThickness=bk.readShort_();this.isFixedPitch=bk.readLong();this.minMemType42=bk.readLong();this.maxMemType42=bk.readLong();this.minMemType1=bk.readLong();this.maxMemType1=bk.readLong();var bj;switch(this.format){case 65536:case 196608:break;case 131072:bj=bk.readShort();this.glyphNameIndex=bk.times(bj,bk.readShort);this.names=[];var bi=this.offset+this.length;while(bk.offset()<bi){bl.names.push(bk.readString(bk.readByte()))}break;case 151552:bj=bk.readShort();this.offsets=bk.read(bj);break;case 262144:this.map=bk.times(this.file.maxp.numGlyphs,bk.readShort);break}},glyphFor:function(bj){switch(this.format){case 65536:return bh[bj]||".notdef";case 131072:var bi=this.glyphNameIndex[bj];if(bi<bh.length){return bh[bi]}return this.names[bi-bh.length]||".notdef";case 151552:case 196608:return".notdef";case 262144:return this.map[bj]||65535}},render:function(bi){var bm=this;if(this.format==196608){return this.raw()}var bk=f(this.rawData.slice(this.offset,32));bk.writeLong(131072);bk.offset(32);var bn=[];var bq=[];for(var bl=0;bl<bi.length;++bl){var bj=bi[bl];var bp=bm.glyphFor(bj);var bo=bh.indexOf(bp);if(bo>=0){bn.push(bo)}else{bn.push(bh.length+bq.length);bq.push(bp)}}bk.writeShort(bi.length);for(bl=0;bl<bn.length;++bl){bk.writeShort(bn[bl])}for(bl=0;bl<bq.length;++bl){bk.writeByte(bq[bl].length);bk.writeString(bq[bl])}return bk.get()}})}();var e=function(){function bh(bk,bl,bm){var bj=this;bj.platformID=bk.readShort();bj.platformSpecificID=bk.readShort();bj.offset=bl+bk.readLong();bk.saveExcursion(function(){var bq;bk.offset(bj.offset);bj.format=bk.readShort();switch(bj.format){case 0:bj.length=bk.readShort();bj.language=bk.readShort();for(var bx=0;bx<256;++bx){bm[bx]=bk.readByte()}break;case 4:bj.length=bk.readShort();bj.language=bk.readShort();var bo=bk.readShort()/2;bk.skip(6);var bw=bk.times(bo,bk.readShort);bk.skip(2);var bn=bk.times(bo,bk.readShort);var bs=bk.times(bo,bk.readShort_);var bD=bk.times(bo,bk.readShort);var bz=(bj.length+bj.offset-bk.offset())/2;var bv=bk.times(bz,bk.readShort);for(bx=0;bx<bo;++bx){var bp=bn[bx],bu=bw[bx];for(bq=bp;bq<=bu;++bq){var bt;if(bD[bx]===0){bt=bq+bs[bx]}else{var by=bD[bx]/2-(bo-bx)+(bq-bp);bt=bv[by]||0;if(bt!==0){bt+=bs[bx]}}bm[bq]=bt&65535}}break;case 6:bj.length=bk.readShort();bj.language=bk.readShort();bq=bk.readShort();var br=bk.readShort();while(br-->0){bm[bq++]=bk.readShort()}break;case 12:bk.readShort();bj.length=bk.readLong();bj.language=bk.readLong();var bC=bk.readLong();while(bC-->0){bq=bk.readLong();var bB=bk.readLong();var bA=bk.readLong();while(bq<=bB){bm[bq++]=bA++}}break;default:if(window.console){window.console.error("Unhandled CMAP format: "+bj.format)}}})}function bi(bA,bw){var bD=aV(bA);var bC=[];var bx=[];var bq=null;var bt=null;function bG(bI){return bw[bA[bI]]}for(var bB=0;bB<bD.length;++bB){var bj=bD[bB];var bv=bG(bj);var bE=bv-bj;if(bq==null||bE!==bt){if(bq){bx.push(bq)}bC.push(bj);bt=bE}bq=bj}if(bq){bx.push(bq)}bx.push(65535);bC.push(65535);var bl=bC.length;var bH=bl*2;var bk=2*Math.pow(2,Math.floor(Math.log(bl)/Math.LN2));var bu=Math.log(bk/2)/Math.LN2;var bs=bH-bk;var bo=[];var bm=[];var br=[];for(bB=0;bB<bl;++bB){var bn=bC[bB];var bF=bx[bB];if(bn==65535){bo.push(0);bm.push(0);break}var bp=bG(bn);if(bn-bp>=32768){bo.push(0);bm.push(2*(br.length+bl-bB));for(var by=bn;by<=bF;++by){br.push(bG(by))}}else{bo.push(bp-bn);bm.push(0)}}var bz=f();bz.writeShort(3);bz.writeShort(1);bz.writeLong(12);bz.writeShort(4);bz.writeShort(16+bl*8+br.length*2);bz.writeShort(0);bz.writeShort(bH);bz.writeShort(bk);bz.writeShort(bu);bz.writeShort(bs);bx.forEach(bz.writeShort);bz.writeShort(0);bC.forEach(bz.writeShort);bo.forEach(bz.writeShort_);bm.forEach(bz.writeShort);br.forEach(bz.writeShort);return bz.get()}return k({parse:function(bl){var bk=this;var bm=bk.offset;bl.offset(bm);bk.codeMap={};bk.version=bl.readShort();var bj=bl.readShort();bk.tables=bl.times(bj,function(){return new bh(bl,bm,bk.codeMap)})},render:function(bl,bk){var bj=f();bj.writeShort(0);bj.writeShort(1);bj.write(bi(bl,bk));return bj.get()}})}();var T=k({parse:function(bh){bh.offset(this.offset);this.version=bh.readShort();this.averageCharWidth=bh.readShort_();this.weightClass=bh.readShort();this.widthClass=bh.readShort();this.type=bh.readShort();this.ySubscriptXSize=bh.readShort_();this.ySubscriptYSize=bh.readShort_();this.ySubscriptXOffset=bh.readShort_();this.ySubscriptYOffset=bh.readShort_();this.ySuperscriptXSize=bh.readShort_();this.ySuperscriptYSize=bh.readShort_();this.ySuperscriptXOffset=bh.readShort_();this.ySuperscriptYOffset=bh.readShort_();this.yStrikeoutSize=bh.readShort_();this.yStrikeoutPosition=bh.readShort_();this.familyClass=bh.readShort_();this.panose=bh.times(10,bh.readByte);this.charRange=bh.times(4,bh.readLong);this.vendorID=bh.readString(4);this.selection=bh.readShort();this.firstCharIndex=bh.readShort();this.lastCharIndex=bh.readShort();if(this.version>0){this.ascent=bh.readShort_();this.descent=bh.readShort_();this.lineGap=bh.readShort_();this.winAscent=bh.readShort();this.winDescent=bh.readShort();this.codePageRange=bh.times(2,bh.readLong);if(this.version>1){this.xHeight=bh.readShort();this.capHeight=bh.readShort();this.defaultChar=bh.readShort();this.breakChar=bh.readShort();this.maxContext=bh.readShort()}}},render:function(){return this.raw()}});var bg=100000;function N(){var bh="",bj=String(bg);for(var bi=0;bi<bj.length;++bi){bh+=String.fromCharCode(bj.charCodeAt(bi)-48+65)}++bg;return bh}function aF(bh){this.font=bh;this.subset={};this.unicodes={};this.ogid2ngid={0:0};this.ngid2ogid={0:0};this.ncid2ogid={};this.next=this.firstChar=1;this.nextGid=1;this.psName=N()+"+"+this.font.psName}aF.prototype={use:function(bj){var bi=this;if(typeof bj=="string"){return a5(bj).reduce(function(bm,bn){return bm+String.fromCharCode(bi.use(bn))},"")}var bk=bi.unicodes[bj];if(!bk){bk=bi.next++;bi.subset[bk]=bj;bi.unicodes[bj]=bk;var bh=bi.font.cmap.codeMap[bj];if(bh){bi.ncid2ogid[bk]=bh;if(bi.ogid2ngid[bh]==null){var bl=bi.nextGid++;bi.ogid2ngid[bh]=bl;bi.ngid2ogid[bl]=bh}}}return bk},encodeText:function(bh){return this.use(bh)},glyphIds:function(){return aV(this.ogid2ngid)},glyphsFor:function(bi,bh){var bm=this;if(!bh){bh={}}for(var bj=0;bj<bi.length;++bj){var bl=bi[bj];if(!bh[bl]){var bk=bh[bl]=bm.font.glyf.glyphFor(bl);if(bk&&bk.compound){bm.glyphsFor(bk.glyphIds,bh)}}}return bh},render:function(){var bm=this;var bo=this.glyphsFor(this.glyphIds());for(var bl in bo){if(M(bo,bl)){bl=parseInt(bl,10);if(bm.ogid2ngid[bl]==null){var bq=bm.nextGid++;bm.ogid2ngid[bl]=bq;bm.ngid2ogid[bq]=bl}}}var bn=aV(this.ngid2ogid);var bj=bn.map(function(br){return this.ngid2ogid[br]},this);var bi=this.font;var bh=bi.glyf.render(bo,bj,this.ogid2ngid);var bk=bi.loca.render(bh.offsets);this.lastChar=this.next-1;var bp={cmap:e.render(this.ncid2ogid,this.ogid2ngid),glyf:bh.table,loca:bk.table,hmtx:bi.hmtx.render(bj),hhea:bi.hhea.render(bj),maxp:bi.maxp.render(bj),post:bi.post.render(bj),name:bi.name.render(this.psName),head:bi.head.render(bk.format),"OS/2":bi.os2.render()};return this.font.directory.render(bp)},cidToGidMap:function(){var bm=this;var bj=f(),bi=0;for(var bl=this.firstChar;bl<this.next;++bl){while(bi<bl){bj.writeShort(0);bi++}var bh=bm.ncid2ogid[bl];if(bh){var bk=bm.ogid2ngid[bh];bj.writeShort(bk)}else{bj.writeShort(0)}bi++}return bj.get()}};function aW(bo,bj){var bi=this;var bl=bi.contents=f(bo);if(bl.readString(4)=="ttcf"){var bn;var bm=function(){bl.offset(bn);bi.parse()};if(!bj){throw new Error("Must specify a name for TTC files")}bl.readLong();var bh=bl.readLong();for(var bk=0;bk<bh;++bk){bn=bl.readLong();bl.saveExcursion(bm);if(bi.psName==bj){return}}throw new Error("Font "+bj+" not found in collection")}else{bl.offset(0);bi.parse()}}aW.prototype={parse:function(){var bh=this.directory=new g(this.contents);this.head=bh.readTable("head",aL);this.loca=bh.readTable("loca",W);this.hhea=bh.readTable("hhea",a);this.maxp=bh.readTable("maxp",a7);this.hmtx=bh.readTable("hmtx",v);this.glyf=bh.readTable("glyf",ai);this.name=bh.readTable("name",az);this.post=bh.readTable("post",X);this.cmap=bh.readTable("cmap",e);this.os2=bh.readTable("OS/2",T);this.psName=this.name.postscriptName;this.ascent=this.os2.ascent||this.hhea.ascent;this.descent=this.os2.descent||this.hhea.descent;this.lineGap=this.os2.lineGap||this.hhea.lineGap;this.scale=1000/this.head.unitsPerEm},widthOfGlyph:function(bh){return this.hmtx.forGlyph(bh).advance*this.scale},makeSubset:function(){return new aF(this)}};var aR=y.support.browser;var U=typeof Uint8Array!=="undefined";var a9="\n";var ak=0;var ao={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],executive:[521.86,756],folio:[612,936],legal:[612,1008],letter:[612,792],tabloid:[792,1224]};function t(){var bj=0,bh=f();function bi(){var bl=arguments;for(var bn=0;bn<arguments.length;++bn){var bk=bl[bn];if(bk===undefined){throw new Error("Cannot output undefined to PDF")}else{if(bk instanceof ap){bk.beforeRender(bi);bk.render(bi)}else{if(d(bk)){s(bk,bi)}else{if(j(bk)){aK(bk,bi)}else{if(typeof bk=="number"){if(isNaN(bk)){throw new Error("Cannot output NaN to PDF")}var bm=bk.toFixed(7);if(bm.indexOf(".")>=0){bm=bm.replace(/\.?0+$/,"")}if(bm=="-0"){bm="0"}bh.writeString(bm)}else{if(/string|boolean/.test(typeof bk)){bh.writeString(String(bk))}else{if(typeof bk.get=="function"){bh.write(bk.get())}else{if(typeof bk=="object"){if(!bk){bh.writeString("null")}else{bi(new aU(bk))}}}}}}}}}}}bi.writeData=function(bk){bh.write(bk)};bi.withIndent=function(bk){++bj;bk(bi);--bj};bi.indent=function(){bi(a9,A("",bj*2,"  "));bi.apply(null,arguments)};bi.offset=function(){return bh.offset()};bi.toString=function(){throw new Error("FIX CALLER")};bi.get=function(){return bh.get()};bi.stream=function(){return bh};return bi}function S(bi,bk){var bh=bi.beforeRender;var bj=bi.render;bi.beforeRender=function(){};bi.render=function(bl){bl(bk," 0 R")};bi.renderFull=function(bl){bi._offset=bl.offset();bl(bk," 0 obj ");bh.call(bi,bl);bj.call(bi,bl);bl(" endobj")}}function H(bi){if(typeof bi!="function"){var bh=bi;bi=function(bl,bm){return bl in bh?bh[bl]:bm}}var bk=bi("paperSize",ao.a4);if(!bk){return{}}if(typeof bk=="string"){bk=ao[bk.toLowerCase()];if(bk==null){throw new Error("Unknown paper size")}}bk[0]=D(bk[0]);bk[1]=D(bk[1]);if(bi("landscape",false)){bk=[Math.max(bk[0],bk[1]),Math.min(bk[0],bk[1])]}var bj=bi("margin");if(bj){if(typeof bj=="string"||typeof bj=="number"){bj=D(bj,0);bj={left:bj,top:bj,right:bj,bottom:bj}}else{bj={left:D(bj.left,0),top:D(bj.top,0),right:D(bj.right,0),bottom:D(bj.bottom,0)}}if(bi("addMargin")){bk[0]+=bj.left+bj.right;bk[1]+=bj.top+bj.bottom}}return{paperSize:bk,margin:bj}}function a1(bl){var bi=this;var bk=t();var bm=0;var bn=[];function bj(bq,bp){return bl&&bl[bq]!=null?bl[bq]:bp}bi.getOption=bj;bi.attach=function(bp){if(bn.indexOf(bp)<0){S(bp,++bm);bn.push(bp)}return bp};bi.pages=[];bi.FONTS={};bi.IMAGES={};bi.GRAD_COL_FUNCTIONS={};bi.GRAD_OPC_FUNCTIONS={};bi.GRAD_COL={};bi.GRAD_OPC={};var bh=bi.attach(new aG());var bo=bi.attach(new n());bh.setPages(bo);bi.addPage=function(bx){var bv=H(function(bz,by){return bx&&bx[bz]!=null?bx[bz]:by});var bq=bv.paperSize;var br=bv.margin;var bp=bq[0];var bw=bq[1];if(br){bp-=br.left+br.right;bw-=br.top+br.bottom}var bs=new O(t(),null,true);var bu={Contents:bi.attach(bs),Parent:bo,MediaBox:[0,0,bq[0],bq[1]]};var bt=new b(bi,bu);bt._content=bs;bo.addPage(bi.attach(bt));bt.transform(1,0,0,-1,0,bq[1]);if(br){bt.translate(br.left,br.top);bt.rect(0,0,bp,bw);bt.clip()}bi.pages.push(bt);return bt};bi.render=function(){var bq;bk("%PDF-1.4",a9,"%\u8117\u8115\u8137\u8127\u8126",a9,a9);for(bq=0;bq<bn.length;++bq){bn[bq].renderFull(bk);bk(a9,a9)}var bp=bk.offset();bk("xref",a9,0," ",bn.length+1,a9);bk("0000000000 65535 f ",a9);for(bq=0;bq<bn.length;++bq){bk(au(bn[bq]._offset,10)," 00000 n ",a9)}bk(a9);bk("trailer",a9);bk(new aU({Size:bn.length+1,Root:bh,Info:new aU({Producer:new u(bj("producer","Kendo UI PDF Generator")),Title:new u(bj("title","")),Author:new u(bj("author","")),Subject:new u(bj("subject","")),Keywords:new u(bj("keywords","")),Creator:new u(bj("creator","Kendo UI PDF Generator")),CreationDate:bj("date",new Date())})}),a9,a9);bk("startxref",a9,bp,a9);bk("%%EOF",a9);return bk.stream().offset(0)}}var w={"Times-Roman":true,"Times-Bold":true,"Times-Italic":true,"Times-BoldItalic":true,Helvetica:true,"Helvetica-Bold":true,"Helvetica-Oblique":true,"Helvetica-BoldOblique":true,Courier:true,"Courier-Bold":true,"Courier-Oblique":true,"Courier-BoldOblique":true,Symbol:true,ZapfDingbats:true};function aN(bj,bh){function bi(){if(window.console){if(window.console.error){window.console.error("Cannot load URL: %s",bj)}else{window.console.log("Cannot load URL: %s",bj)}}bh(null)}var bk=new XMLHttpRequest();bk.open("GET",bj,true);if(U){bk.responseType="arraybuffer"}bk.onload=function(){if(bk.status==200||bk.status==304){if(U){bh(new Uint8Array(bk.response))}else{bh(new window.VBArray(bk.responseBody).toArray())}}else{bi()}};bk.onerror=bi;bk.send(null)}function aQ(bj,bh){var bi=w[bj];if(bi){bh(bi)}else{aN(bj,function(bl){if(bl==null){throw new Error("Cannot load font from "+bj)}else{var bk=new aW(bl);w[bj]=bk;bh(bk)}})}}var am={};function ag(bj,bp){var bk=am[bj],bh,bi;if(bk){bp(bk)}else{bk=new Image();if(!/^data:/i.test(bj)){bk.crossOrigin="Anonymous"}if(U&&!/^data:/i.test(bj)){var bo=new XMLHttpRequest();bo.onload=function(){bi=bo.response;bh=URL.createObjectURL(bi);bm(bh)};bo.onerror=bl;bo.open("GET",bj,true);bo.responseType="blob";bo.send()}else{bm(bj)}}function bm(bq){bk.src=bq;if(bk.complete&&!aR.msie){bn()}else{bk.onload=bn;bk.onerror=bl}}function bl(){bp(am[bj]="TAINTED")}function bn(){if(bi&&/^image\/jpe?g$/i.test(bi.type)){var bv=new FileReader();bv.onload=function(){bk=new aJ(bk.width,bk.height,f(new Uint8Array(this.result)));URL.revokeObjectURL(bh);bp(am[bj]=bk)};bv.readAsArrayBuffer(bi);return}var bq=document.createElement("canvas");bq.width=bk.width;bq.height=bk.height;var bC=bq.getContext("2d");bC.drawImage(bk,0,0);var bA;try{bA=bC.getImageData(0,0,bk.width,bk.height)}catch(bw){bl();return}finally{if(bh){URL.revokeObjectURL(bh)}}var bu=false,bx=f(),br=f();var by=bA.data;var bt=0;while(bt<by.length){bx.writeByte(by[bt++]);bx.writeByte(by[bt++]);bx.writeByte(by[bt++]);var bz=by[bt++];if(bz<255){bu=true}br.writeByte(bz)}if(bu){bk=new ar(bk.width,bk.height,bx,br)}else{var bs=bq.toDataURL("image/jpeg");bs=bs.substr(bs.indexOf(";base64,")+8);var bB=f();bB.writeBase64(bs);bB.offset(0);bk=new aJ(bk.width,bk.height,bB)}bp(am[bj]=bk)}}function C(bh){return function(bk,bm){var bl=bk.length,bi=bl;if(bl===0){return bm()}function bj(){if(--bl===0){bm()}}while(bi-->0){bh(bk[bi],bj)}}}var aj=C(aQ);var aI=C(ag);a1.prototype={loadFonts:aj,loadImages:aI,getFont:function(bi){var bh=this.FONTS[bi];if(!bh){bh=w[bi];if(!bh){throw new Error("Font "+bi+" has not been loaded")}if(bh===true){bh=this.attach(new Y(bi))}else{bh=this.attach(new p(this,bh))}this.FONTS[bi]=bh}return bh},getImage:function(bi){var bh=this.IMAGES[bi];if(!bh){bh=am[bi];if(!bh){throw new Error("Image "+bi+" has not been loaded")}if(bh==="TAINTED"){return null}bh=this.IMAGES[bi]=this.attach(bh.asStream(this))}return bh},getOpacityGS:function(bj,bl){var bm=parseFloat(bj).toFixed(3);bj=parseFloat(bm);bm+=bl?"S":"F";var bi=this._opacityGSCache||(this._opacityGSCache={});var bh=bi[bm];if(!bh){var bk={Type:ab("ExtGState")};if(bl){bk.CA=bj}else{bk.ca=bj}bh=this.attach(new aU(bk));bh._resourceName=ab("GS"+ ++ak);bi[bm]=bh}return bh},dict:function(bh){return new aU(bh)},name:function(bh){return ab(bh)},stream:function(bh,bi){return new O(bi,bh)}};function A(bj,bh,bi){while(bj.length<bh){bj=bi+bj}return bj}function au(bi,bh){return A(String(bi),bh,"0")}function at(bi,bh){return Object.prototype.hasOwnProperty.call(bi,bh)}var d=Array.isArray||function(bh){return bh instanceof Array};function j(bh){return bh instanceof Date}function s(bh,bi){bi("[");if(bh.length>0){bi.withIndent(function(){for(var bj=0;bj<bh.length;++bj){if(bj>0&&bj%8===0){bi.indent(bh[bj])}else{bi(" ",bh[bj])}}})}bi(" ]")}function aK(bi,bh){bh("(D:",au(bi.getUTCFullYear(),4),au(bi.getUTCMonth()+1,2),au(bi.getUTCDate(),2),au(bi.getUTCHours(),2),au(bi.getUTCMinutes(),2),au(bi.getUTCSeconds(),2),"Z)")}function ba(bh){return bh*(72/25.4)}function aS(bh){return ba(bh*10)}function aE(bh){return bh*72}function D(bi,bk){if(typeof bi=="number"){return bi}if(typeof bi=="string"){var bh;bh=/^\s*([0-9.]+)\s*(mm|cm|in|pt)\s*$/.exec(bi);if(bh){var bj=parseFloat(bh[1]);if(!isNaN(bj)){if(bh[2]=="pt"){return bj}return{mm:ba,cm:aS,"in":aE}[bh[2]](bj)}}}if(bk!=null){return bk}throw new Error("Can't parse unit: "+bi)}function ap(){}ap.prototype.beforeRender=function(){};function Q(bh,bk,bj){if(!bj){bj=ap}bh.prototype=new bj();for(var bi in bk){if(at(bk,bi)){bh.prototype[bi]=bk[bi]}}return bh}var u=Q(function u(bh){this.value=bh},{render:function(bi){var bh="",bk=this.value;for(var bj=0;bj<bk.length;++bj){bh+=String.fromCharCode(bk.charCodeAt(bj)&255)}bi("(",bh.replace(/([\(\)\\])/g,"\\$1"),")")},toString:function(){return this.value}});var aX=Q(function aX(bh){this.value=bh},{render:function(bh){var bj=this;bh("<");for(var bi=0;bi<this.value.length;++bi){bh(au(bj.value.charCodeAt(bi).toString(16),4))}bh(">")}},u);var be=Q(function be(bh){this.name=bh},{render:function(bh){bh("/"+this.escape())},escape:function(){return this.name.replace(/[^\x21-\x7E]/g,function(bh){return"#"+au(bh.charCodeAt(0).toString(16),2)})},toString:function(){return this.name}});var aB={};be.get=ab;function ab(bh){if(at(aB,bh)){return aB[bh]}return aB[bh]=new be(bh)}var aU=Q(function aU(bh){this.props=bh},{render:function(bh){var bi=this.props,bj=true;bh("<<");bh.withIndent(function(){for(var bk in bi){if(at(bi,bk)&&!/^_/.test(bk)){bj=false;bh.indent(ab(bk)," ",bi[bk])}}});if(!bj){bh.indent()}bh(">>")}});var O=Q(function O(bk,bj,bh){if(typeof bk=="string"){var bi=f();bi.write(bk);bk=bi}this.data=bk;this.props=bj||{};this.compress=bh},{render:function(bh){var bj=this.data.get(),bi=this.props;if(this.compress&&window.pako&&typeof window.pako.deflate=="function"){if(!bi.Filter){bi.Filter=[]}else{if(!(bi.Filter instanceof Array)){bi.Filter=[bi.Filter]}}bi.Filter.unshift(ab("FlateDecode"));bj=window.pako.deflate(bj)}bi.Length=bj.length;bh(new aU(bi)," stream",a9);bh.writeData(bj);bh(a9,"endstream")}});var aG=Q(function aG(bh){bh=this.props=bh||{};bh.Type=ab("Catalog")},{setPages:function(bh){this.props.Pages=bh}},aU);var n=Q(function n(){this.props={Type:ab("Pages"),Kids:[],Count:0}},{addPage:function(bh){this.props.Kids.push(bh);this.props.Count++}},aU);function aJ(bi,bh,bj){this.asStream=function(){var bk=new O(bj,{Type:ab("XObject"),Subtype:ab("Image"),Width:bi,Height:bh,BitsPerComponent:8,ColorSpace:ab("DeviceRGB"),Filter:ab("DCTDecode")});bk._resourceName=ab("I"+ ++ak);return bk}}function ar(bj,bh,bi,bk){this.asStream=function(bm){var bl=new O(bk,{Type:ab("XObject"),Subtype:ab("Image"),Width:bj,Height:bh,BitsPerComponent:8,ColorSpace:ab("DeviceGray")},true);var bn=new O(bi,{Type:ab("XObject"),Subtype:ab("Image"),Width:bj,Height:bh,BitsPerComponent:8,ColorSpace:ab("DeviceRGB"),SMask:bm.attach(bl)},true);bn._resourceName=ab("I"+ ++ak);return bn}}var Y=Q(function Y(bh){this.props={Type:ab("Font"),Subtype:ab("Type1"),BaseFont:ab(bh)};this._resourceName=ab("F"+ ++ak)},{encodeText:function(bh){return new u(String(bh))}},aU);var p=Q(function p(bh,bi,bk){bk=this.props=bk||{};bk.Type=ab("Font");bk.Subtype=ab("Type0");bk.Encoding=ab("Identity-H");this._pdf=bh;this._font=bi;this._sub=bi.makeSubset();this._resourceName=ab("F"+ ++ak);var bj=bi.head;this.name=bi.psName;var bl=this.scale=bi.scale;this.bbox=[bj.xMin*bl,bj.yMin*bl,bj.xMax*bl,bj.yMax*bl];this.italicAngle=bi.post.italicAngle;this.ascent=bi.ascent*bl;this.descent=bi.descent*bl;this.lineGap=bi.lineGap*bl;this.capHeight=bi.os2.capHeight||this.ascent;this.xHeight=bi.os2.xHeight||0;this.stemV=0;this.familyClass=(bi.os2.familyClass||0)>>8;this.isSerif=this.familyClass>=1&&this.familyClass<=7;this.isScript=this.familyClass==10;this.flags=(bi.post.isFixedPitch?1:0)|(this.isSerif?1<<1:0)|(this.isScript?1<<3:0)|(this.italicAngle!==0?1<<6:0)|1<<5},{encodeText:function(bh){return new aX(this._sub.encodeText(String(bh)))},getTextWidth:function(bk,bl){var bn=this;var bi=0,bm=this._font.cmap.codeMap;for(var bh=0;bh<bl.length;++bh){var bj=bm[bl.charCodeAt(bh)];bi+=bn._font.widthOfGlyph(bj||0)}return bi*bk/1000},beforeRender:function(){var bt=this;var bh=bt._sub;var bn=bh.render();var bj=new O(f(bn),{Length1:bn.length},true);var bi=bt._pdf.attach(new aU({Type:ab("FontDescriptor"),FontName:ab(bt._sub.psName),FontBBox:bt.bbox,Flags:bt.flags,StemV:bt.stemV,ItalicAngle:bt.italicAngle,Ascent:bt.ascent,Descent:bt.descent,CapHeight:bt.capHeight,XHeight:bt.xHeight,FontFile2:bt._pdf.attach(bj)}));var bl=bh.ncid2ogid;var bq=bh.firstChar;var br=bh.lastChar;var bp=[];(function bo(bw,bv){if(bw<=br){var bx=bl[bw];if(bx==null){bo(bw+1)}else{if(!bv){bp.push(bw,bv=[])}bv.push(bt._font.widthOfGlyph(bx));bo(bw+1,bv)}}}(bq));var bs=new aU({Type:ab("Font"),Subtype:ab("CIDFontType2"),BaseFont:ab(bt._sub.psName),CIDSystemInfo:new aU({Registry:new u("Adobe"),Ordering:new u("Identity"),Supplement:0}),FontDescriptor:bi,FirstChar:bq,LastChar:br,DW:Math.round(bt._font.widthOfGlyph(0)),W:bp,CIDToGIDMap:bt._pdf.attach(bt._makeCidToGidMap())});var bk=bt.props;bk.BaseFont=ab(bt._sub.psName);bk.DescendantFonts=[bt._pdf.attach(bs)];var bu=new B(bq,br,bh.subset);var bm=new O(t(),null,true);bm.data(bu);bk.ToUnicode=bt._pdf.attach(bm)},_makeCidToGidMap:function(){return new O(f(this._sub.cidToGidMap()),null,true)}},aU);var B=Q(function al(bi,bh,bj){this.firstChar=bi;this.lastChar=bh;this.map=bj},{render:function(bi){bi.indent("/CIDInit /ProcSet findresource begin");bi.indent("12 dict begin");bi.indent("begincmap");bi.indent("/CIDSystemInfo <<");bi.indent("  /Registry (Adobe)");bi.indent("  /Ordering (UCS)");bi.indent("  /Supplement 0");bi.indent(">> def");bi.indent("/CMapName /Adobe-Identity-UCS def");bi.indent("/CMapType 2 def");bi.indent("1 begincodespacerange");bi.indent("  <0000><ffff>");bi.indent("endcodespacerange");var bh=this;bi.indent(bh.lastChar-bh.firstChar+1," beginbfchar");bi.withIndent(function(){for(var bl=bh.firstChar;bl<=bh.lastChar;++bl){var bj=bh.map[bl];var bm=P([bj]);bi.indent("<",au(bl.toString(16),4),">","<");for(var bk=0;bk<bm.length;++bk){bi(au(bm.charCodeAt(bk).toString(16),4))}bi(">")}});bi.indent("endbfchar");bi.indent("endcmap");bi.indent("CMapName currentdict /CMap defineresource pop");bi.indent("end");bi.indent("end")}});function aM(bh){return bh.map(function(bi){return d(bi)?aM(bi):typeof bi=="number"?(Math.round(bi*1000)/1000).toFixed(3):bi}).join(" ")}function ad(bi,bk,bh,bo,bj,bp,bn){var bm=aM([bk,bh,bo,bj,bp,bn]);var bl=bi.GRAD_COL_FUNCTIONS[bm];if(!bl){bl=bi.GRAD_COL_FUNCTIONS[bm]=bi.attach(new aU({FunctionType:2,Domain:[0,1],Range:[0,1,0,1,0,1],N:1,C0:[bk,bh,bo],C1:[bj,bp,bn]}))}return bl}function a6(bj,bi,bh){var bl=aM([bi,bh]);var bk=bj.GRAD_OPC_FUNCTIONS[bl];if(!bk){bk=bj.GRAD_OPC_FUNCTIONS[bl]=bj.attach(new aU({FunctionType:2,Domain:[0,1],Range:[0,1],N:1,C0:[bi],C1:[bh]}))}return bk}function r(bk,bt){var bp=false;var bj=[];var bh=[];var bn=[];var bq=[];var bo,bm,bs,bi,br;for(bo=1;bo<bt.length;++bo){bm=bt[bo-1];bs=bt[bo];bi=bm.color;br=bs.color;bh.push(ad(bk,bi.r,bi.g,bi.b,br.r,br.g,br.b));if(bi.a<1||br.a<1){bp=true}bn.push(bs.offset);bq.push(0,1)}if(bp){for(bo=1;bo<bt.length;++bo){bm=bt[bo-1];bs=bt[bo];bi=bm.color;br=bs.color;bj.push(a6(bk,bi.a,br.a))}}bn.pop();return{hasAlpha:bp,colors:bl(bh),opacities:bp?bl(bj):null};function bl(bu){if(bu.length==1){return bu[0]}return{FunctionType:3,Functions:bu,Domain:[0,1],Bounds:bn,Encode:bq}}}function c(bi,bj,bp,bo,bh,bl){var bm,bk;if(!bl){var bn=[bj].concat(bo);bp.forEach(function(bq){bn.push(bq.offset,bq.color.r,bq.color.g,bq.color.b)});bk=aM(bn);bm=bi.GRAD_COL[bk]}if(!bm){bm=new aU({Type:ab("Shading"),ShadingType:bj?3:2,ColorSpace:ab("DeviceRGB"),Coords:bo,Domain:[0,1],Function:bh,Extend:[true,true]});bi.attach(bm);bm._resourceName="S"+ ++ak;if(bk){bi.GRAD_COL[bk]=bm}}return bm}function h(bi,bj,bp,bo,bh,bl){var bm,bk;if(!bl){var bn=[bj].concat(bo);bp.forEach(function(bq){bn.push(bq.offset,bq.color.a)});bk=aM(bn);bm=bi.GRAD_OPC[bk]}if(!bm){bm=new aU({Type:ab("ExtGState"),AIS:false,CA:1,ca:1,SMask:{Type:ab("Mask"),S:ab("Luminosity"),G:bi.attach(new O("/a0 gs /s0 sh",{Type:ab("XObject"),Subtype:ab("Form"),FormType:1,BBox:bl?[bl.left,bl.top+bl.height,bl.left+bl.width,bl.top]:[0,1,1,0],Group:{Type:ab("Group"),S:ab("Transparency"),CS:ab("DeviceGray"),I:true},Resources:{ExtGState:{a0:{CA:1,ca:1}},Shading:{s0:{ColorSpace:ab("DeviceGray"),Coords:bo,Domain:[0,1],ShadingType:bj?3:2,Function:bh,Extend:[true,true]}}}}))}});bi.attach(bm);bm._resourceName="O"+ ++ak;if(bk){bi.GRAD_OPC[bk]=bm}}return bm}function aA(bh,bo,bl){var bn=bo.type=="radial";var bj=r(bh,bo.stops);var bm=bn?[bo.start.x,bo.start.y,bo.start.r,bo.end.x,bo.end.y,bo.end.r]:[bo.start.x,bo.start.y,bo.end.x,bo.end.y];var bi=c(bh,bn,bo.stops,bm,bj.colors,bo.userSpace&&bl);var bk=bj.hasAlpha?h(bh,bn,bo.stops,bm,bj.opacities,bo.userSpace&&bl):null;return{hasAlpha:bj.hasAlpha,shading:bi,opacity:bk}}var b=Q(function b(bh,bi){this._pdf=bh;this._rcount=0;this._textMode=false;this._fontResources={};this._gsResources={};this._xResources={};this._patResources={};this._shResources={};this._opacity=1;this._matrix=[1,0,0,1,0,0];this._annotations=[];this._font=null;this._fontSize=null;this._contextStack=[];bi=this.props=bi||{};bi.Type=ab("Page");bi.ProcSet=[ab("PDF"),ab("Text"),ab("ImageB"),ab("ImageC"),ab("ImageI")];bi.Resources=new aU({Font:new aU(this._fontResources),ExtGState:new aU(this._gsResources),XObject:new aU(this._xResources),Pattern:new aU(this._patResources),Shading:new aU(this._shResources)});bi.Annots=this._annotations},{_out:function(){this._content.data.apply(null,arguments)},transform:function(bi,bh,bm,bl,bk,bj){if(!a3(arguments)){this._matrix=aZ(arguments,this._matrix);this._out(bi," ",bh," ",bm," ",bl," ",bk," ",bj," cm");this._out(a9)}},translate:function(bi,bh){this.transform(1,0,0,1,bi,bh)},scale:function(bi,bh){this.transform(bi,0,0,bh,0,0)},rotate:function(bj){var bi=Math.cos(bj),bh=Math.sin(bj);this.transform(bi,bh,-bh,bi,0,0)},beginText:function(){this._textMode=true;this._out("BT",a9)},endText:function(){this._textMode=false;this._out("ET",a9)},_requireTextMode:function(){if(!this._textMode){throw new Error("Text mode required; call page.beginText() first")}},_requireFont:function(){if(!this._font){throw new Error("No font selected; call page.setFont() first")}},setFont:function(bh,bi){this._requireTextMode();if(bh==null){bh=this._font}else{if(!(bh instanceof p)){bh=this._pdf.getFont(bh)}}if(bi==null){bi=this._fontSize}this._fontResources[bh._resourceName]=bh;this._font=bh;this._fontSize=bi;this._out(bh._resourceName," ",bi," Tf",a9)},setTextLeading:function(bh){this._requireTextMode();this._out(bh," TL",a9)},setTextRenderingMode:function(bh){this._requireTextMode();this._out(bh," Tr",a9)},showText:function(bj,bh){this._requireFont();if(bj.length>1&&bh&&this._font instanceof p){var bk=this._font.getTextWidth(this._fontSize,bj);var bi=bh/bk*100;this._out(bi," Tz ")}this._out(this._font.encodeText(bj)," Tj",a9)},showTextNL:function(bh){this._requireFont();this._out(this._font.encodeText(bh)," '",a9)},addLink:function(bi,bh){var bj=this._toPage({x:bh.left,y:bh.bottom});var bk=this._toPage({x:bh.right,y:bh.top});this._annotations.push(new aU({Type:ab("Annot"),Subtype:ab("Link"),Rect:[bj.x,bj.y,bk.x,bk.y],Border:[0,0,0],A:new aU({Type:ab("Action"),S:ab("URI"),URI:new u(bi)})}))},setStrokeColor:function(bj,bi,bh){this._out(bj," ",bi," ",bh," RG",a9)},setOpacity:function(bh){this.setFillOpacity(bh);this.setStrokeOpacity(bh);this._opacity*=bh},setStrokeOpacity:function(bi){if(bi<1){var bh=this._pdf.getOpacityGS(this._opacity*bi,true);this._gsResources[bh._resourceName]=bh;this._out(bh._resourceName," gs",a9)}},setFillColor:function(bj,bi,bh){this._out(bj," ",bi," ",bh," rg",a9)},setFillOpacity:function(bi){if(bi<1){var bh=this._pdf.getOpacityGS(this._opacity*bi,false);this._gsResources[bh._resourceName]=bh;this._out(bh._resourceName," gs",a9)}},gradient:function(bk,bj){this.save();this.rect(bj.left,bj.top,bj.width,bj.height);this.clip();if(!bk.userSpace){this.transform(bj.width,0,0,bj.height,bj.left,bj.top)}var bi=aA(this._pdf,bk,bj);var bh=bi.shading._resourceName,bl;this._shResources[bh]=bi.shading;if(bi.hasAlpha){bl=bi.opacity._resourceName;this._gsResources[bl]=bi.opacity;this._out("/"+bl+" gs ")}this._out("/"+bh+" sh",a9);this.restore()},setDashPattern:function(bh,bi){this._out(bh," ",bi," d",a9)},setLineWidth:function(bh){this._out(bh," w",a9)},setLineCap:function(bh){this._out(bh," J",a9)},setLineJoin:function(bh){this._out(bh," j",a9)},setMitterLimit:function(bh){this._out(bh," M",a9)},save:function(){this._contextStack.push(this._context());this._out("q",a9)},restore:function(){this._out("Q",a9);this._context(this._contextStack.pop())},moveTo:function(bh,bi){this._out(bh," ",bi," m",a9)},lineTo:function(bh,bi){this._out(bh," ",bi," l",a9)},bezier:function(bk,bm,bi,bl,bh,bj){this._out(bk," ",bm," ",bi," ",bl," ",bh," ",bj," c",a9)},bezier1:function(bj,bk,bh,bi){this._out(bj," ",bk," ",bh," ",bi," y",a9)},bezier2:function(bi,bk,bh,bj){this._out(bi," ",bk," ",bh," ",bj," v",a9)},close:function(){this._out("h",a9)},rect:function(bh,bk,bi,bj){this._out(bh," ",bk," ",bi," ",bj," re",a9)},ellipse:function(bh,bn,bm,bl){function bk(bo){return bh+bo}function bi(bo){return bn+bo}var bj=0.5522847498307936;this.moveTo(bk(0),bi(bl));this.bezier(bk(bm*bj),bi(bl),bk(bm),bi(bl*bj),bk(bm),bi(0));this.bezier(bk(bm),bi(-bl*bj),bk(bm*bj),bi(-bl),bk(0),bi(-bl));this.bezier(bk(-bm*bj),bi(-bl),bk(-bm),bi(-bl*bj),bk(-bm),bi(0));this.bezier(bk(-bm),bi(bl*bj),bk(-bm*bj),bi(bl),bk(0),bi(bl))},circle:function(bh,bj,bi){this.ellipse(bh,bj,bi,bi)},stroke:function(){this._out("S",a9)},nop:function(){this._out("n",a9)},clip:function(){this._out("W n",a9)},clipStroke:function(){this._out("W S",a9)},closeStroke:function(){this._out("s",a9)},fill:function(){this._out("f",a9)},fillStroke:function(){this._out("B",a9)},drawImage:function(bi){var bh=this._pdf.getImage(bi);if(bh){this._xResources[bh._resourceName]=bh;this._out(bh._resourceName," Do",a9)}},comment:function(bh){var bi=this;bh.split(/\r?\n/g).forEach(function(bj){bi._out("% ",bj,a9)})},_context:function(bh){if(bh!=null){this._opacity=bh.opacity;this._matrix=bh.matrix}else{return{opacity:this._opacity,matrix:this._matrix}}},_toPage:function(bm){var bi=this._matrix;var bj=bi[0],bh=bi[1],bo=bi[2],bn=bi[3],bl=bi[4],bk=bi[5];return{x:bj*bm.x+bo*bm.y+bl,y:bh*bm.x+bn*bm.y+bk}}},aU);function E(bh){return bh.replace(/^\s*(['"])(.*)\1\s*$/,"$2")}function aa(bi){var bk=/^\s*((normal|italic)\s+)?((normal|small-caps)\s+)?((normal|bold|\d+)\s+)?(([0-9.]+)(px|pt))(\/(([0-9.]+)(px|pt)|normal))?\s+(.*?)\s*$/i;var bh=bk.exec(bi);if(!bh){return{fontSize:12,fontFamily:"sans-serif"}}var bj=bh[8]?parseInt(bh[8],10):12;return{italic:bh[2]&&bh[2].toLowerCase()=="italic",variant:bh[4],bold:bh[6]&&/bold|700/i.test(bh[6]),fontSize:bj,lineHeight:bh[12]?bh[12]=="normal"?bj:parseInt(bh[12],10):null,fontFamily:bh[14].split(/\s*,\s*/g).map(E)}}function av(bm){function bi(bn){if(bm.bold){bn+="|bold"}if(bm.italic){bn+="|italic"}return bn.toLowerCase()}var bh=bm.fontFamily;var bk,bj;if(bh instanceof Array){for(var bl=0;bl<bh.length;++bl){bk=bi(bh[bl]);bj=a0[bk];if(bj){break}}}else{bj=a0[bh.toLowerCase()]}while(typeof bj=="function"){bj=bj()}if(!bj){bj="Times-Roman"}return bj}var a0={serif:"Times-Roman","serif|bold":"Times-Bold","serif|italic":"Times-Italic","serif|bold|italic":"Times-BoldItalic","sans-serif":"Helvetica","sans-serif|bold":"Helvetica-Bold","sans-serif|italic":"Helvetica-Oblique","sans-serif|bold|italic":"Helvetica-BoldOblique",monospace:"Courier","monospace|bold":"Courier-Bold","monospace|italic":"Courier-Oblique","monospace|bold|italic":"Courier-BoldOblique",zapfdingbats:"ZapfDingbats","zapfdingbats|bold":"ZapfDingbats","zapfdingbats|italic":"ZapfDingbats","zapfdingbats|bold|italic":"ZapfDingbats"};function bb(bi,bh){bi=bi.toLowerCase();a0[bi]=function(){return a0[bh]};a0[bi+"|bold"]=function(){return a0[bh+"|bold"]};a0[bi+"|italic"]=function(){return a0[bh+"|italic"]};a0[bi+"|bold|italic"]=function(){return a0[bh+"|bold|italic"]}}bb("Times New Roman","serif");bb("Courier New","monospace");bb("Arial","sans-serif");bb("Helvetica","sans-serif");bb("Verdana","sans-serif");bb("Tahoma","sans-serif");bb("Georgia","sans-serif");bb("Monaco","monospace");bb("Andale Mono","monospace");function o(bi,bh){if(arguments.length==1){for(var bj in bi){if(at(bi,bj)){o(bj,bi[bj])}}}else{bi=bi.toLowerCase();a0[bi]=bh;switch(bi){case"dejavu sans":a0["sans-serif"]=bh;break;case"dejavu sans|bold":a0["sans-serif|bold"]=bh;break;case"dejavu sans|italic":a0["sans-serif|italic"]=bh;break;case"dejavu sans|bold|italic":a0["sans-serif|bold|italic"]=bh;break;case"dejavu serif":a0.serif=bh;break;case"dejavu serif|bold":a0["serif|bold"]=bh;break;case"dejavu serif|italic":a0["serif|italic"]=bh;break;case"dejavu serif|bold|italic":a0["serif|bold|italic"]=bh;break;case"dejavu mono":a0.monospace=bh;break;case"dejavu mono|bold":a0["monospace|bold"]=bh;break;case"dejavu mono|italic":a0["monospace|italic"]=bh;break;case"dejavu mono|bold|italic":a0["monospace|bold|italic"]=bh;break}}}function aZ(bu,bs){var bk=bu[0],bt=bu[1],bo=bu[2],bj=bu[3],br=bu[4],bn=bu[5];var bi=bs[0],bq=bs[1],bm=bs[2],bh=bs[3],bp=bs[4],bl=bs[5];return[bk*bi+bt*bm,bk*bq+bt*bh,bo*bi+bj*bm,bo*bq+bj*bh,br*bi+bn*bm+bp,br*bq+bn*bh+bl]}function a3(bh){return bh[0]===1&&bh[1]===0&&bh[2]===0&&bh[3]===1&&bh[4]===0&&bh[5]===0}var ah={fill:0,stroke:1,fillAndStroke:2,invisible:3,fillAndClip:4,strokeAndClip:5,fillStrokeClip:6,clip:7};var aD=ah;var x={dash:[4],dashDot:[4,2,1,2],dot:[1,2],longDash:[8,2],longDashDot:[8,2,1,2],longDashDotDot:[8,2,1,2,1,2],solid:[]};var l={butt:0,round:1,square:2};var aT={miter:0,round:1,bevel:2};function Z(bn,bo){var bm=[],bl=[],bp=bn.options;function bh(br,bq,bs){if(!bs){bs=bp}if(bs.pdf&&bs.pdf[br]!=null){return bs.pdf[br]}return bq}var bi=bh("multiPage");bn.traverse(function(bq){bf({Image:function(br){if(bl.indexOf(br.src())<0){bl.push(br.src())}},Text:function(bs){var bt=aa(bs.options.font);var br=av(bt);if(bm.indexOf(br)<0){bm.push(br)}}},bq)});function bk(){if(--bj>0){return}var bq=new a1({producer:bh("producer"),title:bh("title"),author:bh("author"),subject:bh("subject"),keywords:bh("keywords"),creator:bh("creator"),date:bh("date")});function br(bx){var bA=bx.options;var bt=R(bx);var by=bt.bbox;bx=bt.root;var bs=bh("paperSize",bh("paperSize","auto"),bA),bv=false;if(bs=="auto"){if(by){var bz=by.getSize();bs=[bz.width,bz.height];bv=true;var bw=by.getOrigin();bt=new q.Group();bt.transform(new ae.Matrix(1,0,0,1,-bw.x,-bw.y));bt.append(bx);bx=bt}else{bs="A4"}}var bu;bu=bq.addPage({paperSize:bs,margin:bh("margin",bh("margin"),bA),addMargin:bv,landscape:bh("landscape",bh("landscape",false),bA)});af(bx,bu,bq)}if(bi){bn.children.forEach(br)}else{br(bn)}bo(bq.render(),bq)}var bj=2;aj(bm,bk);aI(bl,bk)}function ac(bh,bi){Z(bh,function(bj){bi("data:application/pdf;base64,"+bj.base64())})}function bd(bh,bi){Z(bh,function(bj){bi(new window.Blob([bj.get()],{type:"application/pdf"}))})}function aw(bj,bh,bi,bk){if(window.Blob&&!a8.safari){bd(bj,function(bl){y.saveAs({dataURI:bl,fileName:bh});if(bk){bk(bl)}})}else{ac(bj,function(bl){y.saveAs({dataURI:bl,fileName:bh,proxyURL:bi});if(bk){bk(bl)}})}}function bf(bh,bi){var bj=bh[bi.nodeType];if(bj){return bj.call.apply(bj,arguments)}return bi}function af(bl,bm,bi){if(bl.options._pdfDebug){bm.comment("BEGIN: "+bl.options._pdfDebug)}var bk=bl.transform();var bj=bl.opacity();bm.save();if(bj!=null&&bj<1){bm.setOpacity(bj)}J(bl,bm,bi);ay(bl,bm,bi);if(bk){var bh=bk.matrix();bm.transform(bh.a,bh.b,bh.c,bh.d,bh.e,bh.f)}ax(bl,bm,bi);bf({Path:aC,MultiPath:G,Circle:aY,Arc:aH,Text:bc,Image:i,Group:aO,Rect:K},bl,bm,bi);bm.restore();if(bl.options._pdfDebug){bm.comment("END: "+bl.options._pdfDebug)}}function J(bk,bm){var bp=bk.stroke&&bk.stroke();if(!bp){return}var bj=bp.color;if(bj){bj=aq(bj);if(bj==null){return}bm.setStrokeColor(bj.r,bj.g,bj.b);if(bj.a!=1){bm.setStrokeOpacity(bj.a)}}var bi=bp.width;if(bi!=null){if(bi===0){return}bm.setLineWidth(bi)}var bn=bp.dashType;if(bn){bm.setDashPattern(x[bn],0)}var bo=bp.lineCap;if(bo){bm.setLineCap(l[bo])}var bh=bp.lineJoin;if(bh){bm.setLineJoin(aT[bh])}var bl=bp.opacity;if(bl!=null){bm.setStrokeOpacity(bl)}}function ay(bj,bk){var bl=bj.fill&&bj.fill();if(!bl){return}if(bl instanceof q.Gradient){return}var bh=bl.color;if(bh){bh=aq(bh);if(bh==null){return}bk.setFillColor(bh.r,bh.g,bh.b);if(bh.a!=1){bk.setFillOpacity(bh.a)}}var bi=bl.opacity;if(bi!=null){bk.setFillOpacity(bi)}}function ax(bi,bk,bh){var bj=bi.clip();if(bj){F(bj,bk,bh);bk.clip()}}function L(bh){return bh&&(bh instanceof q.Gradient||bh.color&&!/^(none|transparent)$/i.test(bh.color)&&(bh.width==null||bh.width>0)&&(bh.opacity==null||bh.opacity>0))}function V(bl,bn,bi,br){var bs=bl.fill();if(bs instanceof q.Gradient){if(br){bn.clipStroke()}else{bn.clip()}var bk=bs instanceof q.RadialGradient;var bh,bj;if(bk){bh={x:bs.center().x,y:bs.center().y,r:0};bj={x:bs.center().x,y:bs.center().y,r:bs.radius()}}else{bh={x:bs.start().x,y:bs.start().y};bj={x:bs.end().x,y:bs.end().y}}var bp=bs.stops.elements().map(function(bv){var bw=bv.offset();if(/%$/.test(bw)){bw=parseFloat(bw)/100}else{bw=parseFloat(bw)}var bu=aq(bv.color());bu.a*=bv.opacity();return{offset:bw,color:bu}});bp.unshift(bp[0]);bp.push(bp[bp.length-1]);var bo={userSpace:bs.userSpace(),type:bk?"radial":"linear",start:bh,end:bj,stops:bp};var bm=bl.rawBBox();var bq=bm.topLeft(),bt=bm.getSize();bm={left:bq.x,top:bq.y,width:bt.width,height:bt.height};bn.gradient(bo,bm);return true}}function a2(bi,bj,bh){if(L(bi.fill())&&L(bi.stroke())){if(!V(bi,bj,bh,true)){bj.fillStroke()}}else{if(L(bi.fill())){if(!V(bi,bj,bh,false)){bj.fill()}}else{if(L(bi.stroke())){bj.stroke()}else{bj.nop()}}}}function an(bm,bl){var bi=bm.segments;if(bi.length==4&&bm.options.closed){var bh=[];for(var bj=0;bj<bi.length;++bj){if(bi[bj].controlIn()){return false}bh[bj]=bi[bj].anchor()}var bk=bh[0].y==bh[1].y&&bh[1].x==bh[2].x&&bh[2].y==bh[3].y&&bh[3].x==bh[0].x||bh[0].x==bh[1].x&&bh[1].y==bh[2].y&&bh[2].x==bh[3].x&&bh[3].y==bh[0].y;if(bk){bl.rect(bh[0].x,bh[0].y,bh[2].x-bh[0].x,bh[2].y-bh[0].y);return true}}}function F(bk,bq,bh){var bn=bk.segments;if(bn.length===0){return}if(!an(bk,bq,bh)){for(var bi,bl=0;bl<bn.length;++bl){var bj=bn[bl];var bm=bj.anchor();if(!bi){bq.moveTo(bm.x,bm.y)}else{var bp=bi.controlOut();var bo=bj.controlIn();if(bp&&bo){bq.bezier(bp.x,bp.y,bo.x,bo.y,bm.x,bm.y)}else{bq.lineTo(bm.x,bm.y)}}bi=bj}if(bk.options.closed){bq.close()}}}function aC(bi,bj,bh){F(bi,bj,bh);a2(bi,bj,bh)}function G(bj,bk,bh){var bl=bj.paths;for(var bi=0;bi<bl.length;++bi){F(bl[bi],bk,bh)}a2(bj,bk,bh)}function aY(bi,bk,bh){var bj=bi.geometry();bk.circle(bj.center.x,bj.center.y,bj.radius);a2(bi,bk,bh)}function aH(bj,bl,bh){var bk=bj.geometry().curvePoints();bl.moveTo(bk[0].x,bk[0].y);for(var bi=1;bi<bk.length;){bl.bezier(bk[bi].x,bk[bi++].y,bk[bi].x,bk[bi++].y,bk[bi].x,bk[bi++].y)}a2(bj,bl,bh)}function bc(bh,bj){var bi=aa(bh.options.font);var bl=bh._position;var bk;if(bh.fill()&&bh.stroke()){bk=aD.fillAndStroke}else{if(bh.fill()){bk=aD.fill}else{if(bh.stroke()){bk=aD.stroke}}}bj.transform(1,0,0,-1,bl.x,bl.y+bi.fontSize);bj.beginText();bj.setFont(av(bi),bi.fontSize);bj.setTextRenderingMode(bk);bj.showText(bh.content(),bh._pdfRect?bh._pdfRect.width():null);bj.endText()}function aO(bk,bl,bh){if(bk._pdfLink){bl.addLink(bk._pdfLink.url,bk._pdfLink)}var bj=bk.children;for(var bi=0;bi<bj.length;++bi){af(bj[bi],bl,bh)}}function i(bj,bl){var bi=bj.src();if(!bi){return}var bk=bj.rect();var bh=bk.getOrigin();var bm=bk.getSize();bl.transform(bm.width,0,0,-bm.height,bh.x,bh.y+bm.height);bl.drawImage(bi)}function K(bi,bj,bh){var bk=bi.geometry();bj.rect(bk.origin.x,bk.origin.y,bk.size.width,bk.size.height);a2(bi,bj,bh)}function aq(bi){var bh=y.parseColor(bi,true);return bh?bh.toRGB():null}function R(bp){var br=false;var bq=ae.Matrix.unit();var bj=null;var bm;do{bm=false;bp=bh(bp)}while(bp&&bm);return{root:bp,bbox:bj};function bo(bs){bm=true;return bs}function bi(bs){return bs.visible()&&bs.opacity()>0&&(L(bs.fill())||L(bs.stroke()))}function bn(bt){var bs=[];for(var bu=0;bu<bt.length;++bu){var bv=bh(bt[bu]);if(bv!=null){bs.push(bv)}}return bs}function bl(bt,bw){var bs=br;var bv=bq;if(bt.transform()){bq=bq.multiplyCopy(bt.transform().matrix())}var bu=bt.clip();if(bu){bu=bu.bbox();if(bu){bu=bu.bbox(bq);br=br?ae.Rect.intersect(br,bu):bu}}try{return bw()}finally{br=bs;bq=bv}}function bk(bs){if(br==null){return false}var bt=bs.rawBBox().bbox(bq);if(br&&bt){bt=ae.Rect.intersect(bt,br)}return bt}function bh(bs){return bl(bs,function(){if(!(bs instanceof q.Group||bs instanceof q.MultiPath)){var bt=bk(bs);if(!bt){return bo(null)}bj=bj?ae.Rect.union(bj,bt):bt}return bf({Path:function(bu){if(bu.segments.length===0||!bi(bu)){return bo(null)}return bu},MultiPath:function(bu){if(!bi(bu)){return bo(null)}var bv=new q.MultiPath(bu.options);bv.paths=bn(bu.paths);if(bv.paths.length===0){return bo(null)}return bv},Circle:function(bu){if(!bi(bu)){return bo(null)}return bu},Arc:function(bu){if(!bi(bu)){return bo(null)}return bu},Text:function(bu){if(!/\S/.test(bu.content())||!bi(bu)){return bo(null)}return bu},Image:function(bu){if(!(bu.visible()&&bu.opacity()>0)){return bo(null)}return bu},Group:function(bu){var bv=new q.Group(bu.options);bv.children=bn(bu.children);bv._pdfLink=bu._pdfLink;if(bu!==bp&&bv.children.length===0&&!bu._pdfLink){return bo(null)}return bv},Rect:function(bu){if(!bi(bu)){return bo(null)}return bu}},bs)})}}function I(bj,bh){var bk=aP.createPromise();for(var bi in bh){if(bi=="margin"&&bj.options.pdf&&bj.options.pdf._ignoreMargin){continue}bj.options.set("pdf."+bi,bh[bi])}ac(bj,bk.resolve);return bk}y.deepExtend(y.pdf,{Document:a1,BinaryStream:f,defineFont:o,parseFontDef:aa,getFontURL:av,loadFonts:aj,loadImages:aI,getPaperOptions:H,TEXT_RENDERING_MODE:ah,exportPDF:I,saveAs:aw,toDataURL:ac,toBlob:bd,render:Z});y.drawing.exportPDF=y.pdf.exportPDF;y.drawing.pdf=y.pdf}(kendo));return kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("pdf/mixins",["pdf/core"],a)}(function(){(function(a,b){kendo.PDFMixin={extend:function(c){c.events.push("pdfExport");c.options.pdf=this.options;c.saveAsPDF=this.saveAsPDF;c._drawPDF=this._drawPDF;c._drawPDFShadow=this._drawPDFShadow},options:{fileName:"Export.pdf",proxyURL:"",paperSize:"auto",allPages:false,landscape:false,margin:null,title:null,author:null,subject:null,keywords:null,creator:"Kendo UI PDF Generator v."+kendo.version,date:null},saveAsPDF:function(){var e=new a.Deferred();var f=e.promise();var d={promise:f};if(this.trigger("pdfExport",d)){return}var c=this.options.pdf;c.multiPage=c.multiPage||c.allPages;this._drawPDF(e).then(function(g){return kendo.drawing.exportPDF(g,c)}).done(function(g){kendo.saveAs({dataURI:g,fileName:c.fileName,proxyURL:c.proxyURL,forceProxy:c.forceProxy,proxyTarget:c.proxyTarget});e.resolve()}).fail(function(g){e.reject(g)});return f},_drawPDF:function(c){var d=new a.Deferred();kendo.drawing.drawDOM(this.wrapper).done(function(f){var e={page:f,pageNumber:1,progress:1,totalPages:1};c.notify(e);d.resolve(e.page)}).fail(function(e){d.reject(e)});return d},_drawPDFShadow:function(c,d){c=c||{};var g=this.wrapper;var f=a("<div class='k-pdf-export-shadow'>");if(c.width){f.css({width:c.width,overflow:"visible"})}g.before(f);f.append(c.content||g.clone(true,true));var e=a.Deferred();setTimeout(function(){var h=kendo.drawing.drawDOM(f,d);h.always(function(){f.remove()}).then(function(){e.resolve.apply(e,arguments)}).fail(function(){e.reject.apply(e,arguments)}).progress(function(){e.progress.apply(e,arguments)})},15);return e.promise()}}}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.pdf",["kendo.core","kendo.drawing","pdf/core","pdf/mixins"],a)}(function(){var a={id:"pdf",name:"PDF export",description:"PDF Generation framework",mixin:true,category:"framework",depends:["core","drawing"]}},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.grid",["kendo.data","kendo.columnsorter","kendo.editable","kendo.window","kendo.filtermenu","kendo.columnmenu","kendo.groupable","kendo.pager","kendo.selectable","kendo.sortable","kendo.reorderable","kendo.resizable","kendo.mobile.actionsheet","kendo.mobile.pane","kendo.ooxml","kendo.excel","kendo.progressbar","kendo.pdf"],a)}(function(){var a={id:"grid",name:"Grid",category:"web",description:"The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.",depends:["data","columnsorter"],features:[{id:"grid-editing",name:"Editing",description:"Support for record editing",depends:["editable","window"]},{id:"grid-filtering",name:"Filtering",description:"Support for record filtering",depends:["filtermenu"]},{id:"grid-columnmenu",name:"Column menu",description:"Support for header column menu",depends:["columnmenu"]},{id:"grid-grouping",name:"Grouping",description:"Support for grid grouping",depends:["groupable"]},{id:"grid-filtercell",name:"Row filter",description:"Support for grid header filtering",depends:["filtercell"]},{id:"grid-paging",name:"Paging",description:"Support for grid paging",depends:["pager"]},{id:"grid-selection",name:"Selection",description:"Support for row selection",depends:["selectable"]},{id:"grid-column-reorder",name:"Column reordering",description:"Support for column reordering",depends:["reorderable"]},{id:"grid-column-resize",name:"Column resizing",description:"Support for column resizing",depends:["resizable"]},{id:"grid-mobile",name:"Grid adaptive rendering",description:"Support for adaptive rendering",depends:["mobile.actionsheet","mobile.pane"]},{id:"grid-excel-export",name:"Excel export",description:"Export grid data as Excel spreadsheet",depends:["excel"]},{id:"grid-pdf-export",name:"PDF export",description:"Export grid data as PDF",depends:["pdf","drawing","progressbar"]}]};(function(bd,G){var B=window.kendo,aw=B.ui,x=B.data.DataSource,K=B.support.tbodyInnerHtml,X=B._activeElement,q=aw.Widget,W=B._outerWidth,o=B._outerHeight,aj=B.keys,V=bd.isPlainObject,aP=bd.extend,H=bd.map,m=bd.grep,d=bd.isArray,F=bd.inArray,g=Array.prototype.push,L=bd.proxy,bh=B.isFunction,aX=bd.isEmptyObject,aq=Math,a6="progress",Z="error",R=":not(.k-group-cell):not(.k-hierarchy-cell):visible",l="tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)",S="tr:not(.k-footer-template):visible",bi=":not(.k-group-cell):not(.k-hierarchy-cell):visible",aW=S+":first>"+bi+":first",aQ="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",bq=".kendoGrid",ah="edit",bc="save",by="remove",y="detailInit",f="filterMenuInit",a3="columnMenuInit",aa="change",J="columnHide",aY="columnShow",bs="saveChanges",M="dataBound",p="detailExpand",aL="detailCollapse",C="k-state-focused",bn="k-state-selected",aT="k-grid-norecords",bv="columnResize",aZ="columnReorder",U="columnLock",h="columnUnlock",N="navigate",bb="click",bk="height",ax="tabIndex",aV="function",br="string",t="Are you sure you want to delete this record?",bw="No records available.",aR="Delete",an="Cancel",au=/(\}|\#)/gi,aE=/#/gi,af="[\\x20\\t\\r\\n\\f]",aF=new RegExp("(^|"+af+")(k-group-cell|k-hierarchy-cell)("+af+"|$)"),ac=new RegExp("(^|"+af+")(k-filter-row)("+af+"|$)"),az='<a role="button" class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>',I=false,bf=B.support.browser,at=bf.msie&&bf.version==7,ap=bf.msie&&bf.version==8;var aN=q.extend({init:function(bB,bA){var bC=this;q.fn.init.call(bC,bB,bA);bC._refreshHandler=L(bC.refresh,bC);bC.setDataSource(bA.dataSource);bC.wrap()},setDataSource:function(bB){var bA=this;if(bA.dataSource){bA.dataSource.unbind(aa,bA._refreshHandler)}bA.dataSource=bB;bA.dataSource.bind(aa,bA._refreshHandler)},options:{name:"VirtualScrollable",itemHeight:bd.noop,prefetch:true},destroy:function(){var bA=this;q.fn.destroy.call(bA);bA.dataSource.unbind(aa,bA._refreshHandler);bA.wrapper.add(bA.verticalScrollbar).off(bq);if(bA.drag){bA.drag.destroy();bA.drag=null}bA.wrapper=bA.element=bA.verticalScrollbar=null;bA._refreshHandler=null},wrap:function(){var bB=this,bD=B.support.scrollbar()+1,bA=bB.element,bC;bA.css({width:"auto",overflow:"hidden"}).css(I?"padding-left":"padding-right",bD);bB.content=bA.children().first();bC=bB.wrapper=bB.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+bq+" mousewheel"+bq,L(bB._wheelScroll,bB));if(B.support.kineticScrollNeeded){bB.drag=new B.UserEvents(bB.wrapper,{global:true,start:function(bE){bE.sender.capture()},move:function(bE){bB.verticalScrollbar.scrollTop(bB.verticalScrollbar.scrollTop()-bE.y.delta);bC.scrollLeft(bC.scrollLeft()-bE.x.delta);bE.preventDefault()}})}bB.verticalScrollbar=bd('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:bD}).appendTo(bA).bind("scroll"+bq,L(bB._scroll,bB))},_wheelScroll:function(bB){if(bB.ctrlKey){return}var bD=this.verticalScrollbar,bA=bD.scrollTop(),bC=B.wheelDeltaY(bB);if(bC&&!(bC>0&&bA===0)&&!(bC<0&&bA+bD[0].clientHeight==bD[0].scrollHeight)){bB.preventDefault();this.verticalScrollbar.scrollTop(bA+-bC)}},_scroll:function(bG){var bF=this,bI=!bF.options.prefetch,bD=bG.currentTarget.scrollTop,bA=bF.dataSource,bB=bF.itemHeight,bK=bA.skip()||0,bC=bF._rangeStart||bK,bL=bF.element.innerHeight(),bE=!!(bF._scrollbarTop&&bF._scrollbarTop>bD),bJ=aq.max(aq.floor(bD/bB),0),bH=aq.max(bJ+aq.floor(bL/bB),0);bF._scrollTop=bD-bC*bB;bF._scrollbarTop=bD;bF._scrolling=bI;if(!bF._fetch(bJ,bH,bE)){bF.wrapper[0].scrollTop=bF._scrollTop}if(bI){if(bF._scrollingTimeout){clearTimeout(bF._scrollingTimeout)}bF._scrollingTimeout=setTimeout(function(){bF._scrolling=false;bF._page(bF._rangeStart,bF.dataSource.take())},100)}},itemIndex:function(bB){var bA=this._rangeStart||this.dataSource.skip()||0;return bA+bB},position:function(bC){var bD=this._rangeStart||this.dataSource.skip()||0;var bB=this.dataSource.pageSize();var bA;if(bC>bD){bA=bC-bD+1}else{bA=bD-bC-1}return bA>bB?bB:bA},scrollIntoView:function(bF){var bA=this.wrapper[0];var bE=bA.clientHeight;var bD=this._scrollTop||bA.scrollTop;var bB=bF[0].offsetTop;var bC=bF[0].offsetHeight;if(bD>bB){this.verticalScrollbar[0].scrollTop-=bE/2}else{if(bB+bC>=bD+bE){this.verticalScrollbar[0].scrollTop+=bE/2}}},_fetch:function(bJ,bG,bH){var bE=this,bA=bE.dataSource,bC=bE.itemHeight,bB=bA.take(),bK=bE._rangeStart||bA.skip()||0,bI=aq.floor(bJ/bB)*bB,bD=false,bF=0.33;if(bJ<bK){bD=true;bK=aq.max(0,bG-bB);bE._scrollTop=(bJ-bK)*bC;bE._page(bK,bB)}else{if(bG>=bK+bB&&!bH){bD=true;bK=bJ;bE._scrollTop=bC;bE._page(bK,bB)}else{if(!bE._fetching&&bE.options.prefetch){if(bJ<bI+bB-bB*bF&&bJ>bB){bA.prefetch(bI-bB,bB,bd.noop)}if(bG>bI+bB*bF){bA.prefetch(bI+bB,bB,bd.noop)}}}}return bD},fetching:function(){return this._fetching},_page:function(bD,bA){var bC=this,bB=!bC.options.prefetch,bE=bC.dataSource;clearTimeout(bC._timeout);bC._fetching=true;bC._rangeStart=bD;if(bE.inRange(bD,bA)){bE.range(bD,bA)}else{if(!bB){B.ui.progress(bC.wrapper.parent(),true)}bC._timeout=setTimeout(function(){if(!bC._scrolling){if(bB){B.ui.progress(bC.wrapper.parent(),true)}bE.range(bD,bA)}},100)}},repaintScrollbar:function(){var bE=this,bD="",bH=250000,bA=bE.dataSource,bI=!B.support.kineticScrollNeeded?B.support.scrollbar():0,bJ=bE.wrapper[0],bF,bG,bB;bB=bE.itemHeight=bE.options.itemHeight()||0;var bC=bJ.scrollWidth>bJ.offsetWidth?bI:0;bF=bA.total()*bB+bC;for(bG=0;bG<aq.floor(bF/bH);bG++){bD+='<div style="width:1px;height:'+bH+'px"></div>'}if(bF%bH){bD+='<div style="width:1px;height:'+bF%bH+'px"></div>'}bE.verticalScrollbar.html(bD);bJ.scrollTop=bE._scrollTop},refresh:function(){var bA=this,bC=bA.dataSource,bB=bA._rangeStart;B.ui.progress(bA.wrapper.parent(),false);clearTimeout(bA._timeout);bA.repaintScrollbar();if(bA.drag){bA.drag.cancel()}if(bB&&!bA._fetching){bA._rangeStart=bC.skip();if(bC.page()===1){bA.verticalScrollbar[0].scrollTop=0}}bA._fetching=false}});function ba(bA){return new Array(bA+1).join('<td class="k-group-cell">&nbsp;</td>')}function s(bC){var bB,bA=" ";if(bC){if(typeof bC===br){return bC}for(bB in bC){bA+=bB+'="'+bC[bB]+'"'}}return bA}var av={create:{text:"Add new record",imageClass:"k-i-plus",className:"k-grid-add",iconClass:"k-icon"},cancel:{text:"Cancel changes",imageClass:"k-i-cancel",className:"k-grid-cancel-changes",iconClass:"k-icon"},save:{text:"Save changes",imageClass:"k-i-check",className:"k-grid-save-changes",iconClass:"k-icon"},destroy:{text:"Delete",imageClass:"k-i-close",className:"k-grid-delete",iconClass:"k-icon"},edit:{text:"Edit",imageClass:"k-i-edit",className:"k-grid-edit",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-i-check",className:"k-primary k-grid-update",iconClass:"k-icon"},canceledit:{text:"Cancel",imageClass:"k-i-cancel",className:"k-grid-cancel",iconClass:"k-icon"},excel:{text:"Export to Excel",imageClass:"k-i-file-excel",className:"k-grid-excel",iconClass:"k-icon"},pdf:{text:"Export to PDF",imageClass:"k-i-file-pdf",className:"k-grid-pdf",iconClass:"k-icon"}};function n(bA,bB){bd("th, th .k-grid-filter, th .k-link",bA).add(document.body).css("cursor",bB)}function ae(bC,bG,bD,bF,bE){var bB=bG;bG=bd();bE=bE||1;for(var bA=0;bA<bE;bA++){bG=bG.add(bC.eq(bB+bA))}if(typeof bD=="number"){bG[bF?"insertBefore":"insertAfter"](bC.eq(bD))}else{bG.appendTo(bD)}}function bm(bA,bC,bB){return bd(bA).add(bC).find(bB)}function ar(bE,bC,bB){var bA,bF,bG,bD;bB=!d(bB)?[bB]:bB;for(bA=0,bF=bB.length;bA<bF;bA++){bG=bB[bA];if(V(bG)&&bG.click){bD=bG.name||bG.text;bC.on(bb+bq,"a.k-grid-"+(bD||"").replace(/\s/g,""),{commandName:bD},L(bG.click,bE))}}}function u(bB,bC,bA){return H(bB,function(bE){bE=typeof bE===br?{field:bE}:bE;var bF;if(!bp(bE)||bA){bE.attributes=Y(bE.attributes);bE.footerAttributes=Y(bE.footerAttributes);bE.headerAttributes=Y(bE.headerAttributes);bF=true}if(bE.columns){bE.columns=u(bE.columns,bC,bF)}var bD=B.guid();bE.headerAttributes=aP({id:bD},bE.headerAttributes);return aP({encoded:bC,hidden:bF},bE)})}function Q(bC,bB){var bA=[];aB(bC,bB,bA);return bA[bA.length-1]}function aB(bE,bC,bB){bB=bB||[];for(var bA=0;bA<bC.length;bA++){if(bE===bC[bA]){return true}else{if(bC[bA].columns){var bD=bB.length;bB.push(bC[bA]);if(!aB(bE,bC[bA].columns,bB)){bB.splice(bD,bB.length-bD)}else{return true}}}}return false}function v(bA,bB){var bC=bB?aD:Y;bA.hidden=!bB;bA.attributes=bC(bA.attributes);bA.footerAttributes=bC(bA.footerAttributes);bA.headerAttributes=bC(bA.headerAttributes)}function a1(){return this.style.display!=="none"}function bp(bA){return D([bA]).length>0}function D(bA){return m(bA,function(bC){var bB=!bC.hidden;if(bB&&bC.columns){bB=D(bC.columns).length>0}return bB})}function ab(bA){return bd(bA).map(function(){return this.toArray()})}function aO(bB,bC,bA){var bE=bo(j(bC));var bF=bo(be(bC));var bD=bB.rowSpan;if(bA){if(bE>bF){bB.rowSpan=bD-(bE-bF)||1}else{bB.rowSpan=bD+(bF-bE)}}else{if(bE>bF){bB.rowSpan=bD+(bE-bF)}else{bB.rowSpan=bD-(bF-bE)||1}}}function bt(bB,bG,bJ,bF,bC,bH,bD){var bI=bo(bB);var bA=bo([bG]);if(bI>bA){var bE=new Array(bD+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>');var bK=bH.children(":not(.k-filter-row)");bd(new Array(bI-bA+1).join("<tr>"+bE+"</tr>")).insertAfter(bK.last())}e(bH,bI-bA);i(bJ,bF,bC,bH)}function a2(bG,bD,bE){bE=bE||0;var bF;var bI;var bC=bD;bD=ad(bD);var bJ={};var bK=bG.find(">tr:not(.k-filter-row)");var bA=function(){var bL=bd(this);return !bL.hasClass("k-group-cell")&&!bL.hasClass("k-hierarchy-cell")};for(var bH=0,bB=bD.length;bH<bB;bH++){bF=ay(bD[bH],bC);if(!bJ[bF.row]){bJ[bF.row]=bK.eq(bF.row).find(".k-header").filter(bA)}bI=bJ[bF.row].eq(bF.cell);bI.attr(B.attr("index"),bE+bH)}return bD.length}function bo(bE){var bC=1;var bB=0;for(var bA=0;bA<bE.length;bA++){if(bE[bA].columns){var bD=bo(bE[bA].columns);if(bD>bB){bB=bD}}}return bC+bB}function i(bI,bD,bB,bG){var bE=am(bI[0],bD);var bA=bB.find(">tr:not(.k-filter-row):eq("+bE.row+")>th.k-header");var bJ=bd();var bF=bE.cell;var bH;for(bH=0;bH<bI.length;bH++){bJ=bJ.add(bA.eq(bF+bH))}bG.find(">tr:not(.k-filter-row)").eq(bE.row).append(bJ);var bC=[];for(bH=0;bH<bI.length;bH++){if(bI[bH].columns){bC=bC.concat(bI[bH].columns)}}if(bC.length){i(bC,bD,bB,bG)}}function ay(bE,bD,bF,bC){var bB;var bA;bF=bF||0;bC=bC||{};bC[bF]=bC[bF]||0;for(bA=0;bA<bD.length;bA++){if(bD[bA]==bE){bB={cell:bC[bF],row:bF};break}else{if(bD[bA].columns){bB=ay(bE,bD[bA].columns,bF+1,bC);if(bB){break}}}bC[bF]++}return bB}function ak(bC,bB,bD,bF){var bE;var bA=bD.locked;do{bE=bC[bB];bB+=bF?1:-1}while(bE&&bB>-1&&bB<bC.length&&bE!=bD&&!bE.columns&&bE.locked==bA);return bE}function aA(bD,bH,bG,bF){if(bH.columns){bH=bH.columns;return bH[bF?0:bH.length-1]}else{var bE=Q(bH,bD);var bB;if(bE){bB=bE.columns}else{bB=bD}var bC=F(bH,bB);if(bC===0&&bF){bC++}else{if(bC==bB.length-1&&!bF){bC--}else{if(bC>0||bC===0&&!bF){bC+=bF?-1:1}}}var bA=F(bG,bB);bH=ak(bB,bC,bG,bA>bC);if(bH&&bH!=bG&&bH.columns){return aA(bD,bH,bG,bF)}}return null}function am(bE,bD,bF,bC){var bB;var bA;bF=bF||0;bC=bC||{};bC[bF]=bC[bF]||0;for(bA=0;bA<bD.length;bA++){if(bD[bA]==bE){bB={cell:bC[bF],row:bF};break}else{if(bD[bA].columns){bB=am(bE,bD[bA].columns,bF+1,bC);if(bB){break}}}if(!bD[bA].hidden){bC[bF]++}}return bB}function b(bB){var bA=w(j(bB));return bA.concat(w(be(bB)))}function w(bD){var bB=[];var bC=[];for(var bA=0;bA<bD.length;bA++){bB.push(bD[bA]);if(bD[bA].columns){bC=bC.concat(bD[bA].columns)}}if(bC.length){bB=bB.concat(w(bC))}return bB}function aK(bC){var bB=0;var bD;for(var bA=0;bA<bC.length;bA++){bD=bC[bA];if(bD.columns){bB+=aK(bD.columns)}else{if(bD.hidden){bB++}}}return bB}function ao(bE){var bC,bB=0;for(var bA=0,bD=bE.length;bA<bD;bA++){bC=bE[bA].style.width;if(bC&&bC.indexOf("%")==-1){bB+=parseInt(bC,10)}}return bB}function bx(bB,bE){var bC=bB.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");var bD;for(var bA=0;bA<bC.length;bA++){bD=bC[bA].rowSpan;if(bD>1){bC[bA].rowSpan=bD-bE||1}}}function e(bB,bD){var bC=bB.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(var bA=0;bA<bC.length;bA++){bC[bA].rowSpan+=bD}}function A(bB){var bD=bB.find("tr:not(.k-filter-row)");var bE=bD.filter(function(){return !bd(this).children().length}).remove().length;var bC=bD.find("th:not(.k-group-cell,.k-hierarchy-cell)");for(var bA=0;bA<bC.length;bA++){if(bC[bA].rowSpan>1){bC[bA].rowSpan-=bE}}return bD.length-bE}function ag(bC,bG,bI,bE,bD){var bF,bH,bB,bA=[];for(bF=0,bB=bC.length;bF<bB;bF++){bH=bI[bE]||[];bH.push(bG.eq(bD+bF));bI[bE]=bH;if(bC[bF].columns){bA=bA.concat(bC[bF].columns)}}if(bA.length){ag(bA,bG,bI,bE+1,bD+bC.length)}}function j(bA){return m(bA,function(bB){return bB.locked})}function be(bA){return m(bA,function(bB){return !bB.locked})}function bl(bA){return m(bA,function(bB){return !bB.locked&&bp(bB)})}function a7(bA){return m(bA,function(bB){return bB.locked&&bp(bB)})}function P(bC){var bB=[];for(var bA=0;bA<bC.length;bA++){if(bC[bA].hidden){continue}if(bC[bA].columns){bB=bB.concat(P(bC[bA].columns))}else{bB.push(bC[bA])}}return bB}function ad(bC){var bB=[];for(var bA=0;bA<bC.length;bA++){if(!bC[bA].columns){bB.push(bC[bA]);continue}bB=bB.concat(ad(bC[bA].columns))}return bB}function r(bA){var bE=bA.find(">tr:not(.k-filter-row)");var bC=function(){var bF=bd(this);return !bF.hasClass("k-group-cell")&&!bF.hasClass("k-hierarchy-cell")};var bB=bd();if(bE.length>1){bB=bE.find("th").filter(bC).filter(function(){return this.rowSpan>1})}bB=bB.add(bE.last().find("th").filter(bC));var bD=B.attr("index");bB.sort(function(bG,bF){bG=bd(bG);bF=bd(bF);var bI=bG.attr(bD);var bH=bF.attr(bD);if(bI===G){bI=bd(bG).index()}if(bH===G){bH=bd(bF).index()}bI=parseInt(bI,10);bH=parseInt(bH,10);return bI>bH?1:bI<bH?-1:0});return bB}function aI(bK){var bC=bK.closest("table");var bM=bd().add(bK);var bL=bK.closest("tr");var bF=bC.find("tr:not(.k-filter-row)");var bB=bF.index(bL);if(bB>0){var bJ=bF.eq(bB-1);var bH=bJ.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return !bd(this).attr("rowspan")});var bD=0;var bE=bL.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(bK);var bG=bK.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1});for(var bI=0;bI<bG.length;bI++){bD+=bG[bI].colSpan||1}bE+=Math.max(bD-1,0);bD=0;for(bI=0;bI<bH.length;bI++){var bA=bH.eq(bI);if(bA.attr("colSpan")){bD+=bA[0].colSpan}else{bD+=1}if(bE>=bI&&bE<bD){bM=aI(bA).add(bM);break}}}return bM}function aJ(bK){var bB=bK.closest("thead");var bN=bd().add(bK);var bM=bK.closest("tr");var bG=bB.find("tr:not(.k-filter-row)");var bA=bG.index(bM)+bK[0].rowSpan;var bE=B.attr("colspan");if(bA<=bG.length-1){var bC=bM.next();var bH=bK.prevAll(":not(.k-group-cell,.k-hierarchy-cell)");var bJ;bH=bH.filter(function(){return !this.rowSpan||this.rowSpan===1});var bD=0;for(bJ=0;bJ<bH.length;bJ++){bD+=parseInt(bH.eq(bJ).attr(bE),10)||1}var bL=bC.find("th:not(.k-group-cell,.k-hierarchy-cell)");var bF=parseInt(bK.attr(bE),10)||1;bJ=0;while(bJ<bF){bC=bL.eq(bJ+bD);bN=bN.add(aJ(bC));var bI=parseInt(bC.attr(bE),10);if(bI>1){bF-=bI-1}bJ++}}return bN}function a5(bA,bD,bC,bE){var bF,bB=bA;if(bE){bA.empty()}if(K){bA[0].innerHTML=bC}else{bF=document.createElement("div");bF.innerHTML="<table><tbody>"+bC+"</tbody></table>";bA=bF.firstChild.firstChild;bD[0].replaceChild(bA,bB[0]);bA=bd(bA)}return bA}function Y(bA){bA=bA||{};var bB=bA.style;if(!bB){bB="display:none"}else{bB=bB.replace(/((.*)?display)(.*)?:([^;]*)/i,"$1:none");if(bB===bA.style){bB=bB.replace(/(.*)?/i,"display:none;$1")}}return aP({},bA,{style:bB})}function aD(bA){bA=bA||{};var bB=bA.style;if(bB){bA.style=bB.replace(/(display\s*:\s*none\s*;?)*/gi,"")}return bA}function bu(bE,bC,bG,bA){var bB=bE.find(">colgroup"),bD,bF=H(bC,function(bH){bD=bH.width;if(bD&&parseInt(bD,10)!==0){return B.format('<col style="width:{0}"/>',typeof bD===br?bD:bD+"px")}return"<col />"});if(bG||bB.find(".k-hierarchy-col").length){bF.splice(0,0,'<col class="k-hierarchy-col" />')}if(bB.length){bB.remove()}bB=bd(new Array(bA+1).join('<col class="k-group-col">')+bF.join(""));if(!bB.is("colgroup")){bB=bd("<colgroup/>").append(bB)}bE.prepend(bB);if(bf.msie&&bf.version==8){bE.css("display","inline-table");window.setTimeout(function(){bE.css("display","")},1)}}function bz(bC,bD){var bF=0;var bB,bA;var bE=bC.find("th:not(.k-group-cell)");for(bB=0,bA=bD.length;bB<bA;bB++){if(bD[bB].locked){bE.eq(bB).insertBefore(bE.eq(bF));bE=bC.find("th:not(.k-group-cell)");bF++}}}function al(bE){var bB={},bD,bA,bC;for(bA=0,bC=bE.length;bA<bC;bA++){bD=bE[bA];bB[bD.value]=bD.text}return bB}function ai(bC,bE,bF,bD){var bB=bF&&bF.length&&V(bF[0])&&"value" in bF[0],bA=bB?al(bF)[bC]:bC;bA=bA!=null?bA:"";return bE?B.format(bE,bA):bD===false?bA:B.htmlEncode(bA)}function c(bC,bB,bF){var bE=0,bD,bA=bC[bE];while(bA){bD=bF?true:bA.style.display!=="none";if(bD&&!aF.test(bA.className)&&--bB<0){bA.style.display=bF?"":"none";break}bA=bC[++bE]}}function aM(bE,bC){var bB=0,bD=bE.length,bA,bF;for(;bB<bD;bB+=1){bF=bE.eq(bB);if(bF.is(".k-grouping-row,.k-detail-row")){bA=bF.children(":not(.k-group-cell):first,.k-detail-cell").last();bA.attr("colspan",parseInt(bA.attr("colspan"),10)-1)}else{if(bF.hasClass("k-grid-edit-row")&&(bA=bF.children(".k-edit-container")[0])){bA=bd(bA);bA.attr("colspan",parseInt(bA.attr("colspan"),10)-1);bA.find("col").eq(bC).remove();bF=bA.find("tr:first")}c(bF[0].cells,bC,false)}}}function aC(bD){var bB=[];var bC;for(var bA=0;bA<bD.length;bA++){bC=bD[bA];if(!("field" in bC&&"value" in bC&&"items" in bC)){break}bB.push(bC);if(bC.hasSubgroups){bB=bB.concat(aC(bC.items))}}return bB}function k(bD){var bB=[];var bC;for(var bA=0;bA<bD.length;bA++){bC=bD[bA];if(!("field" in bC&&"value" in bC&&"items" in bC)){break}if(bC.hasSubgroups){bB=bB.concat(k(bC.items))}bB.push(bC.aggregates)}return bB}function T(bF,bD){var bB=0,bE=bF.length,bA,bG,bC;for(;bB<bE;bB+=1){bG=bF.eq(bB);if(bG.is(".k-grouping-row,.k-detail-row")){bA=bG.children(":not(.k-group-cell):first,.k-detail-cell").last();bA.attr("colspan",parseInt(bA.attr("colspan"),10)+1)}else{if(bG.hasClass("k-grid-edit-row")&&(bA=bG.children(".k-edit-container")[0])){bA=bd(bA);bA.attr("colspan",parseInt(bA.attr("colspan"),10)+1);bu(bA.find(">form>table"),D(bC),false,0);bG=bA.find("tr:first")}c(bG[0].cells,bD,true)}}}function aU(bC,bD,bB){bB=bB||1;var bF,bA,bE;for(bA=0,bE=bC.length;bA<bE;bA++){bF=bC.eq(bA).children().last();bF.attr("colspan",parseInt(bF.attr("colspan"),10)+bB);bF=bD.eq(bA).children().last();bF.attr("colspan",parseInt(bF.attr("colspan"),10)-bB)}}function bj(bD){var bA,bC,bB=0;var bE=bD.find(">colgroup>col");for(bA=0,bC=bE.length;bA<bC;bA+=1){bB+=parseInt(bE[bA].style.width,10)}return bB}var a0=B.ui.DataBoundWidget.extend({init:function(bC,bA,bB){var bD=this;bA=d(bA)?{dataSource:bA}:bA;q.fn.init.call(bD,bC,bA);if(bB){bD._events=bB}I=B.support.isRtl(bC);bD._element();bD._aria();bD._columns(bD.options.columns);bD._dataSource();bD._tbody();bD._pageable();bD._thead();bD._groupable();bD._toolbar();bD._setContentHeight();bD._templates();bD._navigatable();bD._selectable();bD._clipboard();bD._details();bD._editable();bD._attachCustomCommandsEvent();bD._minScreenSupport();if(bD.options.autoBind){bD.dataSource.fetch()}else{bD._group=bD._groups()>0;bD._footer()}if(bD.lockedContent){bD.wrapper.addClass("k-grid-lockedcolumns");bD._resizeHandler=function(){bD.resize()};bd(window).on("resize"+bq,bD._resizeHandler)}B.notify(bD)},events:[aa,"dataBinding","cancel",M,p,aL,y,f,a3,ah,bc,by,bs,bv,aZ,aY,J,U,h,N,"page","sort","filter","group"],setDataSource:function(bC){var bA=this;var bB=bA.options.scrollable;bA.options.dataSource=bC;bA._dataSource();bA._pageable();bA._thead();if(bB){if(bB.virtual){bA.content.find(">.k-virtual-scrollable-wrap").scrollLeft(0)}else{bA.content.scrollLeft(0)}}if(bA.options.groupable){bA._groupable()}if(bA.virtualScrollable){bA.virtualScrollable.setDataSource(bA.options.dataSource)}if(bA.options.navigatable){bA._navigatable()}if(bA.options.selectable){bA._selectable()}if(bA.options.autoBind){bC.fetch()}},options:{name:"Grid",columns:[],toolbar:null,autoBind:true,filterable:false,scrollable:true,sortable:false,selectable:false,allowCopy:false,navigatable:false,pageable:false,editable:false,groupable:false,rowTemplate:"",altRowTemplate:"",noRecords:false,dataSource:{},height:null,resizable:false,reorderable:false,columnMenu:false,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",messages:{editable:{cancelDelete:an,confirmation:t,confirmDelete:aR},commands:{create:av.create.text,cancel:av.cancel.text,save:av.save.text,destroy:av.destroy.text,edit:av.edit.text,update:av.update.text,canceledit:av.canceledit.text,excel:av.excel.text,pdf:av.pdf.text},noRecords:bw}},destroy:function(){var bB=this,bA;bB._angularItems("cleanup");bB._destroyColumnAttachments();q.fn.destroy.call(bB);this._navigatableTables=null;if(bB._resizeHandler){bd(window).off("resize"+bq,bB._resizeHandler)}if(bB.pager&&bB.pager.element){bB.pager.destroy()}bB.pager=null;if(bB.groupable&&bB.groupable.element){bB.groupable.element.kendoGroupable("destroy")}bB.groupable=null;if(bB.options.reorderable){bB.wrapper.data("kendoReorderable").destroy()}if(bB.selectable&&bB.selectable.element){bB.selectable.destroy();bB.clearArea();if(bB.copyHandler){bB.wrapper.off("keydown",bB.copyHandler);bB.unbind(bB.copyHandler)}if(bB.updateClipBoardState){bB.unbind(bB.updateClipBoardState);bB.updateClipBoardState=null}if(bB.clearAreaHandler){bB.wrapper.off("keyup",bB.clearAreaHandler)}}bB.selectable=null;if(bB.resizable){bB.resizable.destroy();if(bB._resizeUserEvents){if(bB._resizeHandleDocumentClickHandler){bd(document).off("click",bB._resizeHandleDocumentClickHandler)}bB._resizeUserEvents.destroy();bB._resizeUserEvents=null}bB.resizable=null}if(bB.virtualScrollable&&bB.virtualScrollable.element){bB.virtualScrollable.destroy()}bB.virtualScrollable=null;bB._destroyEditable();if(bB.dataSource){bB.dataSource.unbind(aa,bB._refreshHandler).unbind(a6,bB._progressHandler).unbind(Z,bB._errorHandler);bB._refreshHandler=bB._progressHandler=bB._errorHandler=null}bA=bB.element.add(bB.wrapper).add(bB.table).add(bB.thead).add(bB.wrapper.find(">.k-grid-toolbar"));if(bB.content){bA=bA.add(bB.content).add(bB.content.find(">.k-virtual-scrollable-wrap"))}if(bB.lockedHeader){bB._removeLockedContainers()}if(bB.pane){bB.pane.destroy()}if(bB.minScreenResizeHandler){bd(window).off("resize",bB.minScreenResizeHandler)}if(bB._draggableInstance&&bB._draggableInstance.element){bB._draggableInstance.destroy()}bB._draggableInstance=null;bA.off(bq);B.destroy(bB.wrapper);bB.rowTemplate=bB.altRowTemplate=bB.lockedRowTemplate=bB.lockedAltRowTemplate=bB.detailTemplate=bB.footerTemplate=bB.groupFooterTemplate=bB.lockedGroupFooterTemplate=bB.noRecordsTemplate=null;bB.scrollables=bB.thead=bB.tbody=bB.element=bB.table=bB.content=bB.footer=bB.wrapper=bB.lockedTable=bB.lockedContent=bB.lockedHeader=bB.lockedFooter=bB._groupableClickHandler=bB._setContentWidthHandler=null},getOptions:function(){var bC=this.options;bC.dataSource=null;var bB=aP(true,{},this.options);bB.columns=B.deepExtend([],this.columns);var bD=this.dataSource;var bA=bD.options.data&&bD._data;bD.options.data=null;bB.dataSource=bd.extend(true,{},bD.options);bD.options.data=bA;bB.dataSource.data=bA;bB.dataSource.page=bD.page();bB.dataSource.filter=bD.filter();bB.dataSource.pageSize=bD.pageSize();bB.dataSource.sort=bD.sort();bB.dataSource.group=bD.group();bB.dataSource.aggregate=bD.aggregate();if(bB.dataSource.transport){bB.dataSource.transport.dataSource=null}if(bB.pageable&&bB.pageable.pageSize){bB.pageable.pageSize=bD.pageSize()}bB.$angular=G;return bB},setOptions:function(bC){var bB=this.getOptions();B.deepExtend(bB,bC);if(!bC.dataSource){bB.dataSource=this.dataSource}var bF=this.wrapper;var bE=this._events;var bD=this.element;this.destroy();this.options=null;if(this._isMobile){var bA=bF.closest(B.roleSelector("pane")).parent();bA.after(bF);bA.remove();bF.removeClass("k-grid-mobile")}if(bF[0]!==bD[0]){bF.before(bD);bF.remove()}bD.empty();this.init(bD,bB,bE);this._setEvents(bB)},items:function(){if(this.lockedContent){return this._items(this.tbody).add(this._items(this.lockedTable.children("tbody")))}else{return this._items(this.tbody)}},_items:function(bA){return bA.children().filter(function(){var bB=bd(this);return !bB.hasClass("k-grouping-row")&&!bB.hasClass("k-detail-row")&&!bB.hasClass("k-group-footer")})},dataItems:function(){var bA=B.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){var bD=bA.length,bC=new Array(2*bD);for(var bB=bD;--bB>=0;){bC[bB]=bC[bB+bD]=bA[bB]}bA=bC}return bA},_destroyColumnAttachments:function(){var bA=this;bA.resizeHandle=null;if(!bA.thead){return}this.angular("cleanup",function(){return{elements:bA.thead.get()}});bA.thead.add(bA.lockedHeader).find("th").each(function(){var bB=bd(this),bE=bB.data("kendoFilterMenu"),bD=bB.data("kendoColumnSorter"),bC=bB.data("kendoColumnMenu");if(bE){bE.destroy()}if(bD){bD.destroy()}if(bC){bC.destroy()}})},_attachCustomCommandsEvent:function(){var bD=this,bB=ad(bD.columns||[]),bE,bA,bC;for(bA=0,bC=bB.length;bA<bC;bA++){bE=bB[bA].command;if(bE){ar(bD,bD.wrapper,bE)}}},_aria:function(){var bA=this.element.attr("id")||"aria";if(bA){this._cellId=bA+"_active_cell"}},_element:function(){var bB=this,bA=bB.element;if(!bA.is("table")){if(bB.options.scrollable){bA=bB.element.find("> .k-grid-content > table")}else{bA=bB.element.children("table")}if(!bA.length){bA=bd("<table />").appendTo(bB.element)}}if(at){bA.attr("cellspacing",0)}bB.table=bA.attr("role",bB._hasDetails()?"treegrid":"grid");bB._wrapper()},_createResizeHandle:function(bB,bC){var bI=this;var bG=bI.options.columnResizeHandleWidth;var bK=bI.options.scrollable;var bM=bI.resizeHandle;var bD=this._groups();var bF;if(bM&&bI.lockedContent&&bM.data("th")[0]!==bC[0]){bM.off(bq).remove();bM=null}if(!bM){bM=bI.resizeHandle=bd('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>');bB.append(bM)}if(!I){bF=bC[0].offsetWidth;var bN=r(bC.closest("thead")).filter(":visible");for(var bL=0;bL<bN.length;bL++){if(bN[bL]==bC[0]){break}bF+=bN[bL].offsetWidth}if(bD>0){bF+=W(bB.find(".k-group-cell:first"))*bD}if(bI._hasDetails()){bF+=W(bB.find(".k-hierarchy-cell:first"))}}else{bF=bC.position().left;if(bK){var bJ=bC.closest(".k-grid-header-wrap, .k-grid-header-locked"),bA=bf.msie?bJ.scrollLeft():0,bE=bf.webkit?bJ[0].scrollWidth-bJ[0].offsetWidth-bJ.scrollLeft():0,bH=bf.mozilla?bJ[0].scrollWidth-bJ[0].offsetWidth-(bJ[0].scrollWidth-bJ[0].offsetWidth-bJ.scrollLeft()):0;bF-=bE-bH+bA}}bM.css({top:bC.position().top,left:bF-bG,height:o(bC),width:bG*3}).data("th",bC).show();bM.off("dblclick"+bq).on("dblclick"+bq,function(){bI._autoFitLeafColumn(bC.data("index"))})},_positionColumnResizeHandle:function(){var bA=this,bB=bA.options.columnResizeHandleWidth,bC=bA.lockedHeader?bA.lockedHeader.find("thead:first"):bd();bA.thead.add(bC).on("mousemove"+bq,"th",function(bI){var bG=bd(this);if(bG.hasClass("k-group-cell")||bG.hasClass("k-hierarchy-cell")){return}function bF(){var bJ=parseFloat(bd(document.documentElement).css("zoom"));if(isNaN(bJ)){bJ=1}var bK=parseFloat(bd(document.body).css("zoom"));if(isNaN(bK)){bK=1}return bJ*bK}var bE=bI.clientX/bF(),bH=bd(window).scrollLeft(),bD=bG.offset().left+(!I?this.offsetWidth:0);if(bE+bH>bD-bB&&bE+bH<bD+bB){bA._createResizeHandle(bG.closest("div"),bG)}else{if(bA.resizeHandle){bA.resizeHandle.hide()}else{n(bA.wrapper,"")}}})},_resizeHandleDocumentClick:function(bA){if(bd(bA.target).closest(".k-column-active").length){return}bd(document).off(bA);this._hideResizeHandle()},_hideResizeHandle:function(){if(this.resizeHandle){this.resizeHandle.data("th").removeClass("k-column-active");if(this.lockedContent&&!this._isMobile){this.resizeHandle.off(bq).remove();this.resizeHandle=null}else{this.resizeHandle.hide()}}},_positionColumnResizeHandleTouch:function(){var bA=this,bB=bA.lockedHeader?bA.lockedHeader.find("thead:first"):bd();bA._resizeUserEvents=new B.UserEvents(bB.add(bA.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,hold:function(bD){var bC=bd(bD.target);bD.preventDefault();bC.addClass("k-column-active");bA._createResizeHandle(bC.closest("div"),bC);if(!bA._resizeHandleDocumentClickHandler){bA._resizeHandleDocumentClickHandler=L(bA._resizeHandleDocumentClick,bA)}bd(document).on("click",bA._resizeHandleDocumentClickHandler)}})},_resizable:function(){var bG=this,bL=bG.options,bB,bE,bD,bH,bI,bJ=this._isMobile,bK=!B.support.mobileOS?B.support.scrollbar():0,bA,bF,bC;if(bL.resizable){bB=bL.scrollable?bG.wrapper.find(".k-grid-header-wrap:first"):bG.wrapper;if(bJ){bG._positionColumnResizeHandleTouch(bB)}else{bG._positionColumnResizeHandle(bB)}if(bG.resizable){bG.resizable.destroy()}bG.resizable=new aw.Resizable(bB.add(bG.lockedHeader),{handle:(!!bL.scrollable?"":">")+".k-resize-handle",hint:function(bM){return bd('<div class="k-grid-resize-indicator" />').css({height:o(bM.data("th"))+bG.tbody.attr("clientHeight")})},start:function(bO){bC=bd(bO.currentTarget).data("th");if(bJ){bG._hideResizeHandle()}var bQ=bC.closest("table"),bN=bd.inArray(bC[0],r(bC.closest("thead")).filter(":visible"));bA=bQ.parent().hasClass("k-grid-header-locked");var bM=bA?bG.lockedTable:bG.table,bP=bG.footer||bd();if(bG.footer&&bG.lockedContent){bP=bA?bG.footer.children(".k-grid-footer-locked"):bG.footer.children(".k-grid-footer-wrap")}n(bG.wrapper,"col-resize");if(bL.scrollable){bF=bQ.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bN+")").add(bM.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bN+")")).add(bP.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bN+")"))}else{bF=bM.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bN+")")}bE=bO.x.location;bD=W(bC);bH=ad(bG.columns)[bN].minResizableWidth||10;bI=bA?W(bM.children("tbody")):W(bG.tbody);if(bf.webkit){bG.wrapper.addClass("k-grid-column-resizing")}},resize:function(bQ){var bR=I?-1:1,bN=bD+bQ.x.location*bR-bE*bR;if(bL.scrollable){var bT;if(bA&&bG.lockedFooter){bT=bG.lockedFooter.children("table")}else{if(bG.footer){bT=bG.footer.find(">.k-grid-footer-wrap>table")}}if(!bT||!bT[0]){bT=bd()}var bO=bC.closest("table");var bU=bA?bG.lockedTable:bG.table;var bS=false;var bP=bG.wrapper.width()-bK;var bM=bN;if(bA&&bI-bD+bM>bP){bM=bD+(bP-bI-bK*2);if(bM<0){bM=bN}bS=true}if(bM>10&&bM>=bH){bF.css("width",bM);if(bI){if(bS){bM=bP-bK*2}else{bM=bI+bQ.x.location*bR-bE*bR}bU.add(bO).add(bT).css("width",bM);if(!bA){bG._footerWidth=bM}}}}else{if(bN>10&&bN>=bH){bF.css("width",bN)}}},resizeend:function(){var bO=W(bC),bN,bP;n(bG.wrapper,"");if(bf.webkit){bG.wrapper.removeClass("k-grid-column-resizing")}if(bD!=bO){bP=bG.lockedHeader?bG.lockedHeader.find("thead:first tr:first").add(bG.thead.find("tr:first")):bC.parent();var bM=bC.attr(B.attr("index"));if(!bM){bM=bP.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(bC)}bN=ad(bG.columns)[bM];bN.width=bO;bG.trigger(bv,{column:bN,oldWidth:bD,newWidth:bO});bG._applyLockedContainersWidth();bG._syncLockedContentHeight();bG._syncLockedHeaderHeight()}bG._hideResizeHandle();bC=null}})}},_draggable:function(){var bA=this;if(bA.options.reorderable){if(bA._draggableInstance){bA._draggableInstance.destroy()}var bB=bA.wrapper.children(".k-grid-header");bA._draggableInstance=bA.wrapper.kendoDraggable({group:B.guid(),autoScroll:true,filter:bA.content?".k-grid-header:first "+aQ:"table:first>.k-grid-header "+aQ,dragstart:function(){bB.children(".k-grid-header-wrap").unbind("scroll"+bq+"scrolling").bind("scroll"+bq+"scrolling",function(bC){if(bA.virtualScrollable){bA.content.find(">.k-virtual-scrollable-wrap").scrollLeft(this.scrollLeft)}else{bA.scrollables.not(bC.currentTarget).scrollLeft(this.scrollLeft)}})},dragend:function(){bB.children(".k-grid-header-wrap").unbind("scroll"+bq+"scrolling")},drag:function(){bA._hideResizeHandle()},hint:function(bC){var bD=bC.attr(B.attr("title"));if(bD){bD=B.htmlEncode(bD)}return bd('<div class="k-header k-drag-clue" />').css({width:bC.width(),paddingLeft:bC.css("paddingLeft"),paddingRight:bC.css("paddingRight"),lineHeight:bC.height()+"px",paddingTop:bC.css("paddingTop"),paddingBottom:bC.css("paddingBottom")}).html(bD||bC.attr(B.attr("field"))||bC.text()).prepend('<span class="k-icon k-drag-status k-i-cancel" />')}}).data("kendoDraggable")}},_reorderable:function(){var bB=this;if(bB.options.reorderable){if(bB.wrapper.data("kendoReorderable")){bB.wrapper.data("kendoReorderable").destroy()}var bA=function(bE,bC,bD){var bG=bE[bC];var bH=bE[bD];var bF=Q(bG,bB.columns);bE=bF?bF.columns:bB.columns;return F(bH,bE)};bB.wrapper.kendoReorderable({draggable:bB._draggableInstance,dragOverContainers:function(bC,bD){var bE=b(bB.columns);return bE[bC].lockable!==false&&bA(bE,bC,bD)>-1},inSameContainer:function(bC){return bd(bC.source).parent()[0]===bd(bC.target).parent()[0]&&bA(b(bB.columns),bC.sourceIndex,bC.targetIndex)>-1},change:function(bF){var bD=b(bB.columns);var bE=bD[bF.oldIndex];var bC=bA(bD,bF.oldIndex,bF.newIndex);bB.trigger(aZ,{newIndex:bC,oldIndex:F(bE,bD),column:bE});bB.reorderColumn(bC,bE,bF.position==="before")}})}},_reorderHeader:function(bB,bF,bH){var bE=this;var bD=ay(bB[0],bE.columns);var bG=ay(bF,bE.columns);var bJ=[];for(var bI=0;bI<bB.length;bI++){if(bB[bI].columns){bJ=bJ.concat(bB[bI].columns)}}var bA=bm(bE.lockedHeader,bE.thead,"tr:eq("+bD.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)");var bK=j(bB).length;var bC=j([bF]).length;if(bJ.length){if(bK>0&&bC===0){bt(bB,bF,bJ,bE.columns,bE.lockedHeader.find("thead"),bE.thead,this._groups())}else{if(bK===0&&bC>0){bt(bB,bF,bJ,bE.columns,bE.thead,bE.lockedHeader.find("thead"),this._groups())}}if(bF.columns||bD.cell-bG.cell>1||bG.cell-bD.cell>1){bF=aA(bE.columns,bF,bB[0],bH);if(bF){bE._reorderHeader(bJ,bF,bH)}}}else{if(bK!==bC){aO(bA[bD.cell],bE.columns,bK)}}ae(bA,bD.cell,bG.cell,bH,bB.length)},_reorderContent:function(bB,bO,bK){var bG=this;var bF=bd();var bN=bB[0];var bH=D(bB);var bD=F(bN,ad(bG.columns));var bS=F(bO,ad(bG.columns));var bE=F(bN,P(bG.columns));var bA=F(bO,P(bG.columns));var bR=j(bG.columns).length;var bI=!!bO.locked;var bM=bG.footer||bG.wrapper.find(".k-grid-footer");var bP,bQ;bP=bQ=bA;if(bO.hidden){if(bI){bA=bG.lockedTable.find("colgroup");bP=bG.lockedHeader.find("colgroup");bQ=bd(bG.lockedFooter).find(">table>colgroup")}else{bA=bG.tbody.prev();bP=bG.thead.prev();bQ=bM.find(".k-grid-footer-wrap").find(">table>colgroup")}}if(bG._hasFilterRow()){ae(bG.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),bD,bS,bK,bB.length)}ae(bm(bG.lockedHeader,bG.thead.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),bE,bP,bK,bH.length);if(bG.options.scrollable){ae(bm(bG.lockedTable,bG.tbody.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),bE,bA,bK,bH.length)}if(bM&&bM.length){ae(bm(bG.lockedFooter,bM.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),bE,bQ,bK,bH.length);ae(bM.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),bD,bS,bK,bB.length)}var bJ=bG.tbody.children(":not(.k-grouping-row,.k-detail-row)");if(bG.lockedTable){if(bR>bS){if(bR<=bD){aU(bG.lockedTable.find(">tbody>tr.k-grouping-row"),bG.table.find(">tbody>tr.k-grouping-row"),bB.length)}}else{if(bR>bD){aU(bG.table.find(">tbody>tr.k-grouping-row"),bG.lockedTable.find(">tbody>tr.k-grouping-row"),bB.length)}}bF=bG.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)")}for(var bL=0,bC=bJ.length;bL<bC;bL+=1){ae(bm(bF[bL],bJ[bL],">td:not(.k-group-cell,.k-hierarchy-cell)"),bD,bS,bK,bB.length)}},_autoFitLeafColumn:function(bA){this.autoFitColumn(ad(this.columns)[bA])},autoFitColumn:function(bC){var bJ=this,bF=bJ.options,bA=bJ.columns,bI,bH,bO,bL,bV=bJ.lockedHeader?r(bJ.lockedHeader.find(">table>thead")).filter(a1).length:0,bG,bR,bS,bB="col:not(.k-group-col):not(.k-hierarchy-col)",bY="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)";if(typeof bC=="number"){bC=bA[bC]}else{if(V(bC)){bC=m(w(bA),function(b0){return b0===bC})[0]}else{bC=m(w(bA),function(b0){return b0.field===bC})[0]}}if(!bC||!bp(bC)){return}bI=F(bC,ad(bA));bL=bC.locked;if(bL){bO=bJ.lockedHeader.children("table")}else{bO=bJ.thead.parent()}bH=bO.find("[data-index='"+bI+"']");var bU=bL?bJ.lockedTable:bJ.table,bQ=bJ.footer||bd();if(bJ.footer&&bJ.lockedContent){bQ=bL?bJ.footer.children(".k-grid-footer-locked"):bJ.footer.children(".k-grid-footer-wrap")}var bX=bQ.find("table").first();if(bJ.lockedHeader&&!bL){bI-=bV}for(var bT=0;bT<bA.length;bT++){if(bA[bT]===bC){break}else{if(bA[bT].hidden){bI--}}}if(bF.scrollable){bG=bO.find(bB).eq(bI).add(bU.children("colgroup").find(bB).eq(bI)).add(bX.find("colgroup").find(bB).eq(bI));if(!bL){bR=bU.parent();bS=bR.scrollLeft()}}else{bG=bU.children("colgroup").find(bB).eq(bI)}var bK=bO.add(bU).add(bX);var bZ=W(bH);bG.width("");bK.css("table-layout","fixed");bG.width("auto");bK.addClass("k-autofitting");bK.css("table-layout","");var bM=Math.ceil(Math.max(W(bH),W(bU.find("tr:not(.k-grouping-row)").eq(0).children(bY).eq(bI)),W(bX.find("tr").eq(0).children(bY).eq(bI))))+1;bG.width(bM);bC.width=bM;if(bF.scrollable){var bN=bO.find("col"),bW,bD=0;for(var bP=0,bE=bN.length;bP<bE;bP+=1){bW=bN[bP].style.width;if(bW&&bW.indexOf("%")==-1){bD+=parseInt(bW,10)}else{bD=0;break}}if(bD){bK.each(function(){this.style.width=bD+"px"})}}if(bf.msie&&bf.version==8){bK.css("display","inline-table");setTimeout(function(){bK.css("display","table")},1)}bK.removeClass("k-autofitting");if(bS){bR.scrollLeft(bS)}bJ.trigger(bv,{column:bC,oldWidth:bZ,newWidth:bM});bJ._applyLockedContainersWidth();bJ._syncLockedContentHeight();bJ._syncLockedHeaderHeight()},reorderColumn:function(bE,bC,bI){var bF=this,bJ=Q(bC,bF.columns),bD=bJ?bJ.columns:bF.columns,bG=F(bC,bD),bH=bD[bE],bB,bA=!!bH.locked,bK=j(bF.columns).length;if(bG===bE){return}if(!bC.locked&&bA&&be(bF.columns).length==1){return}if(bC.locked&&!bA&&bK==1){return}bF._hideResizeHandle();if(bI===G){bI=bE<bG}var bL=[bC];bF._reorderHeader(bL,bH,bI);if(bF.lockedHeader){A(bF.thead);A(bF.lockedHeader)}if(bH.columns){bH=ad(bH.columns);bH=bH[bI?0:bH.length-1]}if(bC.columns){bL=ad(bC.columns)}bF._reorderContent(bL,bH,bI);bB=!!bC.locked;bB=bB!=bA;bC.locked=bA;bD.splice(bI?bE:bE+1,0,bC);bD.splice(bG<bE?bG:bG+1,1);bF._templates();bF._updateColumnCellIndex();bF._updateTablesWidth();bF._applyLockedContainersWidth();bF._syncLockedHeaderHeight();bF._syncLockedContentHeight();bF._updateFirstColumnClass();if(!bB){return}if(bA){bF.trigger(U,{column:bC})}else{bF.trigger(h,{column:bC})}},_updateColumnCellIndex:function(){var bB;var bA=0;if(this.lockedHeader){bB=this.lockedHeader.find("thead");bA=a2(bB,j(this.columns))}a2(this.thead,be(this.columns),bA)},lockColumn:function(bC){var bB=this.columns;if(typeof bC=="number"){bC=bB[bC]}else{bC=m(bB,function(bD){return bD.field===bC})[0]}if(!bC||bC.locked||bC.hidden){return}var bA=j(bB).length-1;this.reorderColumn(bA,bC,false)},unlockColumn:function(bC){var bB=this.columns;if(typeof bC=="number"){bC=bB[bC]}else{bC=m(bB,function(bD){return bD.field===bC})[0]}if(!bC||!bC.locked||bC.hidden){return}var bA=j(bB).length;this.reorderColumn(bA,bC,true)},cellIndex:function(bB){var bA=0;if(this.lockedTable&&!bd.contains(this.lockedTable[0],bB[0])){bA=ad(j(this.columns)).length}return bd(bB).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(bB)+bA},_modelForContainer:function(bA){bA=bd(bA);if(!bA.is("tr")&&this._editMode()!=="popup"){bA=bA.closest("tr")}var bB=bA.attr(B.attr("uid"));return this.dataSource.getByUid(bB)},_editable:function(){var bD=this,bA=bD.selectable&&bD.selectable.options.multiple,bB=bD.options.editable,bC=function(){var bG=X(),bF=bD._editContainer;if(bF&&!bd.contains(bF[0],bG)&&bF[0]!==bG&&!bd(bG).closest(".k-animation-container").length){if(bD.editable.end()){bD.closeCell()}}};if(bB){this.wrapper.addClass("k-editable");var bE=bD._editMode();if(bE==="incell"){if(bB.update!==false){bD.wrapper.on(bb+bq,"tr:not(.k-grouping-row) > td",function(bG){var bH=bd(this),bF=bD.lockedTable&&bH.closest("table")[0]===bD.lockedTable[0];if(bH.hasClass("k-hierarchy-cell")||bH.hasClass("k-detail-cell")||bH.hasClass("k-group-cell")||bH.hasClass("k-edit-cell")||bH.has("a.k-grid-delete").length||bH.has("button.k-grid-delete").length||bH.closest("tbody")[0]!==bD.tbody[0]&&!bF||bd(bG.target).is(":input")){return}if(bD.editable){if(bD.editable.end()){if(bA){bd(X()).blur()}bD.closeCell();bD.editCell(bH)}}else{bD.editCell(bH)}}).on("focusin"+bq,function(){if(!bd.contains(this,X())){clearTimeout(bD.timer);bD.timer=null}}).on("focusout"+bq,function(){bD.timer=setTimeout(bC,1)})}}else{if(bB.update!==false){bD.wrapper.on(bb+bq,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(bF){bF.preventDefault();bD.editRow(bd(this).closest("tr"))})}}if(bB.destroy!==false){bD.wrapper.on(bb+bq,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(bF){bF.preventDefault();bF.stopPropagation();bD.removeRow(bd(this).closest("tr"))})}else{bD.wrapper.on(bb+bq,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(bF){bF.stopPropagation();if(!bD._confirmation()){bF.preventDefault()}})}}},editCell:function(bA){bA=bd(bA);var bD=this,bC=ad(bD.columns)[bD.cellIndex(bA)],bB=bD._modelForContainer(bA);bD.closeCell();if(bB&&bg(bC,bB)&&!bC.command){bD._attachModelChange(bB);bD._editContainer=bA;bD.editable=bA.addClass("k-edit-cell").kendoEditable({fields:{field:bC.field,format:bC.format,editor:bC.editor,values:bC.values},model:bB,target:bD,change:function(bF){if(bD.trigger(bc,{values:bF.values,container:bA,model:bB})){bF.preventDefault()}}}).data("kendoEditable");var bE=bA.parent().addClass("k-grid-edit-row");if(bD.lockedContent){aS(bE[0],bD._relatedRow(bE).addClass("k-grid-edit-row")[0])}bD.trigger(ah,{container:bA,model:bB})}},_adjustLockedHorizontalScrollBar:function(){var bB=this.table,bA=bB.parent();var bC=bB[0].offsetWidth>bA[0].clientWidth?B.support.scrollbar():0;this.lockedContent.height(bA.height()-bC)},_syncLockedContentHeight:function(){if(this.lockedTable){if(!this.touchScroller){this._adjustLockedHorizontalScrollBar()}this._adjustRowsHeight(this.table,this.lockedTable)}},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var bA=this.lockedHeader.children("table");var bB=this.thead.parent();this._adjustRowsHeight(bA,bB);aH(bA,bB)}},_syncLockedFooterHeight:function(){if(this.lockedFooter&&this.footer&&this.footer.length){this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))}},_destroyEditable:function(){var bB=this;var bA=function(){if(bB.editable){var bC=bB.editView?bB.editView.element:bB._editContainer;if(bC){bC.off(bb+bq,"a.k-grid-cancel",bB._editCancelClickHandler);bC.off(bb+bq,"a.k-grid-update",bB._editUpdateClickHandler)}bB._detachModelChange();bB.editable.destroy();bB.editable=null;bB._editContainer=null;bB._destroyEditView()}};if(bB.editable){if(bB._editMode()==="popup"&&!bB._isMobile){bB._editContainer.data("kendoWindow").bind("deactivate",bA).close()}else{bA()}}if(bB._actionSheet){bB._actionSheet.destroy();bB._actionSheet=null}},_destroyEditView:function(){if(this.editView){this.editView.purge();this.editView=null;this.pane.navigate("")}},_attachModelChange:function(bA){var bB=this;bB._modelChangeHandler=function(bC){bB._modelChange({field:bC.field,model:this})};bA.bind("change",bB._modelChangeHandler)},_detachModelChange:function(){var bC=this,bA=bC._editContainer,bB=bC._modelForContainer(bA);if(bB){bB.unbind(aa,bC._modelChangeHandler)}},closeCell:function(bC){var bE=this,bA=bE._editContainer,bG,bD,bF,bB;if(!bA){return}bG=bA.closest("tr").attr(B.attr("uid"));bB=bE.dataSource.getByUid(bG);if(bC&&bE.trigger("cancel",{container:bA,model:bB})){return}bA.removeClass("k-edit-cell");bD=ad(bE.columns)[bE.cellIndex(bA)];bF=bA.parent().removeClass("k-grid-edit-row");bE._destroyEditable();bE._displayCell(bA,bD,bB);if(bA.hasClass("k-dirty-cell")){bd('<span class="k-dirty"/>').prependTo(bA)}bE.trigger("itemChange",{item:bF,data:bB,ns:aw});if(bE.lockedContent){aS(bF.css("height","")[0],bE._relatedRow(bF).css("height","")[0])}},_displayCell:function(bA,bE,bC){var bF=this,bG={storage:{},count:0},bD=aP({},B.Template,bF.options.templateSettings),bB=B.template(bF._cellTmpl(bE,bG),bD);if(bG.count>0){bB=L(bB,bG.storage)}bA.empty().html(bB(bC));bF.angular("compile",function(){return{elements:bA,data:[{dataItem:bC}]}})},removeRow:function(bA){if(!this._confirmation(bA)){return}this._removeRow(bA)},_removeRow:function(bD){var bB=this,bA,bC=bB._editMode();if(bC!=="incell"){bB.cancelRow()}bD=bd(bD);if(bB.lockedContent){bD=bD.add(bB._relatedRow(bD))}bD=bD.hide();bA=bB._modelForContainer(bD);if(bA&&!bB.trigger(by,{row:bD,model:bA})){bB.dataSource.remove(bA);if(bC==="inline"||bC==="popup"){bB.dataSource.sync()}}else{if(bC==="incell"){bB._destroyEditable()}}},_editMode:function(){var bB="incell",bA=this.options.editable;if(bA!==true){if(typeof bA=="string"){bB=bA}else{bB=bA.mode||bB}}return bB},editRow:function(bE){var bB;var bC=this;if(bE instanceof B.data.ObservableObject){bB=bE}else{bE=bd(bE);bB=bC._modelForContainer(bE)}var bD=bC._editMode();var bA;bC.cancelRow();if(bB){bE=bC.tbody.children("["+B.attr("uid")+"="+bB.uid+"]");bC._attachModelChange(bB);if(bD==="popup"){bC._createPopupEditor(bB)}else{if(bD==="inline"){bC._createInlineEditor(bE,bB)}else{if(bD==="incell"){bd(bE).children(R).each(function(){var bF=bd(this);var bG=ad(bC.columns)[bC.cellIndex(bF)];bB=bC._modelForContainer(bF);if(bB&&(!bB.editable||bB.editable(bG.field))&&bG.field){bC.editCell(bF);return false}})}}}bA=bC.editView?bC.editView.element:bC._editContainer;if(bA){if(!this._editCancelClickHandler){this._editCancelClickHandler=L(this._editCancelClick,this)}bA.on(bb+bq,"a.k-grid-cancel",this._editCancelClickHandler);if(!this._editUpdateClickHandler){this._editUpdateClickHandler=L(this._editUpdateClick,this)}bA.on(bb+bq,"a.k-grid-update",this._editUpdateClickHandler)}}},_editUpdateClick:function(bA){bA.preventDefault();bA.stopPropagation();this.saveRow()},_editCancelClick:function(bE){var bD=this;var bF=bD.options.navigatable;var bC=bD.editable.options.model;var bB=bD.editView?bD.editView.element:bD._editContainer;bE.preventDefault();bE.stopPropagation();if(bD.trigger("cancel",{container:bB,model:bC})){return}var bA=bD.items().index(bd(bD.current()).parent());bD.cancelRow();if(bF){bD._setCurrent(bD.items().eq(bA).children().filter(bi).first());a9(bD.table,true)}},_createPopupEditor:function(bD){var bH=this,bJ="<div "+B.attr("uid")+'="'+bD.uid+'" class="k-popup-edit-form'+(bH._isMobile?" k-mobile-list":"")+'"><div class="k-edit-form-container">',bB,bE,bO=[],bM,bF,bI,bR,bK,bN,bA=ad(bH.columns),bP,bQ=bH.options.editable,bT=bQ.template,bC=V(bQ)?bQ.window:{},bS=aP({},B.Template,bH.options.templateSettings);bC=bC||{};if(bT){if(typeof bT===br){bT=window.unescape(bT)}bJ+=B.template(bT,bS)(bD);for(bM=0,bF=bA.length;bM<bF;bM++){bB=bA[bM];if(bB.command){bN=E(bB.command,"edit");if(bN){bE=bN}}}}else{for(bM=0,bF=bA.length;bM<bF;bM++){bB=bA[bM];if(!bB.command){bJ+='<div class="k-edit-label"><label for="'+bB.field+'">'+(bB.title||bB.field||"")+"</label></div>";if(bg(bB,bD)){bO.push({field:bB.field,format:bB.format,editor:bB.editor,values:bB.values});bJ+="<div "+B.attr("container-for")+'="'+bB.field+'" class="k-edit-field"></div>'}else{var bG={storage:{},count:0};bI=B.template(bH._cellTmpl(bB,bG),bS);if(bG.count>0){bI=L(bI,bG.storage)}bJ+='<div class="k-edit-field">'+bI(bD)+"</div>"}}else{if(bB.command){bN=E(bB.command,"edit");if(bN){bE=bN}}}}}if(bE){if(V(bE)){if(bE.text&&V(bE.text)){bR=bE.text.update;bK=bE.text.cancel}if(bE.attr){bP=bE.attr}}}var bL;if(!bH._isMobile){bJ+='<div class="k-edit-buttons k-state-default">';bJ+=bH._createButton({name:"update",text:bR,attr:bP})+bH._createButton({name:"canceledit",text:bK,attr:bP});bJ+="</div></div></div>";bL=bH._editContainer=bd(bJ).appendTo(bH.wrapper).eq(0).kendoWindow(aP({modal:true,resizable:false,draggable:true,title:"Edit",visible:false,close:function(bV){if(bV.userTriggered){bV.sender.element.focus();if(bH.trigger("cancel",{container:bL,model:bD})){bV.preventDefault();return}var bU=bH.items().index(bd(bH.current()).parent());bH.cancelRow();if(bH.options.navigatable){bH._setCurrent(bH.items().eq(bU).children().filter(bi).first());a9(bH.table,true)}}}},bC))}else{bJ+="</div></div>";bH.editView=bH.pane.append("<div data-"+B.ns+'role="view" data-'+B.ns+'use-native-scrolling="true" data-'+B.ns+'init-widgets="false" class="k-grid-edit-form"><div data-'+B.ns+'role="header" class="k-header">'+bH._createButton({name:"update",text:bR,attr:bP})+(bC.title||"Edit")+bH._createButton({name:"canceledit",text:bK,attr:bP})+"</div>"+bJ+"</div>");bL=bH._editContainer=bH.editView.element.find(".k-popup-edit-form")}bH.editable=bH._editContainer.kendoEditable({fields:bO,model:bD,clearContainer:false,target:bH}).data("kendoEditable");if(bH._isMobile){bL.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){bd(this).next().children("input").click()})}bH._openPopUpEditor();bH.trigger(ah,{container:bL,model:bD})},_openPopUpEditor:function(){if(!this._isMobile){this._editContainer.data("kendoWindow").center().open()}else{this.pane.navigate(this.editView,this._editAnimation)}},_createInlineEditor:function(bG,bC){var bE=this,bD,bB,bF,bA=[];if(bE.lockedContent){bG=bG.add(bE._relatedRow(bG))}bG.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){bB=bd(this);bD=ad(bE.columns)[bE.cellIndex(bB)];if(!bD.command&&bg(bD,bC)){bA.push({field:bD.field,format:bD.format,editor:bD.editor,values:bD.values});bB.attr(B.attr("container-for"),bD.field);bB.empty()}else{if(bD.command){bF=E(bD.command,"edit");if(bF){bB.empty();var bJ,bI,bH;if(V(bF)){if(bF.text&&V(bF.text)){bJ=bF.text.update;bI=bF.text.cancel}if(bF.attr){bH=bF.attr}}bd(bE._createButton({name:"update",text:bJ,attr:bH})+bE._createButton({name:"canceledit",text:bI,attr:bH})).appendTo(bB)}}}});bE._editContainer=bG;bE.editable=new B.ui.Editable(bG.addClass("k-grid-edit-row"),{target:bE,fields:bA,model:bC,clearContainer:false});if(bG.length>1){aS(bG[0],bG[1]);bE._applyLockedContainersWidth()}bE.trigger(ah,{container:bG,model:bC})},cancelRow:function(bC){var bD=this,bA=bD._editContainer,bB;if(bA){bB=bD._modelForContainer(bA);if(bC&&bD.trigger("cancel",{container:bA,model:bB})){return}bD._destroyEditable();bD.dataSource.cancelChanges(bB);if(bD._editMode()!=="popup"){bD._displayRow(bA)}else{bD._displayRow(bD.tbody.find("["+B.attr("uid")+"="+bB.uid+"]"))}}},saveRow:function(){var bA=this._editContainer;var bC=this._modelForContainer(bA);var bB=bd.Deferred();if(!bA||!this.editable){return bB.resolve().promise()}if(!this.editable.end()||this.trigger(bc,{container:bA,model:bC})){return bB.reject().promise()}return this.dataSource.sync()},_displayRow:function(bJ){var bD=this,bC=bD._modelForContainer(bJ),bG,bI,bH,bA=bJ.hasClass("k-state-selected"),bB=bJ.hasClass("k-alt");if(bC){if(bD.lockedContent){bG=bd((bB?bD.lockedAltRowTemplate:bD.lockedRowTemplate)(bC));bD._relatedRow(bJ.last()).replaceWith(bG)}bD.angular("cleanup",function(){return{elements:bJ.get()}});bI=bd((bB?bD.altRowTemplate:bD.rowTemplate)(bC));bJ.replaceWith(bI);bD.trigger("itemChange",{item:bI,data:bC,ns:aw});if(bG&&bG.length){bD.trigger("itemChange",{item:bG,data:bC,ns:aw})}var bF=bI;var bE=[{dataItem:bC}];if(bG&&bG.length){bF=bI.add(bG);bE.push({dataItem:bC})}bD.angular("compile",function(){return{elements:bF.get(),data:bE}});if(bA&&bD.options.selectable){bD.select(bI.add(bG))}if(bG){aS(bI[0],bG[0])}bH=bI.next();if(bH.hasClass("k-detail-row")&&bH.is(":visible")){bI.find(".k-hierarchy-cell .k-icon").removeClass("k-i-expand").addClass("k-i-collapse")}}},_showMessage:function(bE,bF){var bD=this;if(!bD._isMobile){return window.confirm(bE.title)}var bC=B.template('<ul><li class="km-actionsheet-title">#:title#</li><li><a href="\\#" class="k-button k-grid-delete">#:confirmDelete#</a></li></ul>');var bA=bd(bC(bE)).appendTo(bD.view.element);var bB=bD._actionSheet=new B.mobile.ui.ActionSheet(bA,{cancel:bE.cancelDelete,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy()},command:function(bH){var bG=bd(bH.currentTarget).parent();if(!bG.hasClass("km-actionsheet-cancel")){bD._removeRow(bF)}},popup:bD._actionSheetPopupOptions});bB.open(bF);return false},_confirmation:function(bD){var bC=this,bA=bC.options.editable,bB=bA===true||typeof bA===br?bC.options.messages.editable.confirmation:bA.confirmation;if(V(bA)&&typeof bA.mode===br&&typeof bB!==br&&bB!==false){bB=bC.options.messages.editable.confirmation}if(bB!==false&&bB!=null){if(typeof bB===aV){bB=bB(bC._modelForContainer(bD))}return bC._showMessage({confirmDelete:bA.confirmDelete||bC.options.messages.editable.confirmDelete,cancelDelete:bA.cancelDelete||bC.options.messages.editable.cancelDelete,title:bB===true?bC.options.messages.editable.confirmation:bB},bD)}return true},cancelChanges:function(){this.dataSource.cancelChanges()},saveChanges:function(){var bA=this;if((bA.editable&&bA.editable.end()||!bA.editable)&&!bA.trigger(bs)){bA.dataSource.sync()}},addRow:function(){var bE=this,bG,bA=bE.dataSource,bD=bE._editMode(),bF=bE.options.editable.createAt||"",bH=bA.pageSize(),bI=bA.view()||[];if(bE.editable&&bE.editable.end()||!bE.editable){if(bD!="incell"){bE.cancelRow()}bG=bA.indexOf(bI[0]);if(bF.toLowerCase()=="bottom"){bG+=bI.length;if(bH&&!bA.options.serverPaging&&bH<=bI.length){bG-=1}}if(bG<0){if(bA.page()>bA.totalPages()){bG=(bA.page()-1)*bH}else{bG=0}}var bC=bA.insert(bG,{}),bB=bC.uid,bK=bE.lockedContent?bE.lockedTable:bE.table,bL=bK.find("tr["+B.attr("uid")+"="+bB+"]"),bJ=bL.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(bE._firstEditableColumnIndex(bL));if(bD==="inline"&&bL.length){bE.editRow(bL)}else{if(bD==="popup"){bE.editRow(bC)}else{if(bJ.length){bE.editCell(bJ)}}}if(bF.toLowerCase()=="bottom"&&bE.lockedContent){bE.lockedContent[0].scrollTop=bE.content[0].scrollTop=bE.table[0].offsetHeight}}},_firstEditableColumnIndex:function(bB){var bG=this,bE,bD=ad(bG.columns),bA,bF,bC=bG._modelForContainer(bB);for(bA=0,bF=bD.length;bA<bF;bA++){bE=bD[bA];if(bC&&(!bC.editable||bC.editable(bE.field))&&!bE.command&&bE.field&&bE.hidden!==true){return bA}}return -1},_toolbar:function(){var bD=this,bE=bD.wrapper,bC=bD.options.toolbar,bB=bD.options.editable,bA;if(bC){bA=bD.wrapper.find(".k-grid-toolbar");if(!bA.length){if(!bh(bC)){bC=typeof bC===br?bC:bD._toolbarTmpl(bC).replace(aE,"\\#");bC=L(B.template(bC),bD)}bA=bd('<div class="k-header k-grid-toolbar" />').html(bC({})).prependTo(bE);bD.angular("compile",function(){return{elements:bA.get()}})}if(bB&&bB.create!==false){bA.on(bb+bq,".k-grid-add",function(bF){bF.preventDefault();bD.addRow()}).on(bb+bq,".k-grid-cancel-changes",function(bF){bF.preventDefault();bD.cancelChanges()}).on(bb+bq,".k-grid-save-changes",function(bF){bF.preventDefault();bD.saveChanges()})}bA.on(bb+bq,".k-grid-excel",function(bF){bF.preventDefault();bD.saveAsExcel()});bA.on(bb+bq,".k-grid-pdf",function(bF){bF.preventDefault();bD.saveAsPDF()})}},_toolbarTmpl:function(bB){var bE=this,bA,bD,bC="";if(d(bB)){for(bA=0,bD=bB.length;bA<bD;bA++){bC+=bE._createButton(bB[bA])}}return bC},_createButton:function(bG){var bD=bG.template||az,bB=typeof bG===br?bG:bG.name||bG.text,bC=av[bB]?av[bB].className:"k-grid-"+(bB||"").replace(/\s/g,""),bA={className:bC,text:bB,imageClass:"",attr:"",iconClass:""},bF=this.options.messages.commands,bE;if(!bB&&!(V(bG)&&bG.template)){throw new Error("Custom commands should have name specified")}if(V(bG)){bG=aP(true,{},bG);if(bG.className&&F(bA.className,bG.className.split(" "))<0){bG.className+=" "+bA.className}else{if(bG.className===G){bG.className=bA.className}}if(bB==="edit"&&V(bG.text)){bG=aP(true,{},bG);bG.text=bG.text.edit}if(bG.attr){if(V(bG.attr)){bG.attr=s(bG.attr)}if(typeof bG.attr===br){bE=bG.attr.match(/class="(.+?)"/);if(bE&&F(bE[1],bG.className.split(" "))<0){bG.className+=" "+bE[1]}}}bA=aP(true,bA,av[bB],{text:bF[bB]},bG)}else{bA=aP(true,bA,av[bB],{text:bF[bB]})}return B.template(bD)(bA)},_hasFooters:function(){return !!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var bA=this;if(bA._groupableClickHandler){bA.table.add(bA.lockedTable).off(bb+bq,bA._groupableClickHandler)}else{bA._groupableClickHandler=function(bD){var bB=bd(this),bC=bB.closest("tr");if(bB.hasClass("k-i-collapse")){bA.collapseGroup(bC)}else{bA.expandGroup(bC)}bD.preventDefault();bD.stopPropagation()}}if(bA._isLocked()){bA.lockedTable.on(bb+bq,".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse",bA._groupableClickHandler)}else{bA.table.on(bb+bq,".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse",bA._groupableClickHandler)}bA._attachGroupable()},_attachGroupable:function(){var bD=this,bE=bD.wrapper,bB=bD.options.groupable,bA=aQ+"["+B.attr("field")+"]",bC=bD.content?".k-grid-header:first "+bA:"table:first>.k-grid-header "+bA;if(bB&&bB.enabled!==false){if(!bE.has("div.k-grouping-header")[0]){bd("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(bE)}if(bD.groupable){bD.groupable.destroy()}bD.groupable=new aw.Groupable(bE,aP({},bB,{draggable:bD._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:bD.dataSource,draggableElements:bC,filter:bC,allowDrag:bD.options.reorderable,change:function(bF){if(bD.trigger("group",{groups:bF.groups})){bF.preventDefault()}}}))}},_continuousItems:function(bC,bG){if(!this.lockedContent){return}var bE=this;var bA=bE.table.add(bE.lockedTable);var bH=bd(bC,bA[0]);var bB=bd(bC,bA[1]);var bD=bG?j(bE.columns).length:1;var bJ=bG?bE.columns.length-bD:1;var bI=[];for(var bF=0;bF<bH.length;bF+=bD){g.apply(bI,bH.slice(bF,bF+bD));g.apply(bI,bB.splice(0,bJ))}return bI},_selectable:function(){var bE=this,bG,bA,bC=[],bH=bE._isLocked(),bB=bE.options.selectable;if(bB){if(bE.selectable){bE.selectable.destroy()}bB=B.ui.Selectable.parseOptions(bB);bG=bB.multiple;bA=bB.cell;if(bE._hasDetails()){bC[bC.length]=".k-detail-row"}if(bE.options.groupable||bE._hasFooters()){bC[bC.length]=".k-grouping-row,.k-group-footer"}bC=bC.join(",");if(bC!==""){bC=":not("+bC+")"}var bF=bE.table;if(bH){bF=bF.add(bE.lockedTable)}var bD=">"+(bA?l:"tbody>tr"+bC);bE.selectable=new B.ui.Selectable(bF,{filter:bD,aria:true,multiple:bG,change:function(){bE.trigger(aa)},useAllItems:bH&&bG&&bA,relatedTarget:function(bK){if(bA||!bH){return}var bM;var bJ=bd();for(var bI=0,bL=bK.length;bI<bL;bI++){bM=bE._relatedRow(bK[bI]);if(F(bM[0],bK)<0){bJ=bJ.add(bM)}}return bJ},continuousItems:function(){return bE._continuousItems(bD,bA)}});if(bE.options.navigatable){bF.on("keydown"+bq,function(bK){var bJ=bE.current();var bI=bK.target;if(bK.keyCode===aj.SPACEBAR&&bd.inArray(bI,bF)>-1&&!bJ.is(".k-edit-cell,.k-header")&&bJ.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){bK.preventDefault();bK.stopPropagation();bJ=bA?bJ:bJ.parent();if(bH&&!bA){bJ=bJ.add(bE._relatedRow(bJ))}if(bG){if(!bK.ctrlKey){bE.selectable.clear()}else{if(bJ.hasClass(bn)){bJ.removeClass(bn);bE.trigger(aa);return}}}else{bE.selectable.clear()}bE.selectable.value(bJ)}})}}},_clipboard:function(){var bB=this.options;var bA=bB.selectable;if(bA&&bB.allowCopy){var bC=this;if(!bB.navigatable){bC.table.add(bC.lockedTable).attr("tabindex",0).on("mousedown"+bq+" keydown"+bq,".k-detail-cell",function(bD){if(bD.target!==bD.currentTarget){bD.stopImmediatePropagation()}}).on("mousedown"+bq,S+">"+bi,L(O,bC))}bC.copyHandler=L(bC.copySelection,bC);bC.updateClipBoardState=function(){if(bC.areaClipBoard){bC.areaClipBoard.val(bC.getTSV()).focus().select()}};bC.bind("change",bC.updateClipBoardState);bC.wrapper.on("keydown",bC.copyHandler);bC.clearAreaHandler=L(bC.clearArea,bC);bC.wrapper.on("keyup",bC.clearAreaHandler)}},copySelection:function(bA){if(bA instanceof jQuery.Event&&!(bA.ctrlKey||bA.metaKey)||bd(bA.target).is("input:visible,textarea:visible")||window.getSelection&&window.getSelection().toString()||document.selection&&document.selection.createRange().text){return}if(!this.areaClipBoard){this.areaClipBoard=bd("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper)}this.areaClipBoard.val(this.getTSV()).focus().select()},getTSV:function(){var bA=this;var bE=bA.select();var bB="\t";var bD=bA.options.allowCopy;var bJ=true;if(bd.isPlainObject(bD)&&bD.delimeter){bB=bD.delimeter}var bG="";if(bE.length){if(bE.eq(0).is("tr")){bE=bE.find("td:not(.k-group-cell)")}if(bJ){bE.filter(":visible")}var bK=[];var bH=this.columns.length;var bI=bA._isLocked()&&j(bA.columns).length;var bC=true;bd.each(bE,function(bM,bL){bL=bd(bL);var bP=bL.closest("tr");var bQ=bP.index();var bN=bL.index();if(bJ){bN-=bL.prevAll(":hidden").length}if(bI&&bC){bC=bd.contains(bA.lockedTable[0],bL[0])}if(bA._groups()&&bC){bN-=bA._groups()}bN=bC?bN:bN+bI;if(bH>bN){bH=bN}var bO=bL.text();if(!bK[bQ]){bK[bQ]=[]}bK[bQ][bN]=bO});var bF=bK.length;bK=bd.each(bK,function(bL,bM){if(bM){bK[bL]=bM.slice(bH);if(bF>bL){bF=bL}}});bd.each(bK.slice(bF),function(bL,bM){if(bM){bG+=bM.join(bB)+"\r\n"}else{bG+="\r\n"}})}return bG},clearArea:function(bB){var bA;if(this.areaClipBoard&&bB&&bB.target===this.areaClipBoard[0]){if(this.options.navigatable){bA=bd(this.current()).closest("table")}else{bA=this.table}a9(bA,true)}if(this.areaClipBoard){this.areaClipBoard.remove();this.areaClipBoard=null}},_minScreenSupport:function(){var bA=this.hideMinScreenCols();if(bA){this.minScreenResizeHandler=L(this.hideMinScreenCols,this);bd(window).on("resize",this.minScreenResizeHandler)}},hideMinScreenCols:function(){var bB=this.columns,bA=window.innerWidth>0?window.innerWidth:screen.width;return this._iterateMinScreenCols(bB,bA)},_iterateMinScreenCols:function(bF,bE){var bD=false;for(var bB=0;bB<bF.length;bB++){var bA=bF[bB];var bC=bA.minScreenWidth;if(bC!==G&&bC!==null){bD=true;if(bC>bE){this.hideColumn(bA)}else{this.showColumn(bA)}}if(!bA.hidden&&bA.columns){bD=this._iterateMinScreenCols(bA.columns,bE)||bD}}return bD},_relatedRow:function(bD){var bB=this.lockedTable;bD=bd(bD);if(!bB){return bD}var bC=bD.closest(this.table.add(this.lockedTable));var bA=bC.find(">tbody>tr").index(bD);bC=bC[0]===this.table[0]?bB:this.table;return bC.find(">tbody>tr").eq(bA)},clearSelection:function(){var bA=this;bA.selectable.clear();bA.trigger(aa)},select:function(bA){var bC=this,bB=bC.selectable;bA=bC.table.add(bC.lockedTable).find(bA);if(bA.length){if(!bB.options.multiple){bB.clear();bA=bA.first()}if(bC._isLocked()){bA=bA.add(bA.map(function(){return bC._relatedRow(this)}))}bB.value(bA);return}return bB.value()},_updateCurrentAttr:function(bC,bB){var bA=bd(bC).data("headerId");bd(bC).removeClass(C).closest("table").removeAttr("aria-activedescendant");if(bA){bA=bA.replace(this._cellId,"");bd(bC).attr("id",bA)}else{bd(bC).removeAttr("id")}bB.data("headerId",bB.attr("id")).attr("id",this._cellId).addClass(C).closest("table").attr("aria-activedescendant",this._cellId);this._current=bB},_scrollCurrent:function(){var bF=this._current;var bE=this.options.scrollable;if(!bF||!bE){return}var bG=bF.parent();var bD=bG.closest("table").parent();var bA=bD.is(".k-grid-content-locked,.k-grid-header-locked");var bB=bD.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap");var bC=bd(this.content).find(">.k-virtual-scrollable-wrap").addBack().last()[0];if(bB){if(bE.virtual){var bH=Math.max(F(bG[0],this._items(bG.parent())),0);this._rowVirtualIndex=this.virtualScrollable.itemIndex(bH);this.virtualScrollable.scrollIntoView(bG)}else{this._scrollTo(this._relatedRow(bG)[0],bC)}}if(this.lockedContent){this.lockedContent[0].scrollTop=bC.scrollTop}if(!bA){this._scrollTo(bF[0],bC)}},current:function(bA){return this._setCurrent(bA,true)},_setCurrent:function(bB,bA){var bC=this._current;bB=bd(bB);if(bB.length){if(!bC||bC[0]!==bB[0]){this._updateCurrentAttr(bC,bB);this._scrollCurrent();if(!bA){this.trigger(N,{element:bB})}}}return this._current},_removeCurrent:function(){if(this._current){this._current.removeClass(C);this._current=null}},_scrollTo:function(bE,bC){var bK=bE.tagName.toLowerCase();var bI=bK==="td"||bK==="th";var bB=bE[bI?"offsetLeft":"offsetTop"];var bH=bE[bI?"offsetWidth":"offsetHeight"];var bJ=bC[bI?"scrollLeft":"scrollTop"];var bD=bC[bI?"clientWidth":"clientHeight"];var bF=bB+bH;var bM=0;var bA=0;var bG=0;if(I&&bI){var bL=bd(bE).closest("table")[0];if(bf.msie){bA=bL.offsetLeft}else{if(bf.mozilla){bG=bL.offsetLeft-B.support.scrollbar()}}}bJ=Math.abs(bJ+bA-bG);if(bJ>bB){bM=bB}else{if(bF>bJ+bD){if(bH<=bD){bM=bF-bD}else{bM=bB}}else{bM=bJ}}bM=Math.abs(bM+bA)+bG;bC[bI?"scrollLeft":"scrollTop"]=bM},_navigatable:function(){var bD=this;if(!bD.options.navigatable){return}var bC=bD.table.add(bD.lockedTable);var bB=bD.thead.parent().add(bd(">table",bD.lockedHeader));var bA=bC;if(bD.options.scrollable){bA=bA.add(bB);bB.attr(ax,-1)}this._navigatableTables=bA;bA.off("mousedown"+bq+" focus"+bq+" focusout"+bq+" keydown"+bq);bB.on("keydown"+bq,L(bD._openHeaderMenu,bD)).find("a.k-link").attr("tabIndex",-1);bC.attr(ax,aq.max(bC.attr(ax)||0,0)).on("mousedown"+bq+" keydown"+bq,".k-detail-cell",function(bE){if(bE.target!==bE.currentTarget){bE.stopImmediatePropagation()}});bA.on(B.support.touch?"touchstart"+bq:"mousedown"+bq,S+">"+bi,L(O,bD)).on("focus"+bq,L(bD._tableFocus,bD)).on("focusout"+bq,L(bD._tableBlur,bD)).on("keydown"+bq,L(bD._tableKeyDown,bD))},_openHeaderMenu:function(bA){if(bA.altKey&&bA.keyCode==aj.DOWN){this.current().find(".k-grid-filter, .k-header-column-menu").click();bA.stopImmediatePropagation()}},_setTabIndex:function(bA){this._navigatableTables.attr(ax,-1);bA.attr(ax,0)},_tableFocus:function(bC){if(B.support.touch){return}var bB=this.current();var bA=bd(bC.currentTarget);if(bB&&bB.is(":visible")){bB.addClass(C)}else{this._setCurrent(bA.find(aW))}this._setTabIndex(bA)},_tableBlur:function(){var bA=this.current();if(bA){bA.removeClass(C)}},_tableKeyDown:function(bF){var bE=this.current();var bB=this.virtualScrollable&&this.virtualScrollable.fetching();var bD=bd(bF.target);var bA=!bF.isDefaultPrevented()&&!bD.is(":button,a,:input,a>.k-icon");if(bB){bF.preventDefault();return}bE=bE?bE:bd(this.lockedTable).add(this.table).find(aW);if(!bE.length){return}var bC=false;if(bA&&bF.keyCode==aj.UP){bC=this._moveUp(bE)}if(bA&&bF.keyCode==aj.DOWN){bC=this._moveDown(bE)}if(bA&&bF.keyCode==(I?aj.LEFT:aj.RIGHT)){bC=this._moveRight(bE,bF.altKey)}if(bA&&bF.keyCode==(I?aj.RIGHT:aj.LEFT)){bC=this._moveLeft(bE,bF.altKey)}if(bA&&bF.keyCode==aj.PAGEDOWN){bC=this._handlePageDown()}if(bA&&bF.keyCode==aj.PAGEUP){bC=this._handlePageUp()}if(bF.keyCode==aj.ENTER||bF.keyCode==aj.F2){bC=this._handleEnterKey(bE,bF.currentTarget,bD)}if(bF.keyCode==aj.ESC){bC=this._handleEscKey(bE,bF.currentTarget)}if(bF.keyCode==aj.TAB){bC=this._handleTabKey(bE,bF.currentTarget,bF.shiftKey)}if(bC){bF.preventDefault();bF.stopPropagation()}},_moveLeft:function(bE,bD){var bC,bB;var bF=bE.parent();var bA=bF.parent();if(bD){this.collapseRow(bF)}else{bB=bA.find(S).index(bF);bC=this._prevHorizontalCell(bA,bE,bB);if(!bC[0]){bA=this._horizontalContainer(bA);bC=this._prevHorizontalCell(bA,bE,bB);if(bC[0]!==bE[0]){a9(bA.parent(),true)}}this._setCurrent(bC)}return true},_moveRight:function(bE,bD){var bC,bB;var bF=bE.parent();var bA=bF.parent();if(bD){this.expandRow(bF)}else{bB=bA.find(S).index(bF);bC=this._nextHorizontalCell(bA,bE,bB);if(!bC[0]){bA=this._horizontalContainer(bA,true);bC=this._nextHorizontalCell(bA,bE,bB);if(bC[0]!==bE[0]){a9(bA.parent(),true)}}this._setCurrent(bC)}return true},_moveUp:function(bC){var bA=bC.parent().parent();var bB=this._prevVerticalCell(bA,bC);if(!bB[0]){bA=this._verticalContainer(bA,true);bB=this._prevVerticalCell(bA,bC);if(bB[0]){a9(bA.parent(),true)}}this._setCurrent(bB);return true},_moveDown:function(bC){var bA=bC.parent().parent();var bB=this._nextVerticalCell(bA,bC);if(!bB[0]){bA=this._verticalContainer(bA);bB=this._nextVerticalCell(bA,bC);if(bB[0]){a9(bA.parent(),true)}}this._setCurrent(bB);return true},_handlePageDown:function(){if(!this.options.pageable){return false}this.dataSource.page(this.dataSource.page()+1);return true},_handlePageUp:function(){if(!this.options.pageable){return false}this.dataSource.page(this.dataSource.page()-1);return true},_handleTabKey:function(bE,bD,bC){var bB=this.options.editable&&this._editMode()=="incell";var bA;if(!bB||bE.is("th")){return false}bA=bd(X()).closest(".k-edit-cell");if(bA[0]&&bA[0]!==bE[0]){bE=bA}bA=this._tabNext(bE,bD,bC);if(bA.length){this._handleEditing(bE,bA,bA.closest("table"));return true}return false},_handleEscKey:function(bE,bC){var bD=X();var bB=this._editMode()=="incell";if(!z(bE)){if(bE.has(bD).length){a9(bC,true);return true}return false}if(bB){this.closeCell(true)}else{var bA=bd(bE).parent().index();if(bD){bD.blur()}this.cancelRow(true);if(bA>=0){this._setCurrent(this.items().eq(bA).children(bi).first())}}if(bf.msie&&bf.version<9){document.body.focus()}a9(bC,true);return true},_toggleCurrent:function(bB,bA){var bC=bB.parent();if(bC.is(".k-grouping-row")){bC.find(".k-icon:first").click();return true}if(!bA&&bC.is(".k-master-row")){bC.find(".k-icon:first").click();return true}return false},_handleEnterKey:function(bE,bC,bD){var bB=this.options.editable&&this.options.editable.update!==false;var bA=bD.closest("[role=gridcell]");if(!bD.is("table")&&!bd.contains(bE[0],bD[0])){bE=bA}if(bE.is("th")){bE.find(".k-link").click();return true}if(this._toggleCurrent(bE,bB)){return true}var bF=bE.find(":kendoFocusable:first");if(bF[0]&&!bE.hasClass("k-edit-cell")&&bE.hasClass("k-state-focused")){bF.focus();return true}if(bB&&!bD.is(":button,.k-button,textarea")){if(!bA[0]){bA=bE}this._handleEditing(bA,false,bC);return true}return false},_nextHorizontalCell:function(bC,bF,bE){var bB=bF.nextAll(R);if(!bB.length){var bD=bC.find(S);var bG=bD.index(bF.parent());if(bG==-1){if(bF.hasClass("k-header")){var bA=[];ag([j(this.columns)[0]],aJ(bD.eq(0).children().first()),bA,0,0);if(bA[bE]){return bA[bE][0]}return bF}if(bF.parent().hasClass("k-filter-row")){return bD.last().children(R).first()}return bD.eq(bE).children(R).first()}}return bB.first()},_prevHorizontalCell:function(bD,bG,bF){var bB=bG.prevAll(R);if(!bB.length){var bE=bD.find(S);var bH=bE.index(bG.parent());if(bH==-1){if(bG.hasClass("k-header")){var bA=[];var bC=j(this.columns);ag([bC[bC.length-1]],aJ(bE.eq(0).children().last()),bA,0,0);if(bA[bF]){return bA[bF][0]}return bG}if(bG.parent().hasClass("k-filter-row")){return bE.last().children(R).last()}return bE.eq(bF).children(R).last()}}return bB.first()},_currentDataIndex:function(bC,bD){var bA=bD.attr("data-index");if(!bA){return G}var bB=j(this.columns).length;if(bB&&!bC.closest("div").hasClass("k-grid-content-locked")[0]){return bA-bB}return bA},_prevVerticalCell:function(bA,bE){var bC;var bF=bE.parent();var bD=bA.children(S);var bG=bD.index(bF);var bB=this._currentDataIndex(bA,bE);if(bB||bE.hasClass("k-header")){bC=aI(bE);return bC.eq(bC.length-2)}bB=bF.children(R).index(bE);if(bF.hasClass("k-filter-row")){return r(bA).eq(bB)}if(bG==-1){bF=bA.find(".k-filter-row");if(!bF[0]){return r(bA).eq(bB)}}else{bF=bG===0?bd():bD.eq(bG-1)}bC=bF.children(R);if(bC.length>bB){return bC.eq(bB)}return bC.eq(0)},_nextVerticalCell:function(bA,bE){var bC;var bF=bE.parent();var bD=bA.children(S);var bG=bD.index(bF);var bB=this._currentDataIndex(bA,bE);if(bG!=-1&&bB===G&&bE.hasClass("k-header")){return aJ(bE).eq(1)}bB=bB?parseInt(bB,10):bF.children(R).index(bE);if(bG==-1){bF=bD.eq(0)}else{bF=bD.eq(bG+bE[0].rowSpan)}bC=bF.children(R);if(bC.length>bB){return bC.eq(bB)}return bC.eq(0)},_verticalContainer:function(bB,bA){var bF=bB.parent();var bE=this._navigatableTables.length;var bD=Math.floor(bE/2);var bC=F(bF[0],this._navigatableTables);if(bA){bD*=-1}bC+=bD;if(bC>=0||bC<bE){bF=this._navigatableTables.eq(bC)}return bF.find(bA?"thead":"tbody")},_horizontalContainer:function(bA,bC){var bE=this._navigatableTables.length;if(bE<=2){return bA}var bD=bA.parent();var bB=F(bD[0],this._navigatableTables);bB+=bC?1:-1;if(bC&&(bB==2||bB==bE)){return bA}if(!bC&&(bB==1||bB<0)){return bA}return this._navigatableTables.eq(bB).find("thead, tbody")},_tabNext:function(bE,bB,bA){var bD=true;var bC=bA?bE.prevAll(R+":first"):bE.nextAll(":visible:first");if(!bC.length){bC=bE.parent();if(this.lockedTable){bD=bA&&bB==this.lockedTable[0]||!bA&&bB==this.table[0];bC=this._relatedRow(bC)}if(bD){bC=bC[bA?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first")}bC=bC.children(R+(bA?":last":":first"))}return bC},_handleEditing:function(bI,bE,bL){var bH=this,bD=bd(X()),bF=bH._editMode(),bB=bf.msie,bG=bB&&bf.version<9,bJ=bH._editContainer,bK,bA=bH.options.editable&&bH.options.editable.update!==false,bC;bL=bd(bL);if(bF=="incell"){bC=bI.hasClass("k-edit-cell")}else{bC=bI.parent().hasClass("k-grid-edit-row")}if(bH.editable){if(bd.contains(bJ[0],bD[0])){if(bf.opera||bG){bD.blur().change().triggerHandler("blur")}else{bD.blur();if(bB){bD.blur()}}}if(!bH.editable){a9(bL);return}if(bH.editable.end()){if(bF=="incell"){bH.closeCell()}else{bH.saveRow();bC=true}}else{if(bF=="incell"){bH._setCurrent(bJ)}else{bH._setCurrent(bJ.children().filter(R).first())}bK=bJ.find(":kendoFocusable:first")[0];if(bK){bK.focus()}return}}if(bE){bH._setCurrent(bE)}if(bG){document.body.focus()}a9(bL,true);if(!bA){return}if(!bC&&!bE||bE){if(bF=="incell"){bH.editCell(bH.current())}else{bH.editRow(bH.current().parent())}}},_wrapper:function(){var bC=this,bB=bC.table,bA=bC.options.height,bD=bC.element;if(!bD.is("div")){bD=bD.wrap("<div/>").parent()}bC.wrapper=bD.addClass("k-grid k-widget");if(bA){bC.wrapper.css(bk,bA);bB.css(bk,"auto")}bC._initMobile()},_initMobile:function(){var bA=this.options;var bC=this;this._isMobile=bA.mobile===true&&B.support.mobileOS||bA.mobile==="phone"||bA.mobile==="tablet";if(this._isMobile){var bB=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+B.ns+'stretch="true" data-'+B.ns+'role="view" data-'+B.ns+'init-widgets="false"></div>').parent();this.pane=B.mobile.ui.Pane.wrap(bB);this.view=this.pane.view();this._actionSheetPopupOptions=bd(document.documentElement).hasClass("km-root")?{modal:false}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"};if(bA.height){this.pane.element.parent().css(bk,bA.height)}this._editAnimation="slide";this.view.bind("show",function(){if(bC._isLocked()){bC._updateTablesWidth();bC._applyLockedContainersWidth();bC._syncLockedContentHeight();bC._syncLockedHeaderHeight();bC._syncLockedFooterHeight()}})}},_tbody:function(){var bC=this,bB=bC.table,bA;bA=bB.find(">tbody");if(!bA.length){bA=bd("<tbody/>").appendTo(bB)}bC.tbody=bA.attr("role","rowgroup")},_scrollable:function(){var bD=this,bC,bG,bI=bD.options,bE=bI.scrollable,bB=bE!==true&&bE.virtual&&!bD.virtualScrollable,bH=!B.support.kineticScrollNeeded||bB?B.support.scrollbar():0;if(bE){bC=bD.wrapper.children(".k-grid-header");if(!bC[0]){bC=bd('<div class="k-grid-header" />').insertBefore(bD.table)}bC.css(I?"padding-left":"padding-right",bE.virtual?bH+1:bH);bG=bd('<table role="grid" />');if(at){bG.attr("cellspacing",0)}bG.width(bD.table[0].style.width);bG.append(bD.thead);bC.empty().append(bd('<div class="k-grid-header-wrap k-auto-scrollable" />').append(bG));bD.content=bD.table.parent();if(bD.content.is(".k-virtual-scrollable-wrap, .km-scroll-container")){bD.content=bD.content.parent()}if(!bD.content.is(".k-grid-content, .k-virtual-scrollable-wrap")){bD.content=bD.table.wrap('<div class="k-grid-content k-auto-scrollable" />').parent()}if(bB){bD.virtualScrollable=new aN(bD.content,{dataSource:bD.dataSource,itemHeight:function(){return bD._averageRowHeight()}})}bD.scrollables=bC.children(".k-grid-header-wrap").add(bD.content);var bF=bD.wrapper.find(".k-grid-footer");if(bF.length){bD.scrollables=bD.scrollables.add(bF.children(".k-grid-footer-wrap"))}if(bE.virtual){bD.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+bq).bind("scroll"+bq,function(){bD.scrollables.scrollLeft(this.scrollLeft);if(bD.lockedContent){bD.lockedContent[0].scrollTop=this.scrollTop}})}else{bD.content.unbind("scroll"+bq).bind("scroll"+bq,function(bJ){bD.scrollables.not(bJ.currentTarget).scrollLeft(this.scrollLeft);if(bD.lockedContent&&bJ.currentTarget==bD.content[0]){bD.lockedContent[0].scrollTop=this.scrollTop}});var bA=bD.content.data("kendoTouchScroller");if(bA){bA.destroy()}bA=B.touchScroller(bD.content);if(bA&&bA.movable){bD.touchScroller=bA;bA.movable.bind("change",function(bJ){bD.scrollables.scrollLeft(-bJ.sender.x);if(bD.lockedContent){bD.lockedContent.scrollTop(-bJ.sender.y)}});bD.one(M,function(bJ){bJ.sender.wrapper.addClass("k-grid-backface")})}}}},_renderNoRecordsContent:function(){var bB=this;if(bB.options.noRecords){var bA=bB.table.parent().children("."+aT);if(bA.length){bB.angular("cleanup",function(){return{elements:bA.get()}});bA.remove()}if(!bB.dataSource||!bB.dataSource.view().length){bA=bd(bB.noRecordsTemplate({})).insertAfter(bB.table);bB.angular("compile",function(){return{elements:bA.get(),data:[{}]}})}}},_setContentWidth:function(bE){var bD=this,bC="k-grid-content-expander",bB='<div class="'+bC+'"></div>',bA=bD.resizable,bF;if(bD.options.scrollable&&bD.wrapper.is(":visible")){bF=bD.table.parent().children("."+bC);bD._setContentWidthHandler=L(bD._setContentWidth,bD);if(!bD.dataSource||!bD.dataSource.view().length){if(!bF[0]){bF=bd(bB).appendTo(bD.table.parent());if(bA){bA.bind("resize",bD._setContentWidthHandler)}}if(bD.thead){bF.width(bD.thead.width());if(!isNaN(parseFloat(bE,10))){bD.content.scrollLeft(bE)}}}else{if(bF[0]){bF.remove();if(bA){bA.unbind("resize",bD._setContentWidthHandler)}}}bD._applyLockedContainersWidth();if(bD.lockedHeader&&bD.table[0].clientWidth===0){bD.table[0].style.width="1px"}}},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var bI=this.thead.parent(),bG=bI.parent(),bA=this.wrapper[0].clientWidth,bD=this._groups(),bJ=B.support.scrollbar(),bH=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),bC=bI.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),bB=ao(bH),bF=ao(bC),bE;if(bD>0){bB+=W(this.lockedHeader.find(".k-group-cell:first"))*bD}if(bB>=bA){bB=bA-3*bJ}this.lockedHeader.add(this.lockedContent).width(bB);bG[0].style.width=bG.parent().width()-bB-2+"px";bI.add(this.table).width(bF);if(this.virtualScrollable){bA-=bJ}this.content[0].style.width=bA-bB-2+"px";if(this.lockedFooter&&this.lockedFooter.length){this.lockedFooter.width(bB);bE=this.footer.find(".k-grid-footer-wrap");bE[0].style.width=bG[0].clientWidth+"px";bE.children().first().width(bF)}}},_setContentHeight:function(){var bD=this,bB=bD.options,bA=bD.wrapper.innerHeight(),bF=bD.wrapper.children(".k-grid-header"),bE=B.support.scrollbar();if(bB.scrollable&&bD.wrapper.is(":visible")){bA-=o(bF);if(bD.pager){bA-=o(bD.pager.element)}if(bB.groupable){bA-=o(bD.wrapper.children(".k-grouping-header"))}if(bB.toolbar){bA-=o(bD.wrapper.children(".k-grid-toolbar"))}if(bD.footerTemplate){bA-=o(bD.wrapper.children(".k-grid-footer"))}var bC=function(bI){var bH,bG;if(bI[0].style.height){return true}else{bH=bI.height()}bI.height("auto");bG=bI.height();if(bH!=bG){bI.height("");return true}bI.height("");return false};if(bC(bD.wrapper)){if(bA>bE*2){if(bD.lockedContent){bE=bD.table[0].offsetWidth>bD.table.parent()[0].clientWidth?bE:0;bD.lockedContent.height(bA-bE)}bD.content.height(bA)}else{bD.content.height(bE*2+1)}}}},_averageRowHeight:function(){var bD=this,bA=bD._items(bD.tbody).length,bC=bD._rowHeight;if(bA===0){return bC}if(!bD._rowHeight){bD._rowHeight=bC=o(bD.table)/bA;bD._sum=bC;bD._measures=1}var bB=o(bD.table)/bA;if(bC!==bB){bD._measures++;bD._sum+=bB;bD._rowHeight=bD._sum/bD._measures}return bC},_dataSource:function(){var bC=this,bB=bC.options,bA,bD=bB.dataSource;bD=d(bD)?{data:bD}:bD;if(V(bD)){aP(bD,{table:bC.table,fields:bC.columns});bA=bB.pageable;if(V(bA)&&bA.pageSize!==G){bD.pageSize=bA.pageSize}}if(bC.dataSource&&bC._refreshHandler){bC.dataSource.unbind(aa,bC._refreshHandler).unbind(a6,bC._progressHandler).unbind(Z,bC._errorHandler)}else{bC._refreshHandler=L(bC.refresh,bC);bC._progressHandler=L(bC._requestStart,bC);bC._errorHandler=L(bC._error,bC)}bC.dataSource=x.create(bD).bind(aa,bC._refreshHandler).bind(a6,bC._progressHandler).bind(Z,bC._errorHandler)},_error:function(){this._progress(false)},_requestStart:function(){this._progress(true)},_modelChange:function(bQ){var bI=this,bA=bI.tbody,bE=bQ.model,bG=bI.tbody.find("tr["+B.attr("uid")+"="+bE.uid+"]"),bM,bB,bC,bD=bG.hasClass("k-alt"),bR,bN=bI._items(bA).index(bG),bJ=bI.lockedContent,bL,bH,bP,bK,bF;if(bJ){bM=bI._relatedRow(bG)}if(bG.add(bM).children(".k-edit-cell").length&&!bI.options.rowTemplate){bG.add(bM).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){bB=bd(this);bC=ad(bI.columns)[bI.cellIndex(bB)];if(bC.field===bQ.field){if(!bB.hasClass("k-edit-cell")){bI._displayCell(bB,bC,bE);bd('<span class="k-dirty"/>').prependTo(bB)}else{bB.addClass("k-dirty-cell")}}})}else{if(!bG.hasClass("k-grid-edit-row")){bH=bd().add(bG);if(bJ){bR=(bD?bI.lockedAltRowTemplate:bI.lockedRowTemplate)(bE);bH=bH.add(bM);bM.replaceWith(bR)}bI.angular("cleanup",function(){return{elements:bH.get()}});bR=(bD?bI.altRowTemplate:bI.rowTemplate)(bE);bG.replaceWith(bR);bR=bI._items(bA).eq(bN);var bO=[{dataItem:bE}];if(bJ){bG=bG.add(bM);bM=bI._relatedRow(bR)[0];aS(bR[0],bM);bR=bR.add(bM);bO.push({dataItem:bE})}bI.angular("compile",function(){return{elements:bR.get(),data:bO}});bL=bI.options.selectable;if(bL&&bG.hasClass("k-state-selected")){bI.select(bR)}bK=bH.children(":not(.k-group-cell,.k-hierarchy-cell)");bP=bR.children(":not(.k-group-cell,.k-hierarchy-cell)");for(bN=0,bF=bI.columns.length;bN<bF;bN++){bC=bI.columns[bN];bB=bP.eq(bN);if(bL&&bK.eq(bN).hasClass("k-state-selected")){bB.addClass("k-state-selected")}if(bC.field===bQ.field){bd('<span class="k-dirty"/>').prependTo(bB)}}bI.trigger("itemChange",{item:bR,data:bE,ns:aw})}}},_pageable:function(){var bB=this,bC,bA=bB.options.pageable;if(bA){bC=bB.wrapper.children("div.k-grid-pager");if(!bC.length){bC=bd('<div class="k-pager-wrap k-grid-pager"/>').appendTo(bB.wrapper)}if(bB.pager){bB.pager.destroy()}if(typeof bA==="object"&&bA instanceof B.ui.Pager){bB.pager=bA}else{bB.pager=new B.ui.Pager(bC,aP({},bA,{dataSource:bB.dataSource}))}bB.pager.bind("pageChange",function(bD){if(bB.trigger("page",{page:bD.index})){bD.preventDefault()}})}},_footer:function(){var bF=this,bE=bF.dataSource.aggregates(),bD="",bH=bF.footerTemplate,bI=bF.options,bC,bG=bF.footer||bF.wrapper.find(".k-grid-footer");if(bH){bD=bd(bF._wrapFooter(bH(bE)));if(bG.length){var bB=bD;bF.angular("cleanup",function(){return{elements:bG.get()}});bG.replaceWith(bB);bG=bF.footer=bB}else{if(bI.scrollable){bG=bF.footer=bI.pageable?bD.insertBefore(bF.wrapper.children("div.k-grid-pager")):bD.appendTo(bF.wrapper)}else{bG=bF.footer=bD.insertBefore(bF.tbody)}}bF.angular("compile",function(){return{elements:bG.find("td:not(.k-group-cell, .k-hierarchy-cell)").get(),data:H(bF.columns,function(bJ){return{column:bJ,aggregate:bE[bJ.field]}})}})}else{if(bG&&!bF.footer){bF.footer=bG}}if(bG.length){if(bI.scrollable){bC=bG.attr("tabindex",-1).children(".k-grid-footer-wrap");bF.scrollables=bd(bF.scrollables.filter(function(){return !bd(this).is(".k-grid-footer-wrap")}).toArray()).add(bC)}if(bF._footerWidth){bG.find("table").css("width",bF._footerWidth)}if(bC){var bA=bF.content.scrollLeft();if(bI.scrollable!==true&&bI.scrollable.virtual){bA=bF.wrapper.find(".k-virtual-scrollable-wrap").scrollLeft()}bC.scrollLeft(bA)}}if(bF.lockedContent){bF._appendLockedColumnFooter();bF._applyLockedContainersWidth();bF._syncLockedFooterHeight()}},_wrapFooter:function(bB){var bC=this,bA="",bD=!B.support.mobileOS?B.support.scrollbar():0;if(bC.options.scrollable){bA=bd('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table'+(at?' cellspacing="0"':"")+"><tbody>"+bB+"</tbody></table></div></div>");bC._appendCols(bA.find("table"));bA.css(I?"padding-left":"padding-right",bD);return bA}return'<tfoot class="k-grid-footer">'+bB+"</tfoot>"},_columnMenu:function(){var bO=this,bB,bD=ad(bO.columns),bG,bJ=bO.options,bL=bJ.columnMenu,bN,bE,bF,bK,bP=m(bO.columns,function(bU){return bU.columns!==G}).length>0,bS=this._isMobile,bH=function(bU){bO.trigger(a3,{field:bU.field,container:bU.container})},bM=function(bU){a9(bU.closest("table"),true)},bT=function(bU){if(bO.trigger("sort",{sort:bU.sort})){bU.preventDefault()}},bQ=function(bU){if(bO.trigger("filter",{filter:bU.filter,field:bU.field})){bU.preventDefault()}},bA=bJ.$angular;if(bL){if(typeof bL=="boolean"){bL={}}bK=r(bO.thead);for(var bR=0,bI=bK.length;bR<bI;bR++){bG=bD[bR];var bC=bK.eq(bR);if(!bG.command&&(bG.field||bC.attr("data-"+B.ns+"field"))){bB=bC.data("kendoColumnMenu");if(bB){bB.destroy()}bE=bG.sortable!==false&&bL.sortable!==false&&bJ.sortable!==false?aP({},bJ.sortable,{compare:(bG.sortable||{}).compare}):false;bF=bJ.filterable&&bG.filterable!==false&&bL.filterable!==false?aP({pane:bO.pane},bJ.filterable,bG.filterable):false;if(bG.filterable&&bG.filterable.dataSource){bF.forceUnique=false;bF.checkSource=bG.filterable.dataSource}if(bF){bF.format=bG.format}bN={dataSource:bO.dataSource,values:bG.values,columns:bL.columns,sortable:bE,filterable:bF,messages:bL.messages,owner:bO,closeCallback:bM,init:bH,pane:bO.pane,sort:bT,filtering:bQ,filter:bS?":not(.k-column-active)":"",lockedColumns:!bP&&bG.lockable!==false&&j(bD).length>0};if(bA){bN.$angular=bA}bC.kendoColumnMenu(bN)}}}},_headerCells:function(){return this.thead.find("th").filter(function(){var bA=bd(this);return !bA.hasClass("k-group-cell")&&!bA.hasClass("k-hierarchy-cell")})},_filterable:function(){var bI=this,bF=ad(bI.columns),bG,bL,bK,bE=function(bN){bI.trigger(f,{field:bN.field,container:bN.container})},bB=function(bN){a9(bN.closest("table"),true)},bC=function(bN){if(bI.trigger("filter",{filter:bN.filter,field:bN.field})){bN.preventDefault()}},bA=bI.options.filterable;if(bA&&typeof bA.mode==br&&bA.mode.indexOf("menu")==-1){bA=false}if(bA&&!bI.options.columnMenu){bL=r(bI.thead);for(var bJ=0,bD=bL.length;bJ<bD;bJ++){bK=bL.eq(bJ);if(bF[bJ].filterable!==false&&!bF[bJ].command&&(bF[bJ].field||bK.attr("data-"+B.ns+"field"))){bG=bK.data("kendoFilterMenu");if(bG){bG.destroy()}bG=bK.data("kendoFilterMultiCheck");if(bG){bG.destroy()}var bH=bF[bJ].filterable;var bM=aP({},bA,bH,{dataSource:bI.dataSource,values:bF[bJ].values,format:bF[bJ].format,closeCallback:bB,title:bF[bJ].title||bF[bJ].field,init:bE,pane:bI.pane,change:bC});if(bH&&bH.messages){bM.messages=aP(true,{},bA.messages,bH.messages)}if(bH&&bH.dataSource){bM.forceUnique=false;bM.checkSource=bH.dataSource}if(bH&&bH.multi){bK.kendoFilterMultiCheck(bM)}else{bK.kendoFilterMenu(bM)}}}}},_filterRow:function(){var bO=this;if(!bO._hasFilterRow()){return}var bG;var bE=bO.options.$angular;var bH=ad(bO.columns),bA=bO.options.filterable,bI=bO.thead.find(".k-filter-row"),bD=function(bQ){if(bO.trigger("filter",{filter:bQ.filter,field:bQ.field})){bQ.preventDefault()}};this._updateHeader(this.dataSource.group().length);for(var bN=0;bN<bH.length;bN++){var bB,bF=bH[bN],bK=bO.options.filterable.operators,bM=false,bC=bd("<th/>"),bP=bF.field;if(bF.hidden){bC.hide()}bI.append(bC);if(bP&&bF.filterable!==false){var bL=bF.filterable&&bF.filterable.cell||{};bB=bO.options.dataSource;if(bB instanceof x){bB=bO.options.dataSource.options}var bJ=aP(true,{},bA.messages);if(bF.filterable){aP(true,bJ,bF.filterable.messages)}if(bL.enabled===false){bC.html("&nbsp;");continue}if(bL.dataSource){bB=bL.dataSource;bM=true}if(bF.filterable&&bF.filterable.operators){bK=bF.filterable.operators}bG={column:bF,dataSource:bO.dataSource,suggestDataSource:bB,customDataSource:bM,field:bP,messages:bJ,values:bF.values,template:bL.template,delay:bL.delay,inputWidth:bL.inputWidth,suggestionOperator:bL.suggestionOperator,minLength:bL.minLength,dataTextField:bL.dataTextField,operator:bL.operator,operators:bK,showOperators:bL.showOperators,change:bD};if(bE){bG.$angular=bE}bd("<span/>").attr(B.attr("field"),bP).appendTo(bC).kendoFilterCell(bG)}else{bC.html("&nbsp;")}}},_sortable:function(){var bF=this,bC=ad(bF.columns),bB,bJ,bH,bD=bF.options.sortable,bE=function(bK){if(bF.trigger("sort",{sort:bK.sort})){bK.preventDefault()}};if(bD){var bI=r(bF.thead);for(var bG=0,bA=bI.length;bG<bA;bG++){bB=bC[bG];if(bB.sortable!==false&&!bB.command&&bB.field){bH=bI.eq(bG);bJ=bH.data("kendoColumnSorter");if(bJ){bJ.destroy()}bH.attr("data-"+B.ns+"field",bB.field).kendoColumnSorter(aP({},bD,bB.sortable,{dataSource:bF.dataSource,aria:true,filter:":not(.k-column-active)",change:bE}))}}bI=null}},_columns:function(bB){var bE=this,bD=bE.table,bG,bF=bD.find("col"),bA,bH=bE.options.dataSource;bB=bB.length?bB:H(bD.find("th"),function(bJ,bQ){bJ=bd(bJ);var bL=bJ.attr(B.attr("sortable")),bI=bJ.attr(B.attr("filterable")),bN=bJ.attr(B.attr("type")),bM=bJ.attr(B.attr("groupable")),bP=bJ.attr(B.attr("field")),bO=bJ.attr(B.attr("title")),bK=bJ.attr(B.attr("menu"));if(!bP){bP=bJ.text().replace(/\s|[^A-z0-9]/g,"")}return{field:bP,type:bN,title:bO,sortable:bL!=="false",filterable:bI!=="false",groupable:bM!=="false",menu:bK,template:bJ.attr(B.attr("template")),width:bF.eq(bQ).css("width")}});bG=!(bE.table.find("tbody tr").length>0&&(!bH||!bH.transport));if(bE.options.scrollable){var bC=bB;bA=j(bB);bB=be(bB);if(bA.length>0&&bB.length===0){throw new Error("There should be at least one non locked column")}bz(bE.element.find("tr:has(th):first"),bC);bB=bA.concat(bB)}bE.columns=u(bB,bG)},_groups:function(){var bA=this.dataSource.group();return bA?bA.length:0},_tmpl:function(bN,bG,bH,bB){var bI=this,bF=aP({},B.Template,bI.options.templateSettings),bO,bC=bG.length,bP,bA={storage:{},count:0},bE,bK,bM=bI._hasDetails(),bJ=[],bD=bI._groups(),bL=bI.options.navigatable;if(!bN){bN="<tr";if(bH){bJ.push("k-alt")}if(bM){bJ.push("k-master-row")}if(bJ.length){bN+=' class="'+bJ.join(" ")+'"'}if(bC){bN+=" "+B.attr("uid")+'="#='+B.expr("uid",bF.paramName)+'#"'}bN+=" role='row'>";if(bD>0&&!bB){bN+=ba(bD)}if(bM){bN+='<td class="k-hierarchy-cell"><a class="k-icon k-i-expand" href="\\#" tabindex="-1"></a></td>'}for(bO=0;bO<bC;bO++){bE=bG[bO];bP=bE.template;bK=typeof bP;bN+="<td"+s(bE.attributes);if(bL){bN+=" aria-describedby='"+bE.headerAttributes.id+"'"}bN+=" role='gridcell'>";bN+=bI._cellTmpl(bE,bA);bN+="</td>"}bN+="</tr>"}bN=B.template(bN,bF);if(bA.count>0){return L(bN,bA.storage)}return bN},_headerCellText:function(bD){var bE=this,bC=aP({},B.Template,bE.options.templateSettings),bB=bD.headerTemplate,bA=typeof bB,bF=bD.title||bD.field||"";if(bA===aV){bF=B.template(bB,bC)({})}else{if(bA===br){bF=bB}}return bF},_cellTmpl:function(bC,bA){var bG=this,bD=aP({},B.Template,bG.options.templateSettings),bM=bC.template,bE=bD.paramName,bJ=bC.field,bF="",bL,bB,bK=bC.format,bI=typeof bM,bH=bC.values;if(bC.command){if(d(bC.command)){for(bL=0,bB=bC.command.length;bL<bB;bL++){if(bC.command[bL].visible){bF+=B.format("#= {0}(data)? '{1}':'' #",bC.command[bL].visible,bG._createButton(bC.command[bL]).replace(aE,"\\#"))}else{bF+=bG._createButton(bC.command[bL]).replace(aE,"\\#")}}return bF}return bG._createButton(bC.command).replace(aE,"\\#")}if(bI===aV){bA.storage["tmpl"+bA.count]=bM;bF+="#=this.tmpl"+bA.count+"("+bE+")#";bA.count++}else{if(bI===br){bF+=bM}else{if(bH&&bH.length&&V(bH[0])&&"value" in bH[0]&&bJ){bF+="#var v ="+B.stringify(al(bH)).replace(aE,"\\#")+"#";bF+="#var f = v[";if(!bD.useWithBlock){bF+=bE+"."}bF+=bJ+"]#";bF+="${f != null ? f : ''}"}else{bF+=bC.encoded?"#:":"#=";if(bK){bF+='kendo.format("'+bK.replace(au,"\\$1")+'",'}if(bJ){bJ=B.expr(bJ,bE);bF+=bJ+"==null?'':"+bJ}else{bF+="''"}if(bK){bF+=")"}bF+="#"}}}return bF},_templates:function(){var bF=this,bI=bF.options,bA=bF.dataSource,bB=bA.group(),bG=bF.footer||bF.wrapper.find(".k-grid-footer"),bE=bA.aggregate(),bH=ad(bF.columns),bD=ad(j(bF.columns)),bC=bI.scrollable?ad(be(bF.columns)):bH;if(bI.scrollable&&bD.length){if(bI.rowTemplate||bI.altRowTemplate){throw new Error("Having both row template and locked columns is not supported")}bF.rowTemplate=bF._tmpl(bI.rowTemplate,bC,false,true);bF.altRowTemplate=bF._tmpl(bI.altRowTemplate||bI.rowTemplate,bC,true,true);bF.lockedRowTemplate=bF._tmpl(bI.rowTemplate,bD);bF.lockedAltRowTemplate=bF._tmpl(bI.altRowTemplate||bI.rowTemplate,bD,true)}else{bF.rowTemplate=bF._tmpl(bI.rowTemplate,bC);bF.altRowTemplate=bF._tmpl(bI.altRowTemplate||bI.rowTemplate,bC,true)}if(bF._hasDetails()){bF.detailTemplate=bF._detailTmpl(bI.detailTemplate||"")}if(bF._group&&!aX(bE)||!aX(bE)&&!bG.length||m(bH,function(bJ){return bJ.footerTemplate}).length){bF.footerTemplate=bF._footerTmpl(bH,bE,"footerTemplate","k-footer-template")}if(bB&&m(bH,function(bJ){return bJ.groupFooterTemplate}).length){bE=bd.map(bB,function(bJ){return bJ.aggregates});bF.groupFooterTemplate=bF._footerTmpl(bC,bE,"groupFooterTemplate","k-group-footer",bD.length);if(bI.scrollable&&bD.length){bF.lockedGroupFooterTemplate=bF._footerTmpl(bD,bE,"groupFooterTemplate","k-group-footer")}}if(bF.options.noRecords){bF.noRecordsTemplate=bF._noRecordsTmpl()}},_noRecordsTmpl:function(){var bA='<div class="{0}">{1}</div>';var bC='<div class="k-grid-norecords-template"{1}>{0}</div>';var bE=this.options.scrollable&&!this.wrapper[0].style.height?' style="margin:0 auto;position:static;"':"";var bB={storage:{},count:0};var bD=bd.extend({},B.Template,this.options.templateSettings);var bF=bD.paramName;var bJ;var bG="";var bH;var bI;if(this.options.noRecords.template){bJ=this.options.noRecords.template}else{bJ=B.format(bC,this.options.messages.noRecords,bE)}bH=typeof bJ;if(bH==="function"){bB.storage["tmpl"+bB.count]=bJ;bG+="#=this.tmpl"+bB.count+"("+bF+")#";bB.count++}else{if(bH==="string"){bG+=bJ}}bI=B.template(B.format(bA,aT,bG),bD);if(bB.count>0){bI=bd.proxy(bI,bB.storage)}return bI},_footerTmpl:function(bB,bF,bH,bN,bO){var bK=this,bQ=aP({},B.Template,bK.options.templateSettings),bI=bQ.paramName,bL="",bM,bE,bS,bD,bP={},bJ=0,bA={},bR=bK._groups(),bG=bK.dataSource._emptyAggregates(bF),bC;bL+='<tr class="'+bN+'">';if(bR>0&&!bO){bL+=ba(bR)}if(bK._hasDetails()){bL+='<td class="k-hierarchy-cell">&nbsp;</td>'}for(bM=0,bE=bB.length;bM<bE;bM++){bC=bB[bM];bS=bC[bH];bD=typeof bS;bL+="<td"+s(bC.footerAttributes)+">";if(bS){if(bD!==aV){bA=bG[bC.field]?aP({},bQ,{paramName:bI+"['"+bC.field+"']"}):{};bS=B.template(bS,bA)}bP["tmpl"+bJ]=bS;bL+="#=this.tmpl"+bJ+"("+bI+")#";bJ++}else{bL+="&nbsp;"}bL+="</td>"}bL+="</tr>";bL=B.template(bL,bQ);if(bJ>0){return L(bL,bP)}return bL},_detailTmpl:function(bI){var bG=this,bF="",bC=aP({},B.Template,bG.options.templateSettings),bD=bC.paramName,bJ={},bE=0,bB=bG._groups(),bA=D(ad(bG.columns)).length,bH=typeof bI;bF+='<tr class="k-detail-row">';if(bB>0){bF+=ba(bB)}bF+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(bA?' colspan="'+bA+'"':"")+">";if(bH===aV){bJ["tmpl"+bE]=bI;bF+="#=this.tmpl"+bE+"("+bD+")#";bE++}else{bF+=bI}bF+="</td></tr>";bF=B.template(bF,bC);if(bE>0){return L(bF,bJ)}return bF},_hasDetails:function(){var bA=this;return bA.options.detailTemplate!==null||(bA._events[y]||[]).length},_hasFilterRow:function(){var bC=this.options.filterable;var bD=bC&&typeof bC.mode==br&&bC.mode.indexOf("row")!=-1;var bA=this.columns;var bB=bd.grep(bA,function(bE){return bE.filterable===false});if(bA.length&&bB.length==bA.length){bD=false}return bD},_details:function(){var bA=this;if(bA.options.scrollable&&bA._hasDetails()&&j(bA.columns).length){throw new Error("Having both detail template and locked columns is not supported")}bA.table.on(bb+bq,".k-hierarchy-cell .k-i-expand, .k-hierarchy-cell .k-i-collapse",function(bE){var bB=bd(this),bI=bB.hasClass("k-i-expand"),bD=bB.closest("tr.k-master-row"),bF,bH=bA.detailTemplate,bC,bG=bA._hasDetails();bB.toggleClass("k-i-expand",!bI).toggleClass("k-i-collapse",bI);bF=bD.next();if(bG&&!bF.hasClass("k-detail-row")){bC=bA.dataItem(bD);bF=bd(bH(bC)).addClass(bD.hasClass("k-alt")?"k-alt":"").insertAfter(bD);bA.angular("compile",function(){return{elements:bF.get(),data:[{dataItem:bC}]}});bA.trigger(y,{masterRow:bD,detailRow:bF,data:bC,detailCell:bF.find(".k-detail-cell")})}bA.trigger(bI?p:aL,{masterRow:bD,detailRow:bF});bF.toggle(bI);if(bA._current){bA._current.attr("aria-expanded",bI)}bE.preventDefault();return false})},dataItem:function(bD){bD=bd(bD)[0];if(!bD){return null}var bC=this.tbody.children(),bF=/k-grouping-row|k-detail-row|k-group-footer/,bA=bD.sectionRowIndex,bB,bE;bE=bA;for(bB=0;bB<bA;bB++){if(bF.test(bC[bB].className)){bE--}}return this._data[bE]},expandRow:function(bA){bd(bA).find("> td .k-i-expand").click()},collapseRow:function(bA){bd(bA).find("> td .k-i-collapse").click()},_createHeaderCells:function(bC,bG){var bF=this,bI,bA,bK,bD="",bB,bJ=ad(bF.columns),bH;for(bI=0,bB=bC.length;bI<bB;bI++){bA=bC[bI].column||bC[bI];bK=bF._headerCellText(bA);bH="";var bE=F(bA,bJ);if(!bA.command){if(bA.field){bH=B.attr("field")+"='"+bA.field+"' "}bD+="<th scope='col' role='columnheader' "+bH;bD+=" aria-haspopup='true'";if(bG&&!bC[bI].colSpan){bD+=" rowspan='"+bG+"'"}if(bC[bI].colSpan>1){bD+='colspan="'+(bC[bI].colSpan-aK(bA.columns))+'" ';bD+=B.attr("colspan")+"='"+bC[bI].colSpan+"'"}if(bA.title){bD+=B.attr("title")+'="'+bA.title.replace('"',"&quot;").replace(/'/g,"'")+'" '}if(bA.groupable!==G){bD+=B.attr("groupable")+"='"+bA.groupable+"' "}if(bA.aggregates&&bA.aggregates.length){bD+=B.attr("aggregates")+"='"+bA.aggregates+"'"}if(bE>-1){bD+=B.attr("index")+"='"+bE+"'"}bD+=s(bA.headerAttributes);bD+=">"+bK+"</th>"}else{bD+="<th scope='col'"+s(bA.headerAttributes);if(bG&&!bC[bI].colSpan){bD+=" rowspan='"+bG+"'"}if(bE>-1){bD+=B.attr("index")+"='"+bE+"'"}bD+=">"+bK+"</th>"}}return bD},_appendLockedColumnContent:function(){var bD=this.columns,bJ,bE=this.table.find("colgroup"),bI=bE.find("col:not(.k-group-col,.k-hierarchy-col)"),bC,bK=bd(),bF=0,bB,bG,bH,bA=0;for(bJ=0,bC=bD.length;bJ<bC;bJ++){if(bD[bJ].locked){if(bp(bD[bJ])){bG=1;if(bD[bJ].columns){bG=ad(bD[bJ].columns).length-aK(bD[bJ].columns)}bG=bG||1;for(bH=0;bH<bG;bH++){bK=bK.add(bI.eq(bJ+bA+bH-bF))}bA+=bG-1}else{bF++}}}bB=bd('<div class="k-grid-content-locked"><table'+(at?' cellspacing="0"':"")+"><colgroup/><tbody></tbody></table></div>");bE.detach();bB.find("colgroup").append(bK);bE.insertBefore(this.table.find("tbody"));this.lockedContent=bB.insertBefore(this.content);this.lockedTable=bB.children("table")},_appendLockedColumnFooter:function(){var bE=this;var bG=bE.footer;var bI=bG.find(".k-footer-template>td");var bF=bG.find(".k-grid-footer-wrap>table>colgroup>col");var bD=bd('<div class="k-grid-footer-locked"><table><colgroup /><tbody><tr class="k-footer-template"></tr></tbody></table></div>');var bH,bA;var bB=bE._groups();var bC=bd(),bJ=bd();bC=bC.add(bI.filter(".k-group-cell"));for(bH=0,bA=ad(j(bE.columns)).length;bH<bA;bH++){bC=bC.add(bI.eq(bH+bB))}bJ=bJ.add(bF.filter(".k-group-col"));for(bH=0,bA=D(ad(a7(bE.columns))).length;bH<bA;bH++){bJ=bJ.add(bF.eq(bH+bB))}bC.appendTo(bD.find("tr"));bJ.appendTo(bD.find("colgroup"));bE.lockedFooter=bD.prependTo(bG)},_appendLockedColumnHeader:function(bT){var bI=this,bC=this.columns,bU,bR,bF,bL,bA,bS,bZ,bX,bD,bN=[],bO=0,bQ=bd(),bM=bI._hasFilterRow(),bP=0,bK=bd(),bB,bV=0,bE=bd();bL=bI.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)");bX=bI.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)");bD=bI.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)");var bY=0;for(bU=0,bF=bC.length;bU<bF;bU++){if(bC[bU].locked){bB=bX.eq(bU);bV=ad(bC[bU].columns||[]).length;if(bp(bC[bU])){var bH=null;if(bC[bU].columns){bH=bV-aK(bC[bU].columns)}bH=bH||1;for(var bJ=0;bJ<bH;bJ++){bQ=bQ.add(bL.eq(bU+bY+bJ-bO))}bY+=bH-1}ag([bC[bU]],aJ(bB),bN,0,0);bV=bV||1;for(var bW=0;bW<bV;bW++){bK=bK.add(bD.eq(bP+bW))}bP+=bV}if(bC[bU].columns){bO+=aK(bC[bU].columns)}if(!bp(bC[bU])){bO++}}if(bN.length){bR='<div class="k-grid-header-locked" style="width:1px"><table'+(at?' cellspacing="0"':"")+"><colgroup/><thead>";bR+=new Array(bN.length+1).join("<tr></tr>");bR+=(bM?'<tr class="k-filter-row" />':"")+"</thead></table></div>";bZ=bd(bR);bL=bZ.find("colgroup");bL.append(bI.thead.prev().find("col.k-group-col").add(bQ));bA=bZ.find("thead tr:not(.k-filter-row)");for(bU=0,bF=bN.length;bU<bF;bU++){bE=ab(bN[bU]);bA.eq(bU).append(bI.thead.find("tr:eq("+bU+") .k-group-cell").add(bE))}var bG=A(this.thead);if(bN.length<bG){bx(bZ,bG-bN.length)}bS=bZ.find(".k-filter-row");bS.append(bI.thead.find(".k-filter-row .k-group-cell").add(bK));this.lockedHeader=bZ.prependTo(bT);this.thead.find(".k-group-cell").remove();return true}return false},_removeLockedContainers:function(){var bA=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);B.destroy(bA);bA.off(bq).remove();this.lockedHeader=this.lockedContent=this.lockedFooter=null;this.selectable=null},_thead:function(){var bG=this,bC=bG.columns,bJ=bG._hasDetails()&&bC.length,bB=bG._hasFilterRow(),bK,bE="",bH=bG.table.find(">thead"),bA=bG.element.find("thead:first").length>0,bI;if(!bH.length){bH=bd("<thead/>").insertBefore(bG.tbody)}if(bG.lockedHeader&&bG.thead){bI=bG.thead.find("tr:has(th):not(.k-filter-row)").html("");bI.remove();bI=bd();bG._removeLockedContainers()}else{if(bA){bI=bG.element.find("thead:first tr:has(th):not(.k-filter-row)")}else{bI=bG.element.find("tr:has(th):first")}}if(!bI.length){bI=bH.children().first();if(!bI.length){var bN=[{rowSpan:1,cells:[],index:0}];bG._prepareColumns(bN,bC);for(bK=0;bK<bN.length;bK++){bE+="<tr>";if(bJ){bE+='<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'}bE+=bG._createHeaderCells(bN[bK].cells,bN[bK].rowSpan);bE+="</tr>"}bI=bd(bE)}}if(bB){var bM=bd("<tr/>");bM.addClass("k-filter-row");if(bJ||bI.find(".k-hierarchy-cell").length){bM.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>')}var bL=(bG.thead||bH).find(".k-filter-row");if(bL.length){B.destroy(bL);bL.remove()}bH.append(bM)}if(!bI.children().length){bE="";if(bJ){bE+='<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'}bE+=bG._createHeaderCells(bC);bI.html(bE)}else{if(bJ&&!bI.find(".k-hierarchy-cell")[0]){bI.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>')}}bI.attr("role","row").find("th").addClass("k-header");if(!bG.options.scrollable){bH.addClass("k-grid-header")}bI.find("script").remove().end().prependTo(bH);if(bG.thead){bG._destroyColumnAttachments()}this.angular("cleanup",function(){return{elements:bH.find("th").get()}});this.angular("compile",function(){return{elements:bH.find("th").get(),data:H(bC,function(bO){return{column:bO}})}});bG.thead=bH.attr("role","rowgroup");bG._sortable();bG._filterable();bG._filterRow();bG._scrollable();bG._updateCols();bG._columnMenu();var bF;var bD=this.options.scrollable&&j(this.columns).length;if(bD){bF=bG._appendLockedColumnHeader(bG.thead.closest(".k-grid-header"));bG._appendLockedColumnContent();bG.lockedContent.bind("DOMMouseScroll"+bq+" mousewheel"+bq,L(bG._wheelScroll,bG))}bG._updateColumnCellIndex();bG._updateFirstColumnClass();bG._resizable();bG._draggable();bG._reorderable();bG._updateHeader(bG._groups());if(bD){if(bF){bG._syncLockedHeaderHeight()}bG._applyLockedContainersWidth()}if(bG.groupable){bG._attachGroupable()}},_retrieveFirstColumn:function(bB,bD){var bA=bd();if(bD.length&&bB[0]){var bC=bB[0];while(bC.columns&&bC.columns.length){bC=bC.columns[0];bD=bD.filter(":not(:first())")}bA=bA.add(bD)}return bA},_updateFirstColumnClass:function(){var bB=this,bA=bB.columns||[],bE=bB._hasDetails()&&bA.length;if(!bE&&!bB._groups()){var bD=bB.thead.find(">tr:not(.k-filter-row):not(:first)");bA=be(bA);var bC=bB._retrieveFirstColumn(bA,bD);if(bB._isLocked()){bD=bB.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)");bA=j(bB.columns);bC=bC.add(bB._retrieveFirstColumn(bA,bD))}bC.each(function(){var bF=bd(this).find("th");bF.removeClass("k-first");bF.eq(0).addClass("k-first")})}},_prepareColumns:function(bH,bB,bA,bF){var bG=bF||bH[bH.length-1];var bC=bH[bG.index+1];var bI=0;for(var bD=0;bD<bB.length;bD++){var bE={column:bB[bD],colSpan:0};bG.cells.push(bE);if(bB[bD].columns&&bB[bD].columns.length){if(!bC){bC={rowSpan:0,cells:[],index:bH.length};bH.push(bC)}bE.colSpan=bB[bD].columns.length;this._prepareColumns(bH,bB[bD].columns,bE,bC);bI+=bE.colSpan-1;bG.rowSpan=bH.length-bG.index}}if(bA){bA.colSpan+=bI}},_wheelScroll:function(bC){if(bC.ctrlKey){return}var bA=this.content;if(this.options.scrollable.virtual){bA=this.virtualScrollable.verticalScrollbar}var bB=bA.scrollTop(),bD=B.wheelDeltaY(bC);if(bD){if(bA[0].scrollHeight>bA[0].clientHeight&&(bA[0].scrollTop<bA[0].scrollHeight-bA[0].clientHeight&&bD<0||bA[0].scrollTop>0&&bD>0)){bC.preventDefault()}bA.scrollTop(bB+-bD)}},_isLocked:function(){return this.lockedHeader!=null},_updateHeaderCols:function(){var bA=this.thead.parent().add(this.table);if(this._isLocked()){bu(bA,P(bl(this.columns)),this._hasDetails(),0)}else{bu(bA,P(D(this.columns)),this._hasDetails(),0)}},_updateCols:function(bA){bA=bA||this.thead.parent().add(this.table);this._appendCols(bA,this._isLocked())},_updateLockedCols:function(bA){if(this._isLocked()){bA=bA||this.lockedHeader.find("table").add(this.lockedTable);bu(bA,P(a7(this.columns)),this._hasDetails(),this._groups())}},_appendCols:function(bB,bA){if(bA){bu(bB,P(bl(this.columns)),this._hasDetails(),0)}else{bu(bB,P(D(this.columns)),this._hasDetails(),this._groups())}},_autoColumns:function(bB){if(bB&&bB.toJSON){var bA=this,bD,bC;bB=bB.toJSON();bC=!(bA.table.find("tbody tr").length>0&&(!bA.dataSource||!bA.dataSource.transport));for(bD in bB){bA.columns.push({field:bD,encoded:bC,headerAttributes:{id:B.guid()}})}bA._thead();bA._templates()}},_rowsHtml:function(bG,bC){var bF=this,bB="",bA,bH=bC.rowTemplate,bD=bC.altRowTemplate,bE;for(bA=0,bE=bG.length;bA<bE;bA++){if(bA%2){bB+=bD(bG[bA])}else{bB+=bH(bG[bA])}bF._data.push(bG[bA])}return bB},_groupRowHtml:function(bJ,bC,bA,bL,bD,bT){var bI=this,bN="",bR,bF,bB=bJ.field,bE=m(ad(bI.columns),function(bV){return bV.field==bB})[0]||{},bU=bE.groupHeaderTemplate,bP=(bE.title||bB)+": "+ai(bJ.value,bE.format,bE.values,bE.encoded),bS=bI._groupAggregatesDefaultObject||{},bH=aP({},bS,bJ.aggregates),bO=aP({},{field:bJ.field,value:bJ.value,aggregates:bH},bJ.aggregates[bJ.field]),bG=bD.groupFooterTemplate,bK=bJ.items;if(bU){bP=typeof bU===aV?bU(bO):B.template(bU)(bO)}bN+=bL(bC,bA,bP);if(bJ.hasSubgroups){for(bR=0,bF=bK.length;bR<bF;bR++){bN+=bI._groupRowHtml(bK[bR],bT?bC:bC-1,bA+1,bL,bD,bT)}}else{bN+=bI._rowsHtml(bK,bD)}if(bG){var bM={};for(var bQ in bH){bM[bQ]=aP({},bH[bQ],{group:{field:bJ.field,value:bJ.value}})}bN+=bG(bM)}return bN},collapseGroup:function(bJ){bJ=bd(bJ);var bA,bF=this.options.groupable,bK=bF.showFooter,bD=bK?0:1,bE,bC=bd(),bI,bB,bG;if(this._isLocked()){if(!bJ.closest("div").hasClass("k-grid-content-locked")){bC=bJ.nextAll("tr");bJ=this.lockedTable.find(">tbody>tr:eq("+bJ.index()+")")}else{bC=this.tbody.children("tr:eq("+bJ.index()+")").nextAll("tr")}}bA=bJ.find(".k-group-cell").length;bJ.find(".k-i-collapse").addClass("k-i-expand").removeClass("k-i-collapse");bJ.find("td[aria-expanded='true']:first").attr("aria-expanded",false);bJ=bJ.nextAll("tr");var bH=[];for(bI=0,bB=bJ.length;bI<bB;bI++){bG=bJ.eq(bI);bE=bG.find(".k-group-cell").length;if(bG.hasClass("k-grouping-row")){bD++}else{if(bG.hasClass("k-group-footer")){bD--}}if(bE<=bA||bG.hasClass("k-group-footer")&&bD<0){break}if(bC.length){bH.push(bC[bI])}bH.push(bG[0])}bd(bH).hide()},expandGroup:function(bJ){bJ=bd(bJ);var bF=this,bK=bF.options.groupable.showFooter,bA,bG,bE,bD=bd(),bH,bB,bI=[],bC=1;if(this._isLocked()){if(!bJ.closest("div").hasClass("k-grid-content-locked")){bD=bJ.nextAll("tr");bJ=this.lockedTable.find(">tbody>tr:eq("+bJ.index()+")")}else{bD=this.tbody.children("tr:eq("+bJ.index()+")").nextAll("tr")}}bA=bJ.find(".k-group-cell").length;bJ.find(".k-i-expand").addClass("k-i-collapse").removeClass("k-i-expand");bJ.find("td[aria-expanded='false']:first").attr("aria-expanded",true);bJ=bJ.nextAll("tr");for(bH=0,bB=bJ.length;bH<bB;bH++){bG=bJ.eq(bH);bE=bG.find(".k-group-cell").length;if(bE<=bA){break}if(bE==bA+1&&!bG.hasClass("k-detail-row")){bG.show();bD.eq(bH).show();if(bG.hasClass("k-grouping-row")&&bG.find(".k-icon").hasClass("k-i-collapse")){bF.expandGroup(bG)}if(bG.hasClass("k-master-row")&&bG.find(".k-icon").hasClass("k-i-collapse")){bG.next().show();bD.eq(bH+1).show()}}if(bG.hasClass("k-grouping-row")){if(bK){bI.push(bG.is(":visible"))}bC++}if(bG.hasClass("k-group-footer")){if(bK){bG.toggle(bI.pop())}if(bC==1){bG.show();bD.eq(bH).show()}else{bC--}}}},_updateHeader:function(bA){var bE=this,bB=bE._isLocked()?bE.lockedHeader.find("thead"):bE.thead,bD=bB.find("tr.k-filter-row").find("th.k-group-cell").length,bC=bB.find("tr:first").find("th.k-group-cell").length,bF=bB.children("tr:not(:first)").filter(function(){return !bd(this).children(":visible").length});if(bA>bC){bd(new Array(bA-bC+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>')).prependTo(bB.children("tr:not(.k-filter-row)"));if(bE.element.is(":visible")){bF.find("th.k-group-cell").hide()}}else{if(bA<bC){bB.find("tr").each(function(){bd(this).find("th.k-group-cell").filter(":eq("+bA+"),:gt("+bA+")").remove()})}}if(bA>bD){bd(new Array(bA-bD+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>')).prependTo(bB.find(".k-filter-row"))}},_firstDataItem:function(bB,bA){if(bB&&bA){if(bB.hasSubgroups){bB=this._firstDataItem(bB.items[0],bA)}else{bB=bB.items[0]}}return bB},_updateTablesWidth:function(){var bB=this,bA;if(!bB._isLocked()){return}bA=bd(">.k-grid-footer>.k-grid-footer-wrap>table",bB.wrapper).add(bB.thead.parent()).add(bB.table);bB._footerWidth=bj(bA.eq(0));bA.width(bB._footerWidth);bA=bd(">.k-grid-footer>.k-grid-footer-locked>table",bB.wrapper).add(bB.lockedHeader.find(">table")).add(bB.lockedTable);bA.width(bj(bA.eq(0)))},hideColumn:function(bE){var bH=this,bO,bP,bN,bL,bF,bG,bB=0,bK,bC,bM=bH.footer||bH.wrapper.find(".k-grid-footer"),bD=bH.columns,bJ=bH.lockedHeader?r(bH.lockedHeader.find(">table>thead")).filter(a1).length:0,bI;if(typeof bE=="number"){bE=bD[bE]}else{if(V(bE)){bE=m(w(bD),function(bQ){return bQ===bE})[0]}else{bE=m(w(bD),function(bQ){return bQ.field===bE})[0]}}if(!bE||!bp(bE)){return}if(bE.columns&&bE.columns.length){bG=am(bE,bD);v(bE,false);c(bm(bd(">table>thead",bH.lockedHeader),bH.thead,">tr:eq("+bG.row+")>th"),bG.cell,false);for(bN=0;bN<bE.columns.length;bN++){this.hideColumn(bE.columns[bN])}bH.trigger(J,{column:bE});return}bI=F(bE,D(ad(bD)));v(bE,false);bH._setParentsVisibility(bE,false);bH._templates();bH._updateCols();bH._updateLockedCols();var bA=bH.thead;bK=bI;if(bH.lockedHeader&&bJ>bI){bA=bH.lockedHeader.find(">table>thead")}else{bK-=bJ}bO=r(bA).filter(a1).eq(bK);bO[0].style.display="none";c(bm(bd(">table>thead",bH.lockedHeader),bH.thead,">tr.k-filter-row>th"),bI,false);if(bM[0]){bH._updateCols(bM.find(">.k-grid-footer-wrap>table"));bH._updateLockedCols(bM.find(">.k-grid-footer-locked>table"));c(bM.find(".k-footer-template>td"),bI,false)}if(bH.lockedTable&&bJ>bI){aM(bH.lockedTable.find(">tbody>tr"),bI)}else{aM(bH.tbody.children(),bI-bJ)}if(bH.lockedTable){bH._updateTablesWidth();bH._applyLockedContainersWidth();bH._syncLockedContentHeight();bH._syncLockedHeaderHeight();bH._syncLockedFooterHeight()}else{bL=bH.thead.prev().find("col");for(bN=0,bC=bL.length;bN<bC;bN+=1){bF=bL[bN].style.width;if(bF&&bF.indexOf("%")==-1){bB+=parseInt(bF,10)}else{bB=0;break}}bP=bd(">.k-grid-header table:first,>.k-grid-footer table:first",bH.wrapper).add(bH.table);bH._footerWidth=null;if(bB){bP.each(function(){this.style.width=bB+"px"});bH._footerWidth=bB}if(bf.msie&&bf.version==8){bP.css("display","inline-table");setTimeout(function(){bP.css("display","table")},1)}}bH._updateFirstColumnClass();bH.trigger(J,{column:bE})},_setParentsVisibility:function(bB,bA){var bC=this.columns;var bH;var bF=[];var bG;var bD;var bJ;var bE;var bI=bA?function(bK){return D(bK.columns).length&&bK.hidden}:function(bK){return !D(bK.columns).length&&!bK.hidden};if(aB(bB,bC,bF)&&bF.length){for(bH=bF.length-1;bH>=0;bH--){bG=bF[bH];bD=ay(bG,bC);bJ=bm(bd(">table>thead",this.lockedHeader),this.thead,">tr:eq("+bD.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(bD.cell);if(bI(bG)){v(bG,bA);bJ[0].style.display=bA?"":"none"}if(bJ.filter("["+B.attr("colspan")+"]").length){bE=parseInt(bJ.attr(B.attr("colspan")),10);bJ[0].colSpan=bE-aK(bG.columns)||1}}}},showColumn:function(bE){var bI=this,bN,bC,bO,bP,bB,bK,bH,bG,bL,bD=bI.columns,bM=bI.footer||bI.wrapper.find(".k-grid-footer"),bF=bI.lockedHeader?r(bI.lockedHeader.find(">table>thead")).length:0,bJ;if(typeof bE=="number"){bE=bD[bE]}else{if(V(bE)){bE=m(w(bD),function(bQ){return bQ===bE})[0]}else{bE=m(w(bD),function(bQ){return bQ.field===bE})[0]}}if(!bE||bp(bE)){return}if(bE.columns&&bE.columns.length){bH=ay(bE,bD);v(bE,true);c(bm(bd(">table>thead",bI.lockedHeader),bI.thead,">tr:eq("+bH.row+")>th"),bH.cell,true);for(bN=0;bN<bE.columns.length;bN++){this.showColumn(bE.columns[bN])}bI.trigger(aY,{column:bE});return}bJ=F(bE,ad(bD));v(bE,true);bI._setParentsVisibility(bE,true);bI._templates();bI._updateCols();bI._updateLockedCols();var bA=bI.thead;bK=bJ;if(bI.lockedHeader&&bF>bJ){bA=bI.lockedHeader.find(">table>thead")}else{bK-=bF}bO=r(bA).eq(bK);bO[0].style.display="";c(bm(bd(">table>thead",bI.lockedHeader),bI.thead,">tr.k-filter-row>th"),bJ,true);if(bM[0]){bI._updateCols(bM.find(">.k-grid-footer-wrap>table"));bI._updateLockedCols(bM.find(">.k-grid-footer-locked>table"));c(bM.find(".k-footer-template>td"),bJ,true)}if(bI.lockedTable&&bF>bJ){T(bI.lockedTable.find(">tbody>tr"),bJ)}else{T(bI.tbody.children(),bJ-bF)}if(bI.lockedTable){bI._updateTablesWidth();bI._applyLockedContainersWidth();bI._syncLockedContentHeight();bI._syncLockedHeaderHeight()}else{bP=bd(">.k-grid-header table:first,>.k-grid-footer table:first",bI.wrapper).add(bI.table);if(!bE.width){bP.width("")}else{bB=0;bL=bI.thead.prev().find("col");for(bN=0,bC=bL.length;bN<bC;bN+=1){bG=bL[bN].style.width;if(bG.indexOf("%")>-1){bB=0;break}bB+=parseInt(bG,10)}bI._footerWidth=null;if(bB){bP.each(function(){this.style.width=bB+"px"});bI._footerWidth=bB}}}bI._updateFirstColumnClass();bI.trigger(aY,{column:bE})},_progress:function(bA){var bB=this.element;if(this.lockedContent){bB=this.wrapper}else{if(this.element.is("table")){bB=this.element.parent()}else{if(this.content&&this.content.length){bB=this.content}}}B.ui.progress(bB,bA)},_resize:function(bA,bB){this._syncLockedContentHeight();this._syncLockedHeaderHeight();if(this.content){this._setContentWidth();this._setContentHeight()}if(this.virtualScrollable&&(bB||this._rowHeight)){if(bB){this._rowHeight=null}this.virtualScrollable.repaintScrollbar()}},_isActiveInTable:function(){var bA=X();if(!bA){return false}return this.table[0]===bA||bd.contains(this.table[0],bA)||this._isLocked()&&(this.lockedTable[0]===bA||bd.contains(this.lockedTable[0],bA))},refresh:function(bF){var bE=this,bC=bE.dataSource.view(),bI=bE.options.navigatable,bH,bG=bd(bE.current()),bD=false,bB=(bE.dataSource.group()||[]).length,bA=bB+P(D(bE.columns)).length;if(bF&&bF.action==="itemchange"&&bE.editable){return}if(bF&&bF.action==="remove"&&bE.editable&&bE.editable.options.model&&F(bE.editable.options.model,bF.items)>-1){bE.editable.options.model.unbind(aa,bE._modelChangeHandler)}bF=bF||{};if(bE.trigger("dataBinding",{action:bF.action||"rebind",index:bF.index,items:bF.items})){return}bE._angularItems("cleanup");if(bI&&(bE._isActiveInTable()||bE._editContainer&&bE._editContainer.data("kendoWindow"))){bD=bG.is("th");bH=Math.max(bE.cellIndex(bG),0)}bE._destroyEditable();bE._progress(false);bE._hideResizeHandle();bE._data=[];if(!bE.columns.length){bE._autoColumns(bE._firstDataItem(bC[0],bB));bA=bB+bE.columns.length}bE._group=bB>0||bE._group;if(bE._group){bE._templates();bE._updateCols();bE._updateLockedCols();bE._updateHeader(bB);bE._group=bB>0}bE._renderContent(bC,bA,bB);bE._renderLockedContent(bC,bA,bB);bE._footer();bE._renderNoRecordsContent();bE._setContentHeight();bE._setContentWidth(bE.content&&bE.content.scrollLeft());if(bE.lockedTable){if(bE.options.scrollable.virtual){bE.content.find(">.k-virtual-scrollable-wrap").trigger("scroll")}else{if(bE.touchScroller){bE.touchScroller.movable.trigger("change")}else{bE.wrapper.one("scroll",function(bJ){bJ.stopPropagation()});bE.content.trigger("scroll")}}}bE._restoreCurrent(bH,bD);if(bE.touchScroller){bE.touchScroller.contentResized()}if(bE.selectable){bE.selectable.resetTouchEvents()}bE._muteAngularRebind(function(){bE._angularItems("compile")});bE.trigger(M)},_restoreCurrent:function(bA,bB){if(bA===G||bA<0){return}this._removeCurrent();if(bB){this._setCurrent(this.thead.find("th:not(.k-group-cell)").eq(bA))}else{var bE=0;if(this._rowVirtualIndex){bE=this.virtualScrollable.position(this._rowVirtualIndex)}else{bA=0}var bC=bd();if(this.lockedTable){bC=this.lockedTable.find(">tbody>tr").eq(bE)}bC=bC.add(this.tbody.children().eq(bE));var bD=bC.find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(bA);this._setCurrent(bD)}if(this._current){a9(this._current.closest("table")[0],true)}},_angularItems:function(bA){B.ui.DataBoundWidget.fn._angularItems.call(this,bA);if(bA==="cleanup"){this._cleanupDetailItems()}this._angularGroupItems(bA);this._angularGroupFooterItems(bA)},_cleanupDetailItems:function(){var bA=this;if(bA._hasDetails()){bA.angular("cleanup",function(){return{elements:bA.tbody.children(".k-detail-row")}});bA.tbody.find(".k-detail-cell").empty()}},_angularGroupItems:function(bC){var bB=this,bA=bB.tbody;if(bB.lockedContent){bA=bB.lockedTable.find("tbody")}if(bB._group){bB.angular(bC,function(){return{elements:bA.children(".k-grouping-row"),data:bd.map(aC(bB.dataSource.view()),function(bD){return{dataItem:bD}})}})}},_angularGroupFooterItems:function(bC){var bB=this,bA=bB.tbody;if(bB.lockedContent){bA=bB.element}if(bB._group&&bB.groupFooterTemplate){bB.angular(bC,function(){return{elements:bA.find(".k-group-footer"),data:bd.map(k(bB.dataSource.view()),function(bD){return{dataItem:bD}})}})}},_renderContent:function(bE,bC,bD){var bG=this,bI,bB,bF="",bA=bG.lockedContent!=null,bH={rowTemplate:bG.rowTemplate,altRowTemplate:bG.altRowTemplate,groupFooterTemplate:bG.groupFooterTemplate};bC=bA?bC-P(a7(bG.columns)).length:bC;if(bD>0){bC=bA?bC-bD:bC;if(bG.detailTemplate){bC++}if(bG.groupFooterTemplate){bG._groupAggregatesDefaultObject=bG.dataSource.aggregates()}for(bI=0,bB=bE.length;bI<bB;bI++){bF+=bG._groupRowHtml(bE[bI],bC,0,bA?aG:a8,bH,bA)}}else{bF+=bG._rowsHtml(bE,bH)}bG.tbody=a5(bG.tbody,bG.table,bF,this.options.$angular)},_renderLockedContent:function(bG,bH,bB){var bD="",bA,bF,bC={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate};if(this.lockedContent){var bE=this.lockedTable;if(bB>0){bH=bH-D(ad(be(this.columns))).length;for(bA=0,bF=bG.length;bA<bF;bA++){bD+=this._groupRowHtml(bG[bA],bH,0,a8,bC)}}else{bD=this._rowsHtml(bG,bC)}a5(bE.children("tbody"),bE,bD,this.options.$angular);this._syncLockedContentHeight()}},_adjustRowsHeight:function(bG,bF){var bL=bG[0].rows,bB=bL.length,bI,bH=bF[0].rows,bC=bG.add(bF),bD=bC.length,bE=[];for(bI=0;bI<bB;bI++){if(!bH[bI]){break}if(bL[bI].style.height){bL[bI].style.height=bH[bI].style.height=""}}for(bI=0;bI<bB;bI++){if(!bH[bI]){break}var bA=bL[bI].offsetHeight;var bK=bH[bI].offsetHeight;var bJ=0;if(bA>bK){bJ=bA}else{if(bA<bK){bJ=bK}}bE.push(bJ)}for(bI=0;bI<bD;bI++){bC[bI].style.display="none"}for(bI=0;bI<bB;bI++){if(bE[bI]){bL[bI].style.height=bH[bI].style.height=bE[bI]+1+"px"}}for(bI=0;bI<bD;bI++){bC[bI].style.display=""}}});if(B.ExcelMixin){B.ExcelMixin.extend(a0.prototype)}if(B.PDFMixin){B.PDFMixin.extend(a0.prototype);a0.prototype._drawPDF_autoPageBreak=function(bC){var bB=this;var bK=new bd.Deferred();var bA=bB.dataSource;var bE=bB.options.pdf.allPages;var bL=bB.wrapper.find(".k-grid-content tbody");var bM=bd("<div>").css({position:"absolute",left:-10000,top:-10000});var bH=bB.wrapper.clone().css({height:"auto",width:"auto"}).appendTo(bM);bH.find(".k-grid-content").css({height:"auto",width:"auto",overflow:"visible"});bH.find(".k-grid-pager, .k-grid-toolbar, .k-grouping-header").remove();bH.find(".k-grid-header").css({paddingRight:0});this._initPDFProgress(bC);var bF=bH.find(".k-grid-content tbody").empty();var bG=bA.page();function bJ(){if(bE&&bG!==G){bA.one("change",bI);bA.page(bG)}else{bB.refresh();bI()}}function bI(){bM.appendTo(document.body);var bN=bd.extend({},bB.options.pdf,{_destructive:true,progress:function(bO){bC.notify({page:bO.page,pageNumber:bO.pageNum,progress:0.5+bO.pageNum/bO.totalPages/2,totalPages:bO.totalPages})}});B.drawing.drawDOM(bH,bN).always(function(){bM.remove()}).then(function(bO){bK.resolve(bO)}).fail(function(bO){bK.reject(bO)})}function bD(){var bO=bA.page();var bN=bE?bA.totalPages():1;bF.append(bL.find("tr"));if(bO<bN){bA.page(bO+1)}else{bA.unbind("change",bD);bJ()}}if(bE){bA.bind("change",bD);bA.page(1)}else{bD()}return bK.promise()};a0.prototype._drawPDF=function(bC){var bB=this;if(bB.options.pdf.paperSize&&bB.options.pdf.paperSize!="auto"){return bB._drawPDF_autoPageBreak(bC)}var bI=new bd.Deferred();var bA=bB.dataSource;var bD=bB.options.pdf.allPages;this._initPDFProgress(bC);var bG=new B.drawing.Group();var bF=bA.page();function bH(){if(bD&&bF!==G){bA.unbind("change",bE);bA.one("change",function(){bI.resolve(bG)});bA.page(bF)}else{bI.resolve(bG)}}function bE(){bB._drawPDFShadow({width:bB.wrapper.width()},{avoidLinks:bB.options.pdf.avoidLinks}).done(function(bM){var bL=bA.page();var bK=bD?bA.totalPages():1;var bJ={page:bM,pageNumber:bL,progress:bL/bK,totalPages:bK};bC.notify(bJ);bG.append(bJ.page);if(bL<bK){bA.page(bL+1)}else{bH()}}).fail(function(bJ){bI.reject(bJ)})}if(bD){bA.bind("change",bE);bA.page(1)}else{bE()}return bI.promise()};a0.prototype._initPDFProgress=function(bA){var bC=bd("<div class='k-loading-pdf-mask'><div class='k-loading-color'/></div>");bC.prepend(this.wrapper.clone().css({position:"absolute",top:0,left:0}));this.wrapper.append(bC);var bB=bd("<div class='k-loading-pdf-progress'>").appendTo(bC).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar");bA.progress(function(bD){bB.value(bD.progress)}).always(function(){B.destroy(bC);bC.remove()})}}function aH(bC,bB){bC=bC[0];bB=bB[0];if(bC.rows.length!==bB.rows.length){var bA=bC.offsetHeight;var bD=bB.offsetHeight;var bF;var bE;if(bA>bD){bF=bB.rows[bB.rows.length-1];if(ac.test(bF.className)){bF=bB.rows[bB.rows.length-2]}bE=bA-bD}else{bF=bC.rows[bC.rows.length-1];if(ac.test(bF.className)){bF=bC.rows[bC.rows.length-2]}bE=bD-bA}bF.style.height=bF.offsetHeight+bE+"px"}}function aS(bE,bC){var bA;var bD=bE.offsetHeight;var bB=bC.offsetHeight;if(bD>bB){bA=bD+"px"}else{if(bD<bB){bA=bB+"px"}}if(bA){bE.style.height=bC.style.height=bA}}function E(bB,bC){var bA,bD,bE;if(typeof bB===br&&bB===bC){return bB}if(V(bB)&&bB.name===bC){return bB}if(d(bB)){for(bA=0,bD=bB.length;bA<bD;bA++){bE=bB[bA];if(typeof bE===br&&bE===bC||bE.name===bC){return bE}}}return null}function a9(bB,bF){var bA=bf.msie||bf.edge;if(bF===true){bB=bd(bB);var bD,bE;bD=bB.parent().scrollTop();bE=bB.parent().scrollLeft();if(bA){try{bB[0].setActive()}catch(bC){bB[0].focus()}}else{bB[0].focus()}bB.parent().scrollTop(bD).scrollLeft(bE)}else{bd(bB).one("focusin",function(bG){bG.preventDefault()}).focus()}}function bg(bB,bA){if(!bB.field){return false}if(bA.editable&&!bA.editable(bB.field)){return false}if(bB.editable&&!bB.editable(bA)){return false}return true}function a4(bA){return bd(bA).is(":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap,.k-tool-icon")}function O(bG){var bF=bd(bG.currentTarget),bE=bF.is("th"),bD=this.table.add(this.lockedTable),bC=this.thead.parent().add(bd(">table",this.lockedHeader)),bB=a4(bG.target),bA=bF.closest("table")[0];if(B.support.touch){return}if(bB&&bF.find(B.roleSelector("filtercell")).length){this._setCurrent(bF);return}if(bA!==bD[0]&&bA!==bD[1]&&bA!==bC[0]&&bA!==bC[1]){return}if(bd(bG.target).is("a.k-i-expand, a.k-i-collapse")){return}if(this.options.navigatable){this._setCurrent(bF)}if(bE||!bB){setTimeout(function(){if(!(ap&&bd(B._activeElement()).hasClass("k-widget"))){if(!a4(B._activeElement())){a9(bA,true)}}})}if(bE){bG.preventDefault()}}function z(bA){return bA&&(bA.hasClass("k-edit-cell")||bA.parent().hasClass("k-grid-edit-row"))}function a8(bC,bB,bA){return'<tr role="row" class="k-grouping-row">'+ba(bB)+'<td colspan="'+bC+'" aria-expanded="true"><p class="k-reset"><a class="k-icon k-i-collapse" href="#" tabindex="-1"></a>'+bA+"</p></td></tr>"}function aG(bA){return'<tr role="row" class="k-grouping-row"><td colspan="'+bA+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>'}aw.plugin(a0);aw.plugin(aN)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.listview",["kendo.data","kendo.editable","kendo.selectable"],a)}(function(){var a={id:"listview",name:"ListView",category:"web",description:"The ListView widget offers rich support for interacting with data.",depends:["data"],features:[{id:"listview-editing",name:"Editing",description:"Support for record editing",depends:["editable"]},{id:"listview-selection",name:"Selection",description:"Support for selection",depends:["selectable"]}]};(function(g,j){var s=window.kendo,p="change",e="cancel",t="dataBound",r="dataBinding",d=s.ui.Widget,q=s.keys,w=">*:not(.k-loading-mask)",x="progress",m="error",n="k-state-focused",i="k-state-selected",z="k-edit-item",y="edit",o="remove",c="save",h="click",v=".kendoListView",u=g.proxy,l=s._activeElement,k=s.ui.progress,f=s.data.DataSource;var b=s.ui.DataBoundWidget.extend({init:function(B,A){var C=this;A=g.isArray(A)?{dataSource:A}:A;d.fn.init.call(C,B,A);A=C.options;C.wrapper=B=C.element;if(B[0].id){C._itemId=B[0].id+"_lv_active"}C._element();C._dataSource();C._templates();C._navigatable();C._selectable();C._pageable();C._crudHandlers();if(C.options.autoBind){C.dataSource.fetch()}s.notify(C)},events:[p,e,r,t,y,o,c],options:{name:"ListView",autoBind:true,selectable:false,navigatable:false,template:"",altTemplate:"",editTemplate:""},setOptions:function(A){d.fn.setOptions.call(this,A);this._templates();if(this.selectable){this.selectable.destroy();this.selectable=null}this._selectable()},_templates:function(){var A=this.options;this.template=s.template(A.template||"");this.altTemplate=s.template(A.altTemplate||A.template);this.editTemplate=s.template(A.editTemplate||"")},_item:function(A){return this.element.children()[A]()},items:function(){return this.element.children()},dataItem:function(C){var A=s.attr("uid");var B=g(C).closest("["+A+"]").attr(A);return this.dataSource.getByUid(B)},setDataSource:function(A){this.options.dataSource=A;this._dataSource();if(this.options.autoBind){A.fetch()}},_unbindDataSource:function(){var A=this;A.dataSource.unbind(p,A._refreshHandler).unbind(x,A._progressHandler).unbind(m,A._errorHandler)},_dataSource:function(){var A=this;if(A.dataSource&&A._refreshHandler){A._unbindDataSource()}else{A._refreshHandler=u(A.refresh,A);A._progressHandler=u(A._progress,A);A._errorHandler=u(A._error,A)}A.dataSource=f.create(A.options.dataSource).bind(p,A._refreshHandler).bind(x,A._progressHandler).bind(m,A._errorHandler)},_progress:function(){k(this.element,true)},_error:function(){k(this.element,false)},_element:function(){this.element.addClass("k-widget k-listview").attr("role","listbox")},refresh:function(F){var E=this,I=E.dataSource.view(),C,G,L,D="",J,A,K=E.template,H=E.altTemplate,B=l();F=F||{};if(F.action==="itemchange"){if(!E._hasBindingTarget()&&!E.editable){C=F.items[0];L=E.items().filter("["+s.attr("uid")+"="+C.uid+"]");if(L.length>0){J=L.index();E.angular("cleanup",function(){return{elements:[L]}});L.replaceWith(K(C));L=E.items().eq(J);L.attr(s.attr("uid"),C.uid);E.angular("compile",function(){return{elements:[L],data:[{dataItem:C}]}});E.trigger("itemChange",{item:L,data:C})}}return}if(E.trigger(r,{action:F.action||"rebind",items:F.items,index:F.index})){return}E._angularItems("cleanup");E._destroyEditable();for(J=0,A=I.length;J<A;J++){if(J%2){D+=H(I[J])}else{D+=K(I[J])}}E.element.html(D);G=E.items();for(J=0,A=I.length;J<A;J++){G.eq(J).attr(s.attr("uid"),I[J].uid).attr("role","option").attr("aria-selected","false")}if(E.element[0]===B&&E.options.navigatable){E.current(G.eq(0))}E._angularItems("compile");E.trigger(t)},_pageable:function(){var D=this,A=D.options.pageable,C,B;if(g.isPlainObject(A)){B=A.pagerId;C=g.extend({},A,{dataSource:D.dataSource,pagerId:null});D.pager=new s.ui.Pager(g("#"+B),C)}},_selectable:function(){var B=this,D,C,A=B.options.selectable,E=B.options.navigatable;if(A){D=s.ui.Selectable.parseOptions(A).multiple;B.selectable=new s.ui.Selectable(B.element,{aria:true,multiple:D,filter:w,change:function(){B.trigger(p)}});if(E){B.element.on("keydown"+v,function(F){if(F.keyCode===q.SPACEBAR){C=B.current();if(F.target==F.currentTarget){F.preventDefault()}if(D){if(!F.ctrlKey){B.selectable.clear()}else{if(C&&C.hasClass(i)){C.removeClass(i);return}}}else{B.selectable.clear()}B.selectable.value(C)}})}}},current:function(B){var C=this,A=C.element,D=C._current,E=C._itemId;if(B===j){return D}if(D&&D[0]){if(D[0].id===E){D.removeAttr("id")}D.removeClass(n);A.removeAttr("aria-activedescendant")}if(B&&B[0]){E=B[0].id||E;C._scrollTo(B[0]);A.attr("aria-activedescendant",E);B.addClass(n).attr("id",E)}C._current=B},_scrollTo:function(C){var D=this,B,E=false,F="scroll";if(D.wrapper.css("overflow")=="auto"||D.wrapper.css("overflow")==F){B=D.wrapper[0]}else{B=window;E=true}var A=function(J,I){var G=E?g(C).offset()[J.toLowerCase()]:C["offset"+J],K=C["client"+I],L=g(B)[F+J](),H=g(B)[I.toLowerCase()]();if(G+K>L+H){g(B)[F+J](G+K-H)}else{if(G<L){g(B)[F+J](G)}}};A("Top","Height");A("Left","Width")},_navigatable:function(){var C=this,D=C.options.navigatable,A=C.element,B=function(E){C.current(g(E.currentTarget));if(!g(E.target).is(":button,a,:input,a>.k-icon,textarea")){A.focus()}};if(D){C._tabindex();A.on("focus"+v,function(){var E=C._current;if(!E||!E.is(":visible")){E=C._item("first")}C.current(E)}).on("focusout"+v,function(){if(C._current){C._current.removeClass(n)}}).on("keydown"+v,function(I){var O=I.keyCode,J=C.current(),K=g(I.target),M=!K.is(":button,textarea,a,a>.t-icon,input"),F=K.is(":text,:password"),L=s.preventDefault,H=A.find("."+z),G=l(),N;if(!M&&!F&&q.ESC!=O||F&&q.ESC!=O&&q.ENTER!=O){return}if(q.UP===O||q.LEFT===O){if(J){J=J.prev()}C.current(!J||!J[0]?C._item("last"):J);L(I)}else{if(q.DOWN===O||q.RIGHT===O){if(J){J=J.next()}C.current(!J||!J[0]?C._item("first"):J);L(I)}else{if(q.PAGEUP===O){C.current(null);C.dataSource.page(C.dataSource.page()-1);L(I)}else{if(q.PAGEDOWN===O){C.current(null);C.dataSource.page(C.dataSource.page()+1);L(I)}else{if(q.HOME===O){C.current(C._item("first"));L(I)}else{if(q.END===O){C.current(C._item("last"));L(I)}else{if(q.ENTER===O){if(H.length!==0&&(M||F)){N=C.items().index(H);if(G){G.blur()}C.save();var E=function(){C.element.trigger("focus");C.current(C.items().eq(N))};C.one("dataBound",E)}else{if(C.options.editTemplate!==""){C.edit(J)}}}else{if(q.ESC===O){H=A.find("."+z);if(H.length===0){return}N=C.items().index(H);C.cancel();C.element.trigger("focus");C.current(C.items().eq(N))}}}}}}}}});A.on("mousedown"+v+" touchstart"+v,w,u(B,C))}},clearSelection:function(){var A=this;A.selectable.clear();A.trigger(p)},select:function(A){var C=this,B=C.selectable;A=g(A);if(A.length){if(!B.options.multiple){B.clear();A=A.first()}B.value(A);return}return B.value()},_destroyEditable:function(){var A=this;if(A.editable){A.editable.destroy();delete A.editable}},_modelFromElement:function(B){var A=B.attr(s.attr("uid"));return this.dataSource.getByUid(A)},_closeEditable:function(){var E=this,B=E.editable,F,D,A,C=E.template;if(B){if(B.element.index()%2){C=E.altTemplate}E.angular("cleanup",function(){return{elements:[B.element]}});F=E._modelFromElement(B.element);E._destroyEditable();A=B.element.index();B.element.replaceWith(C(F));D=E.items().eq(A);D.attr(s.attr("uid"),F.uid);if(E._hasBindingTarget()){s.bind(D,F)}E.angular("compile",function(){return{elements:[D],data:[{dataItem:F}]}})}return true},edit:function(E){var D=this,F=D._modelFromElement(E),A,C=F.uid,B;D.cancel();E=D.items().filter("["+s.attr("uid")+"="+C+"]");B=E.index();E.replaceWith(D.editTemplate(F));A=D.items().eq(B).addClass(z).attr(s.attr("uid"),F.uid);D.editable=A.kendoEditable({model:F,clearContainer:false,errorTemplate:false,target:D}).data("kendoEditable");D.trigger(y,{model:F,item:A})},save:function(){var D=this,C=D.editable,B;if(!C){return}var A=C.element;B=D._modelFromElement(A);if(C.end()&&!D.trigger(c,{model:B,item:A})){D._closeEditable();D.dataSource.sync()}},remove:function(B){var A=this,D=A.dataSource,C=A._modelFromElement(B);if(A.editable){D.cancelChanges(A._modelFromElement(A.editable.element));A._closeEditable()}if(!A.trigger(o,{model:C,item:B})){B.hide();D.remove(C);D.sync()}},add:function(){var C=this,B,D=C.dataSource,A=D.indexOf((D.view()||[])[0]);if(A<0){A=0}C.cancel();B=D.insert(A,{});C.edit(C.element.find("[data-uid='"+B.uid+"']"))},cancel:function(){var C=this,D=C.dataSource;if(C.editable){var A=C.editable.element;var B=C._modelFromElement(A);if(!C.trigger(e,{model:B,container:A})){D.cancelChanges(B);C._closeEditable()}}},_crudHandlers:function(){var A=this,B=h+v;A.element.on(B,".k-edit-button",function(D){var C=g(this).closest("["+s.attr("uid")+"]");A.edit(C);D.preventDefault()});A.element.on(B,".k-delete-button",function(D){var C=g(this).closest("["+s.attr("uid")+"]");A.remove(C);D.preventDefault()});A.element.on(B,".k-update-button",function(C){A.save();C.preventDefault()});A.element.on(B,".k-cancel-button",function(C){A.cancel();C.preventDefault()})},destroy:function(){var A=this;d.fn.destroy.call(A);A._unbindDataSource();A._destroyEditable();A.element.off(v);if(A.pager){A.pager.destroy()}s.destroy(A.element)}});s.ui.plugin(b)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.upload",["kendo.core"],a)}(function(){var a={id:"upload",name:"Upload",category:"web",description:"The Upload widget uses progressive enhancement to deliver the best possible uploading experience to users.",depends:["core"]};(function(y,i){var z=window.kendo,f=z.ui.Widget,c=z.antiForgeryTokens,Q=z.logToConsole,F=/\.([^\.]+)$/,D=".kendoUpload",s="select",d="upload",j="success",A="error",p="complete",G="cancel",I="clear",u="progress",e="remove",W="validationErrors",h="invalidMaxFileSize",x="invalidMinFileSize",H="invalidFileExtension",b=1000,r=2000;var n={loading:"k-i-loading",warning:"k-i-warning",success:"k-i-check"};var V=f.extend({init:function(Y,X){var aa=this;f.fn.init.call(aa,Y,X);aa.name=Y.name;aa.multiple=aa.options.multiple;aa.localization=aa.options.localization;var ac=aa.element;aa.wrapper=ac.closest(".k-upload");if(aa.wrapper.length===0){aa.wrapper=aa._wrapInput(ac)}aa._activeInput(ac);aa.toggle(aa.options.enabled);var Z=aa._ns=D+"-"+z.guid();ac.closest("form").on("submit"+Z,y.proxy(aa._onParentFormSubmit,aa)).on("reset"+Z,y.proxy(aa._onParentFormReset,aa));if(aa.options.async.saveUrl){aa._module=aa._supportsFormData()?new C(aa):new q(aa);aa._async=true;var ab=aa.options.files;if(ab.length>0){aa._renderInitialFiles(ab)}}else{aa._module=new S(aa)}if(aa._supportsDrop()){if(aa.options.dropZone!==""){aa._setupCustomDropZone()}else{aa._setupDropZone()}}aa.wrapper.on("click",".k-upload-action",y.proxy(aa._onFileAction,aa)).on("click",".k-clear-selected",y.proxy(aa._onClearSelected,aa)).on("click",".k-upload-selected",y.proxy(aa._onUploadSelected,aa));if(aa.element.val()){aa._onInputChange({target:aa.element})}},events:[s,d,j,A,p,G,I,u,e],options:{name:"Upload",enabled:true,multiple:true,showFileList:true,template:"",files:[],async:{removeVerb:"POST",autoUpload:true,withCredentials:true,accept:"*/*; q=0.5, application/json"},localization:{select:"Select files...",cancel:"Cancel",retry:"Retry",remove:"Remove",clearSelectedFiles:"Clear",uploadSelectedFiles:"Upload",dropFilesHere:"drop files here to upload",statusUploading:"uploading",statusUploaded:"uploaded",statusWarning:"warning",statusFailed:"failed",headerStatusUploading:"Uploading...",headerStatusUploaded:"Done",invalidMaxFileSize:"File size too large.",invalidMinFileSize:"File size too small.",invalidFileExtension:"File type not allowed."},validation:{allowedExtensions:[],maxFileSize:0,minFileSize:0},dropZone:""},setOptions:function(X){var Y=this,Z=Y.element;f.fn.setOptions.call(Y,X);Y.multiple=Y.options.multiple;Z.attr("multiple",Y._supportsMultiple()?Y.multiple:false);Y.toggle(Y.options.enabled)},enable:function(X){X=typeof X==="undefined"?true:X;this.toggle(X)},disable:function(){this.toggle(false)},toggle:function(X){X=typeof X==="undefined"?X:!X;this.wrapper.toggleClass("k-state-disabled",X);this.element.prop("disabled",X)},focus:function(){this.element.focus()},destroy:function(){var X=this;var Y=y(X.options.dropZone);y(document).add(y(".k-dropzone",X.wrapper)).add(X.wrapper.closest("form")).off(X._ns);if(Y.length>0){Y.off(X._ns)}y(X.element).off(D);f.fn.destroy.call(X)},upload:function(){var X=this;X._module.onSaveSelected()},getFiles:function(){var Z=this;var ac;var ab=[];var aa=Z.wrapper.find(".k-file");for(var Y=0;Y<aa.length;Y++){ac=y(aa[Y]).data("fileNames");if(ac){for(var X=0;X<ac.length;X++){ab.push(ac[X])}}}return ab},clearAllFiles:function(){var Y=this;var X=Y.wrapper.find(".k-file");X.each(function(Z,aa){Y._removeFileByDomElement(aa,false)})},removeAllFiles:function(){var Y=this;var X=Y.wrapper.find(".k-file");X.each(function(Z,aa){Y._removeFileByDomElement(aa,true)})},removeFileByUid:function(X){this._removeFileByUid(X,true)},clearFileByUid:function(X){this._removeFileByUid(X,false)},_removeFileByUid:function(Y,X){var Z=this;var aa;if(typeof Y!=="string"){return}aa=y(".k-file["+z.attr("uid")+'="'+Y+'"]',Z.wrapper);if(aa.length>0){Z._removeFileByDomElement(aa,X)}},clearFile:function(X){this._removeFile(X,false)},removeFile:function(X){this._removeFile(X,true)},_removeFile:function(ab,Y){var aa=this;var Z=aa.wrapper.find(".k-file");var X;if(typeof ab==="function"){Z.each(function(ac,ad){X=y(ad).data("fileNames");if(ab(X)){aa._removeFileByDomElement(ad,Y)}})}},_removeFileByDomElement:function(ab,Y){var Z=this;var X={target:y(ab,Z.wrapper)};var aa;if(Z.options.async.saveUrl){if(y(ab).hasClass("k-file-progress")){Z._module.onCancel(X)}else{Z._module.onRemove(X,{},Y)}aa=y(".k-file",Z.wrapper);if(aa.length===0){Z._hideHeaderUploadstatus()}else{Z._updateHeaderUploadStatus()}}else{Z._module.onRemove(X,{},Y)}},_addInput:function(Z){if(!Z[0].nodeType){return}var Y=this,X=Z.clone().val("");X.insertAfter(Y.element).data("kendoUpload",Y);y(Y.element).hide().attr("tabindex","-1").removeAttr("id").off(D);Y._activeInput(X);Y.element.focus()},_activeInput:function(X){var Y=this,Z=Y.wrapper;Y.element=X;X.attr("multiple",Y._supportsMultiple()?Y.multiple:false).attr("autocomplete","off").on("click"+D,function(aa){if(Z.hasClass("k-state-disabled")){aa.preventDefault()}}).on("focus"+D,function(){y(this).parent().addClass("k-state-focused")}).on("blur"+D,function(){y(this).parent().removeClass("k-state-focused")}).on("change"+D,y.proxy(Y._onInputChange,Y)).on("keydown"+D,y.proxy(Y._onInputKeyDown,Y))},_onInputKeyDown:function(Z){var X=this;var Y=X.wrapper.find(".k-upload-action:visible:first");if(Z.keyCode===z.keys.TAB&&Y.length>0){Z.preventDefault();Y.focus()}},_onInputChange:function(ab){var Z=this;var X=y(ab.target);var Y=U(Z._inputFiles(X),Z._isAsyncNonBatch());J(Y,Z.options.validation);var aa=Z.trigger(s,{files:Y});if(aa){Z._addInput(X);X.remove()}else{Z._module.onSelect({target:X},Y)}},_onDrop:function(ac){var aa=ac.originalEvent.dataTransfer;var Z=this;var Y=aa.files;var X=U(N(Y),Z._isAsyncNonBatch());O(ac);if(Y.length>0&&!Z.wrapper.hasClass("k-state-disabled")){if(!Z.multiple&&X.length>1){X.splice(1,X.length-1)}J(X,Z.options.validation);var ab=Z.trigger(s,{files:X});if(!ab){Z._module.onSelect({target:y(".k-dropzone",Z.wrapper)},X)}}},_filesContainValidationErrors:function(Y){var X=false;y(Y).each(function(Z,aa){if(aa[W]&&aa[W].length>0){X=true;return false}});return X},_isAsyncNonBatch:function(){return this._async&&!this.options.async.batch||false},_renderInitialFiles:function(aa){var Z=this;var X=0;aa=U(aa,true);for(X=0;X<aa.length;X++){var Y=aa[X];var ab=Z._enqueueFile(Y.name,{fileNames:[Y]});ab.addClass("k-file-success").data("files",[aa[X]]);if(!Z.options.template){y(".k-upload-status",ab).prepend("<span class='k-upload-pct'>100%</span>")}if(Z._supportsRemove()){Z._fileAction(ab,e)}}},_prepareTemplateData:function(Z,ab){var ac=ab.fileNames,aa={},Y=0,X=0;for(X=0;X<ac.length;X++){Y+=ac[X].size}aa.name=Z;aa.size=Y;aa.files=ab.fileNames;return aa},_prepareDefaultSingleFileEntryTemplate:function(ab){var aa=this;var Y=ab.fileNames[0];var X=B(ab.fileNames);var ac=Y[W];var Z="";if(ac&&ac.length>0){Z+="<li class='k-file k-file-invalid'><span class='k-progress'></span><span class='k-file-invalid-extension-wrapper'><span class='k-file-invalid-icon'>!</span><span class='k-file-state'></span></span><span class='k-file-name-size-wrapper'><span class='k-file-name k-file-name-invalid' title='"+Y.name+"'>"+Y.name+"</span><span class='k-file-validation-message'>"+aa.localization[ac[0]]+"</span></span>"}else{Z+="<li class='k-file'><span class='k-progress'></span><span class='k-file-extension-wrapper'><span class='k-file-extension'>"+Y.extension.substring(1)+"</span><span class='k-file-state'></span></span><span class='k-file-name-size-wrapper'><span class='k-file-name' title='"+Y.name+"'>"+Y.name+"</span><span class='k-file-size'>"+X+"</span></span>"}Z+="<strong class='k-upload-status'></strong>";return y(Z)},_prepareDefaultMultipleFileEntriesTemplate:function(ae){var ad=this;var ac=ae.fileNames;var ab=ad._filesContainValidationErrors(ac);var Y=B(ac);var aa="";var Z,X;if(ab){aa+="<li class='k-file k-file-invalid'><span class='k-progress'></span><span class='k-multiple-files-invalid-extension-wrapper'><span class='k-file-invalid-icon'>!</span>"}else{aa+="<li class='k-file'><span class='k-progress'></span><span class='k-multiple-files-extension-wrapper'>"}aa+="<span class='k-file-state'></span></span>";ac.sort(function(ag,af){if(ag[W]){return -1}if(af[W]){return 1}return 0});aa+="<span class='k-file-name-size-wrapper'>";for(Z=0;Z<ac.length;Z++){X=ac[Z];if(X[W]&&X[W].length>0){aa+="<span class='k-file-name k-file-name-invalid' title='"+X.name+"'>"+X.name+"</span>"}else{aa+="<span class='k-file-name' title='"+X.name+"'>"+X.name+"</span>"}}if(ab){aa+="<span class='k-file-validation-message'>Invalid file(s). Please check file upload requirements.</span>"}else{aa+="<span class='k-file-information'>Total: "+ac.length+" files, "+Y+"</span>"}aa+="</span><strong class='k-upload-status'></strong>";return y(aa)},_enqueueFile:function(X,ab){var ad=this;var Z;var ac;var aa=ab.fileNames[0].uid;var ag=y(".k-upload-files",ad.wrapper);var ah=ad.options;var af=ah.template;var Y;var ae;if(ag.length===0){ag=y("<ul class='k-upload-files k-reset'></ul>").appendTo(ad.wrapper);if(!ad.options.showFileList){ag.hide()}ad.wrapper.removeClass("k-upload-empty")}Z=y(".k-file",ag);if(!af){if(ab.fileNames.length===1){ac=ad._prepareDefaultSingleFileEntryTemplate(ab)}else{ac=ad._prepareDefaultMultipleFileEntriesTemplate(ab)}}else{Y=ad._prepareTemplateData(X,ab);af=z.template(af);ac=y("<li class='k-file'>"+af(Y)+"</li>");ac.find(".k-upload-action").addClass("k-button");ad.angular("compile",function(){return{elements:ac,data:[Y]}})}ac.attr(z.attr("uid"),aa).appendTo(ag).data(ab);if(!ad._async){y(".k-progress",ac).width("100%")}if(!ad.multiple&&Z.length>0){ae={files:Z.data("fileNames"),headers:{}};if(!ad.trigger(e,ae)){ad._module.onRemove({target:y(Z,ad.wrapper)},ae)}}return ac},_removeFileEntry:function(ac){var aa=this;var X=ac.closest(".k-upload-files");var ab,Y,Z;ac.remove();ab=y(".k-file",X);Y=y(".k-file-success, .k-file-error",X);Z=y(".k-file-invalid",X);if(Y.length===ab.length||Z.length===ab.length){this._hideUploadButton()}if(ab.length===0){X.remove();aa.wrapper.addClass("k-upload-empty");aa._hideHeaderUploadstatus()}else{aa._updateHeaderUploadStatus()}},_fileAction:function(aa,Z){var Y={remove:"k-i-x",cancel:"k-i-cancel",retry:"k-i-retry"};var X={remove:"k-i-close",cancel:"k-i-close",retry:"k-i-reload"};if(!Y.hasOwnProperty(Z)){return}this._clearFileAction(aa);if(!this.options.template){aa.find(".k-upload-status .k-upload-action").remove();aa.find(".k-upload-status").append(this._renderAction(Y[Z],this.localization[Z],X[Z]))}else{aa.find(".k-upload-action").addClass("k-button").append("<span class='k-icon "+X[Z]+" "+Y[Z]+"' title='"+this.localization[Z]+"'aria-label='"+this.localization[Z]+"'></span>").show()}},_fileState:function(ab,aa){var Z=this.localization,X={uploading:{text:Z.statusUploading},uploaded:{text:Z.statusUploaded},failed:{text:Z.statusFailed}},Y=X[aa];if(Y){y("span.k-file-state",ab).text(Y.text)}},_renderAction:function(Z,Y,X){if(Z!==""){return y("<button type='button' class='k-button k-upload-action'><span class='k-icon "+X+" "+Z+"' title='"+Y+"' aria-label='"+Y+"'></span></button>").on("focus",function(){y(this).addClass("k-state-focused")}).on("blur",function(){y(this).removeClass("k-state-focused")})}else{return y("<button type='button' class='k-button'>"+Y+"</button>")}},_clearFileAction:function(X){y(".k-upload-action",X).empty().hide()},_onFileAction:function(ad){var ab=this;if(!ab.wrapper.hasClass("k-state-disabled")){var Y=y(ad.target).closest(".k-upload-action");var Z=Y.find(".k-icon");var ae=Y.closest(".k-file");var aa=ae.data("fileNames");var ac=ab._filesContainValidationErrors(aa);var X={files:aa,headers:{}};if(Z.hasClass("k-i-x")){if(!ab.trigger(e,X)){ab._module.onRemove({target:y(ae,ab.wrapper)},X,!ac)}}else{if(Z.hasClass("k-i-cancel")){ab.trigger(G,X);ab._module.onCancel({target:y(ae,ab.wrapper)});ab._checkAllComplete();ab._updateHeaderUploadStatus()}else{if(Z.hasClass("k-i-retry")){y(".k-i-warning",ae).remove();y(".k-progress",ae).finish().show();ab._module.onRetry({target:y(ae,ab.wrapper)})}}}}return false},_onUploadSelected:function(){var X=this;var Y=X.wrapper;if(!Y.hasClass("k-state-disabled")){this._module.onSaveSelected()}return false},_onClearSelected:function(){var Y=this;var Z=Y.wrapper;var X={};if(!Z.hasClass("k-state-disabled")&&!Y.trigger(I,X)){Y.clearAllFiles()}return false},_onFileProgress:function(Y,X){var Z;if(X>100){X=100}if(!this.options.template){Z=y(".k-upload-pct",Y.target);if(Z.length===0){y(".k-upload-status",Y.target).prepend("<span class='k-upload-pct'></span>")}y(".k-upload-pct",Y.target).text(X+"%");y(".k-progress",Y.target).width(X+"%")}else{y(".k-progress",Y.target).width(X+"%")}this.trigger(u,{files:t(Y).data("fileNames"),percentComplete:X})},_onUploadSuccess:function(aa,X,ab){var Y=this;var ac=t(aa);var Z=Y.trigger(j,{files:ac.data("fileNames"),response:X,operation:"upload",XMLHttpRequest:ab});if(Z){Y._setUploadErrorState(ac)}else{Y._fileState(ac,"uploaded");ac.removeClass("k-file-progress").addClass("k-file-success");Y._updateHeaderUploadStatus();if(Y._supportsRemove()){Y._fileAction(ac,e)}else{Y._clearFileAction(ac)}}Y._hideUploadProgress(ac);Y._checkAllComplete()},_onUploadError:function(Y,Z){var X=this;var aa=t(Y);X._setUploadErrorState(aa);X.trigger(A,{operation:"upload",files:aa.data("fileNames"),XMLHttpRequest:Z});Q("Server response: "+Z.responseText);X._hideUploadProgress(aa);X._checkAllComplete()},_setUploadErrorState:function(Z){var Y=this;var X=y(".k-upload-pct",Z);Y._fileState(Z,"failed");Z.removeClass("k-file-progress").addClass("k-file-error");y(".k-progress",Z).width("100%");if(X.length>0){X.empty().removeClass("k-upload-pct").addClass("k-icon k-i-warning")}else{y(".k-upload-status",Z).prepend("<span class='k-icon k-i-warning'></span>")}this._updateHeaderUploadStatus();this._fileAction(Z,"retry")},_hideUploadProgress:function(X){y(".k-progress",X).delay(b).fadeOut(r,function(){y(this).css("width","0%")})},_showUploadButton:function(){var Y=this;var X=y(".k-upload-selected",Y.wrapper);var Z=y(".k-clear-selected",Y.wrapper);if(X.length===0){X=Y._renderAction("",this.localization.uploadSelectedFiles).addClass("k-upload-selected");Z=Y._renderAction("",this.localization.clearSelectedFiles).addClass("k-clear-selected")}this.wrapper.append(Z,X)},_hideUploadButton:function(){y(".k-upload-selected, .k-clear-selected",this.wrapper).remove()},_showHeaderUploadStatus:function(Y){var Z=this;var ab=Z.localization;var aa=y(".k-dropzone",Z.wrapper);var X=y(".k-upload-status-total",Z.wrapper);if(X.length!==0){X.remove()}X='<strong class="k-upload-status k-upload-status-total"><span class="k-icon"></span></strong>';if(Y){X=y(X).append(ab.headerStatusUploading);X.find(".k-icon").addClass(n.loading)}else{X=y(X).append(ab.headerStatusUploaded);X.find(".k-icon").addClass(n.warning)}if(aa.length>0){aa.append(X)}else{y(".k-upload-button",Z.wrapper).after(X)}},_updateHeaderUploadStatus:function(){var ab=this;var X=y(".k-upload-status-total",this.wrapper);var Z=y(".k-file",ab.wrapper).not(".k-file-success, .k-file-error, .k-file-invalid");var ac=y(".k-file-invalid",ab.wrapper);var aa,Y;if(Z.length===0||ac.length>0){aa=y(".k-file.k-file-error, .k-file.k-file-invalid",ab.wrapper);X=y(".k-upload-status-total",ab.wrapper);Y=y(".k-icon",X).removeClass().addClass("k-icon").addClass(aa.length!==0?n.warning:n.success);X.html(Y).append(ab.localization.headerStatusUploaded)}},_hideHeaderUploadstatus:function(){y(".k-upload-status-total",this.wrapper).remove()},_onParentFormSubmit:function(){var Y=this,Z=Y.element;if(typeof this._module.onAbort!=="undefined"){this._module.onAbort()}if(!Z.value){var X=y(Z);X.attr("disabled","disabled");window.setTimeout(function(){X.removeAttr("disabled")},0)}},_onParentFormReset:function(){y(".k-upload-files",this.wrapper).remove()},_supportsFormData:function(){return typeof FormData!="undefined"},_supportsMultiple:function(){var X=this._userAgent().indexOf("Windows")>-1;return !z.support.browser.opera&&!(z.support.browser.safari&&X)},_supportsDrop:function(){var Z=this._userAgent().toLowerCase();var aa=/chrome/.test(Z);var Y=!aa&&/safari/.test(Z);var X=Y&&/windows/.test(Z);return !X&&this._supportsFormData()&&this.options.async.saveUrl},_userAgent:function(){return navigator.userAgent},_setupDropZone:function(){var Y=this;y(".k-upload-button",Y.wrapper).wrap("<div class='k-dropzone'></div>");var X=Y._ns;var Z=y(".k-dropzone",Y.wrapper).append(y("<em>"+Y.localization.dropFilesHere+"</em>")).on("dragenter"+X,O).on("dragover"+X,function(aa){aa.preventDefault()}).on("drop"+X,y.proxy(Y._onDrop,Y));K(Z,X,function(){if(!Z.closest(".k-upload").hasClass("k-state-disabled")){Z.addClass("k-dropzone-hovered")}},function(){Z.removeClass("k-dropzone-hovered")});Y._bindDocumentDragEventWrappers(Z)},_setupCustomDropZone:function(){var Y=this;var Z=y(Y.options.dropZone);y(".k-upload-button",Y.wrapper).wrap("<div class='k-dropzone'></div>");var X=Y._ns;Z.on("dragenter"+X,O).on("dragover"+X,function(aa){aa.preventDefault()}).on("drop"+X,y.proxy(Y._onDrop,Y));K(Z,X,function(aa){if(!Y.wrapper.hasClass("k-state-disabled")){Z.removeClass("k-dropzone-hovered");y(aa.target).addClass("k-dropzone-hovered")}},function(){Z.removeClass("k-dropzone-hovered")});Y._bindDocumentDragEventWrappers(Z)},_bindDocumentDragEventWrappers:function(Z){var Y=this;var X=Y._ns;K(y(document),X,function(){if(!Y.wrapper.hasClass("k-state-disabled")){Z.addClass("k-dropzone-active");Z.closest(".k-upload").removeClass("k-upload-empty")}},function(){Z.removeClass("k-dropzone-active");if(y("li.k-file",Z.closest(".k-upload")).length===0){Z.closest(".k-upload").addClass("k-upload-empty")}})},_supportsRemove:function(){return !!this.options.async.removeUrl},_submitRemove:function(X,Y,ac,aa){var Z=this,ad=Z.options.async.removeField||"fileNames",ab=y.extend(Y.data,c());ab[ad]=X;jQuery.ajax({type:this.options.async.removeVerb,dataType:"json",dataFilter:L,url:this.options.async.removeUrl,traditional:true,data:ab,headers:Y.headers,success:ac,error:aa,xhrFields:{withCredentials:this.options.async.withCredentials}})},_wrapInput:function(X){var Z=this;var Y=Z.options;X.wrap("<div class='k-widget k-upload k-header'><div class='k-button k-upload-button' aria-label='"+this.localization.select+"'></div></div>");if(!Y.async.saveUrl){X.closest(".k-upload").addClass("k-upload-sync")}X.closest(".k-upload").addClass("k-upload-empty");X.closest(".k-button").append("<span>"+this.localization.select+"</span>");return X.closest(".k-upload")},_checkAllComplete:function(){if(y(".k-file.k-file-progress",this.wrapper).length===0){this.trigger(p)}},_inputFiles:function(X){return M(X)}});var S=function(X){this.name="syncUploadModule";this.element=X.wrapper;this.upload=X;this.element.closest("form").attr("enctype","multipart/form-data").attr("encoding","multipart/form-data")};S.prototype={onSelect:function(ac,aa){var Y=this.upload;var ad=y(ac.target);var ab=Y._filesContainValidationErrors(aa);Y._addInput(ad);var X={fileNames:aa};if(ab){ad.remove()}else{X.relatedInput=ad}var Z=Y._enqueueFile(o(ad),X);if(ab){Y._hideUploadProgress(Z)}Y._fileAction(Z,e)},onRemove:function(Y){var Z=t(Y);var X=Z.data("relatedInput");if(X){X.remove()}this.upload._removeFileEntry(Z)}};var q=function(X){this.name="iframeUploadModule";this.element=X.wrapper;this.upload=X;this.iframes=[]};V._frameId=0;q.prototype={onSelect:function(aa,Y){var X=this.upload;var ac=y(aa.target);var Z=X._filesContainValidationErrors(Y);var ab=this.prepareUpload(ac,Y,Z);if(X.options.async.autoUpload){if(!Z){this.performUpload(ab)}else{X._fileAction(ab,e);X._showHeaderUploadStatus(false)}}else{X._fileAction(ab,e);if(!Z){X._showUploadButton()}else{X._updateHeaderUploadStatus()}}if(Z){X._hideUploadProgress(ab)}},prepareUpload:function(af,X,ab){var ag=this.upload;var aa=y(ag.element);var Y=ag.options.async.saveField||af.attr("name");var ad,ae,ac,Z;ag._addInput(af);af.attr("name",Y);if(!ab){ac=this.createFrame(ag.name+"_"+V._frameId++);this.registerFrame(ac);Z=this.createForm(ag.options.async.saveUrl,ac.attr("name")).append(aa);ae={frame:ac,relatedInput:aa,fileNames:X}}else{af.remove();ae={fileNames:X}}ad=ag._enqueueFile(o(af),ae);if(ac){ac.data({form:Z,file:ad})}return ad},performUpload:function(ad){var ac={files:ad.data("fileNames")};var aa=ad.data("frame");var Y=this.upload;if(!Y.trigger(d,ac)){Y._hideUploadButton();Y._showHeaderUploadStatus(true);aa.appendTo(document.body);var ab=aa.data("form").attr("action",Y.options.async.saveUrl).appendTo(document.body);ac.data=y.extend({},ac.data,c());for(var Z in ac.data){var X=ab.find("input[name='"+Z+"']");if(X.length===0){X=y("<input>",{type:"hidden",name:Z}).prependTo(ab)}X.val(ac.data[Z])}Y._fileAction(ad,G);Y._fileState(ad,"uploading");y(ad).removeClass("k-file-error").addClass("k-file-progress");aa.one("load",y.proxy(this.onIframeLoad,this));ab[0].submit()}else{Y._removeFileEntry(aa.data("file"));this.cleanupFrame(aa);this.unregisterFrame(aa)}},onSaveSelected:function(){var Y=this;var X=Y.upload;y(".k-file",this.element).each(function(){var ab=y(this);var Z=R(ab);var aa=X._filesContainValidationErrors(ab.data("fileNames"));if(!Z&&!aa){Y.performUpload(ab)}})},onIframeLoad:function(aa){var Y=y(aa.target),Z;try{Z=Y.contents().text()}catch(X){Z="Error trying to get server response: "+X}this.processResponse(Y,Z)},processResponse:function(Y,Z){var ab=Y.data("file"),X=this,aa={responseText:Z};g(Z,function(ac){y.extend(aa,{statusText:"OK",status:"200"});X.upload._onFileProgress({target:y(ab,X.upload.wrapper)},100);X.upload._onUploadSuccess({target:y(ab,X.upload.wrapper)},ac,aa);X.cleanupFrame(Y);X.unregisterFrame(Y)},function(){y.extend(aa,{statusText:"error",status:"500"});X.upload._onUploadError({target:y(ab,X.upload.wrapper)},aa)})},onCancel:function(Y){var X=y(Y.target).data("frame");this.stopFrameSubmit(X);this.cleanupFrame(X);this.unregisterFrame(X);this.upload._removeFileEntry(X.data("file"))},onRetry:function(X){var Y=t(X);this.performUpload(Y)},onRemove:function(ac,X,aa){var Z=this;var Y=Z.upload;var ad=t(ac);var ab=ad.data("frame");if(ab){Z.unregisterFrame(ab);Y._removeFileEntry(ad);Z.cleanupFrame(ab)}else{if(ad.hasClass("k-file-success")){l(ad,Y,X,aa)}else{Y._removeFileEntry(ad)}}},onAbort:function(){var Y=this.element,X=this;y.each(this.iframes,function(){y("input",this.data("form")).appendTo(Y);X.stopFrameSubmit(this[0]);this.data("form").remove();this.remove()});this.iframes=[]},createFrame:function(X){return y("<iframe name='"+X+"' id='"+X+"' style='display:none;' />")},createForm:function(X,Y){return y("<form enctype='multipart/form-data' method='POST' action='"+X+"' target='"+Y+"'/>")},stopFrameSubmit:function(X){if(typeof X.stop!="undefined"){X.stop()}else{if(X.document){X.document.execCommand("Stop")}}},registerFrame:function(X){this.iframes.push(X)},unregisterFrame:function(X){this.iframes=y.grep(this.iframes,function(Y){return Y.attr("name")!=X.attr("name")})},cleanupFrame:function(Y){var X=Y.data("form");Y.data("file").data("frame",null);setTimeout(function(){X.remove();Y.remove()},1)}};var C=function(X){this.name="formDataUploadModule";this.element=X.wrapper;this.upload=X};C.prototype={onSelect:function(ad,ab){var Z=this.upload;var aa=this;var Y=y(ad.target);var X=this.prepareUpload(Y,ab);var ac;y.each(X,function(){ac=Z._filesContainValidationErrors(y(this.data("fileNames")));if(Z.options.async.autoUpload){if(!ac){aa.performUpload(this)}else{Z._fileAction(this,e);Z._showHeaderUploadStatus(false)}}else{Z._fileAction(this,e);if(!ac){Z._showUploadButton()}else{Z._updateHeaderUploadStatus()}}if(ac){Z._hideUploadProgress(this)}})},prepareUpload:function(Y,Z){var X=this.enqueueFiles(Z);if(Y.is("input")){y.each(X,function(){y(this).data("relatedInput",Y)});Y.data("relatedFileEntries",X);this.upload._addInput(Y)}return X},enqueueFiles:function(ad){var aa=this.upload;var Z;var ac;var ab=ad.length;var X;var ae;var Y=[];if(aa.options.async.batch===true){Z=y.map(ad,function(af){return af.name}).join(", ");ae=aa._enqueueFile(Z,{fileNames:ad});ae.data("files",ad);Y.push(ae)}else{for(ac=0;ac<ab;ac++){X=ad[ac];Z=X.name;ae=aa._enqueueFile(Z,{fileNames:[X]});ae.data("files",[X]);Y.push(ae)}}return Y},performUpload:function(ac){var X=this.upload,aa=this.createFormData(),ab=this.createXHR(),Z={files:ac.data("fileNames"),XMLHttpRequest:ab};if(!X.trigger(d,Z)){X._fileAction(ac,G);X._hideUploadButton();X._showHeaderUploadStatus(true);if(Z.formData){aa=Z.formData}else{Z.data=y.extend({},Z.data,c());for(var Y in Z.data){aa.append(Y,Z.data[Y])}this.populateFormData(aa,ac.data("files"))}X._fileState(ac,"uploading");y(ac).removeClass("k-file-error").addClass("k-file-progress");this.postFormData(X.options.async.saveUrl,aa,ac,ab)}else{this.removeFileEntry(ac)}},onSaveSelected:function(){var Y=this;var X=Y.upload;y(".k-file",this.element).each(function(){var ab=y(this);var Z=R(ab);var aa=X._filesContainValidationErrors(ab.data("fileNames"));if(!Z&&!aa){Y.performUpload(ab)}})},onCancel:function(X){var Y=t(X);this.stopUploadRequest(Y);this.removeFileEntry(Y)},onRetry:function(X){var Y=t(X);this.performUpload(Y)},onRemove:function(ab,X,aa){var Z=this;var Y=Z.upload;var ac=t(ab);if(ac.hasClass("k-file-success")){l(ac,Y,X,aa)}else{Z.removeFileEntry(ac)}},createXHR:function(){return new XMLHttpRequest()},postFormData:function(X,aa,ac,ab){var Z=this;ac.data("request",ab);ab.addEventListener("load",function(ad){Z.onRequestSuccess.call(Z,ad,ac)},false);ab.addEventListener(A,function(ad){Z.onRequestError.call(Z,ad,ac)},false);ab.upload.addEventListener("progress",function(ad){Z.onRequestProgress.call(Z,ad,ac)},false);ab.open("POST",X,true);ab.withCredentials=this.upload.options.async.withCredentials;var Y=this.upload.options.async.accept;if(Y){ab.setRequestHeader("Accept",Y)}ab.send(aa)},createFormData:function(){return new FormData()},populateFormData:function(ab,aa){var X=this.upload,Y,Z=aa.length;for(Y=0;Y<Z;Y++){ab.append(X.options.async.saveField||X.name,aa[Y].rawFile)}return ab},onRequestSuccess:function(Z,ab){var aa=Z.target,Y=this;function X(){Y.upload._onUploadError({target:y(ab,Y.upload.wrapper)},aa)}if(aa.status>=200&&aa.status<=299){g(aa.responseText,function(ac){Y.upload._onFileProgress({target:y(ab,Y.upload.wrapper)},100);Y.upload._onUploadSuccess({target:y(ab,Y.upload.wrapper)},ac,aa);Y.cleanupFileEntry(ab)},X)}else{X()}},onRequestError:function(X,Z){var Y=X.target;this.upload._onUploadError({target:y(Z,this.upload.wrapper)},Y)},cleanupFileEntry:function(Z){var X=Z.data("relatedInput"),Y=true;if(X){y.each(X.data("relatedFileEntries")||[],function(){if(this.parent().length>0&&this[0]!=Z[0]){Y=Y&&this.hasClass("k-file-success")}});if(Y){X.remove()}}},removeFileEntry:function(X){this.cleanupFileEntry(X);this.upload._removeFileEntry(X)},onRequestProgress:function(Y,Z){var X=Math.round(Y.loaded*100/Y.total);this.upload._onFileProgress({target:y(Z,this.upload.wrapper)},X)},stopUploadRequest:function(X){X.data("request").abort()}};function o(X){return y.map(M(X),function(Y){return Y.name}).join(", ")}function M(Y){var X=Y[0];if(X.files){return N(X.files)}else{return[{name:v(X.value),extension:P(X.value),size:null}]}}function N(X){return y.map(X,function(Y){return T(Y)})}function T(X){var Y=X.name||X.fileName;return{name:z.htmlEncode(Y),extension:P(Y),size:typeof X.size=="number"?X.size:X.fileSize,rawFile:X}}function P(Y){var X=Y.match(F);return X?X[0]:""}function v(X){var Y=X.lastIndexOf("\\");return Y!=-1?X.substr(Y+1):X}function U(Y,Z){var X=z.guid();return y.map(Y,function(aa){aa.uid=Z?z.guid():X;return aa})}function J(ab,aa){var X=k(aa.allowedExtensions);var ac=aa.maxFileSize;var Y=aa.minFileSize;for(var Z=0;Z<ab.length;Z++){E(ab[Z],X);m(ab[Z],Y,ac)}}function k(Y){var X=y.map(Y,function(Z){var aa=Z.substring(0,1)==="."?Z:"."+Z;return aa.toLowerCase()});return X}function E(Y,X){if(X.length>0){if(y.inArray(Y.extension.toLowerCase(),X)<0){Y.validationErrors=Y.validationErrors||[];if(y.inArray(H,Y.validationErrors)===-1){Y.validationErrors.push(H)}}}}function m(Y,X,Z){if(X!==0&&(Y.size<X&&Y.size!=null)){Y.validationErrors=Y.validationErrors||[];if(y.inArray(x,Y.validationErrors)===-1){Y.validationErrors.push(x)}}if(Z!==0&&Y.size>Z){Y.validationErrors=Y.validationErrors||[];if(y.inArray(h,Y.validationErrors)===-1){Y.validationErrors.push(h)}}}function B(Z){var X=0;if(typeof Z[0].size=="number"){for(var Y=0;Y<Z.length;Y++){if(Z[Y].size){X+=Z[Y].size}}}else{return""}X/=1024;if(X<1024){return X.toFixed(2)+" KB"}else{return(X/1024).toFixed(2)+" MB"}}function w(X){return !X.multiple&&y(".k-file",X.wrapper).length>1}function l(ae,Z,Y,aa){if(!Z._supportsRemove()){if(w(Z)||!aa){Z._removeFileEntry(ae)}return}var ac=ae.data("fileNames");var X=y.map(ac,function(af){return af.name});if(aa===false){Z._removeFileEntry(ae);return}Z._submitRemove(X,Y,function ad(ag,ai,ah){var af=Z.trigger(j,{operation:"remove",files:ac,response:ag,XMLHttpRequest:ah});if(!af){Z._removeFileEntry(ae)}},function ab(af){if(w(Z)){Z._removeFileEntry(ae)}Z.trigger(A,{operation:"remove",files:ac,XMLHttpRequest:af});Q("Server response: "+af.responseText)})}function g(X,ac,Z){var ab=false,Y="";try{Y=y.parseJSON(L(X));ab=true}catch(aa){Z()}if(ab){ac(Y)}}function L(X){if(typeof X==="undefined"||X===""){X="{}"}return X}function O(X){X.stopPropagation();X.preventDefault()}function K(Z,ab,ac,Y){var X,aa;Z.on("dragenter"+ab,function(ad){ac(ad);aa=new Date();if(!X){X=setInterval(function(){var ae=new Date()-aa;if(ae>100){Y();clearInterval(X);X=null}},100)}}).on("dragover"+ab,function(){aa=new Date()})}function R(X){return X.is(".k-file-progress, .k-file-success, .k-file-error")}function t(X){return y(X.target).closest(".k-file")}z.ui.plugin(V)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.filebrowser",["kendo.listview","kendo.dropdownlist","kendo.upload"],a)}(function(){var a={id:"filebrowser",name:"FileBrowser",category:"web",description:"",hidden:true,depends:["selectable","listview","dropdownlist","upload"]};(function(h,l){var v=window.kendo,d=v.ui.Widget,u=h.isPlainObject,z=h.proxy,E=h.extend,y=v.support.placeholder,F=v.support.browser,b=v.isFunction,x=/(^\/|\/$)/g,t="change",j="apply",m="error",i="click",A=".kendoFileBrowser",g=".kendoBreadcrumbs",q=".kendoSearchBox",r="name",s="size",c="type",C={field:c,dir:"asc"},n=v.template('<li class="k-tile-empty"><strong>${text}</strong></li>'),G='<div class="k-widget k-filebrowser-toolbar k-header k-floatwrap"><div class="k-toolbar-wrap"># if (showUpload) { # <div class="k-widget k-upload"><div class="k-button k-button-icontext k-upload-button"><span class="k-icon k-i-plus"></span>#=messages.uploadFile#<input type="file" name="file" /></div></div># } ## if (showCreate) { #<button type="button" class="k-button k-button-icon"><span class="k-icon k-i-folder-add" /></button># } ## if (showDelete) { #<button type="button" class="k-button k-button-icon k-state-disabled"><span class="k-icon k-i-close" /></button>&nbsp;# } #</div><div class="k-tiles-arrange"><label>#=messages.orderBy#: <select /></label></div></div>';E(true,v.data,{schemas:{filebrowser:{data:function(H){return H.items||H||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}});E(true,v.data,{transports:{filebrowser:v.data.RemoteTransport.extend({init:function(H){v.data.RemoteTransport.fn.init.call(this,h.extend(true,{},this.options,H))},_call:function(I,H){H.data=h.extend({},H.data,{path:this.options.path()});if(b(this.options[I])){this.options[I].call(this,H)}else{v.data.RemoteTransport.fn[I].call(this,H)}},read:function(H){this._call("read",H)},create:function(H){this._call("create",H)},destroy:function(H){this._call("destroy",H)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}});function w(J,L,I){var H,K;J.on("dragenter"+A,function(){L();K=new Date();if(!H){H=setInterval(function(){var M=new Date()-K;if(M>100){I();clearInterval(H);H=null}},100)}}).on("dragover"+A,function(){K=new Date()})}var B;if(F.msie&&F.version<8){B=function(H){return H.offsetTop}}else{B=function(H){return H.offsetTop-h(H).height()}}function k(I,H){if(I===l||!I.match(/\/$/)){I=(I||"")+"/"}return I+H}function o(H){if(!H){return""}var I=" bytes";if(H>=1073741824){I=" GB";H/=1073741824}else{if(H>=1048576){I=" MB";H/=1048576}else{if(H>=1024){I=" KB";H/=1024}}}return Math.round(H*100)/100+I}function e(H,I){var J=H[I];if(u(J)){return J.from||J.field||I}return J}var f=d.extend({init:function(I,H){var J=this;H=H||{};d.fn.init.call(J,I,H);J.element.addClass("k-filebrowser");J.element.on(i+A,".k-filebrowser-toolbar button:not(.k-state-disabled):has(.k-i-close)",z(J._deleteClick,J)).on(i+A,".k-filebrowser-toolbar button:not(.k-state-disabled):has(.k-i-folder-add)",z(J._addClick,J)).on("keydown"+A,"li.k-state-selected input",z(J._directoryKeyDown,J)).on("blur"+A,"li.k-state-selected input",z(J._directoryBlur,J));J._dataSource();J.refresh();J.path(J.options.path)},options:{name:"FileBrowser",messages:{uploadFile:"Upload",orderBy:"Arrange by",orderByName:"Name",orderBySize:"Size",directoryNotFound:"A directory with this name was not found.",emptyFolder:"Empty Folder",deleteFile:'Are you sure you want to delete "{0}"?',invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',dropFilesHere:"drop file here to upload",search:"Search"},transport:{},path:"/",fileTypes:"*.*"},events:[m,t,j],destroy:function(){var H=this;d.fn.destroy.call(H);H.dataSource.unbind(m,H._errorHandler);H.element.add(H.list).add(H.toolbar).off(A);v.destroy(H.element)},value:function(){var J=this,I=J._selectedItem(),K,H=J.options.transport.fileUrl;if(I&&I.get(c)==="f"){K=k(J.path(),I.get(r)).replace(x,"");if(H){K=b(H)?H(K):v.format(H,encodeURIComponent(K))}return K}},_selectedItem:function(){var H=this.listView,I=H.select();if(I.length){return this.dataSource.getByUid(I.attr(v.attr("uid")))}},_toolbar:function(){var J=this,H=v.template(G),I=J.options.messages,K=[{text:I.orderByName,value:"name"},{text:I.orderBySize,value:"size"}];J.toolbar=h(H({messages:I,showUpload:J.options.transport.uploadUrl,showCreate:J.options.transport.create,showDelete:J.options.transport.destroy})).appendTo(J.element).find(".k-upload input").kendoUpload({multiple:false,localization:{dropFilesHere:I.dropFilesHere},async:{saveUrl:J.options.transport.uploadUrl,autoUpload:true},upload:z(J._fileUpload,J),error:function(L){J._error({xhr:L.XMLHttpRequest,status:"error"})}}).end();J.upload=J.toolbar.find(".k-upload input").data("kendoUpload");J.arrangeBy=J.toolbar.find(".k-tiles-arrange select").kendoDropDownList({dataSource:K,dataTextField:"text",dataValueField:"value",change:function(){J.orderBy(this.value())}}).data("kendoDropDownList");J._attachDropzoneEvents()},_attachDropzoneEvents:function(){var H=this;if(H.options.transport.uploadUrl){w(h(document.documentElement),h.proxy(H._dropEnter,H),h.proxy(H._dropLeave,H));H._scrollHandler=z(H._positionDropzone,H)}},_dropEnter:function(){this._positionDropzone();h(document).on("scroll"+A,this._scrollHandler)},_dropLeave:function(){this._removeDropzone();h(document).off("scroll"+A,this._scrollHandler)},_positionDropzone:function(){var I=this,H=I.element,J=H.offset();I.toolbar.find(".k-dropzone").addClass("k-filebrowser-dropzone").offset(J).css({width:H[0].clientWidth,height:H[0].clientHeight,lineHeight:H[0].clientHeight+"px"})},_removeDropzone:function(){this.toolbar.find(".k-dropzone").removeClass("k-filebrowser-dropzone").css({width:"",height:"",lineHeight:"",top:"",left:""})},_deleteClick:function(){var J=this,I=J.listView.select(),H=v.format(J.options.messages.deleteFile,I.find("strong").text());if(I.length&&J._showMessage(H,"confirm")){J.listView.remove(I)}},_addClick:function(){this.createDirectory()},_getFieldName:function(H){return e(this.dataSource.reader.model.fields,H)},_fileUpload:function(M){var L=this,P=L.options,H=P.fileTypes,O=new RegExp(("("+H.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),J=M.files[0].name,K=r,N=s,I;if(O.test(J)){M.data={path:L.path()};I=L._createFile(J);if(!I){M.preventDefault()}else{L.upload.one("success",function(R){var Q=L._insertFileToList(I);Q.set(K,R.response[L._getFieldName(K)]);Q.set(N,R.response[L._getFieldName(N)]);L._tiles=L.listView.items().filter("["+v.attr("type")+"=f]")})}}else{M.preventDefault();L._showMessage(v.format(P.messages.invalidFileType,J,H))}},_findFile:function(K){var M=this.dataSource.data(),I,H,N=c,J=r,L;K=K.toLowerCase();for(I=0,L=M.length;I<L;I++){if(M[I].get(N)==="f"&&M[I].get(J).toLowerCase()===K){H=M[I];break}}return H},_createFile:function(L){var J=this,H={},K=c,I=J._findFile(L);if(I){if(!J._showMessage(v.format(J.options.messages.overwriteFile,L),"confirm")){return null}else{I._override=true;return I}}H[K]="f";H[r]=L;H[s]=0;return H},_insertFileToList:function(J){var I;if(J._override){return J}var M=this.dataSource;var H=M.view();for(var K=0,L=H.length;K<L;K++){if(H[K].get(c)==="f"){I=K;break}}return M.insert(++I,J)},createDirectory:function(){var L=this,P,I,J=0,N=c,O=r,M=L.dataSource.data(),H=L._nameDirectory(),K=new L.dataSource.reader.model();for(P=0,I=M.length;P<I;P++){if(M[P].get(N)==="d"){J=P}}K.set(N,"d");K.set(O,H);L.listView.one("dataBound",function(){var R=L.listView.items().filter("["+v.attr("uid")+"="+K.uid+"]"),Q=R.find("input");if(R.length){this.edit(R)}this.element.scrollTop(R.attr("offsetTop")-this.element[0].offsetHeight);setTimeout(function(){Q.select()})}).one("save",function(R){var Q=R.model.get(O);if(!Q){R.model.set(O,H)}else{R.model.set(O,L._nameExists(Q,K.uid)?L._nameDirectory():Q)}});L.dataSource.insert(++J,K)},_directoryKeyDown:function(H){if(H.keyCode==13){H.currentTarget.blur()}},_directoryBlur:function(){this.listView.save()},_nameExists:function(J,K){var M=this.dataSource.data(),N=c,I=r,H,L;for(H=0,L=M.length;H<L;H++){if(M[H].get(N)==="d"&&M[H].get(I).toLowerCase()===J.toLowerCase()&&M[H].uid!==K){return true}}return false},_nameDirectory:function(){var K="New folder",N=this.dataSource.data(),J=[],O=c,I=r,L,H,M;for(H=0,M=N.length;H<M;H++){if(N[H].get(O)==="d"&&N[H].get(I).toLowerCase().indexOf(K.toLowerCase())>-1){J.push(N[H].get(I))}}if(h.inArray(K,J)>-1){H=2;do{L=K+" ("+H+")";H++}while(h.inArray(L,J)>-1);K=L}return K},orderBy:function(H){this.dataSource.sort([{field:c,dir:"asc"},{field:H,dir:"asc"}])},search:function(H){this.dataSource.filter({field:r,operator:"contains",value:H})},_content:function(){var H=this;H.list=h('<ul class="k-reset k-floats k-tiles" />').appendTo(H.element).on("dblclick"+A,"li",z(H._dblClick,H));H.listView=new v.ui.ListView(H.list,{dataSource:H.dataSource,template:H._itemTmpl(),editTemplate:H._editTmpl(),selectable:true,autoBind:false,dataBinding:function(I){H.toolbar.find(".k-i-close").parent().addClass("k-state-disabled");if(I.action==="remove"||I.action==="sync"){I.preventDefault()}},dataBound:function(){if(H.dataSource.view().length){H._tiles=this.items().filter("["+v.attr("type")+"=f]")}else{this.wrapper.append(n({text:H.options.messages.emptyFolder}))}},change:z(H._listViewChange,H)})},_dblClick:function(K){var J=this,H=h(K.currentTarget);if(H.hasClass("k-edit-item")){J._directoryBlur()}if(H.filter("["+v.attr("type")+"=d]").length){var I=J.dataSource.getByUid(H.attr(v.attr("uid")));if(I){J.path(k(J.path(),I.get(r)));J.breadcrumbs.value(J.path())}}else{if(H.filter("["+v.attr("type")+"=f]").length){J.trigger(j)}}},_listViewChange:function(){var H=this._selectedItem();if(H){this.toolbar.find(".k-i-close").parent().removeClass("k-state-disabled");this.trigger(t,{selected:H})}},_dataSource:function(){var K=this,I=K.options,N=I.transport,H=E({},C),L={field:r,dir:"asc"},J,M={type:N.type||"filebrowser",sort:[H,L]};if(u(N)){N.path=z(K.path,K);M.transport=N}if(u(I.schema)){M.schema=I.schema}else{if(N.type&&u(v.data.schemas[N.type])){J=v.data.schemas[N.type]}}if(K.dataSource&&K._errorHandler){K.dataSource.unbind(m,K._errorHandler)}else{K._errorHandler=z(K._error,K)}K.dataSource=v.data.DataSource.create(M).bind(m,K._errorHandler)},_navigation:function(){var I=this,H=h('<div class="k-floatwrap"><input/><input/></div>').appendTo(this.element);I.breadcrumbs=H.find("input:first").kendoBreadcrumbs({value:I.options.path,change:function(){I.path(this.value())}}).data("kendoBreadcrumbs");I.searchBox=H.parent().find("input:last").kendoSearchBox({label:I.options.messages.search,change:function(){I.search(this.value())}}).data("kendoSearchBox")},_error:function(J){var I=this,H;if(!I.trigger(m,J)){H=J.xhr.status;if(J.status=="error"){if(H=="404"){I._showMessage(I.options.messages.directoryNotFound)}else{if(H!="0"){I._showMessage("Error! The requested URL returned "+H+" - "+J.xhr.statusText)}}}else{if(H=="timeout"){I._showMessage("Error! Server timeout.")}}var K=I.dataSource;if(K.hasChanges()){K.cancelChanges()}}},_showMessage:function(I,H){return window[H||"alert"](I)},refresh:function(){var H=this;H._navigation();H._toolbar();H._content()},_editTmpl:function(){var H='<li class="k-tile k-state-selected" '+v.attr("uid")+'="#=uid#" ';H+=v.attr("type")+'="${'+c+'}">';H+="#if("+c+' == "d") { #';H+='<div class="k-thumb"><span class="k-icon k-i-folder"></span></div>';H+="#}else{#";H+='<div class="k-thumb"><span class="k-icon k-i-loading"></span></div>';H+="#}#";H+="#if("+c+' == "d") { #';H+='<input class="k-input" '+v.attr("bind")+'="value:'+r+'"/>';H+="#}#";H+="</li>";return z(v.template(H),{sizeFormatter:o})},_itemTmpl:function(){var H='<li class="k-tile" '+v.attr("uid")+'="#=uid#" ';H+=v.attr("type")+'="${'+c+'}">';H+="#if("+c+' == "d") { #';H+='<div class="k-thumb"><span class="k-icon k-i-folder"></span></div>';H+="#}else{#";H+='<div class="k-thumb"><span class="k-icon k-i-file"></span></div>';H+="#}#";H+="<strong>${"+r+"}</strong>";H+="#if("+c+' == "f") { # <span class="k-filesize">${this.sizeFormatter('+s+")}</span> #}#";H+="</li>";return z(v.template(H),{sizeFormatter:o})},path:function(I){var H=this,J=H._path||"";if(I!==l){H._path=I.replace(x,"")+"/";H.dataSource.read({path:H._path});return}if(J){J=J.replace(x,"")}return J==="/"||J===""?"":J+"/"}});var p=d.extend({init:function(I,H){var J=this;H=H||{};d.fn.init.call(J,I,H);if(y){J.element.attr("placeholder",J.options.label)}J._wrapper();J.element.on("keydown"+q,z(J._keydown,J)).on("change"+q,z(J._updateValue,J));J.wrapper.on(i+q,"a",z(J._click,J));if(!y){J.element.on("focus"+q,z(J._focus,J)).on("blur"+q,z(J._blur,J))}},options:{name:"SearchBox",label:"Search",value:""},events:[t],destroy:function(){var H=this;H.wrapper.add(H.element).add(H.label).off(q);d.fn.destroy.call(H)},_keydown:function(H){if(H.keyCode===13){this._updateValue()}},_click:function(H){H.preventDefault();this._updateValue()},_updateValue:function(){var H=this,I=H.element.val();if(I!==H.value()){H.value(I);H.trigger(t)}},_blur:function(){this._updateValue();this._toggleLabel()},_toggleLabel:function(){if(!y){this.label.toggle(!this.element.val())}},_focus:function(){this.label.hide()},_wrapper:function(){var H=this.element,I=H.parents(".k-search-wrap");H[0].style.width="";H.addClass("k-input");if(!I.length){I=H.wrap(h('<div class="k-widget k-search-wrap k-textbox"/>')).parent();if(!y){h('<label style="display:block">'+this.options.label+"</label>").insertBefore(H)}h('<a href="#" class="k-icon k-i-zoom k-search"/>').appendTo(I)}this.wrapper=I;this.label=I.find(">label")},value:function(I){var H=this;if(I!==l){H.options.value=I;H.element.val(I);H._toggleLabel();return}return H.options.value}});var D=d.extend({init:function(I,H){var J=this;H=H||{};d.fn.init.call(J,I,H);J._wrapper();J.wrapper.on("focus"+g,"input",z(J._focus,J)).on("blur"+g,"input",z(J._blur,J)).on("keydown"+g,"input",z(J._keydown,J)).on(i+g,"a.k-i-arrow-60-up:first",z(J._rootClick,J)).on(i+g,"a:not(.k-i-arrow-60-up)",z(J._click,J));J.value(J.options.value)},options:{name:"Breadcrumbs",gap:50},events:[t],destroy:function(){var H=this;d.fn.destroy.call(H);H.wrapper.add(H.wrapper.find("input")).add(H.wrapper.find("a")).off(g)},_update:function(H){H=(H||"").charAt(0)==="/"?H:"/"+(H||"");if(H!==this.value()){this.value(H);this.trigger(t)}},_click:function(H){H.preventDefault();this._update(this._path(h(H.target).prevAll("a:not(.k-i-arrow-60-up)").addBack()))},_rootClick:function(H){H.preventDefault();this._update("")},_focus:function(){var I=this,H=I.element;I.overlay.hide();I.element.val(I.value());setTimeout(function(){H.select()})},_blur:function(){if(this.overlay.is(":visible")){return}var I=this,H=I.element,J=H.val().replace(/\/{2,}/g,"/");I.overlay.show();H.val("");I._update(J)},_keydown:function(I){var H=this;if(I.keyCode===13){H._blur();setTimeout(function(){H.overlay.find("a:first").focus()})}},_wrapper:function(){var I=this.element,J=I.parents(".k-breadcrumbs"),H;I[0].style.width="";I.addClass("k-input");if(!J.length){J=I.wrap(h('<div class="k-widget k-breadcrumbs k-textbox"/>')).parent()}H=J.find(".k-breadcrumbs-wrap");if(!H.length){H=h('<div class="k-breadcrumbs-wrap"/>').appendTo(J)}this.wrapper=J;this.overlay=H},refresh:function(){var J="",M=this.value(),I,L,H,K;if(M===l||!M.match(/^\//)){M="/"+(M||"")}I=M.split("/");for(H=0,K=I.length;H<K;H++){L=I[H];if(L){if(!J){J+='<a href="#" class="k-icon k-i-arrow-60-up" title="Go to parent folder"></a>'}J+='<a class="k-link" href="#">'+I[H]+"</a>";J+='<span class="k-icon k-i-arrow-60-right" title="Go to child folder"></span>'}}this.overlay.empty().append(h(J));this._adjustSectionWidth()},_adjustSectionWidth:function(){var K=this,L=K.wrapper,J=L.width()-K.options.gap,I=K.overlay.find("a"),H;I.each(function(M){H=h(this);if(H.parent().width()>J){if(M==I.length-1){H.width(J)}else{H.prev().addBack().hide()}}})},value:function(H){if(H!==l){this._value=H.replace(/\/{2,}/g,"/");this.refresh();return}return this._value},_path:function(H){return"/"+h.map(H,function(I){return h(I).text()}).join("/")}});v.ui.plugin(f);v.ui.plugin(D);v.ui.plugin(p)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.imagebrowser",["kendo.filebrowser"],a)}(function(){var a={id:"imagebrowser",name:"ImageBrowser",category:"web",description:"",hidden:true,depends:["filebrowser"]};(function(e,g){var o=window.kendo,d=o.ui.FileBrowser,n=e.isPlainObject,q=e.proxy,u=e.extend,v=o.support.browser,b=o.isFunction,p=/(^\/|\/$)/g,i="error",r=".kendoImageBrowser",l="name",m="size",c="type",t={field:c,dir:"asc"},j=o.template('<li class="k-tile-empty"><strong>${text}</strong></li>');u(true,o.data,{schemas:{imagebrowser:{data:function(w){return w.items||w||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}});u(true,o.data,{transports:{imagebrowser:o.data.RemoteTransport.extend({init:function(w){o.data.RemoteTransport.fn.init.call(this,e.extend(true,{},this.options,w))},_call:function(x,w){w.data=e.extend({},w.data,{path:this.options.path()});if(b(this.options[x])){this.options[x].call(this,w)}else{o.data.RemoteTransport.fn[x].call(this,w)}},read:function(w){this._call("read",w)},create:function(w){this._call("create",w)},destroy:function(w){this._call("destroy",w)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}});var s;if(v.msie&&v.version<8){s=function(w){return w.offsetTop}}else{s=function(w){return w.offsetTop-e(w).height()}}function f(x,w){if(x===g||!x.match(/\/$/)){x=(x||"")+"/"}return x+w}function k(w){if(!w){return""}var x=" bytes";if(w>=1073741824){x=" GB";w/=1073741824}else{if(w>=1048576){x=" MB";w/=1048576}else{if(w>=1024){x=" KB";w/=1024}}}return Math.round(w*100)/100+x}var h=d.extend({init:function(x,w){var y=this;w=w||{};d.fn.init.call(y,x,w);y.element.addClass("k-imagebrowser")},options:{name:"ImageBrowser",fileTypes:"*.png,*.gif,*.jpg,*.jpeg"},value:function(){var y=this,x=y._selectedItem(),z,w=y.options.transport.imageUrl;if(x&&x.get(c)==="f"){z=f(y.path(),x.get(l)).replace(p,"");if(w){z=b(w)?w(z):o.format(w,encodeURIComponent(z))}return z}},_fileUpload:function(B){var A=this,E=A.options,w=E.fileTypes,D=new RegExp(("("+w.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),y=B.files[0].name,z=l,C=m,x;if(D.test(y)){B.data={path:A.path()};x=A._createFile(y);if(!x){B.preventDefault()}else{x._uploading=true;A.upload.one("success",function(G){delete x._uploading;var F=A._insertFileToList(x);F.set(z,G.response[A._getFieldName(z)]);F.set(C,G.response[A._getFieldName(C)]);A._tiles=A.listView.items().filter("["+o.attr("type")+"=f]");A._scroll()})}}else{B.preventDefault();A._showMessage(o.format(E.messages.invalidFileType,y,w))}},_content:function(){var w=this;w.list=e('<ul class="k-reset k-floats k-tiles" />').appendTo(w.element).on("scroll"+r,q(w._scroll,w)).on("dblclick"+r,"li",q(w._dblClick,w));w.listView=new o.ui.ListView(w.list,{dataSource:w.dataSource,template:w._itemTmpl(),editTemplate:w._editTmpl(),selectable:true,autoBind:false,dataBinding:function(x){w.toolbar.find(".k-i-close").parent().addClass("k-state-disabled");if(x.action==="remove"||x.action==="sync"){x.preventDefault()}},dataBound:function(){if(w.dataSource.view().length){w._tiles=this.items().filter("["+o.attr("type")+"=f]");w._scroll()}else{this.wrapper.append(j({text:w.options.messages.emptyFolder}))}},change:q(w._listViewChange,w)})},_dataSource:function(){var z=this,x=z.options,C=x.transport,w=u({},t),A={field:l,dir:"asc"},y,B={type:C.type||"imagebrowser",sort:[w,A]};if(n(C)){C.path=q(z.path,z);B.transport=C}if(n(x.schema)){B.schema=x.schema}else{if(C.type&&n(o.data.schemas[C.type])){y=o.data.schemas[C.type]}}if(z.dataSource&&z._errorHandler){z.dataSource.unbind(i,z._errorHandler)}else{z._errorHandler=q(z._error,z)}z.dataSource=o.data.DataSource.create(B).bind(i,z._errorHandler)},_loadImage:function(w){var C=this,B=e(w),A=C.dataSource.getByUid(B.attr(o.attr("uid"))),z=A.get(l),D=C.options.transport.thumbnailUrl,y=e("<img />",{alt:z}),x="?";if(A._uploading){return}y.hide().on("load"+r,function(){e(this).prev().remove().end().addClass("k-image").fadeIn()});B.find(".k-i-loading").after(y);if(b(D)){D=D(C.path(),encodeURIComponent(z))}else{if(D.indexOf("?")>=0){x="&"}D=D+x+"path="+encodeURIComponent(C.path()+z);if(A._override){D+="&_="+new Date().getTime();delete A._override}}y.attr("src",D);w.loaded=true},_scroll:function(){var w=this;if(w.options.transport&&w.options.transport.thumbnailUrl){clearTimeout(w._timeout);w._timeout=setTimeout(function(){var y=o._outerHeight(w.list),x=w.list.scrollTop(),z=x+y;w._tiles.each(function(){var B=s(this),A=B+this.offsetHeight;if(B>=x&&B<z||A>=x&&A<z){w._loadImage(this)}if(B>z){return false}});w._tiles=w._tiles.filter(function(){return !this.loaded})},250)}},_itemTmpl:function(){var x=this,w='<li class="k-tile" '+o.attr("uid")+'="#=uid#" ';w+=o.attr("type")+'="${'+c+'}">';w+="#if("+c+' == "d") { #';w+='<div class="k-thumb"><span class="k-icon k-i-folder"></span></div>';w+="#}else{#";if(x.options.transport&&x.options.transport.thumbnailUrl){w+='<div class="k-thumb"><span class="k-icon k-i-loading"></span></div>'}else{w+='<div class="k-thumb"><span class="k-icon k-i-file"></span></div>'}w+="#}#";w+="<strong>${"+l+"}</strong>";w+="#if("+c+' == "f") { # <span class="k-filesize">${this.sizeFormatter('+m+")}</span> #}#";w+="</li>";return q(o.template(w),{sizeFormatter:k})}});o.ui.plugin(h)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.tabstrip",["kendo.data"],a)}(function(){var a={id:"tabstrip",name:"TabStrip",category:"web",description:"The TabStrip widget displays a collection of tabs with associated tab content.",depends:["data"]};(function(C,p){var D=window.kendo,J=D.ui,z=D.keys,A=C.map,Q=C.each,b=C.trim,n=C.extend,s=D.isFunction,h=D.template,O=D._outerWidth,T=D._outerHeight,g=J.Widget,w=/^(a|div)$/i,G=".kendoTabStrip",H="img",N="href",U="prev",d="show",y="k-link",I="k-last",M="click",E="error",f=":empty",l="k-image",t="k-first",x="select",o="activate",L="k-content",m="contentUrl",i="mouseenter",r="mouseleave",c="contentLoad",j="k-state-disabled",q="k-state-default",K="k-state-active",k="k-state-focused",V="k-state-hover",P="k-tab-on-top",R=".k-item:not(."+j+")",B=".k-tabstrip-items > "+R+":not(."+K+")",e={content:h("<div class='k-content'#= contentAttributes(data) # role='tabpanel'>#= content(item) #</div>"),itemWrapper:h("<#= tag(item) # class='k-link'#= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) #</#= tag(item) #>"),item:h("<li class='#= wrapperCssClass(group, item) #' role='tab' #=item.active ? \"aria-selected='true'\" : ''#>#= itemWrapper(data) #</li>"),image:h("<img class='k-image' alt='' src='#= imageUrl #' />"),sprite:h("<span class='k-sprite #= spriteCssClass #'></span>"),empty:h("")},u={wrapperCssClass:function(aa,Z){var X="k-item",Y=Z.index;if(Z.enabled===false){X+=" k-state-disabled"}else{X+=" k-state-default"}if(Y===0){X+=" k-first"}if(Y==aa.length-1){X+=" k-last"}return X},textAttributes:function(X){return X.url?" href='"+X.url+"'":""},text:function(X){return X.encoded===false?X.text:D.htmlEncode(X.text)},tag:function(X){return X.url?"a":"span"},contentAttributes:function(X){return X.active!==true?" style='display:none' aria-hidden='true' aria-expanded='false'":""},content:function(X){return X.content?X.content:X.contentUrl?"":"&nbsp;"},contentUrl:function(X){return X.contentUrl?D.attr("content-url")+'="'+X.contentUrl+'"':""}};function W(X){X.children(H).addClass(l);X.children("a").addClass(y).children(H).addClass(l);X.filter(":not([disabled]):not([class*=k-state-disabled])").addClass(q);X.filter("li[disabled]").addClass(j).removeAttr("disabled");X.filter(":not([class*=k-state])").children("a").filter(":focus").parent().addClass(K+" "+P);X.attr("role","tab");X.filter("."+K).attr("aria-selected",true);X.each(function(){var Y=C(this);if(!Y.children("."+y).length){Y.contents().filter(function(){return !this.nodeName.match(w)&&!(this.nodeType==3&&!b(this.nodeValue))}).wrapAll("<span UNSELECTABLE='on' class='"+y+"'/>")}})}function v(Y){var X=Y.children(".k-item");X.filter(".k-first:not(:first-child)").removeClass(t);X.filter(".k-last:not(:last-child)").removeClass(I);X.filter(":first-child").addClass(t);X.filter(":last-child").addClass(I)}function S(Y,X){return"<span class='k-button k-button-icon k-button-bare k-tabstrip-"+Y+"' unselectable='on'><span class='k-icon "+X+"'></span></span>"}var F=g.extend({init:function(Y,X){var aa=this,ab;g.fn.init.call(aa,Y,X);aa._animations(aa.options);X=aa.options;aa._contentUrls=X.contentUrls||[];aa._wrapper();aa._isRtl=D.support.isRtl(aa.wrapper);aa._tabindex();aa._updateClasses();aa._dataSource();if(X.dataSource){aa.dataSource.fetch()}aa._tabPosition();aa._scrollable();if(aa._contentUrls.length){aa.wrapper.find(".k-tabstrip-items > .k-item").each(function(ae,af){var ad=aa._contentUrls[ae];if(typeof ad==="string"){C(af).find(">."+y).data(m,ad)}})}else{aa._contentUrls.length=aa.tabGroup.find("li.k-item").length}aa.wrapper.on(i+G+" "+r+G,B,aa._toggleHover).on("focus"+G,C.proxy(aa._active,aa)).on("blur"+G,function(){aa._current(null)});aa._keyDownProxy=C.proxy(aa._keydown,aa);if(X.navigatable){aa.wrapper.on("keydown"+G,aa._keyDownProxy)}if(aa.options.value){ab=aa.options.value}aa.wrapper.children(".k-tabstrip-items").on(M+G,".k-state-disabled .k-link",false).on(M+G," > "+R,function(ag){var ad=aa.wrapper[0];if(ad!==document.activeElement){var af=D.support.browser.msie;if(af){try{ad.setActive()}catch(ae){ad.focus()}}else{ad.focus()}}if(aa._click(C(ag.currentTarget))){ag.preventDefault()}});var ac=aa.tabGroup.children("li."+K),Z=aa.contentHolder(ac.index());if(ac[0]&&Z.length>0&&Z[0].childNodes.length===0){aa.activateTab(ac.eq(0))}aa.element.attr("role","tablist");if(aa.element[0].id){aa._ariaId=aa.element[0].id+"_ts_active"}aa.value(ab);D.notify(aa)},_active:function(){var X=this.tabGroup.children().filter("."+K);X=X[0]?X:this._endItem("first");if(X[0]){this._current(X)}},_endItem:function(X){return this.tabGroup.children(R)[X]()},_item:function(Y,Z){var X;if(Z===U){X="last"}else{X="first"}if(!Y){return this._endItem(X)}Y=Y[Z]();if(!Y[0]){Y=this._endItem(X)}if(Y.hasClass(j)){Y=this._item(Y,Z)}return Y},_current:function(X){var Y=this,Z=Y._focused,aa=Y._ariaId;if(X===p){return Z}if(Z){if(Z[0].id===aa){Z.removeAttr("id")}Z.removeClass(k)}if(X){if(!X.hasClass(K)){X.addClass(k)}Y.element.removeAttr("aria-activedescendant");aa=X[0].id||aa;if(aa){X.attr("id",aa);Y.element.attr("aria-activedescendant",aa)}}Y._focused=X},_keydown:function(ac){var Y=this,X=ac.keyCode,ab=Y._current(),aa=Y._isRtl,Z;if(ac.target!=ac.currentTarget){return}if(X==z.DOWN||X==z.RIGHT){Z=aa?U:"next"}else{if(X==z.UP||X==z.LEFT){Z=aa?"next":U}else{if(X==z.ENTER||X==z.SPACEBAR){Y._click(ab);ac.preventDefault()}else{if(X==z.HOME){Y._click(Y._endItem("first"));ac.preventDefault();return}else{if(X==z.END){Y._click(Y._endItem("last"));ac.preventDefault();return}}}}}if(Z){Y._click(Y._item(ab,Z));ac.preventDefault()}},_dataSource:function(){var X=this;if(X.dataSource&&X._refreshHandler){X.dataSource.unbind("change",X._refreshHandler)}else{X._refreshHandler=C.proxy(X.refresh,X)}X.dataSource=D.data.DataSource.create(X.options.dataSource).bind("change",X._refreshHandler)},setDataSource:function(Y){var X=this;X.options.dataSource=Y;X._dataSource();X.dataSource.fetch()},_animations:function(X){if(X&&"animation" in X&&!X.animation){X.animation={open:{effects:{}},close:{effects:{}}}}},refresh:function(ae){var ad=this,al=ad.options,ak=D.getter(al.dataTextField),af=D.getter(al.dataContentField),aa=D.getter(al.dataContentUrlField),ab=D.getter(al.dataImageUrlField),X=D.getter(al.dataUrlField),aj=D.getter(al.dataSpriteCssClass),ai,ah=[],Z,ac,ag=ad.dataSource.view(),Y;ae=ae||{};ac=ae.action;if(ac){ag=ae.items}for(ai=0,Y=ag.length;ai<Y;ai++){Z={text:ak(ag[ai])};if(al.dataContentField){Z.content=af(ag[ai])}if(al.dataContentUrlField){Z.contentUrl=aa(ag[ai])}if(al.dataUrlField){Z.url=X(ag[ai])}if(al.dataImageUrlField){Z.imageUrl=ab(ag[ai])}if(al.dataSpriteCssClass){Z.spriteCssClass=aj(ag[ai])}ah[ai]=Z}if(ae.action=="add"){if(ae.index<ad.tabGroup.children().length){ad.insertBefore(ah,ad.tabGroup.children().eq(ae.index))}else{ad.append(ah)}}else{if(ae.action=="remove"){for(ai=0;ai<ag.length;ai++){ad.remove(ae.index)}}else{if(ae.action=="itemchange"){ai=ad.dataSource.view().indexOf(ag[0]);if(ae.field===al.dataTextField){ad.tabGroup.children().eq(ai).find(".k-link").text(ag[0].get(ae.field))}if(ae.field===al.dataUrlField){ad._contentUrls[ai]=ag[0].get(ae.field)}}else{ad.trigger("dataBinding");ad.remove("li");ad._contentUrls=[];ad.append(ah);ad.trigger("dataBound")}}}},value:function(Y){var X=this;if(Y!==p){if(Y!=X.value()){X.tabGroup.children().each(function(){if(C.trim(C(this).text())==Y){X.select(this)}})}}else{return X.select().text()}},items:function(){return this.tabGroup[0].children},setOptions:function(X){var Y=this,Z=Y.options.animation;Y._animations(X);if(X.contentUrls){Y._contentUrls=X.contentUrls}X.animation=n(true,Z,X.animation);if(X.navigatable){Y.wrapper.on("keydown"+G,Y._keyDownProxy)}else{Y.wrapper.off("keydown"+G,Y._keyDownProxy)}g.fn.setOptions.call(Y,X)},events:[x,o,d,E,c,"change","dataBinding","dataBound"],options:{name:"TabStrip",dataTextField:"",dataContentField:"",dataImageUrlField:"",dataUrlField:"",dataSpriteCssClass:"",dataContentUrlField:"",tabPosition:"top",animation:{open:{effects:"expand:vertical fadeIn",duration:200},close:{duration:200}},collapsible:false,navigatable:true,contentUrls:false,scrollable:{distance:200}},destroy:function(){var Y=this,X=Y.scrollWrap;g.fn.destroy.call(Y);if(Y._refreshHandler){Y.dataSource.unbind("change",Y._refreshHandler)}Y.wrapper.off(G);Y.wrapper.children(".k-tabstrip-items").off(G);if(Y._scrollableModeActive){Y._scrollPrevButton.off().remove();Y._scrollNextButton.off().remove()}D.destroy(Y.wrapper);X.children(".k-tabstrip").unwrap()},select:function(X){var Y=this;if(arguments.length===0){return Y.tabGroup.children("li."+K)}if(!isNaN(X)){X=Y.tabGroup.children().get(X)}X=Y.tabGroup.find(X);C(X).each(function(Z,aa){aa=C(aa);if(!aa.hasClass(K)&&!Y.trigger(x,{item:aa[0],contentElement:Y.contentHolder(aa.index())[0]})){Y.activateTab(aa)}});return Y},enable:function(X,Y){this._toggleDisabled(X,Y!==false);return this},disable:function(X){this._toggleDisabled(X,false);return this},reload:function(Y){Y=this.tabGroup.find(Y);var Z=this;var X=Z._contentUrls;Y.each(function(){var ab=C(this),ac=ab.find("."+y).data(m)||X[ab.index()],aa=Z.contentHolder(ab.index());if(ac){Z.ajaxRequest(ab,aa,null,ac)}});return Z},append:function(Y){var Z=this,X=Z._create(Y);Q(X.tabs,function(aa){var ab=X.contents[aa];Z.tabGroup.append(this);if(Z.options.tabPosition=="bottom"){Z.tabGroup.before(ab)}else{if(Z._scrollableModeActive){Z._scrollPrevButton.before(ab)}else{Z.wrapper.append(ab)}}Z.angular("compile",function(){return{elements:[ab]}})});v(Z.tabGroup);Z._updateContentElements();Z.resize(true);return Z},_appendUrlItem:function(X){this._contentUrls.push(X)},_moveUrlItem:function(Y,X){this._contentUrls.splice(X,0,this._contentUrls.splice(Y,1)[0])},_removeUrlItem:function(X){this._contentUrls.splice(X,1)},insertBefore:function(aa,Y){if(C(aa).is(C(Y))){Y=this.tabGroup.find(Y).next()}else{Y=this.tabGroup.find(Y)}var ab=this,Z=ab._create(aa),X=ab.element.find("#"+Y.attr("aria-controls"));Q(Z.tabs,function(ac){var ae=Z.contents[ac];var ad=Z.newTabsCreated?ab._contentUrls.length-(Z.tabs.length-ac):C(ae).index()-1;Y.before(this);X.before(ae);ab._moveUrlItem(ad,C(this).index());ab.angular("compile",function(){return{elements:[ae]}})});v(ab.tabGroup);ab._updateContentElements(Z.newTabsCreated);ab.resize(true);return ab},insertAfter:function(aa,Y){if(C(aa).is(C(Y))){Y=this.tabGroup.find(Y).prev()}else{Y=this.tabGroup.find(Y)}var ab=this,Z=ab._create(aa),X=ab.element.find("#"+Y.attr("aria-controls"));Q(Z.tabs,function(ac){var ae=Z.contents[ac];var ad=Z.newTabsCreated?ab._contentUrls.length-(Z.tabs.length-ac):C(ae).index()-1;Y.after(this);X.after(ae);ab._moveUrlItem(ad,C(this).index());ab.angular("compile",function(){return{elements:[ae]}})});v(ab.tabGroup);ab._updateContentElements(Z.newTabsCreated);ab.resize(true);return ab},remove:function(aa){var Z=this;var X=typeof aa;var Y;if(X==="string"){aa=Z.tabGroup.find(aa)}else{if(X==="number"){aa=Z.tabGroup.children().eq(aa)}}Y=aa.map(function(){var ab=C(this).index();var ac=Z.contentElement(ab);D.destroy(ac);Z._removeUrlItem(ab);return ac});aa.remove();Y.empty();Y.remove();Z._updateContentElements();Z.resize(true);return Z},_create:function(Y){var ab=this,X,aa,Z,ac=false;Y=Y instanceof D.data.ObservableArray?Y.toJSON():Y;if(C.isPlainObject(Y)||C.isArray(Y)){Y=C.isArray(Y)?Y:[Y];ac=true;X=A(Y,function(ae,ad){ab._appendUrlItem(Y[ad].contentUrl||null);return C(F.renderItem({group:ab.tabGroup,item:n(ae,{index:ad})}))});aa=A(Y,function(ae,ad){if(typeof ae.content=="string"||ae.contentUrl){return C(F.renderContent({item:n(ae,{index:ad})}))}})}else{if(typeof Y=="string"&&Y[0]!="<"){X=ab.element.find(Y)}else{X=C(Y)}aa=C();X.each(function(){if(/k-tabstrip-items/.test(this.parentNode.className)){var ad=ab.element.find("#"+this.getAttribute("aria-controls"));Z=ad}else{Z=C("<div class='"+L+"'/>")}aa=aa.add(Z)});W(X)}return{tabs:X,contents:aa,newTabsCreated:ac}},_toggleDisabled:function(Y,X){Y=this.tabGroup.find(Y);Y.each(function(){C(this).toggleClass(q,X).toggleClass(j,!X)})},_updateClasses:function(){var Z=this,Y,aa,X;Z.wrapper.addClass("k-widget k-header k-tabstrip");Z.tabGroup=Z.wrapper.children("ul").addClass("k-tabstrip-items k-reset");if(!Z.tabGroup[0]){Z.tabGroup=C("<ul class='k-tabstrip-items k-reset'/>").appendTo(Z.wrapper)}Y=Z.tabGroup.find("li").addClass("k-item");if(Y.length){aa=Y.filter("."+K).index();X=aa>=0?aa:p;Z.tabGroup.contents().filter(function(){return this.nodeType==3&&!b(this.nodeValue)}).remove()}if(aa>=0){Y.eq(aa).addClass(P)}Z.contentElements=Z.wrapper.children("div");Z.contentElements.addClass(L).eq(X).addClass(K).css({display:"block"});if(Y.length){W(Y);v(Z.tabGroup);Z._updateContentElements(true)}},_elementId:function(aa,X){var Z=aa.attr("id");var ab=this.element.attr("id");if(!Z||C.inArray(ab+"-",Z)>-1){var Y=(ab||D.guid())+"-";return Y+(X+1)}return Z},_elementIeId:function(Z,X){var Y=Z.attr("id");return Y},_updateContentElements:function(ac){var ab=this,Z=ab._contentUrls,Y=ab.tabGroup.find(".k-item"),X=ab.wrapper.children("div");var aa="";if(ab._elementId.bind){aa=ab._elementId.bind(ab)}else{aa=ab._elementIeId}if(X.length&&Y.length>X.length){X.each(function(ad){var af=aa(C(this),ad);var ae=Y.filter("[aria-controls="+(this.id||0)+"]")[0];if(!ae&&ac){ae=Y[ad]}if(ae){ae.setAttribute("aria-controls",af)}this.setAttribute("id",af)})}else{Y.each(function(ad){var ae=X.eq(ad);var af=aa(ae,ad);this.setAttribute("aria-controls",af);if(!ae.length&&Z[ad]){C("<div class='"+L+"'/>").appendTo(ab.wrapper).attr("id",af)}else{ae.attr("id",af);if(!C(this).children(".k-loading")[0]&&!Z[ad]){C("<span class='k-loading k-complete'/>").prependTo(this)}}ae.attr("role","tabpanel");ae.filter(":not(."+K+")").attr("aria-hidden",true).attr("aria-expanded",false);ae.filter("."+K).attr("aria-expanded",true)})}ab.contentElements=ab.contentAnimators=ab.wrapper.children("div");ab.tabsHeight=T(ab.tabGroup)+parseInt(ab.wrapper.css("border-top-width"),10)+parseInt(ab.wrapper.css("border-bottom-width"),10);if(D.kineticScrollNeeded&&D.mobile.ui.Scroller){D.touchScroller(ab.contentElements);ab.contentElements=ab.contentElements.children(".km-scroll-container")}},_wrapper:function(){var X=this;if(X.element.is("ul")){X.wrapper=X.element.wrapAll("<div />").parent()}else{X.wrapper=X.element}X.scrollWrap=X.wrapper.parent(".k-tabstrip-wrapper");if(!X.scrollWrap[0]){X.scrollWrap=X.wrapper.wrapAll("<div class='k-tabstrip-wrapper' />").parent()}},_tabPosition:function(){var Y=this,X=Y.options.tabPosition;Y.wrapper.addClass("k-floatwrap k-tabstrip-"+X);if(X=="bottom"){Y.tabGroup.appendTo(Y.wrapper)}Y.resize(true)},_setContentElementsDimensions:function(){var ab=this,Y=ab.options.tabPosition;if(Y=="left"||Y=="right"){var ae=ab.wrapper.children(".k-content"),aa=ae.filter(":visible"),X="margin-"+Y,Z=ab.tabGroup,ad=O(Z);var ac=Math.ceil(Z.height())-parseInt(aa.css("padding-top"),10)-parseInt(aa.css("padding-bottom"),10)-parseInt(aa.css("border-top-width"),10)-parseInt(aa.css("border-bottom-width"),10);setTimeout(function(){ae.css(X,ad).css("min-height",ac)})}},_resize:function(){this._setContentElementsDimensions();this._scrollable()},_sizeScrollWrap:function(Y){if(Y.is(":visible")){var X=this.options.tabPosition;var Z=Math.floor(T(Y,true))+(X==="left"||X==="right"?2:this.tabsHeight);this.scrollWrap.css("height",Z).css("height")}},_toggleHover:function(X){C(X.currentTarget).toggleClass(V,X.type==i)},_click:function(af){var Z=this,ac=af.find("."+y),Y=ac.attr(N),ae=Z.options.collapsible,aa=af.index(),ab=Z.contentHolder(aa),ad,X;if(af.closest(".k-widget")[0]!=Z.wrapper[0]){return}if(af.is("."+j+(!ae?",."+K:""))){return true}X=ac.data(m)||Z._contentUrls[aa]||Y&&(Y.charAt(Y.length-1)=="#"||Y.indexOf("#"+Z.element[0].id+"-")!=-1);ad=!Y||X;if(Z.tabGroup.children("[data-animating]").length){return ad}if(Z.trigger(x,{item:af[0],contentElement:ab[0]})){return true}if(ad===false){return}if(ae&&af.is("."+K)){Z.deactivateTab(af);return true}if(Z.activateTab(af)){ad=true}return ad},_scrollable:function(){var ac=this,aa=ac.options,ab,ae,Z,ad;if(ac._scrollableAllowed()){ac.wrapper.addClass("k-tabstrip-scrollable");ab=ac.wrapper[0].offsetWidth;ae=ac.tabGroup[0].scrollWidth;if(ae>ab&&!ac._scrollableModeActive){ac._nowScrollingTabs=false;ac._isRtl=D.support.isRtl(ac.element);var Y=D.support.mobileOS?"touchstart":"mousedown";var X=D.support.mobileOS?"touchend":"mouseup";ac.wrapper.append(S("prev","k-i-arrow-60-left")+S("next","k-i-arrow-60-right"));Z=ac._scrollPrevButton=ac.wrapper.children(".k-tabstrip-prev");ad=ac._scrollNextButton=ac.wrapper.children(".k-tabstrip-next");ac.tabGroup.css({marginLeft:O(Z)+9,marginRight:O(ad)+12});Z.on(Y+G,function(){ac._nowScrollingTabs=true;ac._scrollTabsByDelta(aa.scrollable.distance*(ac._isRtl?1:-1))});ad.on(Y+G,function(){ac._nowScrollingTabs=true;ac._scrollTabsByDelta(aa.scrollable.distance*(ac._isRtl?-1:1))});Z.add(ad).on(X+G,function(){ac._nowScrollingTabs=false});ac._scrollableModeActive=true;ac._toggleScrollButtons()}else{if(ac._scrollableModeActive&&ae<=ab){ac._scrollableModeActive=false;ac.wrapper.removeClass("k-tabstrip-scrollable");ac._scrollPrevButton.off().remove();ac._scrollNextButton.off().remove();ac.tabGroup.css({marginLeft:"",marginRight:""})}else{if(!ac._scrollableModeActive){ac.wrapper.removeClass("k-tabstrip-scrollable")}else{ac._toggleScrollButtons()}}}}},_scrollableAllowed:function(){var X=this.options;return X.scrollable&&!isNaN(X.scrollable.distance)&&(X.tabPosition=="top"||X.tabPosition=="bottom")},_scrollTabsToItem:function(af){var ab=this,aa=ab.tabGroup,X=aa.scrollLeft(),ac=O(af),ad=ab._isRtl?af.position().left:af.position().left-aa.children().first().position().left,ae=aa[0].offsetWidth,Y=Math.ceil(parseFloat(aa.css("padding-left"))),Z;if(ab._isRtl){if(ad<0){Z=X+ad-(ae-X)-Y}else{if(ad+ac>ae){Z=X+ad-ac+Y*2}}}else{if(X+ae<ad+ac){Z=ad+ac-ae+Y*2}else{if(X>ad){Z=ad-Y}}}aa.finish().animate({scrollLeft:Z},"fast","linear",function(){ab._toggleScrollButtons()})},_scrollTabsByDelta:function(aa){var Z=this;var Y=Z.tabGroup;var X=Y.scrollLeft();Y.finish().animate({scrollLeft:X+aa},"fast","linear",function(){if(Z._nowScrollingTabs){Z._scrollTabsByDelta(aa)}else{Z._toggleScrollButtons()}})},_toggleScrollButtons:function(){var Y=this,X=Y.tabGroup,Z=X.scrollLeft();Y._scrollPrevButton.toggle(Y._isRtl?Z<X[0].scrollWidth-X[0].offsetWidth-1:Z!==0);Y._scrollNextButton.toggle(Y._isRtl?Z!==0:Z<X[0].scrollWidth-X[0].offsetWidth-1)},deactivateTab:function(Z){var Y=this,X=Y.options.animation,ab=X.open,ac=n({},X.close),aa=ac&&"effects" in ac;Z=Y.tabGroup.find(Z);ac=n(aa?ac:n({reverse:true},ab),{hide:true});if(D.size(ab.effects)){Z.kendoAddClass(q,{duration:ab.duration});Z.kendoRemoveClass(K,{duration:ab.duration})}else{Z.addClass(q);Z.removeClass(K)}Z.removeAttr("aria-selected");Y.contentAnimators.filter("."+K).kendoStop(true,true).kendoAnimate(ac).removeClass(K).attr("aria-hidden",true)},activateTab:function(am){if(this.tabGroup.children("[data-animating]").length){return}am=this.tabGroup.find(am);var ae=this,ah=ae.options.animation,aa=ah.open,al=n({},ah.close),af=al&&"effects" in al,Z=am.parent().children(),aj=Z.filter("."+K),X=Z.index(am);al=n(af?al:n({reverse:true},aa),{hide:true});if(D.size(aa.effects)){aj.kendoRemoveClass(K,{duration:al.duration});am.kendoRemoveClass(V,{duration:al.duration})}else{aj.removeClass(K);am.removeClass(V)}var ak=ae.contentAnimators;if(ae.inRequest){ae.xhr.abort();ae.inRequest=false}if(ak.length===0){ae.tabGroup.find("."+P).removeClass(P);am.addClass(P).css("z-index");am.addClass(K);ae._current(am);ae.trigger("change");if(ae._scrollableModeActive){ae._scrollTabsToItem(am)}return false}var Y=ak.filter("."+K),ag=ae.contentHolder(X),ai=ag.closest(".k-content");ae.tabsHeight=T(ae.tabGroup)+parseInt(ae.wrapper.css("border-top-width"),10)+parseInt(ae.wrapper.css("border-bottom-width"),10);ae._sizeScrollWrap(Y);if(ag.length===0){Y.removeClass(K).attr("aria-hidden",true).kendoStop(true,true).kendoAnimate(al);return false}am.attr("data-animating",true);var ac=(am.children("."+y).data(m)||ae._contentUrls[X]||false)&&ag.is(f),ad=function(){ae.tabGroup.find("."+P).removeClass(P);am.addClass(P).css("z-index");if(D.size(aa.effects)){aj.kendoAddClass(q,{duration:aa.duration});am.kendoAddClass(K,{duration:aa.duration})}else{aj.addClass(q);am.addClass(K)}aj.removeAttr("aria-selected");am.attr("aria-selected",true);ae._current(am);ae._sizeScrollWrap(ai);ai.addClass(K).removeAttr("aria-hidden").kendoStop(true,true).attr("aria-expanded",true).kendoAnimate(n({init:function(){ae.trigger(d,{item:am[0],contentElement:ag[0]});D.resize(ag)}},aa,{complete:function(){am.removeAttr("data-animating");ae.trigger(o,{item:am[0],contentElement:ag[0]});D.resize(ag);ae.scrollWrap.css("height","").css("height")}}))},ab=function(){if(!ac){ad();ae.trigger("change")}else{am.removeAttr("data-animating");ae.ajaxRequest(am,ag,function(){am.attr("data-animating",true);ad();ae.trigger("change")})}if(ae._scrollableModeActive){ae._scrollTabsToItem(am)}};Y.removeClass(K);Y.attr("aria-hidden",true);Y.attr("aria-expanded",false);if(Y.length){Y.kendoStop(true,true).kendoAnimate(n({complete:ab},al))}else{ab()}return true},contentElement:function(aa){if(isNaN(aa-0)){return p}var Y=this.contentElements&&this.contentElements[0]&&!D.kineticScrollNeeded?this.contentElements:this.contentAnimators;var ab=C(this.tabGroup.children()[aa]).attr("aria-controls");if(Y){for(var Z=0,X=Y.length;Z<X;Z++){if(Y.eq(Z).closest(".k-content")[0].id==ab){return Y[Z]}}}return p},contentHolder:function(Y){var Z=C(this.contentElement(Y)),X=Z.children(".km-scroll-container");return D.support.touch&&X[0]?X:Z},ajaxRequest:function(ae,ag,Z,Y){ae=this.tabGroup.find(ae);var af=this,aj=C.ajaxSettings.xhr,ah=ae.find("."+y),ad={},ac=ae.width()/2,ab=false,X=ae.find(".k-loading").removeClass("k-complete");if(!X[0]){X=C("<span class='k-loading'/>").prependTo(ae)}var ak=ac*2-X.width();var ai=function(){X.animate({marginLeft:(parseInt(X.css("marginLeft"),10)||0)<ac?ak:0},500,ai)};if(D.support.browser.msie&&D.support.browser.version<10){setTimeout(ai,40)}Y=Y||ah.data(m)||af._contentUrls[ae.index()]||ah.attr(N);af.inRequest=true;var aa={type:"GET",cache:false,url:Y,dataType:"html",data:ad,xhr:function(){var an=this,am=aj(),al=an.progressUpload?"progressUpload":an.progress?"progress":false;if(am){C.each([am,am.upload],function(){if(this.addEventListener){this.addEventListener("progress",function(ao){if(al){an[al](ao)}},false)}})}an.noProgress=!(window.XMLHttpRequest&&"upload" in new XMLHttpRequest());return am},progress:function(al){if(al.lengthComputable){var am=parseInt(al.loaded/al.total*100,10)+"%";X.stop(true).addClass("k-progress").css({width:am,marginLeft:0})}},error:function(am,al){if(af.trigger("error",{xhr:am,status:al})){this.complete()}},stopProgress:function(){clearInterval(ab);X.stop(true).addClass("k-progress")[0].style.cssText=""},complete:function(al){af.inRequest=false;if(this.noProgress){setTimeout(this.stopProgress,500)}else{this.stopProgress()}if(al.statusText=="abort"){X.remove()}},success:function(an){X.addClass("k-complete");try{var ap=this,am=10;if(ap.noProgress){X.width(am+"%");ab=setInterval(function(){ap.progress({lengthComputable:true,loaded:Math.min(am,100),total:100});am+=10},40)}af.angular("cleanup",function(){return{elements:ag.get()}});D.destroy(ag);ag.html(an)}catch(ao){var al=window.console;if(al&&al.error){al.error(ao.name+": "+ao.message+" in "+Y)}this.error(this.xhr,"error")}if(Z){Z.call(af,ag)}af.angular("compile",function(){return{elements:ag.get()}});af.trigger(c,{item:ae[0],contentElement:ag[0]})}};if(typeof Y==="object"){aa=C.extend(true,{},aa,Y);if(s(aa.url)){aa.url=aa.url()}}af.xhr=C.ajax(aa)}});n(F,{renderItem:function(X){X=n({tabStrip:{},group:{}},X);var Z=e.empty,Y=X.item;return e.item(n(X,{image:Y.imageUrl?e.image:Z,sprite:Y.spriteCssClass?e.sprite:Z,itemWrapper:e.itemWrapper},u))},renderContent:function(X){return e.content(n(X,u))}});D.ui.plugin(F)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("util/undoredostack",["kendo.core"],a)}(function(){(function(b){var a=b.Observable.extend({init:function(c){b.Observable.fn.init.call(this,c);this.clear()},events:["undo","redo"],push:function(c){this.stack=this.stack.slice(0,this.currentCommandIndex+1);this.currentCommandIndex=this.stack.push(c)-1},undo:function(){if(this.canUndo()){var c=this.stack[this.currentCommandIndex--];c.undo();this.trigger("undo",{command:c})}},redo:function(){if(this.canRedo()){var c=this.stack[++this.currentCommandIndex];c.redo();this.trigger("redo",{command:c})}},clear:function(){this.stack=[];this.currentCommandIndex=-1},canUndo:function(){return this.currentCommandIndex>=0},canRedo:function(){return this.currentCommandIndex!=this.stack.length-1}});b.deepExtend(b,{util:{UndoRedoStack:a}})}(kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/main",["util/undoredostack","kendo.combobox","kendo.dropdownlist","kendo.window","kendo.colorpicker"],a)}(function(){(function(h,j){var p=window.kendo,t=p.Class,d=p.ui.Widget,k=p.support.mobileOS,w=p.support.browser,u=h.extend,s=h.proxy,n=p.deepExtend,o=p.keys;var e="select";var i="select.k-select-overlay";var q=t.extend({init:function(y){this.options=y},getHtml:function(){var y=this.options;return p.template(y.template,{useWithBlock:false})(y)}});var m={editorWrapperTemplate:'<table cellspacing="4" cellpadding="0" class="k-widget k-editor k-header" role="presentation"><tbody><tr role="presentation"><td class="k-editor-toolbar-wrap" role="presentation"><ul class="k-editor-toolbar" role="toolbar" /></td></tr><tr><td class="k-editable-area" /></tr></tbody></table>',buttonTemplate:'# var iconCssClass= "k-icon k-i-" + kendo.toHyphens(data.cssClass.replace("k-", ""));#<a tabindex="0" role="button" class="k-tool"#= data.popup ? " data-popup" : "" # unselectable="on" title="#= data.title #"><span unselectable="on" class="k-tool-icon #= iconCssClass #"></span><span class="k-tool-text">#= data.title #</span></a>',colorPickerTemplate:'<div class="k-colorpicker k-icon k-i-#= data.cssClass.replace("k-", "") #" />',comboBoxTemplate:'<select title="#= data.title #" class="#= data.cssClass #" />',dropDownListTemplate:'<span class="k-editor-dropdown"><select title="#= data.title #" class="#= data.cssClass #" /></span>',separatorTemplate:'<span class="k-separator" />',overflowAnchorTemplate:'<a href="" role="button" class="k-tool k-overflow-anchor" data-popup unselectable="on"><span unselectable="on" class="k-icon k-i-more-vertical"></span></a>',formatByName:function(y,A){for(var z=0;z<A.length;z++){if(h.inArray(y,A[z].tags)>=0){return A[z]}}},getToolCssClass:function(A){var z={superscript:"sup-script",subscript:"sub-script",justifyLeft:"align-left",justifyCenter:"align-center",justifyRight:"align-right",justifyFull:"align-justify",insertUnorderedList:"list-unordered",insertOrderedList:"list-ordered","import":"login",indent:"indent-increase",outdent:"indent-decrease",createLink:"link-horizontal",unlink:"unlink-horizontal",insertImage:"image",insertFile:"file-add",viewHtml:"html",foreColor:"foreground-color",backColor:"paint",createTable:"table-insert",addColumnLeft:"table-column-insert-left",addColumnRight:"table-column-insert-right",addRowAbove:"table-row-insert-above",addRowBelow:"table-row-insert-below",deleteRow:"table-row-delete",deleteColumn:"table-column-delete",tableWizard:"table-properties",tableWizardInsert:"table-wizard",cleanFormatting:"clear-css"};var y=z[A];if(y){return y}return A},registerTool:function(z,y){var A=y.options;if(A&&A.template){A.template.options.cssClass="k-"+m.getToolCssClass(z)}if(!y.name){y.options.name=z;y.name=z.toLowerCase()}r.defaultTools[z]=y},registerFormat:function(y,z){r.fn.options.formats[y]=z}};var v={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",superscript:"Superscript",subscript:"Subscript",justifyCenter:"Center text",justifyLeft:"Align text left",justifyRight:"Align text right",justifyFull:"Justify",insertUnorderedList:"Insert unordered list",insertOrderedList:"Insert ordered list",indent:"Indent",outdent:"Outdent",createLink:"Insert hyperlink",unlink:"Remove hyperlink",insertImage:"Insert image",insertFile:"Insert file",insertHtml:"Insert HTML",viewHtml:"View HTML",fontName:"Select font family",fontNameInherit:"(inherited font)",fontSize:"Select font size",fontSizeInherit:"(inherited size)",formatBlock:"Format",formatting:"Format",foreColor:"Color",backColor:"Background color",style:"Styles",emptyFolder:"Empty Folder",editAreaTitle:"Editable area. Press F10 for toolbar.",uploadFile:"Upload",orderBy:"Arrange by:",orderBySize:"Size",orderByName:"Name",invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',deleteFile:'Are you sure you want to delete "{0}"?',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',directoryNotFound:"A directory with this name was not found.",imageWebAddress:"Web address",imageAltText:"Alternate text",imageWidth:"Width (px)",imageHeight:"Height (px)",fileWebAddress:"Web address",fileTitle:"Title",linkWebAddress:"Web address",linkText:"Text",linkToolTip:"ToolTip",linkOpenInNewWindow:"Open link in new window",dialogUpdate:"Update",dialogInsert:"Insert",dialogOk:"Ok",dialogCancel:"Cancel",cleanFormatting:"Clean formatting",createTable:"Create table",createTableHint:"Create a {0} x {1} table",addColumnLeft:"Add column on the left",addColumnRight:"Add column on the right",addRowAbove:"Add row above",addRowBelow:"Add row below",deleteRow:"Delete row",deleteColumn:"Delete column",tableWizard:"Table Wizard",tableTab:"Table",cellTab:"Cell",accessibilityTab:"Accessibility",caption:"Caption",summary:"Summary",width:"Width",height:"Height",cellSpacing:"Cell Spacing",cellPadding:"Cell Padding",cellMargin:"Cell Margin",alignment:"Alignment",background:"Background",cssClass:"CSS Class",id:"ID",border:"Border",borderStyle:"Border Style",collapseBorders:"Collapse borders",wrapText:"Wrap text",associateCellsWithHeaders:"Associate cells with headers",alignLeft:"Align Left",alignCenter:"Align Center",alignRight:"Align Right",alignLeftTop:"Align Left Top",alignCenterTop:"Align Center Top",alignRightTop:"Align Right Top",alignLeftMiddle:"Align Left Middle",alignCenterMiddle:"Align Center Middle",alignRightMiddle:"Align Right Middle",alignLeftBottom:"Align Left Bottom",alignCenterBottom:"Align Center Bottom",alignRightBottom:"Align Right Bottom",alignRemove:"Remove Alignment",columns:"Columns",rows:"Rows",selectAllCells:"Select All Cells",exportAs:"Export As","import":"Import"};var a=!k||k.ios&&k.flatVersion>=500||!k.ios&&typeof document.documentElement.contentEditable!="undefined";var c={basic:["bold","italic","underline"],alignment:["justifyLeft","justifyCenter","justifyRight"],lists:["insertUnorderedList","insertOrderedList"],indenting:["indent","outdent"],links:["createLink","unlink"],tables:["tableWizard","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn"]};var r=d.extend({init:function(C,H){var D=this,F,z=p.ui.editor,G,y,E;var B;var A=z.Dom;if(!a){return}d.fn.init.call(D,C,H);D.options=n({},D.options,H);D.options.tools=D.options.tools.slice();C=D.element;B=C[0];E=A.name(B);this._registerHandler(C.closest("form"),"submit",s(D.update,D,j));y=u({},D.options);y.editor=D;if(E=="textarea"){D._wrapTextarea();G=D.wrapper.find(".k-editor-toolbar");if(B.id){G.attr("aria-controls",B.id)}}else{D.element.attr("contenteditable",true).addClass("k-widget k-editor k-editor-inline");y.popup=true;G=h('<ul class="k-editor-toolbar" role="toolbar" />').insertBefore(C)}D.toolbar=new z.Toolbar(G[0],y);D.toolbar.bindTo(D);if(E=="textarea"){setTimeout(function(){var I=D.wrapper[0].style.height;var J=parseInt(I,10);var K=D.wrapper.height();if(I.indexOf("px")>0&&!isNaN(J)&&K>J){D.wrapper.height(J-(K-J))}})}D._resizable();D._initializeContentElement(D);D.keyboard=new z.Keyboard([new z.BackspaceHandler(D),new z.TypingHandler(D),new z.SystemHandler(D),new z.SelectAllHandler(D)]);D.clipboard=new z.Clipboard(this);D.undoRedoStack=new p.util.UndoRedoStack();if(H&&H.value){F=H.value}else{if(D.textarea){F=B.value;if(D.options.encoded&&h.trim(B.defaultValue).length){F=B.defaultValue}F=F.replace(/[\r\n\v\f\t ]+/gi," ")}else{F=B.innerHTML}}D.value(F||p.ui.editor.emptyElementContent);this._registerHandler(document,{mousedown:function(){D._endTyping()},mouseup:function(I){D._mouseup(I)}});D._initializeImmutables();D.toolbar.resize();p.notify(D)},setOptions:function(y){var z=this;d.fn.setOptions.call(z,y);if(y.tools){z.toolbar.bindTo(z)}},_endTyping:function(){var y=this.keyboard;try{if(y.isTypingInProgress()){y.endTyping(true);this.saveSelection()}}catch(z){}},_selectionChange:function(){this._selectionStarted=false;this.saveSelection();this.trigger("select",{})},_resizable:function(){var y=this.options.resizable;var z=h.isPlainObject(y)?y.content===j||y.content===true:y;if(z&&this.textarea){h("<div class='k-resize-handle'><span class='k-icon k-i-arrow-45-down-right' /></div>").insertAfter(this.textarea);this.wrapper.kendoResizable(u({},this.options.resizable,{start:function(C){var B=this.editor=h(C.currentTarget).closest(".k-editor");this.initialSize=B.height();B.find("td:last").append("<div class='k-overlay' />")},resize:function(E){var F=E.y.initialDelta;var C=this.initialSize+F;var D=this.options.min||0;var B=this.options.max||Infinity;C=Math.min(B,Math.max(D,C));this.editor.height(C)},resizeend:function(){this.editor.find(".k-overlay").remove();this.editor=null}}));if(p.support.mobileOS.ios){var A=this.wrapper.getKendoResizable();A.draggable.options.ignore=i}}},_initializeTableResizing:function(){var y=this;p.ui.editor.TableResizing.create(y);y._showTableResizeHandlesProxy=s(y._showTableResizeHandles,y);y.bind(e,y._showTableResizeHandlesProxy)},_destroyTableResizing:function(){var y=this;var z=y.tableResizing;if(z){z.destroy();y.tableResizing=null}if(y._showTableResizeHandlesProxy){y.unbind(e,y._showTableResizeHandlesProxy)}},_showTableResizeHandles:function(){var y=this;var z=y.tableResizing;if(z){z.showResizeHandles()}},_initializeColumnResizing:function(){p.ui.editor.ColumnResizing.create(this)},_destroyColumnResizing:function(){var y=this;if(y.columnResizing){y.columnResizing.destroy();y.columnResizing=null}},_initializeRowResizing:function(){p.ui.editor.RowResizing.create(this)},_destroyRowResizing:function(){var y=this;if(y.rowResizing){y.rowResizing.destroy();y.rowResizing=null}},_wrapTextarea:function(){var E=this,A=E.element,z=A[0].style.width,D=A[0].style.height,C=m.editorWrapperTemplate,y=h(C).insertBefore(A).width(z).height(D),B=y.find(".k-editable-area");A.attr("autocomplete","off").appendTo(B).addClass("k-content k-raw-content").css("display","none");E.textarea=A;E.wrapper=y},_createContentElement:function(G){var C=this;var B,z,E;var F=C.textarea;var D=C.options.domain;var A=D||document.domain;var H="";var y='javascript:""';if(D||A!=location.hostname){H='<script>document.domain="'+A+'"<\/script>';y="javascript:document.write('"+H+"')"}F.hide();B=h("<iframe />",{title:C.options.messages.editAreaTitle,frameBorder:"0"})[0];h(B).css("display","").addClass("k-content").attr("tabindex",F[0].tabIndex).insertBefore(F);B.src=y;z=B.contentWindow||B;E=z.document||B.contentDocument;h(B).one("load",function(){C.toolbar.decorateFrom(E.body)});E.open();E.write("<!DOCTYPE html><html><head><meta charset='utf-8' /><style>html,body{padding:0;margin:0;height:100%;min-height:100%;}body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;"+(p.support.isRtl(F)?"direction:rtl;":"")+(w.msie||w.edge?"height:auto;":"")+(k.ios?"word-break:break-all;":"")+"}h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}ul,ol{padding-left:2.5em}span{-ms-high-contrast-adjust:none;}a{color:#00a}code{font-size:1.23em}telerik\\3Ascript{display: none;}.k-table{width:100%;border-spacing:0;margin: 0 0 1em;}.k-table td{min-width:1px;padding:.2em .3em;}.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}.k-table p{margin:0;padding:0;}.k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}.k-column-resize-handle {width: 100%; height: 100%;}.k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}.k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}.k-row-resize-handle {display: table; width: 100%; height: 100%;}.k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}.k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}.k-table-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}.k-table-resize-handle {width: 100%; height: 100%;}.k-table-resize-handle.k-resize-east{cursor:e-resize;}.k-table-resize-handle.k-resize-north{cursor:n-resize;}.k-table-resize-handle.k-resize-northeast{cursor:ne-resize;}.k-table-resize-handle.k-resize-northwest{cursor:nw-resize;}.k-table-resize-handle.k-resize-south{cursor:s-resize;}.k-table-resize-handle.k-resize-southeast{cursor:se-resize;}.k-table-resize-handle.k-resize-southwest{cursor:sw-resize;}.k-table-resize-handle.k-resize-west{cursor:w-resize;}.k-table.k-table-resizing{opacity:0.6;}k\\:script{display:none;}</style>"+H+"<script>(function(d,c){d[c]('header'),d[c]('article'),d[c]('nav'),d[c]('section'),d[c]('footer');})(document, 'createElement');<\/script>"+h.map(G,function(I){return"<link rel='stylesheet' href='"+I+"'>"}).join("")+"</head><body autocorrect='off' contenteditable='true'></body></html>");E.close();return z},_blur:function(){var z=this.textarea;var y=z?z.val():this._oldValue;var A=this.options.encoded?this.encodedValue():this.value();this.update();if(z){z.trigger("blur")}if(A!=y){this.trigger("change")}},_spellCorrect:function(A){var z;var y=false;this._registerHandler(A.body,{contextmenu:function(){A.one("select",function(){z=null});A._spellCorrectTimeout=setTimeout(function(){z=new p.ui.editor.RestorePoint(A.getRange(),A.body);y=false},10)},input:function(){if(!z){return}if(p.support.browser.mozilla&&!y){y=true;return}p.ui.editor._finishUpdate(A,z)}})},_registerHandler:function(A,D,C){var B=this;var E=".kendoEditor";var F;var z;A=h(A);if(!this._handlers){this._handlers=[]}if(A.length){if(h.isPlainObject(D)){for(var y in D){if(D.hasOwnProperty(y)){this._registerHandler(A,y,D[y])}}}else{F=p.applyEventMap(D).split(" ");for(z=0;z<F.length;z++){B._handlers.push({element:A,type:F[z]+E,handler:C});A.on(F[z]+E,C)}}}},_deregisterHandlers:function(){var y=this._handlers;for(var z=0;z<y.length;z++){var A=y[z];A.element.off(A.type,A.handler)}this._handlers=[]},_initializeContentElement:function(){var y=this;var C;var z;var A;if(y.textarea){y.window=y._createContentElement(y.options.stylesheets);C=y.document=y.window.contentDocument||y.window.document;y.body=C.body;z=y.window;A=C;this._registerHandler(C,"mouseup",s(this._mouseup,this))}else{y.window=window;C=y.document=document;y.body=y.element[0];z=y.body;A=y.body;y.toolbar.decorateFrom(y.body)}this._registerHandler(z,"blur",s(this._blur,this));y._registerHandler(A,"down",s(y._mousedown,y));try{C.execCommand("enableInlineTableEditing",null,false)}catch(B){}if(p.support.touch){this._registerHandler(C,{keydown:function(){if(p._activeElement()!=C.body){y.window.focus()}}})}this._spellCorrect(y);this._registerHandler(y.body,{keydown:function(M){var J;if((M.keyCode===o.BACKSPACE||M.keyCode===o.DELETE)&&y.body.getAttribute("contenteditable")!=="true"){return false}if(M.keyCode===o.F10){setTimeout(s(y.toolbar.focus,y.toolbar),100);M.preventDefault();return}else{if(M.keyCode==o.LEFT||M.keyCode==o.RIGHT){J=y.getRange();var F=M.keyCode==o.LEFT;var D=J[F?"startContainer":"endContainer"];var G=J[F?"startOffset":"endOffset"];var N=F?-1:1;var I=G+N;var E=F?I:G;if(D.nodeType==3&&D.nodeValue[E]=="\uFEFF"){J.setStart(D,I);J.collapse(true);y.selectRange(J)}}}var K=y.toolbar.tools;var H=y.keyboard.toolFromShortcut(K,M);var L=H?K[H].options:{};if(H&&!L.keyPressCommand){M.preventDefault();if(!/^(undo|redo)$/.test(H)){y.keyboard.endTyping(true)}y.trigger("keydown",M);y.exec(H);y._runPostContentKeyCommands(M);return false}y.keyboard.clearTimeout();y.keyboard.keydown(M)},keypress:function(D){setTimeout(function(){y._runPostContentKeyCommands(D);y._showTableResizeHandles()},0)},keyup:function(E){var D=[o.BACKSPACE,o.TAB,o.PAGEUP,o.PAGEDOWN,o.END,o.HOME,o.LEFT,o.UP,o.RIGHT,o.DOWN,o.INSERT,o.DELETE];if(h.inArray(E.keyCode,D)>-1||E.keyCode==65&&E.ctrlKey&&!E.altKey&&!E.shiftKey){y._selectionChange()}y.keyboard.keyup(E)},click:function(E){var F=p.ui.editor.Dom,D;if(F.name(E.target)==="img"){D=y.createRange();D.selectNode(E.target);y.selectRange(D)}},"cut copy paste":function(D){y.clipboard["on"+D.type](D)},focusin:function(){if(y.body.hasAttribute("contenteditable")){h(this).addClass("k-state-active");y.toolbar.show()}},focusout:function(){setTimeout(function(){var G=p._activeElement();var D=y.body;var F=y.toolbar;if(F.options.popup){var E=F.window.element.get(0);if(E&&!(h.contains(E,G)||E==G)){F.preventPopupHide=false}}if(G!=D&&!h.contains(D,G)&&!h(G).is(".k-editortoolbar-dragHandle")&&!F.focused()){h(D).removeClass("k-state-active");F.hide()}},10)}});y._initializeColumnResizing();y._initializeRowResizing();y._initializeTableResizing()},_initializeImmutables:function(){var y=this,z=p.ui.editor;if(y.options.immutables){y.immutables=new z.Immutables(y)}},_mousedown:function(A){var y=this;y._selectionStarted=true;if(w.gecko){return}var z=h(A.target);if((A.which==2||A.which==1&&A.ctrlKey)&&z.is("a[href]")){window.open(z.attr("href"),"_new")}},_mouseup:function(z){var y=this;if(p.support.mobileOS.ios&&z&&h(z.target).is(i)){return}if(y._selectionStarted){setTimeout(function(){y._selectionChange()},1)}},_runPostContentKeyCommands:function(D){var y=this.getRange();var C=this.keyboard.toolsFromShortcut(this.toolbar.tools,D);for(var A=0;A<C.length;A++){var z=C[A];var E=z.options;if(!E.keyPressCommand){continue}var B=new E.command({range:y});if(B.changesContent()){this.keyboard.endTyping(true);this.exec(z.name)}}},refresh:function(){var y=this;if(y.textarea){y._destroyResizings();y.textarea.val(y.value());y.wrapper.find("iframe").remove();y._initializeContentElement(y);y.value(y.textarea.val())}},events:["select","change","execute","error","paste","keydown","keyup"],options:{name:"Editor",messages:v,formats:{},encoded:true,domain:null,resizable:false,deserialization:{custom:null},serialization:{entities:true,semantic:true,scripts:false},pasteCleanup:{all:false,css:false,custom:null,keepNewLines:false,msAllFormatting:false,msConvertLists:true,msTags:true,none:false,span:false},stylesheets:[],dialogOptions:{modal:true,resizable:false,draggable:true,animation:false},imageBrowser:null,fileBrowser:null,fontName:[{text:"Arial",value:"Arial,Helvetica,sans-serif"},{text:"Courier New",value:"'Courier New',Courier,monospace"},{text:"Georgia",value:"Georgia,serif"},{text:"Impact",value:"Impact,Charcoal,sans-serif"},{text:"Lucida Console",value:"'Lucida Console',Monaco,monospace"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif"},{text:"Times New Roman",value:"'Times New Roman',Times,serif"},{text:"Trebuchet MS",value:"'Trebuchet MS',Helvetica,sans-serif"},{text:"Verdana",value:"Verdana,Geneva,sans-serif"}],fontSize:[{text:"1 (8pt)",value:"xx-small"},{text:"2 (10pt)",value:"x-small"},{text:"3 (12pt)",value:"small"},{text:"4 (14pt)",value:"medium"},{text:"5 (18pt)",value:"large"},{text:"6 (24pt)",value:"x-large"},{text:"7 (36pt)",value:"xx-large"}],formatBlock:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],tools:[].concat.call(["formatting"],c.basic,c.alignment,c.lists,c.indenting,c.links,["insertImage"],c.tables)},destroy:function(){var y=this;d.fn.destroy.call(this);this._endTyping(true);this._deregisterHandlers();clearTimeout(this._spellCorrectTimeout);this._focusOutside();this.toolbar.destroy();y._destroyUploadWidget();y._destroyResizings();p.destroy(this.wrapper)},_destroyResizings:function(){var y=this;y._destroyTableResizing();p.ui.editor.TableResizing.dispose(y);y._destroyRowResizing();p.ui.editor.RowResizing.dispose(y);y._destroyColumnResizing();p.ui.editor.ColumnResizing.dispose(y)},_focusOutside:function(){if(p.support.browser.msie&&this.textarea){var y=h("<input style='position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0' />").appendTo(document.body).focus();y.blur().remove()}},_destroyUploadWidget:function(){var y=this;if(y._uploadWidget){y._uploadWidget.destroy();y._uploadWidget=null}},state:function(C){var z=r.defaultTools[C];var D=z&&(z.options.finder||z.finder);var A=p.ui.editor.RangeUtils;var y,B;if(D){y=this.getRange();B=A.textNodes(y);if(!B.length&&y.collapsed){B=[y.startContainer]}return D.getFormat?D.getFormat(B):D.isFormatted(B)}return false},value:function(B){var y=this.body,C=p.ui.editor,A=this.options,z=C.Serializer.domToXhtml(y,A.serialization);if(B===j){return z}if(B==z){return}C.Serializer.htmlToDom(B,y,A.deserialization);this.selectionRestorePoint=null;this.update();this.toolbar.refreshTools()},saveSelection:function(A){A=A||this.getRange();var z=A.commonAncestorContainer,y=this.body;if(z==y||h.contains(y,z)){this.selectionRestorePoint=new p.ui.editor.RestorePoint(A,y)}},_focusBody:function(){var y=this.body;var z=this.wrapper&&this.wrapper.find("iframe")[0];var B=this.document.documentElement;var A=p._activeElement();var C;if(z){if(A!=y&&A!=z){C=B.scrollTop;y.focus();B.scrollTop=C}}else{C=y.scrollTop;y.focus();y.scrollTop=C}},restoreSelection:function(){this._focusBody();if(this.selectionRestorePoint){this.selectRange(this.selectionRestorePoint.toRange())}},focus:function(){this.restoreSelection()},update:function(y){y=y||this.options.encoded?this.encodedValue():this.value();if(this.textarea){this.textarea.val(y)}else{this._oldValue=y}},encodedValue:function(){return p.ui.editor.Dom.encode(this.value())},createRange:function(y){return p.ui.editor.RangeUtils.createRange(y||this.document)},getSelection:function(){return p.ui.editor.SelectionUtils.selectionFromDocument(this.document)},selectRange:function(y){this._focusBody();var z=this.getSelection();z.removeAllRanges();z.addRange(y);this.saveSelection(y)},getRange:function(){var z=this.getSelection(),y=z&&z.rangeCount>0?z.getRangeAt(0):this.createRange(),A=this.document;if(y.startContainer==A&&y.endContainer==A&&!y.startOffset&&!y.endOffset){y.setStart(this.body,0);y.collapse(true)}return y},_containsRange:function(z){var A=p.ui.editor.Dom;var y=this.body;return z&&A.isAncestorOrSelf(y,z.startContainer)&&A.isAncestorOrSelf(y,z.endContainer)},selectedHtml:function(){return p.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents())},paste:function(z,y){this.focus();var A=new p.ui.editor.InsertHtmlCommand(h.extend({range:this.getRange(),html:z},y));A.editor=this;A.exec()},exec:function(A,E){var B=this;var D=null;var y,z,C;if(!A){throw new Error("kendoEditor.exec(): `name` parameter cannot be empty")}if(B.body.getAttribute("contenteditable")!=="true"&&A!=="print"&&A!=="pdf"){return false}A=A.toLowerCase();if(!B.keyboard.isTypingInProgress()){B._focusBody();B.selectRange(B._range||B.getRange())}z=B.toolbar.toolById(A);if(!z){for(var F in r.defaultTools){if(F.toLowerCase()==A){z=r.defaultTools[F];break}}}if(z){y=B.getRange();if(z.command){D=z.command(u({range:y,body:B.body,immutables:!!B.immutables},E))}C=B.trigger("execute",{name:A,command:D});if(C){return}if(/^(undo|redo)$/i.test(A)){B.undoRedoStack[A]()}else{if(D){if(!D.managesUndoRedo){B.undoRedoStack.push(D)}D.editor=B;D.exec();if(D.async){D.change=s(B._selectionChange,B);return}}}B._selectionChange()}}});r.defaultTools={undo:{options:{key:"Z",ctrl:true}},redo:{options:{key:"Y",ctrl:true}}};p.ui.plugin(r);var l=t.extend({init:function(y){this.options=y},initialize:function(z,y){z.attr({unselectable:"on",title:y.title});z.children(".k-tool-text").html(y.title)},command:function(y){return new this.options.command(y)},update:h.noop});l.exec=function(z,y,A){z.exec(y,{value:A})};var g=l.extend({init:function(y){l.fn.init.call(this,y)},command:function(y){var z=this;return new p.ui.editor.FormatCommand(u(y,{formatter:z.options.formatter}))},update:function(A,z){var y=this.options.finder.isFormatted(z);A.toggleClass("k-state-selected",y);A.attr("aria-pressed",y)}});m.registerTool("separator",new l({template:new q({template:m.separatorTemplate})}));var x=w.msie&&w.version<9?"\uFEFF":"";var b="\uFEFF";var f=b;if(w.msie&&w.version==10){f="&nbsp;"}u(p.ui,{editor:{ToolTemplate:q,EditorUtils:m,Tool:l,FormatTool:g,_bomFill:x,emptyElementContent:b,emptyTableCellContent:f}});if(p.PDFMixin){p.PDFMixin.extend(r.prototype);r.prototype._drawPDF=function(){return p.drawing.drawDOM(this.body,this.options.pdf)};r.prototype.saveAsPDF=function(){var A=new h.Deferred();var B=A.promise();var z={promise:B};if(this.trigger("pdfExport",z)){return}var y=this.options.pdf;this._drawPDF(A).then(function(C){return p.drawing.exportPDF(C,y)}).done(function(C){p.saveAs({dataURI:C,fileName:y.fileName,proxyURL:y.proxyURL,forceProxy:y.forceProxy});A.resolve()}).fail(function(C){A.reject(C)});return B}}}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/dom",["editor/main"],a)}(function(){(function(j){var t=window.kendo,E=j.map,C=j.extend,D=t.support.browser,l="style",q="float",k="cssFloat",z="styleFloat",e="class",p="k-marker";function u(G){var I={},H,F;for(H=0,F=G.length;H<F;H++){I[G[H]]=true}return I}var o=u("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed".split(",")),v="div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption".split(","),i=v.concat(["ul","ol","li"]),m=u(i),r="span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby".split(","),h=u(r),g=u("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected".split(","));var y=function(F){if(F.nodeType==1){F.normalize()}};if(D.msie&&D.version>=8){y=function(F){if(F.nodeType==1&&F.firstChild){var H=F.firstChild,G=H;while(true){G=G.nextSibling;if(!G){break}if(G.nodeType==3&&H.nodeType==3){G.nodeValue=H.nodeValue+G.nodeValue;d.remove(H)}H=G}}}}var B=/^\s+$/,n=/^[\n\r\t]+$/,b=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i,w=/\ufeff/g,f=/^(\s+|\ufeff)$/,c,s=("color,padding-left,padding-right,padding-top,padding-bottom,background-color,background-attachment,background-image,background-position,background-repeat,border-top-style,border-top-width,border-top-color,border-bottom-style,border-bottom-width,border-bottom-color,border-left-style,border-left-width,border-left-color,border-right-style,border-right-width,border-right-color,font-family,font-size,font-style,font-variant,font-weight,line-height").split(","),a=/[<>\&]/g,A=/[\u00A0-\u2666<>\&]/g,x={34:"quot",38:"amp",39:"apos",60:"lt",62:"gt",160:"nbsp",161:"iexcl",162:"cent",163:"pound",164:"curren",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",175:"macr",176:"deg",177:"plusmn",178:"sup2",179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",215:"times",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",247:"divide",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",402:"fnof",913:"Alpha",914:"Beta",915:"Gamma",916:"Delta",917:"Epsilon",918:"Zeta",919:"Eta",920:"Theta",921:"Iota",922:"Kappa",923:"Lambda",924:"Mu",925:"Nu",926:"Xi",927:"Omicron",928:"Pi",929:"Rho",931:"Sigma",932:"Tau",933:"Upsilon",934:"Phi",935:"Chi",936:"Psi",937:"Omega",945:"alpha",946:"beta",947:"gamma",948:"delta",949:"epsilon",950:"zeta",951:"eta",952:"theta",953:"iota",954:"kappa",955:"lambda",956:"mu",957:"nu",958:"xi",959:"omicron",960:"pi",961:"rho",962:"sigmaf",963:"sigma",964:"tau",965:"upsilon",966:"phi",967:"chi",968:"psi",969:"omega",977:"thetasym",978:"upsih",982:"piv",8226:"bull",8230:"hellip",8242:"prime",8243:"Prime",8254:"oline",8260:"frasl",8472:"weierp",8465:"image",8476:"real",8482:"trade",8501:"alefsym",8592:"larr",8593:"uarr",8594:"rarr",8595:"darr",8596:"harr",8629:"crarr",8656:"lArr",8657:"uArr",8658:"rArr",8659:"dArr",8660:"hArr",8704:"forall",8706:"part",8707:"exist",8709:"empty",8711:"nabla",8712:"isin",8713:"notin",8715:"ni",8719:"prod",8721:"sum",8722:"minus",8727:"lowast",8730:"radic",8733:"prop",8734:"infin",8736:"ang",8743:"and",8744:"or",8745:"cap",8746:"cup",8747:"int",8756:"there4",8764:"sim",8773:"cong",8776:"asymp",8800:"ne",8801:"equiv",8804:"le",8805:"ge",8834:"sub",8835:"sup",8836:"nsub",8838:"sube",8839:"supe",8853:"oplus",8855:"otimes",8869:"perp",8901:"sdot",8968:"lceil",8969:"rceil",8970:"lfloor",8971:"rfloor",9001:"lang",9002:"rang",9674:"loz",9824:"spades",9827:"clubs",9829:"hearts",9830:"diams",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",710:"circ",732:"tilde",8194:"ensp",8195:"emsp",8201:"thinsp",8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8240:"permil",8249:"lsaquo",8250:"rsaquo",8364:"euro"};var d={block:m,inline:h,findNodeIndex:function(G,H){var F=0;if(!G){return -1}while(true){G=G.previousSibling;if(!G){break}if(!(H&&G.nodeType==3)){F++}}return F},isDataNode:function(F){return F&&F.nodeValue!==null&&F.data!==null},isAncestorOf:function(F,G){try{return !d.isDataNode(F)&&(j.contains(F,d.isDataNode(G)?G.parentNode:G)||G.parentNode==F)}catch(H){return false}},isAncestorOrSelf:function(F,G){return d.isAncestorOf(F,G)||F==G},findClosestAncestor:function(F,G){if(d.isAncestorOf(F,G)){while(G&&G.parentNode!=F){G=G.parentNode}}return G},getNodeLength:function(F){return d.isDataNode(F)?F.length:F.childNodes.length},splitDataNode:function(I,K){var G=I.cloneNode(false);var J="";var H=I.nextSibling;var F;while(H&&H.nodeType==3&&H.nodeValue){J+=H.nodeValue;F=H;H=H.nextSibling;d.remove(F)}I.deleteData(K,I.length);G.deleteData(0,K);G.nodeValue+=J;d.insertAfter(G,I)},attrEquals:function(H,F){for(var G in F){var I=H[G];if(G==q){I=H[t.support.cssFloat?k:z]}if(typeof I=="object"){if(!d.attrEquals(I,F[G])){return false}}else{if(I!=F[G]){return false}}}return true},blockParentOrBody:function(F){return d.parentOfType(F,i)||F.ownerDocument.body},blockParents:function(G){var J=[],H,F;for(H=0,F=G.length;H<F;H++){var I=d.parentOfType(G[H],d.blockElements);if(I&&j.inArray(I,J)<0){J.push(I)}}return J},windowFromDocument:function(F){return F.defaultView||F.parentWindow},normalize:y,blockElements:i,nonListBlockElements:v,inlineElements:r,empty:o,fillAttrs:g,nodeTypes:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},toHex:function(F){var G=b.exec(F);if(!G){return F}return"#"+E(G.slice(1),function(H){H=parseInt(H,10).toString(16);return H.length>1?H:"0"+H}).join("")},encode:function(H,F){var G=!F||F.entities?A:a;return H.replace(G,function(K){var I=K.charCodeAt(0);var J=x[I];return J?"&"+J+";":K})},isBom:function(F){return F&&F.nodeType===3&&/^[\ufeff]+$/.test(F.nodeValue)},stripBom:function(F){return(F||"").replace(w,"")},stripBomNode:function(F){if(d.isBom(F)){F.parentNode.removeChild(F)}},insignificant:function(G){var F=G.attributes;return G.className=="k-marker"||d.is(G,"br")&&(G.className=="k-br"||F._moz_dirty||F._moz_editor_bogus_node)},tableCell:function(F){return d.is(F,"td")||d.is(F,"th")},significantNodes:function(F){return j.grep(F,function(H){var G=d.name(H);if(G=="br"){return false}else{if(d.insignificant(H)){return false}else{if(d.emptyTextNode(H)){return false}else{if(H.nodeType==1&&!o[G]&&d.emptyNode(H)){return false}}}}return true})},emptyTextNode:function(F){return F&&F.nodeType==3&&f.test(F.nodeValue)},emptyNode:function(F){return F.nodeType==1&&!d.significantNodes(F.childNodes).length},name:function(F){return F.nodeName.toLowerCase()},significantChildNodes:function(F){return j.grep(F.childNodes,function(G){return G.nodeType!=3||!d.isWhitespace(G)})},lastTextNode:function(G){var F=null;if(G.nodeType==3){return G}for(var H=G.lastChild;H;H=H.previousSibling){F=d.lastTextNode(H);if(F){return F}}return F},is:function(F,G){return F&&d.name(F)==G},isMarker:function(F){return F.className==p},isWhitespace:function(F){return B.test(F.nodeValue)},allWhitespaceContent:function(F){var G=F.firstChild;while(G&&d.isWhitespace(G)){G=G.nextSibling}return !G},isEmptyspace:function(F){return n.test(F.nodeValue)},htmlIndentSpace:function(K){if(!(d.isDataNode(K)&&d.isWhitespace(K))){return false}if(n.test(K.nodeValue)){return true}var I=function(M,N){while(M[N]){M=M[N];if(d.significantNodes([M]).length>0){return M}}};var H=K.parentNode;var J=I(K,"previousSibling");var G=I(K,"nextSibling");if(w.test(K.nodeValue)){return !!(J||G)}if(j(H).is("tr,tbody,thead,tfoot,table,ol,ul")){return true}if(d.isBlock(H)||d.is(H,"body")){var F=J&&d.isBlock(J);var L=G&&d.isBlock(G);if(!G&&F||!J&&L||F&&L){return true}}return false},isBlock:function(F){return m[d.name(F)]},isEmpty:function(F){return o[d.name(F)]},isInline:function(F){return h[d.name(F)]},list:function(G){var F=G?d.name(G):"";return F=="ul"||F=="ol"||F=="dl"},scrollContainer:function(H){var G=d.windowFromDocument(H),F=(G.contentWindow||G).document||G.ownerDocument||G;if(t.support.browser.webkit||F.compatMode=="BackCompat"){F=F.body}else{F=F.documentElement}return F},scrollTo:function(K){var H=j(d.isDataNode(K)?K.parentNode:K),J=d.windowFromDocument(K.ownerDocument),L=J.innerHeight,F,I,G=d.scrollContainer(K.ownerDocument);F=H.offset().top;I=H[0].offsetHeight;if(!I){I=parseInt(H.css("line-height"),10)||Math.ceil(1.2*parseInt(H.css("font-size"),10))||15}if(I+F>G.scrollTop+L){G.scrollTop=I+F-L}},persistScrollTop:function(F){c=d.scrollContainer(F).scrollTop},offset:function(I,H){var F={top:I.offsetTop,left:I.offsetLeft};var G=I.offsetParent;while(G&&(!H||d.isAncestorOf(H,G))){F.top+=G.offsetTop;F.left+=G.offsetLeft;G=G.offsetParent}return F},restoreScrollTop:function(F){if(typeof c=="number"){d.scrollContainer(F).scrollTop=c}},insertAt:function(G,H,F){G.insertBefore(H,G.childNodes[F]||null)},insertBefore:function(G,F){if(F.parentNode){return F.parentNode.insertBefore(G,F)}else{return F}},insertAfter:function(G,F){return F.parentNode.insertBefore(G,F.nextSibling)},remove:function(F){F.parentNode.removeChild(F)},removeTextSiblings:function(G){var F=G.parentNode;while(G.nextSibling&&G.nextSibling.nodeType==3){F.removeChild(G.nextSibling)}while(G.previousSibling&&G.previousSibling.nodeType==3){F.removeChild(G.previousSibling)}},trim:function(G){for(var F=G.childNodes.length-1;F>=0;F--){var H=G.childNodes[F];if(d.isDataNode(H)){if(!d.stripBom(H.nodeValue).length){d.remove(H)}}else{if(H.className!=p){d.trim(H);if(H.childNodes.length===0||d.allWhitespaceContent(H)&&d.isBlock(H)&&!d.isEmpty(H)){d.remove(H)}}}}return G},closest:function(G,F){while(G&&d.name(G)!=F){G=G.parentNode}return G},closestBy:function(G,H,F){while(G&&!H(G)){if(F&&F(G)){return null}G=G.parentNode}return G},sibling:function(F,G){do{F=F[G]}while(F&&F.nodeType!=1);return F},next:function(F){return d.sibling(F,"nextSibling")},prev:function(F){return d.sibling(F,"previousSibling")},parentOfType:function(G,F){do{G=G.parentNode}while(G&&!d.ofType(G,F));return G},ofType:function(G,F){return j.inArray(d.name(G),F)>=0},changeTag:function(J,I,H){var M=d.create(J.ownerDocument,I),K=J.attributes,L,N,F,O,G;if(!H){for(L=0,N=K.length;L<N;L++){G=K[L];if(G.specified){F=G.nodeName;O=G.nodeValue;if(F==e){M.className=O}else{if(F==l){M.style.cssText=J.style.cssText}else{M.setAttribute(F,O)}}}}}while(J.firstChild){M.appendChild(J.firstChild)}d.insertBefore(M,J);d.remove(J);return M},editableParent:function(F){while(F&&(F.nodeType==3||F.contentEditable!=="true")){F=F.parentNode}return F},wrap:function(F,G){d.insertBefore(G,F);G.appendChild(F);return G},unwrap:function(G){var F=G.parentNode;while(G.firstChild){F.insertBefore(G.firstChild,G)}F.removeChild(G)},wrapper:function(F){var G=d.closestBy(F,function(H){return H.parentNode&&d.significantNodes(H.parentNode.childNodes).length>1});return j(G).is("body,.k-editor")?undefined:G},create:function(F,H,G){return d.attr(F.createElement(H),G)},attr:function(H,G){G=C({},G);if(G&&l in G){d.style(H,G.style);delete G.style}for(var F in G){if(G[F]===null){H.removeAttribute(F);delete G[F]}else{if(F=="className"){H[F]=G[F]}}}return C(H,G)},style:function(F,G){j(F).css(G||{})},unstyle:function(G,H){for(var F in H){if(F==q){F=t.support.cssFloat?k:z}G.style[F]=""}if(G.style.cssText===""){G.removeAttribute(l)}},inlineStyle:function(F,H,G){var J=j(d.create(F.ownerDocument,H,G)),I;F.appendChild(J[0]);I=E(s,function(K){if(D.msie&&K=="line-height"&&J.css(K)=="1px"){return"line-height:1.5"}else{return K+":"+J.css(K)}}).join(";");J.remove();return I},getEffectiveBackground:function(F){var G=F.css("background-color");if(G.indexOf("rgba(0, 0, 0, 0")<0&&G!=="transparent"){return G}else{if(F[0].tagName.toLowerCase()==="html"){return"Window"}else{return d.getEffectiveBackground(F.parent())}}},innerText:function(F){var G=F.innerHTML;G=G.replace(/<!--(.|\s)*?-->/gi,"");G=G.replace(/<\/?[^>]+?\/?>/gm,"");return G},removeClass:function(J,K){var I=" "+J.className+" ",H=K.split(" "),G,F;for(G=0,F=H.length;G<F;G++){I=I.replace(" "+H[G]+" "," ")}I=j.trim(I);if(I.length){J.className=I}else{J.removeAttribute(e)}},commonAncestor:function(){var L=arguments.length,M=[],F=Infinity,G=null,J,N,H,K,I;if(!L){return null}if(L==1){return arguments[0]}for(J=0;J<L;J++){N=[];H=arguments[J];while(H){N.push(H);H=H.parentNode}M.push(N.reverse());F=Math.min(F,N.length)}if(L==1){return M[0][0]}for(J=0;J<F;J++){K=M[0][J];for(I=1;I<L;I++){if(K!=M[I][J]){return G}}G=K}return G},closestSplittableParent:function(G){var F;if(G.length==1){F=d.parentOfType(G[0],["ul","ol"])}else{F=d.commonAncestor.apply(null,G)}if(!F){F=d.parentOfType(G[0],["p","td"])||G[0].ownerDocument.body}if(d.isInline(F)){F=d.blockParentOrBody(F)}var I=E(G,d.editableParent);var H=d.commonAncestor(I)[0];if(j.contains(F,H)){F=H}return F},closestEditable:function(I,G){var H;var F=d.editableParent(I);if(d.ofType(I,G)){H=I}else{H=d.parentOfType(I,G)}if(H&&F&&j.contains(H,F)){H=F}else{if(!H&&F){H=F}}return H},closestEditableOfType:function(H,G){var F=d.closestEditable(H,G);if(F&&d.ofType(F,G)){return F}},filter:function(G,F,I){var H=function(J){return d.name(J)==G};return d.filterBy(F,H,I)},filterBy:function(H,L,K){var J=0;var G=H.length;var F=[];var I;for(;J<G;J++){I=L(H[J]);if(I&&!K||!I&&K){F.push(H[J])}}return F},ensureTrailingBreaks:function(H){var I=j(H).find("p,td,th");var G=I.length;var F=0;if(G){for(;F<G;F++){d.ensureTrailingBreak(I[F])}}else{d.ensureTrailingBreak(H)}},removeTrailingBreak:function(F){j(F).find("br[type=_moz],.k-br").remove()},ensureTrailingBreak:function(I){d.removeTrailingBreak(I);var H=I.lastChild;var F=H&&d.name(H);var G;if(!F||F!="br"&&F!="img"||F=="br"&&H.className!="k-br"){G=I.ownerDocument.createElement("br");G.className="k-br";I.appendChild(G)}}};t.ui.editor.Dom=d}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/serializer",["editor/dom"],a)}(function(){(function(e,g){var m=window.kendo;var o=m.ui.editor;var q=o.Dom;var r=e.extend;var n="xx-small,x-small,small,medium,large,x-large,xx-large".split(",");var t=/"/g;var h=/<br[^>]*>/i;var d=/^\d+(\.\d*)?(px)?$/i;var p=/<p>(?:&nbsp;)?<\/p>/i;var j=/(\*?[-#\/\*\\\w]+(?:\[[0-9a-z_-]+\])?)\s*:\s*((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/g;var b=/^sizzle-\d+/i;var k=/^k-script-/i;var u=/\s*onerror\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/i;var s='<br class="k-br">';var l=document.createElement("div");l.innerHTML=" <hr>";var i=l.firstChild.nodeType===3;l=null;var a=e.isFunction;var c="td";var f={toEditableHtml:function(v){return(v||"").replace(/<!\[CDATA\[(.*)?\]\]>/g,"<!--[CDATA[$1]]-->").replace(/<(\/?)script([^>]*)>/gi,"<$1k:script$2>").replace(/<img([^>]*)>/gi,function(w){return w.replace(u,"")}).replace(/(<\/?img[^>]*>)[\r\n\v\f\t ]+/gi,"$1").replace(/^<(table|blockquote)/i,s+"<$1").replace(/^[\s]*(&nbsp;|\u00a0)/i,"$1").replace(/<\/(table|blockquote)>$/i,"</$1>"+s)},_toEditableImmutables:function(v){var z=o.Immutables.immutable,x=q.emptyTextNode,y=v.firstChild,w=v.lastChild;while(x(y)){y=y.nextSibling}while(x(w)){w=w.previousSibling}if(y&&z(y)){e(s).prependTo(v)}if(w&&z(w)){e(s).appendTo(v)}},_fillEmptyElements:function(v){e(v).find("p,td").each(function(){var x=e(this);if(/^\s*$/g.test(x.text())&&!x.find("img,input").length){var w=this;while(w.firstChild&&w.firstChild.nodeType!=3){w=w.firstChild}if(w.nodeType==1&&!q.empty[q.name(w)]){if(q.is(w,"td")){w.innerHTML=m.ui.editor.emptyTableCellContent}else{w.innerHTML=m.ui.editor.emptyElementContent}}}})},_removeSystemElements:function(v){e(".k-paste-container",v).remove()},_resetOrderedLists:function(v){var z=v.getElementsByTagName("ol"),y,w,x;for(y=0;y<z.length;y++){w=z[y];x=w.getAttribute("start");w.setAttribute("start",1);if(x){w.setAttribute("start",x)}else{w.removeAttribute(x)}}},_preventScriptExecution:function(v){e(v).find("*").each(function(){var x=this.attributes;var A,z,w,y;for(z=0,w=x.length;z<w;z++){A=x[z];y=A.nodeName;if(A.specified&&/^on/i.test(y)){this.setAttribute("k-script-"+y,A.value);this.removeAttribute(y)}}})},htmlToDom:function(x,C,E){var y=m.support.browser;var B=y.msie;var z=B&&y.version<9;var D="originalsrc";var A="originalhref";var v=E||{};var w=v.immutables;x=f.toEditableHtml(x);if(z){x="<br/>"+x;x=x.replace(/href\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,A+'="$1"');x=x.replace(/src\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,D+'="$1"')}if(a(v.custom)){x=v.custom(x)||x}C.innerHTML=x;if(w){w.deserialize(C)}if(z){q.remove(C.firstChild);e(C).find("k\\:script,script,link,img,a").each(function(){var F=this;if(F[A]){F.setAttribute("href",F[A]);F.removeAttribute(A)}if(F[D]){F.setAttribute("src",F[D]);F.removeAttribute(D)}})}else{if(B){q.normalize(C);f._resetOrderedLists(C)}}f._preventScriptExecution(C);f._fillEmptyElements(C);f._removeSystemElements(C);f._toEditableImmutables(C);e("table",C).addClass("k-table");return C},domToXhtml:function(E,J){var K=[];var A=J&&J.immutables;function v(L){return e.grep(L,function(M){return M.name!="style"})}var B={iframe:{start:function(L){K.push("<iframe");D(L);K.push(">")},end:function(){K.push("</iframe>")}},"k:script":{start:function(L){K.push("<script");D(L);K.push(">")},end:function(){K.push("<\/script>")},skipEncoding:true},span:{semantic:true,start:function(Q){var P=Q.style;var N=G(Q);var M=v(N);if(M.length){K.push("<span");D(Q,M);K.push(">")}if(P.textDecoration=="underline"){K.push("<u>")}var L=[];if(P.color){L.push('color="'+q.toHex(P.color)+'"')}if(P.fontFamily){L.push('face="'+P.fontFamily+'"')}if(P.fontSize){var O=e.inArray(P.fontSize,n);L.push('size="'+O+'"')}if(L.length){K.push("<font "+L.join(" ")+">")}},end:function(M){var L=M.style;if(L.color||L.fontFamily||L.fontSize){K.push("</font>")}if(L.textDecoration=="underline"){K.push("</u>")}if(v(G(M)).length){K.push("</span>")}}},strong:{semantic:true,start:function(){K.push("<b>")},end:function(){K.push("</b>")}},em:{semantic:true,start:function(){K.push("<i>")},end:function(){K.push("</i>")}},b:{semantic:false,start:function(){K.push("<strong>")},end:function(){K.push("</strong>")}},i:{semantic:false,start:function(){K.push("<em>")},end:function(){K.push("</em>")}},u:{semantic:false,start:function(){K.push('<span style="text-decoration:underline;">')},end:function(){K.push("</span>")}},font:{semantic:false,start:function(N){K.push('<span style="');var L=N.getAttribute("color");var M=n[N.getAttribute("size")];var O=N.getAttribute("face");if(L){K.push("color:");K.push(q.toHex(L));K.push(";")}if(O){K.push("font-family:");K.push(O);K.push(";")}if(M){K.push("font-size:");K.push(M);K.push(";")}K.push('">')},end:function(){K.push("</span>")}}};B.script=B["k:script"];J=J||{};if(typeof J.semantic=="undefined"){J.semantic=true}function I(P){var L=e.trim;var O=L(P);var M;var R,Q;var N=[];j.lastIndex=0;while(true){M=j.exec(O);if(!M){break}R=L(M[1].toLowerCase());Q=L(M[2]);if(R=="font-size-adjust"||R=="font-stretch"){continue}if(R.indexOf("color")>=0){Q=q.toHex(Q)}else{if(R.indexOf("font")>=0){Q=Q.replace(t,"'")}else{if(/\burl\(/g.test(Q)){Q=Q.replace(t,"")}}}N.push({property:R,value:Q})}return N}function F(N){var M=I(N);var L;for(L=0;L<M.length;L++){K.push(M[L].property);K.push(":");K.push(M[L].value);K.push(";")}}function G(N){var T=[];var P=N.attributes;var M,Q,O;var L,S,R;for(Q=0,O=P.length;Q<O;Q++){M=P[Q];L=M.nodeName;S=M.value;R=M.specified;if(L=="value"&&"value" in N&&N.value){R=true}else{if(L=="type"&&S=="text"){R=true}else{if(L=="class"&&!S){R=false}else{if(b.test(L)){R=false}else{if(L=="complete"){R=false}else{if(L=="altHtml"){R=false}else{if(L=="start"&&q.is(N,"ul")){R=false}else{if(L=="start"&&q.is(N,"ol")&&S=="1"){R=false}else{if(L.indexOf("_moz")>=0){R=false}else{if(k.test(L)){R=!!J.scripts}else{if(L=="data-role"&&S=="resizable"&&(q.is(N,"tr")||q.is(N,"td"))){R=false}}}}}}}}}}}if(R){T.push(M)}}return T}function D(P,R){var S,Q,O,L,T;R=R||G(P);if(q.is(P,"img")){var N=P.style.width,U=P.style.height,M=e(P);if(N&&d.test(N)){M.attr("width",parseInt(N,10));q.unstyle(P,{width:g})}if(U&&d.test(U)){M.attr("height",parseInt(U,10));q.unstyle(P,{height:g})}}if(!R.length){return}R.sort(function(W,V){return W.nodeName>V.nodeName?1:W.nodeName<V.nodeName?-1:0});for(S=0,Q=R.length;S<Q;S++){O=R[S];L=O.nodeName;T=O.value;if(L=="class"&&T=="k-table"){continue}L=L.replace(k,"");K.push(" ");K.push(L);K.push('="');if(L=="style"){F(T||P.style.cssText)}else{if(L=="src"||L=="href"){K.push(m.htmlEncode(P.getAttribute(L,2)))}else{K.push(q.fillAttrs[L]?L:T)}}K.push('"')}}function y(O,N,L){for(var M=O.firstChild;M;M=M.nextSibling){x(M,N,L)}}function H(L){return L.nodeValue.replace(/\ufeff/g,"")}function C(L){if(L.nodeValue==="\uFEFF"){do{L=L.parentNode;if(q.is(L,c)&&L.childNodes.length===1){return true}if(L.childNodes.length!==1){return false}}while(!q.isBlock(L));return true}return false}function x(N,U,Q){var P=N.nodeType,M,L,T,S,R,O;if(A&&o.Immutables.immutable(N)){K.push(A.serialize(N))}else{if(P==1){M=q.name(N);O=e(N);if(O.hasClass("k-table-resize-handle-wrapper")||O.hasClass("k-column-resize-handle-wrapper")||O.hasClass("k-row-resize-handle-wrapper")){return}if(!M||q.insignificant(N)){return}if(!J.scripts&&(M=="script"||M=="k:script")){return}L=B[M];if(L){if(typeof L.semantic=="undefined"||J.semantic^L.semantic){L.start(N);y(N,false,L.skipEncoding);L.end(N);return}}K.push("<");K.push(M);D(N);if(q.empty[M]){K.push(" />")}else{K.push(">");y(N,U||q.is(N,"pre"));K.push("</");K.push(M);K.push(">")}}else{if(P==3){if(C(N)){K.push("&nbsp;");return}S=H(N);if(!U&&i){T=N.parentNode;R=N.previousSibling;if(!R){R=(q.isInline(T)?T:N).previousSibling}if(!R||R.innerHTML===""||q.isBlock(R)){S=S.replace(/^[\r\n\v\f\t ]+/,"")}S=S.replace(/ +/," ")}K.push(Q?S:q.encode(S,J))}else{if(P==4){K.push("<![CDATA[");K.push(N.data);K.push("]]>")}else{if(P==8){if(N.data.indexOf("[CDATA[")<0){K.push("<!--");K.push(N.data);K.push("-->")}else{K.push("<!");K.push(N.data);K.push(">")}}}}}}}function w(L){var N=L.childNodes.length;var M=N&&L.firstChild.nodeType==3;return M&&(N==1||N==2&&q.insignificant(L.lastChild))}function z(){if(e.isFunction(J.custom)){K=J.custom(K)||K}}if(w(E)){K=q.encode(H(E.firstChild).replace(/[\r\n\v\f\t ]+/," "),J);z();return K}y(E);K=K.join("");z();if(K.replace(h,"").replace(p,"")===""){return""}return K}};r(o,{Serializer:f})}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/range",["editor/serializer"],a)}(function(){(function(e){var m=window.kendo,t=m.Class,u=e.extend,n=m.ui.editor,A=m.support.browser,s=n.Dom,b=s.findNodeIndex,B=s.isDataNode,l=s.findClosestAncestor,c=s.getNodeLength,p=s.normalize;var q={selectionFromWindow:function(D){if(!("getSelection" in D)){return new y(D.document)}return D.getSelection()},selectionFromRange:function(D){var E=z.documentFromRange(D);return q.selectionFromDocument(E)},selectionFromDocument:function(D){return q.selectionFromWindow(s.windowFromDocument(D))}};var C=t.extend({init:function(D){e.extend(this,{ownerDocument:D,startContainer:D,endContainer:D,commonAncestorContainer:D,startOffset:0,endOffset:0,collapsed:true})},setStart:function(D,E){this.startContainer=D;this.startOffset=E;a(this);g(this,true)},setEnd:function(D,E){this.endContainer=D;this.endOffset=E;a(this);g(this,false)},setStartBefore:function(D){this.setStart(D.parentNode,b(D))},setStartAfter:function(D){this.setStart(D.parentNode,b(D)+1)},setEndBefore:function(D){this.setEnd(D.parentNode,b(D))},setEndAfter:function(D){this.setEnd(D.parentNode,b(D)+1)},selectNode:function(D){this.setStartBefore(D);this.setEndAfter(D)},selectNodeContents:function(D){this.setStart(D,0);this.setEnd(D,D[D.nodeType===1?"childNodes":"nodeValue"].length)},collapse:function(D){var E=this;if(D){E.setEnd(E.startContainer,E.startOffset)}else{E.setStart(E.endContainer,E.endOffset)}},deleteContents:function(){var E=this,D=E.cloneRange();if(E.startContainer!=E.commonAncestorContainer){E.setStartAfter(l(E.commonAncestorContainer,E.startContainer))}E.collapse(true);(function F(G){while(G.next()){if(G.hasPartialSubtree()){F(G.getSubtreeIterator())}else{G.remove()}}}(new o(D)))},cloneContents:function(){var E=z.documentFromRange(this);return function D(F){var G,H=E.createDocumentFragment();while(G=F.next()){G=G.cloneNode(!F.hasPartialSubtree());if(F.hasPartialSubtree()){G.appendChild(D(F.getSubtreeIterator()))}H.appendChild(G)}return H}(new o(this))},extractContents:function(){var G=this,E=G.cloneRange();if(G.startContainer!=G.commonAncestorContainer){G.setStartAfter(l(G.commonAncestorContainer,G.startContainer))}G.collapse(true);var D=z.documentFromRange(G);return function F(H){var I,J=D.createDocumentFragment();while(I=H.next()){if(H.hasPartialSubtree()){I=I.cloneNode(false);I.appendChild(F(H.getSubtreeIterator()))}else{H.remove(G.originalRange)}J.appendChild(I)}return J}(new o(E))},insertNode:function(E){var D=this;if(B(D.startContainer)){if(D.startOffset!=D.startContainer.nodeValue.length){s.splitDataNode(D.startContainer,D.startOffset)}s.insertAfter(E,D.startContainer)}else{s.insertAt(D.startContainer,E,D.startOffset)}D.setStart(D.startContainer,D.startOffset)},cloneRange:function(){return e.extend(new C(this.ownerDocument),{startContainer:this.startContainer,endContainer:this.endContainer,commonAncestorContainer:this.commonAncestorContainer,startOffset:this.startOffset,endOffset:this.endOffset,collapsed:this.collapsed,originalRange:this})},toString:function(){var D=this.startContainer.nodeName,E=this.endContainer.nodeName;return[D=="#text"?this.startContainer.nodeValue:D,"(",this.startOffset,") : ",E=="#text"?this.endContainer.nodeValue:E,"(",this.endOffset,")"].join("")}});C.fromNode=function(D){return new C(D.ownerDocument)};function k(K,G,D,H){if(K==G){return H-D}var F=G;while(F&&F.parentNode!=K){F=F.parentNode}if(F){return b(F)-D}F=K;while(F&&F.parentNode!=G){F=F.parentNode}if(F){return H-b(F)-1}var E=s.commonAncestor(K,G);var I=K;while(I&&I.parentNode!=E){I=I.parentNode}if(!I){I=E}var J=G;while(J&&J.parentNode!=E){J=J.parentNode}if(!J){J=E}if(I==J){return 0}return b(J)-b(I)}function g(E,F){function D(G){try{return k(G.startContainer,G.endContainer,G.startOffset,G.endOffset)<0}catch(H){return true}}if(D(E)){if(F){E.commonAncestorContainer=E.endContainer=E.startContainer;E.endOffset=E.startOffset}else{E.commonAncestorContainer=E.startContainer=E.endContainer;E.startOffset=E.endOffset}E.collapsed=true}}function a(D){D.collapsed=D.startContainer==D.endContainer&&D.startOffset==D.endOffset;var E=D.startContainer;while(E&&E!=D.endContainer&&!s.isAncestorOf(E,D.endContainer)){E=E.parentNode}D.commonAncestorContainer=E}var o=t.extend({init:function(E){e.extend(this,{range:E,_current:null,_next:null,_end:null});if(E.collapsed){return}var D=E.commonAncestorContainer;this._next=E.startContainer==D&&!B(E.startContainer)?E.startContainer.childNodes[E.startOffset]:l(D,E.startContainer);this._end=E.endContainer==D&&!B(E.endContainer)?E.endContainer.childNodes[E.endOffset]:l(D,E.endContainer).nextSibling},hasNext:function(){return !!this._next},next:function(){var D=this,E=D._current=D._next;D._next=D._current&&D._current.nextSibling!=D._end?D._current.nextSibling:null;if(B(D._current)){if(D.range.endContainer==D._current){E=E.cloneNode(true);E.deleteData(D.range.endOffset,E.length-D.range.endOffset)}if(D.range.startContainer==D._current){E=E.cloneNode(true);E.deleteData(0,D.range.startOffset)}}return E},traverse:function(G){var E=this,F;function D(){E._current=E._next;E._next=E._current&&E._current.nextSibling!=E._end?E._current.nextSibling:null;return E._current}while(F=D()){if(E.hasPartialSubtree()){E.getSubtreeIterator().traverse(G)}else{G(F)}}return F},remove:function(G){var H=this,I=H.range.startContainer==H._current,L=H.range.endContainer==H._current,D,F,K;if(B(H._current)&&(I||L)){D=I?H.range.startOffset:0;F=L?H.range.endOffset:H._current.length;K=F-D;if(G&&(I||L)){if(H._current==G.startContainer&&D<=G.startOffset){G.startOffset-=K}if(H._current==G.endContainer&&F<=G.endOffset){G.endOffset-=K}}H._current.deleteData(D,K)}else{var J=H._current.parentNode;if(G&&(H.range.startContainer==J||H.range.endContainer==J)){var E=b(H._current);if(J==G.startContainer&&E<=G.startOffset){G.startOffset-=1}if(J==G.endContainer&&E<G.endOffset){G.endOffset-=1}}s.remove(H._current)}},hasPartialSubtree:function(){return !B(this._current)&&(s.isAncestorOrSelf(this._current,this.range.startContainer)||s.isAncestorOrSelf(this._current,this.range.endContainer))},getSubtreeIterator:function(){return new o(this.getSubRange())},getSubRange:function(){var E=this,D=E.range.cloneRange();D.selectNodeContents(E._current);if(s.isAncestorOrSelf(E._current,E.range.startContainer)){D.setStart(E.range.startContainer,E.range.startOffset)}if(s.isAncestorOrSelf(E._current,E.range.endContainer)){D.setEnd(E.range.endContainer,E.range.endOffset)}return D}});var y=t.extend({init:function(D){this.ownerDocument=D;this.rangeCount=1},addRange:function(D){var E=this.ownerDocument.body.createTextRange();h(E,D,false);h(E,D,true);E.select()},removeAllRanges:function(){var D=this.ownerDocument.selection;if(D.type!="None"){D.empty()}},getRangeAt:function(){var N,G=new C(this.ownerDocument),J=this.ownerDocument.selection,F,K;try{N=J.createRange();F=N.item?N.item(0):N.parentElement();if(F.ownerDocument!=this.ownerDocument){return G}}catch(I){return G}if(J.type=="Control"){G.selectNode(N.item(0))}else{K=j(N);w(N,G,K,true);w(N,G,K,false);if(G.startContainer.nodeType==9){G.setStart(G.endContainer,G.startOffset)}if(G.endContainer.nodeType==9){G.setEnd(G.startContainer,G.endOffset)}if(N.compareEndPoints("StartToEnd",N)===0){G.collapse(false)}var E=G.startContainer,M=G.endContainer,H=this.ownerDocument.body;if(!G.collapsed&&G.startOffset===0&&G.endOffset==c(G.endContainer)&&!(E==M&&B(E)&&E.parentNode==H)){var L=false,D=false;while(b(E)===0&&E==E.parentNode.firstChild&&E!=H){E=E.parentNode;L=true}while(b(M)==c(M.parentNode)-1&&M==M.parentNode.lastChild&&M!=H){M=M.parentNode;D=true}if(E==H&&M==H&&L&&D){G.setStart(E,0);G.setEnd(M,c(H))}}}return G}});function j(E){var F=E.duplicate(),D=E.duplicate();F.collapse(true);D.collapse(false);return s.commonAncestor(E.parentElement(),F.parentElement(),D.parentElement())}function h(O,I,F){var E=I[F?"startContainer":"endContainer"],H=I[F?"startOffset":"endOffset"],G=0,N=B(E),L=N?E:E.childNodes[H]||null,J=N?E.parentNode:E,K=I.ownerDocument,M=K.body.createTextRange(),D;if(E.nodeType==3||E.nodeType==4){G=H}if(!J){J=K.body}if(J.nodeName.toLowerCase()=="img"){M.moveToElementText(J);M.collapse(false);O.setEndPoint(F?"StartToStart":"EndToStart",M)}else{D=J.insertBefore(s.create(K,"a"),L);M.moveToElementText(D);s.remove(D);M[F?"moveStart":"moveEnd"]("character",G);M.collapse(false);O.setEndPoint(F?"StartToStart":"EndToStart",M)}}function w(Q,H,N,E){var D=s.create(H.ownerDocument,"a"),O=Q.duplicate(),P=E?"StartToStart":"StartToEnd",R,M,K,I,G,L,J,F=false;D.innerHTML="\uFEFF";O.collapse(E);M=O.parentElement();if(!s.isAncestorOrSelf(N,M)){M=N}do{if(F){M.insertBefore(D,D.previousSibling)}else{M.appendChild(D);F=true}O.moveToElementText(D)}while((R=O.compareEndPoints(P,Q))>0&&D.previousSibling);K=D.nextSibling;if(R==-1&&B(K)){O.setEndPoint(E?"EndToStart":"EndToEnd",Q);s.remove(D);L=[K,O.text.length]}else{I=!E&&D.previousSibling;G=E&&D.nextSibling;if(B(G)){L=[G,0]}else{if(B(I)){L=[I,I.length]}else{J=b(D);if(M.nextSibling&&J==M.childNodes.length-1){L=[M.nextSibling,0]}else{L=[M,J]}}}s.remove(D)}H[E?"setStart":"setEnd"].apply(H,L)}var v=t.extend({init:function(D){this.enumerate=function(){var E=[];function F(G){if(s.is(G,"img")||G.nodeType==3&&(!s.isEmptyspace(G)||G.nodeValue=="\uFEFF")){E.push(G)}else{G=G.firstChild;while(G){F(G);G=G.nextSibling}}}new o(D).traverse(F);return E}}});var i=o.extend({hasPartialSubtree:function(){var D=n.Immutables&&n.Immutables.immutable;return D&&!D(this._current)&&o.fn.hasPartialSubtree.call(this)},getSubtreeIterator:function(){return new i(this.getSubRange())}});var d=t.extend({init:function(D){this.enumerate=function(){var E=[];var G=n.Immutables&&n.Immutables.immutable;function F(H){if(G&&!G(H)){if(s.is(H,"img")||H.nodeType==3&&(!s.isEmptyspace(H)||H.nodeValue=="\uFEFF")){E.push(H)}else{H=H.firstChild;while(H){F(H);H=H.nextSibling}}}}new i(D).traverse(F);return E}}});var x=t.extend({init:function(E,D,F){var G=this;G.range=E;G.rootNode=z.documentFromRange(E);G.body=D||G.getEditable(E);if(s.name(G.body)!="body"){G.rootNode=G.body}G.startContainer=G.nodeToPath(E.startContainer);G.endContainer=G.nodeToPath(E.endContainer);G.startOffset=G.offset(E.startContainer,E.startOffset);G.endOffset=G.offset(E.endContainer,E.endOffset);G.immutables=F&&F.immutables;if(G.immutables){G.serializedImmutables=n.Immutables.removeImmutables(G.body)}G.html=G.body.innerHTML;if(G.immutables&&!G.serializedImmutables.empty){n.Immutables.restoreImmutables(G.body,G.serializedImmutables)}},index:function(G){var D=0,F=G.nodeType;while(G=G.previousSibling){var E=G.nodeType;if(E!=3||F!=E){D++}F=E}return D},getEditable:function(E){var D=E.commonAncestorContainer;while(D&&(D.nodeType==3||D.attributes&&(!D.attributes.contentEditable||D.attributes.contentEditable.nodeValue.toLowerCase()=="false"))){D=D.parentNode}return D},restoreHtml:function(){var D=this;D.body.innerHTML=D.html;if(D.immutables&&!D.serializedImmutables.empty){n.Immutables.restoreImmutables(D.body,D.serializedImmutables)}},offset:function(D,E){if(D.nodeType==3){while((D=D.previousSibling)&&D.nodeType==3){E+=D.nodeValue.length}}return E},nodeToPath:function(D){var E=[];while(D!=this.rootNode){E.push(this.index(D));D=D.parentNode}return E},toRangePoint:function(D,J,H,G){var F=this.rootNode,E=H.length,I=G;while(E--){F=F.childNodes[H[E]]}while(F&&F.nodeType==3&&F.nodeValue.length<I){I-=F.nodeValue.length;F=F.nextSibling}if(F&&I>=0){D[J?"setStart":"setEnd"](F,I)}},toRange:function(){var E=this,D=E.range.cloneRange();E.toRangePoint(D,true,E.startContainer,E.startOffset);E.toRangePoint(D,false,E.endContainer,E.endOffset);return D}});var f=t.extend({init:function(){this.caret=null},addCaret:function(D){var E=this;var F=E.caret=s.create(z.documentFromRange(D),"span",{className:"k-marker"});D.insertNode(F);s.stripBomNode(F.previousSibling);s.stripBomNode(F.nextSibling);D.selectNode(F);return F},removeCaret:function(F){var J=this,I=J.caret.previousSibling,D=0;if(I){D=B(I)?I.nodeValue.length:b(I)}var E=J.caret.parentNode;var G=I?b(I):0;s.remove(J.caret);p(E);var H=E.childNodes[G];if(B(H)){F.setStart(H,D)}else{if(H){var K=s.lastTextNode(H);if(K){F.setStart(K,K.nodeValue.length)}else{F[I?"setStartAfter":"setStartBefore"](H)}}else{if(!A.msie&&!E.innerHTML){E.innerHTML='<br _moz_dirty="" />'}F.selectNodeContents(E)}}F.collapse(true)},add:function(D,E){var H=this;var J=D.collapsed&&!z.isExpandable(D);var I=z.documentFromRange(D);if(E&&D.collapsed){H.addCaret(D);D=z.expand(D)}var G=D.cloneRange();G.collapse(false);H.end=s.create(I,"span",{className:"k-marker"});G.insertNode(H.end);G=D.cloneRange();G.collapse(true);H.start=H.end.cloneNode(true);G.insertNode(H.start);H._removeDeadMarkers(H.start,H.end);if(J){var F=I.createTextNode("\uFEFF");s.insertAfter(F.cloneNode(),H.start);s.insertBefore(F,H.end)}p(D.commonAncestorContainer);D.setStartBefore(H.start);D.setEndAfter(H.end);return D},_removeDeadMarkers:function(E,D){if(E.previousSibling&&E.previousSibling.nodeValue=="\uFEFF"){s.remove(E.previousSibling)}if(D.nextSibling&&D.nextSibling.nodeValue=="\uFEFF"){s.remove(D.nextSibling)}},_normalizedIndex:function(E){var D=b(E);var F=E;while(F.previousSibling){if(F.nodeType==3&&F.previousSibling.nodeType==3){D--}F=F.previousSibling}return D},remove:function(N){var O=this,H=O.start,K=O.end,I,E,D;p(N.commonAncestorContainer);while(!H.nextSibling&&H.parentNode){H=H.parentNode}while(!K.previousSibling&&K.parentNode){K=K.parentNode}I=H.previousSibling&&H.previousSibling.nodeType==3&&(H.nextSibling&&H.nextSibling.nodeType==3);E=K.previousSibling&&K.previousSibling.nodeType==3&&(K.nextSibling&&K.nextSibling.nodeType==3);D=I&&E;H=H.nextSibling;K=K.previousSibling;var L=false;var J=false;if(H==O.end){J=!!O.start.previousSibling;H=K=O.start.previousSibling||O.end.nextSibling;L=true}s.remove(O.start);s.remove(O.end);if(!H||!K){N.selectNodeContents(N.commonAncestorContainer);N.collapse(true);return}var P=L?B(H)?H.nodeValue.length:H.childNodes.length:0;var Q=B(K)?K.nodeValue.length:K.childNodes.length;if(H.nodeType==3){while(H.previousSibling&&H.previousSibling.nodeType==3){H=H.previousSibling;P+=H.nodeValue.length}}if(K.nodeType==3){while(K.previousSibling&&K.previousSibling.nodeType==3){K=K.previousSibling;Q+=K.nodeValue.length}}var F=H.parentNode;var G=K.parentNode;var R=this._normalizedIndex(H);var M=this._normalizedIndex(K);p(F);if(H.nodeType==3){H=F.childNodes[R]}p(G);if(K.nodeType==3){K=G.childNodes[M]}if(L){if(H.nodeType==3){N.setStart(H,P)}else{N[J?"setStartAfter":"setStartBefore"](H)}N.collapse(true)}else{if(H.nodeType==3){N.setStart(H,P)}else{N.setStartBefore(H)}if(K.nodeType==3){N.setEnd(K,Q)}else{N.setEndAfter(K)}}if(O.caret){O.removeCaret(N)}}});var r=/[\u0009-\u000d]|\u0020|\u00a0|\ufeff|\.|,|;|:|!|\(|\)|\?/;var z={nodes:function(E){var D=z.textNodes(E);if(!D.length){E.selectNodeContents(E.commonAncestorContainer);D=z.textNodes(E);if(!D.length){D=s.significantChildNodes(E.commonAncestorContainer)}}return D},textNodes:function(D){return new v(D).enumerate()},editableTextNodes:function(E){var D=[],F=n.Immutables&&n.Immutables.immutableParent;if(F&&!F(E.commonAncestorContainer)){D=new d(E).enumerate()}return D},documentFromRange:function(D){var E=D.startContainer;return E.nodeType==9?E:E.ownerDocument},createRange:function(D){if(A.msie&&A.version<9){return new C(D)}return D.createRange()},selectRange:function(D){var F=z.image(D);if(F){D.setStartAfter(F);D.setEndAfter(F)}var E=q.selectionFromRange(D);E.removeAllRanges();E.addRange(D)},stringify:function(D){return m.format("{0}:{1} - {2}:{3}",s.name(D.startContainer),D.startOffset,s.name(D.endContainer),D.endOffset)},split:function(E,G,D){function F(J){var I=E.cloneRange();I.collapse(J);I[J?"setStartBefore":"setEndAfter"](G);var H=I.extractContents();if(D){H=s.trim(H)}s[J?"insertBefore":"insertAfter"](H,G)}F(true);F(false)},mapAll:function(E,F){var D=[];new o(E).traverse(function(H){var G=F(H);if(G&&e.inArray(G,D)<0){D.push(G)}});return D},getAll:function(F,E){var D=E;if(typeof E=="string"){E=function(G){return s.is(G,D)}}return z.mapAll(F,function(G){if(E(G)){return G}})},getMarkers:function(D){return z.getAll(D,function(E){return E.className=="k-marker"})},image:function(E){var D=z.getAll(E,"img");if(D.length==1){return D[0]}},isStartOf:function(H,G){if(H.startOffset!==0){return false}var D=H.cloneRange();while(D.startOffset===0&&D.startContainer!=G){var E=s.findNodeIndex(D.startContainer);var F=D.startContainer.parentNode;while(E>0&&F[E-1]&&s.insignificant(F[E-1])){E--}D.setStart(F,E)}return D.startOffset===0&&D.startContainer==G},isEndOf:function(H,G){var E=H.cloneRange();E.collapse(false);var I=E.startContainer;if(s.isDataNode(I)&&E.startOffset==s.getNodeLength(I)){E.setStart(I.parentNode,s.findNodeIndex(I)+1);E.collapse(true)}E.setEnd(G,s.getNodeLength(G));var D=[];function F(J){if(!s.insignificant(J)){D.push(J)}}new o(E).traverse(F);return !D.length},wrapSelectedElements:function(E){var G=s.editableParent(E.startContainer);var D=s.editableParent(E.endContainer);while(E.startOffset===0&&E.startContainer!=G){E.setStart(E.startContainer.parentNode,s.findNodeIndex(E.startContainer))}function F(K,H){var J=s.getNodeLength(H);if(K==J){return true}for(var I=K;I<J;I++){if(!s.insignificant(H.childNodes[I])){return false}}return true}while(F(E.endOffset,E.endContainer)&&E.endContainer!=D){E.setEnd(E.endContainer.parentNode,s.findNodeIndex(E.endContainer)+1)}return E},expand:function(G){var F=G.cloneRange();var I=F.startContainer.childNodes[F.startOffset===0?0:F.startOffset-1];var K=F.endContainer.childNodes[F.endOffset];if(!B(I)||!B(K)){return F}var J=I.nodeValue;var E=K.nodeValue;if(!J||!E){return F}var D=J.split("").reverse().join("").search(r);var H=E.search(r);if(!D||!H){return F}H=H==-1?E.length:H;D=D==-1?0:J.length-D;F.setStart(I,D);F.setEnd(K,H);return F},isExpandable:function(H){var E=H.startContainer;var D=z.documentFromRange(H);if(E==D||E==D.body){return false}var L=H.cloneRange();var K=E.nodeValue;if(!K){return false}var F=K.substring(0,L.startOffset);var G=K.substring(L.startOffset);var I=0,J=0;if(F){I=F.split("").reverse().join("").search(r)}if(G){J=G.search(r)}return I&&J}};u(n,{SelectionUtils:q,W3CRange:C,RangeIterator:o,W3CSelection:y,RangeEnumerator:v,RestorePoint:x,Marker:f,RangeUtils:z})}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/system",["editor/range"],a)}(function(){(function(M){var P=window.kendo,a=P.Class,O=P.ui.editor,L=O.EditorUtils,g=O.RangeUtils,j=L.registerTool,b=O.Dom,u=O.Tool,A=O.ToolTemplate,c=O.RestorePoint,B=O.Marker,f=P.support.browser,V='<br class="k-br">',r=M.extend;var E=b.nodeTypes;var s="previousSibling";function T(aa,Z){var Y=aa.selectionRestorePoint=new c(aa.getRange(),aa.body);var ab=new w(Z,Y);ab.editor=aa;aa.undoRedoStack.push(ab);return Y}function G(Z,Y){return Y.startContainer===Z&&Y.endContainer===Z&&Y.startOffset===0&&Y.endOffset==Z.childNodes.length}function t(Z,aa,ab){var Y=Z?Z[aa]:null;while(Y&&!ab(Y)){Y=Y[aa]}return Y}var l=a.extend({init:function(Y){this.options=Y;this.restorePoint=new c(Y.range,Y.body,{immutables:Y.immutables});this.marker=new B();this.formatter=Y.formatter},getRange:function(){return this.restorePoint.toRange()},lockRange:function(Y){return this.marker.add(this.getRange(),Y)},releaseRange:function(Y){this.marker.remove(Y);this.editor.selectRange(Y)},undo:function(){var Y=this.restorePoint;Y.restoreHtml();this.editor.selectRange(Y.toRange())},redo:function(){this.exec()},createDialog:function(aa,Y){var Z=this.editor;return M(aa).appendTo(document.body).kendoWindow(r({},Z.options.dialogOptions,Y)).closest(".k-window").toggleClass("k-rtl",P.support.isRtl(Z.wrapper)).end()},exec:function(){var Y=this.lockRange(true);this.formatter.editor=this.editor;this.formatter.toggle(Y);this.releaseRange(Y)},immutables:function(){return this.editor&&this.editor.options.immutables},expandImmutablesIn:function(Y){if(this.immutables()){P.ui.editor.Immutables.expandImmutablesIn(Y);this.restorePoint=new c(Y,this.editor.body)}}});var w=a.extend({init:function(Z,Y){this.body=Z.body;this.startRestorePoint=Z;this.endRestorePoint=Y},redo:function(){this.body.innerHTML=this.endRestorePoint.html;this.editor.selectRange(this.endRestorePoint.toRange())},undo:function(){this.body.innerHTML=this.startRestorePoint.html;this.editor.selectRange(this.startRestorePoint.toRange())}});var v=l.extend({init:function(Y){l.fn.init.call(this,Y);this.managesUndoRedo=true},exec:function(){var ae=this.editor;var ac=this.options;var aa=ac.range;var Y=ae.body;var ab=new c(aa,Y);var ad=ac.html||ac.value||"";ae.selectRange(aa);ae.clipboard.paste(ad,ac);if(ac.postProcess){ac.postProcess(ae,ae.getRange())}var Z=new w(ab,new c(ae.getRange(),Y));Z.editor=ae;ae.undoRedoStack.push(Z);ae.focus()}});var z=u.extend({initialize:function(ab,aa){var Z=aa.editor,Y=this.options,ac=Y.items?Y.items:Z.options.insertHtml;this._selectBox=new O.SelectBox(ab,{dataSource:ac,dataTextField:"text",dataValueField:"value",change:function(){u.exec(Z,"insertHtml",this.value())},title:Z.options.messages.insertHtml,highlightFirst:false})},command:function(Y){return new v(Y)},update:function(Z){var Y=Z.data("kendoSelectBox")||Z.find("select").data("kendoSelectBox");Y.close();Y.value(Y.options.title)}});var Q="td,th,caption";var F="table,tbody,thead,tfoot,tr";var C=F+","+Q;var m=function(Y){return !Y.collapsed&&M(Y.commonAncestorContainer).is(F)};var e=a.extend({remove:function(ae){var af=this;var ad=new B();ad.add(ae,false);var Y=g.getAll(ae,function(ai){return M(ai).is(C)});var ah=g.documentFromRange(ae);var aa=ad.start;var ac=ad.end;var ab=Q.split(",");var ag=b.parentOfType(aa,ab);var Z=b.parentOfType(ac,ab);af._removeContent(aa,ag,true);af._removeContent(ac,Z,false);M(Y).each(function(ai,aj){aj=M(aj);(aj.is(Q)?aj:aj.find(Q)).each(function(al,ak){ak.innerHTML="&#65279;"})});if(ag&&!aa.previousSibling){b.insertBefore(ah.createTextNode("\uFEFF"),aa)}if(Z&&!ac.nextSibling){b.insertAfter(ah.createTextNode("\uFEFF"),ac)}if(ag){ae.setStartBefore(aa)}else{if(Y[0]){ag=M(Y[0]);ag=ag.is(Q)?ag:ag.find(Q).first();if(ag.length){ae.setStart(ag.get(0),0)}}}ae.collapse(true);b.remove(aa);b.remove(ac)},_removeContent:function(ad,ab,aa){if(ab){var Z=aa?"nextSibling":"previousSibling",Y,ac=function(ae){while(ae&&!ae[Z]){ae=ae.parentNode}return ae&&M.contains(ab,ae)?ae[Z]:null};ad=ac(ad);while(ad){Y=ac(ad);b.remove(ad);ad=Y}}}});var o=a.extend({init:function(Y){this.editor=Y},keydown:function(af){var ad=this,ae=ad.editor,Y=ae.keyboard,ag=Y.isTypingKey(af),ah=r(M.Event(),af);ad.editor.trigger("keydown",ah);if(ah.isDefaultPrevented()){af.preventDefault();return true}if(!ah.isDefaultPrevented()&&ag&&!Y.isTypingInProgress()){var Z=ae.getRange();var ab=ae.body;ad.startRestorePoint=new c(Z,ab);if(m(Z)){var aa=new e(ae);aa.remove(Z);ae.selectRange(Z)}if(f.webkit&&!Z.collapsed&&G(ab,Z)){ab.innerHTML=""}if(ae.immutables&&O.Immutables.immutablesContext(Z)){var ac=new O.BackspaceHandler(ae);ac.deleteSelection(Z)}Y.startTyping(function(){ad.endRestorePoint=T(ae,ad.startRestorePoint)});return true}return false},keyup:function(Z){var Y=this.editor.keyboard;this.editor.trigger("keyup",Z);if(Y.isTypingInProgress()){Y.endTyping();return true}return false}});var J=a.extend({init:function(Y){this.editor=Y},_addCaret:function(Y){var Z=b.create(this.editor.document,"a");b.insertAt(Y,Z,0);b.stripBomNode(Z.previousSibling);b.stripBomNode(Z.nextSibling);return Z},_restoreCaret:function(Z){var Y=this.editor.createRange();Y.setStartAfter(Z);Y.collapse(true);this.editor.selectRange(Y);b.remove(Z)},_handleDelete:function(Y){var aa=Y.endContainer;var ac=b.closestEditableOfType(aa,b.blockElements);if(ac&&O.RangeUtils.isEndOf(Y,ac)){var Z=b.next(ac);if(!Z||b.name(Z)!="p"){return false}var ab=this._addCaret(Z);this._merge(ac,Z);this._restoreCaret(ab);return true}return false},_cleanBomBefore:function(Y){var ac=Y.startOffset;var aa=Y.startContainer;var ab=aa.nodeValue;var Z=0;while(ac-Z>=0&&ab[ac-Z-1]=="\uFEFF"){Z++}if(Z>0){aa.deleteData(ac-Z,Z);Y.setStart(aa,Math.max(0,ac-Z));Y.collapse(true);this.editor.selectRange(Y)}},_handleBackspace:function(Z){var ac=Z.startContainer;var Y=b.closestEditableOfType(ac,["li"]);var ae=b.closestEditableOfType(ac,"p,h1,h2,h3,h4,h5,h6".split(","));var ab;if(b.isDataNode(ac)){this._cleanBomBefore(Z)}ab=t(ae,s,function(ag){return !b.htmlIndentSpace(ag)});if(Z.collapsed&&Z.startOffset!==Z.endOffset&&Z.startOffset<0){Z.startOffset=0;Z.endOffset=0;this.editor.selectRange(Z)}if(ae&&ab&&O.RangeUtils.isStartOf(Z,ae)){var ad=this._addCaret(ae);this._merge(ab,ae);this._restoreCaret(ad);return true}if(Y&&O.RangeUtils.isStartOf(Z,Y)){var af=Y.firstChild;if(!af){Y.innerHTML=O.emptyElementContent;af=Y.firstChild}var aa=new O.ListFormatter(b.name(Y.parentNode),"p");Z.selectNodeContents(Y);aa.toggle(Z);if(b.insignificant(af)){Z.setStartBefore(af)}else{Z.setStart(af,0)}this.editor.selectRange(Z);return true}return false},_handleSelection:function(ac){var ab=ac.commonAncestorContainer;var ag=b.closest(ab,"table");var af=O.emptyElementContent;var ae=this.editor;if(m(ac)){var ad=new e(ae);ad.remove(ac);ae.selectRange(ac);return true}var aa=new B();aa.add(ac,false);if(ae.immutables){this._handleImmutables(aa)}this._surroundFullySelectedAnchor(aa);ac.setStartAfter(aa.start);ac.setEndBefore(aa.end);var Y=ac.startContainer;var Z=ac.endContainer;ac.deleteContents();if(ag&&M(ag).text()===""){ac.selectNode(ag);ac.deleteContents()}ab=ac.commonAncestorContainer;if(b.name(ab)==="p"&&ab.innerHTML===""){ab.innerHTML=af;ac.setStart(ab,0)}this._join(Y,Z);b.insertAfter(ae.document.createTextNode("\uFEFF"),aa.start);aa.remove(ac);Y=ac.startContainer;if(b.name(Y)=="tr"){Y=Y.childNodes[Math.max(0,ac.startOffset-1)];ac.setStart(Y,b.getNodeLength(Y))}ac.collapse(true);ae.selectRange(ac);return true},_handleImmutables:function(Y){var aa=O.Immutables.immutableParent;var Z=aa(Y.start);var ab=aa(Y.start);if(Z){b.insertBefore(Y.start,Z)}if(ab){b.insertAfter(Y.end,ab)}if(Z){b.remove(Z)}if(ab&&ab.parentNode){b.remove(ab)}},_surroundFullySelectedAnchor:function(Z){var ad=Z.start,ac=ad.parentNode,Y=Z.end,aa=b.is(ac,"a")&&ac===Y.parentNode&&ac,ab;if(aa&&ad===aa.firstChild&&Y===aa.lastChild){ab=aa.parentNode;ab.insertBefore(ad,aa);ab.insertBefore(Y,aa.nextSibling)}},_root:function(Y){while(Y&&Y.parentNode&&b.name(Y.parentNode)!="body"){Y=Y.parentNode}return Y},_join:function(Z,Y){Z=this._root(Z);Y=this._root(Y);if(Z!=Y&&b.is(Y,"p")){this._merge(Z,Y)}},_merge:function(Y,Z){b.removeTrailingBreak(Y);while(Y&&Z.firstChild){if(Y.nodeType==1){Y=b.list(Y)?Y.children[Y.children.length-1]:Y;if(Y){Y.appendChild(Z.firstChild)}}else{if(Y.nodeType===E.TEXT_NODE){this._mergeWithTextNode(Y,Z.firstChild)}else{Y.parentNode.appendChild(Z.firstChild)}}}b.remove(Z)},_mergeWithTextNode:function(Y,Z){if(Y&&Y.nodeType===E.TEXT_NODE){if(Y.nextSibling&&this._isCaret(Y.nextSibling)){b.insertAfter(Z,Y.nextSibling)}else{b.insertAfter(Z,Y)}}},_isCaret:function(Y){return M(Y).is("a")},keydown:function(ad){var Y,Z;var ac=this.editor;var aa=ac.getRange();var af=ad.keyCode;var ag=P.keys;var ab=af===ag.BACKSPACE;var ae=af==ag.DELETE;if(ac.immutables&&ac.immutables.keydown(ad,aa)){return}if((ab||ae)&&!aa.collapsed){Y="_handleSelection"}else{if(ab){Y="_handleBackspace"}else{if(ae){Y="_handleDelete"}}}if(!Y){return}Z=new c(aa,ac.body);if(this[Y](aa)){ad.preventDefault();T(ac,Z)}},deleteSelection:function(Y){this._handleSelection(Y)},keyup:M.noop});var S=a.extend({init:function(Y){this.editor=Y;this.systemCommandIsInProgress=false},createUndoCommand:function(){this.startRestorePoint=this.endRestorePoint=T(this.editor,this.startRestorePoint)},changed:function(){if(this.startRestorePoint){return this.startRestorePoint.html!=this.editor.body.innerHTML}return false},keydown:function(ab){var aa=this,Z=aa.editor,Y=Z.keyboard;if(Y.isModifierKey(ab)){if(Y.isTypingInProgress()){Y.endTyping(true)}aa.startRestorePoint=new c(Z.getRange(),Z.body);return true}if(Y.isSystem(ab)){aa.systemCommandIsInProgress=true;if(aa.changed()){aa.systemCommandIsInProgress=false;aa.createUndoCommand()}return true}return false},keyup:function(){var Y=this;if(Y.systemCommandIsInProgress&&Y.changed()){Y.systemCommandIsInProgress=false;Y.createUndoCommand();return true}return false}});var K=a.extend({init:function(Y){this.editor=Y},keydown:function(Y){if(!f.webkit||Y.isDefaultPrevented()||!(Y.ctrlKey&&Y.keyCode==65&&!Y.altKey&&!Y.shiftKey)){return}if(this.editor.options.immutables){this._toSelectableImmutables()}this._selectEditorBody()},_selectEditorBody:function(){var Z=this.editor;var Y=Z.getRange();Y.selectNodeContents(Z.body);Z.selectRange(Y)},_toSelectableImmutables:function(){var Z=this.editor,Y=Z.body,ad=O.Immutables.immutable,ab=b.emptyTextNode,ac=Y.firstChild,aa=Y.lastChild;while(ab(ac)){ac=ac.nextSibling}while(ab(aa)){aa=aa.previousSibling}if(ac&&ad(ac)){M(V).prependTo(Y)}if(aa&&ad(aa)){M(V).appendTo(Y)}},keyup:M.noop});var X=a.extend({init:function(Y){this.handlers=Y;this.typingInProgress=false},isCharacter:function(Y){return Y>=48&&Y<=90||Y>=96&&Y<=111||Y>=186&&Y<=192||Y>=219&&Y<=222||Y==229},toolFromShortcut:function(ac,ab){var Z=String.fromCharCode(ab.keyCode),aa,ad,Y=this._getShortcutModifier(ab,navigator.platform);for(aa in ac){ad=M.extend({ctrl:false,alt:false,shift:false},ac[aa].options);if((ad.key==Z||ad.key==ab.keyCode)&&ad.ctrl==Y&&ad.alt==ab.altKey&&ad.shift==ab.shiftKey){return aa}}},_getShortcutModifier:function(Z,Y){var aa=Y.toUpperCase().indexOf("MAC")>=0;return aa?Z.metaKey:Z.ctrlKey},toolsFromShortcut:function(ad,ac){var Y=String.fromCharCode(ac.keyCode),aa,ae,af,ab=[];var Z=function(ag){return ag==Y||ag==ac.keyCode};for(aa in ad){ae=M.extend({ctrl:false,alt:false,shift:false},ad[aa].options);af=M.isArray(ae.key)?M.grep(ae.key,Z).length>0:Z(ae.key);if(af&&ae.ctrl==ac.ctrlKey&&ae.alt==ac.altKey&&ae.shift==ac.shiftKey){ab.push(ad[aa])}}return ab},isTypingKey:function(Z){var Y=Z.keyCode;return this.isCharacter(Y)&&!Z.ctrlKey&&!Z.altKey||Y==32||Y==13||Y==8||Y==46&&!Z.shiftKey&&!Z.ctrlKey&&!Z.altKey},isModifierKey:function(Z){var Y=Z.keyCode;return Y==17&&!Z.shiftKey&&!Z.altKey||Y==16&&!Z.ctrlKey&&!Z.altKey||Y==18&&!Z.ctrlKey&&!Z.shiftKey},isSystem:function(Y){return Y.keyCode==46&&Y.ctrlKey&&!Y.altKey&&!Y.shiftKey},startTyping:function(Y){this.onEndTyping=Y;this.typingInProgress=true},stopTyping:function(){if(this.typingInProgress&&this.onEndTyping){this.onEndTyping()}this.typingInProgress=false},endTyping:function(Z){var Y=this;Y.clearTimeout();if(Z){Y.stopTyping()}else{Y.timeout=window.setTimeout(M.proxy(Y.stopTyping,Y),1000)}},isTypingInProgress:function(){return this.typingInProgress},clearTimeout:function(){window.clearTimeout(this.timeout)},notify:function(ab,aa){var Z,Y=this.handlers;for(Z=0;Z<Y.length;Z++){if(Y[Z][aa](ab)){break}}},keydown:function(Y){this.notify(Y,"keydown")},keyup:function(Y){this.notify(Y,"keyup")}});var y=a.extend({init:function(Z){this.editor=Z;var Y=Z.options.pasteCleanup;this.cleaners=[new d(Y),new N(Y),new I(Y),new p(Y),new i(Y),new n(Y),new D(Y),new x(Y)]},htmlToFragment:function(aa){var ab=this.editor,ac=ab.document,Y=b.create(ac,"div"),Z=ac.createDocumentFragment();Y.innerHTML=aa;while(Y.firstChild){Z.appendChild(Y.firstChild)}return Z},isBlock:function(Y){return/<(div|p|ul|ol|table|h[1-6])/i.test(Y)},_startModification:function(){var Y;var aa;var Z=this.editor;if(this._inProgress){return}this._inProgress=true;Y=Z.getRange();aa=new c(Y,Z.body);b.persistScrollTop(Z.document);return{range:Y,restorePoint:aa}},_endModification:function(Y){T(this.editor,Y.restorePoint);this.editor._selectionChange();this._inProgress=false},_contentModification:function(aa,ac){var Z=this;var Y=Z.editor;var ab=Z._startModification();if(!ab){return}aa.call(Z,Y,ab.range);setTimeout(function(){ac.call(Z,Y,ab.range);Z._endModification(ab)})},_removeBomNodes:function(Z){var Y=O.RangeUtils.textNodes(Z);for(var aa=0;aa<Y.length;aa++){Y[aa].nodeValue=b.stripBom(Y[aa].nodeValue)}},_onBeforeCopy:function(Z){var Y=new B();Y.add(Z);this._removeBomNodes(Z);Y.remove(Z);this.editor.selectRange(Z)},oncopy:function(){this._onBeforeCopy(this.editor.getRange())},oncut:function(){this._onBeforeCopy(this.editor.getRange());this._contentModification(M.noop,M.noop)},_fileToDataURL:function(aa){var Z=M.Deferred();var Y=new FileReader();if(!(aa instanceof window.File)&&aa.getAsFile){aa=aa.getAsFile()}Y.onload=M.proxy(Z.resolve,Z);Y.readAsDataURL(aa);return Z.promise()},_triggerPaste:function(aa,Z){var Y={html:aa||""};Y.html=Y.html.replace(/\ufeff/g,"");this.editor.trigger("paste",Y);this.paste(Y.html,Z||{})},_handleImagePaste:function(ab){if(!("FileReader" in window)||f.msie&&f.version>10){return}var ad=ab.clipboardData||ab.originalEvent.clipboardData||window.clipboardData||{};var Z=ad.items||ad.files;if(!Z){return}var Y=M.grep(Z,function(ae){return/^image\//i.test(ae.type)});var aa=M.grep(Z,function(ae){return/^text\/html/i.test(ae.type)});if(aa.length||!Y.length){return}var ac=this._startModification();if(!ac){return}M.when.apply(M,M.map(Y,this._fileToDataURL)).done(M.proxy(function(){var af=Array.prototype.slice.call(arguments);var ae=M.map(af,function(ag){return'<img src="'+ag.target.result+'" />'}).join("");this._triggerPaste(ae);this._endModification(ac)},this));return true},onpaste:function(Z){if(this._handleImagePaste(Z)){Z.preventDefault();return}this.expandImmutablesIn();this._contentModification(function Y(af,ad){var ai=b.create(af.document,"div",{className:"k-paste-container",innerHTML:"\uFEFF"});var ae=P.support.browser;var ab=af.body;this._decoreateClipboardNode(ai,ab);ab.appendChild(ai);if(ae.webkit){this._moveToCaretPosition(ai,ad)}if(ae.msie&&ae.version<11){Z.preventDefault();var ah=af.createRange();ah.selectNodeContents(ai);af.selectRange(ah);var ag=af.document.body.createTextRange();ag.moveToElementText(ai);M(ab).unbind("paste");ag.execCommand("Paste");M(ab).bind("paste",M.proxy(this.onpaste,this))}else{var ac=af.createRange();ac.selectNodeContents(ai);af.selectRange(ac)}ad.deleteContents()},function aa(ad,ab){var ac="",ae;ad.selectRange(ab);ae=M(ad.body).children(".k-paste-container");ae.each(function(){var af=this.lastChild;if(af&&b.is(af,"br")){b.remove(af)}ac+=this.innerHTML});ae.remove();this._triggerPaste(ac,{clean:true})})},_decoreateClipboardNode:function(ab,Z){if(!f.msie&&!f.webkit){return}ab=M(ab);ab.css({borderWidth:"0px",width:"0px",height:"0px",overflow:"hidden",margin:"0",padding:"0"});if(f.msie){var ad=M(Z.ownerDocument.documentElement);ab.css({fontVariant:"normal",fontWeight:"normal",lineSpacing:"normal",lineHeight:"normal",textDecoration:"none"});var aa=ad.css("color");if(aa){ab.css("color",aa)}var Y=ad.css("fontFamily");if(Y){ab.css("fontFamily",Y)}var ac=ad.css("fontSize");if(ac){ab.css("fontSize",ac)}}},_moveToCaretPosition:function(ab,ac){var ae=this;var ad=ae.editor.body;var af=b.offset(ab,ad);var ag=ae._caretOffset(ac,ad);var Z=ag.left-af.left;var Y=ag.top-af.top;var aa="translate("+Z+"px,"+Y+"px)";M(ab).css({"-webkit-transform":aa,transform:aa})},_caretOffset:function(ad,ag){var ah=this.editor;var ai=b.create(ah.document,"span",{innerHTML:"\uFEFF"});var Y=ad.startContainer;var aa;if(ad.collapsed){var af=b.isDataNode(Y);if(af&&(b.isBom(Y)||ad.startOffset===0)){b.insertBefore(ai,Y)}else{if(af&&ad.startOffset===Y.length){b.insertAfter(ai,Y)}else{ad.insertNode(ai);aa=true}}}else{Y=Y===ag?Y.childNodes[ad.startOffset]:Y;b.insertBefore(ai,Y)}var ab=b.offset(ai,ag);var Z=ai.previousSibling;var ac=ai.nextSibling;b.remove(ai);if(aa&&b.isDataNode(Z)&&b.isDataNode(ac)&&!b.isBom(Z)&&!b.isBom(ac)){var ae=Z.length;ac.data=Z.data+ac.data;ad.setStart(ac,ae);b.remove(Z);ad.collapse(true);ah.selectRange(ad)}return ab},expandImmutablesIn:function(aa){var ab=this.editor;if(ab&&ab.options.immutables){var Y=ab.body;aa=aa||ab.getRange();P.ui.editor.Immutables.expandImmutablesIn(aa);if(aa.startContainer===Y&&aa.startOffset===0){var ac=Y.ownerDocument;var Z=ac.createTextNode("\uFEFF");Y.insertBefore(Z,Y.childNodes[0]);aa.setStartBefore(Z)}ab.selectRange(aa)}},splittableParent:function(ab,aa){var Z,Y;if(ab){return b.closestEditableOfType(aa,["p","ul","ol"])||aa.parentNode}Z=aa.parentNode;Y=aa.ownerDocument.body;if(b.isInline(Z)){while(Z.parentNode!=Y&&!b.isBlock(Z.parentNode)){Z=Z.parentNode}}return Z},paste:function(af,am){var ah=this.editor,ad,aa;this.expandImmutablesIn();am=r({clean:false,split:true},am);if(!am.skipCleaners){for(ad=0,aa=this.cleaners.length;ad<aa;ad++){if(this.cleaners[ad].applicable(af)){af=this.cleaners[ad].clean(af)}}}if(am.clean){af=af.replace(/(<br>(\s|&nbsp;)*)+(<\/?(div|p|li|col|t))/gi,"$3");af=af.replace(/<(a|span)[^>]*><\/\1>/gi,"")}af=af.replace(/^<li/i,"<ul><li").replace(/li>$/g,"li></ul>");var ab=this.isBlock(af);ah.focus();var ag=ah.getRange();ag.deleteContents();if(ag.startContainer==ah.document){ag.selectNodeContents(ah.body)}var ae=new B();var aj=ae.addCaret(ag);var al=this.splittableParent(ab,aj);var ac=false;var ak=al!=ah.body&&!b.is(al,"td");if(am.split&&ak&&(ab||b.isInline(al))){ag.selectNode(aj);O.RangeUtils.split(ag,al,true);ac=true}var ai=this.htmlToFragment(af);if(ai.firstChild&&ai.firstChild.className==="k-paste-container"){var Z=[];for(ad=0,aa=ai.childNodes.length;ad<aa;ad++){Z.push(ai.childNodes[ad].innerHTML)}ai=this.htmlToFragment(Z.join("<br />"))}M(ai.childNodes).filter("table").addClass("k-table").end().find("table").addClass("k-table");ag.insertNode(ai);al=this.splittableParent(ab,aj);if(ac){while(aj.parentNode!=al){b.unwrap(aj.parentNode)}b.unwrap(aj.parentNode)}b.normalize(ag.commonAncestorContainer);aj.style.display="inline";b.restoreScrollTop(ah.document);b.scrollTo(aj);ae.removeCaret(ag);var Y=ag.commonAncestorContainer.parentNode;if(ag.collapsed&&b.name(Y)=="tbody"){ag.setStartAfter(M(Y).closest("table")[0]);ag.collapse(true)}ah.selectRange(ag)}});var k=a.extend({init:function(Y){this.options=Y||{};this.replacements=[]},clean:function(ab,Z){var ad=this,ac=Z||ad.replacements,aa,Y;for(aa=0,Y=ac.length;aa<Y;aa+=2){ab=ab.replace(ac[aa],ac[aa+1])}return ab}});var d=k.extend({init:function(Y){k.fn.init.call(this,Y);this.replacements=[/<(\/?)script([^>]*)>/i,"<$1telerik:script$2>"]},applicable:function(Y){return !this.options.none&&/<script[^>]*>/i.test(Y)}});var N=k.extend({init:function(Y){k.fn.init.call(this,Y);var Z=" ";this.replacements=[/<span\s+class="Apple-tab-span"[^>]*>\s*<\/span>/gi,Z,/\t/gi,Z,/&nbsp;&nbsp; &nbsp;/gi,Z]},applicable:function(Y){return/&nbsp;&nbsp; &nbsp;|class="?Apple-tab-span/i.test(Y)}});var I=k.extend({init:function(Y){k.fn.init.call(this,Y);this.junkReplacements=[/<\?xml[^>]*>/gi,"",/<!--(.|\n)*?-->/g,"",/&quot;/g,"'",/<o:p>&nbsp;<\/o:p>/gi,"&nbsp;",/<\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\n)*?<\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,"",/<\/o>/g,""];this.replacements=this.junkReplacements.concat([/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1",/<br><br>/g,"<BR><BR>",/<br>(?!\n)/g," ",/<table([^>]*)>(\s|&nbsp;)+<t/gi,"<table$1><t",/<tr[^>]*>(\s|&nbsp;)*<\/tr>/gi,"",/<tbody[^>]*>(\s|&nbsp;)*<\/tbody>/gi,"",/<table[^>]*>(\s|&nbsp;)*<\/table>/gi,"",/<BR><BR>/g,"<br>",/^\s*(&nbsp;)+/gi,"",/(&nbsp;|<br[^>]*>)+\s*$/gi,"",/mso-[^;"]*;?/gi,"",/<(\/?)b(\s[^>]*)?>/gi,"<$1strong$2>",/<(\/?)font(\s[^>]*)?>/gi,this.convertFontMatch,/<(\/?)i(\s[^>]*)?>/gi,"<$1em$2>",/style=(["|'])\s*\1/g,"",/(<br[^>]*>)?\n/g,function(aa,Z){return Z?aa:" "}])},convertFontMatch:function(Z,aa,Y){var ad=/face=['"]([^'"]+)['"]/i;var ac=ad.exec(Y);var ab=Y&&ac&&ac[1];if(aa){return"</span>"}else{if(ab){return'<span style="font-family:'+ab+'">'}else{return"<span>"}}},applicable:function(Y){return/class="?Mso/i.test(Y)||/style="[^"]*mso-/i.test(Y)||/urn:schemas-microsoft-com:office/.test(Y)},stripEmptyAnchors:function(Y){return Y.replace(/<a([^>]*)>\s*<\/a>/gi,function(Z,aa){if(!aa||aa.indexOf("href")<0){return""}return Z})},listType:function(Y,ac){var aa=Y.innerHTML;var ae=b.innerText(Y);var ag;var ad=aa.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);var Z=ad&&ad[1];var af=/^[a-z\d]/i.test(Z);var ab=function(ah){return ah.replace(/^(?:&nbsp;|[\u00a0\n\r\s])+/,"")};if(ad){ag=true}aa=aa.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g,"\xA0");if(!ag&&/^[\u2022\u00b7\u00a7\u00d8o]\u00a0+/.test(aa)||ag&&/^.\u00a0+/.test(aa)||Z&&!af&&ac){return{tag:"ul",style:this._guessUnorderedListStyle(ab(ae))}}if(/^\s*\w+[\.\)][\u00a0 ]{2,}/.test(aa)){return{tag:"ol",style:this._guessOrderedListStyle(ab(ae))}}},_convertToLi:function(Z){var Y;if(Z.childNodes.length==1){Y=Z.firstChild.innerHTML.replace(/^\w+[\.\)](&nbsp;)+ /,"")}else{b.remove(Z.firstChild);if(Z.firstChild.nodeType==3){if(/^[ivxlcdm]+\.$/i.test(Z.firstChild.nodeValue)){b.remove(Z.firstChild)}}if(/^(&nbsp;|\s)+$/i.test(Z.firstChild.innerHTML)){b.remove(Z.firstChild)}Y=Z.innerHTML}b.remove(Z);return b.create(document,"li",{innerHTML:Y})},_guessUnorderedListStyle:function(Y){if(/^[\u2022\u00b7\u00FC\u00D8\u002dv-]/.test(Y)){return null}else{if(/^o/.test(Y)){return"circle"}else{return"square"}}},_guessOrderedListStyle:function(Z){var Y=null;if(!/^\d/.test(Z)){Y=(/^[a-z]/.test(Z)?"lower-":"upper-")+(/^[ivxlcdm]/i.test(Z)?"roman":"alpha")}return Y},extractListLevels:function(Y){var Z=/style=['"]?[^'"]*?mso-list:\s?[a-zA-Z]+(\d+)\s[a-zA-Z]+(\d+)\s(\w+)/gi;Y=Y.replace(Z,function(aa,ab,ac){return P.format('data-list="{0}" data-level="{1}" {2}',ab,ac,aa)});return Y},lists:function(am){var al=M(am).find(b.blockElements.join(",")),Y=-1,Z,ao={},an=am,af,ai,ae,aa,aj,ad,ah,ag;for(ae=0;ae<al.length;ae++){aa=al[ae];ag=M(aa).data();var ab=ag.list;Z=b.name(aa);if(Z=="td"){continue}var ak=this.listType(aa,ag);aj=ak&&ak.tag;if(!aj||Z!="p"){if(!aa.innerHTML){b.remove(aa)}else{Y=-1;an=am}continue}ad=parseFloat(aa.style.marginLeft||0);if(af===undefined){af=ad}var ac=aj+ab;if(!ao[ad]){ao[ad]={}}ah=ao[ad][ac];if(ad>Y||!ah){ah=b.create(document,aj,{style:{listStyleType:ak.style}});if(an==am||ad<=Y){if(ai&&af!==ad){ai.appendChild(ah)}else{b.insertBefore(ah,aa)}ao[ad]={}}else{ai=an;an.appendChild(ah)}ao[ad][ac]=ah}an=this._convertToLi(aa);ah.appendChild(an);Y=ad}},removeAttributes:function(aa){var Y=aa.attributes,Z=Y.length;while(Z--){if(b.name(Y[Z])!="colspan"){aa.removeAttributeNode(Y[Z])}}},createColGroup:function(ab){var Z=ab.cells;var aa=M(ab).closest("table");var Y=aa.children("colgroup");if(Z.length<2){return}else{if(Y.length){Z=Y.children();Y[0].parentNode.removeChild(Y[0])}}Y=M(M.map(Z,function(ac){var ad=ac.width;if(ad&&parseInt(ad,10)!==0){return P.format('<col style="width:{0}px;"/>',ad)}return"<col />"}).join(""));if(!Y.is("colgroup")){Y=M("<colgroup/>").append(Y)}Y.prependTo(aa)},convertHeaders:function(ab){var Y=ab.cells,Z,aa=M.map(Y,function(ac){var ad=M(ac).children("p").children("strong")[0];if(ad&&b.name(ad)=="strong"){return ad}});if(aa.length==Y.length){for(Z=0;Z<aa.length;Z++){b.unwrap(aa[Z])}M(ab).closest("table").find("colgroup").after("<thead></thead>").end().find("thead").append(ab);for(Z=0;Z<Y.length;Z++){b.changeTag(Y[Z],"th")}}},removeParagraphs:function(ab){var ac,aa,Z,Y,ad;for(ac=0;ac<ab.length;ac++){this.removeAttributes(ab[ac]);Y=M(ab[ac]);ad=Y.children("p");for(aa=0,Z=ad.length;aa<Z;aa++){if(aa<Z-1){b.insertAfter(b.create(document,"br"),ad[aa])}b.unwrap(ad[aa])}}},removeDefaultColors:function(Z){for(var Y=0;Y<Z.length;Y++){if(/^\s*color:\s*[^;]*;?$/i.test(Z[Y].style.cssText)){b.unwrap(Z[Y])}}},tables:function(af){var ab=M(af).find("table"),ac=this,ad,ae,Z,aa,Y;for(aa=0;aa<ab.length;aa++){ad=ab[aa].rows;Z=ae=ad[0];for(Y=1;Y<ad.length;Y++){if(ad[Y].cells.length>Z.cells.length){Z=ad[Y]}}ac.createColGroup(Z);ac.convertHeaders(ae);ac.removeAttributes(ab[aa]);ac.removeParagraphs(ab.eq(aa).find("td,th"));ac.removeDefaultColors(ab.eq(aa).find("span"))}},headers:function(aa){var Z=M(aa).find("p.MsoTitle");for(var Y=0;Y<Z.length;Y++){b.changeTag(Z[Y],"h1")}},removeFormatting:function(Y){M(Y).find("*").each(function(){M(this).css({fontSize:"",fontFamily:""});if(!this.getAttribute("style")&&!this.style.cssText){this.removeAttribute("style")}})},clean:function(Y){var aa=this,ab;var Z=this.options;if(Z.none){Y=k.fn.clean.call(aa,Y,this.junkReplacements);Y=aa.stripEmptyAnchors(Y)}else{Y=this.extractListLevels(Y);Y=k.fn.clean.call(aa,Y);Y=aa.stripEmptyAnchors(Y);ab=b.create(document,"div",{innerHTML:Y});aa.headers(ab);if(Z.msConvertLists){aa.lists(ab)}aa.tables(ab);if(Z.msAllFormatting){aa.removeFormatting(ab)}Y=ab.innerHTML.replace(/(<[^>]*)\s+class="?[^"\s>]*"?/gi,"$1")}return Y}});var p=k.extend({init:function(Y){k.fn.init.call(this,Y);this.replacements=[/\s+class="Apple-style-span[^"]*"/gi,"",/<(div|p|h[1-6])\s+style="[^"]*"/gi,"<$1",/^<div>(.*)<\/div>$/,"$1"]},applicable:function(Y){return/class="?Apple-style-span|style="[^"]*-webkit-nbsp-mode/i.test(Y)}});var h=k.extend({clean:function(Z){var Y=b.create(document,"div",{innerHTML:Z});Y=this.cleanDom(Y);return Y.innerHTML},cleanDom:function(Y){return Y}});var i=h.extend({cleanDom:function(Y){var Z=this.collectTags();M(Y).find(Z).each(function(){b.unwrap(this)});return Y},collectTags:function(){if(this.options.span){return"span"}},applicable:function(){return this.options.span}});var n=h.extend({cleanDom:function(Y){var aa=this.collectAttr();var Z=M(Y).find("["+aa.join("],[")+"]");Z.removeAttr(aa.join(" "));return Y},collectAttr:function(){if(this.options.css){return["class","style"]}return[]},applicable:function(){return this.options.css}});var W=function(){this.text="";this.add=function(Y){this.text+=Y}};var q=a.extend({init:function(Y){this.separators=Y||{text:" ",line:"<br/>"};this.lines=[];this.inlineBlockText=[];this.resetLine()},appendText:function(Y){if(Y.nodeType===3){Y=Y.nodeValue}this.textContainer.add(Y)},appendInlineBlockText:function(Y){this.inlineBlockText.push(Y)},flashInlineBlockText:function(){if(this.inlineBlockText.length){this.appendText(this.inlineBlockText.join(" "));this.inlineBlockText=[]}},endLine:function(){this.flashInlineBlockText();this.resetLine()},html:function(){var aa=this.separators;var ai="";var ag=this.lines;this.flashInlineBlockText();for(var ad=0,ae=ag.length,Y=ae-1;ad<ae;ad++){var ah=ag[ad];for(var ab=0,ac=ah.length,Z=ac-1;ab<ac;ab++){var af=ah[ab].text;ai+=af;if(ab!==Z){ai+=aa.text}}if(ad!==Y){ai+=aa.line}}return ai},resetLine:function(){this.textContainer=new W();this.line=[];this.line.push(this.textContainer);this.lines.push(this.line)}});var H=a.extend({init:function(Y){this.callback=Y},enumerate:function(Z){if(!Z){return}var Y=this.callback(Z);var aa=Z.firstChild;if(!Y&&aa){this.enumerate(aa)}this.enumerate(Z.nextSibling)}});var D=k.extend({init:function(Y){k.fn.init.call(this,Y);this.hasText=false;this.enumerator=new H(M.proxy(this.buildText,this))},clean:function(Z){var Y=b.create(document,"div",{innerHTML:Z});return this.cleanDom(Y)},cleanDom:function(Y){this.separators=this.getDefaultSeparators();this.htmlLines=new q(this.separators);this.enumerator.enumerate(Y.firstChild);this.hasText=false;return this.htmlLines.html()},buildText:function(Y){if(b.isDataNode(Y)){if(b.isEmptyspace(Y)){return}this.htmlLines.appendText(Y.nodeValue.replace("\n",this.separators.line));this.hasText=true}else{if(b.isBlock(Y)&&this.hasText){var Z=this.actions[b.name(Y)]||this.actions.block;return Z(this,Y)}}},applicable:function(){var Y=this.options;return Y.all||Y.keepNewLines},getDefaultSeparators:function(){if(this.options.all){return{text:" ",line:" "}}else{return{text:" ",line:"<br/>"}}},actions:{ul:M.noop,ol:M.noop,table:M.noop,thead:M.noop,tbody:M.noop,td:function(Z,ab){var aa=new D({all:true});var Y=aa.cleanDom(ab);Z.htmlLines.appendInlineBlockText(Y);return true},block:function(Y){Y.htmlLines.endLine()}}});var x=k.extend({clean:function(Y){return this.options.custom(Y)},applicable:function(){return typeof this.options.custom==="function"}});var U=l.extend({init:function(Y){l.fn.init.call(this,Y);this.managesUndoRedo=true},exec:function(){var Y=this.editor;if(P.support.browser.msie){Y.document.execCommand("print",false,null)}else{if(Y.window.print){Y.window.print()}}}});var R=l.extend({init:function(Y){this.async=true;l.fn.init.call(this,Y)},exec:function(){var Z=this;var Y=this.lockRange(true);this.editor.saveAsPDF().then(function(){Z.releaseRange(Y)})}});r(O,{_finishUpdate:T,Command:l,GenericCommand:w,InsertHtmlCommand:v,InsertHtmlTool:z,TypingHandler:o,SystemHandler:S,BackspaceHandler:J,SelectAllHandler:K,Keyboard:X,Clipboard:y,Cleaner:k,ScriptCleaner:d,TabCleaner:N,MSWordFormatCleaner:I,WebkitFormatCleaner:p,HtmlTagsCleaner:i,HtmlAttrCleaner:n,HtmlContentCleaner:D,HtmlTextLines:q,CustomCleaner:x,PrintCommand:U,ExportPdfCommand:R});j("insertHtml",new z({template:new A({template:L.dropDownListTemplate,title:"Insert HTML",initialValue:"Insert HTML"})}));j("print",new u({command:U,template:new A({template:L.buttonTemplate,title:"Print"})}));j("pdf",new u({command:R,template:new A({template:L.buttonTemplate,title:"Export PDF"})}))}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/inlineformat",["editor/system"],a)}(function(){(function(e){var m=window.kendo,v=m.Class,q=m.ui.editor,g=m.ui.Editor.fn.options.formats,j=q.EditorUtils,i=q.Tool,p=q.ToolTemplate,d=q.FormatTool,u=q.Dom,y=q.RangeUtils,w=e.extend,o=q.EditorUtils.registerTool,c=q.EditorUtils.registerFormat,h=function(A){A.preventDefault()},f="mousedown.kendoEditor",n="keydown.kendoEditor",l="k-marker";var t=v.extend({init:function(A){this.format=A},numberOfSiblings:function(D){var B=0,C=0,E=0,A=D.parentNode,F;for(F=A.firstChild;F;F=F.nextSibling){if(F!=D){if(F.className==l){E++}else{if(F.nodeType==3){B++}else{C++}}}}if(E>1&&A.firstChild.className==l&&A.lastChild.className==l){return 0}else{return C+B}},findSuitable:function(B,D){if(!D&&this.numberOfSiblings(B)>0){return null}var C=B.parentNode;var A=this.format[0].tags;while(!u.ofType(C,A)){if(this.numberOfSiblings(C)>0){return null}C=C.parentNode}return C},findFormat:function(E){var H=this.format,G=u.attrEquals,D,A,F,C,B;for(D=0,A=H.length;D<A;D++){F=E;C=H[D].tags;B=H[D].attr;if(F&&u.ofType(F,C)&&G(F,B)){return F}while(F){F=u.parentOfType(F,C);if(F&&G(F,B)){return F}}}return null},isFormatted:function(B){var C,A;for(C=0,A=B.length;C<A;C++){if(this.findFormat(B[C])){return true}}return false}});var z=v.extend({init:function(B,A){this.finder=new t(B);this.attributes=w({},B[0].attr,A);this.tag=B[0].tags[0]},wrap:function(A){return u.wrap(A,u.create(A.ownerDocument,this.tag,this.attributes))},activate:function(B,A){if(this.finder.isFormatted(A)){this.split(B);this.remove(A)}else{this.apply(A)}},toggle:function(B){var C=this.immutables()?y.editableTextNodes:y.textNodes;var A=C(B);if(A.length>0){this.activate(B,A)}},immutables:function(){return this.editor&&this.editor.options.immutables},apply:function(D){var G=[];var E,B,F,H;var C=this.attributes;var A=C?C.style||{}:{};for(E=0,B=D.length;E<B;E++){F=D[E];H=this.finder.findSuitable(F);if(H){if(u.is(H,"font")){if(A.color){H.removeAttribute("color")}if(A.fontName){H.removeAttribute("face")}if(A.fontSize){H.removeAttribute("size")}}u.attr(H,C)}else{while(!u.isBlock(F.parentNode)&&F.parentNode.childNodes.length==1&&F.parentNode.contentEditable!=="true"){F=F.parentNode}H=this.wrap(F)}G.push(H)}this.consolidate(G)},remove:function(B){var C,A,D;for(C=0,A=B.length;C<A;C++){D=this.finder.findFormat(B[C]);if(D){if(this.attributes&&this.attributes.style){u.unstyle(D,this.attributes.style);if(!D.style.cssText&&!D.attributes["class"]){u.unwrap(D)}}else{u.unwrap(D)}}}},split:function(C){var B=y.textNodes(C);var A=B.length;var D,E;if(A>0){for(D=0;D<A;D++){E=this.finder.findFormat(B[D]);if(E){y.split(C,E,true)}}}},consolidate:function(A){var C,B;while(A.length>1){C=A.pop();B=A[A.length-1];if(C.previousSibling&&C.previousSibling.className==l){B.appendChild(C.previousSibling)}if(C.tagName==B.tagName&&C.previousSibling==B&&C.style.cssText==B.style.cssText){while(C.firstChild){B.appendChild(C.firstChild)}u.remove(C)}}}});var b=t.extend({init:function(B,A){this.format=B;this.greedyProperty=A;t.fn.init.call(this,B)},getInlineCssValue:function(D){var I=D.attributes;var E=e.trim;var J,G,B,A,F,K,H,C,L;var M,O,N;if(!I){return}for(J=0,G=I.length;J<G;J++){B=I[J];A=B.nodeName;F=B.nodeValue;if(B.specified&&A=="style"){K=E(F||D.style.cssText).split(";");for(C=0,L=K.length;C<L;C++){H=K[C];if(H.length){M=H.split(":");O=E(M[0].toLowerCase());N=E(M[1]);if(O!=this.greedyProperty){continue}return O.indexOf("color")>=0?u.toHex(N):N}}}}},getFormatInner:function(E){var B=e(u.isDataNode(E)?E.parentNode:E);var C=B.parentsUntil("[contentEditable]").addBack().toArray().reverse();var D,A,F;for(D=0,A=C.length;D<A;D++){F=this.greedyProperty=="className"?C[D].className:this.getInlineCssValue(C[D]);if(F){return F}}return"inherit"},getFormat:function(C){var B=this.getFormatInner(C[0]),D,A;for(D=1,A=C.length;D<A;D++){if(B!=this.getFormatInner(C[D])){return""}}return B},isFormatted:function(A){return this.getFormat(A)!==""}});var x=z.extend({init:function(C,A,B){z.fn.init.call(this,C,A);this.values=A;this.finder=new b(C,B);if(B){this.greedyProperty=m.toCamelCase(B)}},activate:function(B,A){var C=this.greedyProperty;var D="apply";this.split(B);if(C&&this.values.style[C]=="inherit"){D="remove"}this[D](A)}});var k=d.extend({init:function(A){d.fn.init.call(this,w(A,{finder:new t(A.format),formatter:function(){return new z(A.format)}}))}});var r=i.extend({update:function(C,A){var B=C.data(this.type);B.close();B.value(this.finder.getFormat(A))}});var s=r.extend({init:function(A){i.fn.init.call(this,A);this.type=m.support.browser.msie||m.support.touch?"kendoDropDownList":"kendoComboBox";this.format=[{tags:["span","font"]}];this.finder=new b(this.format,A.cssAttr)},command:function(A){var B=this.options,D=this.format,C={};return new q.FormatCommand(w(A,{formatter:function(){C[B.domAttr]=A.value;return new x(D,{style:C},B.cssAttr)}}))},initialize:function(H,B){var F=B.editor,I=this.options,D=I.name,A,E,G=[];if(I.defaultValue){G=[{text:F.options.messages[I.defaultValue[0].text],value:I.defaultValue[0].value}]}A=G.concat(I.items?I.items:F.options[D]||[]);H.attr({title:B.title});H[this.type]({dataTextField:"text",dataValueField:"value",dataSource:A,change:function(){F._range=E;i.exec(F,D,this.value())},close:function(){setTimeout(function(){if("_range" in F){delete F._range}},0)},highlightFirst:false});H.closest(".k-widget").removeClass("k-"+D).find("*").addBack().attr("unselectable","on");var C=H.data(this.type);C.value("inherit");C.wrapper.on(f,".k-select,.k-input",function(){var J=F.getRange();E=F._containsRange(J)?J:E}).on(n,function(J){if(J.keyCode===m.keys.ENTER){J.preventDefault()}})}});var a=i.extend({init:function(A){i.fn.init.call(this,A);this.format=[{tags:["span","font"]}];this.finder=new b(this.format,A.cssAttr)},options:{palette:"websafe"},update:function(){this._widget.close()},command:function(A){var B=this.options,D=this.format,C={};return new q.FormatCommand(w(A,{formatter:function(){C[B.domAttr]=A.value;return new x(D,{style:C},B.cssAttr)}}))},initialize:function(F,E){var C=E.editor,D=this.name,B=w({},a.fn.options,this.options),A=B.palette;F=this._widget=new m.ui.ColorPicker(F,{toolIcon:"k-icon k-i-"+j.getToolCssClass(B.name),palette:A,change:function(){var G=F.value();if(G){i.exec(C,D,G)}C.focus()},open:function(H){var G=H.sender;G.value(null);G._popup.element.on(f,h)},close:function(G){G.sender._popup.element.off(f)},activate:function(G){G.preventDefault();F.trigger("change")}});F.wrapper.attr({title:E.title,unselectable:"on"}).find("*").attr("unselectable","on")}});w(q,{InlineFormatFinder:t,InlineFormatter:z,DelayedExecutionTool:r,GreedyInlineFormatFinder:b,GreedyInlineFormatter:x,InlineFormatTool:k,FontTool:s,ColorTool:a});c("bold",[{tags:["strong","b"]},{tags:["span"],attr:{style:{fontWeight:"bold"}}}]);o("bold",new k({key:"B",ctrl:true,format:g.bold,template:new p({template:j.buttonTemplate,title:"Bold"})}));c("italic",[{tags:["em","i"]},{tags:["span"],attr:{style:{fontStyle:"italic"}}}]);o("italic",new k({key:"I",ctrl:true,format:g.italic,template:new p({template:j.buttonTemplate,title:"Italic"})}));c("underline",[{tags:["span"],attr:{style:{textDecoration:"underline"}}},{tags:["u"]}]);o("underline",new k({key:"U",ctrl:true,format:g.underline,template:new p({template:j.buttonTemplate,title:"Underline"})}));c("strikethrough",[{tags:["del","strike"]},{tags:["span"],attr:{style:{textDecoration:"line-through"}}}]);o("strikethrough",new k({format:g.strikethrough,template:new p({template:j.buttonTemplate,title:"Strikethrough"})}));c("superscript",[{tags:["sup"]}]);o("superscript",new k({format:g.superscript,template:new p({template:j.buttonTemplate,title:"Superscript"})}));c("subscript",[{tags:["sub"]}]);o("subscript",new k({format:g.subscript,template:new p({template:j.buttonTemplate,title:"Subscript"})}));o("foreColor",new a({cssAttr:"color",domAttr:"color",name:"foreColor",template:new p({template:j.colorPickerTemplate,title:"Color"})}));o("backColor",new a({cssAttr:"background-color",domAttr:"backgroundColor",name:"backColor",template:new p({template:j.colorPickerTemplate,title:"Background Color"})}));o("fontName",new s({cssAttr:"font-family",domAttr:"fontFamily",name:"fontName",defaultValue:[{text:"fontNameInherit",value:"inherit"}],template:new p({template:j.comboBoxTemplate,title:"Font Name"})}));o("fontSize",new s({cssAttr:"font-size",domAttr:"fontSize",name:"fontSize",defaultValue:[{text:"fontSizeInherit",value:"inherit"}],template:new p({template:j.comboBoxTemplate,title:"Font Size"})}))}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/formatblock",["editor/inlineformat"],a)}(function(){(function(e){var k=window.kendo,q=k.Class,r=e.extend,n=k.ui.editor,f=k.ui.Editor.fn.options.formats,p=n.Dom,o=n.Command,m=n.ToolTemplate,c=n.FormatTool,h=n.EditorUtils,l=h.registerTool,b=h.registerFormat,t=n.RangeUtils;var g=q.extend({init:function(u){this.format=u},contains:function(x,w){var v,u,y;for(v=0,u=w.length;v<u;v++){y=w[v];if(!y||!p.isAncestorOrSelf(x,y)){return false}}return true},findSuitable:function(v){var A=this.format,x=[],w,u,y;for(w=0,u=v.length;w<u;w++){for(var z=A.length-1;z>=0;z--){y=p.ofType(v[w],A[z].tags)?v[w]:p.closestEditableOfType(v[w],A[z].tags);if(y){break}}if(!y||y.contentEditable==="true"){return[]}if(e.inArray(y,x)<0){x.push(y)}}this._resolveListsItems(x);for(w=0,u=x.length;w<u;w++){if(this.contains(x[w],x)){return[x[w]]}}return x},_resolveListsItems:function(u){var v,w,x;for(v=0;v<u.length;v++){w=u[v];x=p.is(w,"li")?w:p.wrapper(w);x=x&&p.list(x)?x.children[0]:x;if(p.is(x,"li")){w=u[v]=x}}},findFormat:function(x){var C=this.format,z,A,w,E,y;var u=p.editableParent(x);var v=this.options&&this.options.immutables;var D=n.Immutables;for(z=0,A=C.length;z<A;z++){w=x;E=C[z].tags;y=C[z].attr;if(v&&E&&E[0]=="immutable"){var B=D.immutableParent(w);if(B&&p.attrEquals(B,y)){return w}}while(w&&p.isAncestorOf(u,w)){if(p.ofType(w,E)&&p.attrEquals(w,y)){return w}w=w.parentNode}}return null},getFormat:function(w){var z=this,y=function(A){return z.findFormat(p.isDataNode(A)?A.parentNode:A)},v=y(w[0]),x,u;if(!v){return""}for(x=1,u=w.length;x<u;x++){if(v!=y(w[x])){return""}}return v.nodeName.toLowerCase()},isFormatted:function(v){for(var w=0,u=v.length;w<u;w++){if(!this.findFormat(v[w])){return false}}return true}});var a=q.extend({init:function(v,u){this.format=v;this.values=u;this.finder=new g(v)},wrap:function(C,w,v){var A=v.length==1?p.blockParentOrBody(v[0]):p.commonAncestor.apply(null,v);if(p.isInline(A)){A=p.blockParentOrBody(A)}var B=p.significantChildNodes(A),z=p.findNodeIndex(B[0]),u=p.create(A.ownerDocument,C,w),x,y;for(x=0;x<B.length;x++){y=B[x];if(p.isBlock(y)){p.attr(y,w);if(u.childNodes.length){p.insertBefore(u,y);u=u.cloneNode(false)}z=p.findNodeIndex(y)+1;continue}u.appendChild(y)}if(u.firstChild){p.insertAt(A,u,z)}},apply:function(v){var C,D=this.values;function w(F){return r({},F&&F.attr,D)}this._handleImmutables(v,true);var B=p.filter("img",v);var y=h.formatByName("img",this.format);var E=w(y);e.each(B,function(){p.attr(this,E)});if(B.length==v.length){return}var u=p.filter("img",v,true);var A=this.finder.findSuitable(u);if(A.length){for(var x=0,z=A.length;x<z;x++){C=h.formatByName(p.name(A[x]),this.format);p.attr(A[x],w(C))}}else{C=this.format[0];this.wrap(C.tags[0],w(C),u)}},_handleImmutables:function(v,A){if(!this.immutables()){return}var z=h.formatByName("immutable",this.format);if(!z){return}var y=n.Immutables;var u=v.length-1;for(var x=u;x>=0;x--){var w=y.immutableParent(v[x]);if(!w){continue}if(w!==v[x+1]){if(A){p.attr(w,z.attr)}else{p.unstyle(w,z.attr.style)}}v.splice(x,1)}},immutables:function(){return this.editor&&this.editor.options.immutables},remove:function(v){var x,u,z,y,w;this._handleImmutables(v,false);for(x=0,u=v.length;x<u;x++){z=this.finder.findFormat(v[x]);if(z){w=p.name(z);if(w=="div"&&!z.getAttribute("class")){p.unwrap(z)}else{y=h.formatByName(w,this.format);if(y.attr.style){p.unstyle(z,y.attr.style)}if(y.attr.className){p.removeClass(z,y.attr.className)}}}}},toggle:function(v){var w=this,u=p.filterBy(t.nodes(v),p.htmlIndentSpace,true);if(w.finder.isFormatted(u)){w.remove(u)}else{w.apply(u)}}});var s=q.extend({init:function(w,u){var v=this;v.format=w;v.values=u;v.finder=new g(w)},apply:function(v){var G=this.format;var u=p.blockParents(v);var F=G[0].tags[0];var A,C,D,H,B;var z;var w;var y;var x;if(u.length){for(A=0,C=u.length;A<C;A++){y=u[A];x=this.immutables()&&n.Immutables.immutableParent(y);if(!x){w=p.name(y);if(w=="li"){D=y.parentNode;H=new n.ListFormatter(D.nodeName.toLowerCase(),F);B=this.editor.createRange();B.selectNode(u[A]);H.toggle(B)}else{if(F&&(w=="td"||y.attributes.contentEditable)){new a(G,this.values).apply(y.childNodes)}else{z=p.changeTag(y,F);p.attr(z,G[0].attr)}}}}}else{var E=new a(G,this.values);E.editor=this.editor;E.apply(v)}},toggle:function(v){var u=t.textNodes(v);if(!u.length){v.selectNodeContents(v.commonAncestorContainer);u=t.textNodes(v);if(!u.length){u=p.significantChildNodes(v.commonAncestorContainer)}}this.apply(u)},immutables:function(){return this.editor&&this.editor.options.immutables}});var d=o.extend({init:function(u){u.formatter=u.formatter();var v=u.formatter.finder;if(v&&h.formatByName("immutable",v.format)){v._initOptions({immutables:u.immutables})}o.fn.init.call(this,u)}});var i=c.extend({init:function(u){c.fn.init.call(this,r(u,{finder:new g(u.format),formatter:function(){return new a(u.format)}}))}});r(n,{BlockFormatFinder:g,BlockFormatter:a,GreedyBlockFormatter:s,FormatCommand:d,BlockFormatTool:i});var j=["ul","ol","li"];b("justifyLeft",[{tags:p.nonListBlockElements,attr:{style:{textAlign:"left"}}},{tags:["img"],attr:{style:{"float":"left",display:"",marginLeft:"",marginRight:""}}},{tags:["immutable"],attr:{style:{"float":"left",display:"",marginLeft:"",marginRight:""}}},{tags:j,attr:{style:{textAlign:"left",listStylePosition:""}}}]);l("justifyLeft",new i({format:f.justifyLeft,template:new m({template:h.buttonTemplate,title:"Justify Left"})}));b("justifyCenter",[{tags:p.nonListBlockElements,attr:{style:{textAlign:"center"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto","float":""}}},{tags:["immutable"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto","float":""}}},{tags:j,attr:{style:{textAlign:"center",listStylePosition:"inside"}}}]);l("justifyCenter",new i({format:f.justifyCenter,template:new m({template:h.buttonTemplate,title:"Justify Center"})}));b("justifyRight",[{tags:p.nonListBlockElements,attr:{style:{textAlign:"right"}}},{tags:["img"],attr:{style:{"float":"right",display:"",marginLeft:"",marginRight:""}}},{tags:["immutable"],attr:{style:{"float":"right",display:"",marginLeft:"",marginRight:""}}},{tags:j,attr:{style:{textAlign:"right",listStylePosition:"inside"}}}]);l("justifyRight",new i({format:f.justifyRight,template:new m({template:h.buttonTemplate,title:"Justify Right"})}));b("justifyFull",[{tags:p.nonListBlockElements,attr:{style:{textAlign:"justify"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto","float":""}}},{tags:["immutable"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto","float":""}}},{tags:j,attr:{style:{textAlign:"justify",listStylePosition:""}}}]);l("justifyFull",new i({format:f.justifyFull,template:new m({template:h.buttonTemplate,title:"Justify Full"})}))}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/linebreak",["editor/formatblock"],a)}(function(){(function(f){var j=window.kendo,i=f.extend,c=j.ui.editor,d=c.Dom,a=c.Command,l=c.Tool,k=c.BlockFormatter,e=d.normalize,g=c.RangeUtils,h=c.EditorUtils.registerTool;var b=a.extend({init:function(n){this.options=n;a.fn.init.call(this,n)},_insertMarker:function(q,p){var o=d.create(q,"a"),n;o.className="k-marker";p.insertNode(o);if(!o.parentNode){n=p.commonAncestorContainer;n.innerHTML="";n.appendChild(o)}e(o.parentNode);return o},_moveFocus:function(n,o){if(d.isEmpty(o)){n.setStartBefore(o)}else{n.selectNodeContents(o);var p=g.textNodes(n)[0];if(!p){while(o.childNodes.length&&!d.is(o.firstChild,"br")){o=o.firstChild}p=o}if(d.isEmpty(p)){n.setStartBefore(p)}else{if(d.emptyNode(p)){p.innerHTML="\uFEFF"}n.setStartBefore(p.firstChild||p)}}},shouldTrim:function(n){var q="p,h1,h2,h3,h4,h5,h6".split(","),p=d.parentOfType(n.startContainer,q),o=d.parentOfType(n.endContainer,q);return p&&!o||!p&&o},_blankAfter:function(n){while(n&&(d.isMarker(n)||d.stripBom(n.nodeValue)==="")){n=n.nextSibling}return !n},exec:function(){var s=this.getRange(),y=g.documentFromRange(s),z,t,r,u=c.emptyElementContent,o,p,A,C,n,w;this.expandImmutablesIn(s);w=this.shouldTrim(s);s.deleteContents();p=this._insertMarker(y,s);d.stripBomNode(p.previousSibling);d.stripBomNode(p.nextSibling);A=d.closestEditableOfType(p,["li"]);C=d.closestEditableOfType(p,"h1,h2,h3,h4,h5,h6".split(","));if(A){if(d.emptyNode(A)){o=d.create(y,"p");if(d.next(A)){n=s.cloneRange();n.selectNode(A);g.split(n,A.parentNode)}var B=f("br",A);if(B.length==1){B.remove()}var q=A.parentNode;var x=A.parentNode.children.length;var v=x>1&&A.childNodes.length==1&&A.children[0];d.insertAfter(o,q);d.remove(x==1?A.parentNode:A);if(v&&v!==p){o.appendChild(v);o.appendChild(p)}else{o.innerHTML=u}r=o}}else{if(C&&this._blankAfter(p)){o=d.create(y,"p");d.insertAfter(o,C);o.innerHTML=u;d.remove(p);r=o}}if(!r){if(!(A||C)){new k([{tags:["p"]}]).apply([p])}s.selectNode(p);z=d.parentOfType(p,[A?"li":C?d.name(C):"p"]);g.split(s,z,w);t=z.previousSibling;if(d.is(t,"li")&&t.firstChild&&!d.is(t.firstChild,"br")){t=t.firstChild}r=z.nextSibling;this.clean(t);this.clean(r,{links:true});if(d.is(r,"li")&&r.firstChild&&!d.is(r.firstChild,"br")){r=r.firstChild}d.remove(z);e(t)}e(r);this._moveFocus(s,r);s.collapse(true);d.scrollTo(r);g.selectRange(s)},clean:function(p,o){var n=p;if(p.firstChild&&d.is(p.firstChild,"br")){d.remove(p.firstChild)}if(d.isDataNode(p)&&!p.nodeValue){p=p.parentNode}if(p){var q=false;while(p.firstChild&&p.firstChild.nodeType==1){q=q||d.significantNodes(p.childNodes).length>1;p=p.firstChild}if(!d.isEmpty(p)&&/^\s*$/.test(p.innerHTML)&&!q){f(n).find(".k-br").remove();p.innerHTML=c.emptyElementContent}if(o&&o.links){while(p!=n){if(d.is(p,"a")&&d.emptyNode(p)){d.unwrap(p);break}p=p.parentNode}}}}});var m=a.extend({init:function(n){this.options=n;a.fn.init.call(this,n)},exec:function(){var n=this.getRange();this.expandImmutablesIn(n);var q=d.create(g.documentFromRange(n),"br");var p;var o=j.support.browser;var r=o.msie&&o.version<11;n.deleteContents();n.insertNode(q);e(q.parentNode);if(!r&&(!q.nextSibling||d.isWhitespace(q.nextSibling))){p=q.cloneNode(true);p.className="k-br";d.insertAfter(p,q)}n.setStartAfter(q);n.collapse(true);d.scrollTo(q.nextSibling||q);g.selectRange(n)}});i(c,{ParagraphCommand:b,NewLineCommand:m});h("insertLineBreak",new l({key:13,shift:true,command:m}));h("insertParagraph",new l({key:13,command:b}))}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/lists",["editor/linebreak"],a)}(function(){(function(c){var h=window.kendo,o=h.Class,p=c.extend,k=h.ui.editor,n=k.Dom,r=k.RangeUtils,g=k.EditorUtils,l=k.Command,j=k.ToolTemplate,b=k.FormatTool,e=k.BlockFormatFinder,a=r.textNodes,i=k.EditorUtils.registerTool;var q=e.extend({init:function(s){this.tag=s;var t=this.tags=[s=="ul"?"ol":"ul",s];e.fn.init.call(this,[{tags:t}])},isFormatted:function(s){var u=[];var v,t;for(t=0;t<s.length;t++){v=this.findFormat(s[t]);if(v&&n.name(v)==this.tag){u.push(v)}}if(u.length<1){return false}if(u.length!=s.length){return false}for(t=0;t<u.length;t++){if(u[t].parentNode!=v.parentNode){break}if(u[t]!=v){return false}}return true},findSuitable:function(s){var t=this.findFormat(s[0]);if(t&&n.name(t)==this.tag){return t}return null}});var f=o.extend({init:function(s,t){var u=this;u.finder=new q(s);u.tag=s;u.unwrapTag=t},isList:function(s){return n.list(s)},immutables:function(){return this.editor&&!!this.editor.options.immutables},wrap:function(x,u){var s=n.create(x.ownerDocument,"li"),v,w,t=this.immutables()?k.Immutables.immutable:c.noop;for(v=0;v<u.length;v++){w=u[v];if(n.is(w,"li")){x.appendChild(w);continue}if(this.isList(w)){while(w.firstChild){x.appendChild(w.firstChild)}continue}if(n.is(w,"td")){while(w.firstChild){s.appendChild(w.firstChild)}x.appendChild(s);w.appendChild(x);x=x.cloneNode(false);s=s.cloneNode(false);continue}s.appendChild(w);if(n.isBlock(w)){x.appendChild(s);if(!t(w)){n.unwrap(w)}s=s.cloneNode(false)}}if(s.firstChild){x.appendChild(s)}},containsAny:function(u,s){for(var t=0;t<s.length;t++){if(n.isAncestorOrSelf(u,s[t])){return true}}return false},suitable:function(u,s){if(u.className=="k-marker"){var t=u.nextSibling;if(t&&n.isBlock(t)){return false}t=u.previousSibling;if(t&&n.isBlock(t)){return false}}return this.containsAny(u,s)||n.isInline(u)||u.nodeType==3},_parentLists:function(t){var s=n.closestEditable(t);return c(t).parentsUntil(s,"ul,ol")},split:function(v){var u=a(v);var z,t,w;if(u.length){z=n.parentOfType(u[0],["li"]);t=n.parentOfType(u[u.length-1],["li"]);v.setStartBefore(z);v.setEndAfter(t);for(var x=0,s=u.length;x<s;x++){var y=this.finder.findFormat(u[x]);if(y){w=this._parentLists(y);if(w.length){r.split(v,w.last()[0],true)}else{r.split(v,y,true)}}}}},merge:function(s,v){var u=v.previousSibling,t;while(u&&(u.className=="k-marker"||u.nodeType==3&&n.isWhitespace(u))){u=u.previousSibling}if(u&&n.name(u)==s){while(v.firstChild){u.appendChild(v.firstChild)}n.remove(v);v=u}t=v.nextSibling;while(t&&(t.className=="k-marker"||t.nodeType==3&&n.isWhitespace(t))){t=t.nextSibling}if(t&&n.name(t)==s){while(v.lastChild){t.insertBefore(v.lastChild,t.firstChild)}n.remove(v)}},breakable:function(s){return s!=s.ownerDocument.body&&!/table|tbody|tr|td/.test(n.name(s))&&!s.attributes.contentEditable},applyOnSection:function(x,u){var C=this.tag;var y=n.closestSplittableParent(u);var B=[];var A=this.finder.findSuitable(u);if(!A){A=new q(C=="ul"?"ol":"ul").findSuitable(u)}var z;if(/table|tbody/.test(n.name(y))){z=c.map(u,function(D){return n.parentOfType(D,["td"])})}else{z=n.significantChildNodes(y);if(c.grep(z,n.isBlock).length){z=c.grep(z,c.proxy(function(D){return this.containsAny(D,u)},this))}if(!z.length){z=u}}function s(){B.push(this)}for(var w=0;w<z.length;w++){var v=z[w];var t=(!A||!n.isAncestorOrSelf(A,v))&&this.suitable(v,u);if(!t){continue}if(A&&this.isList(v)){c.each(v.children,s);n.remove(v)}else{B.push(v)}}if(B.length==z.length&&this.breakable(y)){B=[y]}if(!A){A=n.create(y.ownerDocument,C);n.insertBefore(A,B[0])}this.wrap(A,B);while(n.isBom(A.nextSibling)){n.remove(A.nextSibling)}if(!n.is(A,C)){n.changeTag(A,C)}this.merge(C,A)},apply:function(t){var y=0,A=[],B,s,z,v,x=t.length,u=this.immutables()?k.Immutables.immutableParent:c.noop;function w(){if(B){A.push({section:B,nodes:s})}}for(y=0;y<x;y++){v=u(t[y])||t[y];z=n.closestEditable(v,["td","body"]);if(!B||z!=B){w();s=[v];B=z}else{s.push(v)}}w();for(y=0;y<A.length;y++){this.applyOnSection(A[y].section,A[y].nodes)}},unwrap:function(w){var u=w.ownerDocument.createDocumentFragment(),v=this.unwrapTag,t,s,x,y;for(s=w.firstChild;s;s=s.nextSibling){x=n.create(w.ownerDocument,v||"p");while(s.firstChild){y=s.firstChild;if(n.isBlock(y)){if(x.firstChild){u.appendChild(x);x=n.create(w.ownerDocument,v||"p")}u.appendChild(y)}else{x.appendChild(y)}}if(x.firstChild){u.appendChild(x)}}t=this._parentLists(w);if(t[0]){n.insertAfter(u,t.last()[0]);t.last().remove()}else{n.insertAfter(u,w)}n.remove(w)},remove:function(t){var v;for(var u=0,s=t.length;u<s;u++){v=this.finder.findFormat(t[u]);if(v){this.unwrap(v)}}},toggle:function(t){var v=this,s=a(t),u=t.commonAncestorContainer;if(!s.length){t.selectNodeContents(u);s=a(t);if(!s.length){var w=u.ownerDocument.createTextNode("");t.startContainer.appendChild(w);s=[w];t.selectNode(w.parentNode)}}s=n.filterBy(s,n.htmlIndentSpace,true);if(v.finder.isFormatted(s)){v.split(t);v.remove(s)}else{v.apply(s)}}});var d=l.extend({init:function(s){s.formatter=new f(s.tag);l.fn.init.call(this,s)}});var m=b.extend({init:function(s){this.options=s;b.fn.init.call(this,p(s,{finder:new q(s.tag)}))},command:function(s){return new d(p(s,{tag:this.options.tag}))}});p(k,{ListFormatFinder:q,ListFormatter:f,ListCommand:d,ListTool:m});i("insertUnorderedList",new m({tag:"ul",template:new j({template:g.buttonTemplate,title:"Insert unordered list"})}));i("insertOrderedList",new m({tag:"ol",template:new j({template:g.buttonTemplate,title:"Insert ordered list"})}))}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/link",["editor/lists"],a)}(function(){(function(e,g){var r=window.kendo,A=r.Class,C=e.extend,w=e.proxy,u=r.ui.editor,z=u.Dom,G=u.RangeUtils,l=u.EditorUtils,v=u.Command,k=u.Tool,t=u.ToolTemplate,H=u.InlineFormatter,y=u.InlineFormatFinder,b=G.textNodes,p=G.editableTextNodes,s=u.EditorUtils.registerTool,o=r.keys;var d="http://";var i=/^\w*:\/\//;var h=/[\w\/\$\-_\*\?]/i;var B=A.extend({findSuitable:function(J){return z.parentOfType(J,["a"])}});var x=A.extend({init:function(){this.finder=new B()},apply:function(O,M){var J=this.immutables?p(O):b(O);var L,Q,S,P,R;if(M.innerHTML){Q=G.documentFromRange(O);L=G.getMarkers(O);O.deleteContents();P=z.create(Q,"a",M);O.insertNode(P);R=P.parentNode;if(z.name(R)=="a"){z.insertAfter(P,R)}if(z.emptyNode(R)){z.remove(R)}var K=P;for(var N=0;N<L.length;N++){z.insertAfter(L[N],K);K=L[N]}if(L.length){z.insertBefore(Q.createTextNode("\uFEFF"),L[1]);z.insertAfter(Q.createTextNode("\uFEFF"),L[1]);O.setStartBefore(L[0]);O.setEndAfter(L[L.length-1])}}else{S=new H([{tags:["a"]}],M);S.finder=this.finder;S.apply(J)}}});var f=v.extend({init:function(J){var K=this;J.formatter={toggle:function(M){var L=K.immutables()?p(M):b(M);new H([{tags:["a"]}]).remove(L)}};this.options=J;v.fn.init.call(this,J)}});var F=v.extend({init:function(J){var K;this.options=J;v.fn.init.call(this,J);this.formatter=new x();if(!J.url){this.attributes=null;this.async=true}else{this.exec=function(){this.formatter.immutables=K&&K.immutables();this.formatter.apply(J.range,{href:J.url,innerHTML:J.text||J.url,target:J.target})}}},_dialogTemplate:function(){return r.template("<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\"><div class='k-edit-label'><label for='k-editor-link-url'>#: messages.linkWebAddress #</label></div><div class='k-edit-field'><input type='text' class='k-input k-textbox' id='k-editor-link-url'></div><div class='k-edit-label k-editor-link-text-row'><label for='k-editor-link-text'>#: messages.linkText #</label></div><div class='k-edit-field k-editor-link-text-row'><input type='text' class='k-input k-textbox' id='k-editor-link-text'></div><div class='k-edit-label'><label for='k-editor-link-title'>#: messages.linkToolTip #</label></div><div class='k-edit-field'><input type='text' class='k-input k-textbox' id='k-editor-link-title'></div><div class='k-edit-label'></div><div class='k-edit-field'><input type='checkbox' class='k-checkbox' id='k-editor-link-target'><label for='k-editor-link-target' class='k-checkbox-label'>#: messages.linkOpenInNewWindow #</label></div><div class='k-edit-buttons k-state-default'><button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button><button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button></div></div>")({messages:this.editor.options.messages})},exec:function(){var N=this.editor.options.messages;this._initialText="";this._range=this.lockRange(true);this.formatter.immutables=this.immutables();var L=b(this._range);var J=L.length?this.formatter.finder.findSuitable(L[0]):null;var K=L.length&&z.name(L[0])=="img";var M=this.createDialog(this._dialogTemplate(),{title:N.createLink,close:w(this._close,this),visible:false});if(J){this._range.selectNodeContents(J);L=b(this._range)}this._initialText=this.linkText(L);M.find(".k-dialog-insert").click(w(this._apply,this)).end().find(".k-dialog-close").click(w(this._close,this)).end().find(".k-edit-field input").keydown(w(this._keydown,this)).end().find("#k-editor-link-url").val(this.linkUrl(J)).end().find("#k-editor-link-text").val(this._initialText).end().find("#k-editor-link-title").val(J?J.title:"").end().find("#k-editor-link-target").attr("checked",J?J.target=="_blank":false).end().find(".k-editor-link-text-row").toggle(!K);this._dialog=M.data("kendoWindow").center().open();e("#k-editor-link-url",M).focus().select()},_keydown:function(K){var J=r.keys;if(K.keyCode==J.ENTER){this._apply(K)}else{if(K.keyCode==J.ESC){this._close(K)}}},_apply:function(N){var K=this._dialog.element;var J=e("#k-editor-link-url",K).val();var P,O,M;var L=e("#k-editor-link-text",K);if(J&&J!=d){if(J.indexOf("@")>0&&!/^(\w+:)|(\/\/)/i.test(J)){J="mailto:"+J}this.attributes={href:J};P=e("#k-editor-link-title",K).val();if(P){this.attributes.title=P}if(L.is(":visible")){O=L.val();if(!O&&!this._initialText){this.attributes.innerHTML=J}else{if(O&&O!==this._initialText){this.attributes.innerHTML=z.stripBom(O)}}}M=e("#k-editor-link-target",K).is(":checked");this.attributes.target=M?"_blank":null;this.formatter.apply(this._range,this.attributes)}this._close(N);if(this.change){this.change()}},_close:function(J){J.preventDefault();this._dialog.destroy();z.windowFromDocument(G.documentFromRange(this._range)).focus();this.releaseRange(this._range)},linkUrl:function(J){if(J){return J.getAttribute("href",2)}return d},linkText:function(J){var L="";var K;for(K=0;K<J.length;K++){L+=J[K].nodeValue}return z.stripBom(L||"")},redo:function(){var J=this.lockRange(true);this.formatter.apply(J,this.attributes);this.releaseRange(J)}});var q=v.extend({init:function(J){v.fn.init.call(this,J);this.formatter=new x()},exec:function(){var M=this.detectLink();if(!M){return}var L=this.getRange();var K=new r.ui.editor.Marker();var J=L.cloneRange();J.setStart(M.start.node,M.start.offset);J.setEnd(M.end.node,M.end.offset);L=this.lockRange();K.add(J);this.formatter.apply(J,{href:this._ensureWebProtocol(M.text)});K.remove(J);this.releaseRange(L)},detectLink:function(){var J=this.getRange();var K=new n({node:J.startContainer,offset:J.startOffset,cancelAtNode:function(M){return M&&z.name(M)==="a"}});var L=new a(K);return L.detectLink()},changesContent:function(){return !!this.detectLink()},_ensureWebProtocol:function(K){var J=this._hasProtocolPrefix(K);return J?K:this._prefixWithWebProtocol(K)},_hasProtocolPrefix:function(J){return i.test(J)},_prefixWithWebProtocol:function(J){return d+J}});var c=k.extend({init:function(J){this.options=J;this.finder=new y([{tags:["a"]}]);k.fn.init.call(this,e.extend(J,{command:f}))},initialize:function(K,J){k.fn.initialize.call(this,K,J);K.addClass("k-state-disabled")},update:function(K,J){K.toggleClass("k-state-disabled",!this.finder.isFormatted(J)).removeClass("k-state-hover")}});var a=A.extend({init:function(J){this.traverser=J;this.start=I();this.end=I();this.text=""},detectLink:function(){var K=this.traverser.node;var O=this.traverser.offset;if(z.isDataNode(K)){var N=K.data.substring(0,O);if(/\s{2}$/.test(z.stripBom(N))){return}}else{if(O===0){var M=z.closestEditableOfType(K,z.blockElements);if(M&&M.previousSibling){this.traverser.init({node:M.previousSibling})}}}this.traverser.traverse(e.proxy(this._detectEnd,this));if(!this.end.blank()){this.traverser=this.traverser.clone(this.end);this.traverser.traverse(e.proxy(this._detectStart,this));if(!this._isLinkDetected()){var L=this.traverser.extendOptions(this.start);var J=new m(L);J.traverse(e.proxy(this._skipStartPuntuation,this));if(!this._isLinkDetected()){this.start=I()}}}if(this.start.blank()){return null}else{return{start:this.start,end:this.end,text:this.text}}},_isLinkDetected:function(){return i.test(this.text)||/^w{3}\./i.test(this.text)},_detectEnd:function(L,K){var J=D(L,h);if(J>-1){this.end.node=K;this.end.offset=J+1;return false}},_detectStart:function(M,L){var J=D(M,/\s/);var K=J+1;this.text=M.substring(K)+this.text;this.start.node=L;this.start.offset=K;if(J>-1){return false}},_skipStartPuntuation:function(N,L,M){var J=E(N,/\w/);var K=J;if(J===-1){K=N.length}this.text=this.text.substring(K);this.start.node=L;this.start.offset=K+(M|0);if(J>-1){return false}}});function D(L,K){var J=L.length;while(J--&&!K.test(L[J])){}return J}function E(L,J){var K=J.exec(L);return K?K.index:-1}var I=function(){return{node:null,offset:null,blank:function(){return this.node===null&&this.offset===null}}};var j=A.extend({init:function(J){this.node=J.node;this.offset=J.offset===g?z.isDataNode(this.node)&&this.node.length||0:J.offset;this.cancelAtNode=J.cancelAtNode||this.cancelAtNode||e.noop},traverse:function(J){if(!J){return}this.cancel=false;this._traverse(J,this.node,this.offset)},_traverse:function(P,M,O){if(!M||this.cancel){return}if(M.nodeType===3){var N=M.data;if(O!==g){N=this.subText(N,O)}this.cancel=P(N,M,O)===false}else{var J=this.edgeNode(M);this.cancel=this.cancel||this.cancelAtNode(J);return this._traverse(P,J)}var L=this.next(M);if(!L){var K=M.parentNode;while(!L&&z.isInline(K)){L=this.next(K);K=K.parentNode}}this.cancel=this.cancel||this.cancelAtNode(L);this._traverse(P,L)},extendOptions:function(J){return e.extend({node:this.node,offset:this.offset,cancelAtNode:this.cancelAtNode},J||{})},edgeNode:function(J){},next:function(J){},subText:function(K,J){}});var n=j.extend({subText:function(K,J){return K.substring(0,J)},next:function(J){return J.previousSibling},edgeNode:function(J){return J.lastChild},clone:function(J){var K=this.extendOptions(J);return new n(K)}});var m=j.extend({subText:function(K,J){return K.substring(J)},next:function(J){return J.nextSibling},edgeNode:function(J){return J.firstChild},clone:function(J){var K=this.extendOptions(J);return new m(K)}});C(r.ui.editor,{LinkFormatFinder:B,LinkFormatter:x,UnlinkCommand:f,LinkCommand:F,AutoLinkCommand:q,UnlinkTool:c,DomTextLinkDetection:a,LeftDomTextTraverser:n,RightDomTextTraverser:m});s("createLink",new k({key:"K",ctrl:true,command:F,template:new t({template:l.buttonTemplate,title:"Create Link"})}));s("unlink",new c({key:"K",ctrl:true,shift:true,template:new t({template:l.buttonTemplate,title:"Remove Link"})}));s("autoLink",new k({key:[o.ENTER,o.SPACEBAR],keyPressCommand:true,command:q}))}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/file",["kendo.filebrowser","editor/link"],a)}(function(){(function(g,d){var o=window.kendo,n=g.extend,l=o.ui.editor,j=l.EditorUtils,e=l.Dom,k=j.registerTool,c=l.ToolTemplate,i=l.RangeUtils,a=l.Command,p=l.LinkFormatter,m=i.textNodes,q=o.keys,b="#k-editor-file-url",f="#k-editor-file-title";var h=a.extend({init:function(r){var s=this;a.fn.init.call(s,r);s.formatter=new p();s.async=true;s.attributes={}},insertFile:function(t,s){var r=this.attributes;var u=i.documentFromRange(s);if(r.href&&r.href!="http://"){if(!t){t=e.create(u,"a",{href:r.href});t.innerHTML=r.innerHTML;s.deleteContents();s.insertNode(t);if(!t.nextSibling){e.insertAfter(u.createTextNode("\uFEFF"),t)}s.setStartAfter(t);s.setEndAfter(t);i.selectRange(s);return true}else{e.attr(t,r)}}return false},_dialogTemplate:function(r){return o.template('<div class="k-editor-dialog k-popup-edit-form k-edit-form-container"># if (showBrowser) { #<div class="k-filebrowser"></div># } #<div class=\'k-edit-label\'><label for="k-editor-file-url">#: messages.fileWebAddress #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-file-url"></div><div class=\'k-edit-label\'><label for="k-editor-file-title">#: messages.fileTitle #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-file-title"></div><div class="k-edit-buttons k-state-default"><button class="k-dialog-insert k-button k-primary">#: messages.dialogInsert #</button><button class="k-dialog-close k-button">#: messages.dialogCancel #</button></div></div>')({messages:this.editor.options.messages,showBrowser:r})},redo:function(){var s=this,r=s.lockRange();this.formatter.apply(r,this.attributes);s.releaseRange(r)},exec:function(){var y=this,x=y.lockRange(),r=m(x),v=false,t=r.length?this.formatter.finder.findSuitable(r[0]):null,z,E=y.editor.options,w=E.messages,C=E.fileBrowser,u=!!(o.ui.FileBrowser&&C&&C.transport&&C.transport.read!==d),s={title:w.insertFile,visible:false,resizable:u};this.expandImmutablesIn(x);function B(H){var G=z.element,F=G.find(b).val().replace(/ /g,"%20"),I=G.find(f).val();y.attributes={href:F,innerHTML:I!==""?I:F};v=y.insertFile(t,x);D(H);if(y.change){y.change()}}function D(F){F.preventDefault();z.destroy();e.windowFromDocument(i.documentFromRange(x)).focus();if(!v){y.releaseRange(x)}}function A(F){if(F.keyCode==q.ENTER){B(F)}else{if(F.keyCode==q.ESC){D(F)}}}s.close=D;if(u){s.width=750}z=this.createDialog(y._dialogTemplate(u),s).toggleClass("k-filebrowser-dialog",u).find(".k-dialog-insert").click(B).end().find(".k-dialog-close").click(D).end().find(".k-edit-field input").keydown(A).end().find(b).val(t?t.getAttribute("href",2):"http://").end().find(f).val(t?t.title:"").end().data("kendoWindow");if(u){y._fileBrowser=new o.ui.FileBrowser(z.element.find(".k-filebrowser"),n({},C));y._fileBrowser.bind("change",function(F){if(F.selected.get("type")==="f"){z.element.find(b).val(this.value())}});y._fileBrowser.bind("apply",B)}z.center().open();z.element.find(b).focus().select()}});o.ui.editor.FileCommand=h;k("insertFile",new l.Tool({command:h,template:new c({template:j.buttonTemplate,title:"Insert File"})}))}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/image",["kendo.imagebrowser","editor/link"],a)}(function(){(function(j,f){var p=window.kendo,o=j.extend,n=p.ui.editor,l=n.EditorUtils,g=n.Dom,m=l.registerTool,d=n.ToolTemplate,k=n.RangeUtils,a=n.Command,q=p.keys,c="#k-editor-image-url",b="#k-editor-image-title",i="#k-editor-image-width",h="#k-editor-image-height";var e=a.extend({init:function(r){var s=this;a.fn.init.call(s,r);s.async=true;s.attributes={}},insertImage:function(t,s){var r=this.attributes;var u=k.documentFromRange(s);if(r.src&&r.src!="http://"){var v=function(){setTimeout(function(){if(!r.width){t.removeAttribute("width")}if(!r.height){t.removeAttribute("height")}t.removeAttribute("complete")})};if(!t){t=g.create(u,"img",r);t.onload=t.onerror=v;s.deleteContents();s.insertNode(t);if(!t.nextSibling){g.insertAfter(u.createTextNode("\uFEFF"),t)}v();s.setStartAfter(t);s.setEndAfter(t);k.selectRange(s);return true}else{t.onload=t.onerror=v;g.attr(t,r);v()}}return false},_dialogTemplate:function(r){return p.template('<div class="k-editor-dialog k-popup-edit-form k-edit-form-container"># if (showBrowser) { #<div class="k-filebrowser k-imagebrowser"></div># } #<div class=\'k-edit-label\'><label for="k-editor-image-url">#: messages.imageWebAddress #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-url"></div><div class=\'k-edit-label\'><label for="k-editor-image-title">#: messages.imageAltText #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-title"></div><div class=\'k-edit-label\'><label for="k-editor-image-width">#: messages.imageWidth #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-width"></div><div class=\'k-edit-label\'><label for="k-editor-image-height">#: messages.imageHeight #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-height"></div><div class="k-edit-buttons k-state-default"><button class="k-dialog-insert k-button k-primary">#: messages.dialogInsert #</button><button class="k-dialog-close k-button">#: messages.dialogCancel #</button></div></div>')({messages:this.editor.options.messages,showBrowser:r})},redo:function(){var s=this,r=s.lockRange();if(!s.insertImage(k.image(r),r)){s.releaseRange(r)}},exec:function(){var y=this,w=y.lockRange(),u=false,v=k.image(w),B=v&&v.getAttribute("width")||"",x=v&&v.getAttribute("height")||"",z,F=y.editor.options,t=F.messages,C=F.imageBrowser,s=!!(p.ui.ImageBrowser&&C&&C.transport&&C.transport.read!==f),r={title:t.insertImage,visible:false,resizable:s};this.expandImmutablesIn(w);function D(J){var H=z.element,G=parseInt(H.find(i).val(),10),I=parseInt(H.find(h).val(),10);y.attributes={src:H.find(c).val().replace(/ /g,"%20"),alt:H.find(b).val()};y.attributes.width=null;y.attributes.height=null;if(!isNaN(G)&&G>0){y.attributes.width=G}if(!isNaN(I)&&I>0){y.attributes.height=I}u=y.insertImage(v,w);E(J);if(y.change){y.change()}}function E(G){G.preventDefault();z.destroy();g.windowFromDocument(k.documentFromRange(w)).focus();if(!u){y.releaseRange(w)}}function A(G){if(G.keyCode==q.ENTER){D(G)}else{if(G.keyCode==q.ESC){E(G)}}}r.close=E;if(s){r.width=750}z=this.createDialog(y._dialogTemplate(s),r).toggleClass("k-filebrowser-dialog",s).find(".k-dialog-insert").click(D).end().find(".k-dialog-close").click(E).end().find(".k-edit-field input").keydown(A).end().find(c).val(v?v.getAttribute("src",2):"http://").end().find(b).val(v?v.alt:"").end().find(i).val(B).end().find(h).val(x).end().data("kendoWindow");if(s){this._imageBrowser=new p.ui.ImageBrowser(z.element.find(".k-imagebrowser"),o({},C));this._imageBrowser.bind("change",function(G){if(G.selected.get("type")==="f"){z.element.find(c).val(this.value())}});this._imageBrowser.bind("apply",D)}z.center().open();z.element.find(c).focus().select()}});p.ui.editor.ImageCommand=e;m("insertImage",new n.Tool({command:e,template:new d({template:l.buttonTemplate,title:"Insert Image"})}))}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/components",["editor/image"],a)}(function(){(function(b,f){var e=window.kendo,a=e.ui.DropDownList,d=e.ui.editor.Dom;var c=a.extend({init:function(h,g){var i=this;a.fn.init.call(i,h,g);if(e.support.mobileOS.ios){this._initSelectOverlay();this.bind("dataBound",b.proxy(this._initSelectOverlay,this))}i.text(i.options.title);i.bind("open",function(){if(i.options.autoSize){var j=i.list,k;j.css({whiteSpace:"nowrap",width:"auto"});k=j.width();if(k){k+=20}else{k=i._listWidth}j.css("width",k+e.support.scrollbar());i._listWidth=k}})},options:{name:"SelectBox",index:-1},_initSelectOverlay:function(){var o=this;var n=o.value();var l=this.dataSource.view();var p;var j="";var k=e.htmlEncode;for(var h=0;h<l.length;h++){p=l[h];j+="<option value='"+k(p.value)+"'";if(p.value==n){j+=" selected"}j+=">"+k(p.text)+"</option>"}var m=b("<select class='k-select-overlay'>"+j+"</select>");var g=b(this.element).closest(".k-widget");g.next(".k-select-overlay").remove();m.insertAfter(g);m.on("change",function(){o.value(this.value);o.trigger("change")})},value:function(i){var h=this,g=a.fn.value.call(h,i);if(i===f){return g}if(!a.fn.value.call(h)){h.text(h.options.title)}},decorate:function(h){var n=this,o=n.dataSource,j=o.data(),k,g,m,l;if(h){n.list.css("background-color",d.getEffectiveBackground(b(h)))}for(k=0;k<j.length;k++){g=j[k].tag||"span";m=j[k].className;l=d.inlineStyle(h,g,{className:m});l=l.replace(/"/g,"'");j[k].style=l+";display:inline-block"}o.trigger("change")}});e.ui.plugin(c);e.ui.editor.SelectBox=c}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/indent",["editor/components"],a)}(function(){(function(d,e){var m=window.kendo,s=m.Class,t=d.extend,p=m.ui.editor,r=p.Dom,h=p.EditorUtils,n=h.registerTool,q=p.Command,g=p.Tool,o=p.ToolTemplate,u=p.RangeUtils,c=r.blockElements,f=p.BlockFormatFinder,b=p.BlockFormatter;function j(w,z){var v=d(w).css("direction")=="rtl",y=v?"Right":"Left",x=r.name(w)!="td"?"margin"+y:"padding"+y;if(z===e){return w.style[x]||0}else{if(z>0){w.style[x]=z+"px"}else{w.style[x]="";if(!w.style.cssText){w.removeAttribute("style")}}}}var l=s.extend({init:function(){this.finder=new f([{tags:r.blockElements}])},apply:function(v){v=r.filterBy(v,r.htmlIndentSpace,true);var C=this.finder.findSuitable(v),A=[],z,B,H,F,G;C=this.mapImmutables(C);if(C.length){for(z=0,B=C.length;z<B;z++){if(r.is(C[z],"li")){if(!d(C[z]).index()){A.push(C[z].parentNode)}else{if(d.inArray(C[z].parentNode,A)<0){A.push(C[z])}}}else{A.push(C[z])}}while(A.length){H=A.shift();if(r.is(H,"li")){F=H.parentNode;G=d(H).prev("li");var E=G.find("ul,ol").last();var y=d(H).children("ul,ol")[0];if(y&&G[0]){if(E[0]){E.append(H);E.append(d(y).children());r.remove(y)}else{G.append(y);y.insertBefore(H,y.firstChild)}}else{y=G.children("ul,ol")[0];if(!y){y=r.create(H.ownerDocument,r.name(F));G.append(y)}while(H&&H.parentNode==F){y.appendChild(H);H=A.shift()}}}else{var x=parseInt(j(H),10)+30;j(H,x);for(var w=0;w<A.length;w++){if(d.contains(H,A[w])){A.splice(w,1)}}}}}else{var D=new b([{tags:["p"]}],{style:{marginLeft:30}});D.apply(v)}},mapImmutables:function(v){if(!this.immutables){return v}else{var w=[];return d.map(v,function(x){var y=p.Immutables.immutableParent(x);if(y){if(d.inArray(y,w)===-1){w.push(y)}else{return null}}return y||x})}},remove:function(v){v=r.filterBy(v,r.htmlIndentSpace,true);var C=this.finder.findSuitable(v),A,y,z,B,w,D,E,x;C=this.mapImmutables(C);for(y=0,z=C.length;y<z;y++){E=d(C[y]);if(E.is("li")){B=E.parent();w=B.parent();if(w.is("li,ul,ol")&&!j(B[0])){if(A&&d.contains(A,w[0])){continue}D=E.nextAll("li");if(D.length){d(B[0].cloneNode(false)).appendTo(E).append(D)}if(w.is("li")){E.insertAfter(w)}else{E.appendTo(w)}if(!B.children("li").length){B.remove()}continue}else{if(A==B[0]){continue}A=B[0]}}else{A=C[y]}x=parseInt(j(A),10)-30;j(A,x)}}});var a=q.extend({init:function(v){var w=this;v.formatter={toggle:d.proxy(function(x){var y=new l();y.immutables=this.editor&&this.editor.options.immutables;y.apply(u.nodes(x))},w)};q.fn.init.call(this,v)}});var i=q.extend({init:function(v){var w=this;v.formatter={toggle:d.proxy(function(x){var y=new l();y.immutables=this.editor&&this.editor.options.immutables;y.remove(u.nodes(x))},w)};q.fn.init.call(this,v)}});var k=g.extend({init:function(v){g.fn.init.call(this,v);this.finder=new f([{tags:c}])},initialize:function(w,v){g.fn.initialize.call(this,w,v);d.extend(this.options,{immutables:v.editor&&v.editor.options.immutables});w.addClass("k-state-disabled")},update:function(D,x){var A=this.finder.findSuitable(x),z,v,B,C,w,y;for(B=0,C=A.length;B<C;B++){w=A[B];if(this.options.immutables){y=p.Immutables.immutableParent(w);if(y){w=y}}z=j(w);if(!z){v=d(w).parents("ul,ol").length;z=r.is(w,"li")&&(v>1||j(w.parentNode))||r.ofType(w,["ul","ol"])&&v>0}if(z){D.removeClass("k-state-disabled");return}}D.addClass("k-state-disabled").removeClass("k-state-hover")}});t(p,{IndentFormatter:l,IndentCommand:a,OutdentCommand:i,OutdentTool:k});n("indent",new g({command:a,template:new o({template:h.buttonTemplate,title:"Indent"})}));n("outdent",new k({command:i,template:new o({template:h.buttonTemplate,title:"Outdent"})}))}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/viewhtml",["editor/indent"],a)}(function(){(function(e,d){var i=window.kendo,h=e.extend,g=i.ui.editor,f=g.EditorUtils,a=g.Command,j=g.Tool,c=g.ToolTemplate;var b=a.extend({init:function(k){var l=this;l.options=k;a.fn.init.call(l,k);l.attributes=null;l.async=true},exec:function(){var l=this,m=l.editor,s=m.options,k=m.options.messages,o=e(i.template(b.template)(k)).appendTo(document.body),p=".k-editor-textarea",n;s.serialization.immutables=m.immutables;n=b.indent(m.value());s.serialization.immutables=d;function q(t){s.deserialization.immutables=m.immutables;m.value(o.find(p).val());s.deserialization.immutables=d;r(t);if(l.change){l.change()}m.trigger("change")}function r(t){t.preventDefault();o.data("kendoWindow").destroy();if(m.immutables){m.immutables.serializedImmutables={}}m.focus()}this.createDialog(o,{title:k.viewHtml,close:r,visible:false}).find(p).val(n).end().find(".k-dialog-update").click(q).end().find(".k-dialog-close").click(r).end().data("kendoWindow").center().open();o.find(p).focus()}});h(b,{template:"<div class='k-editor-dialog k-popup-edit-form k-edit-form-container k-viewhtml-dialog'><textarea class='k-editor-textarea k-input'></textarea><div class='k-edit-buttons k-state-default'><button class='k-dialog-update k-button k-primary'>#: dialogUpdate #</button><button class='k-dialog-close k-button'>#: dialogCancel #</button></div></div>",indent:function(k){return k.replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"</$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"")}});i.ui.editor.ViewHtmlCommand=b;g.EditorUtils.registerTool("viewHtml",new j({command:b,template:new c({template:f.buttonTemplate,title:"View HTML"})}))}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/formatting",["editor/viewhtml"],a)}(function(){(function(e){var k=window.kendo,i=k.ui.editor,n=i.Tool,b=i.ToolTemplate,l=i.DelayedExecutionTool,a=i.Command,d=i.Dom,g=i.EditorUtils,f=i.RangeUtils,h=g.registerTool;var m=l.extend({init:function(o){var p=this;n.fn.init.call(p,k.deepExtend({},p.options,o));p.type="kendoSelectBox";p.finder={getFormat:function(){return""}}},options:{items:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],width:110},toFormattingItem:function(p){var q=p.value;if(!q){return p}if(p.tag||p.className){return p}var o=q.indexOf(".");if(o===0){p.className=q.substring(1)}else{if(o==-1){p.tag=q}else{p.tag=q.substring(0,o);p.className=q.substring(o+1)}}return p},command:function(o){var q=this;var p=o.value;p=this.toFormattingItem(p);return new i.FormatCommand({range:o.range,formatter:function(){var s,r=(p.tag||p.context||"span").split(","),t=[{tags:r,attr:{className:p.className||""}}];if(e.inArray(r[0],d.inlineElements)>=0){s=new i.GreedyInlineFormatter(t)}else{s=new i.GreedyBlockFormatter(t)}s.editor=q.editor;return s}})},initialize:function(t,s){var p=s.editor;var o=this.options;var r=o.name;var q=this;q.editor=p;t.width(o.width);t.kendoSelectBox({dataTextField:"text",dataValueField:"value",dataSource:o.items||p.options[r],title:p.options.messages[r],autoSize:true,change:function(){var u=this.dataItem();if(u){n.exec(p,r,u.toJSON())}},dataBound:function(){var v,u=this.dataSource.data();for(v=0;v<u.length;v++){u[v]=q.toFormattingItem(u[v])}},highlightFirst:false,template:k.template('<span unselectable="on" style="display:block;#=(data.style||"")#">#:data.text#</span>')});t.addClass("k-decorated").closest(".k-widget").removeClass("k-"+r).find("*").addBack().attr("unselectable","on")},getFormattingValue:function(u,o){for(var r=0;r<u.length;r++){var v=u[r];var w=v.tag||v.context||"";var t=v.className?"."+v.className:"";var q=w+t;var s=e(o[0]).closest(q)[0];if(!s){continue}if(o.length==1){return v.value}for(var p=1;p<o.length;p++){if(!e(o[p]).closest(q)[0]){break}else{if(p==o.length-1){return v.value}}}}return""},update:function(t,p){var u=e(t).data(this.type);if(!u){return}var v=u.dataSource,o=v.data(),s,r,q=d.commonAncestor.apply(null,p);if(q!=d.closestEditable(q)&&this._ancestor==q){return}else{this._ancestor=q}for(s=0;s<o.length;s++){r=o[s].context;o[s].visible=!r||!!e(q).closest(r).length}v.filter([{field:"visible",operator:"eq",value:true}]);l.fn.update.call(this,t,p);u.value(this.getFormattingValue(v.view(),p));u.wrapper.toggleClass("k-state-disabled",!v.view().length)},destroy:function(){this._ancestor=null}});var c=a.extend({exec:function(){var p=this.lockRange(true);this.tagsToClean=this.options.remove||"strong,em,span,sup,sub,del,b,i,u,font".split(",");f.wrapSelectedElements(p);var o=f.mapAll(p,function(s){return s});for(var r=o.length-1;r>=0;r--){var q=o[r];if(!this.immutableParent(q)){this.clean(q)}}this.releaseRange(p)},clean:function(t){if(!t||d.isMarker(t)){return}var p=d.name(t);if(p=="ul"||p=="ol"){var o=new i.ListFormatter(p);var s=t.previousSibling;var r=t.nextSibling;o.unwrap(t);for(;s&&s!=r;s=s.nextSibling){this.clean(s)}}else{if(p=="blockquote"){d.changeTag(t,"p")}else{if(t.nodeType==1&&!d.insignificant(t)){for(var q=t.childNodes.length-1;q>=0;q--){this.clean(t.childNodes[q])}t.removeAttribute("style");t.removeAttribute("class")}else{j(t)}}}if(e.inArray(p,this.tagsToClean)>-1){d.unwrap(t)}},immutableParent:function(o){return this.immutables()&&i.Immutables.immutableParent(o)}});function j(r){var o=d.closestEditableOfType(r,["li"]);if(o){var q=new i.ListFormatter(d.name(o.parentNode));var p=k.ui.editor.W3CRange.fromNode(r);p.selectNode(o);q.toggle(p)}}e.extend(i,{FormattingTool:m,CleanFormatCommand:c});h("formatting",new m({template:new b({template:g.dropDownListTemplate,title:"Format"})}));h("cleanFormatting",new n({command:c,template:new b({template:g.buttonTemplate,title:"Clean formatting"})}))}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/toolbar",["editor/formatting"],a)}(function(){(function(e,f){var l=window.kendo;var k=l.ui;var q=k.editor;var d=k.Widget;var t=e.extend;var o=e.proxy;var j=l.keys;var p=".kendoEditor";var i=l.ui.editor.EditorUtils;var m=l.ui.editor.ToolTemplate;var h=l.ui.editor.Tool;var a=l._outerWidth;var c=l._outerHeight;var s="overflowAnchor";var n=".k-tool-group:visible a.k-tool:not(.k-state-disabled),.k-tool.k-overflow-anchor,.k-tool-group:visible .k-widget.k-colorpicker,.k-tool-group:visible .k-selectbox,.k-tool-group:visible .k-dropdown,.k-tool-group:visible .k-combobox .k-input";var g={"k-i-sup-script":"superscript","k-i-sub-script":"subscript","k-i-align-left":"justifyLeft","k-i-align-center":"justifyCenter","k-i-align-right":"justifyRight","k-i-align-justify":"justifyFull","k-i-list-unordered":"insertUnorderedList","k-i-list-ordered":"insertOrderedList","k-i-login":"import","k-i-indent-increase":"indent","k-i-indent-decrease":"outdent","k-i-link-horizontal":"createLink","k-i-unlink-horizontal":"unlink","k-i-image":"insertImage","k-i-file-add":"insertFile","k-i-html":"viewHtml","k-i-foreground-color":"foreColor","k-i-paint":"backColor","k-i-table-insert":"createTable","k-i-table-column-insert-left":"addColumnLeft","k-i-table-column-insert-right":"addColumnRight","k-i-table-row-insert-above":"addRowAbove","k-i-table-row-insert-below":"addRowBelow","k-i-table-row-delete":"deleteRow","k-i-table-column-delete":"deleteColumn","k-i-table-properties":"tableWizard","k-i-table-wizard":"tableWizardInsert","k-i-clear-css":"cleanFormatting"};var r=h.extend({initialize:function(w,u){w.attr({unselectable:"on"});var v=u.editor.toolbar;w.on("click",e.proxy(function(){this.overflowPopup.toggle()},v))},options:{name:s},command:e.noop,update:e.noop,destroy:e.noop});i.registerTool(s,new r({key:"",ctrl:true,template:new m({template:i.overflowAnchorTemplate})}));var b=d.extend({init:function(v,u){var w=this;u=t({},u,{name:"EditorToolbar"});d.fn.init.call(w,v,u);if(u.popup){w._initPopup()}if(u.resizable&&u.resizable.toolbar){w._resizeHandler=l.onResize(function(){w.resize()});w.element.addClass("k-toolbar-resizable")}},events:["execute"],groups:{basic:["bold","italic","underline","strikethrough"],scripts:["subscript","superscript"],alignment:["justifyLeft","justifyCenter","justifyRight","justifyFull"],links:["insertImage","insertFile","createLink","unlink"],lists:["insertUnorderedList","insertOrderedList","indent","outdent"],tables:["createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn"],advanced:["viewHtml","cleanFormatting","print","pdf","exportAs","import"],fonts:["fontName","fontSize"],colors:["foreColor","backColor"]},overflowFlaseTools:["formatting","fontName","fontSize","foreColor","backColor","insertHtml"],_initPopup:function(){var u=this;this.window=e(this.element).wrap("<div class='editorToolbarWindow k-header' />").parent().prepend("<button class='k-button k-button-bare k-editortoolbar-dragHandle'><span class='k-icon k-i-handler-drag' /></button>").kendoWindow({title:false,resizable:false,draggable:{dragHandle:".k-editortoolbar-dragHandle"},animation:{open:{effects:"fade:in"},close:{effects:"fade:out"}},minHeight:42,visible:false,autoFocus:false,actions:[],dragend:function(){this._moved=true}}).on("mousedown",function(v){if(!e(v.target).is(".k-icon")){u.preventPopupHide=true}}).on("focusout",function(){u.options.editor.element.focusout()}).data("kendoWindow")},_toggleOverflowStyles:function(v,u){v.find("li").toggleClass("k-item k-state-default",u).find(".k-tool:not(.k-state-disabled),.k-overflow-button").toggleClass("k-overflow-button k-button",u)},_initOverflowPopup:function(w){var v=this;var u="<ul class='k-editor-overflow-popup k-overflow-container k-list-container'></ul>";v.overflowPopup=e(u).appendTo("body").kendoPopup({anchor:w,origin:"bottom right",position:"top right",copyAnchorStyles:false,open:function(x){if(this.element.is(":empty")){x.preventDefault()}v._toggleOverflowStyles(this.element,true)},activate:o(v.focusOverflowPopup,v)}).data("kendoPopup")},items:function(){var w=this.options.resizable&&this.options.resizable.toolbar,v,u;u=this.element.children().find("> *, select");if(w){v=this.overflowPopup;u=u.add(v.element.children().find("> *"))}return u},focused:function(){return this.element.find(".k-state-focused").length>0||this.preventPopupHide||this.overflowPopup&&this.overflowPopup.visible()},toolById:function(u){var w,v=this.tools;for(w in v){if(w.toLowerCase()==u){return v[w]}}},toolGroupFor:function(w){var v,u=this.groups;if(this.isCustomTool(w)){return"custom"}for(v in u){if(e.inArray(w,u[v])>=0){return v}}},bindTo:function(v){var x=this,w=x.window;if(x._editor){x._editor.unbind("select",o(x.resize,x))}x._editor=v;if(x.options.resizable&&x.options.resizable.toolbar){v.options.tools.push(s)}x.tools=x.expandTools(v.options.tools);x.render();x.element.find(".k-combobox .k-input").keydown(function(A){var y=e(this).closest(".k-combobox").data("kendoComboBox"),z=A.keyCode;if(z==j.RIGHT||z==j.LEFT){y.close()}else{if(z==j.DOWN){if(!y.dropDown.isOpened()){A.stopImmediatePropagation();y.open()}}}});x._attachEvents();x.items().each(function u(){var C=x._toolName(this),z=C!=="moreVertical"?x.tools[C]:x.tools.overflowAnchor,y=z&&z.options,B=v.options.messages,A=y&&y.tooltip||B[C],D=e(this);if(!z||!z.initialize){return}if(C=="fontSize"||C=="fontName"){var E=B[C+"Inherit"];D.find("input").val(E).end().find("span.k-input").text(E).end()}z.initialize(D,{title:x._appendShortcutSequence(A,z),editor:x._editor});D.closest(".k-widget",x.element).addClass("k-editor-widget");D.closest(".k-colorpicker",x.element).next(".k-colorpicker").addClass("k-editor-widget")});v.bind("select",o(x.resize,x));x.update();if(w){w.wrapper.css({top:"",left:"",width:""})}},show:function(){var w=this,v=w.window,A=w.options.editor,z,y,x,u=l.support.browser;if(v){z=v.wrapper;y=A.element;if(!z.is(":visible")||!w.window.options.visible){if(!z[0].style.width){z.width(a(y)-parseInt(z.css("border-left-width"),10)-parseInt(z.css("border-right-width"),10))}if(!v._moved){x=y.offset();z.css({top:Math.max(0,parseInt(x.top,10)-c(z)-parseInt(w.window.element.css("padding-bottom"),10)),left:Math.max(0,parseInt(x.left,10))})}if((u.msie||u.edge)&&w._overlaps(y)){setTimeout(function(){v.open()},0)}else{v.open()}}}},_overlaps:function(x){var w=this.window.wrapper,v=w.offset(),A=v.left,B=v.top,z=x.offset(),u=z.left,y=z.top;return !(u+x.width()<A||u>A+w.width()||y+x.height()<B||y>B+w.height())},hide:function(){if(this.window){this.window.close()}},focus:function(){var v="tabIndex";var w=this.element;var u=this._editor.element.attr(v);w.attr(v,u||0).focus().find(n).first().focus();if(!u&&u!==0){w.removeAttr(v)}},focusOverflowPopup:function(){var v="tabIndex";var w=this.overflowPopup.element;var u=this._editor.element.attr(v);w.closest(".k-animation-container").addClass("k-overflow-wrapper");w.attr(v,u||0).find(n).first().focus();if(!u&&u!==0){w.removeAttr(v)}},_appendShortcutSequence:function(w,u){if(!u.key){return w}var v=w+" (";if(u.ctrl){v+="Ctrl + "}if(u.shift){v+="Shift + "}if(u.alt){v+="Alt + "}v+=u.key+")";return v},_nativeTools:["insertLineBreak","insertParagraph","redo","undo","autoLink"],tools:{},isCustomTool:function(u){return !(u in l.ui.Editor.defaultTools)},expandTools:function(B){var v,A,x=this._nativeTools,z,w=l.deepExtend({},l.ui.Editor.defaultTools),u={},y;for(A=0;A<B.length;A++){v=B[A];y=v.name;if(e.isPlainObject(v)){if(y&&w[y]){u[y]=t({},w[y]);t(u[y].options,v)}else{z=t({cssClass:"k-i-gear",type:"button",title:""},v);if(!z.name){z.name="custom"}z.cssClass="k-"+z.name;if(!z.template&&z.type=="button"){z.template=q.EditorUtils.buttonTemplate;z.title=z.title||z.tooltip}u[y]={options:z}}}else{if(w[v]){u[v]=w[v]}}}for(A=0;A<x.length;A++){if(!u[x[A]]){u[x[A]]=w[x[A]]}}return u},render:function(){var E=this,K=E.tools,w,N,H,z,C=E._editor.element,u=E.element.empty(),G,v,x=E._editor.options.tools,M=l.support.browser,F,J,D=0,A=E.options.resizable&&E.options.resizable.toolbar,L=this.overflowFlaseTools;function I(P){var O;if(P.getHtml){O=P.getHtml()}else{if(!e.isFunction(P)){P=l.template(P)}O=P(w)}return e.trim(O)}function y(){if(F.children().length){if(A){F.data("position",D);D++}F.appendTo(u)}}function B(O){if(O!==s){F=e("<li class='k-tool-group' role='presentation' />");F.data("overflow",e.inArray(O,L)===-1?true:false)}else{F=e("<li class='k-overflow-tools' />")}}u.empty();if(x.length){z=x[0].name||x[0]}B(z,L);for(J=0;J<x.length;J++){z=x[J].name||x[J];w=K[z]&&K[z].options;if(!w&&e.isPlainObject(z)){w=z}N=w&&w.template;if(z=="break"){y();e("<li class='k-row-break' />").appendTo(E.element);B(z,L)}if(!N){continue}v=E.toolGroupFor(z);if(G!=v||z==s){y();B(z,L);G=v}N=I(N);H=e(N).appendTo(F);if(v=="custom"){y();B(z,L)}if(w.exec&&H.hasClass("k-tool")){H.click(o(w.exec,C[0]))}}y();e(E.element).children(":has(> .k-tool)").addClass("k-button-group");if(E.options.popup&&M.msie&&M.version<9){E.window.wrapper.find("*").attr("unselectable","on")}E.updateGroups();if(A){E._initOverflowPopup(E.element.find(".k-overflow-anchor"))}E.angular("compile",function(){return{elements:E.element}})},updateGroups:function(){e(this.element).children().each(function(){e(this).children().filter(function(){return !e(this).hasClass("k-state-disabled")}).removeClass("k-group-end").first().addClass("k-group-start").end().last().addClass("k-group-end").end()})},decorateFrom:function(u){this.items().filter(".k-decorated").each(function(){var v=e(this).data("kendoSelectBox");if(v){v.decorate(u)}})},destroy:function(){d.fn.destroy.call(this);var v,u=this.tools;for(v in u){if(u[v].destroy){u[v].destroy()}}if(this.window){this.window.destroy()}if(this._resizeHandler){l.unbindResize(this._resizeHandler)}if(this.overflowPopup){this.overflowPopup.destroy()}},_attachEvents:function(){var u=this,v=u.overflowPopup?u.overflowPopup.element:e([]);u.attachToolsEvents(u.element.add(v))},attachToolsEvents:function(w){var z=this,y="[role=button].k-tool",x=y+":not(.k-state-disabled)",A=y+".k-state-disabled",B=".k-dropdown",v=".k-colorpicker",u=[y,B,v].join(",");w.off(p).on("mouseenter"+p,x,function(){e(this).addClass("k-state-hover")}).on("mouseleave"+p,x,function(){e(this).removeClass("k-state-hover")}).on("mousedown"+p,u,function(C){C.preventDefault()}).on("keydown"+p,n,function(I){var H=this;var F=z.options.resizable&&z.options.resizable.toolbar;var D,E,G=I.keyCode;function C(M,J,N){var L=J.find(n);var K=L.index(H)+M;if(N){K=Math.max(0,Math.min(L.length-1,K))}return L[K]}if(G==j.RIGHT||G==j.LEFT){if(!e(H).hasClass(".k-dropdown")){D=C(G==j.RIGHT?1:-1,z.element,true)}}else{if(F&&(G==j.UP||G==j.DOWN)){D=C(G==j.DOWN?1:-1,z.overflowPopup.element,true)}else{if(G==j.ESC){if(z.overflowPopup&&z.overflowPopup.visible()){z.overflowPopup.close()}D=z._editor}else{if(G==j.TAB&&!(I.ctrlKey||I.altKey)){if(F){E=e(H.parentElement).hasClass("k-overflow-tool-group")?z.overflowPopup.element:z.element}else{E=z.element}if(I.shiftKey){D=C(-1,E)}else{D=C(1,E);if(!D){D=z._editor}}}}}}if(D){I.preventDefault();D.focus()}if(G===j.ENTER&&e(H).is("a")&&!e(H).attr("href")){z._executeToolCommand(H,I)}}).on("click"+p,x,function(C){z._executeToolCommand(this,C)}).on("click"+p,A,function(C){C.preventDefault()})},_executeToolCommand:function(x,w){var v=this;var u=e(x);w.preventDefault();w.stopPropagation();u.removeClass("k-state-hover");if(!u.is("[data-popup]")){v._editor.exec(v._toolName(x))}},_toolName:function(v){if(!v){return}var w=v.className;if(/k-tool\b/i.test(w)){w=v.firstChild.className}var u=e.grep(w.split(" "),function(y){return !/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(y)});if(u[0]){var x=u[0];if(g[x]){x=g[x]}if(x.indexOf("k-i-")>=0){return l.toCamelCase(x.substring(x.indexOf("k-i-")+4))}else{return x.substring(x.lastIndexOf("-")+1)}}return"custom"},refreshTools:function(){var x=this,A=l.ui.editor,w=x._editor,v=w.getRange(),u=A.RangeUtils.textNodes(v),y=w.options.immutables,z=x._immutablesContext(v);u=A.Dom.filterBy(u,A.Dom.htmlIndentSpace,true);if(!u.length){u=[v.startContainer]}x.items().each(function(){var B=x.tools[x._toolName(this)];if(B){var C=e(this);if(B.update){B.update(C,u)}if(y){x._updateImmutablesState(B,C,z)}}});this.update()},_immutablesContext:function(u){if(this._editor.options.immutables){var v=l.ui.editor;if(u.collapsed){return v.Immutables.immutablesContext(u)}else{return v.RangeUtils.editableTextNodes(u).length===0}}},_updateImmutablesState:function(z,C,u){var v=z.name;var B=C;var w=z.options.trackImmutables;if(w===f){w=e.inArray(v,q.Immutables.toolsToBeUpdated)>-1}if(w){var A=u?"none":"";if(!C.is(".k-tool")){var y=C.data();for(var D in y){if(D.match(/^kendo[A-Z][a-zA-Z]*/)){var x=y[D];B=x.wrapper;break}}}B.css("display",A);var E=B.closest("li");if(E.children(":visible").length===0){E.css("display",A)}}},update:function(){this.updateGroups()},_resize:function(x){var w=x.width;var v=this.options.resizable&&this.options.resizable.toolbar;var u=this.overflowPopup;this.refreshTools();if(!v){return}if(u.visible()){u.close(true)}this._refreshWidths();this._shrink(w);this._stretch(w);this._toggleOverflowStyles(this.element,false);this._toggleOverflowStyles(this.overflowPopup.element,true);this.element.children("li.k-overflow-tools").css("visibility",u.element.is(":empty")?"hidden":"visible")},_refreshWidths:function(){this.element.children("li").each(function(u,v){var w=e(v);w.data("outerWidth",a(w,true))})},_shrink:function(w){var x,u;if(w<this._groupsWidth()){u=this._visibleGroups().filter(":not(.k-overflow-tools)");for(var v=u.length-1;v>=0;v--){x=u.eq(v);if(w>this._groupsWidth()){break}else{this._hideGroup(x)}}}},_stretch:function(v){var x,w;if(v>this._groupsWidth()){w=this._hiddenGroups();for(var u=0;u<w.length;u++){x=w.eq(u);if(v<this._groupsWidth()||!this._showGroup(x,v)){break}}}},_hiddenGroups:function(){var u=this.overflowPopup;var v=this.element.children("li.k-tool-group").filter(":hidden");v=v.add(u.element.children("li"));v.sort(function(x,w){return e(x).data("position")>e(w).data("position")?1:-1});return v},_visibleGroups:function(){return this.element.children("li.k-tool-group, li.k-overflow-tools").filter(":visible")},_groupsWidth:function(){var u=0;this._visibleGroups().each(function(){u+=e(this).data("outerWidth")});return Math.ceil(u)},_hideGroup:function(v){if(v.data("overflow")){var u=this.overflowPopup;v.detach().prependTo(u.element).addClass("k-overflow-tool-group")}else{v.hide()}},_showGroup:function(x,v){var u,w;if(x.length&&v>this._groupsWidth()+x.data("outerWidth")){if(x.hasClass("k-overflow-tool-group")){u=x.data("position");if(u===0){x.detach().prependTo(this.element)}else{w=this.element.children().filter(function(y,z){return e(z).data("position")===u-1});x.detach().insertAfter(w)}x.removeClass("k-overflow-tool-group")}else{x.show()}return true}return false}});e.extend(q,{Toolbar:b})}(window.jQuery||window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/tables",["editor/toolbar"],a)}(function(){(function(f,g){var o=window.kendo,A=f.extend,w=f.proxy,t=o.ui.editor,x=t.Dom,k=t.EditorUtils,B=t.RangeUtils,u=t.Command,y="kendoEditor",e="k-state-active",a="k-state-selected",j=t.Tool,s=t.ToolTemplate,d=t.InsertHtmlCommand,i=t.BlockFormatFinder,r=t.EditorUtils.registerTool,v=o.getTouches;var C=o.template;var h="<td style='width:#=width#%;'>#=content#</td>";var l=new i([{tags:["table"]}]);var D=d.extend({init:function(E){var F=f.extend({postProcess:this.postProcess,skipCleaners:true},E||{});d.fn.init.call(this,F)},_tableHtml:function(H,F){H=H||1;F=F||1;var E=C(h)({width:100/F,content:t.emptyTableCellContent});var G=100/H;return"<table class='k-table' data-last>"+new Array(H+1).join("<tr style='height:"+G+"%;'>"+new Array(F+1).join(E)+"</tr>")+"</table>"},postProcess:function(F,E){var G=f("table[data-last]",F.document).removeAttr("data-last");E.setStart(G.find("td")[0],0);E.collapse(true);F.selectRange(E)},exec:function(){var E=this.options;E.html=this._tableHtml(E.rows,E.columns);d.fn.exec.call(this)}});var n=j.extend({initialize:function(J,G){j.fn.initialize.call(this,J,G);var F=f(this.options.popupTemplate).appendTo("body").kendoPopup({anchor:J,copyAnchorStyles:false,open:w(this._open,this),activate:w(this._activate,this),close:w(this._close,this)}).data("kendoPopup");J.click(w(this._toggle,this)).keydown(w(this._keydown,this));var H=this._editor=G.editor;this._popup=F;var E=new t.TableWizardTool({template:new s({template:k.buttonTemplate,title:H.options.messages.tableWizard}),command:t.TableWizardCommand,insertNewTable:true});r("tableWizardInsert",E);var I=f("<div class='k-editor-toolbar'>"+E.options.template.getHtml()+"</div>");I.appendTo(F.element);if(H.toolbar){H.toolbar.attachToolsEvents(I)}},popup:function(){return this._popup},_activate:f.noop,_open:function(){this._popup.options.anchor.addClass(e)},_close:function(){this._popup.options.anchor.removeClass(e)},_keydown:function(G){var F=o.keys;var E=G.keyCode;if(E==F.DOWN&&G.altKey){this._popup.open()}else{if(E==F.ESC){this._popup.close()}}},_toggle:function(F){var E=f(F.target).closest(".k-tool");if(!E.hasClass("k-state-disabled")){this.popup().toggle()}},update:function(F){var E=this.popup();if(E.wrapper&&E.wrapper.css("display")=="block"){E.close()}F.removeClass("k-state-hover")},destroy:function(){this._popup.destroy()}});var m=n.extend({init:function(E){this.cols=8;this.rows=6;n.fn.init.call(this,f.extend(E,{command:D,popupTemplate:"<div class='k-ct-popup'>"+new Array(this.cols*this.rows+1).join("<span class='k-ct-cell k-state-disabled' />")+"<div class='k-status'></div></div>"}))},_activate:function(){var I=this,H=I._popup.element,O=H.find(".k-ct-cell"),J=O.eq(0),L=O.eq(O.length-1),E=o.getOffset(J),G=o.getOffset(L),M=I.cols,P=I.rows,F,K;H.find("*").addBack().attr("unselectable","on");G.left+=L[0].offsetWidth;G.top+=L[0].offsetHeight;F=(G.left-E.left)/M;K=(G.top-E.top)/P;function N(R){var Q=f(window);return{row:Math.floor((R.clientY+Q.scrollTop()-E.top)/K)+1,col:Math.floor((R.clientX+Q.scrollLeft()-E.left)/F)+1}}H.autoApplyNS(y).on("mousemove",function(Q){I._setTableSize(N(Q))}).on("mouseleave",function(){I._setTableSize()}).on("down",function(Q){Q.preventDefault();var R=v(Q)[0];I._exec(N(R.location))})},_valid:function(E){return E&&E.row>0&&E.col>0&&E.row<=this.rows&&E.col<=this.cols},_exec:function(E){if(this._valid(E)){this._editor.exec("createTable",{rows:E.row,columns:E.col});this._popup.close()}},_setTableSize:function(H){var G=this._popup.element;var E=G.find(".k-status");var F=G.find(".k-ct-cell");var J=this.cols;var I=this._editor.options.messages;if(this._valid(H)){E.text(o.format(I.createTableHint,H.row,H.col));F.each(function(K){f(this).toggleClass(a,K%J<H.col&&K/J<H.row)})}else{E.text(I.dialogCancel);F.removeClass(a)}},_keydown:function(G){n.fn._keydown.call(this,G);if(!this._popup.visible()){return}var K=o.keys;var J=G.keyCode;var L=this._popup.element.find(".k-ct-cell");var M=Math.max(L.filter(".k-state-selected").last().index(),0);var E=Math.floor(M/this.cols);var H=M%this.cols;var F=false;if(J==K.DOWN&&!G.altKey){F=true;E++}else{if(J==K.UP){F=true;E--}else{if(J==K.RIGHT){F=true;H++}else{if(J==K.LEFT){F=true;H--}}}}var I={row:Math.max(1,Math.min(this.rows,E+1)),col:Math.max(1,Math.min(this.cols,H+1))};if(J==K.ENTER){this._exec(I)}else{this._setTableSize(I)}if(F){G.preventDefault();G.stopImmediatePropagation()}},_open:function(){var E=this._editor.options.messages;n.fn._open.call(this);this.popup().element.find(".k-status").text(E.dialogCancel).end().find(".k-ct-cell").removeClass(a)},_close:function(){n.fn._close.call(this);this.popup().element.off("."+y)}});var c=u.extend({exec:function(){var E=this.lockRange(true),J=E.endContainer,H,I,F;while(x.name(J)!="td"){J=J.parentNode}if(this.immutables()&&t.Immutables.immutableParent(J)){return}I=J.parentNode;H=I.children.length;F=I.cloneNode(true);for(var G=0;G<I.cells.length;G++){F.cells[G].innerHTML=t.emptyTableCellContent}if(this.options.position=="before"){x.insertBefore(F,I)}else{x.insertAfter(F,I)}this.releaseRange(E)}});var z=u.extend({exec:function(){var I=this.lockRange(true),E=x.closest(I.endContainer,"td"),L=x.closest(E,"table"),J,G,M=L.rows,K,F,H=this.options.position;if(this.immutables()&&t.Immutables.immutableParent(E)){return}J=x.findNodeIndex(E,true);for(G=0;G<M.length;G++){K=M[G].cells[J];F=K.cloneNode();F.innerHTML=t.emptyTableCellContent;if(H=="before"){x.insertBefore(F,K)}else{x.insertAfter(F,K)}}this.releaseRange(I)}});var p=u.extend({exec:function(){var F=this.lockRange();var I=B.mapAll(F,function(K){return f(K).closest("tr")[0]});var J=I[0];if(this.immutables()&&t.Immutables.immutableParent(J)){return}var H=x.closest(J,"table");var E;if(H.rows.length<=I.length){E=x.next(H);if(!E||x.insignificant(E)){E=x.prev(H)}x.remove(H)}else{for(var G=0;G<I.length;G++){J=I[G];x.removeTextSiblings(J);E=x.next(J)||x.prev(J);E=E.cells[0];x.remove(J)}}if(E){F.setStart(E,0);F.collapse(true);this.editor.selectRange(F)}}});var q=u.extend({exec:function(){var F=this.lockRange(),L=x.closest(F.endContainer,"td"),I=x.closest(L,"table"),J=I.rows,H=x.findNodeIndex(L,true),K=J[0].cells.length,E,G;if(this.immutables()&&t.Immutables.immutableParent(L)){return}if(K==1){E=x.next(I);if(!E||x.insignificant(E)){E=x.prev(I)}x.remove(I)}else{x.removeTextSiblings(L);E=x.next(L)||x.prev(L);for(G=0;G<J.length;G++){x.remove(J[G].cells[H])}}if(E){F.setStart(E,0);F.collapse(true);this.editor.selectRange(F)}}});var b=j.extend({command:function(E){E=A(E,this.options);if(E.action=="delete"){if(E.type=="row"){return new p(E)}else{return new q(E)}}else{if(E.type=="row"){return new c(E)}else{return new z(E)}}},initialize:function(F,E){j.fn.initialize.call(this,F,E);F.addClass("k-state-disabled")},update:function(G,F){var E=!l.isFormatted(F);G.toggleClass("k-state-disabled",E)}});A(o.ui.editor,{PopupTool:n,TableCommand:D,InsertTableTool:m,TableModificationTool:b,InsertRowCommand:c,InsertColumnCommand:z,DeleteRowCommand:p,DeleteColumnCommand:q});r("createTable",new m({template:new s({template:k.buttonTemplate,popup:true,title:"Create table"})}));r("addColumnLeft",new b({type:"column",position:"before",template:new s({template:k.buttonTemplate,title:"Add column on the left"})}));r("addColumnRight",new b({type:"column",template:new s({template:k.buttonTemplate,title:"Add column on the right"})}));r("addRowAbove",new b({type:"row",position:"before",template:new s({template:k.buttonTemplate,title:"Add row above"})}));r("addRowBelow",new b({type:"row",template:new s({template:k.buttonTemplate,title:"Add row below"})}));r("deleteRow",new b({type:"row",action:"delete",template:new s({template:k.buttonTemplate,title:"Delete row"})}));r("deleteColumn",new b({type:"column",action:"delete",template:new s({template:k.buttonTemplate,title:"Delete column"})}))}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/export",["editor/main"],a)}(function(){(function(e,c){var j=window.kendo,i=e.extend,k=e.proxy,h=j.ui.editor,f=h.EditorUtils,a=h.Command,m=h.Tool,g=f.registerTool,b=h.ToolTemplate,l=[{text:"Docx",value:"docx"},{text:"Rtf",value:"rtf"},{text:"Pdf",value:"pdf"},{text:"Html",value:"html"},{text:"Plain Text",value:"txt"}];var d=a.extend({init:function(o){var p=this;p.options=o;a.fn.init.call(p,o);p.attributes=null;p.exportType=o.exportType},exec:function(){var p=this;var o=this.lockRange(true);p.postToProxy();p.releaseRange(o)},postToProxy:function(){this.generateForm().appendTo("body").submit().remove()},generateForm:function(){var q=this;var o=q.editor.options.exportAs;var p=e("<form>").attr({action:o&&o.proxyURL||"",method:"POST"});p.append([q.valueInput(),q.exportTypeInput(),q.fileNameInput()]);return p},valueInput:function(){var o=this.editor;return e("<input>").attr({value:o.encodedValue(),name:"value",type:"hidden"})},exportTypeInput:function(){var o=this;return e("<input>").attr({value:o.exportType,name:"exportType",type:"hidden"})},fileNameInput:function(){var p=this.editor;var o=p.options.exportAs;var q=o&&o.fileName||p.element.attr("id")||"editor";return e("<input>").attr({value:q,name:"fileName",type:"hidden"})}});var n=m.extend({init:function(p){var o=this;m.fn.init.call(o,j.deepExtend({},o.options,p));o.type="kendoSelectBox"},options:{items:l,width:115},command:function(o){var p=o.value;return new h.ExportAsCommand({range:o.range,exportType:p.exportType})},initialize:function(u,t){var q=this;var r=t.editor;var p=q.options;var s=p.name;var o=k(q.changeHandler,q);var v=p.items||r.options[s];v.unshift({text:r.options.messages[s],value:""});q.editor=r;u.width(p.width);u.kendoSelectBox({dataTextField:"text",dataValueField:"value",dataSource:v,autoSize:true,change:o,open:function(x){var w=x.sender;w.items()[0].style.display="none";w.unbind("open")},highlightFirst:false,template:j.template('<span unselectable="on" style="display:block;#=(data.style||"")#">#:data.text#</span>')});u.addClass("k-decorated").closest(".k-widget").removeClass("k-"+s).find("*").addBack().attr("unselectable","on")},changeHandler:function(r){var p=r.sender;var o=p.dataItem();var q=o&&o.value;this._exec(q);p.value("")},_exec:function(o){if(o){m.exec(this.editor,this.options.name,{exportType:o})}},destroy:function(){this._ancestor=null}});i(h,{ExportAsTool:n,ExportAsCommand:d});g("exportAs",new n({template:new b({template:f.dropDownListTemplate,title:"Export As"})}))}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/import",["editor/main"],a)}(function(){(function(e,d){var k=window.kendo,j=e.extend,l=e.proxy,h=k.ui.editor,f=h.EditorUtils,b=h.Command,m=h.Tool,g=f.registerTool,c=h.ToolTemplate,a='<div contenteditable="false" class="k-loading-mask" style="width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;"><div class="k-loading-image"></div><div class="k-loading-color"></div></div>';var i=b.extend({exec:function(){(this.editor._uploadWidget||this._initializeUploadWidget()).element.click()},_initializeUploadWidget:function(){var q=this;var p=q.editor;var n=p.options["import"];var o=e('<input id="editorImport" name="files" type="file" />').kendoUpload({success:l(q._onUploadSuccess,q),progress:l(q._onUploadProgress,q),select:l(q._onUploadSelect,q),error:l(q._onUploadError,q),complete:l(q._onUploadComplete,q),showFileList:false,multiple:false,async:{saveUrl:n.proxyUrl,autoUpload:true,saveField:"file"},validation:{allowedExtensions:n.allowedExtensions,maxFileSize:n.maxFileSize}}).getKendoUpload();p._uploadWidget=o;return o},_onUploadComplete:function(n){this._trigger("complete",n);n.sender.clearAllFiles();this._removeLoadingOverlay()},_onUploadSuccess:function(n){this.editor.value(n.response.html.replace(/<\/?body>/gi,""));this._trigger("success",n)},_onUploadProgress:function(n){this._trigger("progress",n)},_onUploadSelect:function(n){this._trigger("select",n);if(!n.files[0].validationErrors){this._initLoadingOverlay()}},_onUploadError:function(n){this._trigger("error",n)},_trigger:function(p,o){var q=this.editor;var n=q.options["import"];if(typeof n[p]==="function"){n[p].call(q,o)}},_initLoadingOverlay:function(){var n=this.editor.body;if(h.Dom.is(n,"body")){this._iframeWrapper=this._container=this.editor.wrapper.find("iframe").parent().css({position:"relative"}).append(a)}else{this._container=e(n).append(a)}k.ui.progress(this._container,true)},_removeLoadingOverlay:function(){k.ui.progress(this._container,false);e(this._iframeWrapper).css({position:""});delete this._container;delete this._iframeWrapper}});j(h,{ImportCommand:i});g("import",new m({command:i,template:new c({template:f.buttonTemplate,title:"Import"})}))}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/resizing/resizing-utils",["editor/main"],a)}(function(){(function(l,g){var s=window;var c=s.Math;var r=c.min;var t=c.max;var b=s.parseFloat;var e=l.jQuery;var v=e.extend;var p=l.ui.editor;var o="%";var u="px";var k=/(\d+)(\.?)(\d*)%/;var w=/(\d+)(\.?)(\d*)px/;var j="string";function q(x){var y=x.value;var A=x.min;var z=x.max;return t(r(b(y),b(z)),b(A))}function i(x){if(x&&!e(x).is("body")&&x.scrollHeight>x.clientHeight){return l.support.scrollbar()}return 0}function a(y,x){if(n(y)){return b(y)}else{return b(y)/x*100}}function n(x){return typeof x===j&&k.test(x)}function h(x){return typeof x===j&&w.test(x)}function d(x){return b(x)+o}function f(x){return b(x)+u}var m={constrain:q,getScrollBarWidth:i,calculatePercentageRatio:a,inPercentages:n,inPixels:h,toPercentages:d,toPixels:f};v(p,{ResizingUtils:m})}(window.kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/resizing/table-element-resizing",["editor/main","kendo.resizable","editor/resizing/resizing-utils"],a)}(function(){(function(i,d){var c=i.jQuery;var q=c.extend;var a=c.noop;var l=c.proxy;var j=i.ui.editor;var o=i.Class;var b="keydown";var n="mousedown";var m="mouseenter";var e="mouseleave";var t="mousemove";var s="mouseup";var h=",";var k=".";var p=":last-child";var f="table";var g=o.extend({init:function(v,u){var w=this;w.options=q({},w.options,u);w.options.tags=c.isArray(w.options.tags)?w.options.tags:[w.options.tags];if(c(v).is(f)){w.element=v;w._attachEventHandlers()}},destroy:function(){var v=this;var u=v.options.eventNamespace;if(v.element){c(v.element).off(u);v.element=null}c(v.options.rootElement).off(b+u);v._destroyResizeHandle()},options:{tags:[],min:0,rootElement:null,eventNamespace:"",rtl:false,handle:{dataAttribute:"",height:0,width:0,classNames:{},template:""}},_attachEventHandlers:function(){var v=this;var u=v.options;c(v.element).on(t+u.eventNamespace,u.tags.join(h),l(v.detectElementBorderHovering,v))},resizingInProgress:function(){var v=this;var u=v._resizable;if(u){return !!u.resizing}return false},resize:a,detectElementBorderHovering:function(z){var y=this;var v=y.options;var w=v.handle;var A=c(z.currentTarget);var x=y.resizeHandle;var u=w.dataAttribute;if(!y.resizingInProgress()){if(!A.is(p)&&y.elementBorderHovered(A,z)){if(x){if(x.data(u)&&x.data(u)!==A[0]){y.showResizeHandle(A,z)}}else{y.showResizeHandle(A,z)}}else{if(x){y._destroyResizeHandle()}}}},elementBorderHovered:a,showResizeHandle:function(w,v){var u=this;if(v.buttons!==0){return}u._initResizeHandle();u.setResizeHandlePosition(w);u.setResizeHandleDimensions();u.setResizeHandleDataAttributes(w[0]);u._attachResizeHandleEventHandlers();u._initResizable(w);u._hideResizeMarker();u.resizeHandle.show()},_initResizeHandle:function(){var v=this;var u=v.options;v._destroyResizeHandle();v.resizeHandle=c(u.handle.template).appendTo(u.rootElement)},setResizeHandlePosition:a,setResizeHandleDimensions:a,setResizeHandleDataAttributes:function(v){var u=this;u.resizeHandle.data(u.options.handle.dataAttribute,v)},_attachResizeHandleEventHandlers:function(){var y=this;var v=y.options;var u=v.eventNamespace;var w=v.handle.classNames.marker;var x=y.resizeHandle;y.resizeHandle.on(n+u,function(){x.find(k+w).show()}).on(s+u,function(){x.find(k+w).hide()})},_hideResizeMarker:function(){var u=this;u.resizeHandle.find(k+u.options.handle.classNames.marker).hide()},_destroyResizeHandle:function(){var u=this;if(u.resizeHandle){u._destroyResizable();u.resizeHandle.off(u.options.eventNamespace).remove();u.resizeHandle=null}},_initResizable:function(v){var u=this;if(!u.resizeHandle){return}u._destroyResizable();u._resizable=new i.ui.Resizable(v,{draggableElement:u.resizeHandle[0],start:l(u.onResizeStart,u),resize:l(u.onResize,u),resizeend:l(u.onResizeEnd,u)})},_destroyResizable:function(){var u=this;if(u._resizable){u._resizable.destroy();u._resizable=null}},onResizeStart:function(){this._disableKeyboard()},onResize:function(u){this.setResizeHandleDragPosition(u)},setResizeHandleDragPosition:a,onResizeEnd:function(v){var u=this;u.resize(v);u._destroyResizeHandle();u._enableKeyboard()},_enableKeyboard:function(){var u=this.options;c(u.rootElement).off(b+u.eventNamespace)},_disableKeyboard:function(){var u=this.options;c(u.rootElement).on(b+u.eventNamespace,function(v){v.preventDefault()})},_forceResizing:function(v){var u=this._resizable;if(u&&u.userEvents){u.userEvents._end(v)}}});var r=o.extend({create:function(w,u){var y=this;var v=u.name;var x=u.eventNamespace;c(w.body).on(m+x,f,function(B){var A=B.currentTarget;var z=w[v];B.stopPropagation();if(z){if(z.element!==A&&!z.resizingInProgress()){y._destroyResizing(w,u);y._initResizing(w,A,u)}}else{y._initResizing(w,A,u)}}).on(e+x,f,function(B){var A;var z=w[v];B.stopPropagation();if(z&&!z.resizingInProgress()&&!z.resizeHandle){A=c(z.element).parents(f)[0];if(A){y._destroyResizing(w,u);y._initResizing(w,A,u)}}}).on(e+x,function(){var z=w[v];if(z&&!z.resizingInProgress()){y._destroyResizing(w,u)}}).on(s+x,function(B){var z=w[v];var A;if(z&&z.resizingInProgress()){A=c(B.target).parents(f)[0];if(A){z._forceResizing(B);y._destroyResizing(w,u);y._initResizing(w,A,u)}}})},dispose:function(v,u){c(v.body).off(u.eventNamespace)},_initResizing:function(w,y,u){var v=u.name;var x=u.type;w[v]=new x(y,{rtl:i.support.isRtl(w.element),rootElement:w.body})},_destroyResizing:function(w,u){var v=u.name;if(w[v]){w[v].destroy();w[v]=null}}});r.current=new r();g.create=function(v,u){r.current.create(v,u)};g.dispose=function(v,u){r.current.dispose(v,u)};q(j,{TableElementResizing:g})}(window.kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/resizing/column-resizing",["editor/main","editor/resizing/resizing-utils","editor/resizing/table-element-resizing"],a)}(function(){(function(r,l){var x=window;var g=x.Math;var q=g.abs;var i=r.jQuery;var B=i.extend;var v=r.ui.editor;var n=v.TableElementResizing;var t=v.ResizingUtils;var w=t.constrain;var b=t.calculatePercentageRatio;var m=t.getScrollBarWidth;var u=t.inPercentages;var j=t.toPercentages;var k=t.toPixels;var a=r._outerWidth;var z=".kendoEditorColumnResizing";var c="k-column-resize-handle";var p="k-column-resize-marker";var y="body";var s="tbody";var f="td";var d="th";var A="tr";var o=",";var h="width";var e=n.extend({options:{tags:[f,d],min:20,rootElement:null,eventNamespace:z,rtl:false,handle:{dataAttribute:"column",width:10,height:0,classNames:{handle:c,marker:p},template:'<div class="k-column-resize-handle-wrapper" unselectable="on" contenteditable="false"><div class="'+c+'"><div class="'+p+'"></div></div></div>'}},elementBorderHovered:function(F,H){var G=this;var E=G.options;var D=E.handle.width;var C=F.offset().left+(E.rtl?0:a(F));var I=H.clientX+i(F[0].ownerDocument).scrollLeft();if(I>C-D&&I<C+D){return true}else{return false}},setResizeHandlePosition:function(H){var I=this;var F=i(I.element).children(s);var M=I.options;var K=M.rtl;var J=M.handle.width;var C=i(M.rootElement);var E=C.is(y)?0:C.scrollTop();var D=C.is(y)?0:C.scrollLeft();var L=K?0:a(H);var G=K?m(C[0]):0;I.resizeHandle.css({top:F.position().top+E,left:H.position().left+L+(D-G)-J/2,position:"absolute"})},setResizeHandleDimensions:function(){var C=this;var D=i(C.element).children(s);C.resizeHandle.css({width:C.options.handle.width,height:D.height()})},setResizeHandleDragPosition:function(L){var K=this;var I=i(i(L.currentTarget).data(K.options.handle.dataAttribute));var Q=K.options;var M=Q.handle?Q.handle.width:0;var J=Q.min;var N=Q.rtl;var G=a(I);var P=I.position().left;var E=a(I.next());var O=i(K.resizeHandle);var C=i(Q.rootElement);var D=C.is(y)?0:C.scrollLeft();var H=N?m(C[0]):0;var F=w({value:O.position().left+(D-H)+L.x.delta,min:P+(D-H)-(N?E:0)+J,max:P+G+(D-H)+(N?0:E)-M-J});O.css({left:F})},resize:function(J){var I=this;var E=i(i(J.currentTarget).data(I.options.handle.dataAttribute));var L=I.options;var H=L.rtl?-1:1;var F=L.min;var C=H*J.x.initialDelta;var G;var K;var D;I._setTableComputedWidth();I._setColumnsComputedWidth();D=a(E);K=a(E.next());G=w({value:D+C,min:F,max:D+K-F});I._resizeColumn(E[0],G);I._resizeTopAndBottomColumns(E[0],G);I._resizeAdjacentColumns(E.index(),K,D,D-G)},_setTableComputedWidth:function(){var C=this.element;if(C.style[h]===""){C.style[h]=k(a(i(C)))}},_setColumnsComputedWidth:function(){var G=this;var I=i(G.element).children(s);var C=a(I);var E=I.children(A).children(f);var F=E.length;var H=E.map(function(){return a(i(this))});var D;for(D=0;D<F;D++){if(u(E[D].style[h])){E[D].style[h]=j(b(H[D],C))}else{E[D].style[h]=k(H[D])}}},_resizeTopAndBottomColumns:function(F,I){var H=this;var E=i(F).index();var D=i(H.element).children(s).children(A).children(H.options.tags.join(o)).filter(function(){var J=this;return i(J).index()===E&&J!==F});var G=D.length;var C;for(C=0;C<G;C++){H._resizeColumn(D[C],I)}},_resizeColumn:function(C,D){if(u(C.style[h])){C.style[h]=j(b(D,a(i(this.element).children(s))))}else{C.style[h]=k(D)}},_resizeAdjacentColumns:function(F,D,C,I){var H=this;var J=i(H.element).children(s).children(A).children(H.options.tags.join(o)).filter(function(){return i(this).index()===F+1});var G=J.length;var E;for(E=0;E<G;E++){H._resizeAdjacentColumn(J[E],D,C,I)}},_resizeAdjacentColumn:function(F,D,C,I){var H=this;var E=H.options.min;var G;G=w({value:D+I,min:E,max:q(C+D-E)});H._resizeColumn(F,G)}});e.create=function(C){n.create(C,{name:"columnResizing",type:e,eventNamespace:z})};e.dispose=function(C){n.dispose(C,{eventNamespace:z})};B(v,{ColumnResizing:e})}(window.kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/resizing/row-resizing",["editor/main","editor/resizing/resizing-utils","editor/resizing/table-element-resizing"],a)}(function(){(function(o,i){var d=window.Math;var n=d.abs;var f=o.jQuery;var y=f.extend;var t=o.ui.editor;var k=t.TableElementResizing;var r=t.ResizingUtils;var j=r.getScrollBarWidth;var u=r.constrain;var a=r.calculatePercentageRatio;var s=r.inPercentages;var g=r.toPercentages;var h=r.toPixels;var c=o._outerHeight;var w=".kendoEditorRowResizing";var b="k-row-resize-handle";var e="k-row-resize-marker-wrapper";var m="k-row-resize-marker";var v="body";var x="tr";var p="tbody";var q="height";var l=k.extend({options:{tags:[x],min:20,rootElement:null,eventNamespace:w,rtl:false,handle:{dataAttribute:"row",width:0,height:10,classNames:{handle:b,marker:m},template:'<div class="k-row-resize-handle-wrapper" unselectable="on" contenteditable="false"><div class="'+b+'"><div class="'+e+'"><div class="'+m+'"></div></div></div></div>'}},elementBorderHovered:function(E,C){var B=this;var A=B.options.handle[q];var z=E.offset().top+c(E);var D=C.clientY+f(E[0].ownerDocument).scrollTop();if(D>z-A&&D<z+A){return true}else{return false}},setResizeHandlePosition:function(G){var E=this;var H=E.options;var F=H.handle[q];var D=G.position();var z=f(H.rootElement);var B=z.is(v)?0:z.scrollTop();var A=z.is(v)?0:z.scrollLeft();var C=H.rtl?j(z[0]):0;E.resizeHandle.css({top:D.top+c(G)+B-F/2,left:D.left+(A-C),position:"absolute"})},setResizeHandleDimensions:function(){var z=this;z.resizeHandle.css({width:f(z.element).children(p).width(),height:z.options.handle[q]})},setResizeHandleDragPosition:function(G){var F=this;var J=F.options;var E=J.min;var C=f(F.element).children(p);var D=C.position().top;var H=f(F.resizeHandle);var I=f(G.currentTarget).data(J.handle.dataAttribute);var z=f(J.rootElement);var B=z.is(v)?0:z.scrollTop();var A=u({value:H.position().top+B+G.y.delta,min:f(I).position().top+B+E,max:D+c(C)+B-J.handle[q]-E});H.css({top:A})},resize:function(F){var C=this;var J=C.options;var I=f(F.currentTarget).data(J.handle.dataAttribute);var D=c(f(I));var A=f(C.element);var B=c(A);var z=A.children(p);var G=z.height();var E=I.style[q];var H=u({value:D+F.y.initialDelta,min:J.min,max:n(G-J.min)});C._setRowsHeightInPixels();I.style[q]=h(H);C._setTableHeight(B+(H-D));if(s(E)){C._setRowsHeightInPercentages()}},_setRowsHeightInPixels:function(){var C=this;var D=f(C.element).children(p).children(x);var B=D.length;var z=D.map(function(){return c(f(this))});var A;for(A=0;A<B;A++){D[A].style[q]=h(z[A])}},_setRowsHeightInPercentages:function(){var D=this;var F=f(D.element).children(p);var A=F.height();var E=F.children(x);var C=E.length;var z=E.map(function(){return c(f(this))});var B;for(B=0;B<C;B++){E[B].style[q]=g(a(z[B],A))}},_setTableHeight:function(z){var A=this.element;if(s(A.style[q])){A.style[q]=g(a(z,f(A).parent().height()))}else{A.style[q]=h(z)}}});l.create=function(z){k.create(z,{name:"rowResizing",type:l,eventNamespace:w})};l.dispose=function(z){k.dispose(z,{eventNamespace:w})};y(t,{RowResizing:l})}(window.kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/resizing/table-resize-handle",["editor/main","kendo.draganddrop","editor/resizing/resizing-utils"],a)}(function(){(function(J,q){var H=J.jQuery;var o=H.extend;var W=H.noop;var V=H.proxy;var A=J.ui.editor;var c=J.Class;var p=J.ui.Draggable;var h=J.Observable;var B=A.ResizingUtils.getScrollBarWidth;var Q=J._outerWidth;var X=J._outerHeight;var K=".kendoEditorTableResizeHandle";var ab="k-table-resize-handle";var ac="dragStart";var y="drag";var x="dragEnd";var d="halfInside";var k="mouseover";var u="mouseout";var P="body";var D="table";var R="east";var v="north";var g="northeast";var a="northwest";var L="south";var m="southeast";var i="southwest";var N="west";var w=".";var C=h.extend({init:function(af){var ag=this;h.fn.init.call(ag);ag.options=o({},ag.options,af);ag.element=H(ag.options.template).appendTo(ag.options.appendTo)[0];ag._attachEventHandlers();ag._addStyles();ag._initDraggable();ag._initPositioningStrategy();ag._initDraggingStrategy();H(ag.element).data(D,ag.options.resizableElement)},destroy:function(){var af=this;H(af.element).off(K).remove();af.element=null;af._destroyDraggable();af.unbind()},options:{appendTo:null,direction:m,resizableElement:null,rtl:false,template:"<div class='k-table-resize-handle-wrapper' unselectable='on' contenteditable='false'><div class='"+ab+"'></div></div>"},events:[ac,y,x,k,u],show:function(){this._setPosition()},_setPosition:function(){var ag=this;var af=ag._positioningStrategy.getPosition();H(ag.element).css({top:af.top,left:af.left,position:"absolute"})},_attachEventHandlers:function(){var af=this;H(af.element).on(k+K,V(af._onMouseOver,af)).on(u+K,V(af._onMouseOut,af))},_onMouseOver:function(){this.trigger(k)},_onMouseOut:function(){this.trigger(u)},_addStyles:function(){var af=this;H(af.element).children(w+ab).addClass("k-resize-"+af.options.direction)},_initPositioningStrategy:function(){var ag=this;var af=ag.options;ag._positioningStrategy=M.create({name:af.direction,handle:ag.element,resizableElement:af.resizableElement,rootElement:af.rootElement,rtl:af.rtl})},_initDraggable:function(){var ag=this;var af=ag.element;if(ag._draggable||!af){return}ag._draggable=new p(af,{dragstart:V(ag._onDragStart,ag),drag:V(ag._onDrag,ag),dragend:V(ag._onDragEnd,ag)})},_onDragStart:function(){this.trigger(ac)},_onDrag:function(ag){var af=this;af.trigger(y,af._draggingStrategy.adjustDragDelta({deltaX:ag.x.delta,deltaY:ag.y.delta,initialDeltaX:ag.x.initialDelta,initialDeltaY:ag.y.initialDelta}))},_onDragEnd:function(){this.trigger(x)},_destroyDraggable:function(){var af=this;if(af._draggable){af._draggable.destroy();af._draggable=null}},_initDraggingStrategy:function(){var af=this;af._draggingStrategy=I.create({name:af.options.direction})}});var ad=c.extend({init:function(){this._items=[]},register:function(af,ag){this._items.push({name:af,type:ag})},create:function(aj){var af=this._items;var ai=af.length;var ah=aj.name?aj.name.toLowerCase():"";var ag;var al;var ak;for(ak=0;ak<ai;ak++){al=af[ak];if(al.name.toLowerCase()===ah){ag=al;break}}if(ag){return new ag.type(aj)}}});var G=ad.extend({});G.current=new G();var M=c.extend({init:function(af){var ag=this;ag.options=o({},ag.options,af)},options:{handle:null,offset:d,resizableElement:null,rootElement:null,rtl:false},getPosition:function(){var ai=this;var af=ai.calculatePosition();var ah=ai.applyHandleOffset(af);var ag=ai.applyScrollOffset(ah);return ag},calculatePosition:W,applyHandleOffset:function(af){var ag=this.options;var ah=H(ag.handle);if(ag.offset===d){return{top:af.top-X(ah)/2,left:af.left-Q(ah)/2}}return af},applyScrollOffset:function(ag){var ah=this.options;var af=H(ah.rootElement);var ai=ah.rtl?B(af[0]):0;if(!af.is(P)){return{top:ag.top+(af.scrollTop()||0),left:ag.left+(af.scrollLeft()||0)-ai}}return ag}});M.create=function(af){return G.current.create(af)};var U=M.extend({calculatePosition:function(){var af=H(this.options.resizableElement);var ag=af.position();return{top:ag.top+X(af)/2,left:ag.left+Q(af)}}});G.current.register(R,U);var ae=M.extend({calculatePosition:function(){var af=H(this.options.resizableElement);var ag=af.position();return{top:ag.top,left:ag.left+Q(af)/2}}});G.current.register(v,ae);var S=M.extend({calculatePosition:function(){var af=H(this.options.resizableElement);var ag=af.position();return{top:ag.top,left:ag.left+Q(af)}}});G.current.register(g,S);var l=M.extend({calculatePosition:function(){var af=H(this.options.resizableElement);var ag=af.position();return{top:ag.top,left:ag.left}}});G.current.register(a,l);var t=M.extend({calculatePosition:function(){var af=H(this.options.resizableElement);var ag=af.position();return{top:ag.top+X(af),left:ag.left+Q(af)/2}}});G.current.register(L,t);var E=M.extend({calculatePosition:function(){var af=H(this.options.resizableElement);var ag=af.position();return{top:ag.top+X(af),left:ag.left+Q(af)}}});G.current.register(m,E);var aa=M.extend({calculatePosition:function(){var af=H(this.options.resizableElement);var ag=af.position();return{top:ag.top+X(af),left:ag.left}}});G.current.register(i,aa);var n=M.extend({calculatePosition:function(){var af=H(this.options.resizableElement);var ag=af.position();return{top:ag.top+X(af)/2,left:ag.left}}});G.current.register(N,n);var Z=ad.extend({});Z.current=new Z();var I=c.extend({init:function(af){var ag=this;ag.options=o({},ag.options,af)},options:{deltaX:{adjustment:null,modifier:null},deltaY:{adjustment:null,modifier:null}},adjustDragDelta:function(ai){var ag=this.options;var ah=ag.deltaX.adjustment*ag.deltaX.modifier;var af=ag.deltaY.adjustment*ag.deltaY.modifier;return{deltaX:ai.deltaX*ah,deltaY:ai.deltaY*af,initialDeltaX:ai.initialDeltaX*ah,initialDeltaY:ai.initialDeltaY*af}}});I.create=function(af){return Z.current.create(af)};var f=I.extend({options:{deltaX:{adjustment:1,modifier:1},deltaY:{adjustment:0,modifier:0}}});var r=f.extend({options:{deltaX:{modifier:1}}});Z.current.register(R,r);var F=f.extend({options:{deltaX:{modifier:-1}}});Z.current.register(N,F);var b=I.extend({options:{deltaX:{adjustment:0,modifier:0},deltaY:{adjustment:1,modifier:1}}});var s=b.extend({options:{deltaY:{modifier:-1}}});Z.current.register(v,s);var T=b.extend({options:{deltaY:{modifier:1}}});Z.current.register(L,T);var Y=I.extend({options:{deltaX:{adjustment:1,modifier:1},deltaY:{adjustment:1,modifier:1}}});var O=Y.extend({options:{deltaX:{modifier:1},deltaY:{modifier:-1}}});Z.current.register(g,O);var e=Y.extend({options:{deltaX:{modifier:-1},deltaY:{modifier:-1}}});Z.current.register(a,e);var j=Y.extend({options:{deltaX:{modifier:1},deltaY:{modifier:1}}});Z.current.register(m,j);var z=Y.extend({options:{deltaX:{modifier:-1},deltaY:{modifier:1}}});Z.current.register(i,z);o(A,{TableResizeHandle:C})}(window.kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/resizing/table-resizing",["editor/main","editor/resizing/table-resize-handle","editor/resizing/resizing-utils"],a)}(function(){(function(K,p){var c=window;var E=c.Math;var Y=E.min;var x=E.max;var I=K.jQuery;var F=I.contains;var o=I.extend;var V=I.proxy;var g=K.support.browser;var A=K.ui.editor;var b=K.Class;var B=A.TableResizeHandle;var q=A.ResizingUtils;var h=q.calculatePercentageRatio;var W=q.constrain;var e=q.inPercentages;var j=q.inPixels;var r=q.toPercentages;var d=q.toPixels;var S=K._outerWidth;var X=K._outerHeight;var N=".kendoEditorTableResizing";var H="k-table-resize-handle-wrapper";var R="k-table";var L="k-table-resizing";var Z="dragStart";var z="drag";var y="dragEnd";var D="keydown";var M="mousedown";var m="mouseover";var t="mouseout";var s="td";var Q="tr";var U="tbody";var C="table";var i="width";var G="height";var T="east";var v="north";var f="northeast";var a="northwest";var O="south";var n="southeast";var k="southwest";var P="west";var w=".";function u(aa){return typeof aa==="undefined"}var J=b.extend({init:function(ab,aa){var ac=this;ac.options=o({},ac.options,aa);ac.handles=[];if(I(ab).is(C)){ac.element=ab}},destroy:function(){var aa=this;I(aa.element).off(N);aa.element=null;I(aa.options.rootElement).off(D+N);aa._destroyResizeHandles()},options:{appendHandlesTo:null,rtl:false,rootElement:null,minWidth:10,minHeight:10,handles:[{direction:a},{direction:v},{direction:f},{direction:T},{direction:n},{direction:O},{direction:k},{direction:P}]},resize:function(aa){var ab=this;var ac=o({},{deltaX:0,deltaY:0,initialDeltaX:0,initialDeltaY:0},aa);ab._resizeWidth(ac.deltaX,ac.initialDeltaX);ab._resizeHeight(ac.deltaY,ac.initialDeltaY);ab.showResizeHandles()},_resizeWidth:function(ah,ak){var ag=this;var ae=I(ag.element);var ab=ae[0].style[i];var aa=S(ae);var aj=ae.parent().width();var ai=ag._getMaxDimensionValue(i);var ad;var af;var al;var ac;if(ah===0){return}if(u(ag._initialElementWidth)){ag._initialElementWidth=aa}ac=W({value:ag._initialElementWidth+ak,min:ag.options.minWidth,max:ai});if(e(ab)){if(aa+ah>aj){af=x(ac,aj);al=Y(ac,aj)}else{af=Y(ac,aj);al=x(ac,aj)}ad=r(h(af,al))}else{ad=d(ac)}ag._setColumnsWidth();ae[0].style[i]=ad},_resizeHeight:function(al,an){var ag=this;var ae=I(ag.element);var ad=ae[0].style[G];var ac=X(ae);var aj=ae.parent();var ah=aj.height();var ak=ag._getMaxDimensionValue(G);var aa;var af;var ao;var ai;var am=ag.options.minHeight;var ab=ag._hasRowsInPixels();if(al===0){return}if(u(ag._initialElementHeight)){ag._initialElementHeight=ac}ai=W({value:ag._initialElementHeight+an,min:am,max:ak});if(ab&&al<0){ag._setRowsHeightInPercentages()}if(e(ad)){if(ac+al>ah){af=x(ai,ah);ao=Y(ai,ah)}else{af=Y(ai,ah);ao=x(ai,ah)}aa=r(h(af,ao))}else{aa=d(ai)}ae[0].style[G]=aa;if(ab&&al<0){ag._setRowsHeightInPixels()}},_getMaxDimensionValue:function(ac){var af=this;var ad=I(af.element);var ai=ac.toLowerCase();var ae=af.options.rtl?-1:1;var ag=I(af.element).parent();var ah=ag[0];var ab=ag[ai]();var aa=ae*(ac===i?ag.scrollLeft():ag.scrollTop());if(ah===ad.closest(s)[0]){if(ah.style[ai]===""&&!e(af.element.style[ai])){return Infinity}else{return ab+aa}}else{return ab+aa}},_setColumnsWidth:function(){var ae=this;var ad=I(ae.element);var aa=ad.parent()[0];var ag=ad.closest(s);var ac=ag.closest(Q).children();var ah=ac.length;var ab;function af(aj){var ai=aj.style.width;if(ai!==""){return e(ai)?true:false}else{return I(aj).hasClass(R)?true:false}}if(af(ad[0])&&aa===ag[0]&&aa.style[i]===""){for(ab=0;ab<ah;ab++){ac[ab].style[i]=d(I(ac[ab]).width())}}},_hasRowsInPixels:function(){var ab=this;var ac=I(ab.element).children(U).children(Q);for(var aa=0;aa<ac.length;aa++){if(ac[aa].style.height===""||j(ac[aa].style.height)){return true}}return false},_setRowsHeightInPercentages:function(){var ae=this;var ag=I(ae.element).children(U);var ab=ag.height();var af=ag.children(Q);var ad=af.length;var aa=af.map(function(){return X(I(this))});var ac;for(ac=0;ac<ad;ac++){af[ac].style[G]=r(h(aa[ac],ab))}},_setRowsHeightInPixels:function(){var ad=this;var ae=I(ad.element).children(U).children(Q);var ac=ae.length;var aa=ae.map(function(){return X(I(this))});var ab;for(ab=0;ab<ac;ab++){ae[ab].style[G]=d(aa[ab])}},showResizeHandles:function(){var aa=this;aa._initResizeHandles();aa._showResizeHandles()},_initResizeHandles:function(){var af=this;var ac=af.handles;var aa=af.options;var ad=af.options.handles;var ae=ad.length;var ab;if(ac&&ac.length>0){return}for(ab=0;ab<ae;ab++){af.handles.push(new B(o({appendTo:aa.appendHandlesTo,resizableElement:af.element,rootElement:aa.rootElement,rtl:aa.rtl},ad[ab])))}af._bindToResizeHandlesEvents()},_destroyResizeHandles:function(){var ac=this;var ab=ac.handles?ac.handles.length:0;for(var aa=0;aa<ab;aa++){ac.handles[aa].destroy()}},_showResizeHandles:function(){var ad=this;var ab=ad.handles||[];var ac=ab.length;var aa;for(aa=0;aa<ac;aa++){ad.handles[aa].show()}},_bindToResizeHandlesEvents:function(){var ad=this;var ab=ad.handles||[];var ac=ab.length;var aa;var ae;for(aa=0;aa<ac;aa++){ae=ab[aa];ae.bind(Z,V(ad._onResizeHandleDragStart,ad));ae.bind(z,V(ad._onResizeHandleDrag,ad));ae.bind(y,V(ad._onResizeHandleDragEnd,ad));ae.bind(m,V(ad._onResizeHandleMouseOver,ad));ae.bind(t,V(ad._onResizeHandleMouseOut,ad))}},_onResizeHandleDragStart:function(){var ab=this;var aa=I(ab.element);aa.addClass(L);ab._initialElementHeight=X(aa);ab._initialElementWidth=S(aa);ab._disableKeyboard()},_onResizeHandleDrag:function(aa){this.resize(aa)},_onResizeHandleDragEnd:function(){var aa=this;I(aa.element).removeClass(L);aa._enableKeyboard()},_enableKeyboard:function(){I(this.options.rootElement).off(D+N)},_disableKeyboard:function(){I(this.options.rootElement).on(D+N,function(aa){aa.preventDefault()})}});var l=b.extend({create:function(ab){var aa=this;I(ab.body).on(M+N,C,function(af){var ae=af.target;var ad=af.currentTarget;var ag=ab.tableResizing;var ac=ag?ag.element:null;if(ag){if(ac&&ad!==ac){if(F(ad,ac)&&ac!==ae&&F(ac,ae)){return}else{if(ac!==ae){ab._destroyTableResizing();aa._initResizing(ab,ad)}}}}else{aa._initResizing(ab,ad)}ab._showTableResizeHandles()}).on(M+N,function(af){var ag=ab.tableResizing;var ad=ag?ag.element:null;var ae=af.target;var ac=I(ae).hasClass(H)||I(ae).parents(w+H).length>0;if(ag&&ad!==ae&&!F(ad,ae)&&!ac){ab._destroyTableResizing()}})},dispose:function(aa){I(aa.body).off(N)},_initResizing:function(aa,ab){if(!g.msie&&!g.mozilla){aa.tableResizing=new J(ab,{appendHandlesTo:aa.body,rtl:K.support.isRtl(aa.element),rootElement:aa.body})}}});l.current=new l();J.create=function(aa){l.current.create(aa)};J.dispose=function(aa){l.current.dispose(aa)};o(A,{TableResizing:J})}(window.kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/immutables",["editor/tables"],a)}(function(){(function(c,e){var n=window.kendo,s=n.Class,p=n.ui.editor,r=p.Dom,x=n.template,w=p.RangeUtils,f=["ul","ol","tbody","thead","table"],g=["bold","italic","underline","strikethrough","superscript","subscript","forecolor","backcolor","fontname","fontsize","createlink","unlink","autolink","addcolumnleft","addcolumnright","addrowabove","addrowbelow","deleterow","deletecolumn","mergecells","formatting","cleanformatting"],h="k-immutable",b="["+h+"]",q="[contenteditable='false']";var t=function(y){return c(y).is("body,.k-editor")};var o=function(y){return y.getAttribute&&y.getAttribute("contenteditable")=="false"};var l=function(y){return r.closestBy(y,o,t)};var a=function(z){var y=l(z.startContainer);var A=l(z.endContainer);if(y||A){if(y){z.setStartBefore(y)}if(A){z.setEndAfter(A)}}};var d=function(y){if(l(y.commonAncestorContainer)){return true}else{if(l(y.startContainer)||l(y.endContainer)){var z=w.editableTextNodes(y);if(z.length===0){return true}}}return false};var u=function(B){var y="";var A="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var z=B||10;z>0;--z){y+=A.charAt(Math.round(Math.random()*(A.length-1)))}return y};var k=function(y){var C={empty:true},B,A,z;c(y).find(q).each(function(D,E){B=r.name(E);A=u();z="<"+B+" "+h+"='"+A+"'></"+B+">";C[A]={node:E,style:c(E).attr("style")};C.empty=false;c(E).replaceWith(z)});return C};var v=function(y,B){var A,z;c(y).find(b).each(function(C,D){A=D.getAttribute(h);z=B[A];c(D).replaceWith(z.node);if(z.style!=c(z.node).attr("style")){c(z.node).removeAttr("style").attr("style",z.style)}})};var j=function(z){var y=n.keys;return z===y.BACKSPACE||z==y.DELETE};var i=function(z){var y=z?z.options:e;if(y&&y.finder){y.finder._initOptions({immutables:true})}};var m=s.extend({init:function(y){this.editor=y;this.serializedImmutables={};this.options=c.extend({},y&&y.options&&y.options.immutables);var z=y.toolbar.tools;i(z.justifyLeft);i(z.justifyCenter);i(z.justifyRight);i(z.justifyFull)},serialize:function(z){var y=this._toHtml(z),A;if(y.indexOf(h)===-1){A=this.randomId();y=y.replace(/>/," "+h+'="'+A+'">')}else{A=y.match(/k-immutable\s*=\s*['"](.*)['"]/)[1]}this.serializedImmutables[A]=z;return y},_toHtml:function(A){var y=this.options.serialization;var z=typeof y;var B;switch(z){case"string":return x(y)(A);case"function":return y(A);default:B=r.name(A);return"<"+B+"></"+B+">"}},deserialize:function(z){var y=this;var A=this.options.deserialization;c(b,z).each(function(){var C=this.getAttribute(h);var B=y.serializedImmutables[C];if(n.isFunction(A)){A(this,B)}c(this).replaceWith(B)});y.serializedImmutables={}},randomId:function(y){return u(y)},keydown:function(B,y){var z=j(B.keyCode);var A=z&&this._cancelDeleting(B,y)||!z&&this._cancelTyping(B,y);if(A){B.preventDefault();return true}},_cancelTyping:function(B,z){var A=this.editor;var y=A.keyboard;return z.collapsed&&!y.typingInProgress&&y.isTypingKey(B)&&d(z)},_cancelDeleting:function(B,z){var G=n.keys;var A=B.keyCode===G.BACKSPACE;var F=B.keyCode==G.DELETE;if(!A&&!F){return false}var D=false;if(z.collapsed){if(d(z)){return true}var E=this.nextImmutable(z,F);if(E&&A){var C=r.closest(z.commonAncestorContainer,"li");if(C){var y=r.closest(E,"li");if(y&&y!==C){return D}}}if(E&&!r.tableCell(E)){if(r.parentOfType(E,f)===r.parentOfType(z.commonAncestorContainer,f)){while(E&&E.parentNode.childNodes.length==1){E=E.parentNode}if(r.tableCell(E)){return D}this._removeImmutable(E,z)}D=true}}return D},nextImmutable:function(z,B){var y=z.commonAncestorContainer;if(r.isBom(y)||(B&&w.isEndOf(z,y)||!B&&w.isStartOf(z,y))){var A=this._nextNode(y,B);if(A&&r.isBlock(A)&&!l(A)){while(A&&A.children&&A.children[B?0:A.children.length-1]){A=A.children[B?0:A.children.length-1]}}return l(A)}},_removeImmutable:function(B,y){var A=this.editor;var z=new p.RestorePoint(y,A.body);r.remove(B);p._finishUpdate(A,z)},_nextNode:function(B,A){var z=A?"nextSibling":"previousSibling";var C=B,y;while(C&&!y){y=C[z];if(y&&r.isDataNode(y)&&/^\s|[\ufeff]$/.test(y.nodeValue)){C=y;y=C[z]}if(!y){C=C.parentNode}}return y}});m.immutable=o;m.immutableParent=l;m.expandImmutablesIn=a;m.immutablesContext=d;m.toolsToBeUpdated=g;m.removeImmutables=k;m.restoreImmutables=v;p.Immutables=m}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/table-wizard/table-wizard-command",["editor/tables"],a)}(function(){(function(g,c){var l=window.kendo,k=l.ui.editor,h=k.EditorUtils,i=k.RangeUtils,f=k.Dom,j=h.registerTool,b=k.ToolTemplate,a=k.Command;var p=new k.BlockFormatFinder([{tags:["table"]}]);var o=new k.BlockFormatFinder([{tags:["td","th"]}]);var e=/([a-z]+|%)$/i;var d=a.extend({exec:function(){var w=this;var v=w.editor;var r=w.range=w.lockRange();var t=w._sourceTable=!w.options.insertNewTable?w._selectedTable(r):c;var q=w._selectedTableCells=t?w._selectedCells(r):c;var s={visible:false,messages:v.options.messages,closeCallback:g.proxy(w.onDialogClose,w),table:w.parseTable(t,q),dialogOptions:v.options.dialogOptions,isRtl:l.support.isRtl(v.wrapper)};var u=new k.TableWizardDialog(s);u.open()},onDialogClose:function(r){var q=this;q.releaseRange(q.range);if(r){if(q.options.insertNewTable){q.insertTable(q.createNewTable(r))}else{q.updateTable(r,q._sourceTable,q._selectedTableCells)}}},releaseRange:function(q){var r=this;var s=r.editor.document;f.windowFromDocument(s).focus();a.fn.releaseRange.call(r,q)},insertTable:function(r){var q=this.range;q.insertNode(r);q.collapse(true);this.editor.selectRange(q)},updateTable:function(u,E,y){var s=this;var A=g(E.rows).toArray();var C=u.tableProperties;var G=C.rows;var t=C.columns;var D=function(H){return H[H.length-1]};while(y.length>1){y.pop()}var q=y.length?D(y).parentNode:D(A);var F,B;s._deleteTableRows(A,A.length-G);if(A.length<G){var z=g(q).index();var x=q.cells.length;var w=G-A.length;B=q.parentNode;while(w){F=B.insertRow(z+1);s._insertCells(x-F.cells.length,F);w--}}if(A[0].cells.length>t){g(A).each(function(H,I){while(I.cells.length>t){I.deleteCell(-1)}})}if(A[0].cells.length<t){var v=g(D(y)||D(q.cells)).index();g(A).each(function(H,I){s._insertCells(t-I.cells.length,I,v+1)})}s._updateTableProperties(E,C);var r=u.cellProperties;if(y[0]){f.attr(y[0],{id:r.id||null})}(r.selectAllCells?g(A).children():g(y)).each(function(I,H){s._updateCellProperties(H,r)});s._updateCaption(E,C);C.cellsWithHeaders=C.cellsWithHeaders||false;if(s.cellsWithHeadersAssociated(E)!=C.cellsWithHeaders){s.associateCellsWithHeader(E,C.cellsWithHeaders)}},_isHeadingRow:function(q){return f.is(q.parentNode,"thead")||f.is(q.cells[0],"th")},associateCellsWithHeader:function(B,q){var w=new Date().getTime();var r=[];var u=B.rows[0].cells.length;var v,A,s;var t=function(){for(var C=0;C<u;C++){r[C]="table"+ ++w}};var z=function(D,C){g(C)[q?"attr":"removeAttr"]("id",r[D])};var y=function(D,C){g(C)[q?"attr":"removeAttr"]("headers",r[D])};var x=this._isHeadingRow;g(B.rows).each(function(C,D){if(x(D)){v=C;A=B.rows[++v];s=A&&!x(A);if(s){t();g(D.cells).each(z)}while(s){g(A.cells).each(y);A=B.rows[++v];s=A&&!x(A)}}})},cellsWithHeadersAssociated:function(t){var q=g(t.rows).children();var s=this._isHeadingRow;var r=[];q.each(function(w,v){if(v.id&&s(v.parentNode)){r.push(v.id)}});var u=q.filter(function(x,v){var w=v.getAttribute("headers");return w&&!s(v.parentNode)&&g.inArray(w,r)>-1});return !!u.length},_insertCells:function(t,u,r){r=isNaN(r)?-1:r;for(var s=0,q;s<t;s++){q=u.insertCell(r);q.innerHTML="&nbsp;"}},_deleteTableRows:function(t,s){for(var r=0,u,q;r<s;r++){u=t.pop();q=u.parentNode;q.removeChild(u);if(!q.rows.length){f.remove(q)}}},createNewTable:function(u){var t=this;var z=t.editor.document;var y=u.tableProperties;var s=u.cellProperties;var w=s.selectAllCells;var B=f.create(z,"table");t._updateTableProperties(B,y);t._updateCaption(B,y);var v=B.createTBody();for(var q=0,C;q<y.rows;q++){C=v.insertRow();for(var x=0,A;x<y.columns;x++){A=C.insertCell();A.innerHTML="&nbsp;";if(q===0&&x===0&&s.id){A.id=s.id}t._updateCellProperties(A,w||q===0&&x===0?s:{})}}if(y.cellsWithHeaders){t.associateCellsWithHeader(B,y.cellsWithHeaders)}return B},_updateTableProperties:function(r,s){var q=this._getStylesData(s);f.attr(r,{cellSpacing:s.cellSpacing||null,cellPadding:s.cellPadding||null,className:s.className||null,id:s.id||null,summary:s.summary||null,style:q||null});g(r).addClass("k-table")},_updateCellProperties:function(q,s){var r=this._getStylesData(s);r.padding=s.cellPadding||null;r.margin=s.cellMargin||null;f.attr(q,{style:r||null,className:s.className||null})},_updateCaption:function(r,s){if(r.caption&&!s.captionContent){r.deleteCaption()}else{if(s.captionContent){var q=r.createCaption();q.innerHTML=s.captionContent;var t=this._getAlignmentData(s.captionAlignment);f.attr(q,{style:{textAlign:t.textAlign,verticalAlign:t.verticalAlign}})}}},_getStylesData:function(q){var s=this._getAlignmentData(q.alignment);var r="wrapText" in q?q.wrapText?"":"nowrap":null;return{width:q.width?q.width+q.widthUnit:null,height:q.height?q.height+q.heightUnit:null,textAlign:s.textAlign,verticalAlign:s.verticalAlign,backgroundColor:q.bgColor||null,borderWidth:q.borderWidth,borderStyle:q.borderStyle,borderColor:q.borderColor,borderCollapse:q.collapseBorders?"collapse":null,whiteSpace:r}},_getAlignmentData:function(t){var q="";var s=q;if(t){if(t.indexOf(" ")!=-1){var r=t.split(" ");q=r[0];s=r[1]}else{q=t}}return{textAlign:q,verticalAlign:s}},parseTable:function(x,w){if(!x){return{tableProperties:{},selectedCells:[]}}var r=this;var s=x.style;var A=x.rows;var y=x.caption;var q=g(y?y.cloneNode(true):c);q.find(".k-marker").remove();var B=x.className;B=B.replace(/^k-table\s|\sk-table$/,"");B=B.replace(/\sk-table\s/," ");B=B.replace(/^k-table$/,"");var t=r._getAlignment(x,true);var u=y?r._getAlignment(y):c;var z=r.cellsWithHeadersAssociated(x);var v={tableProperties:{width:s.width||x.width?parseFloat(s.width||x.width):null,height:s.height||x.height?parseFloat(s.height||x.height):null,columns:A[0]?A[0].children.length:0,rows:A.length,widthUnit:r._getUnit(s.width),heightUnit:r._getUnit(s.height),cellSpacing:x.cellSpacing,cellPadding:x.cellPadding,alignment:t.textAlign,bgColor:s.backgroundColor||x.bgColor,className:B,id:x.id,borderWidth:s.borderWidth||x.border,borderColor:s.borderColor,borderStyle:s.borderStyle||"",collapseBorders:!!s.borderCollapse,summary:x.summary,captionContent:y?q.html():"",captionAlignment:y&&u.textAlign?u.textAlign+" "+u.verticalAlign:"",cellsWithHeaders:z},selectedCells:[]};v.rows=r.parseTableRows(A,w,v);return v},parseTableRows:function(B,x,w){var q=this;var u=[],A,r,z,y,v;for(var t=0;t<B.length;t++){A=B[t];r={cells:[]};z=A.cells;u.push(r);for(var s=0;s<z.length;s++){y=z[s];v=q.parseCell(y);if(g.inArray(y,x)!=-1){w.selectedCells.push(v)}r.cells.push(v)}}return u},parseCell:function(q){var t=this;var r=q.style;var u=t._getAlignment(q);u=u.textAlign?u.textAlign+" "+u.verticalAlign:"";var s={width:r.width||q.width?parseFloat(r.width||q.width):null,height:r.height||q.height?parseFloat(r.height||q.height):null,widthUnit:t._getUnit(r.width),heightUnit:t._getUnit(r.height),cellMargin:r.margin,cellPadding:r.padding,alignment:u,bgColor:r.backgroundColor||q.bgColor,className:q.className,id:q.id,borderWidth:r.borderWidth||q.border,borderColor:r.borderColor,borderStyle:r.borderStyle,wrapText:r.whiteSpace!="nowrap"};return s},_getAlignment:function(s,r){var t=s.style;var q=t.textAlign||s.align||"";if(r){return{textAlign:q}}var u=t.verticalAlign||s.vAlign||"";if(q&&u){return{textAlign:q,verticalAlign:u}}if(!q&&u){return{textAlign:"left",verticalAlign:u}}if(q&&!u){return{textAlign:q,verticalAlign:"top"}}return{textAlign:"",verticalAlign:""}},_getUnit:function(r){var q=(r||"").match(e);return q?q[0]:"px"},_selectedTable:function(r){var q=f.filterBy(i.nodes(r),f.htmlIndentSpace,true);return p.findSuitable(q)[0]},_selectedCells:function(r){var q=f.filterBy(i.nodes(r),f.htmlIndentSpace,true);return o.findSuitable(q)}});var n=k.Tool.extend({command:function(q){q.insertNewTable=this.options.insertNewTable;return new d(q)}});var m=n.extend({update:function(s,r){var q=!p.isFormatted(r);s.toggleClass("k-state-disabled",q)}});l.ui.editor.TableWizardTool=n;l.ui.editor.TableWizardCommand=d;j("tableWizard",new m({command:d,insertNewTable:false,template:new b({template:h.buttonTemplate,title:"Table Wizard"})}))}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("editor/table-wizard/table-wizard-dialog",["editor/table-wizard/table-wizard-command"],a)}(function(){(function(f,b){var k=window.kendo,e={format:"0",min:0},j=["px","em"],i=["solid","dotted","dashed","double","groove","ridge","inset","outset","initial","inherit","none","hidden"];var h={dataSource:[{className:"k-icon k-i-table-align-middle-left",value:"left"},{className:"k-icon k-i-table-align-middle-center",value:"center"},{className:"k-icon k-i-table-align-middle-right",value:"right"},{className:"k-icon k-i-align-remove",value:""}],dataTextField:"className",dataValueField:"value",template:"<span class='#: className #' title='#: tooltip #'></span>",valueTemplate:"<span class='k-align-group #: className #' title='#: tooltip #'></span>"};var d={dataSource:[{className:"k-icon k-i-table-align-top-left",value:"left top"},{className:"k-icon k-i-table-align-top-center",value:"center top"},{className:"k-icon k-i-table-align-top-right",value:"right top"},{className:"k-icon k-i-table-align-middle-left",value:"left middle"},{className:"k-icon k-i-table-align-middle-center",value:"center middle"},{className:"k-icon k-i-table-align-middle-right",value:"right middle"},{className:"k-icon k-i-table-align-bottom-left",value:"left bottom"},{className:"k-icon k-i-table-align-bottom-center",value:"center bottom"},{className:"k-icon k-i-table-align-bottom-right",value:"right bottom"},{className:"k-icon k-i-align-remove",value:""}],dataTextField:"className",dataValueField:"value",template:"<span class='#: className #' title='#: tooltip #'></span>",valueTemplate:"<span class='k-align-group #: className #' title='#: tooltip #'></span>"};var c={dataSource:[{className:"k-icon k-i-table-align-top-left",value:"left top"},{className:"k-icon k-i-table-align-top-center",value:"center top"},{className:"k-icon k-i-table-align-top-right",value:"right top"},{className:"k-icon k-i-table-align-bottom-left",value:"left bottom"},{className:"k-icon k-i-table-align-bottom-center",value:"center bottom"},{className:"k-icon k-i-table-align-bottom-right",value:"right bottom"},{className:"k-icon k-i-align-remove",value:""}],dataTextField:"className",dataValueField:"value",template:"<span class='#: className #' title='#: tooltip #'></span>",valueTemplate:"<span class='k-align-group #: className #' title='#: tooltip #'></span>"};var a='<div class="k-editor-dialog k-editor-table-wizard-dialog k-action-window k-edit-form-container k-popup-edit-form"><div id="k-table-wizard-tabs" class="k-root-tabs"><ul><li class="k-state-active">#= messages.tableTab #</li><li>#= messages.cellTab #</li><li>#= messages.accessibilityTab #</li></ul><div id="k-table-properties"><div class="k-edit-label"><label for="k-editor-table-width">#= messages.width #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-width" /><input id="k-editor-table-width-type" /></div><div class="k-edit-label"><label for="k-editor-table-height">#= messages.height #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-height" /><input id="k-editor-table-height-type" /></div><div class="k-edit-label"><label for="k-editor-table-columns">#= messages.columns #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-columns" /></div><div class="k-edit-label"><label for="k-editor-table-rows">#= messages.rows #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-rows" /></div><div class="k-edit-label"><label for="k-editor-table-cell-spacing">#= messages.cellSpacing #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-cell-spacing" /></div><div class="k-edit-label"><label for="k-editor-table-cell-padding">#= messages.cellPadding #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-cell-padding" /></div><div class="k-edit-label"><label for="k-editor-table-alignment">#= messages.alignment #</label></div><div class="k-edit-field"><input id="k-editor-table-alignment" class="k-align" /></div><div class="k-edit-label"><label for="k-editor-table-bg">#= messages.background #</label></div><div class="k-edit-field"><input id="k-editor-table-bg" /></div><div class="k-edit-label"><label for="k-editor-css-class">#= messages.cssClass #</label></div><div class="k-edit-field"><input id="k-editor-css-class" class="k-input k-textbox" type="text" /></div><div class="k-edit-label"><label for="k-editor-id">#= messages.id #</label></div><div class="k-edit-field"><input id="k-editor-id" class="k-input k-textbox" type="text" /></div><div class="k-edit-label"><label for="k-editor-border-width">#= messages.border #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-border-width" /><input id="k-editor-border-color" /></div><div class="k-edit-label"><label for="k-editor-border-style">#= messages.borderStyle #</label></div><div class="k-edit-field"><input id="k-editor-border-style" /></div><div class="k-edit-label">&nbsp;</div><div class="k-edit-field"><input id="k-editor-collapse-borders" type="checkbox" class="k-checkbox" /><label for="k-editor-collapse-borders" class="k-checkbox-label">#= messages.collapseBorders #</label></div></div><div id="k-cell-properties"><div class="k-edit-field"><input id="k-editor-selectAllCells" type="checkbox" class="k-checkbox" /><label for="k-editor-selectAllCells" class="k-checkbox-label">#= messages.selectAllCells #</label></div><div class="k-edit-label"><label for="k-editor-cell-width">#= messages.width #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-cell-width" /><input id="k-editor-cell-width-type" /></div><div class="k-edit-label"><label for="k-editor-cell-height">#= messages.height #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-cell-height" /><input id="k-editor-cell-height-type" /></div><div class="k-edit-label"><label for="k-editor-table-cell-margin">#= messages.cellMargin #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-cell-margin" /></div><div class="k-edit-label"><label for="k-editor-table-cells-padding">#= messages.cellPadding #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-cells-padding" /></div><div class="k-edit-label"><label for="k-editor-cell-alignment">#= messages.alignment #</label></div><div class="k-edit-field"><input id="k-editor-cell-alignment" class="k-align" /></div><div class="k-edit-label"><label for="k-editor-cell-bg">#= messages.background #</label></div><div class="k-edit-field"><input id="k-editor-cell-bg" /></div><div class="k-edit-label"><label for="k-editor-cell-css-class">#= messages.cssClass #</label></div><div class="k-edit-field"><input id="k-editor-cell-css-class" class="k-input k-textbox" type="text" /></div><div class="k-edit-label"><label for="k-editor-cell-id">#= messages.id #</label></div><div class="k-edit-field"><input id="k-editor-cell-id" class="k-input k-textbox" type="text" /></div><div class="k-edit-label"><label for="k-editor-cell-border-width">#= messages.border #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-cell-border-width" /><input id="k-editor-cell-border-color" /></div><div class="k-edit-label"><label for="k-editor-cell-border-style">#= messages.borderStyle #</label></div><div class="k-edit-field"><input id="k-editor-cell-border-style" /></div><div class="k-edit-label">&nbsp;</div><div class="k-edit-field"><input id="k-editor-wrap-text" type="checkbox" class="k-checkbox" /><label for="k-editor-wrap-text" class="k-checkbox-label">#= messages.wrapText #</label></div></div><div id="k-accessibility-properties"><div class="k-edit-label"><label for="k-editor-table-caption">#= messages.caption #</label></div><div class="k-edit-field"><input id="k-editor-table-caption" class="k-input k-textbox" type="text" /></div><div class="k-edit-label"><label for="k-editor-accessibility-alignment">#= messages.alignment #</label></div><div class="k-edit-field"><input id="k-editor-accessibility-alignment" class="k-align" /></div><div class="k-edit-label"><label for="k-editor-accessibility-summary">#= messages.summary #</label></div><div class="k-edit-field"><textarea id="k-editor-accessibility-summary" class="k-input k-textbox"></textarea></div><div class="k-edit-label">&nbsp;</div><div class="k-edit-field"><input id="k-editor-cells-headers" type="checkbox" class="k-checkbox" /><label for="k-editor-cells-headers" class="k-checkbox-label">#= messages.associateCellsWithHeaders #</label></div></div></div><div class="k-edit-buttons k-state-default"><button class="k-button k-primary k-dialog-ok">#= messages.dialogOk #</button><button class="k-button k-dialog-close">#= messages.dialogCancel #</button></div></div>';var g=k.Class.extend({init:function(l){this.options=l},open:function(){var r=this,u=r.options,n=u.dialogOptions,m=u.table,s,p=u.messages;function t(v){v.preventDefault();r.destroy();s.destroy()}function o(v){r.collectDialogValues(m);t(v);if(r.change){r.change()}u.closeCallback(m)}function l(v){t(v);u.closeCallback()}n.close=l;n.title=p.tableWizard;n.visible=u.visible;s=f(r._dialogTemplate(p)).appendTo(document.body).kendoWindow(n).closest(".k-window").toggleClass("k-rtl",u.isRtl).end().find(".k-dialog-ok").click(o).end().find(".k-dialog-close").click(l).end().data("kendoWindow");var q=s.element;r._initTabStripComponent(q);r._initTableViewComponents(q,m);r._initCellViewComponents(q,m);r._initAccessibilityViewComponents(q,m);s.center();s.open()},_initTabStripComponent:function(l){var m=this.components={};m.tabStrip=l.find("#k-table-wizard-tabs").kendoTabStrip({animation:false}).data("kendoTabStrip")},collectDialogValues:function(){var l=this;var m=l.options.table;l._collectTableViewValues(m);l._collectCellViewValues(m);l._collectAccessibilityViewValues(m)},_collectTableViewValues:function(m){var l=this.components.tableView;var n=m.tableProperties;n.width=l.width.value();n.widthUnit=l.widthUnit.value();n.height=l.height.value();n.columns=l.columns.value();n.rows=l.rows.value();n.heightUnit=l.heightUnit.value();n.cellSpacing=l.cellSpacing.value();n.cellPadding=l.cellPadding.value();n.alignment=l.alignment.value();n.bgColor=l.bgColor.value();n.className=l.className.value;n.id=l.id.value;n.borderWidth=l.borderWidth.value();n.borderColor=l.borderColor.value();n.borderStyle=l.borderStyle.value();n.collapseBorders=l.collapseBorders.checked},_collectCellViewValues:function(m){var l=m.cellProperties={};var n=this.components.cellView;l.selectAllCells=n.selectAllCells.checked;l.width=n.width.value();l.widthUnit=n.widthUnit.value();l.height=n.height.value();l.heightUnit=n.heightUnit.value();l.cellMargin=n.cellMargin.value();l.cellPadding=n.cellPadding.value();l.alignment=n.alignment.value();l.bgColor=n.bgColor.value();l.className=n.className.value;l.id=n.id.value;l.borderWidth=n.borderWidth.value();l.borderColor=n.borderColor.value();l.borderStyle=n.borderStyle.value();l.wrapText=n.wrapText.checked},_collectAccessibilityViewValues:function(m){var n=m.tableProperties;var l=this.components.accessibilityView;n.captionContent=l.captionContent.value;n.captionAlignment=l.captionAlignment.value();n.summary=l.summary.value;n.cellsWithHeaders=l.cellsWithHeaders.checked},_addUnit:function(l,m){if(m&&f.inArray(m,l)==-1){l.push(m)}},_initTableViewComponents:function(m,o){var n=this.components;var l=n.tableView={};var p=o.tableProperties=o.tableProperties||{};p.borderStyle=p.borderStyle||"";this._addUnit(j,p.widthUnit);this._addUnit(j,p.heightUnit);this._initNumericTextbox(m.find("#k-editor-table-width"),"width",p,l);this._initNumericTextbox(m.find("#k-editor-table-height"),"height",p,l);this._initNumericTextbox(m.find("#k-editor-table-columns"),"columns",p,l,{min:1,value:4});this._initNumericTextbox(m.find("#k-editor-table-rows"),"rows",p,l,{min:1,value:4});this._initDropDownList(m.find("#k-editor-table-width-type"),"widthUnit",p,l,j);this._initDropDownList(m.find("#k-editor-table-height-type"),"heightUnit",p,l,j);this._initNumericTextbox(m.find("#k-editor-table-cell-spacing"),"cellSpacing",p,l);this._initNumericTextbox(m.find("#k-editor-table-cell-padding"),"cellPadding",p,l);this._initTableAlignmentDropDown(m.find("#k-editor-table-alignment"),p);this._initColorPicker(m.find("#k-editor-table-bg"),"bgColor",p,l);this._initInput(m.find("#k-editor-css-class"),"className",p,l);this._initInput(m.find("#k-editor-id"),"id",p,l);this._initNumericTextbox(m.find("#k-editor-border-width"),"borderWidth",p,l);this._initColorPicker(m.find("#k-editor-border-color"),"borderColor",p,l);this._initDropDownList(m.find("#k-editor-border-style"),"borderStyle",p,l,i);this._initCheckbox(m.find("#k-editor-collapse-borders"),"collapseBorders",p,l)},_initCellViewComponents:function(l,n){var m=this.components;var p=m.cellView={};n.selectedCells=n.selectedCells=n.selectedCells||[];var o=n.selectedCells[0]||{borderStyle:"",wrapText:true};this._addUnit(j,o.widthUnit);this._addUnit(j,o.heightUnit);this._initCheckbox(l.find("#k-editor-selectAllCells"),"selectAllCells",n.tableProperties,p);this._initNumericTextbox(l.find("#k-editor-cell-width"),"width",o,p);this._initNumericTextbox(l.find("#k-editor-cell-height"),"height",o,p);this._initDropDownList(l.find("#k-editor-cell-width-type"),"widthUnit",o,p,j);this._initDropDownList(l.find("#k-editor-cell-height-type"),"heightUnit",o,p,j);this._initNumericTextbox(l.find("#k-editor-table-cell-margin"),"cellMargin",o,p);this._initNumericTextbox(l.find("#k-editor-table-cells-padding"),"cellPadding",o,p);this._initCellAlignmentDropDown(l.find("#k-editor-cell-alignment"),o);this._initColorPicker(l.find("#k-editor-cell-bg"),"bgColor",o,p);this._initInput(l.find("#k-editor-cell-css-class"),"className",o,p);this._initInput(l.find("#k-editor-cell-id"),"id",o,p);this._initNumericTextbox(l.find("#k-editor-cell-border-width"),"borderWidth",o,p);this._initColorPicker(l.find("#k-editor-cell-border-color"),"borderColor",o,p);this._initDropDownList(l.find("#k-editor-cell-border-style"),"borderStyle",o,p,i);this._initCheckbox(l.find("#k-editor-wrap-text"),"wrapText",o,p)},_initAccessibilityViewComponents:function(m,o){var n=this.components;var l=n.accessibilityView={};var p=o.tableProperties;this._initInput(m.find("#k-editor-table-caption"),"captionContent",p,l);this._initAccessibilityAlignmentDropDown(m.find("#k-editor-accessibility-alignment"),p);this._initInput(m.find("#k-editor-accessibility-summary"),"summary",p,l);this._initCheckbox(m.find("#k-editor-cells-headers"),"cellsWithHeaders",p,l)},_initNumericTextbox:function(m,p,o,q,n){var l=q[p]=m.kendoNumericTextBox(n?f.extend({},e,n):e).data("kendoNumericTextBox");if(p in o){l.value(parseInt(o[p],10))}},_initDropDownList:function(m,o,n,q,p){var l=q[o]=m.kendoDropDownList({dataSource:p}).data("kendoDropDownList");this._setComponentValue(l,n,o)},_initTableAlignmentDropDown:function(m,o){var n=this.options.messages;var l=this.components.tableView;var p=h.dataSource;p[0].tooltip=n.alignLeft;p[1].tooltip=n.alignCenter;p[2].tooltip=n.alignRight;p[3].tooltip=n.alignRemove;this._initAlignmentDropDown(m,h,"alignment",o,l)},_initCellAlignmentDropDown:function(l,o){var m=this.options.messages;var n=this.components.cellView;var p=d.dataSource;p[0].tooltip=m.alignLeftTop;p[1].tooltip=m.alignCenterTop;p[2].tooltip=m.alignRightTop;p[3].tooltip=m.alignLeftMiddle;p[4].tooltip=m.alignCenterMiddle;p[5].tooltip=m.alignRightMiddle;p[6].tooltip=m.alignLeftBottom;p[7].tooltip=m.alignCenterBottom;p[8].tooltip=m.alignRightBottom;p[9].tooltip=m.alignRemove;this._initAlignmentDropDown(l,d,"alignment",o,n)},_initAccessibilityAlignmentDropDown:function(m,o){var n=this.options.messages;var l=this.components.accessibilityView;var p=c.dataSource;p[0].tooltip=n.alignLeftTop;p[1].tooltip=n.alignCenterTop;p[2].tooltip=n.alignRightTop;p[3].tooltip=n.alignLeftBottom;p[4].tooltip=n.alignCenterBottom;p[5].tooltip=n.alignRightBottom;p[6].tooltip=n.alignRemove;this._initAlignmentDropDown(m,c,"captionAlignment",o,l)},_initAlignmentDropDown:function(n,o,m,p,q){var l=q[m]=n.kendoDropDownList(o).data("kendoDropDownList");l.list.addClass("k-align").css("width","110px");this._setComponentValue(l,p,m)},_setComponentValue:function(l,n,m){if(m in n){l.value(n[m])}},_initColorPicker:function(m,o,n,p){var l=p[o]=m.kendoColorPicker({buttons:false,clearButton:true}).data("kendoColorPicker");if(n[o]){l.value(n[o])}},_initInput:function(m,o,n,p){var l=p[o]=m.get(0);if(o in n){l.value=n[o]}},_initCheckbox:function(m,o,n,p){var l=p[o]=m.get(0);if(o in n){l.checked=n[o]}},destroy:function(){this._destroyComponents(this.components.tableView);this._destroyComponents(this.components.cellView);this._destroyComponents(this.components.accessibilityView);this._destroyComponents(this.components);delete this.components},_destroyComponents:function(l){for(var m in l){if(l[m].destroy){l[m].destroy()}delete l[m]}},_dialogTemplate:function(l){return k.template(a)({messages:l})}});k.ui.editor.TableWizardDialog=g}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.editor",["kendo.combobox","kendo.dropdownlist","kendo.resizable","kendo.window","kendo.colorpicker","kendo.imagebrowser","kendo.tabstrip","kendo.numerictextbox","util/undoredostack","editor/main","editor/dom","editor/serializer","editor/range","editor/system","editor/inlineformat","editor/formatblock","editor/linebreak","editor/lists","editor/link","editor/file","editor/image","editor/components","editor/indent","editor/viewhtml","editor/formatting","editor/toolbar","editor/tables","editor/export","editor/import","editor/resizing/column-resizing","editor/resizing/row-resizing","editor/resizing/table-resizing","editor/resizing/table-resize-handle","editor/immutables","editor/table-wizard/table-wizard-command","editor/table-wizard/table-wizard-dialog"],a)}(function(){var a={id:"editor",name:"Editor",category:"web",description:"Rich text editor component",depends:["combobox","dropdownlist","window","colorpicker"],features:[{id:"editor-imagebrowser",name:"Image Browser",description:"Support for uploading and inserting images",depends:["imagebrowser"]},{id:"editor-resizable",name:"Resize handle",description:"Support for resizing the content area via a resize handle",depends:["resizable"]},{id:"editor-tablewizard",name:"Table wizard dialog",description:"Support for table properties configuration",depends:["tabstrip","button","numerictextbox"]},{id:"editor-pdf-export",name:"PDF export",description:"Export Editor content as PDF",depends:["pdf","drawing"]}]};return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.maskedtextbox",["kendo.core"],a)}(function(){var a={id:"maskedtextbox",name:"MaskedTextBox",category:"web",description:"The MaskedTextBox widget allows to specify a mask type on an input field.",depends:["core"]};(function(e,c){var i=window.kendo;var k=i.caret;var p=i.keys;var l=i.ui;var m=l.Widget;var n=".kendoMaskedTextBox";var h=e.proxy;var j=(i.support.propertyChangeEvent?"propertychange":"input")+n;var b="k-state-disabled";var f="disabled";var g="readonly";var d="change";var o=m.extend({init:function(r,q){var u=this;var t;m.fn.init.call(u,r,q);u._rules=e.extend({},u.rules,u.options.rules);r=u.element;t=r[0];u.wrapper=r;u._tokenize();u._form();u.element.addClass("k-textbox").attr("autocomplete","off").on("focus"+n,function(){var v=t.value;if(!v){t.value=u._old=u._emptyMask}else{u._togglePrompt(true)}u._oldValue=v;u._timeoutId=setTimeout(function(){k(r,0,v?u._maskLength:0)})}).on("focusout"+n,function(){var v=r.val();clearTimeout(u._timeoutId);t.value=u._old="";if(v!==u._emptyMask){t.value=u._old=v}u._change();u._togglePrompt()});var s=r.is("[disabled]")||e(u.element).parents("fieldset").is(":disabled");if(s){u.enable(false)}else{u.readonly(r.is("[readonly]"))}u.value(u.options.value||r.val());i.notify(u)},options:{name:"MaskedTextBox",clearPromptChar:false,unmaskOnPost:false,promptChar:"_",culture:"",rules:{},value:"",mask:""},events:[d],rules:{"0":/\d/,"9":/\d|\s/,"#":/\d|\s|\+|\-/,L:/[a-zA-Z]/,"?":/[a-zA-Z]|\s/,"&":/\S/,C:/./,A:/[a-zA-Z0-9]/,a:/[a-zA-Z0-9]|\s/},setOptions:function(q){var r=this;m.fn.setOptions.call(r,q);r._rules=e.extend({},r.rules,r.options.rules);r._tokenize();this._unbindInput();this._bindInput();r.value(r.element.val())},destroy:function(){var q=this;q.element.off(n);if(q._formElement){q._formElement.off("reset",q._resetHandler);q._formElement.off("submit",q._submitHandler)}m.fn.destroy.call(q)},raw:function(){var q=this._unmask(this.element.val(),0);return q.replace(new RegExp(this.options.promptChar,"g"),"")},value:function(s){var r=this.element;var q=this._emptyMask;if(s===c){return this.element.val()}if(s===null){s=""}if(!q){r.val(s);return}s=this._unmask(s+"");r.val(s?q:"");this._mask(0,this._maskLength,s);s=r.val();this._oldValue=s;if(i._activeElement()!==r){if(s===q){r.val("")}else{this._togglePrompt()}}},_togglePrompt:function(q){var r=this.element[0];var s=r.value;if(this.options.clearPromptChar){if(!q){s=s.replace(new RegExp(this.options.promptChar,"g")," ")}else{s=this._oldValue}r.value=this._old=s}},readonly:function(q){this._editable({readonly:q===c?true:q,disable:false})},enable:function(q){this._editable({readonly:false,disable:!(q=q===c?true:q)})},_bindInput:function(){var q=this;if(q._maskLength){q.element.on("keydown"+n,h(q._keydown,q)).on("keypress"+n,h(q._keypress,q)).on("paste"+n,h(q._paste,q)).on(j,h(q._propertyChange,q))}},_unbindInput:function(){this.element.off("keydown"+n).off("keypress"+n).off("paste"+n).off(j)},_editable:function(s){var u=this;var t=u.element;var r=s.disable;var q=s.readonly;u._unbindInput();if(!q&&!r){t.removeAttr(f).removeAttr(g).removeClass(b);u._bindInput()}else{t.attr(f,r).attr(g,q).toggleClass(b,r)}},_change:function(){var q=this;var r=q.value();if(r!==q._oldValue){q._oldValue=r;q.trigger(d);q.element.trigger(d)}},_propertyChange:function(){var s=this;var r=s.element[0];var t=r.value;var q;var u;if(i._activeElement()!==r){return}if(t!==s._old&&!s._pasting){u=k(r)[0];q=s._unmask(t.substring(u),u);r.value=s._old=t.substring(0,u)+s._emptyMask.substring(u);s._mask(u,u,q);k(r,u)}},_paste:function(v){var u=this;var t=v.target;var q=k(t);var w=q[0];var r=q[1];var s=u._unmask(t.value.substring(r),r);u._pasting=true;setTimeout(function(){var y=t.value;var x=y.substring(w,k(t)[0]);t.value=u._old=y.substring(0,w)+u._emptyMask.substring(w);u._mask(w,w,x);w=k(t)[0];u._mask(w,w,s);k(t,w);u._pasting=false})},_form:function(){var s=this;var q=s.element;var t=q.attr("form");var r=t?e("#"+t):q.closest("form");if(r[0]){s._resetHandler=function(){setTimeout(function(){s.value(q[0].value)})};s._submitHandler=function(){s.element[0].value=s._old=s.raw()};if(s.options.unmaskOnPost){r.on("submit",s._submitHandler)}s._formElement=r.on("reset",s._resetHandler)}},_keydown:function(u){var s=u.keyCode;var r=this.element[0];var t=k(r);var x=t[0];var q=t[1];var w;var v=s===p.BACKSPACE;if(v||s===p.DELETE){if(x===q){if(v){x-=1}else{q+=1}w=this._find(x,v)}if(w!==c&&w!==x){if(v){w+=1}k(r,w)}else{if(x>-1){this._mask(x,q,"",v)}}u.preventDefault()}else{if(s===p.ENTER){this._change()}}},_keypress:function(s){if(s.which===0||s.metaKey||s.ctrlKey||s.keyCode===p.ENTER){return}var r=String.fromCharCode(s.which);var q=k(this.element);this._mask(q[0],q[1],r);if(s.keyCode===p.BACKSPACE||r){s.preventDefault()}},_find:function(q,t){var s=this.element.val()||this._emptyMask;var r=1;if(t===true){r=-1}while(q>-1||q<=this._maskLength){if(s.charAt(q)!==this.tokens[q]){return q}q+=r}return -1},_mask:function(q,s,z,B){var u=this.element[0];var x=u.value||this._emptyMask;var w=this.options.promptChar;var A;var v=0;var r;var t;var y;q=this._find(q,B);if(q>s){s=q}r=this._unmask(x.substring(s),s);z=this._unmask(z,q);A=z.length;if(z){r=r.replace(new RegExp("^_{0,"+A+"}"),"")}z+=r;x=x.split("");t=z.charAt(v);while(q<this._maskLength){x[q]=t||w;t=z.charAt(++v);if(y===c&&v>A){y=q}q=this._find(q+1)}u.value=this._old=x.join("");if(i._activeElement()===u){if(y===c){y=this._maskLength}k(u,y)}},_unmask:function(w,x){if(!w){return""}w=(w+"").split("");var s;var q;var t=0;var v=x||0;var u=this.options.promptChar;var y=w.length;var r=this.tokens.length;var z="";while(v<r){s=w[t];q=this.tokens[v];if(s===q||s===u){z+=s===u?u:"";t+=1;v+=1}else{if(typeof q!=="string"){if(q.test&&q.test(s)||e.isFunction(q)&&q(s)){z+=s;v+=1}t+=1}else{v+=1}}if(t>=y){break}}return z},_tokenize:function(){var z=[];var x=0;var D=this.options.mask||"";var t=D.split("");var q=t.length;var B=0;var v;var A;var u="";var r=this.options.promptChar;var y=i.getCulture(this.options.culture).numberFormat;var C=this._rules;for(;B<q;B++){v=t[B];A=C[v];if(A){z[x]=A;u+=r;x+=1}else{if(v==="."||v===","){v=y[v]}else{if(v==="$"){v=y.currency.symbol}else{if(v==="\\"){B+=1;v=t[B]}}}v=v.split("");for(var w=0,s=v.length;w<s;w++){z[x]=v[w];u+=v[w];x+=1}}}this.tokens=z;this._emptyMask=u;this._maskLength=u.length}});l.plugin(o)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.toolbar",["kendo.core","kendo.userevents","kendo.popup"],a)}(function(){var a={id:"toolbar",name:"ToolBar",category:"web",description:"The ToolBar widget displays one or more command buttons divided into groups.",depends:["core"]};(function(N,n){var O=window.kendo,b=O.Class,e=O.ui.Widget,ae=N.proxy,t=O.isFunction,G=O.keys,X=O._outerWidth,ab="k-toolbar",al="k-button",K="k-overflow-button",j="k-toggle-button",aa="k-button-group",p="k-split-button",x="k-separator",R="k-popup",s="k-toolbar-resizable",U="k-state-active",E="k-state-disabled",k="k-state-hidden",i="k-group-start",Q="k-group-end",ak="k-primary",M="k-icon",d="k-i-",ai="k-button-icon",L="k-button-icontext",T="k-list-container k-split-container",am="k-split-button-arrow",u="k-overflow-anchor",C="k-overflow-container",J="k-toolbar-first-visible",ag="k-toolbar-last-visible",S="click",f="toggle",Z="open",ah="close",I="overflowOpen",g="overflowClose",af="never",r="auto",P="always",D="k-overflow-hidden",m=O.attr("uid");O.toolbar={};var B={overflowAnchor:'<div tabindex="0" class="k-overflow-anchor"></div>',overflowContainer:'<ul class="k-overflow-container k-list-container"></ul>'};O.toolbar.registerComponent=function(ap,aq,ar){B[ap]={toolbar:aq,overflow:ar}};var A=O.Class.extend({addOverflowAttr:function(){this.element.attr(O.attr("overflow"),this.options.overflow||r)},addUidAttr:function(){this.element.attr(m,this.options.uid)},addIdAttr:function(){if(this.options.id){this.element.attr("id",this.options.id)}},addOverflowIdAttr:function(){if(this.options.id){this.element.attr("id",this.options.id+"_overflow")}},attributes:function(){if(this.options.attributes){this.element.attr(this.options.attributes)}},show:function(){this.element.removeClass(k).show();this.options.hidden=false},hide:function(){this.element.addClass(k).hide();this.options.hidden=true},remove:function(){this.element.remove()},enable:function(ap){if(ap===n){ap=true}this.element.toggleClass(E,!ap);this.options.enable=ap},twin:function(){var ap=this.element.attr(m);if(this.overflow){return this.toolbar.element.find("["+m+"='"+ap+"']").data(this.options.type)}else{if(this.toolbar.options.resizable){return this.toolbar.popup.element.find("["+m+"='"+ap+"']").data(this.options.type)}}}});O.toolbar.Item=A;var Y=A.extend({init:function(ap,ar){var aq=ap.useButtonTag?N('<button tabindex="0"></button>'):N('<a href tabindex="0"></a>');this.element=aq;this.options=ap;this.toolbar=ar;this.attributes();if(ap.primary){aq.addClass(ak)}if(ap.togglable){aq.addClass(j);this.toggle(ap.selected)}if(ap.url!==n&&!ap.useButtonTag){aq.attr("href",ap.url);if(ap.mobile){aq.attr(O.attr("role"),"button")}}if(ap.group){aq.attr(O.attr("group"),ap.group);this.group=this.toolbar.addToGroup(this,ap.group)}if(!ap.togglable&&ap.click&&t(ap.click)){this.clickHandler=ap.click}if(ap.togglable&&ap.toggle&&t(ap.toggle)){this.toggleHandler=ap.toggle}},toggle:function(aq,ap){aq=!!aq;if(this.group&&aq){this.group.select(this)}else{if(!this.group){this.select(aq)}}if(ap&&this.twin()){this.twin().toggle(aq)}},getParentGroup:function(){if(this.options.isChild){return this.element.closest("."+aa).data("buttonGroup")}},_addGraphics:function(){var ar=this.element,au=this.options.icon,av=this.options.spriteCssClass,aq=this.options.imageUrl,aw,at,ap;if(av||aq||au){aw=true;ar.contents().filter(function(){return !N(this).hasClass("k-sprite")&&!N(this).hasClass(M)&&!N(this).hasClass("k-image")}).each(function(ax,ay){if(ay.nodeType==1||ay.nodeType==3&&N.trim(ay.nodeValue).length>0){aw=false}});if(aw){ar.addClass(ai)}else{ar.addClass(L)}}if(au){at=ar.children("span."+M).first();if(!at[0]){at=N('<span class="'+M+'"></span>').prependTo(ar)}at.addClass(d+au)}else{if(av){at=ar.children("span.k-sprite").first();if(!at[0]){at=N('<span class="k-sprite '+M+'"></span>').prependTo(ar)}at.addClass(av)}else{if(aq){ap=ar.children("img.k-image").first();if(!ap[0]){ap=N('<img alt="icon" class="k-image" />').prependTo(ar)}ap.attr("src",aq)}}}}});O.toolbar.Button=Y;var z=Y.extend({init:function(ap,ar){Y.fn.init.call(this,ap,ar);var aq=this.element;aq.addClass(al);this.addIdAttr();if(ap.align){aq.addClass("k-align-"+ap.align)}if(ap.showText!="overflow"&&ap.text){if(ap.mobile){aq.html('<span class="km-text">'+ap.text+"</span>")}else{aq.html(ap.text)}}ap.hasIcon=ap.showIcon!="overflow"&&(ap.icon||ap.spriteCssClass||ap.imageUrl);if(ap.hasIcon){this._addGraphics()}this.addUidAttr();this.addOverflowAttr();this.enable(ap.enable);if(ap.hidden){this.hide()}this.element.data({type:"button",button:this})},select:function(ap){if(ap===n){ap=false}this.element.toggleClass(U,ap);this.options.selected=ap}});O.toolbar.ToolBarButton=z;var H=Y.extend({init:function(ap,ar){this.overflow=true;Y.fn.init.call(this,ap,ar);var aq=this.element;if(ap.showText!="toolbar"&&ap.text){if(ap.mobile){aq.html('<span class="km-text">'+ap.text+"</span>")}else{aq.html('<span class="k-text">'+ap.text+"</span>")}}ap.hasIcon=ap.showIcon!="toolbar"&&(ap.icon||ap.spriteCssClass||ap.imageUrl);if(ap.hasIcon){this._addGraphics()}if(!ap.isChild){this._wrap()}this.addOverflowIdAttr();this.attributes();this.addUidAttr();this.addOverflowAttr();this.enable(ap.enable);aq.addClass(K+" "+al);if(ap.hidden){this.hide()}this.element.data({type:"button",button:this})},_wrap:function(){this.element=this.element.wrap("<li></li>").parent()},overflowHidden:function(){this.element.addClass(D)},select:function(ap){if(ap===n){ap=false}if(this.options.isChild){this.element.toggleClass(U,ap)}else{this.element.find(".k-button").toggleClass(U,ap)}this.options.selected=ap}});O.toolbar.OverflowButton=H;O.toolbar.registerComponent("button",z,H);var V=A.extend({createButtons:function(au){var aq=this.options;var ap=aq.buttons||[];var at;for(var ar=0;ar<ap.length;ar++){if(!ap[ar].uid){ap[ar].uid=O.guid()}at=new au(N.extend({mobile:aq.mobile,isChild:true,type:"button"},ap[ar]),this.toolbar);at.element.appendTo(this.element)}},refresh:function(){this.element.children().filter(":not('."+k+"'):first").addClass(i);this.element.children().filter(":not('."+k+"'):last").addClass(Q)}});O.toolbar.ButtonGroup=V;var w=V.extend({init:function(ap,ar){var aq=this.element=N("<div></div>");this.options=ap;this.toolbar=ar;this.addIdAttr();if(ap.align){aq.addClass("k-align-"+ap.align)}this.createButtons(z);this.attributes();this.addUidAttr();this.addOverflowAttr();this.refresh();aq.addClass(aa);this.element.data({type:"buttonGroup",buttonGroup:this})}});O.toolbar.ToolBarButtonGroup=w;var q=V.extend({init:function(ap,ar){var aq=this.element=N("<li></li>");this.options=ap;this.toolbar=ar;this.overflow=true;this.addOverflowIdAttr();this.createButtons(H);this.attributes();this.addUidAttr();this.addOverflowAttr();this.refresh();aq.addClass((ap.mobile?"":aa)+" k-overflow-group");this.element.data({type:"buttonGroup",buttonGroup:this})},overflowHidden:function(){this.element.addClass(D)}});O.toolbar.OverflowButtonGroup=q;O.toolbar.registerComponent("buttonGroup",w,q);var y=A.extend({init:function(ap,ar){var aq=this.element=N('<div class="'+p+'" tabindex="0"></div>');this.options=ap;this.toolbar=ar;this.mainButton=new z(N.extend({},ap,{hidden:false}),ar);this.arrowButton=N('<a class="'+al+" "+am+'"><span class="'+(ap.mobile?"km-icon km-arrowdown":"k-icon k-i-arrow-60-down")+'"></span></a>');this.popupElement=N('<ul class="'+T+'"></ul>');this.mainButton.element.removeAttr("href tabindex").appendTo(aq);this.arrowButton.appendTo(aq);this.popupElement.appendTo(aq);if(ap.align){aq.addClass("k-align-"+ap.align)}if(!ap.id){ap.id=ap.uid}aq.attr("id",ap.id+"_wrapper");this.addOverflowAttr();this.addUidAttr();this.createMenuButtons();this.createPopup();this._navigatable();this.mainButton.main=true;this.enable(ap.enable);if(ap.hidden){this.hide()}aq.data({type:"splitButton",splitButton:this,kendoPopup:this.popup})},_navigatable:function(){var ap=this;ap.popupElement.on("keydown","."+al,function(ar){var aq=N(ar.target).parent();ar.preventDefault();if(ar.keyCode===G.ESC||ar.keyCode===G.TAB||ar.altKey&&ar.keyCode===G.UP){ap.toggle();ap.focus()}else{if(ar.keyCode===G.DOWN){ao(aq,"next").focus()}else{if(ar.keyCode===G.UP){ao(aq,"prev").focus()}else{if(ar.keyCode===G.SPACEBAR||ar.keyCode===G.ENTER){ap.toolbar.userEvents.trigger("tap",{target:N(ar.target)})}}}}})},createMenuButtons:function(){var aq=this.options;var ap=aq.menuButtons;var at;for(var ar=0;ar<ap.length;ar++){at=new z(N.extend({mobile:aq.mobile,type:"button",click:aq.click},ap[ar]),this.toolbar);at.element.wrap("<li></li>").parent().appendTo(this.popupElement)}},createPopup:function(){var ap=this.options;var aq=this.element;this.popupElement.attr("id",ap.id+"_optionlist").attr(m,ap.rootUid);if(ap.mobile){this.popupElement=F(this.popupElement)}this.popup=this.popupElement.kendoPopup({appendTo:ap.mobile?N(ap.mobile).children(".km-pane"):null,anchor:aq,isRtl:this.toolbar._isRtl,copyAnchorStyles:false,animation:ap.animation,open:ad,activate:function(){this.element.find(":kendoFocusable").first().focus()},close:function(){aq.focus()}}).data("kendoPopup");this.popup.element.on(S,"a.k-button",W)},remove:function(){this.popup.element.off(S,"a.k-button");this.popup.destroy();this.element.remove()},toggle:function(){this.popup.toggle()},enable:function(ap){if(ap===n){ap=true}this.mainButton.enable(ap);this.options.enable=ap},focus:function(){this.element.focus()},hide:function(){if(this.popup){this.popup.close()}this.element.addClass(k).hide();this.options.hidden=true},show:function(){this.element.removeClass(k).hide();this.options.hidden=false}});O.toolbar.ToolBarSplitButton=y;var v=A.extend({init:function(aq,av){var at=this.element=N('<li class="'+p+'"></li>'),ap=aq.menuButtons,au;this.options=aq;this.toolbar=av;this.overflow=true;this.mainButton=new H(N.extend({isChild:true},aq));this.mainButton.element.appendTo(at);for(var ar=0;ar<ap.length;ar++){au=new H(N.extend({mobile:aq.mobile,isChild:true},ap[ar]),this.toolbar);au.element.appendTo(at)}this.addUidAttr();this.addOverflowAttr();this.mainButton.main=true;at.data({type:"splitButton",splitButton:this})},overflowHidden:function(){this.element.addClass(D)}});O.toolbar.OverflowSplitButton=v;O.toolbar.registerComponent("splitButton",y,v);var l=A.extend({init:function(ap,ar){var aq=this.element=N("<div>&nbsp;</div>");this.element=aq;this.options=ap;this.toolbar=ar;this.attributes();this.addIdAttr();this.addUidAttr();this.addOverflowAttr();aq.addClass(x);aq.data({type:"separator",separator:this})}});var ac=A.extend({init:function(ap,ar){var aq=this.element=N("<li>&nbsp;</li>");this.element=aq;this.options=ap;this.toolbar=ar;this.overflow=true;this.attributes();this.addUidAttr();this.addOverflowIdAttr();aq.addClass(x);aq.data({type:"separator",separator:this})},overflowHidden:function(){this.element.addClass(D)}});O.toolbar.registerComponent("separator",l,ac);var c=A.extend({init:function(ar,ap,at){var aq=t(ar)?ar(ap):ar;if(!(aq instanceof jQuery)){aq=N("<div></div>").html(aq)}else{aq=aq.wrap("<div></div>").parent()}this.element=aq;this.options=ap;this.options.type="template";this.toolbar=at;this.attributes();this.addUidAttr();this.addIdAttr();this.addOverflowAttr();aq.data({type:"template",template:this})}});O.toolbar.TemplateItem=c;var aj=A.extend({init:function(ar,ap,at){var aq=t(ar)?N(ar(ap)):N(ar);if(!(aq instanceof jQuery)){aq=N("<li></li>").html(aq)}else{aq=aq.wrap("<li></li>").parent()}this.element=aq;this.options=ap;this.options.type="template";this.toolbar=at;this.overflow=true;this.attributes();this.addUidAttr();this.addOverflowIdAttr();this.addOverflowAttr();aq.data({type:"template",template:this})},overflowHidden:function(){this.element.addClass(D)}});O.toolbar.OverflowTemplateItem=aj;function ad(){var aq=this.options.anchor,ap=X(aq),ar;O.wrap(this.element).addClass("k-split-wrapper");if(this.element.css("box-sizing")!=="border-box"){ar=ap-(X(this.element)-this.element.width())}else{ar=ap}this.element.css({fontFamily:aq.css("font-family"),"min-width":ar})}function o(ap){if(!ap.target.is(".k-toggle-button")){ap.target.toggleClass(U,ap.type=="press")}}function F(ap){ap=N(ap);return ap.hasClass("km-actionsheet")?ap.closest(".km-popup-wrapper"):ap.addClass("km-widget km-actionsheet").wrap('<div class="km-actionsheet-wrapper km-actionsheet-tablet km-widget km-popup"></div>').parent().wrap('<div class="km-popup-wrapper k-popup"></div>').parent()}function W(ap){ap.preventDefault()}function ao(ar,aq){var au=aq==="next"?N.fn.next:N.fn.prev;var ap=aq==="next"?N.fn.first:N.fn.last;var at=au.call(ar);if(at.is(":kendoFocusable")||!at.length){return at}if(at.find(":kendoFocusable").length){return ap.call(at.find(":kendoFocusable"))}return ao(at,aq)}var h=b.extend({init:function(ap){this.name=ap;this.buttons=[]},add:function(ap){this.buttons[this.buttons.length]=ap},remove:function(aq){var ap=N.inArray(aq,this.buttons);this.buttons.splice(ap,1)},select:function(ar){var aq;for(var ap=0;ap<this.buttons.length;ap++){aq=this.buttons[ap];aq.select(false)}ar.select(true);if(ar.twin()){ar.twin().select(true)}}});var an=e.extend({init:function(ar,ap){var at=this;e.fn.init.call(at,ar,ap);ap=at.options;ar=at.wrapper=at.element;ar.addClass(ab+" k-widget");this.uid=O.guid();this._isRtl=O.support.isRtl(ar);this._groups={};ar.attr(m,this.uid);at.isMobile=typeof ap.mobile==="boolean"?ap.mobile:at.element.closest(".km-root")[0];at.animation=at.isMobile?{open:{effects:"fade"}}:{};if(at.isMobile){ar.addClass("km-widget");M="km-icon";d="km-";al="km-button";aa="km-buttongroup km-widget";U="km-state-active";E="km-state-disabled"}if(ap.resizable){at._renderOverflow();ar.addClass(s);at.overflowUserEvents=new O.UserEvents(at.element,{threshold:5,allowSelection:true,filter:"."+u,tap:ae(at._toggleOverflow,at)});at._resizeHandler=O.onResize(function(){at.resize()})}else{at.popup={element:N([])}}if(ap.items&&ap.items.length){for(var aq=0;aq<ap.items.length;aq++){at.add(ap.items[aq])}}at.userEvents=new O.UserEvents(document,{threshold:5,allowSelection:true,filter:"["+m+"="+this.uid+"] a."+al+", ["+m+"="+this.uid+"] ."+K,tap:ae(at._buttonClick,at),press:o,release:o});at.element.on(S,"a.k-button",W);at._navigatable();if(ap.resizable){at.popup.element.on(S,+"a.k-button",W)}if(ap.resizable){this._toggleOverflowAnchor()}O.notify(at)},events:[S,f,Z,ah,I,g],options:{name:"ToolBar",items:[],resizable:true,mobile:null},addToGroup:function(ap,ar){var aq;if(!this._groups[ar]){aq=this._groups[ar]=new h()}else{aq=this._groups[ar]}aq.add(ap);return aq},destroy:function(){var ap=this;ap.element.find("."+p).each(function(aq,ar){N(ar).data("kendoPopup").destroy()});ap.element.off(S,"a.k-button");ap.userEvents.destroy();if(ap.options.resizable){O.unbindResize(ap._resizeHandler);ap.overflowUserEvents.destroy();ap.popup.element.off(S,"a.k-button");ap.popup.destroy()}e.fn.destroy.call(ap)},add:function(ay){var aw=B[ay.type],ax=ay.template,au,at=this,aq=at.isMobile?"":"k-item k-state-default",av=ay.overflowTemplate,ap;N.extend(ay,{uid:O.guid(),animation:at.animation,mobile:at.isMobile,rootUid:at.uid});if(ay.menuButtons){for(var ar=0;ar<ay.menuButtons.length;ar++){N.extend(ay.menuButtons[ar],{uid:O.guid()})}}if(ax&&!av){ay.overflow=af}else{if(!ay.overflow){ay.overflow=r}}if(ay.overflow!==af&&at.options.resizable){if(av){ap=new aj(av,ay,at)}else{if(aw){ap=new aw.overflow(ay,at);ap.element.addClass(aq)}}if(ap){if(ay.overflow===r){ap.overflowHidden()}ap.element.appendTo(at.popup.container);at.angular("compile",function(){return{elements:ap.element.get()}})}}if(ay.overflow!==P){if(ax){au=new c(ax,ay,at)}else{if(aw){au=new aw.toolbar(ay,at)}}if(au){if(at.options.resizable){au.element.appendTo(at.element).css("visibility","hidden");at._shrink(at.element.innerWidth());au.element.css("visibility","visible")}else{au.element.appendTo(at.element)}at.angular("compile",function(){return{elements:au.element.get()}})}}},_getItem:function(at){var aq,au,ap,av=this.options.resizable,ar;aq=this.element.find(at);if(!aq.length){aq=N(".k-split-container[data-uid="+this.uid+"]").find(at)}ar=aq.length?aq.data("type"):"";au=aq.data(ar);if(au){if(au.main){aq=aq.parent("."+p);ar="splitButton";au=aq.data(ar)}if(av){ap=au.twin()}}else{if(av){aq=this.popup.element.find(at);ar=aq.length?aq.data("type"):"";ap=aq.data(ar);if(ap&&ap.main){aq=aq.parent("."+p);ar="splitButton";ap=aq.data(ar)}}}return{type:ar,toolbar:au,overflow:ap}},remove:function(ap){var aq=this._getItem(ap);if(aq.toolbar){aq.toolbar.remove()}if(aq.overflow){aq.overflow.remove()}this.resize(true)},hide:function(ap){var aq=this._getItem(ap);if(aq.toolbar){if(aq.toolbar.options.type==="button"&&aq.toolbar.options.isChild){aq.toolbar.hide();aq.toolbar.getParentGroup().refresh()}else{if(!aq.toolbar.options.hidden){aq.toolbar.hide()}}}if(aq.overflow){if(aq.overflow.options.type==="button"&&aq.overflow.options.isChild){aq.overflow.hide();aq.overflow.getParentGroup().refresh()}else{if(!aq.overflow.options.hidden){aq.overflow.hide()}}}this.resize(true)},show:function(ap){var aq=this._getItem(ap);if(aq.toolbar){if(aq.toolbar.options.type==="button"&&aq.toolbar.options.isChild){aq.toolbar.show();aq.toolbar.getParentGroup().refresh()}else{if(aq.toolbar.options.hidden){aq.toolbar.show()}}}if(aq.overflow){if(aq.overflow.options.type==="button"&&aq.overflow.options.isChild){aq.toolbar.show();aq.overflow.getParentGroup().refresh()}else{if(aq.overflow.options.hidden){aq.overflow.show()}}}this.resize(true)},enable:function(aq,ap){var ar=this._getItem(aq);if(typeof ap=="undefined"){ap=true}if(ar.toolbar){ar.toolbar.enable(ap)}if(ar.overflow){ar.overflow.enable(ap)}},getSelectedFromGroup:function(ap){return this.element.find("."+j+"[data-group='"+ap+"']").filter("."+U)},toggle:function(aq,at){var ap=N(aq),ar=ap.data("button");if(ar.options.togglable){if(at===n){at=true}ar.toggle(at,true)}},_renderOverflow:function(){var ar=this,ap=B.overflowContainer,aq=ar._isRtl,at=aq?"left":"right";ar.overflowAnchor=N(B.overflowAnchor).addClass(al);ar.element.append(ar.overflowAnchor);if(ar.isMobile){ar.overflowAnchor.append('<span class="km-icon km-more"></span>');ap=F(ap)}else{ar.overflowAnchor.append('<span class="k-icon k-i-arrow-60-down"></span>')}ar.popup=new O.ui.Popup(ap,{origin:"bottom "+at,position:"top "+at,anchor:ar.overflowAnchor,isRtl:aq,animation:ar.animation,appendTo:ar.isMobile?N(ar.isMobile).children(".km-pane"):null,copyAnchorStyles:false,open:function(au){var av=O.wrap(ar.popup.element).addClass("k-overflow-wrapper");if(!ar.isMobile){av.css("margin-left",(aq?-1:1)*((X(av)-av.width())/2+1))}else{ar.popup.container.css("max-height",parseFloat(N(".km-content:visible").innerHeight())-15+"px")}if(ar.trigger(I)){au.preventDefault()}},activate:function(){this.element.find(":kendoFocusable").first().focus()},close:function(au){if(ar.trigger(g)){au.preventDefault()}this.element.focus()}});ar.popup.element.on("keydown","."+al,function(ay){var ax=N(ay.target),au=ax.parent(),aw=au.is("."+aa)||au.is("."+p),av;ay.preventDefault();if(ay.keyCode===G.ESC||ay.keyCode===G.TAB||ay.altKey&&ay.keyCode===G.UP){ar._toggleOverflow();ar.overflowAnchor.focus()}else{if(ay.keyCode===G.DOWN){av=!aw||aw&&ax.is(":last-child")?au:ax;ao(av,"next").focus()}else{if(ay.keyCode===G.UP){av=!aw||aw&&ax.is(":first-child")?au:ax;ao(av,"prev").focus()}else{if(ay.keyCode===G.SPACEBAR||ay.keyCode===G.ENTER){ar.userEvents.trigger("tap",{target:N(ay.target)})}}}}});if(ar.isMobile){ar.popup.container=ar.popup.element.find("."+C)}else{ar.popup.container=ar.popup.element}ar.popup.container.attr(m,this.uid)},_toggleOverflowAnchor:function(){var ap=false;if(this.options.mobile){ap=this.popup.element.find("."+C).children(":not(."+D+", ."+R+")").length>0}else{ap=this.popup.element.children(":not(."+D+", ."+R+")").length>0}if(ap){this.overflowAnchor.css({visibility:"visible",width:""})}else{this.overflowAnchor.css({visibility:"hidden",width:"1px"})}},_buttonClick:function(at){var ar=this,ap,au,ay,av,ax=at.target.closest("."+am).length,az,aw,aq;at.preventDefault();if(ax){ar._toggle(at);return}au=N(at.target).closest("."+al,ar.element);if(au.hasClass(u)){return}ay=au.data("button");if(!ay&&ar.popup){au=N(at.target).closest("."+K,ar.popup.container);ay=au.parent("li").data("button")}if(!ay||!ay.options.enable){return}if(ay.options.togglable){az=t(ay.toggleHandler)?ay.toggleHandler:null;ay.toggle(!ay.options.selected,true);aw={target:au,group:ay.options.group,checked:ay.options.selected,id:ay.options.id};if(az){az.call(ar,aw)}ar.trigger(f,aw)}else{az=t(ay.clickHandler)?ay.clickHandler:null;aw={sender:ar,target:au,id:ay.options.id};if(az){az.call(ar,aw)}ar.trigger(S,aw)}if(ay.options.url){if(ay.options.attributes&&ay.options.attributes.target){aq=ay.options.attributes.target}window.open(ay.options.url,aq||"_self")}if(au.hasClass(K)){ar.popup.close()}av=au.closest(".k-split-container");if(av[0]){ap=av.data("kendoPopup");(ap?ap:av.parents(".km-popup-wrapper").data("kendoPopup")).close()}},_navigatable:function(){var ap=this;ap.element.attr("tabindex",0).focus(function(){var aq=N(this).find(":kendoFocusable:first");if(aq.length===0){return}if(aq.is("."+u)){aq=ao(aq,"next")}aq[0].focus()}).on("keydown",ae(ap._keydown,ap))},_keydown:function(aw){var ax=N(aw.target),aA=aw.keyCode,ay=this.element.children(":not(.k-separator):visible");if(aA===G.TAB){var au=ax.parentsUntil(this.element).last(),av=false,ar=false;if(!au.length){au=ax}if(au.is("."+u)){if(aw.shiftKey){aw.preventDefault()}if(ay.last().is(":kendoFocusable")){ay.last().focus()}else{ay.last().find(":kendoFocusable").last().focus()}}if(!aw.shiftKey&&ay.index(au)===ay.length-1){if(au.is("."+aa)){av=ax.is(":last-child")}else{av=true}}var ap=ay.index(au)===ay.not(".k-overflow-anchor").first().index();if(aw.shiftKey&&ap){if(au.is("."+aa)){ar=ax.is(":first-child")}else{ar=true}}if(av&&this.overflowAnchor&&this.overflowAnchor.css("visibility")!=="hidden"){aw.preventDefault();this.overflowAnchor.focus()}if(ar){aw.preventDefault();var at=this._getPrevFocusable(this.wrapper);if(at){at.focus()}}}if(aw.altKey&&aA===G.DOWN){var aq=N(document.activeElement).data("splitButton");var az=N(document.activeElement).is("."+u);if(aq){aq.toggle()}else{if(az){this._toggleOverflow()}}return}if((aA===G.SPACEBAR||aA===G.ENTER)&&!ax.is("input, checkbox")){aw.preventDefault();if(ax.is("."+p)){ax=ax.children().first()}this.userEvents.trigger("tap",{target:ax});return}},_getPrevFocusable:function(ar){if(ar.is("html")){return ar}var at,ap,aq=ar.prevAll();aq.each(function(){ap=N(this);if(ap.is(":kendoFocusable")){at=ap;return false}else{if(ap.find(":kendoFocusable").length>0){at=ap.find(":kendoFocusable").last();return false}}});if(at){return at}else{return this._getPrevFocusable(ar.parent())}},_toggle:function(ar){var aq=N(ar.target).closest("."+p).data("splitButton"),ap;ar.preventDefault();if(!aq.options.enable){return}if(aq.popup.element.is(":visible")){ap=this.trigger(ah,{target:aq.element})}else{ap=this.trigger(Z,{target:aq.element})}if(!ap){aq.toggle()}},_toggleOverflow:function(){this.popup.toggle()},_resize:function(aq){var ap=aq.width;if(!this.options.resizable){return}this.popup.close();this._shrink(ap);this._stretch(ap);this._markVisibles();this._toggleOverflowAnchor()},_childrenWidth:function(){var ap=0;this.element.children(":visible:not('."+k+"')").each(function(){ap+=X(N(this),true)});return Math.ceil(ap)},_shrink:function(at){var ar,ap;if(at<this._childrenWidth()){ap=this.element.children(":visible:not([data-overflow='never'], ."+u+")");for(var aq=ap.length-1;aq>=0;aq--){ar=ap.eq(aq);if(at>this._childrenWidth()){break}else{this._hideItem(ar)}}}},_stretch:function(at){var ar,ap;if(at>this._childrenWidth()){ap=this.element.children(":hidden:not('."+k+"')");for(var aq=0;aq<ap.length;aq++){ar=ap.eq(aq);if(at<this._childrenWidth()||!this._showItem(ar,at)){break}}}},_hideItem:function(ap){ap.hide();if(this.popup){this.popup.container.find(">li[data-uid='"+ap.data("uid")+"']").removeClass(D)}},_showItem:function(ap,aq){if(ap.length&&aq>this._childrenWidth()+X(ap,true)){ap.show();if(this.popup){this.popup.container.find(">li[data-uid='"+ap.data("uid")+"']").addClass(D)}return true}return false},_markVisibles:function(){var at=this.popup.container.children(),ar=this.element.children(":not(.k-overflow-anchor)"),ap=at.filter(":not(.k-overflow-hidden)"),aq=ar.filter(":visible");at.add(ar).removeClass(J+" "+ag);ap.first().add(aq.first()).addClass(J);ap.last().add(aq.last()).addClass(ag)}});O.ui.plugin(an)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.mediaplayer",["kendo.slider","kendo.toolbar","kendo.dropdownlist","kendo.tooltip"],a)}(function(){var a={id:"mediaplayer",name:"MediaPlayer",category:"web",description:"",depends:["slider","toolbar","dropdownlist","tooltip"]};(function(v,k){var x=window.kendo,G="end",i="pause",L="play",j="ready",n="timeChange",y="volumeChange",b="k-i-full-screen",o="k-i-full-screen-exit",w="k-i-volume-off",C="k-i-volume-down",N="k-i-volume-up",p="k-mediaplayer-quality",E="k-i-play",l="k-i-pause",M="k-mediaplayer-titlebar",B="k-title",f="k-mediaplayer-toolbar-wrap",F="k-mediaplayer-toolbar",D="k-mediaplayer-seekbar",J="k-mediaplayer-volume",I="k-mediaplayer-media",q="k-mediaplayer-overlay",z="k-mediaplayer-yt",r=".",A=x.ui,K=".kendoMediaPlayer",m=new Date(1970,0,1),e=m.getTimezoneOffset()*60,g=x.ui.Widget,s=v.isArray,u={shortTime:"mm:ss",longTime:"HH:mm:ss"},h=x.template,H=v.proxy,t=x.keys,d={htmlPlayer:"<video class='"+I+"'> </video>",titleBar:h("<div class='"+M+"' role='heading'><span class='"+B+"'>Video Title</span></div>"),toolBar:"<div class='"+f+"'><div class='"+F+"'></div></div>",youtubePlayer:"<div class='"+z+"'> </div>",toolBarTime:"<span class='k-mediaplayer-currenttime'>00:00:00</span> / <span class='k-mediaplayer-duration'>00:00:00</span>",slider:"<input class='"+D+"' value='0' title='seekbar' />",volumeSlider:"<input class='"+J+"' title='volume'/>",qualityDropDown:"<input class='"+p+"' title='video quality' />",toolTip:"#= kendo.toString(new Date(value), 'HH:mm:ss') #"};var c=g.extend({init:function(P,O){this.wrapper=v(P);g.fn.init.call(this,P,O);this.wrapper.addClass("k-mediaplayer k-widget");O=this.options;this._currentIndex=0;this._createTitlebar();this._createToolbar();this._createDropDown();this._createSlider();this._createVolumeSlider();this._timers={};this._aria();this._navigatable();if(O.media){this.media(this.options.media)}x.notify(this)},events:[G,i,L,j,n,y],options:{name:"MediaPlayer",autoPlay:false,autoRepeat:false,volume:100,fullScreen:false,mute:false,navigatable:false,forwardSeek:true,media:null,messages:{pause:"Pause",play:"Play",mute:"Mute",unmute:"Unmute",quality:"Quality",fullscreen:"Full Screen"}},_msToTime:function(O){var P=new Date(m.getTime());P.setSeconds(O);return P},_timeToSec:function(P){var O=new Date(P).getTime();return O/1000},_createTitlebar:function(){this._titleBar=this.wrapper.find(r+M);if(this._titleBar.length===0){this.wrapper.append(d.titleBar);this._titleBar=this.wrapper.find(r+M)}},_createSlider:function(){var O=this.wrapper.find(r+D);if(!this._slider){this._sliderDragChangeHandler=H(this._sliderDragChange,this);this._sliderDraggingHandler=H(this._sliderDragging,this);O=this.wrapper.find(r+D);this._slider=new A.Slider(O[0],{smallStep:1000,tickPlacement:"none",showButtons:false,change:this._sliderDragChangeHandler,slide:this._sliderDraggingHandler,tooltip:{template:d.toolTip},dragHandleTitle:""})}},_createVolumeSlider:function(){var O=this.wrapper.find(r+J);if(!this._volumeSlider){this._volumeDraggingHandler=H(this._volumeDragging,this);this._volumeChangeHandler=H(this._volumeChange,this);O.width(87);this._volumeSlider=new A.Slider(O[0],{smallStep:1,min:0,max:100,value:this.options.volume,slide:this._volumeDraggingHandler,change:this._volumeChangeHandler,tickPlacement:"none",showButtons:false,tooltip:{enabled:false},dragHandleTitle:""})}},_resetTime:function(){if(this._youTubeVideo){this._ytmedia.seekTo(0,true)}else{this._media.currentTime=0}this._mediaTimeUpdate();v.grep(this._toolBar.options.items,function(O){return !!O.template}).template=d.toolBarTime},_currentUrl:function(){var O=this.media();return s(O.source)?O.source[this._currentIndex].url:O.source},_isYouTubeUrl:function(){return !!this._currentUrl().match("youtube.com/|youtu.be/")},_setPlayerUrl:function(){var O=this._youTubeVideo;this.stop();this._youTubeVideo=this._isYouTubeUrl();if(O!==this._youTubeVideo){this.wrapper.find(r+z).toggle();this.wrapper.find(r+I).toggle()}var P=this._media||this._ytmedia;this._initializePlayer();if(P){this.mute(this.mute());this.volume(this.volume())}if(!this._youTubeVideo){this._videoOverlay.show();this.wrapper.find(r+I+" > source").remove();this.wrapper.find(r+I).attr("src",this._currentUrl());if(this.options.autoPlay){this.play()}}else{if(this._ytmedia){if(this._videoOverlay){this._videoOverlay.hide()}if(this.options.autoPlay){this._ytmedia.loadVideoById(this._getMediaId());this._playStateToggle(true)}else{this._ytmedia.cueVideoById(this._getMediaId());this._playStateToggle(true)}}}},_createToolbar:function(){var O=this.wrapper.find(r+F);if(O.length===0){this._toolbarClickHandler=H(this._toolbarClick,this);this.wrapper.append(d.toolBar);O=this.wrapper.find(r+F);O.width(this.wrapper.find(r+I).width());this._toolBar=new A.ToolBar(O,{click:this._toolbarClickHandler,resizable:false,items:[{type:"button",attributes:{"class":"k-play-button"},icon:"play"},{template:d.toolBarTime,attributes:{"class":"k-mediaplayer-currenttime-wrap"}},{type:"separator",attributes:{"class":"k-toolbar-spacer"}},{type:"button",attributes:{"class":"k-volume-button"},icon:"volume-up"},{template:d.volumeSlider,attributes:{"class":"k-mediaplayer-volume-wrap"}},{template:d.qualityDropDown,attributes:{"class":"k-mediaplayer-quality-wrap"}},{type:"button",attributes:{"class":"k-fullscreen-button"},icon:"full-screen"}]});O.before(d.slider);this._volumeButton=O.find(".k-volume-button");this._fullscreenButton=O.find(".k-fullscreen-button");this._volumeButton.attr("title",this.options.mute?this.options.messages.unmute:this.options.messages.mute);this._volumeButton.attr("aria-label",this.options.mute?this.options.messages.unmute:this.options.messages.mute);this._fullscreenButton.attr("title",this.options.messages.fullscreen);this._fullscreenButton.attr("aria-label",this.options.messages.fullscreen);O.width("auto");this._currentTimeElement=O.find(".k-mediaplayer-currenttime");this._durationElement=O.find(".k-mediaplayer-duration");this._playButton=O.find(".k-play-button");this._playButtonSpan=this._playButton.find(".k-i-play");if(this.options.autoPlay){this._playStateToggle(true)}v([this._volumeButton[0],O.find(".k-mediaplayer-volume-wrap")[0],O.find(".k-mediaplayer-quality-wrap")[0],this._fullscreenButton[0]]).wrapAll("<div class='k-align-right' />");O.find(".k-button").addClass("k-button-bare")}},_createDropDown:function(){var P=this.wrapper.find(r+p);var O=this.media();if(typeof P.data("kendoDropDownList")==="undefined"){this._dropDownSelectHandler=H(this._dropDownSelect,this);this._dropDown=new A.DropDownList(P,{dataTextField:"quality",dataValueField:"url",popup:{position:"bottom",origin:"top",appendTo:this.wrapper},animation:{open:{effects:"slideIn:up",duration:1}},select:this._dropDownSelectHandler});if(O&&s(O.source)){this._dropDown.setDataSource(O.source);this._dropDown.select(0)}this._dropDown.wrapper.addClass("k-button k-button-bare");this._dropDown.wrapper.attr("title",this.options.messages.quality).hide();this._dropDown.wrapper.find("span.k-i-arrow-60-down").removeClass("k-i-arrow-60-down").addClass("k-icon k-i-hd");this._dropDown.list.addClass("k-quality-list")}},_dropDownSelect:function(O){if(this._currentIndex!==O.item.index()){this._currentIndex=O.item.index();this._setPlayerUrl()}},_toolbarClick:function(R){var Q=v(R.target).children().first();var O=Q.hasClass(E);if(!this.media()){return}if(Q.hasClass(E)||Q.hasClass(l)){if(O){this.play()}else{this.pause()}}if(Q.hasClass(b)||Q.hasClass(o)){if(this._isInFullScreen){Q.removeClass(o).addClass(b);this.fullScreen(false)}else{Q.removeClass(b).addClass(o);this.fullScreen(true)}}if(Q.hasClass(w)||Q.hasClass(C)||Q.hasClass(N)){var P=this.mute();this.mute(!P)}},_sliderDragging:function(){if(!this.media()){return}this._isDragging=true},_sliderDragChange:function(R){var Q=this;var P=R.sender;var O=e*1000;if(!this.media()){return}Q._sliderChangeFired=true;Q._isDragging=false;if(!this.options.forwardSeek&&P.value()>this._seekBarLastPosition){setTimeout(function(){P.value(Q._seekBarLastPosition)},1)}else{if(this._youTubeVideo){Q._ytmedia.seekTo(Q._timeToSec(R.value-O))}else{Q._media.currentTime=Q._timeToSec(R.value-O)}}Q.trigger(n);Q._preventPlay=true},_changeVolumeButtonImage:function(P){var Q=this._volumeButton;var R=Q.find("span");var O=R.attr("class");O=O.substring(0,O.lastIndexOf(" "));if(P===0){R.attr("class",O+" "+w);Q.attr("title",this.options.messages.unmute);Q.attr("aria-label",this.options.messages.unmute)}else{if(P>0&&P<51){R.attr("class",O+" "+C);Q.attr("title",this.options.messages.mute);Q.attr("aria-label",this.options.messages.mute)}else{R.attr("class",O+" "+N);Q.attr("title",this.options.messages.mute);Q.attr("aria-label",this.options.messages.mute)}}},_volumeDragging:function(O){if(!this.media()){return}this.volume(O.value);this._changeVolumeButtonImage(O.value);this.trigger(y)},_volumeChange:function(O){if(!this.media()){return}this.volume(O.value);this._changeVolumeButtonImage(O.value);this.trigger(y)},_mediaTimeUpdate:function(){var P=this._youTubeVideo?this._ytmedia.getCurrentTime():this._media.currentTime;var O=this._msToTime(P);this._currentTimeElement.text(x.toString(O,this._timeFormat));if(!this._isDragging){this._seekBarLastPosition=(P+e)*1000;this._slider.value(this._seekBarLastPosition)}return this.isPlaying()},_playStateToggle:function(O){if(typeof O==="undefined"){O=this._playButtonSpan.is(r+E)}if(O){this._playButtonSpan.removeClass(E).addClass(l);this._playButton.attr("title",this.options.messages.pause);this._playButton.attr("aria-label",this.options.messages.pause)}else{this._playButtonSpan.removeClass(l).addClass(E);this._playButton.attr("title",this.options.messages.play);this._playButton.attr("aria-label",this.options.messages.play)}},_mediaEnded:function(){this._playStateToggle(false);this._currentTimeElement.text(x.toString(this._msToTime(0),this._timeFormat));this._slider.value((0+e)*1000);this.trigger(G)},_mediaPlay:function(){this.trigger(L)},_mediaReady:function(){this.trigger(j)},_mediaDurationChange:function(){var O=this._msToTime(this._youTubeVideo?this._ytmedia.getDuration():this._media.duration);this._timeFormat=O.getHours()===0?u.shortTime:u.longTime;this._durationElement.text(x.toString(O,this._timeFormat));this._slider.setOptions({min:m.getTime(),max:O.getTime()});if(!this._isFirstRun){this._resetTime();this._isFirstRun=true}},_createYoutubePlayer:function(){this._mediaTimeUpdateHandler=H(this._mediaTimeUpdate,this);this._mediaDurationChangeHandler=H(this._mediaDurationChange,this);this.wrapper.prepend(d.youtubePlayer);this._ytPlayer=this.wrapper.find(r+z)[0];v(this._ytPlayer).css({width:this.wrapper.width(),height:this.wrapper.height()});if(!window.YT||!window.YT.Player){if(!window.onYouTubeIframeAPIReadyRegister){window.onYouTubeIframeAPIReadyRegister=[];v.getScript("https://www.youtube.com/iframe_api");window.onYouTubeIframeAPIReady=function(){if(window.onYouTubeIframeAPIReadyRegister){for(var O=0;O<window.onYouTubeIframeAPIReadyRegister.length;O++){window.onYouTubeIframeAPIReadyRegister[O]._youtubeApiReady()}}window.onYouTubeIframeAPIReadyRegister.length=0;window.onYouTubeIframeAPIReadyRegister=k}}window.onYouTubeIframeAPIReadyRegister[window.onYouTubeIframeAPIReadyRegister.length]=this}else{this._configurePlayer()}},_poll:function(P,S,O,Q){var R=this;if(R._timers[P]!==null){clearTimeout(R._timers[P])}R._timers[P]=setTimeout(function(U){return function T(){if(S.call(U)){R._timers[P]=setTimeout(T,O)}}}(Q),O);return R._timers[P]},_youtubeApiReady:function(){this._configurePlayer()},_configurePlayer:function(){var P={autoplay:+this.options.autoPlay,wmode:"transparent",controls:0,rel:0,showinfo:0};this._onYouTubePlayerReady=H(this._onYouTubePlayerReady,this);window.onYouTubePlayerReady=this._onYouTubePlayerReady;this._onPlayerStateChangeHandler=H(this._onPlayerStateChange,this);window.onPlayerStateChange=this._onPlayerStateChange;var O=new window.YT.Player(this.wrapper.find(r+z)[0],{height:this.wrapper.height(),width:this.wrapper.width(),videoId:this._getMediaId(),playerVars:P,events:{onReady:this._onYouTubePlayerReady,onStateChange:this._onPlayerStateChangeHandler}})},_onYouTubePlayerReady:function(O){this._ytmedia=O.target;this._ytmedia.getIframe().style.width="100%";this._ytmedia.getIframe().style.height="100%";this._youTubeVideo=true;this._mediaDurationChangeHandler();if(this.options.autoPlay){this._playStateToggle(true);this._ytmedia.loadVideoById(this._getMediaId())}else{this._ytmedia.cueVideoById(this._getMediaId())}if(this.options.mute){this.mute(true)}this.trigger(j)},_updateTitle:function(){this.titlebar().text(this.media().title||this.media().source)},_onPlayerStateChange:function(O){if(O.data===0){this._slider.value(0);this._paused=false;this._playStateToggle(true);this.trigger(G);if(this.options.autoRepeat){this.play()}}else{if(O.data===1){this._mediaDurationChange();this._ytmedia.setVolume(this.volume());if(this._sliderChangeFired){this._sliderChangeFired=false}else{this._uiDisplay(false)}this.trigger(L);this._playStateToggle(true);this._poll("progress",this._mediaTimeUpdate,500,this);this._paused=false}else{if(O.data===2){if(!this._paused){this._uiDisplay(true);this._playStateToggle(false);this.trigger(i);this._paused=true}}}}},_getMediaId:function(){var O=this._currentUrl();var Q=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/;var P=O.match(Q);if(P&&P[7].length===11){O=P[7]}return O},_mouseClick:function(){if(this.isPaused()){this.play()}else{this.pause()}},_initializePlayer:function(){if(!this._mouseMoveHandler){this._mouseMoveHandler=H(this._mouseMove,this);this._mouseInHandler=H(this._mouseIn,this);this._mouseOutHandler=H(this._mouseOut,this);v(this.wrapper).on("mouseenter"+K,this._mouseInHandler).on("mouseleave"+K,this._mouseOutHandler).on("mousemove"+K,this._mouseMoveHandler)}if(!this._ytmedia&&this._youTubeVideo){this._createYoutubePlayer()}else{if(!this._media&&!this._youTubeVideo){this._createHtmlPlayer()}}},_createHtmlPlayer:function(){if(!this._videoOverlay){this._mouseClickHanlder=H(this._mouseClick,this);this.wrapper.append("<div class='"+q+"'></div>");this._videoOverlay=this.wrapper.find(".k-mediaplayer-overlay").on("click"+K,this._mouseClickHanlder)}this._mediaTimeUpdateHandler=H(this._mediaTimeUpdate,this);this._mediaDurationChangeHandler=H(this._mediaDurationChange,this);this._mediaEndedHandler=H(this._mediaEnded,this);this._mediaCanPlayHandler=H(this._mediaReady,this);this._mediaPlayHandler=H(this._mediaPlay,this);this._videoOverlay.after(d.htmlPlayer);this._media=this.wrapper.find(r+I)[0];v(this._media).css({width:"100%",height:"100%"});if(this.options.mute){this.mute(true)}this._media.ontimeupdate=this._mediaTimeUpdateHandler;this._media.ondurationchange=this._mediaDurationChangeHandler;this._media.oncanplay=this._mediaCanPlayHandler;this._media.onplay=this._mediaPlayHandler;this._media.onended=this._mediaEndedHandler},_mouseIn:function(){this._uiDisplay(true)},_mouseOut:function(){this._poll("mouseIdle",this._mouseIdle,3000,this)},_mouseIdle:function(){this._uiDisplay(false);return false},_mouseMove:function(){if(!(this._titleBar.is(":animated")||this._toolBar.element.is(":animated")||this._slider.wrapper.is(":animated"))){this._uiDisplay(true)}this._poll("mouseIdle",this._mouseIdle,3000,this)},_uiDisplay:function(O){var P="slow";var Q=this._titleBar.add(this._toolBar.element.parent());if(O){Q.fadeIn(P)}else{Q.fadeOut(P)}},setOptions:function(O){g.fn.setOptions.call(this,O)},destroy:function(){g.fn.destroy.call(this);if(!this.isPaused()){this.pause()}this.element.off(K);this.element.find(r+q).off(K);this._timers=null;this._mouseMoveHandler=null;this._mouseOutHandler=null;this._mouseInHandler=null;this._mouseClickHanlder=null;this._keyDownHandler=null;this._fullscreenHandler=null;this._toolbarClickHandler=null;this._sliderDragChangeHandler=null;this._sliderDraggingHandler=null;this._volumeDraggingHandler=null;this._volumeChangeHandler=null;this._youtubeApiReadyHandler=null;this._onYouTubePlayerReady=null;this._onPlayerStateChangeHandler=null;this._dropDownSelectHandler=null;this._media.ontimeupdate=this._mediaTimeUpdateHandler=null;this._media.ondurationchange=this._mediaDurationChangeHandler=null;this._media.oncanplay=this._mediaCanPlayHandler=null;this._media.onplay=this._mediaPlayHandler=null;this._media.onended=this._mediaEndedHandler=null;if(this._youTubeVideo){this._ytmedia.destroy()}else{this._media.src="";this._media.remove()}this._mouseMoveTimer=null;clearTimeout(this._mouseMoveTimer);x.destroy(this.element)},seek:function(O){if(typeof O==="undefined"){return 1000*this._youTubeVideo?this._ytmedia.getCurrentTime():this._media?this._media.currentTime:0}var P=O/1000;if(this._youTubeVideo){if(P+3>=this._ytmedia.getDuration()|0){this._ytmedia.seekTo(this._ytmedia.getDuration()-3|0,true)}else{this._ytmedia.seekTo(P,true)}}else{this._media.currentTime=P}return this},play:function(){if(this._youTubeVideo){this._ytmedia.playVideo()}else{this._uiDisplay(false);this._media.play()}this._paused=false;this._playStateToggle(true);return this},stop:function(){if(this._youTubeVideo&&this._ytmedia){this._ytmedia.stopVideo()}else{if(this._media&&!this._youTubeVideo){this._uiDisplay(true);this._media.pause();this._media.currentTime=0}}this._paused=true;this._playStateToggle(false);return this},pause:function(){if(this._youTubeVideo){this._ytmedia.pauseVideo()}else{this._uiDisplay(true);this._media.pause()}this._paused=true;this._playStateToggle(false);this.trigger(i);return this},toolbar:function(){return this._toolBar},dropdown:function(){return this._dropDown},titlebar:function(){return this._titleBar},fullScreen:function(P){if(typeof P==="undefined"){return this._isInFullScreen||false}var O=this.element.get(0);if(P){this.element.addClass("k-mediaplayer-fullscreen");if(O.requestFullscreen){O.requestFullscreen()}else{if(O.webkitRequestFullscreen){O.webkitRequestFullscreen()}else{if(O.mozRequestFullScreen){O.mozRequestFullScreen()}else{if(O.msRequestFullscreen){O.msRequestFullscreen()}}}}this._isInFullScreen=true}else{if(document.cancelFullscreen){document.cancelFullscreen()}else{if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.msCancelFullscreen){document.msCancelFullscreen()}else{if(document.exitFullscreen){document.exitFullscreen()}else{if(document.msExitFullscreen){document.msExitFullscreen()}}}}}}this.element.removeClass("k-mediaplayer-fullscreen");this._isInFullScreen=false}this._slider.resize()},volume:function(O){if(typeof O==="undefined"){return typeof this._volume!=="undefined"?this._volume:this._volume=this.options.volume}this._volume=O;this.mute(O<=0);if(this._youTubeVideo){this._ytmedia.setVolume(this._volume)}else{this._media.volume=this._volume/100}this._volumeSlider.value(O)},mute:function(P){var O=this._youTubeVideo?this._ytmedia&&this._ytmedia.isMuted():this._media&&this._media.muted;if(typeof P==="undefined"||P===O){return O}if(this._youTubeVideo){if(P){this._ytmedia.mute()}else{this._ytmedia.unMute()}}else{this._media.muted=P}if(P){this._volumeSlider.value(0)}else{this._volumeSlider.value(this._media&&this._media.volume*100||this._ytmedia&&this._ytmedia.getVolume())}this.trigger(y);this._changeVolumeButtonImage(this._volumeSlider.value())},isEnded:function(){if(this._youTubeVideo){return this._ytmedia.getPlayerState()===0}else{return this._media.ended}},media:function(O){var P=this.dropdown();if(typeof O==="undefined"){return typeof this._mediaData!=="undefined"?this._mediaData:this._mediaData=this.options.media}if(s(O.source)){P.setDataSource(O.source);P.wrapper.show()}else{P.wrapper.hide()}this._mediaData=O;this._updateTitle();this._setPlayerUrl()},isPaused:function(){return this._paused},isPlaying:function(){return !this.isEnded()&&!this._paused},_aria:function(){this.wrapper.attr("role","region")},_navigatable:function(){this._fullscreenHandler=H(this._fullscreen,this);v(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange"+K,this._fullscreenHandler);if(this.options.navigatable){this.wrapper.attr("tabIndex",0);this._keyDownHandler=H(this._keyDown,this);this.wrapper.on("keydown"+K,this._keyDownHandler)}},_fullscreen:function(){var O=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;this._uiDisplay(true);this._slider.resize();if(!O){this.wrapper.find('span[class*="k-i-fullscreen"]').removeClass(o).addClass(b);this.fullScreen(false)}},_keyDown:function(Q){Q.preventDefault();var O=this.wrapper.find('span[class*="k-i-fullscreen"]');if(Q.keyCode===t.SPACEBAR){if(this.isPlaying()){this.pause()}else{this.play()}}else{if(Q.keyCode===t.ENTER&&!this._isInFullScreen){O.removeClass(b).addClass(o);this.fullScreen(true)}else{if(Q.keyCode===77){var P=this.mute();this.mute(!P)}else{if(Q.keyCode===t.ESC&&this._isInFullScreen){O.removeClass(o).addClass(b);this.fullScreen(false)}}}}},_error:function(){},_progress:function(){}});A.plugin(c)}(window.kendo.jQuery));return window.kendo},typeof define==="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.pivotgrid",["kendo.dom","kendo.data"],a)}(function(){var a={id:"pivotgrid",name:"PivotGrid",category:"web",description:"The PivotGrid widget is a data summarization tool.",depends:["dom","data","data.xml","sortable"],features:[{id:"pivotgrid-configurator",name:"Configurator",description:"The PivotConfigurator widget allows the user to select data slices displayed in PivotGrid",depends:["pivot.configurator"]},{id:"pivotgrid-filtering",name:"Filtering",description:"Support for filtering",depends:["pivot.fieldmenu"]},{id:"pivotgrid-excel-export",name:"Excel export",description:"Export pivot grid data as Excel spreadsheet",depends:["ooxml"]},{id:"pivotgrid-pdf-export",name:"PDF export",description:"Export pivot grid data as PDF",depends:["pdf","drawing"]},{id:"mobile-scroller",name:"Mobile scroller",description:"Support for kinetic scrolling in mobile device",depends:["mobile.scroller"]}]};(function(aJ,B){var x=window.kendo,W=x.ui,aO=x.Class,p=W.Widget,t=x.data.DataSource,H=x._outerWidth,n=x._outerHeight,az={}.toString,aa=function(a1){return a1},C=aJ.map,at=aJ.extend,aK=x.isFunction,M="change",J="error",w="Measures",aG="progress",V="stateReset",aZ="auto",aj="<div/>",aS=".kendoPivotGrid",aT="__row_total__",I="dataBinding",E="dataBound",ay="expandMember",al="collapseMember",aQ="k-i-collapse",z="k-i-expand",an="<span>#: data.member.caption || data.member.name #</span>",o='<span class="k-icon k-i-#=data.dataItem.value > 0 ? "circle" : data.dataItem.value < 0 ? "stop" : "arrow-60-up k-i-hold"#" title="#:data.dataItem.value#"></span>',aV='<span class="k-icon k-i-#=data.dataItem.value > 0 ? "arrow-60-up" : data.dataItem.value < 0 ? "arrow-60-down" : "minus"#" title="#:data.dataItem.value#"></span>',av='#= data.dataItem ? kendo.htmlEncode(data.dataItem.fmtValue || data.dataItem.value) || "&nbsp;" : "&nbsp;" #',af='<table class="k-pivot-layout"><tr><td><div class="k-pivot-rowheaders"></div></td><td><div class="k-pivot-table k-state-default"></div></td></tr></table>';function O(a2){var a3=typeof a2==="string"?[{name:a2}]:a2;var a1=az.call(a3)==="[object Array]"?a3:a3!==B?[a3]:[];return C(a1,function(a4){if(typeof a4==="string"){return{name:a4}}return{name:a4.name,type:a4.type}})}function aE(a3){var a2=typeof a3==="string"?[{name:[a3],expand:false}]:a3;var a1=az.call(a2)==="[object Array]"?a2:a2!==B?[a2]:[];return C(a1,function(a4){if(typeof a4==="string"){return{name:[a4],expand:false}}return{name:az.call(a4.name)==="[object Array]"?a4.name.slice():[a4.name],expand:a4.expand}})}function ak(a1){if(a1.indexOf(" ")!==-1){a1='["'+a1+'"]'}return a1}function ag(a3,a6,a2,a8){var a1,a5;var a4;var a7;if(!a2){a2=a6}if(!a8){a8=0}a7=a2.members[a8];if(!a7||a7.measure){return}a4=a7.children;a5=a4.length;if(a2===a6){a3[x.stringify([a7.name])]=!!a5}else{if(a5){a3[x.stringify(U(a2,a8))]=true}}if(a5){for(a1=0;a1<a5;a1++){ag(a3,a6,a4[a1],a8)}}ag(a3,a6,a2,a8+1)}function aM(a4){var a1={};if(a4.length){ag(a1,a4[0])}var a3=[];for(var a2 in a1){a3.push({name:aJ.parseJSON(a2),expand:a1[a2]})}return a3}function aF(a3,a6){var a5=a6.tuples||[];var a8=a5[0];if(a8&&a3.length<a8.members.length){var a2=a8.members;for(var a1=0;a1<a2.length;a1++){if(a2[a1].measure){continue}var a7=false;for(var a4=0;a4<a3.length;a4++){if(N(a3[a4]).indexOf(a2[a1].hierarchy)===0){a7=true;break}}if(!a7){a3.push({name:[a2[a1].name],expand:false})}}}}function l(a3){var a2=[];var a4=a3.members;for(var a1=0;a1<a4.length;a1++){if(a4[a1].measure){continue}a2.push({name:[a4[a1].name],expand:a4[a1].children.length>0})}return a2}function j(a4,a3,a5){a4=a4||{};aF(a3,a4);if(a5.length>1){a3.push({name:w,measure:true,children:aE(a5)})}var a2={members:a3};if(a4.tuples){var a1=i(a4.tuples,a2);if(a1.tuple){a3=l(a1.tuple)}}return a3}function aN(a2){var a1=x.getter(a2.field,true);return function(a3,a4){return a2.aggregate(a1(a3.dataItem),a4,a3)}}function S(a1){return typeof a1==="number"&&!isNaN(a1)}function h(a1){return a1&&a1.getTime}var y={sum:function(a3,a2){var a1=a2.accumulator;if(!S(a1)){a1=a3}else{if(S(a3)){a1+=a3}}return a1},count:function(a2,a1){return(a1.accumulator||0)+1},average:{aggregate:function(a3,a2){var a1=a2.accumulator;if(a2.count===B){a2.count=0}if(!S(a1)){a1=a3}else{if(S(a3)){a1+=a3}}if(S(a3)){a2.count++}return a1},result:function(a2){var a1=a2.accumulator;if(S(a1)){a1=a1/a2.count}return a1}},max:function(a3,a2){var a1=a2.accumulator;if(!S(a1)&&!h(a1)){a1=a3}if(a1<a3&&(S(a3)||h(a3))){a1=a3}return a1},min:function(a3,a2){var a1=a2.accumulator;if(!S(a1)&&!h(a1)){a1=a3}if(a1>a3&&(S(a3)||h(a3))){a1=a3}return a1}};var aL=aO.extend({init:function(a1){this.options=at({},this.options,a1);this.dimensions=this._normalizeDescriptors("field",this.options.dimensions);this.measures=this._normalizeDescriptors("name",this.options.measures)},_normalizeDescriptors:function(a6,a3){a3=a3||{};var a2={};var a5;if(az.call(a3)==="[object Array]"){for(var a1=0,a4=a3.length;a1<a4;a1++){a5=a3[a1];if(typeof a5==="string"){a2[a5]={}}else{if(a5[a6]){a2[a5[a6]]=a5}}}a3=a2}return a3},_rootTuples:function(a6,a4){var a3=a4.length||1;var a2=this.dimensions||[];var a7,a1,a5;var ba=0;var a9;var a8=a6.length;var bc=[];var bb=[];if(a8||a4.length){for(ba=0;ba<a3;ba++){a7={members:[]};for(a9=0;a9<a8;a9++){a1=a6[a9];a5=a1.split("&");a7.members[a7.members.length]={children:[],caption:(a2[a1]||{}).caption||"All",name:a1,levelName:a1,levelNum:"0",hasChildren:true,parentName:a5.length>1?a5[0]:B,hierarchy:a1}}if(a3>1){a7.members[a7.members.length]={children:[],caption:a4[ba].caption,name:a4[ba].descriptor.name,levelName:"MEASURES",levelNum:"0",hasChildren:false,parentName:B,hierarchy:"MEASURES"}}bc[bc.length]=a7}bb.push(aT)}return{keys:bb,tuples:bc}},_expandedTuples:function(bf,bd,be){var a5=be.length||1;var a3=this.dimensions||[];var a6;var ba;var bh;var a8;var bb;var a1;var a4=[];var a7=[];var a2;var bg;var bc;var bi;var a9;for(bh in bf){a8=bf[bh];a2=this._findExpandedMember(bd,a8.uniquePath);bb=a4[a2.index]||[];a1=a7[a2.index]||[];bg=a2.member.names;for(a6=0;a6<a5;a6++){ba={members:[]};for(a9=0;a9<bg.length;a9++){if(a9===a2.member.expandedIdx){ba.members[ba.members.length]={children:[],caption:a8.value,name:a8.name,hasChildren:false,levelNum:1,levelName:a8.parentName+a8.name,parentName:a8.parentName,hierarchy:a8.parentName+a8.name};if(a6===0){a1.push(U(ba,a9).join(""))}}else{bi=bg[a9];bc=bi.split("&");ba.members[ba.members.length]={children:[],caption:(a3[bi]||{}).caption||"All",name:bi,levelName:bi,levelNum:"0",hasChildren:true,parentName:bc.length>1?bc[0]:B,hierarchy:bi}}}if(a5>1){ba.members[ba.members.length]={children:[],caption:be[a6].caption,name:be[a6].descriptor.name,levelName:"MEASURES",levelNum:"0",hasChildren:true,parentName:B,hierarchy:"MEASURES"}}bb[bb.length]=ba}a4[a2.index]=bb;a7[a2.index]=a1}return{keys:a7,tuples:a4}},_findExpandedMember:function(a2,a3){for(var a1=0;a1<a2.length;a1++){if(a2[a1].uniquePath===a3){return{member:a2[a1],index:a1}}}},_asTuples:function(a5,a4,a3){a3=a3||[];var a2=this._rootTuples(a4.root,a3);var a1=this._expandedTuples(a5,a4.expanded,a3);return{keys:[].concat.apply(a2.keys,a1.keys),tuples:[].concat.apply(a2.tuples,a1.tuples)}},_measuresInfo:function(a4,a5){var a9=0;var a6=a4&&a4.length;var a1=[];var a7={};var a8={};var ba=this.measures||{};var a3;var a2;for(;a9<a6;a9++){a2=a4[a9].descriptor.name;a3=ba[a2]||{};a1.push(a2);if(a3.result){a7[a2]=a3.result}if(a3.format){a8[a2]=a3.format}}return{names:a1,formats:a8,resultFuncs:a7,rowAxis:a5}},_toDataArray:function(bg,a9,bh,bf){var a6=[];var a3;var bj,be,bd,bc,ba;var a4,a1,a5;var a7=1;var a8=[];var bi;var bb=bh.length||1;var a2=bf.length||1;if(a9.rowAxis){a8=a9.names;a7=a8.length}else{bi=a9.names}for(be=0;be<bb;be++){a4=bg[bh[be]||aT];for(ba=0;ba<a7;ba++){if(a9.rowAxis){bi=[a8[ba]]}for(bd=0;bd<a2;bd++){a5=bf[bd]||aT;a1=a4.items[a5];if(a5===aT){a3=a4.aggregates}else{a3=a1?a1.aggregates:{}}for(bc=0;bc<bi.length;bc++){bj=bi[bc];this._addData(a6,a3[bj],a9.formats[bj],a9.resultFuncs[bj])}}}}return a6},_addData:function(a2,a5,a6,a3){var a4="";var a1;if(a5){a5=a3?a3(a5):a5.accumulator;a4=a6?x.format(a6,a5):a5}a1=a2.length;a2[a1]={ordinal:a1,value:a5||"",fmtValue:a4}},_matchDescriptors:function(a1,a2,a7){var a4;var a5;var a3;var a6=a2.names;var a9=a2.expandedIdx;var a8;while(a9>0){a4=a6[--a9].split("&");if(a4.length>1){a5=a4[0];a3=a4[1];a8=a7[a5](a1);a8=a8!==B&&a8!==null?a8.toString():a8;if(a8!=a3){return false}}}return true},_calculateAggregate:function(a5,a2,a4){var a1={};var a6;var a3;for(var a7=0;a7<a5.length;a7++){a3=a5[a7].descriptor.name;a6=a4.aggregates[a3]||{};a6.accumulator=a5[a7].aggregator(a2,a6);a1[a3]=a6}return a1},_processColumns:function(be,bg,bd,a1,bc,a2,a4,a8){var ba;var a6;var a3;var bf;var bh,bi,bb,a9;var a5=bc.dataItem;var a7=0;for(;a7<bg.length;a7++){a6=bg[a7];if(!this._matchDescriptors(a5,a6,bd)){continue}a9=a6.names.slice(0,a6.expandedIdx).join("");bi=a6.names[a6.expandedIdx];ba=bd[bi](a5);ba=ba!==B&&ba!==null?ba.toString():ba;bb=bi;bi=bi+"&"+ba;bh=a9+bi;a3=a1[bh]||{index:a4.columnIndex,parentName:bb,name:bi,uniquePath:a9+bb,value:ba};bf=a2.items[bh]||{aggregates:{}};a2.items[bh]={index:a3.index,aggregates:this._calculateAggregate(be,bc,bf)};if(a8){if(!a1[bh]){a4.columnIndex++}a1[bh]=a3}}},_measureAggregators:function(ba){var a9=ba.measures||[];var a1=this.measures||{};var a6=[];var a2,a3,a8,a5;var a7,a4;if(a9.length){for(a8=0,a5=a9.length;a8<a5;a8++){a2=a9[a8];a3=a1[a2.name];a7=null;if(a3){a4=a3.aggregate;if(typeof a4==="string"){a7=y[a4.toLowerCase()];if(!a7){throw new Error("There is no such aggregate function")}a3.aggregate=a7.aggregate||a7;a3.result=a7.result}a6.push({descriptor:a2,caption:a3.caption,result:a3.result,aggregator:aN(a3)})}}}else{a6.push({descriptor:{name:"default"},caption:"default",aggregator:function(){return 1}})}return a6},_buildGetters:function(a5){var a2={};var a4;var a3;for(var a1=0;a1<a5.length;a1++){a3=a5[a1];a4=a3.split("&");if(a4.length>1){a2[a4[0]]=x.getter(a4[0],true)}else{a2[a3]=x.getter(ak(a3),true)}}return a2},_parseDescriptors:function(a5){var a3=A(a5);var a6=aI(a3.root);var a4=a3.expanded;var a2=[];for(var a1=0;a1<a4.length;a1++){a2.push(Q(a4[a1].name,a6))}return{root:a6,expanded:a2}},_filter:function(a4,a2){if(!a2){return a4}var a5;var a1=0;var a3=a2.filters;for(;a1<a3.length;a1++){a5=a3[a1];if(a5.operator==="in"){a3[a1]=this._normalizeFilter(a5)}}return new x.data.Query(a4).filter(a2).data},_normalizeFilter:function(a3){var a4=a3.value.split(",");var a2=[];if(!a4.length){return a4}for(var a1=0;a1<a4.length;a1++){a2.push({field:a3.field,operator:"eq",value:a4[a1]})}return{logic:"or",filters:a2}},process:function(bu,a6){bu=bu||[];a6=a6||{};bu=this._filter(bu,a6.filter);var bk=a6.measures||[];var bj=a6.measuresAxis==="rows";var ba=a6.columns||[];var br=a6.rows||[];if(!ba.length&&br.length&&(!bk.length||bk.length&&bj)){ba=br;br=[];bj=false}if(!ba.length&&!br.length){bj=false}if(!ba.length&&bk.length){ba=aE(a6.measures)}ba=this._parseDescriptors(ba);br=this._parseDescriptors(br);var bg={};var a3={};var bf={};var bo;var a7={columnIndex:0};var bp=this._measureAggregators(a6);var bs=this._buildGetters(ba.root);var a9=this._buildGetters(br.root);var a1=false;var bc=ba.expanded;var bw=br.expanded;var bd;var bn;var a8=bw.length!==0;var a2,bt,be,a4;var bv,bi,bm,bl;var bb,bq;var a5=bu.length;var bh=0;if(ba.root.length||br.root.length){a1=true;for(bh=0;bh<a5;bh++){bd=bu[bh];bn={dataItem:bd,index:bh};a4=bg[aT]||{items:{},aggregates:{}};this._processColumns(bp,bc,bs,a3,bn,a4,a7,!a8);a4.aggregates=this._calculateAggregate(bp,bn,a4);bg[aT]=a4;for(a2=0;a2<bw.length;a2++){bt=bw[a2];if(!this._matchDescriptors(bd,bt,a9)){this._processColumns(bp,bc,bs,a3,bn,{items:{},aggregates:{}},a7,true);continue}bi=bt.names.slice(0,bt.expandedIdx).join("");be=bt.names[bt.expandedIdx];bm=be;bo=a9[be](bd);bo=bo!==B?bo.toString():bo;be=be+"&"+bo;bv=bi+be;bf[bv]={uniquePath:bi+bm,parentName:bm,name:be,value:bo};bl=bg[bv]||{items:{},aggregates:{}};this._processColumns(bp,bc,bs,a3,bn,bl,a7,true);bl.aggregates=this._calculateAggregate(bp,bn,bl);bg[bv]=bl}}}if(a1&&a5){if(bp.length>1&&(!a6.columns||!a6.columns.length)){ba={root:[],expanded:[]}}bb=this._asTuples(a3,ba,bj?[]:bp);bq=this._asTuples(bf,br,bj?bp:[]);a3=bb.tuples;bf=bq.tuples;bg=this._toDataArray(bg,this._measuresInfo(bp,bj),bq.keys,bb.keys)}else{bg=a3=bf=[]}return{axes:{columns:{tuples:a3},rows:{tuples:bf}},data:bg}}});var aH=aO.extend({init:function(a1,a2){this.transport=a2;this.options=a2.options||{};if(!this.transport.discover){if(aK(a1.discover)){this.discover=a1.discover}}},read:function(a1){return this.transport.read(a1)},update:function(a1){return this.transport.update(a1)},create:function(a1){return this.transport.create(a1)},destroy:function(a1){return this.transport.destroy(a1)},discover:function(a1){if(this.transport.discover){return this.transport.discover(a1)}a1.success({})},catalog:function(a3){var a2=this.options||{};if(a3===B){return(a2.connection||{}).catalog}var a1=a2.connection||{};a1.catalog=a3;this.options.connection=a1;aJ.extend(this.transport.options,{connection:a1})},cube:function(a3){var a2=this.options||{};if(a3===B){return(a2.connection||{}).cube}var a1=a2.connection||{};a1.cube=a3;this.options.connection=a1;at(true,this.transport.options,{connection:a1})}});var ap=t.extend({init:function(a2){var a1=((a2||{}).schema||{}).cube;var a4="columns";var a5;var a3={axes:aa,cubes:aa,catalogs:aa,measures:aa,dimensions:aa,hierarchies:aa,levels:aa,members:aa};if(a1){a3=aJ.extend(a3,this._cubeSchema(a1));this.cubeBuilder=new aL(a1)}t.fn.init.call(this,at(true,{},{schema:a3},a2));this.transport=new aH(this.options.transport||{},this.transport);this._columns=aE(this.options.columns);this._rows=aE(this.options.rows);a5=this.options.measures||[];if(az.call(a5)==="[object Object]"){a4=a5.axis||"columns";a5=a5.values||[]}this._measures=O(a5);this._measuresAxis=a4;this._skipNormalize=0;this._axes={}},_cubeSchema:function(a1){return{dimensions:function(){var a2=[];var a4=a1.dimensions;for(var a3 in a4){a2.push({name:a3,caption:a4[a3].caption||a3,uniqueName:a3,defaultHierarchy:a3,type:1})}if(a1.measures){a2.push({name:w,caption:w,uniqueName:w,type:2})}return a2},hierarchies:function(){return[]},measures:function(){var a2=[];var a4=a1.measures;for(var a3 in a4){a2.push({name:a3,caption:a3,uniqueName:a3,aggregator:a3})}return a2},members:aJ.proxy(function(a5,a3){var a2=a3.levelUniqueName||a3.memberUniqueName;var bb=this.options.schema.data;var a7=aK(bb)?bb:x.getter(bb,true);var a6=this.options.data&&a7(this.options.data)||this._rawData||[];var bc=[];var a8;var ba;var a9=0;var a4={};if(a2){a2=a2.split(".")[0]}if(!a3.treeOp){bc.push({caption:a1.dimensions[a2].caption||a2,childrenCardinality:"1",dimensionUniqueName:a2,hierarchyUniqueName:a2,levelUniqueName:a2,name:a2,uniqueName:a2});return bc}a8=x.getter(ak(a2),true);for(;a9<a6.length;a9++){ba=a8(a6[a9]);if((ba||ba===0)&&!a4[ba]){a4[ba]=true;bc.push({caption:ba,childrenCardinality:"0",dimensionUniqueName:a2,hierarchyUniqueName:a2,levelUniqueName:a2,name:ba,uniqueName:ba})}}return bc},this)}},options:{serverSorting:true,serverPaging:true,serverFiltering:true,serverGrouping:true,serverAggregates:true},catalog:function(a1){if(a1===B){return this.transport.catalog()}this.transport.catalog(a1);this._mergeState({});this._axes={};this.data([])},cube:function(a1){if(a1===B){return this.transport.cube()}this.transport.cube(a1);this._axes={};this._mergeState({});this.data([])},axes:function(){return this._axes},columns:function(a1){if(a1===B){return this._columns}this._skipNormalize+=1;this._clearAxesData=true;this._columns=aE(a1);this.query({columns:a1,rows:this.rowsAxisDescriptors(),measures:this.measures(),sort:this.sort(),filter:this.filter()})},rows:function(a1){if(a1===B){return this._rows}this._skipNormalize+=1;this._clearAxesData=true;this._rows=aE(a1);this.query({columns:this.columnsAxisDescriptors(),rows:a1,measures:this.measures(),sort:this.sort(),filter:this.filter()})},measures:function(a1){if(a1===B){return this._measures}this._skipNormalize+=1;this._clearAxesData=true;this.query({columns:this.columnsAxisDescriptors(),rows:this.rowsAxisDescriptors(),measures:O(a1),sort:this.sort(),filter:this.filter()})},measuresAxis:function(){return this._measuresAxis||"columns"},_expandPath:function(a9,a1){var a5=a1==="columns"?"columns":"rows";var a4=a1==="columns"?"rows":"columns";var a2=aE(a9);var a8=N(a2[a2.length-1]);this._lastExpanded=a5;a2=j(this.axes()[a5],a2,this.measures());for(var a6=0;a6<a2.length;a6++){var a3=N(a2[a6]);if(a3===a8){if(a2[a6].expand){return}a2[a6].expand=true}else{a2[a6].expand=false}}var a7={};a7[a5]=a2;a7[a4]=this._descriptorsForAxis(a4);this._query(a7)},_descriptorsForAxis:function(a2){var a3=this.axes();var a1=this[a2]()||[];if(a3&&a3[a2]&&a3[a2].tuples&&a3[a2].tuples[0]){a1=aM(a3[a2].tuples||[])}return a1},columnsAxisDescriptors:function(){return this._descriptorsForAxis("columns")},rowsAxisDescriptors:function(){return this._descriptorsForAxis("rows")},_process:function(a1,a2){this._view=a1;a2=a2||{};a2.items=a2.items||this._view;this.trigger(M,a2)},_query:function(a1){var a2=this;if(!a1){this._skipNormalize+=1;this._clearAxesData=true}return a2.query(at({},{page:a2.page(),pageSize:a2.pageSize(),sort:a2.sort(),filter:a2.filter(),group:a2.group(),aggregate:a2.aggregate(),columns:this.columnsAxisDescriptors(),rows:this.rowsAxisDescriptors(),measures:this.measures()},a1))},query:function(a1){var a2=this._mergeState(a1);if(this._data.length&&this.cubeBuilder){this._params(a2);this._updateLocalData(this._pristineData);return aJ.Deferred().resolve().promise()}return this.read(a2)},_mergeState:function(a1){a1=t.fn._mergeState.call(this,a1);if(a1!==B){this._measures=O(a1.measures);if(a1.columns){a1.columns=aE(a1.columns)}else{if(!a1.columns){this._columns=[]}}if(a1.rows){a1.rows=aE(a1.rows)}else{if(!a1.rows){this._rows=[]}}}return a1},filter:function(a1){if(a1===B){return this._filter}this._skipNormalize+=1;this._clearAxesData=true;this._query({filter:a1,page:1})},expandColumn:function(a1){this._expandPath(a1,"columns")},expandRow:function(a1){this._expandPath(a1,"rows")},success:function(a2){var a1;if(this.cubeBuilder){a1=(this.reader.data(a2)||[]).slice(0)}t.fn.success.call(this,a2);if(a1){this._pristineData=a1}},_processResult:function(a4,a8){if(this.cubeBuilder){var a6=this.cubeBuilder.process(a4,this._requestData);a4=a6.data;a8=a6.axes}var a7,ba;var a5,bb,a2,a9;var a3=this.columns();var bd=this.rows();var a1=a8.columns&&a8.columns.tuples;if(!a3.length&&bd.length&&a1&&(this._rowMeasures().length||!this.measures().length)){a8={columns:{},rows:a8.columns}}if(!a3.length&&!bd.length&&this.measuresAxis()==="rows"&&a1){a8={columns:{},rows:a8.columns}}this._axes={columns:k(this._axes.columns),rows:k(this._axes.rows)};a8={columns:k(a8.columns),rows:k(a8.rows)};a7=this._normalizeTuples(a8.columns.tuples,this._axes.columns.tuples,a3,this._columnMeasures());ba=this._normalizeTuples(a8.rows.tuples,this._axes.rows.tuples,bd,this._rowMeasures());this._skipNormalize-=1;if(!this.cubeBuilder){a4=this._normalizeData({columnsLength:a8.columns.tuples.length,rowsLength:a8.rows.tuples.length,columnIndexes:a7,rowIndexes:ba,data:a4})}if(this._lastExpanded=="rows"){a5=a8.columns.tuples;a2=this._columnMeasures();bb=ah(a8.columns,this._axes.columns,a2);if(bb){a9="columns";a8.columns=bb;aU(a5,bb.tuples,a8.rows.tuples.length,a2,a4);if(!this.cubeBuilder){a4=this._normalizeData({columnsLength:P(a8.columns.tuples,a2),rowsLength:a8.rows.tuples.length,data:a4})}}}else{if(this._lastExpanded=="columns"){a5=a8.rows.tuples;a2=this._rowMeasures();bb=ah(a8.rows,this._axes.rows,a2);if(bb){a9="rows";a8.rows=bb;T(a5,bb.tuples,a8.columns.tuples.length,a2,a4);if(!this.cubeBuilder){a4=this._normalizeData({columnsLength:P(a8.rows.tuples,a2),rowsLength:a8.columns.tuples.length,data:a4})}}}}this._lastExpanded=null;var bc=this._mergeAxes(a8,a4,a9);this._axes=bc.axes;return bc.data},_readData:function(a2){var a3=this.reader.axes(a2);var a1=this.reader.data(a2);if(this.cubeBuilder){this._rawData=a1}return this._processResult(a1,a3)},_createTuple:function(bc,a2,be){var a6=bc.members;var a3=a6.length;var bb={members:[]};var ba,a5;var a1,a4;var a8;var a9;var bf;var a7;var bd=0;if(a2){a3-=1}for(;bd<a3;bd++){a7=a6[bd];a5=Number(a7.levelNum);a1=a7.name;a4=a7.parentName;bf=a7.caption||a1;a8=a7.hasChildren;a9=a7.hierarchy;ba=a7.levelName;if(be){bf="All";if(a5===0){a4=a7.name}else{a5-=1}a8=true;a1=a9=ba=a4}bb.members.push({name:a1,children:[],caption:bf,levelName:ba,levelNum:a5.toString(),hasChildren:a8,hierarchy:a9,parentName:!be?a4:""})}if(a2){bb.members.push({name:a2.name,children:[]})}return bb},_hasRoot:function(a8,a1,ba){if(a1.length){return i(a1,a8).tuple}var a6=a8.members;var a7;var a2;var a5=true;var a4;for(var a9=0,a3=a6.length;a9<a3;a9++){a7=a6[a9];a4=Number(a7.levelNum)||0;a2=ba[a9];if(!(a4===0||a2&&a7.name===N(a2))){a5=false;break}}return a5},_mergeAxes:function(a9,a4,bb){var bc=this._columnMeasures();var bf=this._rowMeasures();var a8=this.axes();var bd,a7;var a6=P(a8.rows.tuples,bf);var be=a9.rows.tuples.length;var a1=P(a8.columns.tuples,bc);var a2=a9.columns.tuples.length;if(bb=="columns"){a2=a1;a7=a9.columns.tuples}else{a7=ac(a9.columns.tuples,bc);a4=am(a7,a4)}var ba=X(a8.columns.tuples,a7,bc);if(bb=="rows"){be=P(a9.rows.tuples,bf);a7=a9.rows.tuples}else{a7=ac(a9.rows.tuples,bf);a4=r(a7,a4)}var a5=X(a8.rows.tuples,a7,bf);a8.columns.tuples=ba.tuples;a8.rows.tuples=a5.tuples;if(a1!==P(a8.columns.tuples,bc)){bd=ba.index+v(ba.parsedRoot,ba.memberIndex,bc);var a3=a1+a2;a4=this._mergeColumnData(a4,bd,be,a2,a3)}else{if(a6!==P(a8.rows.tuples,bf)){bd=a5.index+v(a5.parsedRoot,a5.memberIndex,bf);a4=this._mergeRowData(a4,bd,be,a2)}}if(a8.columns.tuples.length===0&&a8.rows.tuples.length===0){a4=[]}return{axes:a8,data:a4}},_mergeColumnData:function(bb,a7,a3,a1,a4){var a5=this.data().toJSON();var a8,a6,a2=0,ba;var a9=Math.max(this._columnMeasures().length,1);a3=Math.max(a3,1);if(a5.length>0){a2=a9;a4-=a9}for(a8=0;a8<a3;a8++){a6=a7+a8*a4;ba=bb.splice(0,a1);ba.splice(0,a2);[].splice.apply(a5,[a6,0].concat(ba))}return a5},_mergeRowData:function(a9,a4,a2,a1){var a3=this.data().toJSON();var a6,a5,a7;var a8=Math.max(this._rowMeasures().length,1);a1=Math.max(a1,1);if(a3.length>0){a2-=a8;a9.splice(0,a1*a8)}for(a6=0;a6<a2;a6++){a7=a9.splice(0,a1);a5=a4*a1+a6*a1;[].splice.apply(a3,[a5,0].concat(a7))}return a3},_columnMeasures:function(){var a2=this.measures();var a1=[];if(this.measuresAxis()==="columns"){if(this.columns().length===0){a1=a2}else{if(a2.length>1){a1=a2}}}return a1},_rowMeasures:function(){var a2=this.measures();var a1=[];if(this.measuresAxis()==="rows"){if(this.rows().length===0){a1=a2}else{if(a2.length>1){a1=a2}}}return a1},_updateLocalData:function(a2,a1){if(this.cubeBuilder){if(a1){this._requestData=a1}a2=this._processResult(a2)}this._data=this._observe(a2);this._ranges=[];this._addRange(this._data);this._total=this._data.length;this._pristineTotal=this._total;this._process(this._data)},data:function(a2){var a1=this;if(a2!==B){this._pristineData=a2.slice(0);this._updateLocalData(a2,{columns:this.columns(),rows:this.rows(),measures:this.measures()})}else{return a1._data}},_normalizeTuples:function(a5,a1,bb,a2){var a3=a2.length||1;var a8=0;var bc=[];var a6={};var ba=0;var a7,a4,a9;if(!a5.length){return}if(this._skipNormalize<=0&&!this._hasRoot(a5[0],a1,bb)){this._skipNormalize=0;for(;a8<a3;a8++){bc.push(this._createTuple(a5[0],a2[a8],true));a6[a8]=a8}a5.splice.apply(a5,[0,a5.length].concat(bc).concat(a5));a8=a3}if(a2.length){a9=a7=a5[a8];a4=a7.members.length-1;while(a7){if(ba>=a3){ba=0}if(a7.members[a4].name!==a2[ba].name){a5.splice(a8,0,this._createTuple(a7,a2[ba]));a6[a8]=a8}a8+=1;ba+=1;a7=a5[a8];if(a3>ba&&(!a7||ab(a9,a4-1)!==ab(a7,a4-1))){for(;ba<a3;ba++){a5.splice(a8,0,this._createTuple(a9,a2[ba]));a6[a8]=a8;a8+=1}a7=a5[a8]}a9=a7}}return a6},_addMissingDataItems:function(a2,a3){while(a3.rowIndexes[parseInt(a2.length/a3.columnsLength,10)]!==B){for(var a1=0;a1<a3.columnsLength;a1++){a2=au(a2)}}while(a3.columnIndexes[a2.length%a3.columnsLength]!==B){a2=au(a2)}return a2},_normalizeOrdinals:function(a1,a2,a3){var a4=a3.lastOrdinal;if(!a2){return au(a1)}if(a2.ordinal-a4>1){a4+=1;while(a4<a2.ordinal&&a1.length<a3.length){a1=this._addMissingDataItems(au(a1),a3);a4+=1}}a2.ordinal=a1.length;a1[a1.length]=a2;return a1},_normalizeData:function(a3){var a7=a3.data;var a4=0;var a2;var a1=[];var a6;var a5;a3.lastOrdinal=0;a3.columnIndexes=a3.columnIndexes||{};a3.rowIndexes=a3.rowIndexes||{};a3.columnsLength=a3.columnsLength||1;a3.rowsLength=a3.rowsLength||1;a3.length=a3.columnsLength*a3.rowsLength;a5=a3.length;if(a7.length===a5){return a7}while(a1.length<a5){a2=a7[a4++];if(a2){a6=a2.ordinal}a1=this._normalizeOrdinals(this._addMissingDataItems(a1,a3),a2,a3);a3.lastOrdinal=a6}return a1},discover:function(a1,a2){var a3=this,a4=a3.transport;return aJ.Deferred(function(a5){a4.discover(at({success:function(a6){a6=a3.reader.parse(a6);if(a3._handleCustomErrors(a6)){return}if(a2){a6=a2(a6)}a5.resolve(a6)},error:function(a7,a6,a8){a5.reject(a7);a3.error(a7,a6,a8)}},a1))}).promise().done(function(){a3.trigger("schemaChange")})},schemaMeasures:function(){var a1=this;return a1.discover({data:{command:"schemaMeasures",restrictions:{catalogName:a1.transport.catalog(),cubeName:a1.transport.cube()}}},function(a2){return a1.reader.measures(a2)})},schemaKPIs:function(){var a1=this;return a1.discover({data:{command:"schemaKPIs",restrictions:{catalogName:a1.transport.catalog(),cubeName:a1.transport.cube()}}},function(a2){return a1.reader.kpis(a2)})},schemaDimensions:function(){var a1=this;return a1.discover({data:{command:"schemaDimensions",restrictions:{catalogName:a1.transport.catalog(),cubeName:a1.transport.cube()}}},function(a2){return a1.reader.dimensions(a2)})},schemaHierarchies:function(a1){var a2=this;return a2.discover({data:{command:"schemaHierarchies",restrictions:{catalogName:a2.transport.catalog(),cubeName:a2.transport.cube(),dimensionUniqueName:a1}}},function(a3){return a2.reader.hierarchies(a3)})},schemaLevels:function(a1){var a2=this;return a2.discover({data:{command:"schemaLevels",restrictions:{catalogName:a2.transport.catalog(),cubeName:a2.transport.cube(),hierarchyUniqueName:a1}}},function(a3){return a2.reader.levels(a3)})},schemaCubes:function(){var a1=this;return a1.discover({data:{command:"schemaCubes",restrictions:{catalogName:a1.transport.catalog()}}},function(a2){return a1.reader.cubes(a2)})},schemaCatalogs:function(){var a1=this;return a1.discover({data:{command:"schemaCatalogs"}},function(a2){return a1.reader.catalogs(a2)})},schemaMembers:function(a2){var a1=this;var a3=function(a4){return function(a5){return a1.reader.members(a5,a4)}}(a2);return a1.discover({data:{command:"schemaMembers",restrictions:at({catalogName:a1.transport.catalog(),cubeName:a1.transport.cube()},a2)}},a3)},_params:function(a2){if(this._clearAxesData){this._axes={};this._data=this._observe([]);this._clearAxesData=false;this.trigger(V)}var a1=t.fn._params.call(this,a2);a1=at({measures:this.measures(),measuresAxis:this.measuresAxis(),columns:this.columns(),rows:this.rows()},a1);if(this.cubeBuilder){this._requestData=a1}return a1}});function au(a1){a1[a1.length]={value:"",fmtValue:"",ordinal:a1.length};return a1}function ah(a1,a2,a3){if(a1.tuples.length<P(a2.tuples,a3)){return a2}return}function aU(bb,a4,a7,a2,a9){var a6,a3,ba;var a1=bb.length;var a8=P(a4,a2);var a5=a2.length||1;for(a3=0;a3<a7;a3++){for(a6=0;a6<a1;a6++){ba=aW(bb[a6],a4)*a5;ba+=a6%a5;a9[a3*a1+a6].ordinal=a3*a8+ba}}}function T(ba,a4,a1,a2,a8){var a6,a3,a9;var a7=ba.length;var a5=a2.length||1;for(a3=0;a3<a7;a3++){a9=aW(ba[a3],a4);a9*=a5;a9+=a3%a5;for(a6=0;a6<a1;a6++){a8[a3*a1+a6].ordinal=a9*a1+a6}}}function aW(a1,a2){return i(a2,a1).index}function P(a3,a5){if(!a3.length){return 0}var a2=a3.slice();var a4=a2.shift();var a1=1;while(a4){if(a4.members){[].push.apply(a2,a4.members)}else{if(a4.children){if(!a4.measure){a1+=a4.children.length}[].push.apply(a2,a4.children)}}a4=a2.shift()}if(a5.length){a1=a1*a5.length}return a1}function k(a1){if(!a1){a1={tuples:[]}}if(!a1.tuples){a1.tuples=[]}return a1}function v(a1,a7,a6){if(!a1){return 0}var a3=Math.max(a6.length,1);var a4=a1.members.slice(0,a7);var a2=a3;var a5=a4.shift();if(a3>1){a3+=1}while(a5){if(a5.name===w){a2+=a3}else{if(a5.children){[].push.apply(a4,a5.children)}else{a2++;[].push.apply(a4,a5.members)}}a5=a4.shift()}return a2}function X(a7,a1,a2){if(!a1[0]){return{parsedRoot:null,tuples:a7,memberIndex:0,index:0}}var a9=i(a7,a1[0]);if(!a9.tuple){return{parsedRoot:null,tuples:a1,memberIndex:0,index:0}}var a5=a9.tuple.members;var a3=a1[0].members;var a6=-1;if(a5.length!==a3.length){return{parsedRoot:null,tuples:a1,memberIndex:0,index:0}}for(var a8=0,a4=a5.length;a8<a4;a8++){if(!a5[a8].measure&&a3[a8].children[0]){if(a6==-1&&a3[a8].children.length){a6=a8}a5[a8].children=a3[a8].children}}a2=Math.max(a2.length,1);return{parsedRoot:a9.tuple,index:a9.index*a2,memberIndex:a6,tuples:a7}}function e(a5,a2){var a3=true;var a1,a4;a5=a5.members;a2=a2.members;for(a1=0,a4=a5.length;a1<a4;a1++){if(a5[a1].measure||a2[a1].measure){continue}a3=a3&&N(a5[a1])===N(a2[a1])}return a3}function i(a5,a9){var a8,a2,a7,ba,a1=0;var a6,a4,a3;for(a8=0,a2=a5.length;a8<a2;a8++){a7=a5[a8];if(e(a7,a9)){return{tuple:a7,index:a1}}a1++;for(a6=0,a4=a7.members.length;a6<a4;a6++){a3=a7.members[a6];if(a3.measure){continue}ba=i(a3.children,a9);a1+=ba.index;if(ba.tuple){return{tuple:ba.tuple,index:a1}}}}return{index:a1}}function ao(a2,a5){var a6,a3,a1,a4="";for(a3=0,a1=a2.length;a3<a1;a3++){a6=a2[a3];a4+=a6.name;if(!a5[a4]){a5[a4]=a6}}}function b(a8,a2){var a4=a8.members;var a6,a7,a5,a9="";var a3="";var a1;for(a6=0,a7=a4.length;a6<a7;a6++){a5=a4[a6];if(a1){if(a2[a9+a5.name]){a9+=a5.name;a1=a2[a9];continue}else{if(a2[a9+a5.parentName]){return a2[a9+a5.parentName]}else{if(a2[a3+a5.parentName]){return a2[a3+a5.parentName]}else{return a2[a3]}}}}a9+=a5.name;a1=a2[a5.parentName];if(!a1){a1=a2[a9];if(!a1){return null}}if(a1){a3+=a1.name}}return a1}function f(a3,a6){if(a6.length===0){return -1}var a5=a6[0];var a4=a3.members;for(var a2=0,a1=a4.length;a2<a1;a2++){if(a4[a2].name==a5.name){return a2}}}function ad(a1,a2){if(a2<0){return}var a3={name:w,measure:true,children:[aJ.extend({members:[],dataIndex:a1.dataIndex},a1.members[a2])]};a1.members.splice(a2,1,a3);a1.dataIndex=B}function ac(a6,a8){if(a6.length<1){return[]}var a2=[];var a7={};var a5=f(a6[0],a8);for(var a4=0;a4<a6.length;a4++){var a1=a6[a4];a1.dataIndex=a4;ad(a1,a5);var a3=b(a1,a7);if(a3){if(a5<0||!a3.measure){a3.children.push(a1)}else{a3.children.push(a1.members[a5].children[0])}}else{a2.push(a1)}ao(a1.members,a7)}return a2}function r(a5,a4){if(!a5||!a5.length){return a4}var bb=[];var ba=q(a5);var a3=ba.length;var a1=Math.max(a4.length/a3,1);var a9,a7,a2,a6;var a8;for(a9=0;a9<a3;a9++){a2=a1*a9;a6=a1*ba[a9];for(a7=0;a7<a1;a7++){a8=parseInt(a6+a7,10);bb[parseInt(a2+a7,10)]=a4[a8]||{value:"",fmtValue:"",ordinal:a8}}}return bb}function am(a4,a3){if(!a4||!a4.length){return a3}var ba=[];var a9=q(a4);var a1=a9.length;var a2=Math.max(a3.length/a1,1);var a5,a7,a8,a6;for(a7=0;a7<a2;a7++){a8=a1*a7;for(a5=0;a5<a1;a5++){a6=a9[a5]+a8;ba[a8+a5]=a3[a6]||{value:"",fmtValue:"",ordinal:a6}}}return ba}function q(a6){a6=a6.slice();var a3=[];var a2=a6.shift();var a1,a7,a4,a5,a8;while(a2){if(a2.dataIndex!==B){a3.push(a2.dataIndex)}a4=0;for(a1=0,a7=a2.members.length;a1<a7;a1++){a8=a2.members[a1];a5=a8.children;if(a8.measure){[].splice.apply(a6,[0,0].concat(a5))}else{[].splice.apply(a6,[a4,0].concat(a5))}a4+=a5.length}a2=a6.shift()}return a3}ap.create=function(a1){a1=a1&&a1.push?{data:a1}:a1;var a3=a1||{},a2=a3.data;a3.data=a2;if(!(a3 instanceof ap)&&a3 instanceof x.data.DataSource){throw new Error("Incorrect DataSource type. Only PivotDataSource instances are supported")}return a3 instanceof ap?a3:new ap(a3)};function ae(a1){var a2=a1.split(".");if(a2.length>2){return a2[0]+"."+a2[1]}return a1}function u(a5,a4){var a1=a5.length-1;var a3=a5[a1];var a2;a2=aX(a4,a3);if(a2&&a2.dir){a3="ORDER("+a3+".Children,"+a2.field+".CurrentMember.MEMBER_CAPTION,"+a2.dir+")"}else{a3+=".Children"}a5[a1]=a3;return a5}function aX(a2,a4){for(var a1=0,a3=a2.length;a1<a3;a1++){if(a4.indexOf(a2[a1].field)===0){return a2[a1]}}return null}function aR(a3){var a1="CROSSJOIN({";var a2;if(a3.length>2){a2=a3.pop();a1+=aR(a3)}else{a1+=a3.shift();a2=a3.pop()}a1+="},{";a1+=a2;a1+="})";return a1}function aP(a1,a3){var a2=a1.slice(0);if(a3.length>1){a2.push("{"+ar(a3).join(",")+"}")}return aR(a2)}function ar(a5){var a2=0;var a4=a5.length;var a1=[];var a3;for(;a2<a4;a2++){a3=a5[a2];a1.push(a3.name!==B?a3.name:a3)}return a1}function N(a1){a1=a1.name||a1;if(az.call(a1)==="[object Array]"){a1=a1[a1.length-1]}return a1}function aI(a2){var a3=a2.length;var a4=[];var a1=0;for(;a1<a3;a1++){a4.push(a2[a1].name[0])}return a4}function Q(a7,a6){var a4;var a8;var a3;var a2=0;var a5=a7.length;var a1=a6.length;a6=a6.slice(0);for(;a2<a5;a2++){a4=a7[a2];for(a3=0;a3<a1;a3++){a8=ae(a6[a3]);if(a4.indexOf(a8)!==-1){a6[a3]=a4;break}}}return{names:a6,expandedIdx:a3,uniquePath:a6.slice(0,a3+1).join("")}}function A(a6){var a9=[];var a3=[];var ba=[];var a8;var a5,a4;var bb=0;var a2=a6.length;var a1;var a7;var bc;for(;bb<a2;bb++){a8=a6[bb];a1=a8.name;bc=false;if(az.call(a1)!=="[object Array]"){a8.name=a1=[a1]}if(a1.length>1){a3.push(a8)}else{a7=ae(a1[0]);for(a5=0,a4=ba.length;a5<a4;a5++){if(ba[a5].name[0].indexOf(a7)===0){bc=true;break}}if(!bc){ba.push(a8)}if(a8.expand){a9.push(a8)}}}a9=a9.concat(a3);return{root:ba,expanded:a9}}function s(a5,a1,a6){var a3="";a5=a5||[];var a7=A(a5);var bb=a7.root;var a9=aI(bb);var a4=[];a7=a7.expanded;var a2=a7.length;var bc=0;var a8;var ba=[];if(a9.length>1||a1.length>1){a4.push(aP(a9,a1));for(;bc<a2;bc++){a8=u(a7[bc].name,a6);ba=Q(a8,a9).names;a4.push(aP(ba,a1))}a3+=a4.join(",")}else{for(;bc<a2;bc++){a8=u(a7[bc].name,a6);ba.push(a8[0])}a3+=a9.concat(ba).join(",")}return a3}var aB={contains:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") > 0',doesnotcontain:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}")',startswith:', Left({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',endswith:', Right({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',eq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"',neq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"'};function D(a5){var a4="";var a2=a5.value;var a3=a5.field;var a1=a5.operator;if(a1=="in"){a4+="{";a4+=a2;a4+="}"}else{a4+=a1=="neq"||a1=="doesnotcontain"?"-":"";a4+="Filter(";a4+=a3+".MEMBERS";a4+=x.format(aB[a1],a3,a2);a4+=")"}return a4}function aD(a3,a2){var a7="",a6;var a5=a3.filters;var a4=a5.length;var a1;for(a1=a4-1;a1>=0;a1--){a6="SELECT (";a6+=D(a5[a1]);a6+=") ON 0";if(a1==a4-1){a6+=" FROM ["+a2+"]";a7=a6}else{a7=a6+" FROM ( "+a7+" )"}}return a7}function aC(a2,a3,a5){var a1="";if(a3){a1+="<"+a2+">";var a6;for(var a4 in a3){a6=a3[a4];if(a5){a4=a4.replace(/([A-Z]+(?=$|[A-Z][a-z])|[A-Z]?[a-z]+)/g,"$1_").toUpperCase().replace(/_$/,"")}a1+="<"+a4+">"+a6+"</"+a4+">"}a1+="</"+a2+">"}else{a1+="<"+a2+"/>"}return a1}var m={schemaCubes:"MDSCHEMA_CUBES",schemaCatalogs:"DBSCHEMA_CATALOGS",schemaMeasures:"MDSCHEMA_MEASURES",schemaDimensions:"MDSCHEMA_DIMENSIONS",schemaHierarchies:"MDSCHEMA_HIERARCHIES",schemaLevels:"MDSCHEMA_LEVELS",schemaMembers:"MDSCHEMA_MEMBERS",schemaKPIs:"MDSCHEMA_KPIS"};var aw={read:function(a2){var a7='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement>';a7+="SELECT NON EMPTY {";var a4=a2.columns||[];var a5=a2.rows||[];var a6=a2.measures||[];var a1=a2.measuresAxis==="rows";var a3=a2.sort||[];if(!a4.length&&a5.length&&(!a6.length||a6.length&&a1)){a4=a5;a5=[];a1=false}if(!a4.length&&!a5.length){a1=false}if(a4.length){a7+=s(a4,!a1?a6:[],a3)}else{if(a6.length&&!a1){a7+=ar(a6).join(",")}}a7+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON COLUMNS";if(a5.length||a1&&a6.length>1){a7+=", NON EMPTY {";if(a5.length){a7+=s(a5,a1?a6:[],a3)}else{a7+=ar(a6).join(",")}a7+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON ROWS"}if(a2.filter){a7+=" FROM ";a7+="(";a7+=aD(a2.filter,a2.connection.cube);a7+=")"}else{a7+=" FROM ["+a2.connection.cube+"]"}if(a6.length==1&&a4.length){a7+=" WHERE ("+ar(a6).join(",")+")"}a7+="</Statement></Command><Properties><PropertyList><Catalog>"+a2.connection.catalog+"</Catalog><Format>Multidimensional</Format></PropertyList></Properties></Execute></Body></Envelope>";return a7.replace(/\&/g,"&amp;")},discover:function(a1){a1=a1||{};var a2='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis">';a2+="<RequestType>"+(m[a1.command]||a1.command)+"</RequestType>";a2+="<Restrictions>"+aC("RestrictionList",a1.restrictions,true)+"</Restrictions>";if(a1.connection&&a1.connection.catalog){a1.properties=aJ.extend({},{Catalog:a1.connection.catalog},a1.properties)}a2+="<Properties>"+aC("PropertyList",a1.properties)+"</Properties>";a2+="</Discover></Body></Envelope>";return a2}};var Z=x.data.RemoteTransport.extend({init:function(a1){var a2=a1;a1=this.options=at(true,{},this.options,a1);x.data.RemoteTransport.call(this,a1);if(aK(a2.discover)){this.discover=a2.discover}else{if(typeof a2.discover==="string"){this.options.discover={url:a2.discover}}else{if(!a2.discover){this.options.discover=this.options.read}}}},setup:function(a1,a2){a1.data=a1.data||{};aJ.extend(true,a1.data,{connection:this.options.connection});return x.data.RemoteTransport.fn.setup.call(this,a1,a2)},options:{read:{dataType:"text",contentType:"text/xml",type:"POST"},discover:{dataType:"text",contentType:"text/xml",type:"POST"},parameterMap:function(a1,a2){return aw[a2](a1,a2)}},discover:function(a1){return aJ.ajax(this.setup(a1,"discover"))}});function R(a1){if(a1==null){return[]}var a2=az.call(a1);if(a2!=="[object Array]"){return[a1]}return a1}function d(a3){var be={tuples:[]};var a8=R(x.getter("Tuples.Tuple",true)(a3));var a1=x.getter("Caption['#text']");var a9=x.getter("UName['#text']");var bd=x.getter("LName['#text']");var ba=x.getter("LNum['#text']");var bc=x.getter("CHILDREN_CARDINALITY['#text']",true);var a6=x.getter("['@Hierarchy']");var a2=x.getter("PARENT_UNIQUE_NAME['#text']",true);for(var bb=0;bb<a8.length;bb++){var a4=[];var a5=R(a8[bb].Member);for(var a7=0;a7<a5.length;a7++){a4.push({children:[],caption:a1(a5[a7]),name:a9(a5[a7]),levelName:bd(a5[a7]),levelNum:ba(a5[a7]),hasChildren:parseInt(bc(a5[a7]),10)>0,parentName:a2(a5[a7]),hierarchy:a6(a5[a7])})}be.tuples.push({members:a4})}return be}var F={cubes:{name:x.getter("CUBE_NAME['#text']",true),caption:x.getter("CUBE_CAPTION['#text']",true),description:x.getter("DESCRIPTION['#text']",true),type:x.getter("CUBE_TYPE['#text']",true)},catalogs:{name:x.getter("CATALOG_NAME['#text']",true),description:x.getter("DESCRIPTION['#text']",true)},measures:{name:x.getter("MEASURE_NAME['#text']",true),caption:x.getter("MEASURE_CAPTION['#text']",true),uniqueName:x.getter("MEASURE_UNIQUE_NAME['#text']",true),description:x.getter("DESCRIPTION['#text']",true),aggregator:x.getter("MEASURE_AGGREGATOR['#text']",true),groupName:x.getter("MEASUREGROUP_NAME['#text']",true),displayFolder:x.getter("MEASURE_DISPLAY_FOLDER['#text']",true),defaultFormat:x.getter("DEFAULT_FORMAT_STRING['#text']",true)},kpis:{name:x.getter("KPI_NAME['#text']",true),caption:x.getter("KPI_CAPTION['#text']",true),value:x.getter("KPI_VALUE['#text']",true),goal:x.getter("KPI_GOAL['#text']",true),status:x.getter("KPI_STATUS['#text']",true),trend:x.getter("KPI_TREND['#text']",true),statusGraphic:x.getter("KPI_STATUS_GRAPHIC['#text']",true),trendGraphic:x.getter("KPI_TREND_GRAPHIC['#text']",true),description:x.getter("KPI_DESCRIPTION['#text']",true),groupName:x.getter("MEASUREGROUP_NAME['#text']",true)},dimensions:{name:x.getter("DIMENSION_NAME['#text']",true),caption:x.getter("DIMENSION_CAPTION['#text']",true),description:x.getter("DESCRIPTION['#text']",true),uniqueName:x.getter("DIMENSION_UNIQUE_NAME['#text']",true),defaultHierarchy:x.getter("DEFAULT_HIERARCHY['#text']",true),type:x.getter("DIMENSION_TYPE['#text']",true)},hierarchies:{name:x.getter("HIERARCHY_NAME['#text']",true),caption:x.getter("HIERARCHY_CAPTION['#text']",true),description:x.getter("DESCRIPTION['#text']",true),uniqueName:x.getter("HIERARCHY_UNIQUE_NAME['#text']",true),dimensionUniqueName:x.getter("DIMENSION_UNIQUE_NAME['#text']",true),displayFolder:x.getter("HIERARCHY_DISPLAY_FOLDER['#text']",true),origin:x.getter("HIERARCHY_ORIGIN['#text']",true),defaultMember:x.getter("DEFAULT_MEMBER['#text']",true)},levels:{name:x.getter("LEVEL_NAME['#text']",true),caption:x.getter("LEVEL_CAPTION['#text']",true),description:x.getter("DESCRIPTION['#text']",true),uniqueName:x.getter("LEVEL_UNIQUE_NAME['#text']",true),dimensionUniqueName:x.getter("DIMENSION_UNIQUE_NAME['#text']",true),displayFolder:x.getter("LEVEL_DISPLAY_FOLDER['#text']",true),orderingProperty:x.getter("LEVEL_ORDERING_PROPERTY['#text']",true),origin:x.getter("LEVEL_ORIGIN['#text']",true),hierarchyUniqueName:x.getter("HIERARCHY_UNIQUE_NAME['#text']",true)},members:{name:x.getter("MEMBER_NAME['#text']",true),caption:x.getter("MEMBER_CAPTION['#text']",true),uniqueName:x.getter("MEMBER_UNIQUE_NAME['#text']",true),dimensionUniqueName:x.getter("DIMENSION_UNIQUE_NAME['#text']",true),hierarchyUniqueName:x.getter("HIERARCHY_UNIQUE_NAME['#text']",true),levelUniqueName:x.getter("LEVEL_UNIQUE_NAME['#text']",true),childrenCardinality:x.getter("CHILDREN_CARDINALITY['#text']",true)}};var Y=["axes","catalogs","cubes","dimensions","hierarchies","levels","measures"];var c=x.data.XmlDataReader.extend({init:function(a1){x.data.XmlDataReader.call(this,a1);this._extend(a1)},_extend:function(a3){var a1=0;var a5=Y.length;var a2;var a4;for(;a1<a5;a1++){a2=Y[a1];a4=a3[a2];if(a4&&a4!==aa){this[a2]=a4}}},parse:function(a2){var a1=x.data.XmlDataReader.fn.parse(a2.replace(/<(\/?)(\w|-)+:/g,"<$1"));return x.getter("['Envelope']['Body']",true)(a1)},errors:function(a1){var a2=x.getter("['Fault']",true)(a1);if(a2){return[{faultstring:x.getter("faultstring['#text']",true)(a2),faultcode:x.getter("faultcode['#text']",true)(a2)}]}return null},axes:function(a3){a3=x.getter('ExecuteResponse["return"].root',true)(a3);var a5=R(x.getter("Axes.Axis",true)(a3));var a4;var a2={columns:{},rows:{}};for(var a1=0;a1<a5.length;a1++){a4=a5[a1];if(a4["@name"].toLowerCase()!=="sliceraxis"){if(!a2.columns.tuples){a2.columns=d(a4)}else{a2.rows=d(a4)}}}return a2},data:function(a6){a6=x.getter('ExecuteResponse["return"].root',true)(a6);var a7=R(x.getter("CellData.Cell",true)(a6));var a3=[];var a5=x.getter("['@CellOrdinal']");var a2=x.getter("Value['#text']");var a4=x.getter("FmtValue['#text']");for(var a1=0;a1<a7.length;a1++){a3.push({value:a2(a7[a1]),fmtValue:a4(a7[a1]),ordinal:parseInt(a5(a7[a1]),10)})}return a3},_mapSchema:function(a3,a5){a3=x.getter('DiscoverResponse["return"].root',true)(a3);var a6=R(x.getter("row",true)(a3));var a2=[];for(var a1=0;a1<a6.length;a1++){var a7={};for(var a4 in a5){a7[a4]=a5[a4](a6[a1])}a2.push(a7)}return a2},measures:function(a1){return this._mapSchema(a1,F.measures)},kpis:function(a1){return this._mapSchema(a1,F.kpis)},hierarchies:function(a1){return this._mapSchema(a1,F.hierarchies)},levels:function(a1){return this._mapSchema(a1,F.levels)},dimensions:function(a1){return this._mapSchema(a1,F.dimensions)},cubes:function(a1){return this._mapSchema(a1,F.cubes)},catalogs:function(a1){return this._mapSchema(a1,F.catalogs)},members:function(a1){return this._mapSchema(a1,F.members)}});at(true,x.data,{PivotDataSource:ap,XmlaTransport:Z,XmlaDataReader:c,PivotCubeBuilder:aL,transports:{xmla:Z},readers:{xmla:c}});var g=function(a4,a2){if(!a4){return null}for(var a1=0,a3=a4.length;a1<a3;a1++){if(a4[a1].field===a2){return a4[a1]}}return null};var L=function(a5,a3){var a2=[];for(var a1=0,a4=a5.length;a1<a4;a1++){if(a5[a1].field!==a3){a2.push(a5[a1])}}return a2};x.ui.PivotSettingTarget=p.extend({init:function(a2,a1){var a3=this;p.fn.init.call(a3,a2,a1);a3.element.addClass("k-pivot-setting");a3.dataSource=x.data.PivotDataSource.create(a1.dataSource);a3._refreshHandler=aJ.proxy(a3.refresh,a3);a3.dataSource.first(M,a3._refreshHandler);if(!a1.template){a3.options.template="<div data-"+x.ns+'name="${data.name || data}">${data.name || data}'+(a3.options.enabled?'<a class="k-button k-button-icon k-button-bare"><span class="k-icon k-i-close k-setting-delete"></span></a>':"")+"</div>"}a3.template=x.template(a3.options.template);a3.emptyTemplate=x.template(a3.options.emptyTemplate);a3._sortable();a3.element.on("click"+aS,".k-button,.k-item",function(a6){var a5=aJ(a6.target);var a4=a5.closest("["+x.attr("name")+"]").attr(x.attr("name"));if(!a4){return}if(a5.hasClass("k-i-close")){a3.remove(a4)}else{if(a3.options.sortable&&a5[0]===a6.currentTarget){a3.sort({field:a4,dir:a5.find(".k-i-sort-asc-sm")[0]?"desc":"asc"})}}});if(a1.filterable||a1.sortable){a3.fieldMenu=new W.PivotFieldMenu(a3.element,{messages:a3.options.messages.fieldMenu,filter:".k-setting-fieldmenu",filterable:a1.filterable,sortable:a1.sortable,dataSource:a3.dataSource})}a3.refresh()},options:{name:"PivotSettingTarget",template:null,filterable:false,sortable:false,emptyTemplate:"<div class='k-empty'>${data}</div>",setting:"columns",enabled:true,messages:{empty:"Drop Fields Here"}},setDataSource:function(a1){this.dataSource.unbind(M,this._refreshHandler);this.dataSource=this.options.dataSource=a1;if(this.fieldMenu){this.fieldMenu.setDataSource(a1)}a1.first(M,this._refreshHandler);this.refresh()},_sortable:function(){var a1=this;if(a1.options.enabled){this.sortable=this.element.kendoSortable({connectWith:this.options.connectWith,hint:a1.options.hint,cursor:"move",start:function(a2){a2.item.focus().blur()},change:function(a3){var a2=a3.item.attr(x.attr("name"));if(a3.action=="receive"){a1.add(a2)}else{if(a3.action=="remove"){a1.remove(a2)}else{if(a3.action=="sort"){a1.move(a2,a3.newIndex)}}}}}).data("kendoSortable")}},_indexOf:function(a4,a2){var a1,a5,a3=-1;for(a1=0,a5=a2.length;a1<a5;a1++){if(N(a2[a1])===a4){a3=a1;break}}return a3},_isKPI:function(a1){return a1.type==="kpi"||a1.measure},validate:function(a3){var a4=a3.type==2||"aggregator" in a3||this._isKPI(a3);if(a4){return this.options.setting==="measures"}if(this.options.setting==="measures"){return a4}var a1=this.dataSource[this.options.setting]();var a2=a3.defaultHierarchy||a3.uniqueName;if(this._indexOf(a2,a1)>-1){return false}a1=this.dataSource[this.options.setting==="columns"?"rows":"columns"]();if(this._indexOf(a2,a1)>-1){return false}return true},add:function(a3){var a2=this.dataSource[this.options.setting]();var a4,a1;a3=aJ.isArray(a3)?a3.slice(0):[a3];for(a4=0,a1=a3.length;a4<a1;a4++){if(this._indexOf(a3[a4],a2)!==-1){a3.splice(a4,1);a4-=1;a1-=1}}if(a3.length){a2=a2.concat(a3);this.dataSource[this.options.setting](a2)}},move:function(a4,a3){var a2=this.dataSource[this.options.setting]();var a1=this._indexOf(a4,a2);if(a1>-1){a4=a2.splice(a1,1)[0];a2.splice(a3,0,a4);this.dataSource[this.options.setting](a2)}},remove:function(a3){var a2=this.dataSource[this.options.setting]();var a1=this._indexOf(a3,a2);var a5=this.dataSource.sort();var a4=this.dataSource.filter();if(a1>-1){if(a4){a4.filters=L(a4.filters,a3);this.dataSource._filter.filters=a4.filters;if(!a4.filters.length){this.dataSource._filter=null}}if(a5){a5=L(a5,a3);this.dataSource._sort=a5}a2.splice(a1,1);this.dataSource[this.options.setting](a2)}},sort:function(a5){var a6=this.options.sortable;var a2=a6===true||a6.allowUnsort;var a4=a2&&a5.dir==="asc";var a3=this.dataSource.sort()||[];var a1=L(a3,a5.field);if(a4&&a3.length!==a1.length){a5=null}if(a5){a1.push(a5)}this.dataSource.sort(a1)},refresh:function(){var a3="";var a2=this.dataSource[this.options.setting]();var a5=a2.length;var a1=0;var a4;if(a5){for(;a1<a5;a1++){a4=a2[a1];a4=a4.name===B?{name:a4}:a4;a3+=this.template(at({sortIcon:this._sortIcon(a4.name)},a4))}}else{a3=this.emptyTemplate(this.options.messages.empty)}this.element.html(a3)},destroy:function(){p.fn.destroy.call(this);this.dataSource.unbind(M,this._refreshHandler);this.element.off(aS);if(this.sortable){this.sortable.destroy()}if(this.fieldMenu){this.fieldMenu.destroy()}this.element=null;this._refreshHandler=null},_sortIcon:function(a1){var a3=this.dataSource.sort();var a4=g(a3,N(a1));var a2="";if(a4){a2="k-i-sort-"+a4.dir}return a2}});var ai=p.extend({init:function(a3,a1){var a4=this;var a5;var a2;p.fn.init.call(a4,a3,a1);a4._dataSource();a4._bindConfigurator();a4._wrapper();a4._createLayout();a4._columnBuilder=a5=new aq();a4._rowBuilder=a2=new G();a4._contentBuilder=new ax();a4._templates();a4.columnsHeader.add(a4.rowsHeader).on("click","span.k-icon",function(){var a9=aJ(this);var ba=a5;var a7="expandColumn";var bb;var be=a9.attr(x.attr("path"));var a6={axis:"columns",path:aJ.parseJSON(be)};if(a9.parent().is("td")){ba=a2;a7="expandRow";a6.axis="rows"}var bc=a9.hasClass(aQ);var bd=ba.metadata[be];var a8=bd.expanded===B;bb=bc?al:ay;a6.childrenLoaded=bd.maxChildren>bd.children;if(a4.trigger(bb,a6)){return}ba.metadata[be].expanded=!bc;a9.toggleClass(aQ,!bc).toggleClass(z,bc);if(!bc&&a8){a4.dataSource[a7](a6.path)}else{a4.refresh()}});a4._scrollable();if(a4.options.autoBind){a4.dataSource.fetch()}x.notify(a4)},events:[I,E,ay,al],options:{name:"PivotGrid",autoBind:true,reorderable:true,filterable:false,sortable:false,height:null,columnWidth:100,configurator:"",columnHeaderTemplate:null,rowHeaderTemplate:null,dataCellTemplate:null,kpiStatusTemplate:null,kpiTrendTemplate:null,messages:{measureFields:"Drop Data Fields Here",columnFields:"Drop Column Fields Here",rowFields:"Drop Rows Fields Here"}},_templates:function(){var a2=this.options.columnHeaderTemplate;var a5=this.options.rowHeaderTemplate;var a1=this.options.dataCellTemplate;var a3=this.options.kpiStatusTemplate;var a4=this.options.kpiTrendTemplate;this._columnBuilder.template=x.template(a2||an,{useWithBlock:!!a2});this._contentBuilder.dataTemplate=x.template(a1||av,{useWithBlock:!!a1});this._contentBuilder.kpiStatusTemplate=x.template(a3||o,{useWithBlock:!!a3});this._contentBuilder.kpiTrendTemplate=x.template(a4||aV,{useWithBlock:!!a4});this._rowBuilder.template=x.template(a5||an,{useWithBlock:!!a5})},_bindConfigurator:function(){var a1=this.options.configurator;if(a1){aJ(a1).kendoPivotConfigurator("setDataSource",this.dataSource)}},cellInfoByElement:function(a1){a1=aJ(a1);return this.cellInfo(a1.index(),a1.parent("tr").index())},cellInfo:function(a2,a6){var a3=this._contentBuilder;var a4=a3.columnIndexes[a2||0];var a5=a3.rowIndexes[a6||0];var a1;if(!a4||!a5){return null}a1=a5.index*a3.rowLength+a4.index;return{columnTuple:a4.tuple,rowTuple:a5.tuple,measure:a4.measure||a5.measure,dataItem:this.dataSource.view()[a1]}},setDataSource:function(a1){this.options.dataSource=a1;this._dataSource();if(this.measuresTarget){this.measuresTarget.setDataSource(a1)}if(this.rowsTarget){this.rowsTarget.setDataSource(a1)}if(this.columnsTarget){this.columnsTarget.setDataSource(a1)}this._bindConfigurator();if(this.options.autoBind){a1.fetch()}},setOptions:function(a1){p.fn.setOptions.call(this,a1);this._templates()},destroy:function(){p.fn.destroy.call(this);clearTimeout(this._headerReflowTimeout)},_dataSource:function(){var a1=this;var a2=a1.options.dataSource;a2=aJ.isArray(a2)?{data:a2}:a2;if(a1.dataSource&&this._refreshHandler){a1.dataSource.unbind(M,a1._refreshHandler).unbind(V,a1._stateResetHandler).unbind(aG,a1._progressHandler).unbind(J,a1._errorHandler)}else{a1._refreshHandler=aJ.proxy(a1.refresh,a1);a1._progressHandler=aJ.proxy(a1._requestStart,a1);a1._stateResetHandler=aJ.proxy(a1._stateReset,a1);a1._errorHandler=aJ.proxy(a1._error,a1)}a1.dataSource=x.data.PivotDataSource.create(a2).bind(M,a1._refreshHandler).bind(aG,a1._progressHandler).bind(V,a1._stateResetHandler).bind(J,a1._errorHandler)},_error:function(){this._progress(false)},_requestStart:function(){this._progress(true)},_stateReset:function(){this._columnBuilder.reset();this._rowBuilder.reset()},_wrapper:function(){var a1=this.options.height;this.wrapper=this.element.addClass("k-widget k-pivot");if(a1){this.wrapper.css("height",a1)}},_measureFields:function(){this.measureFields=aJ(aj).addClass("k-pivot-toolbar k-header k-settings-measures");this.measuresTarget=this._createSettingTarget(this.measureFields,{setting:"measures",messages:{empty:this.options.messages.measureFields}})},_createSettingTarget:function(a3,a1){var a4='<span tabindex="0" class="k-button" data-'+x.ns+'name="${data.name}">${data.name}';var a5=a1.sortable;var a2="";if(a5){a2+="#if (data.sortIcon) {#";a2+='<span class="k-icon ${data.sortIcon}-sm"></span>';a2+="#}#"}if(a1.filterable||a5){a2+='<span class="k-icon k-i-more-vertical k-setting-fieldmenu"></span>'}if(this.options.reorderable){a2+='<span class="k-icon k-i-close k-setting-delete"></span>'}if(a2){a4+='<span class="k-field-actions">'+a2+"</span>"}a4+="</span>";return new x.ui.PivotSettingTarget(a3,aJ.extend({template:a4,emptyTemplate:'<span class="k-empty">${data}</span>',enabled:this.options.reorderable,dataSource:this.dataSource},a1))},_initSettingTargets:function(){this.columnsTarget=this._createSettingTarget(this.columnFields,{connectWith:this.rowFields,setting:"columns",filterable:this.options.filterable,sortable:this.options.sortable,messages:{empty:this.options.messages.columnFields,fieldMenu:this.options.messages.fieldMenu}});this.rowsTarget=this._createSettingTarget(this.rowFields,{connectWith:this.columnFields,setting:"rows",filterable:this.options.filterable,sortable:this.options.sortable,messages:{empty:this.options.messages.rowFields,fieldMenu:this.options.messages.fieldMenu}})},_createLayout:function(){var a5=this;var a2=aJ(af);var a4=a2.find(".k-pivot-rowheaders");var a1=a2.find(".k-pivot-table");var a3=aJ(aj).addClass("k-grid k-widget");a5._measureFields();a5.columnFields=aJ(aj).addClass("k-pivot-toolbar k-header k-settings-columns");a5.rowFields=aJ(aj).addClass("k-pivot-toolbar k-header k-settings-rows");a5.columnsHeader=aJ('<div class="k-grid-header-wrap" />').wrap('<div class="k-grid-header" />');a5.columnsHeader.parent().css("padding-right",x.support.scrollbar());a5.rowsHeader=aJ('<div class="k-grid k-widget k-alt"/>');a5.content=aJ('<div class="k-grid-content" />');a4.append(a5.measureFields);a4.append(a5.rowFields);a4.append(a5.rowsHeader);a3.append(a5.columnsHeader.parent());a3.append(a5.content);a1.append(a5.columnFields);a1.append(a3);a5.wrapper.append(a2);a5.columnsHeaderTree=new x.dom.Tree(a5.columnsHeader[0]);a5.rowsHeaderTree=new x.dom.Tree(a5.rowsHeader[0]);a5.contentTree=new x.dom.Tree(a5.content[0]);a5._initSettingTargets()},_progress:function(a1){x.ui.progress(this.wrapper,a1)},_resize:function(){if(this.content[0].firstChild){this._setSectionsWidth();this._setSectionsHeight();this._setContentWidth();this._setContentHeight();this._columnHeaderReflow()}},_columnHeaderReflow:function(){var a1=this.columnsHeader.children("table");if(!x.support.browser.mozilla){return}clearTimeout(this._headerReflowTimeout);a1.css("table-layout","auto");this._headerReflowTimeout=setTimeout(function(){a1.css("table-layout","")})},_setSectionsWidth:function(){var a3=this.rowsHeader;var a1=a3.parent(".k-pivot-rowheaders").width(aZ);var a2;a2=Math.max(H(this.measureFields),H(this.rowFields));a2=Math.max(a3.children("table").width(),a2);a1.width(a2)},_setSectionsHeight:function(){var a5=this.measureFields.height(aZ).height();var a6=this.columnFields.height(aZ).height();var a4=this.rowFields.height(aZ).innerHeight();var a2=this.columnsHeader.height(aZ).innerHeight();var a7=a4-this.rowFields.height();var a1=a6>a5?a6:a5;var a3=a2>a4?a2:a4;this.measureFields.height(a1);this.columnFields.height(a1);this.rowFields.height(a3-a7);this.columnsHeader.height(a3)},_setContentWidth:function(){var a3=this.content.find("table");var a5=this.columnsHeader.children("table");var a2=a3.children("colgroup").children().length;var a1=a2*this.options.columnWidth;var a4=Math.ceil(a1/this.content.width()*100);if(a4<100){a4=100}a3.add(a5).css("width",a4+"%");this._resetColspan(a5)},_setContentHeight:function(){var a4=this;var a3=a4.content;var a6=a4.rowsHeader;var a5=a4.wrapper.innerHeight();var a7=x.support.scrollbar();var a2=a3[0].offsetHeight===a3[0].clientHeight;var a1=a4.options.height;if(a4.wrapper.is(":visible")){if(!a5||!a1){if(a2){a7=0}a3.height("auto");a6.height(a3.height()-a7);return}a5-=n(a4.columnFields);a5-=n(a4.columnsHeader);if(a5<=a7*2){a5=a7*2+1;if(!a2){a5+=a7}}a3.height(a5);if(a2){a7=0}a6.height(a5-a7)}},_resetColspan:function(a3){var a2=this;var a1=a3.children("tbody").children(":first").children(":first");if(a2._colspan===B){a2._colspan=a1.attr("colspan")}a1.attr("colspan",1);clearTimeout(a2._layoutTimeout);a2._layoutTimeout=setTimeout(function(){a1.attr("colspan",a2._colspan);a2._colspan=B})},_axisMeasures:function(a3){var a2=[];var a5=this.dataSource;var a4=a5.measures();var a1=a4.length>1||a4[0]&&a4[0].type;if(a5.measuresAxis()===a3){if(a5[a3]().length===0||a1){a2=a4}}return a2},items:function(){return[]},refresh:function(){var a8=this;var a1=a8.dataSource;var a9=a1.axes();var a4=(a9.columns||{}).tuples||[];var ba=(a9.rows||{}).tuples||[];var a5=a8._columnBuilder;var a7=a8._rowBuilder;var a6={};var a3={};if(a8.trigger(I,{action:"rebind"})){return}a5.measures=a8._axisMeasures("columns");a8.columnsHeaderTree.render(a5.build(a4));a8.rowsHeaderTree.render(a7.build(ba));a6={indexes:a5._indexes,measures:a5.measures,metadata:a5.metadata};a3={indexes:a7._indexes,measures:this._axisMeasures("rows"),metadata:a7.metadata};a8.contentTree.render(a8._contentBuilder.build(a1.view(),a6,a3));a8._resize();if(a8.touchScroller){a8.touchScroller.contentResized()}else{var a2=x.touchScroller(a8.content);if(a2&&a2.movable){a8.touchScroller=a2;a2.movable.bind("change",function(bb){a8.columnsHeader.scrollLeft(-bb.sender.x);a8.rowsHeader.scrollTop(-bb.sender.y)})}}a8._progress(false);a8.trigger(E)},_scrollable:function(){var a2=this;var a1=a2.columnsHeader;var a3=a2.rowsHeader;a2.content.scroll(function(){a1.scrollLeft(this.scrollLeft);a3.scrollTop(this.scrollTop)});a3.bind("DOMMouseScroll"+aS+" mousewheel"+aS,aJ.proxy(a2._wheelScroll,a2))},_wheelScroll:function(a2){if(a2.ctrlKey){return}var a3=x.wheelDeltaY(a2);var a1=this.content.scrollTop();if(a3){a2.preventDefault();aJ(a2.currentTarget).one("wheel"+aS,false);this.rowsHeader.scrollTop(a1+-a3);this.content.scrollTop(a1+-a3)}}});var aY=x.dom.element;var K=x.dom.html;var aA=function(a1,a2){return{maxChildren:0,children:0,maxMembers:0,members:0,measures:1,levelNum:a1,parentMember:a2!==0}};var U=function(a2,a3){var a4=[];var a1=0;for(;a1<=a3;a1++){a4.push(a2.members[a1].name)}return a4};var ab=function(a2,a4){var a3="";var a1=0;for(;a1<=a4;a1++){a3+=a2.members[a1].name}return a3};var aq=aO.extend({init:function(){this.measures=1;this.metadata={}},build:function(a3){var a2=this._tbody(a3);var a1=this._colGroup();return[aY("table",null,[a1,a2])]},reset:function(){this.metadata={}},_colGroup:function(){var a3=this._rowLength();var a2=[];var a1=0;for(;a1<a3;a1++){a2.push(aY("col",null))}return aY("colgroup",null,a2)},_tbody:function(a2){var a1=a2[0];this.map={};this.rows=[];this.rootTuple=a1;this._indexes=[];if(a1){this._buildRows(a1,0);this._normalize()}else{this.rows.push(aY("tr",null,[aY("th",null,[K("&nbsp;")])]))}return aY("tbody",null,this.rows)},_normalize:function(){var a7=this.rows;var a4=a7.length;var a6=0;var a8;var a2;var a5;var a3;var a1;for(;a6<a4;a6++){a8=a7[a6];if(a8.rowSpan===1){continue}a3=a8.children;a5=0;a2=a3.length;for(;a5<a2;a5++){a1=a3[a5];if(a1.tupleAll){a1.attr.rowSpan=a8.rowSpan}}}},_rowIndex:function(a4){var a3=this.rows;var a2=a3.length;var a1=0;for(;a1<a2;a1++){if(a3[a1]===a4){break}}return a1},_rowLength:function(){var a3=this.rows[0]?this.rows[0].children:[];var a4=a3.length;var a2=0;var a1=0;if(a4){for(;a1<a4;a1++){a2+=a3[a1].attr.colSpan||1}}if(!a2){a2=this.measures}return a2},_row:function(a8,a7,a3){var a1=this.rootTuple.members[a7].name;var a6=a8.members[a7].levelNum;var a5=a1+a6;var a2=this.map;var a9;var a4;var ba=a2[a5];if(!ba){ba=aY("tr",null,[]);ba.parentMember=a3;ba.collapsed=0;ba.colSpan=0;ba.rowSpan=1;a2[a5]=ba;a9=a2[a1+(Number(a6)-1)];if(a9){a4=a9.children;if(a4[1]&&a4[1].attr.className.indexOf("k-alt")===-1){ba.notFirst=true}else{ba.notFirst=a9.notFirst}}this.rows.splice(this._rowIndex(a9)+1,0,ba)}else{ba.notFirst=false;if(!ba.parentMember||ba.parentMember!==a3){ba.parentMember=a3;ba.collapsed=0;ba.colSpan=0}}return ba},_measures:function(a7,a2,a4){var a6=this.map;var a8=a6.measureRow;var a3;if(!a8){a8=aY("tr",null,[]);a6.measureRow=a8;this.rows.push(a8)}for(var a1=0,a5=a7.length;a1<a5;a1++){a3=a7[a1];a8.children.push(this._cell(a4||"",[this._content(a3,a2)],a3))}return a5},_content:function(a2,a1){return K(this.template({member:a2,tuple:a1}))},_cell:function(a3,a2,a4){var a1=aY("th",{className:"k-header"+a3},a2);a1.value=a4.caption||a4.name;return a1},_buildRows:function(be,ba,bg){var bj=be.members;var a2=bj[ba];var bc=bj[ba+1];var a7,bi,a6,a3;var a1,bk,a4;var a9=[];var bf;var bd=0;var bb;var a8;var a5=0;var bh=0;if(a2.measure){this._measures(a2.children,be);return}bf=x.stringify(U(be,ba));a7=this._row(be,ba,bg);a6=a2.children;a3=a6.length;bb=this.metadata[bf];if(!bb){this.metadata[bf]=bb=aA(Number(a2.levelNum),ba);bb.rootLevelNum=Number(this.rootTuple.members[ba].levelNum)}this._indexes.push({path:bf,tuple:be});if(a2.hasChildren){if(bb.expanded===false){a5=bb.maxChildren;a7.collapsed+=a5;bb.children=0;a3=0}a4={className:"k-icon "+(a3?aQ:z)};a4[x.attr("path")]=bf;a9.push(aY("span",a4))}a9.push(this._content(a2,be));a1=this._cell(a7.notFirst?" k-first":"",a9,a2);a7.children.push(a1);a7.colSpan+=1;if(a3){bk=this._cell(" k-alt",[this._content(a2,be)],a2);a7.children.push(bk);for(;bd<a3;bd++){bi=this._buildRows(a6[bd],ba,a2)}a8=bi.colSpan;a5=bi.collapsed;a1.attr.colSpan=a8;bb.children=a8;bb.members=1;a7.colSpan+=a8;a7.collapsed+=a5;a7.rowSpan=bi.rowSpan+1;if(bc){if(bc.measure){a8=this._measures(bc.children,be," k-alt")}else{bi=this._buildRows(be,ba+1);a8=bi.colSpan;a7.collapsed+=bi.collapsed;bh=bi.collapsed}bk.attr.colSpan=a8;a8-=1;bb.members+=a8;a7.colSpan+=a8}}else{if(bc){if(bc.measure){a8=this._measures(bc.children,be)}else{bi=this._buildRows(be,ba+1);a8=bi.colSpan;a7.collapsed+=bi.collapsed;bh=bi.collapsed}bb.members=a8;if(a8>1){a1.attr.colSpan=a8;a7.colSpan+=a8-1}}}if(bb.maxMembers<bb.members+bh){bb.maxMembers=bb.members+bh}a6=bb.children+a5;if(bb.maxChildren<a6){bb.maxChildren=a6}(bk||a1).tupleAll=true;return a7}});var G=aO.extend({init:function(){this.metadata={}},build:function(a3){var a2=this._tbody(a3);var a1=this._colGroup();return[aY("table",null,[a1,a2])]},reset:function(){this.metadata={}},_rowLength:function(){var a3=this.rows[0].children;var a4=0;var a2=0;var a1=a3[a2];while(a1){a4+=a1.attr.colSpan||1;a1=a3[++a2]}return a4},_colGroup:function(){var a3=this._rowLength();var a2=[];var a1=0;for(;a1<a3;a1++){a2.push(aY("col",null))}return aY("colgroup",null,a2)},_tbody:function(a2){var a1=a2[0];this.rootTuple=a1;this.rows=[];this.map={};this._indexes=[];if(a1){this._buildRows(a1,0);this._normalize()}else{this.rows.push(aY("tr",null,[aY("td",null,[K("&nbsp;")])]))}return aY("tbody",null,this.rows)},_normalize:function(){var bc=this.rows;var a4=bc.length;var a2=0;var a5=this.rootTuple.members;var a7=a5[0].name;var a6=a5.length;var a8=0;var bb;var ba;var a9;var a1=this.map;var a3;for(;a2<a4;a2++){bb=bc[a2];for(a8=0;a8<a6;a8++){a9=this[a5[a8].name];ba=bb.colSpan["dim"+a8];if(ba&&ba.colSpan<a9){ba.attr.colSpan=a9-ba.colSpan+1}}}bb=a1[a7];a3=a1[a7+"all"];if(bb){bb.children[0].attr.className="k-first"}if(a3){a3.children[0].attr.className+=" k-first"}},_row:function(a1){var a2=aY("tr",null,a1);a2.rowSpan=1;a2.colSpan={};this.rows.push(a2);return a2},_content:function(a2,a1){return K(this.template({member:a2,tuple:a1}))},_cell:function(a3,a2,a4){var a1=aY("td",{className:a3},a2);a1.value=a4.caption||a4.name;return a1},_buildRows:function(bh,bc){var bo=this.map;var bi;var bm=bh.members;var a3=bm[bc];var bf=bm[bc+1];var a8=a3.children;var a5=a8.length;var bp=Number(a3.levelNum);var a7=this.rootTuple.members[bc].name;var bl=U(bh,bc-1).join("");var a1=Number(this.rootTuple.members[bc].levelNum);var bj=bl+(a1===bp?"":a3.parentName||"");var a9=bo[bj+"all"]||bo[bj];var bb=bp+1;var a2,bn;var bk,a6;var be;var a4;var ba=[];var bd;var bg;if(!a9||a9.hasChild){a9=this._row()}else{a9.hasChild=true}if(a3.measure){a4=a9.allCell?"k-grid-footer":"";a9.children.push(this._cell(a4,[this._content(a8[0],bh)],a8[0]));a9.rowSpan=a5;for(bg=1;bg<a5;bg++){this._row([this._cell(a4,[this._content(a8[bg],bh)],a8[bg])])}return a9}bo[bl+a3.name]=a9;bi=x.stringify(U(bh,bc));be=this.metadata[bi];if(!be){this.metadata[bi]=be=aA(bp,bc);be.rootLevelNum=a1}this._indexes.push({path:bi,tuple:bh});if(a3.hasChildren){if(be.expanded===false){a5=0;be.children=0}bd={className:"k-icon "+(a5?aQ:z)};bd[x.attr("path")]=bi;ba.push(aY("span",bd))}ba.push(this._content(a3,bh));a4=a9.allCell&&!a5?"k-grid-footer":"";a2=this._cell(a4,ba,a3);a2.colSpan=bb;a9.children.push(a2);a9.colSpan["dim"+bc]=a2;if(!this[a7]||this[a7]<bb){this[a7]=bb}if(a5){a9.allCell=false;a9.hasChild=false;for(bg=0;bg<a5;bg++){bk=this._buildRows(a8[bg],bc);if(a9!==bk){a9.rowSpan+=bk.rowSpan}}if(a9.rowSpan>1){a2.attr.rowSpan=a9.rowSpan}be.children=a9.rowSpan;bn=this._cell("k-grid-footer",[this._content(a3,bh)],a3);bn.colSpan=bb;a6=this._row([bn]);a6.colSpan["dim"+bc]=bn;a6.allCell=true;bo[bl+a3.name+"all"]=a6;if(bf){bk=this._buildRows(bh,bc+1);bn.attr.rowSpan=bk.rowSpan}a9.rowSpan+=a6.rowSpan;be.members=a6.rowSpan}else{if(bf){a9.hasChild=false;this._buildRows(bh,bc+1);(bn||a2).attr.rowSpan=a9.rowSpan;be.members=a9.rowSpan}}if(be.maxChildren<be.children){be.maxChildren=be.children}if(be.maxMembers<be.members){be.maxMembers=be.members}return a9}});var ax=aO.extend({init:function(){this.columnAxis={};this.rowAxis={}},build:function(a7,a5,a6){var a3=a5.indexes[0];var a4=a5.metadata[a3?a3.path:B];this.columnAxis=a5;this.rowAxis=a6;this.data=a7;this.rowLength=a4?a4.maxChildren+a4.maxMembers:a5.measures.length||1;if(!this.rowLength){this.rowLength=1}var a2=this._tbody();var a1=this._colGroup();return[aY("table",null,[a1,a2])]},_colGroup:function(){var a3=this.columnAxis.measures.length||1;var a2=[];var a1=0;if(this.rows[0]){a3=this.rows[0].children.length}for(;a1<a3;a1++){a2.push(aY("col",null))}return aY("colgroup",null,a2)},_tbody:function(){this.rows=[];if(this.data[0]){this.columnIndexes=this._indexes(this.columnAxis,this.rowLength);this.rowIndexes=this._indexes(this.rowAxis,Math.ceil(this.data.length/this.rowLength));this._buildRows()}else{this.rows.push(aY("tr",null,[aY("td",null,[K("&nbsp;")])]))}return aY("tbody",null,this.rows)},_indexes:function(a7,bd){var bh=[];var a2;var ba=a7.indexes;var be=a7.metadata;var a3=a7.measures;var a6=a3.length||1;var bc;var a9=0;var a1=0;var bf=0;var a5=ba.length;var bg;var bb;var a4;var a8;if(!a5){for(bg=0;bg<a6;bg++){bh[bg]={index:bg,measure:a3[bg],tuple:null}}return bh}for(;bf<a5;bf++){a2=ba[bf];bc=be[a2.path];a4=bc.children+bc.members;a8=0;if(a4){a4-=a6}if(bc.expanded===false&&bc.children!==bc.maxChildren){a8=bc.maxChildren}if(bc.parentMember&&bc.levelNum===bc.rootLevelNum){a4=-1}if(a4>-1){for(bg=0;bg<a6;bg++){bb=a4+bg;if(!bc.children){bb+=a1}bh[a4+a1+bg]={children:a4,index:a9,measure:a3[bg],tuple:a2.tuple};a9+=1}while(bh[a1]!==B){a1+=1}}if(a1===bd){break}a9+=a8}return bh},_buildRows:function(){var a3=this.rowIndexes;var a2=a3.length;var a1=0;for(;a1<a2;a1++){this.rows.push(this._buildRow(a3[a1]))}},_buildRow:function(a4){var ba=a4.index*this.rowLength;var a9=this.columnIndexes;var a6=a9.length;var a7;var bd=[];var bb=0;var a5;var bc,a2;var a8,a1,a3;for(;bb<a6;bb++){a7=a9[bb];a8={};if(a7.children){a8.className="k-alt"}a2="";a1=this.data[ba+a7.index];a3=a7.measure||a4.measure;a5={columnTuple:a7.tuple,rowTuple:a4.tuple,measure:a3,dataItem:a1};if(a1.value!==""&&a3&&a3.type){if(a3.type==="status"){a2=this.kpiStatusTemplate(a5)}else{if(a3.type==="trend"){a2=this.kpiTrendTemplate(a5)}}}if(!a2){a2=this.dataTemplate(a5)}bc=aY("td",a8,[K(a2)]);bc.value=a1.value;bd.push(bc)}a8={};if(a4.children){a8.className="k-grid-footer"}return aY("tr",a8,bd)}});W.plugin(ai);x.PivotExcelExporter=x.Class.extend({init:function(a1){this.options=a1;this.widget=a1.widget;this.dataSource=this.widget.dataSource},_columns:function(){var a7=this.widget.columnsHeaderTree.children[0];var a3=this.widget.rowsHeaderTree.children[0];var a6=a7.children[0].children.length;var a5=a3.children[0].children.length;var a4=this.widget.options.columnWidth;var a2=[];var a1;if(a5&&this.dataSource.data()[0]){for(a1=0;a1<a5;a1++){a2.push({autoWidth:true})}}for(a1=0;a1<a6;a1++){a2.push({autoWidth:false,width:a4})}return a2},_cells:function(ba,a4,a7){var bb=[];var a3=0;var a1=ba.length;var a5;var a9,a8;var a2,a6;for(;a3<a1;a3++){a9=[];a8=ba[a3].children;a5=a8.length;for(a2=0;a2<a5;a2++){a6=a8[a2];a9.push({background:"#7a7a7a",color:"#fff",value:a6.value,colSpan:a6.attr.colSpan||1,rowSpan:a6.attr.rowSpan||1})}if(a7){a7(a9,a3)}bb.push({cells:a9,type:a4})}return bb},_rows:function(){var a4=this.widget.columnsHeaderTree.children[0];var ba=this.widget.rowsHeaderTree.children[0];var a6=a4.children[0].children.length;var a9=ba.children[0].children.length;var a5=a4.children[1].children;var a2=ba.children[1].children;var a3=this.widget.contentTree.children[0].children[1].children;var a1=this._cells(a5,"header");if(a9){a1[0].cells.splice(0,0,{background:"#7a7a7a",color:"#fff",value:"",colSpan:a9,rowSpan:a5.length})}var a7=function(bg,be){var bd=0;var bb,bf;var bc=a3[be].children;for(;bd<a6;bd++){bb=bc[bd];bf=Number(bb.value);if(isNaN(bf)){bf=bb.value}bg.push({background:"#dfdfdf",color:"#333",value:bf,colSpan:1,rowSpan:1})}};var a8=this._cells(a2,"data",a7);return a1.concat(a8)},_freezePane:function(){var a4=this.widget.columnsHeaderTree.children[0];var a1=this.widget.rowsHeaderTree.children[0];var a3=a1.children[0].children.length;var a2=a4.children[1].children;return{colSplit:a3,rowSplit:a2.length}},workbook:function(){var a1;if(this.dataSource.view()[0]){a1=aJ.Deferred();a1.resolve()}else{a1=this.dataSource.fetch()}return a1.then(aJ.proxy(function(){return{sheets:[{columns:this._columns(),rows:this._rows(),freezePane:this._freezePane(),filter:null}]}},this))}});var a0={extend:function(a1){a1.events.push("excelExport");a1.options.excel=aJ.extend(a1.options.excel,this.options);a1.saveAsExcel=this.saveAsExcel},options:{proxyURL:"",filterable:false,fileName:"Export.xlsx"},saveAsExcel:function(){var a2=this.options.excel||{};var a1=new x.PivotExcelExporter({widget:this});a1.workbook().then(aJ.proxy(function(a4){if(!this.trigger("excelExport",{workbook:a4})){var a3=new x.ooxml.Workbook(a4);x.saveAs({dataURI:a3.toDataURL(),fileName:a4.fileName||a2.fileName,proxyURL:a2.proxyURL,forceProxy:a2.forceProxy})}},this))}};x.PivotExcelMixin=a0;if(x.ooxml&&x.ooxml.Workbook){a0.extend(ai.prototype)}if(x.PDFMixin){x.PDFMixin.extend(ai.prototype);ai.fn._drawPDF=function(){return this._drawPDFShadow({width:this.wrapper.width()},{avoidLinks:this.options.pdf.avoidLinks})}}}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.treeview.draganddrop",["kendo.data","kendo.draganddrop"],a)}(function(){var a={id:"treeview.draganddrop",name:"Hierarchical Drag & Drop",category:"framework",depends:["core","draganddrop"],advanced:true};(function(e,c){var h=window.kendo;var j=h.ui;var i=e.proxy;var g=e.extend;var f="visibility";var b="k-state-hover";var d="input,a,textarea,.k-multiselect-wrap,select,button,a.k-button>.k-icon,button.k-button>.k-icon,span.k-icon.k-i-arrow-60-right,span.k-icon.k-i-arrow-45-down-right";j.HierarchicalDragAndDrop=h.Class.extend({init:function(l,k){this.element=l;this.hovered=l;this.options=g({dragstart:e.noop,drag:e.noop,drop:e.noop,dragend:e.noop},k);this._draggable=new j.Draggable(l,{ignore:d,filter:k.filter,autoScroll:k.autoScroll,cursorOffset:{left:10,top:h.support.mobileOS?-40/h.support.zoomLevel():10},hint:i(this._hint,this),dragstart:i(this.dragstart,this),dragcancel:i(this.dragcancel,this),drag:i(this.drag,this),dragend:i(this.dragend,this),$angular:k.$angular})},_hint:function(k){return"<div class='k-header k-drag-clue'><span class='k-icon k-drag-status' />"+this.options.hintText(k)+"</div>"},_removeTouchHover:function(){if(h.support.touch&&this.hovered){this.hovered.find("."+b).removeClass(b);this.hovered=false}},_hintStatus:function(k){var l=this._draggable.hint.find(".k-drag-status")[0];if(k){l.className="k-icon k-drag-status "+k}else{return e.trim(l.className.replace(/(p|k)-(icon|drag-status)/g,""))}},dragstart:function(k){this.source=k.currentTarget.closest(this.options.itemSelector);if(this.options.dragstart(this.source)){k.preventDefault()}if(this.options.reorderable){this.dropHint=e("<div class='k-i-drag-and-drop' />").css(f,"hidden").appendTo(this.element)}else{this.dropHint=e()}},drag:function(u){var y=this.options;var k=this.source;var v=this.dropTarget=e(h.eventTarget(u));var l=v.closest(y.allowedContainers);var t,m,z,s,x;var w,r,q;var n,p,o;if(!l.length){o="k-i-cancel";this._removeTouchHover()}else{if(k[0]==v[0]||y.contains(k[0],v[0])){o="k-i-cancel"}else{o="k-i-insert-middle";n=y.itemFromTarget(v);t=n.item;if(t.length){this._removeTouchHover();m=h._outerHeight(t);s=n.content;if(y.reorderable){x=m/(s.length>0?4:2);z=h.getOffset(t).top;w=u.y.location<z+x;r=z+m-x<u.y.location;q=s.length&&!w&&!r}else{q=true;w=false;r=false}this.hovered=q?l:false;this.dropHint.css(f,q?"hidden":"visible");if(this._lastHover&&this._lastHover[0]!=s[0]){this._lastHover.removeClass(b)}this._lastHover=s.toggleClass(b,q);if(q){o="k-i-plus"}else{p=t.position();p.top+=w?0:m;this.dropHint.css(p)[w?"prependTo":"appendTo"](y.dropHintContainer(t));if(w&&n.first){o="k-i-insert-up"}if(r&&n.last){o="k-i-insert-down"}}}else{if(v[0]!=this.dropHint[0]){if(this._lastHover){this._lastHover.removeClass(b)}if(!e.contains(this.element[0],l[0])){o="k-i-plus"}else{o="k-i-cancel"}}}}}this.options.drag({originalEvent:u.originalEvent,source:k,target:v,pageY:u.y.location,pageX:u.x.location,status:o.substring(2),setStatus:function(A){o=A}});if(o.indexOf("k-i-insert")!==0){this.dropHint.css(f,"hidden")}this._hintStatus(o)},dragcancel:function(){this.dropHint.remove()},dragend:function(q){var l="over",p=this.source,k,o=this.dropHint,r=this.dropTarget,m,n;if(o.css(f)=="visible"){l=this.options.dropPositionFrom(o);k=o.closest(this.options.itemSelector)}else{if(r){k=r.closest(this.options.itemSelector);if(!k.length){k=r.closest(this.options.allowedContainers)}}}m={originalEvent:q.originalEvent,source:p[0],destination:k[0],valid:this._hintStatus()!="k-i-cancel",setValid:function(s){this.valid=s},dropTarget:r[0],position:l};n=this.options.drop(m);o.remove();this._removeTouchHover();if(this._lastHover){this._lastHover.removeClass(b)}if(!m.valid||n){this._draggable.dropped=m.valid;return}this._draggable.dropped=true;this.options.dragend({originalEvent:q.originalEvent,source:p,destination:k,position:l})},destroy:function(){this._lastHover=this.hovered=null;this._draggable.destroy()}})}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.treeview",["kendo.data","kendo.treeview.draganddrop"],a)}(function(){var a={id:"treeview",name:"TreeView",category:"web",description:"The TreeView widget displays hierarchical data in a traditional tree structure,with support for interactive drag-and-drop operations.",depends:["data"],features:[{id:"treeview-dragging",name:"Drag & Drop",description:"Support for drag & drop",depends:["treeview.draganddrop"]}]};(function(z,o){var B=window.kendo,H=B.ui,T=B.data,l=z.extend,g=B.template,s=z.isArray,f=H.Widget,i=T.HierarchicalDataSource,N=z.proxy,v=B.keys,E=".kendoTreeView",q="select",w="check",h="navigate",D="expand",x="change",C="error",b="checked",G="indeterminate",t="collapse",K="dragstart",r="drag",L="drop",F="dragend",j="dataBound",J="click",A="undefined",e="k-state-hover",M="k-treeview",W=":visible",V=".k-item",O="string",k="aria-selected",p="aria-disabled",n,d,I,X,u,P={text:"dataTextField",url:"dataUrlField",spriteCssClass:"dataSpriteCssClassField",imageUrl:"dataImageUrlField"},R=function(Y){return typeof HTMLElement==="object"?Y instanceof HTMLElement:Y&&typeof Y==="object"&&Y.nodeType===1&&typeof Y.nodeName===O};function c(Y){return function(aa){var Z=aa.children(".k-animation-container");if(!Z.length){Z=aa}return Z.children(Y)}}function y(Y){return B.template(Y,{useWithBlock:false})}d=c(".k-group");I=c(".k-group,.k-content");X=function(Y){return Y.children("div").children(".k-icon")};function Q(Y){return Y.find("> div .k-checkbox-wrapper [type=checkbox]")}function m(Y){return function(ab,aa){aa=aa.closest(V);var ac=aa.parent(),Z;if(ac.parent().is("li")){Z=ac.parent()}return this._dataSourceMove(ab,ac,Z,function(ae,ad){return this._insert(ae.data(),ad,aa.index()+Y)})}}u=/k-sprite/;function S(aa,Y){var Z;while(aa&&aa.nodeName.toLowerCase()!="ul"){Z=aa;aa=aa.nextSibling;if(Z.nodeType==3){Z.nodeValue=z.trim(Z.nodeValue)}if(u.test(Z.className)){Y.insertBefore(Z,Y.firstChild)}else{Y.appendChild(Z)}}}function U(Z){var ad=Z.children("div"),ac=Z.children("ul"),ab=ad.children(".k-icon"),aa=Z.children(":checkbox"),Y=ad.children(".k-in");if(Z.hasClass("k-treeview")){return}if(!ad.length){ad=z("<div />").prependTo(Z)}if(!ab.length&&ac.length){ab=z("<span class='k-icon' />").prependTo(ad)}else{if(!ac.length||!ac.children().length){ab.remove();ac.remove()}}if(aa.length){z("<span class='k-checkbox-wrapper' />").appendTo(ad).append(aa)}if(!Y.length){Y=Z.children("a").eq(0).addClass("k-in k-link");if(!Y.length){Y=z("<span class='k-in' />")}Y.appendTo(ad);if(ad.length){S(ad[0].nextSibling,Y[0])}}}n=B.ui.DataBoundWidget.extend({init:function(ab,Z){var ac=this,aa=false,Y=Z&&!!Z.dataSource,ad;if(s(Z)){Z={dataSource:Z}}if(Z&&typeof Z.loadOnDemand==A&&s(Z.dataSource)){Z.loadOnDemand=false}f.prototype.init.call(ac,ab,Z);ab=ac.element;Z=ac.options;ad=ab.is("ul")&&ab||ab.hasClass(M)&&ab.children("ul");aa=!Y&&ad.length;if(aa){Z.dataSource.list=ad}ac._animation();ac._accessors();ac._templates();if(!ab.hasClass(M)){ac._wrapper();if(ad){ac.root=ab;ac._group(ac.wrapper)}}else{ac.wrapper=ab;ac.root=ab.children("ul").eq(0)}ac._tabindex();ac.root.attr("role","tree");ac._dataSource(aa);ac._attachEvents();ac._dragging();if(!aa){if(Z.autoBind){ac._progress(true);ac.dataSource.fetch()}}else{ac._syncHtmlAndDataSource()}if(Z.checkboxes&&Z.checkboxes.checkChildren){ac.updateIndeterminate()}if(ac.element[0].id){ac._ariaId=B.format("{0}_tv_active",ac.element[0].id)}B.notify(ac)},_attachEvents:function(){var Z=this,Y=".k-in:not(.k-state-selected,.k-state-disabled)",aa="mouseenter";Z.wrapper.on(aa+E,".k-in.k-state-selected",function(ab){ab.preventDefault()}).on(aa+E,Y,function(){z(this).addClass(e)}).on("mouseleave"+E,Y,function(){z(this).removeClass(e)}).on(J+E,Y,N(Z._click,Z)).on("dblclick"+E,".k-in:not(.k-state-disabled)",N(Z._toggleButtonClick,Z)).on(J+E,".k-i-expand,.k-i-collapse",N(Z._toggleButtonClick,Z)).on("keydown"+E,N(Z._keydown,Z)).on("focus"+E,N(Z._focus,Z)).on("blur"+E,N(Z._blur,Z)).on("mousedown"+E,".k-in,.k-checkbox-wrapper :checkbox,.k-i-expand,.k-i-collapse",N(Z._mousedown,Z)).on("change"+E,".k-checkbox-wrapper :checkbox",N(Z._checkboxChange,Z)).on("click"+E,".k-checkbox-wrapper :checkbox",N(Z._checkboxClick,Z)).on("click"+E,".k-request-retry",N(Z._retryRequest,Z)).on("click"+E,function(ab){if(!z(ab.target).is(":kendoFocusable")){Z.focus()}})},_checkboxClick:function(Z){var Y=z(Z.target);if(Y.data(G)){Y.data(G,false).prop(G,false).prop(b,true);this._checkboxChange(Z)}},_syncHtmlAndDataSource:function(ah,Z){ah=ah||this.root;Z=Z||this.dataSource;var ab=Z.view(),ai=B.attr("uid"),ae=B.attr("expanded"),aa=this.options.checkboxes,af=ah.children("li"),ac,aj,Y,ad,ag;for(ac=0;ac<af.length;ac++){Y=ab[ac];ad=Y.uid;aj=af.eq(ac);aj.attr("role","treeitem").attr(ai,ad);Y.expanded=aj.attr(ae)==="true";if(aa){ag=Q(aj);Y.checked=ag.prop(b);ag.attr("id","_"+ad);ag.next(".k-checkbox-label").attr("for","_"+ad)}this._syncHtmlAndDataSource(aj.children("ul"),Y.children)}},_animation:function(){var Y=this.options,Z=Y.animation;if(Z===false){Z={expand:{effects:{}},collapse:{hide:true,effects:{}}}}else{if(!Z.collapse||!("effects" in Z.collapse)){Z.collapse=l({reverse:true},Z.expand)}}l(Z.collapse,{hide:true});Y.animation=Z},_dragging:function(){var Y=this.options.dragAndDrop;var aa=this.dragging;if(Y&&!aa){var Z=this;this.dragging=new H.HierarchicalDragAndDrop(this.element,{reorderable:true,$angular:this.options.$angular,autoScroll:this.options.autoScroll,filter:"div:not(.k-state-disabled) .k-in",allowedContainers:".k-treeview",itemSelector:".k-treeview .k-item",hintText:N(this._hintText,this),contains:function(ac,ab){return z.contains(ac,ab)},dropHintContainer:function(ab){return ab},itemFromTarget:function(ac){var ab=ac.closest(".k-top,.k-mid,.k-bot");return{item:ab,content:ac.closest(".k-in"),first:ab.hasClass("k-top"),last:ab.hasClass("k-bot")}},dropPositionFrom:function(ab){return ab.prevAll(".k-in").length>0?"after":"before"},dragstart:function(ab){return Z.trigger(K,{sourceNode:ab[0]})},drag:function(ab){Z.trigger(r,{originalEvent:ab.originalEvent,sourceNode:ab.source[0],dropTarget:ab.target[0],pageY:ab.pageY,pageX:ab.pageX,statusClass:ab.status,setStatusClass:ab.setStatus})},drop:function(ab){return Z.trigger(L,{originalEvent:ab.originalEvent,sourceNode:ab.source,destinationNode:ab.destination,valid:ab.valid,setValid:function(ac){this.valid=ac;ab.setValid(ac)},dropTarget:ab.dropTarget,dropPosition:ab.position})},dragend:function(ad){var af=ad.source;var ac=ad.destination;var ab=ad.position;function ae(ag){Z.updateIndeterminate();Z.trigger(F,{originalEvent:ad.originalEvent,sourceNode:ag&&ag[0],destinationNode:ac[0],dropPosition:ab})}if(ab=="over"){Z.append(af,ac,ae)}else{if(ab=="before"){af=Z.insertBefore(af,ac)}else{if(ab=="after"){af=Z.insertAfter(af,ac)}}ae(af)}}})}else{if(!Y&&aa){aa.destroy();this.dragging=null}}},_hintText:function(Y){return this.templates.dragClue({item:this.dataItem(Y),treeview:this.options})},_templates:function(){var aa=this,Z=aa.options,Y=N(aa._fieldAccessor,aa);if(Z.template&&typeof Z.template==O){Z.template=g(Z.template)}else{if(!Z.template){Z.template=y("# var text = "+Y("text")+"(data.item); ## if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {##= text ## } else { ##: text ## } #")}}aa._checkboxes();aa.templates={wrapperCssClass:function(ae,ad){var ab="k-item",ac=ad.index;if(ae.firstLevel&&ac===0){ab+=" k-first"}if(ac==ae.length-1){ab+=" k-last"}return ab},cssClass:function(ae,ad){var ab="",ac=ad.index,af=ae.length-1;if(ae.firstLevel&&ac===0){ab+="k-top "}if(ac===0&&ac!=af){ab+="k-top"}else{if(ac==af){ab+="k-bot"}else{ab+="k-mid"}}return ab},textClass:function(ac,ad){var ab="k-in";if(ad){ab+=" k-link"}if(ac.enabled===false){ab+=" k-state-disabled"}if(ac.selected===true){ab+=" k-state-selected"}return ab},toggleButtonClass:function(ac){var ab="k-icon";if(ac.expanded!==true){ab+=" k-i-expand"}else{ab+=" k-i-collapse"}return ab},groupAttributes:function(ac){var ab="";if(!ac.firstLevel){ab="role='group'"}return ab+(ac.expanded!==true?" style='display:none'":"")},groupCssClass:function(ac){var ab="k-group";if(ac.firstLevel){ab+=" k-treeview-lines"}return ab},dragClue:y("#= data.treeview.template(data) #"),group:y("<ul class='#= data.r.groupCssClass(data.group) #'#= data.r.groupAttributes(data.group) #>#= data.renderItems(data) #</ul>"),itemContent:y("# var imageUrl = "+Y("imageUrl")+"(data.item); ## var spriteCssClass = "+Y("spriteCssClass")+"(data.item); ## if (imageUrl) { #<img class='k-image' alt='' src='#= imageUrl #'># } ## if (spriteCssClass) { #<span class='k-sprite #= spriteCssClass #' /># } ##= data.treeview.template(data) #"),itemElement:y("# var item = data.item, r = data.r; ## var url = "+Y("url")+"(item); #<div class='#= r.cssClass(data.group, item) #'># if (item.hasChildren) { #<span class='#= r.toggleButtonClass(item) #'/># } ## if (data.treeview.checkboxes) { #<span class='k-checkbox-wrapper' role='presentation'>#= data.treeview.checkboxes.template(data) #</span># } ## var tag = url ? 'a' : 'span'; ## var textAttr = url ? ' href=\\'' + url + '\\'' : ''; #<#=tag# class='#= r.textClass(item, !!url) #'#= textAttr #>#= r.itemContent(data) #</#=tag#></div>"),item:y("# var item = data.item, r = data.r; #<li role='treeitem' class='#= r.wrapperCssClass(data.group, item) #' "+B.attr("uid")+"='#= item.uid #' aria-selected='#= item.selected ? \"true\" : \"false \" #' #=item.enabled === false ? \"aria-disabled='true'\" : ''## if (item.expanded) { #data-expanded='true' aria-expanded='true'# } #>#= r.itemElement(data) #</li>"),loading:y("<div class='k-icon k-i-loading' /> #: data.messages.loading #"),retry:y("#: data.messages.requestFailed # <button class='k-button k-request-retry'>#: data.messages.retry #</button>")}},items:function(){return this.element.find(".k-item > div:first-child")},setDataSource:function(Z){var Y=this.options;Y.dataSource=Z;this._dataSource();if(Y.checkboxes&&Y.checkboxes.checkChildren){this.dataSource.one("change",z.proxy(this.updateIndeterminate,this,null))}if(this.options.autoBind){this.dataSource.fetch()}},_bindDataSource:function(){this._refreshHandler=N(this.refresh,this);this._errorHandler=N(this._error,this);this.dataSource.bind(x,this._refreshHandler);this.dataSource.bind(C,this._errorHandler)},_unbindDataSource:function(){var Y=this.dataSource;if(Y){Y.unbind(x,this._refreshHandler);Y.unbind(C,this._errorHandler)}},_dataSource:function(Z){var ab=this,aa=ab.options,ac=aa.dataSource;function Y(ae){for(var ad=0;ad<ae.length;ad++){ae[ad]._initChildren();ae[ad].children.fetch();Y(ae[ad].children.view())}}ac=s(ac)?{data:ac}:ac;ab._unbindDataSource();if(!ac.fields){ac.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]}ab.dataSource=ac=i.create(ac);if(Z){ac.fetch();Y(ac.view())}ab._bindDataSource()},events:[K,r,L,F,j,D,t,q,x,h,w],options:{name:"TreeView",dataSource:{},animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:100}},messages:{loading:"Loading...",requestFailed:"Request failed.",retry:"Retry"},dragAndDrop:false,checkboxes:false,autoBind:true,autoScroll:false,loadOnDemand:true,template:"",dataTextField:null},_accessors:function(){var ac=this,Z=ac.options,ab,ad,Y,aa=ac.element;for(ab in P){ad=Z[P[ab]];Y=aa.attr(B.attr(ab+"-field"));if(!ad&&Y){ad=Y}if(!ad){ad=ab}if(!s(ad)){ad=[ad]}Z[P[ab]]=ad}},_fieldAccessor:function(ab){var Z=this.options[P[ab]],aa=Z.length,Y="(function(item) {";if(aa===0){Y+="return item['"+ab+"'];"}else{Y+="var levels = ["+z.map(Z,function(ac){return"function(d){ return "+B.expr(ac)+"}"}).join(",")+"];";Y+="return levels[Math.min(item.level(), "+aa+"-1)](item)"}Y+="})";return Y},setOptions:function(Y){f.fn.setOptions.call(this,Y);this._animation();this._dragging();this._templates()},_trigger:function(Y,Z){return this.trigger(Y,{node:Z.closest(V)[0]})},_setChecked:function(Y,ab){if(!Y||!z.isFunction(Y.view)){return}for(var aa=0,Z=Y.view();aa<Z.length;aa++){Z[aa][b]=ab;if(Z[aa].children){this._setChecked(Z[aa].children,ab)}}},_setIndeterminate:function(ab){var ac=d(ab),ad,aa,Z=true,Y;if(!ac.length){return}ad=Q(ac.children());aa=ad.length;if(!aa){return}else{if(aa>1){for(Y=1;Y<aa;Y++){if(ad[Y].checked!=ad[Y-1].checked||ad[Y].indeterminate||ad[Y-1].indeterminate){Z=false;break}}}else{Z=!ad[0].indeterminate}}return Q(ab).data(G,!Z).prop(G,!Z).prop(b,Z&&ad[0].checked)},updateIndeterminate:function(Z){Z=Z||this.wrapper;var ab=d(Z).children();var Y;var aa;if(ab.length){for(Y=0;Y<ab.length;Y++){this.updateIndeterminate(ab.eq(Y))}aa=this._setIndeterminate(Z);if(aa&&aa.prop(b)){this.dataItem(Z).checked=true}}},_bubbleIndeterminate:function(Z){if(!Z.length){return}var Y=this.parent(Z),aa;if(Y.length){this._setIndeterminate(Y);aa=Y.children("div").find(".k-checkbox-wrapper :checkbox");if(aa.prop(G)===false){this.dataItem(Y).set(b,aa.prop(b))}else{delete this.dataItem(Y).checked}this._bubbleIndeterminate(Y)}},_checkboxChange:function(ab){var aa=z(ab.target);var ac=aa.prop(b);var Z=aa.closest(V);var Y=this.dataItem(Z);if(Y.checked!=ac){Y.set(b,ac);this._trigger(w,Z)}},_toggleButtonClick:function(Z){var Y=z(Z.currentTarget).closest(V);if(Y.is("[aria-disabled='true']")){return}this.toggle(z(Z.target).closest(V))},_mousedown:function(Z){var Y=z(Z.currentTarget).closest(V);if(Y.is("[aria-disabled='true']")){return}this._clickTarget=Y;this.current(Y)},_focusable:function(Y){return Y&&Y.length&&Y.is(":visible")&&!Y.find(".k-in:first").hasClass("k-state-disabled")},_focus:function(){var Z=this.select(),Y=this._clickTarget;if(B.support.touch){return}if(Y&&Y.length){Z=Y}if(!this._focusable(Z)){Z=this.current()}if(!this._focusable(Z)){Z=this._nextVisible(z())}this.current(Z)},focus:function(){var ad=this.wrapper,Z=ad[0],ac=[],aa=[],ab=document.documentElement,Y;do{Z=Z.parentNode;if(Z.scrollHeight>Z.clientHeight){ac.push(Z);aa.push(Z.scrollTop)}}while(Z!=ab);ad.focus();for(Y=0;Y<ac.length;Y++){ac[Y].scrollTop=aa[Y]}},_blur:function(){this.current().find(".k-in:first").removeClass("k-state-focused")},_enabled:function(Y){return !Y.children("div").children(".k-in").hasClass("k-state-disabled")},parent:function(ac){var aa=/\bk-treeview\b/,ab=/\bk-item\b/,Y,Z;if(typeof ac==O){ac=this.element.find(ac)}if(!R(ac)){ac=ac[0]}Z=ab.test(ac.className);do{ac=ac.parentNode;if(ab.test(ac.className)){if(Z){Y=ac}else{Z=true}}}while(!aa.test(ac.className)&&!Y);return z(Y)},_nextVisible:function(ab){var aa=this,Z=aa._expanded(ab),Y;function ac(ad){while(ad.length&&!ad.next().length){ad=aa.parent(ad)}if(ad.next().length){return ad.next()}else{return ad}}if(!ab.length||!ab.is(":visible")){Y=aa.root.children().eq(0)}else{if(Z){Y=d(ab).children().first();if(!Y.length){Y=ac(ab)}}else{Y=ac(ab)}}if(!aa._enabled(Y)){Y=aa._nextVisible(Y)}return Y},_previousVisible:function(ab){var aa=this,Z,Y;if(!ab.length||ab.prev().length){if(ab.length){Y=ab.prev()}else{Y=aa.root.children().last()}while(aa._expanded(Y)){Z=d(Y).children().last();if(!Z.length){break}Y=Z}}else{Y=aa.parent(ab)||ab}if(!aa._enabled(Y)){Y=aa._previousVisible(Y)}return Y},_keydown:function(af){var aa=this,Z=af.keyCode,ae,ad=aa.current(),Y=aa._expanded(ad),ab=ad.find(".k-checkbox-wrapper:first :checkbox"),ac=B.support.isRtl(aa.element);if(af.target!=af.currentTarget){return}if(!ac&&Z==v.RIGHT||ac&&Z==v.LEFT){if(Y){ae=aa._nextVisible(ad)}else{aa.expand(ad)}}else{if(!ac&&Z==v.LEFT||ac&&Z==v.RIGHT){if(Y){aa.collapse(ad)}else{ae=aa.parent(ad);if(!aa._enabled(ae)){ae=o}}}else{if(Z==v.DOWN){ae=aa._nextVisible(ad)}else{if(Z==v.UP){ae=aa._previousVisible(ad)}else{if(Z==v.HOME){ae=aa._nextVisible(z())}else{if(Z==v.END){ae=aa._previousVisible(z())}else{if(Z==v.ENTER){if(!ad.find(".k-in:first").hasClass("k-state-selected")){if(!aa._trigger(q,ad)){aa.select(ad)}}}else{if(Z==v.SPACEBAR&&ab.length){ab.prop(b,!ab.prop(b)).data(G,false).prop(G,false);aa._checkboxChange({target:ab});ae=ad}}}}}}}}if(ae){af.preventDefault();if(ad[0]!=ae[0]){aa._trigger(h,ae);aa.current(ae)}}},_click:function(ac){var ab=this,aa=z(ac.currentTarget),Z=I(aa.closest(V)),Y=aa.attr("href"),ad;if(Y){ad=Y=="#"||Y.indexOf("#"+this.element.id+"-")>=0}else{ad=Z.length&&!Z.children().length}if(ad){ac.preventDefault()}if(!aa.hasClass(".k-state-selected")&&!ab._trigger(q,aa)){ab.select(aa)}},_wrapper:function(){var ab=this,aa=ab.element,ac,Z,Y="k-widget k-treeview";if(aa.is("ul")){ac=aa.wrap("<div />").parent();Z=aa}else{ac=aa;Z=ac.children("ul").eq(0)}ab.wrapper=ac.addClass(Y);ab.root=Z},_group:function(aa){var Z=this,ac=aa.hasClass(M),ab={firstLevel:ac,expanded:ac||Z._expanded(aa)},Y=aa.children("ul");Y.addClass(Z.templates.groupCssClass(ab)).css("display",ab.expanded?"":"none");Z._nodes(Y,ab)},_nodes:function(ab,aa){var ac=this,Y=ab.children("li"),Z;aa=l({length:Y.length},aa);Y.each(function(ad,ae){ae=z(ae);Z={index:ad,expanded:ac._expanded(ae)};U(ae);ac._updateNodeClasses(ae,aa,Z);ac._group(ae)})},_checkboxes:function(){var Y=this.options;var aa=Y.checkboxes;var Z;if(aa){Z="<input type='checkbox' tabindex='-1' #= (item.enabled === false) ? 'disabled' : '' # #= item.checked ? 'checked' : '' #";if(aa.name){Z+=" name='"+aa.name+"'"}Z+=" id='_#= item.uid #' class='k-checkbox' /><label for='_#= item.uid #' class='k-checkbox-label'></label>";aa=l({template:Z},Y.checkboxes);if(typeof aa.template==O){aa.template=g(aa.template)}Y.checkboxes=aa}},_updateNodeClasses:function(ab,Z,Y){var af=ab.children("div"),ae=ab.children("ul"),aa=this.templates;if(ab.hasClass("k-treeview")){return}Y=Y||{};Y.expanded=typeof Y.expanded!=A?Y.expanded:this._expanded(ab);Y.index=typeof Y.index!=A?Y.index:ab.index();Y.enabled=typeof Y.enabled!=A?Y.enabled:!af.children(".k-in").hasClass("k-state-disabled");Z=Z||{};Z.firstLevel=typeof Z.firstLevel!=A?Z.firstLevel:ab.parent().parent().hasClass(M);Z.length=typeof Z.length!=A?Z.length:ab.parent().children().length;ab.removeClass("k-first k-last").addClass(aa.wrapperCssClass(Z,Y));af.removeClass("k-top k-mid k-bot").addClass(aa.cssClass(Z,Y));var ad=af.children(".k-in");var ac=ad[0]&&ad[0].nodeName.toLowerCase()=="a";ad.removeClass("k-in k-link k-state-default k-state-disabled").addClass(aa.textClass(Y,ac));if(ae.length||ab.attr("data-hasChildren")=="true"){af.children(".k-icon").removeClass("k-i-expand k-i-collapse").addClass(aa.toggleButtonClass(Y));ae.addClass("k-group")}},_processNodes:function(Y,aa){var Z=this;Z.element.find(Y).each(function(ab,ac){aa.call(Z,ab,z(ac).closest(V))})},dataItem:function(Z){var Y=z(Z).closest(V).attr(B.attr("uid")),aa=this.dataSource;return aa&&aa.getByUid(Y)},_insertNode:function(Y,aj,ag,ah,ad){var ai=this,al=d(ag),ak=al.children().length+1,af,ac={firstLevel:ag.hasClass(M),expanded:!ad,length:ak},ab,ae,am,aa="",Z=function(an,ao){an.appendTo(ao)};for(ae=0;ae<Y.length;ae++){am=Y[ae];am.index=aj+ae;aa+=ai._renderItem({group:ac,item:am})}ab=z(aa);if(!ab.length){return}ai.angular("compile",function(){return{elements:ab.get(),data:Y.map(function(an){return{dataItem:an}})}});if(!al.length){al=z(ai._renderGroup({group:ac})).appendTo(ag)}ah(ab,al);if(ag.hasClass("k-item")){U(ag);ai._updateNodeClasses(ag)}ai._updateNodeClasses(ab.prev().first());ai._updateNodeClasses(ab.next().last());for(ae=0;ae<Y.length;ae++){am=Y[ae];if(am.hasChildren){af=am.children.data();if(af.length){ai._insertNode(af,am.index,ab.eq(ae),Z,!ai._expanded(ab.eq(ae)))}}}return ab},_updateNodes:function(ag,ai){var af=this;var ae,ab,aj,ak,ac,ad;var aa={treeview:af.options,item:ak};var Z=ai!="expanded"&&ai!="checked";function ah(al,am){al.find(".k-checkbox-wrapper :checkbox").prop(b,am).data(G,false).prop(G,false)}if(ai=="selected"){ak=ag[0];ab=af.findByUid(ak.uid).find(".k-in:first").removeClass("k-state-hover").toggleClass("k-state-selected",ak[ai]).end();if(ak[ai]){af.current(ab)}ab.attr(k,!!ak[ai])}else{var Y=z.map(ag,function(al){return af.findByUid(al.uid).children("div")});if(Z){af.angular("cleanup",function(){return{elements:Y}})}for(ae=0;ae<ag.length;ae++){aa.item=ak=ag[ae];aj=Y[ae];ab=aj.parent();if(Z){aj.children(".k-in").html(af.templates.itemContent(aa))}if(ai==b){ac=ak[ai];ah(aj,ac);if(af.options.checkboxes.checkChildren){ah(ab.children(".k-group"),ac);af._setChecked(ak.children,ac);af._bubbleIndeterminate(ab)}}else{if(ai=="expanded"){af._toggle(ab,ak,ak[ai])}else{if(ai=="enabled"){ab.find(".k-checkbox-wrapper :checkbox").prop("disabled",!ak[ai]);ad=!I(ab).is(W);ab.removeAttr(p);if(!ak[ai]){if(ak.selected){ak.set("selected",false)}if(ak.expanded){ak.set("expanded",false)}ad=true;ab.attr(k,false).attr(p,true)}af._updateNodeClasses(ab,{},{enabled:ak[ai],expanded:!ad})}}}if(aj.length){this.trigger("itemChange",{item:aj,data:ak,ns:H})}}if(Z){af.angular("compile",function(){return{elements:Y,data:z.map(ag,function(al){return[{dataItem:al}]})}})}}},_appendItems:function(aa,Z,Y){var ac=d(Y);var ab=ac.children();var ad=!this._expanded(Y);if(typeof aa==A){aa=ab.length}this._insertNode(Z,aa,Y,function(ae,af){if(aa>=ab.length){ae.appendTo(af)}else{ae.insertBefore(ab.eq(aa))}},ad);if(this._expanded(Y)){this._updateNodeClasses(Y);d(Y).css("display","block")}},_refreshChildren:function(ad,af,ae){var ac,Z,Y;var ag=this.options;var ab=ag.loadOnDemand;var aa=ag.checkboxes&&ag.checkboxes.checkChildren;d(ad).empty();if(!af.length){U(ad)}else{this._appendItems(ae,af,ad);Z=d(ad).children();if(ab&&aa){this._bubbleIndeterminate(Z.last())}for(ac=0;ac<Z.length;ac++){Y=Z.eq(ac);this.trigger("itemChange",{item:Y.children("div"),data:this.dataItem(Y),ns:H})}}},_refreshRoot:function(Z){var Y=this._renderGroup({items:Z,group:{firstLevel:true,expanded:true}});if(this.root.length){this._angularItems("cleanup");var ac=z(Y);this.root.attr("class",ac.attr("class")).html(ac.html())}else{this.root=this.wrapper.html(Y).children("ul")}this.root.attr("role","tree");var ab=this.root.children(".k-item");for(var aa=0;aa<Z.length;aa++){this.trigger("itemChange",{item:ab.eq(aa),data:Z[aa],ns:H})}this._angularItems("compile")},refresh:function(ae){var Y=ae.node;var aa=ae.action;var af=ae.items;var ad=this.wrapper;var ah=this.options;var ab=ah.loadOnDemand;var Z=ah.checkboxes&&ah.checkboxes.checkChildren;var ac;if(ae.field){if(!af[0]||!af[0].level){return}return this._updateNodes(af,ae.field)}if(Y){ad=this.findByUid(Y.uid);this._progress(ad,false)}if(Z&&aa!="remove"){var ag=false;for(ac=0;ac<af.length;ac++){if("checked" in af[ac]){ag=true;break}}if(!ag&&Y&&Y.checked){for(ac=0;ac<af.length;ac++){af[ac].checked=true}}}if(aa=="add"){this._appendItems(ae.index,af,ad)}else{if(aa=="remove"){this._remove(this.findByUid(af[0].uid),false)}else{if(aa=="itemchange"){this._updateNodes(af)}else{if(aa=="itemloaded"){this._refreshChildren(ad,af,ae.index)}else{this._refreshRoot(af)}}}}if(aa!="remove"){for(ac=0;ac<af.length;ac++){if(!ab||af[ac].expanded){af[ac].load()}}}this.trigger(j,{node:Y?ad:o})},_error:function(aa){var Z=aa.node&&this.findByUid(aa.node.uid);var Y=this.templates.retry({messages:this.options.messages});if(Z){this._progress(Z,false);this._expanded(Z,false);X(Z).addClass("k-i-reload");aa.node.loaded(false)}else{this._progress(false);this.element.html(Y)}},_retryRequest:function(Y){Y.preventDefault();this.dataSource.fetch()},expand:function(Y){this._processNodes(Y,function(Z,aa){this.toggle(aa,true)})},collapse:function(Y){this._processNodes(Y,function(Z,aa){this.toggle(aa,false)})},enable:function(Y,Z){Z=arguments.length==2?!!Z:true;this._processNodes(Y,function(aa,ab){this.dataItem(ab).set("enabled",Z)})},current:function(aa){var Z=this,ab=Z._current,Y=Z.element,ac=Z._ariaId;if(arguments.length>0&&aa&&aa.length){if(ab){if(ab[0].id===ac){ab.removeAttr("id")}ab.find(".k-in:first").removeClass("k-state-focused")}ab=Z._current=z(aa,Y).closest(V);ab.find(".k-in:first").addClass("k-state-focused");ac=ab[0].id||ac;if(ac){Z.wrapper.removeAttr("aria-activedescendant");ab.attr("id",ac);Z.wrapper.attr("aria-activedescendant",ac)}return}if(!ab){ab=Z._nextVisible(z())}return ab},select:function(aa){var Z=this,Y=Z.element;if(!arguments.length){return Y.find(".k-state-selected").closest(V)}aa=z(aa,Y).closest(V);Y.find(".k-state-selected").each(function(){var ab=Z.dataItem(this);if(ab){ab.set("selected",false);delete ab.selected}else{z(this).removeClass("k-state-selected")}});if(aa.length){Z.dataItem(aa).set("selected",true);Z._clickTarget=aa}Z.trigger(x)},_toggle:function(ad,aa,ab){var Z=this.options;var ac=I(ad);var ae=ab?"expand":"collapse";var Y;if(ac.data("animating")){return}if(!this._trigger(ae,ad)){this._expanded(ad,ab);Y=aa&&aa.loaded();if(ab&&!Y){if(Z.loadOnDemand){this._progress(ad,true)}ac.remove();aa.load()}else{this._updateNodeClasses(ad,{},{expanded:ab});if(!ab){ac.css("height",ac.height()).css("height")}ac.kendoStop(true,true).kendoAnimate(l({reset:true},Z.animation[ae],{complete:function(){if(ab){ac.css("height","")}}}))}}},toggle:function(Z,Y){Z=z(Z);if(!X(Z).is(".k-i-expand, .k-i-collapse")){return}if(arguments.length==1){Y=!this._expanded(Z)}this._expanded(Z,Y)},destroy:function(){var Y=this;f.fn.destroy.call(Y);Y.wrapper.off(E);Y._unbindDataSource();if(Y.dragging){Y.dragging.destroy()}B.destroy(Y.element);Y.root=Y.wrapper=Y.element=null},_expanded:function(ab,ac){var aa=B.attr("expanded");var Z=this.dataItem(ab);var Y=ac;if(arguments.length==1){return ab.attr(aa)==="true"||Z&&Z.expanded}if(I(ab).data("animating")){return}if(Z){Z.set("expanded",Y);Y=Z.expanded}if(Y){ab.attr(aa,"true");ab.attr("aria-expanded","true")}else{ab.removeAttr(aa);ab.attr("aria-expanded","false")}},_progress:function(aa,ab){var Z=this.element;var Y=this.templates.loading({messages:this.options.messages});if(arguments.length==1){ab=aa;if(ab){Z.html(Y)}else{Z.empty()}}else{X(aa).toggleClass("k-i-loading",ab).removeClass("k-i-reload")}},text:function(ab,ad){var Z=this.dataItem(ab),Y=this.options[P.text],ae=Z.level(),aa=Y.length,ac=Y[Math.min(ae,aa-1)];if(ad){Z.set(ac,ad)}else{return Z[ac]}},_objectOrSelf:function(Y){return z(Y).closest("[data-role=treeview]").data("kendoTreeView")||this},_dataSourceMove:function(ad,ae,aa,af){var Z,Y=this._objectOrSelf(aa||ae),ac=Y.dataSource;var ab=z.Deferred().resolve().promise();if(aa&&aa[0]!=Y.element[0]){Z=Y.dataItem(aa);if(!Z.loaded()){Y._progress(aa,true);ab=Z.load()}if(aa!=this.root){ac=Z.children;if(!ac||!(ac instanceof i)){Z._initChildren();Z.loaded(true);ac=Z.children}}}ad=this._toObservableData(ad);return af.call(Y,ac,ad,ab)},_toObservableData:function(aa){var Y=aa,ab,Z;if(aa instanceof window.jQuery||R(aa)){ab=this._objectOrSelf(aa).dataSource;Z=z(aa).attr(B.attr("uid"));Y=ab.getByUid(Z);if(Y){Y=ab.remove(Y)}}return Y},_insert:function(ab,aa,Z){if(!(aa instanceof B.data.ObservableArray)){if(!s(aa)){aa=[aa]}}else{aa=aa.toJSON()}var Y=ab.parent();if(Y&&Y._initChildren){Y.hasChildren=true;Y._initChildren()}ab.splice.apply(ab,[Z,0].concat(aa));return this.findByUid(ab[Z].uid)},insertAfter:m(1),insertBefore:m(0),append:function(Z,Y,ab){var aa=this.root;if(Y){aa=d(Y)}return this._dataSourceMove(Z,aa,Y,function(ah,ad,ac){var ae;var af=this;function ag(){if(Y){af._expanded(Y,true)}var aj=ah.data(),ai=Math.max(aj.length,0);return af._insert(aj,ad,ai)}ac.done(function(){ae=ag();ab=ab||z.noop;ab(ae)});return ae||null})},_remove:function(ab,ad){var aa=this,Y,Z,ac;ab=z(ab,aa.element);this.angular("cleanup",function(){return{elements:ab.get()}});Y=ab.parent().parent();Z=ab.prev();ac=ab.next();ab[ad?"detach":"remove"]();if(Y.hasClass("k-item")){U(Y);aa._updateNodeClasses(Y)}aa._updateNodeClasses(Z);aa._updateNodeClasses(ac);return ab},remove:function(Z){var Y=this.dataItem(Z);if(Y){this.dataSource.remove(Y)}},detach:function(Y){return this._remove(Y,true)},findByText:function(Y){return z(this.element).find(".k-in").filter(function(aa,Z){return z(Z).text()==Y}).closest(V)},findByUid:function(ab){var Z=this.element.find(".k-item");var ac=B.attr("uid");var Y;for(var aa=0;aa<Z.length;aa++){if(Z[aa].getAttribute(ac)==ab){Y=Z[aa];break}}return z(Y)},expandPath:function(ad,Y){var ab=this;var Z=ad.slice(0);var ae=Y||z.noop;function ac(){Z.shift();if(Z.length){aa(Z[0]).then(ac)}else{ae.call(ab)}}function aa(ah){var af=z.Deferred();var ag=ab.dataSource.get(ah);if(ag){if(ag.loaded()){ag.set("expanded",true);af.resolve()}else{ab._progress(ab.findByUid(ag.uid),true);ag.load().then(function(){ag.set("expanded",true);af.resolve()})}}else{af.resolve()}return af.promise()}aa(Z[0]).then(ac)},_parentIds:function(aa){var Z=aa&&aa.parentNode();var Y=[];while(Z&&Z.parentNode){Y.unshift(Z.id);Z=Z.parentNode()}return Y},expandTo:function(Z){if(!(Z instanceof B.data.Node)){Z=this.dataSource.get(Z)}var Y=this._parentIds(Z);this.expandPath(Y)},_renderItem:function(Y){if(!Y.group){Y.group={}}Y.treeview=this.options;Y.r=this.templates;return this.templates.item(Y)},_renderGroup:function(Y){var Z=this;Y.renderItems=function(ac){var ae="",ad=0,ab=ac.items,aa=ab?ab.length:0,af=ac.group;af.length=aa;for(;ad<aa;ad++){ac.group=af;ac.item=ab[ad];ac.item.index=ad;ae+=Z._renderItem(ac)}return ae};Y.r=Z.templates;return Z.templates.group(Y)}});H.plugin(n)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.pivot.fieldmenu",["kendo.pivotgrid","kendo.menu","kendo.window","kendo.treeview","kendo.dropdownlist"],a)}(function(){var a={id:"pivot.fieldmenu",name:"PivotFieldMenu",category:"web",description:"The PivotFieldMenu widget allows the user to filter on fields displayed in PivotGrid",depends:["menu","window","treeview","dropdownlist"],advanced:true};(function(g,c){var h=window.kendo,k=h.ui,b="kendoContextMenu",i=g.proxy,d=".kendoPivotFieldMenu",l=k.Widget;var e=l.extend({init:function(s,r){l.fn.init.call(this,s,r);this._dataSource();this._layout();h.notify(this)},events:[],options:{name:"PivotFieldMenu",filter:null,filterable:true,sortable:true,messages:{info:"Show items with value that:",sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filterFields:"Fields Filter",filter:"Filter",include:"Include Fields...",title:"Fields to include",clear:"Clear",ok:"OK",cancel:"Cancel",operators:{contains:"Contains",doesnotcontain:"Does not contain",startswith:"Starts with",endswith:"Ends with",eq:"Is equal to",neq:"Is not equal to"}}},_layout:function(){var r=this.options;this.wrapper=g(h.template(o)({ns:h.ns,filterable:r.filterable,sortable:r.sortable,messages:r.messages}));this.menu=this.wrapper[b]({filter:r.filter,target:this.element,orientation:"vertical",showOn:"click",closeOnClick:false,open:i(this._menuOpen,this),select:i(this._select,this),copyAnchorStyles:false}).data(b);this._createWindow();if(r.filterable){this._initFilterForm()}},_initFilterForm:function(){var s=this.menu.element.find(".k-filter-item");var r=i(this._filter,this);this._filterOperator=new h.ui.DropDownList(s.find("select"));this._filterValue=s.find(".k-textbox");s.on("submit"+d,r).on("click"+d,".k-button-filter",r).on("click"+d,".k-button-clear",i(this._reset,this))},_setFilterForm:function(u){var r=this._filterOperator;var s="";var t="";if(u){s=u.operator;t=u.value}r.value(s);if(!r.value()){r.select(0)}this._filterValue.val(t)},_clearFilters:function(v){var s=this.dataSource.filter()||{};var u;var r=0;var t;s.filters=s.filters||[];u=m(s,v);for(t=u.length;r<t;r++){s.filters.splice(s.filters.indexOf(u[r]),1)}return s},_convert:function(s){var r=this.dataSource.options.schema;var t=((r.model||{}).fields||{})[this.currentMember];if(t){if(t.type==="number"){s=parseFloat(s)}else{if(t.type==="boolean"){s=Boolean(g.parseJSON(s))}}}return s},_filter:function(u){var s=this;var t=s._convert(s._filterValue.val());u.preventDefault();if(t===""){s.menu.close();return}var v={field:s.currentMember,operator:s._filterOperator.value(),value:t};var r=s._clearFilters(s.currentMember);r.filters.push(v);s.dataSource.filter(r);s.menu.close()},_reset:function(t){var s=this;var r=s._clearFilters(s.currentMember);t.preventDefault();if(!r.filters[0]){r={}}s.dataSource.filter(r);s._setFilterForm(null);s.menu.close()},_sort:function(r){var t=this.currentMember;var s=this.dataSource.sort()||[];s=n(s,t);s.push({field:t,dir:r});this.dataSource.sort(s);this.menu.close()},setDataSource:function(r){this.options.dataSource=r;this._dataSource()},_dataSource:function(){this.dataSource=h.data.PivotDataSource.create(this.options.dataSource)},_createWindow:function(){var r=this.options.messages;this.includeWindow=g(h.template(f)({messages:r})).on("click"+d,".k-button-ok",i(this._applyIncludes,this)).on("click"+d,".k-button-cancel",i(this._closeWindow,this));this.includeWindow=new k.Window(this.includeWindow,{title:r.title,visible:false,resizable:false,open:i(this._windowOpen,this)})},_applyIncludes:function(x){var r=[];var v;var s=this.treeView.dataSource.view();var u=s[0].checked;var w=this.dataSource.filter();var t=m(w,this.currentMember,"in")[0];q(s,r);if(t){if(u){w.filters.splice(w.filters.indexOf(t),1);if(!w.filters.length){w={}}}else{t.value=r.join(",")}v=w}if(r.length){if(!v&&!u){v={field:this.currentMember,operator:"in",value:r.join(",")};if(w){w.filters.push(v);v=w}}}if(v){this.dataSource.filter(v)}this._closeWindow(x)},_closeWindow:function(r){r.preventDefault();this.includeWindow.close()},_treeViewDataSource:function(){var r=this;return h.data.HierarchicalDataSource.create({schema:{model:{id:"uniqueName",hasChildren:function(s){return parseInt(s.childrenCardinality,10)>0}}},transport:{read:function(t){var v={};var u=r.treeView.dataSource.get(t.data.uniqueName);var s=t.data.uniqueName;if(!s){v.levelUniqueName=r.currentMember+".[(ALL)]"}else{v.memberUniqueName=u.uniqueName.replace(/\&/g,"&amp;");v.treeOp=1}r.dataSource.schemaMembers(v).done(function(w){p(r.dataSource.filter(),r.currentMember,w);t.success(w)}).fail(t.error)}}})},_createTreeView:function(r){var s=this;s.treeView=new k.TreeView(r,{autoBind:false,dataSource:s._treeViewDataSource(),dataTextField:"caption",template:"#: data.item.caption || data.item.name #",checkboxes:{checkChildren:true},dataBound:function(){k.progress(s.includeWindow.element,false)}})},_menuOpen:function(s){if(!s.event){return}var r=h.attr("name");this.currentMember=g(s.event.target).closest("["+r+"]").attr(r);if(this.options.filterable){this._setFilterForm(m(this.dataSource.filter(),this.currentMember)[0])}},_select:function(s){var r=g(s.item);g(".k-pivot-filter-window").not(this.includeWindow.element).kendoWindow("close");if(r.hasClass("k-include-item")){this.includeWindow.center().open()}else{if(r.hasClass("k-sort-asc")){this._sort("asc")}else{if(r.hasClass("k-sort-desc")){this._sort("desc")}}}},_windowOpen:function(){if(!this.treeView){this._createTreeView(this.includeWindow.element.find(".k-treeview"))}k.progress(this.includeWindow.element,true);this.treeView.dataSource.read()},destroy:function(){l.fn.destroy.call(this);if(this.menu){this.menu.destroy();this.menu=null}if(this.treeView){this.treeView.destroy();this.treeView=null}if(this.includeWindow){this.includeWindow.destroy();this.includeWindow=null}this.wrapper=null;this.element=null}});function n(v,t){var s=[];for(var r=0,u=v.length;r<u;r++){if(v[r].field!==t){s.push(v[r])}}return s}function m(v,x,u){if(!v){return[]}v=v.filters;var s=0;var r=[];var w=v.length;var t;for(;s<w;s++){t=v[s].operator;if((!u&&t!=="in"||t===u)&&v[s].field===x){r.push(v[s])}}return r}function p(u,w,t){var s,r=0,v=t.length;u=m(u,w,"in")[0];if(!u){for(;r<v;r++){t[r].checked=true}}else{s=u.value.split(",");for(;r<v;r++){t[r].checked=g.inArray(t[r].uniqueName,s)>=0}}}function q(t,s){var r,u=t.length;for(r=0;r<u;r++){if(t[r].checked&&t[r].level()!==0){s.push(t[r].uniqueName)}if(t[r].hasChildren){q(t[r].children.view(),s)}}}var j='<div class="k-filterable k-content" tabindex="-1" data-role="fieldmenu"><form class="k-filter-menu"><div><div class="k-filter-help-text">#=messages.info#</div><select>#for(var op in messages.operators){#<option value="#=op#">#=messages.operators[op]#</option>#}#</select><input class="k-textbox" type="text" /><div><a class="k-button k-primary k-button-filter" href="\\#">#=messages.filter#</a><a class="k-button k-button-clear" href="\\#">#=messages.clear#</a></div></div></form></div>';var o='<ul class="k-pivot-fieldmenu"># if (sortable) {#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-icon k-i-sort-asc-sm"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-icon k-i-sort-desc-sm"></span>${messages.sortDescending}</span></li># if (filterable) {#<li class="k-separator"></li># } ## } ## if (filterable) {#<li class="k-item k-include-item"><span class="k-link"><span class="k-icon k-i-filter"></span>${messages.include}</span></li><li class="k-separator"></li><li class="k-item k-filter-item"><span class="k-link"><span class="k-icon k-i-filter"></span>${messages.filterFields}</span><ul><li>'+j+"</li></ul></li># } #</ul>";var f='<div class="k-popup-edit-form k-pivot-filter-window"><div class="k-edit-form-container"><div class="k-treeview"></div><div class="k-edit-buttons k-state-default"><a class="k-button k-primary k-button-ok" href="\\#">${messages.ok}</a><a class="k-button k-button-cancel" href="\\#">${messages.cancel}</a></div></div>';k.plugin(e)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.filtercell",["kendo.autocomplete","kendo.datepicker","kendo.numerictextbox","kendo.combobox","kendo.dropdownlist"],a)}(function(){var a={id:"filtercell",name:"Row filter",category:"framework",depends:["autocomplete"],advanced:true};(function(f,g){var l=window.kendo,k=l.ui,e=l.data.DataSource,c=k.Widget,i="change",q="boolean",m="enums",h="string",p="Is equal to",r="Is not equal to",o=f.proxy,d=["isnull","isnotnull","isempty","isnotempty"];function n(v){var u=typeof v==="string"?v:v.operator;return f.inArray(u,d)>-1}function b(w,y){var x=[];if(f.isPlainObject(w)){if(w.hasOwnProperty("filters")){x=w.filters}else{if(w.field==y){return w}}}if(f.isArray(w)){x=w}for(var v=0;v<x.length;v++){var u=b(x[v],y);if(u){return u}}}function t(v,u){if(v.filters){v.filters=f.grep(v.filters,function(w){t(w,u);if(w.filters){return w.filters.length}else{return w.field!=u}})}}function s(v,w){var u=l.getter(w,true);return function(C){var z=v(C),x=[],A=0,y={};while(A<z.length){var B=z[A++],D=u(B);if(!y.hasOwnProperty(D)){x.push(B);y[D]=true}}return x}}var j=c.extend({init:function(z,I){z=f(z).addClass("k-filtercell");var x=this.wrapper=f("<span/>").appendTo(z);var C=this,u,H,v=I,A,E,y=C.operators=I.operators||{},G=C.input=f("<input/>").attr(l.attr("bind"),"value: value").appendTo(x);var w=I?I.suggestDataSource:null;if(w){I=f.extend({},I,{suggestDataSource:{}})}c.fn.init.call(C,z[0],I);if(w){C.options.suggestDataSource=w}I=C.options;u=C.dataSource=I.dataSource;C.model=u.reader.model;E=I.type=h;var B=l.getter("reader.model.fields",true)(u)||{};var D=B[I.field];if(D&&D.type){E=I.type=D.type}if(I.values){I.type=E=m}y=y[E]||I.operators[E];if(!v.operator){for(A in y){I.operator=A;break}}C._parse=function(J){return J!=null?J+"":J};if(C.model&&C.model.fields){var F=C.model.fields[I.field];if(F){if(F.parse){C._parse=o(F.parse,F)}}}C.defaultOperator=I.operator;C.viewModel=H=l.observable({operator:I.operator,value:null,operatorVisible:function(){var J=this.get("value");return J!==null&&J!==g&&J!="undefined"||n(this.get("operator"))&&!C._clearInProgress}});H.bind(i,o(C.updateDsFilter,C));if(E==h){C.initSuggestDataSource(I)}if(I.inputWidth!==null){G.width(I.inputWidth)}C._setInputType(I,E);if(E!=q&&I.showOperators!==false){C._createOperatorDropDown(y)}else{x.addClass("k-operator-hidden")}C._createClearIcon();l.bind(this.wrapper,H);if(E==h){if(!I.template){C.setAutoCompleteSource()}}if(E==m){C.setComboBoxSource(C.options.values)}C._refreshUI();C._refreshHandler=o(C._refreshUI,C);C.dataSource.bind(i,C._refreshHandler)},_setInputType:function(C,z){var x=this,B=x.input;if(typeof C.template=="function"){C.template.call(x.viewModel,{element:x.input,dataSource:x.suggestDataSource});x._angularItems("compile")}else{if(z==h){B.attr(l.attr("role"),"autocomplete").attr(l.attr("text-field"),C.dataTextField||C.field).attr(l.attr("filter"),C.suggestionOperator).attr(l.attr("delay"),C.delay).attr(l.attr("min-length"),C.minLength).attr(l.attr("value-primitive"),true)}else{if(z=="date"){B.attr(l.attr("role"),"datepicker")}else{if(z==q){B.remove();var v=f("<input type='radio'/>");var u=x.wrapper;var y=l.guid();var A=f("<label/>").text(C.messages.isTrue).append(v);v.attr(l.attr("bind"),"checked:value").attr("name",y).val("true");var w=A.clone().text(C.messages.isFalse);v.clone().val("false").appendTo(w);u.append([A,w])}else{if(z=="number"){B.attr(l.attr("role"),"numerictextbox")}else{if(z==m){B.attr(l.attr("role"),"combobox").attr(l.attr("text-field"),"text").attr(l.attr("suggest"),true).attr(l.attr("filter"),"contains").attr(l.attr("value-field"),"value").attr(l.attr("value-primitive"),true)}}}}}}},_createOperatorDropDown:function(u){var v=[];for(var x in u){v.push({text:u[x],value:x})}var w=f('<input class="k-dropdown-operator" '+l.attr("bind")+'="value: operator"/>').appendTo(this.wrapper);this.operatorDropDown=w.kendoDropDownList({dataSource:v,dataTextField:"text",dataValueField:"value",open:function(){this.popup.element.width(150)},valuePrimitive:true}).data("kendoDropDownList");this.operatorDropDown.wrapper.find(".k-i-arrow-60-down").removeClass("k-i-arrow-60-down").addClass("k-i-filter")},initSuggestDataSource:function(u){var v=u.suggestDataSource;if(!(v instanceof e)){if(!u.customDataSource&&v){v.group=g}v=this.suggestDataSource=e.create(v)}if(!u.customDataSource){v._pageSize=g;v.reader.data=s(v.reader.data,this.options.field)}this.suggestDataSource=v},setAutoCompleteSource:function(){var u=this.input.data("kendoAutoComplete");if(u){u.setDataSource(this.suggestDataSource)}},setComboBoxSource:function(u){var w=e.create({data:u});var v=this.input.data("kendoComboBox");if(v){v.setDataSource(w)}},_refreshUI:function(){var w=this,v=b(w.dataSource.filter(),this.options.field)||{},u=w.viewModel;w.manuallyUpdatingVM=true;v=f.extend(true,{},v);if(w.options.type==q){if(u.value!==v.value){w.wrapper.find(":radio").prop("checked",false)}}if(v.operator){u.set("operator",v.operator)}u.set("value",v.value);w.manuallyUpdatingVM=false},updateDsFilter:function(z){var w=this,v=w.viewModel;if(w.manuallyUpdatingVM||z.field=="operator"&&v.value===g&&!n(v)){return}var u=f.extend({},w.viewModel.toJSON(),{field:w.options.field});var A={logic:"and",filters:[]};var x=false;if(u.value!==g&&u.value!==null||n(u)&&!this._clearInProgress){A.filters.push(u);x=w.trigger(i,{filter:A,field:w.options.field})}if(w._clearInProgress||u.value===null){x=w.trigger(i,{filter:null,field:w.options.field})}if(x){return}var y=w._merge(A);if(y.filters.length){w.dataSource.filter(y)}else{w.dataSource.filter({})}},_merge:function(B){var A=this,w=B.logic||"and",z=B.filters,x,v=A.dataSource.filter()||{filters:[],logic:"and"},u,y;t(v,A.options.field);for(u=0,y=z.length;u<y;u++){x=z[u];x.value=A._parse(x.value)}z=f.grep(z,function(C){return C.value!==""&&C.value!==null||n(C)});if(z.length){if(v.filters.length){B.filters=z;if(v.logic!=="and"){v.filters=[{logic:v.logic,filters:v.filters}];v.logic="and"}if(z.length>1){v.filters.push(B)}else{v.filters.push(z[0])}}else{v.filters=z;v.logic=w}}return v},_createClearIcon:function(){var u=this;f("<button type='button' class='k-button k-button-icon' title = "+u.options.messages.clear+"/>").attr(l.attr("bind"),"visible:operatorVisible").html("<span class='k-icon k-i-close'/>").click(o(u.clearFilter,u)).appendTo(u.wrapper)},clearFilter:function(){this._clearInProgress=true;if(n(this.viewModel.operator)){this.viewModel.set("operator",this.defaultOperator)}this.viewModel.set("value",null);this._clearInProgress=false},_angularItems:function(w){var v=this.wrapper.closest("th").get();var u=this.options.column;this.angular(w,function(){return{elements:v,data:[{column:u}]}})},destroy:function(){var u=this;u.filterModel=null;u.operatorDropDown=null;u._angularItems("cleanup");if(u._refreshHandler){u.dataSource.bind(i,u._refreshHandler);u._refreshHandler=null}l.unbind(u.element);c.fn.destroy.call(u);l.destroy(u.element)},events:[i],options:{name:"FilterCell",delay:200,minLength:1,inputWidth:null,values:g,customDataSource:false,field:"",dataTextField:"",type:"string",suggestDataSource:null,suggestionOperator:"startswith",operator:"eq",showOperators:true,template:null,messages:{isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",operator:"Operator"},operators:{string:{eq:p,neq:r,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with",isnull:"Is null",isnotnull:"Is not null",isempty:"Is empty",isnotempty:"Is not empty"},number:{eq:p,neq:r,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than",isnull:"Is null",isnotnull:"Is not null"},date:{eq:p,neq:r,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before",isnull:"Is null",isnotnull:"Is not null"},enums:{eq:p,neq:r,isnull:"Is null",isnotnull:"Is not null"}}}});k.plugin(j)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.panelbar",["kendo.core"],a)}(function(){var a={id:"panelbar",name:"PanelBar",category:"web",description:"The PanelBar widget displays hierarchical data as a multi-level expandable panel bar.",depends:["core","data.odata"]};(function(K,r){var N=window.kendo,U=N.ui,H=N.keys,p=K.extend,ac=K.proxy,aa=K.each,B=K.isArray,g=N.template,e=U.Widget,k=N.data.HierarchicalDataSource,w=/^(ul|a|div)$/i,Q=".kendoPanelBar",R="img",Z="href",S="k-last",F="k-link",h="."+F,O="error",af=".k-item",E=".k-group",al=E+":visible",n="k-image",t="k-first",I="change",P="expand",x="select",X="k-content",q="activate",C="collapse",l="dataBound",j="mouseenter",s="mouseleave",b="contentLoad",L="undefined",ak="k-state-active",Y="> .k-panel",V="> .k-content",ab="string",A="k-state-focused",y="k-state-disabled",M="k-state-selected",ai="."+M,W="k-state-highlight",c=af+":not(.k-state-disabled)",D="> "+c+" > "+h+", .k-panel > "+c+" > "+h,o=af+".k-state-disabled > .k-link",aj="> li > "+ai+", .k-panel > li > "+ai,G="k-state-default",m="aria-disabled",J="aria-expanded",T="aria-hidden",f="aria-selected",ah=":visible",d=":empty",i="single",ad={text:"dataTextField",url:"dataUrlField",spriteCssClass:"dataSpriteCssClassField",imageUrl:"dataImageUrlField"},ag,u={aria:function(an){var am="";if(an.items||an.content||an.contentUrl||an.expanded){am+=J+"='"+(an.expanded?"true":"false")+"' "}if(an.enabled===false){am+=m+"='true'"}return am},wrapperCssClass:function(ap,ao){var am="k-item",an=ao.index;if(ao.enabled===false){am+=" "+y}else{if(ao.expanded===true){am+=" "+ak}else{am+=" k-state-default"}}if(an===0){am+=" k-first"}if(an==ap.length-1){am+=" k-last"}if(ao.cssClass){am+=" "+ao.cssClass}return am},textClass:function(an,ao){var am=F;if(ao.firstLevel){am+=" k-header"}return am},textAttributes:function(am){return am?" href='"+am+"'":""},arrowClass:function(an){var am="k-icon";am+=an.expanded?" k-panelbar-collapse k-i-arrow-n":" k-panelbar-expand k-i-arrow-s";return am},text:function(am){return am.encoded===false?am.text:N.htmlEncode(am.text)},groupAttributes:function(am){return am.expanded!==true?" style='display:none'":""},groupCssClass:function(){return"k-group k-panel"},contentAttributes:function(am){return am.item.expanded!==true?" style='display:none'":""},content:function(am){return am.content?am.content:am.contentUrl?"":"&nbsp;"},contentUrl:function(am){return am.contentUrl?'href="'+am.contentUrl+'"':""}};function v(am){am=K(am);am.filter(".k-first:not(:first-child)").removeClass(t);am.filter(".k-last:not(:last-child)").removeClass(S);am.filter(":first-child").addClass(t);am.filter(":last-child").addClass(S)}function ae(am){var ap=am,ao=am.children("ul"),an=ap.children(".k-link").children(".k-icon");if(am.hasClass("k-panelbar")){return}if(!an.length&&ao.length){an=K("<span class='k-icon' />").appendTo(ap)}else{if(!ao.length||!ao.children().length){an.remove();ao.remove()}}}ag=function(am){return am.children("span").children(".k-icon")};var z=N.ui.DataBoundWidget.extend({init:function(ao,an){var aq=this,ap,am;if(B(an)){an={dataSource:an}}am=an&&!!an.dataSource;e.fn.init.call(aq,ao,an);ao=aq.wrapper=aq.element.addClass("k-widget k-reset k-header k-panelbar");an=aq.options;if(ao[0].id){aq._itemId=ao[0].id+"_pb_active"}aq._tabindex();aq._accessors();aq._dataSource();aq._templates();aq._initData(am);aq._updateClasses();aq._animations(an);ao.on("click"+Q,D,function(ar){if(aq._click(K(ar.currentTarget))){ar.preventDefault()}}).on(j+Q+" "+s+Q,D,aq._toggleHover).on("click"+Q,o,false).on("click"+Q,".k-request-retry",ac(aq._retryRequest,aq)).on("keydown"+Q,K.proxy(aq._keydown,aq)).on("focus"+Q,function(){var ar=aq.select();aq._current(ar[0]?ar:aq._first())}).on("blur"+Q,function(){aq._current(null)}).attr("role","menu");ap=ao.find("li."+ak+" > ."+X);if(ap[0]){aq.expand(ap.parent(),false)}if(!an.dataSource){aq._angularCompile()}N.notify(aq)},events:[P,C,x,q,I,O,l,b],options:{name:"PanelBar",dataSource:{},animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:200}},messages:{loading:"Loading...",requestFailed:"Request failed.",retry:"Retry"},autoBind:true,loadOnDemand:true,expandMode:"multiple",dataTextField:null},_angularCompile:function(){var am=this;am.angular("compile",function(){return{elements:am.element.children("li"),data:[{dataItem:am.options.$angular}]}})},_angularCompileElements:function(an,am){var ao=this;ao.angular("compile",function(){return{elements:an,data:K.map(am,function(ap){return[{dataItem:ap}]})}})},_angularCleanup:function(){var am=this;am.angular("cleanup",function(){return{elements:am.element.children("li")}})},destroy:function(){e.fn.destroy.call(this);this.element.off(Q);this._angularCleanup();N.destroy(this.element)},_initData:function(am){var an=this;if(am){an.element.empty();if(an.options.autoBind){an._progress(true);an.dataSource.fetch()}}},_templates:function(){var ao=this,an=ao.options,am=ac(ao._fieldAccessor,ao);if(an.template&&typeof an.template==ab){an.template=g(an.template)}else{if(!an.template){an.template=g("# var text = "+am("text")+"(data.item); ## if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {##= text ## } else { ##: text ## } #")}}ao.templates={content:g("<div role='region' class='k-content'#= contentAttributes(data) #>#= content(item) #</div>"),group:g("<ul role='group' aria-hidden='true' class='#= groupCssClass(group) #'#= groupAttributes(group) #>#= renderItems(data) #</ul>"),itemWrapper:g("# var url = "+am("url")+"(item); ## var imageUrl = "+am("imageUrl")+"(item); ## var spriteCssClass = "+am("spriteCssClass")+"(item); ## var contentUrl = contentUrl(item); ## var tag = url||contentUrl ? 'a' : 'span'; #<#= tag # class='#= textClass(item, group) #' #= contentUrl ##= textAttributes(url) #># if (imageUrl) { #<img class='k-image' alt='' src='#= imageUrl #' /># } ## if (spriteCssClass) { #<span class='k-sprite #= spriteCssClass #'></span># } ##= data.panelBar.options.template(data) ##= arrow(data) #</#= tag #>"),item:g("<li role='menuitem' #=aria(item)#class='#= wrapperCssClass(group, item) #'"+N.attr("uid")+"='#= item.uid #'>#= itemWrapper(data) ## if (item.items && item.items.length > 0) { ##= subGroup({ items: item.items, panelBar: panelBar, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),loading:g("<div class='k-item'><span class='k-icon k-i-loading'></span> #: data.messages.loading #</div>"),retry:g("#: data.messages.requestFailed # <button class='k-button k-request-retry'>#: data.messages.retry #</button>"),arrow:g("<span class='#= arrowClass(item) #'></span>"),empty:g("")}},setOptions:function(am){var an=this.options.animation;this._animations(am);am.animation=p(true,an,am.animation);if("dataSource" in am){this.setDataSource(am.dataSource)}e.fn.setOptions.call(this,am)},expand:function(am,ap){var an=this,ao={};am=this.element.find(am);if(an._animating&&am.find("ul").is(":visible")){an.one("complete",function(){setTimeout(function(){an.expand(am)})});return}an._animating=true;ap=ap!==false;am.each(function(ar,at){at=K(at);var au=am.children(".k-group,.k-content");if(!au.length){au=an._addGroupElement(am)}var aq=au.add(at.find(V));if(!at.hasClass(y)&&aq.length>0){if(an.options.expandMode==i&&an._collapseAllExpanded(at)){return an}am.find("."+W).removeClass(W);at.addClass(W);if(!ap){ao=an.options.animation;an.options.animation={expand:{effects:{}},collapse:{hide:true,effects:{}}}}if(!an._triggerEvent(P,at)){an._toggleItem(at,false,false)}if(!ap){an.options.animation=ao}}});return an},collapse:function(am,ap){var an=this,ao={};an._animating=true;ap=ap!==false;am=an.element.find(am);am.each(function(ar,at){at=K(at);var aq=at.find(Y).add(at.find(V));if(!at.hasClass(y)&&aq.is(ah)){at.removeClass(W);if(!ap){ao=an.options.animation;an.options.animation={expand:{effects:{}},collapse:{hide:true,effects:{}}}}if(!an._triggerEvent(C,at)){an._toggleItem(at,true)}if(!ap){an.options.animation=ao}}});return an},updateArrow:function(am){var an=this;am=K(am);am.children(h).children(".k-panelbar-collapse, .k-panelbar-expand").remove();am.filter(function(){var ao=an.dataItem(this);if(!ao){return K(this).find(".k-panel").length>0||K(this).find(".k-content").length>0}return ao.hasChildren||ao.content||ao.contentUrl}).children(".k-link:not(:has([class*=k-i-arrow]))").each(function(){var ap=K(this),ao=ap.parent();ap.append("<span class='k-icon "+(ao.hasClass(ak)?" k-panelbar-collapse k-i-arrow-n":" k-panelbar-expand k-i-arrow-s")+"'/>")})},_accessors:function(){var aq=this,an=aq.options,ap,ar,am,ao=aq.element;for(ap in ad){ar=an[ad[ap]];am=ao.attr(N.attr(ap+"-field"));if(!ar&&am){ar=am}if(!ar){ar=ap}if(!B(ar)){ar=[ar]}an[ad[ap]]=ar}},_progress:function(ao,ap){var an=this.element;var am=this.templates.loading({messages:this.options.messages});if(arguments.length==1){ap=ao;if(ap){an.html(am)}else{an.empty()}}else{ag(ao).toggleClass("k-i-loading",ap).removeClass("k-i-refresh")}},_refreshRoot:function(an){var aq=this;var ap=aq.element;var ao={firstLevel:true,expanded:true,length:ap.children().length};this.element.empty();var am=K.map(an,function(at,ar){if(typeof at==="string"){return K(at)}else{at.items=[];return K(aq.renderItem({group:ao,item:p(at,{index:ar})}))}});this.element.append(am);this._angularCompileElements(am,an)},_refreshChildren:function(aq,am){var ap,ao,ar;am.children(".k-group").empty();var an=aq.children.data();if(!an.length){ae(am);ao=am.children(".k-group").children("li");this._angularCompileElements(ao,an)}else{this.append(aq.children,am);if(this.options.loadOnDemand){this._toggleGroup(am.children(".k-group"),false)}ao=am.children(".k-group").children("li");for(ap=0;ap<ao.length;ap++){ar=ao.eq(ap);this.trigger("itemChange",{item:ar,data:this.dataItem(ar),ns:U})}}},findByUid:function(ap){var an=this.element.find(".k-item");var aq=N.attr("uid");var am;for(var ao=0;ao<an.length;ao++){if(an[ao].getAttribute(aq)==ap){am=an[ao];break}}return K(am)},refresh:function(ar){var av=this.options;var am=ar.node;var an=ar.action;var at=ar.items;var aq=this.wrapper;var ao=av.loadOnDemand;if(ar.field){if(!at[0]||!at[0].level){return}return this._updateItems(at,ar.field)}if(am){aq=this.findByUid(am.uid);this._progress(aq,false)}if(an=="add"){this._appendItems(ar.index,at,aq)}else{if(an=="remove"){this.remove(this.findByUid(at[0].uid))}else{if(an=="itemchange"){this._updateItems(at)}else{if(an=="itemloaded"){this._refreshChildren(am,aq)}else{this._refreshRoot(at)}}}}if(an!="remove"){for(var ap=0;ap<at.length;ap++){if(!ao||at[ap].expanded){var au=at[ap];if(this._hasChildItems(au)){au.load()}}}}this.trigger(l,{node:am?aq:r})},_error:function(ao){var an=ao.node&&this.findByUid(ao.node.uid);var am=this.templates.retry({messages:this.options.messages});if(an){this._progress(an,false);this._expanded(an,false);ag(an).addClass("k-i-refresh");ao.node.loaded(false)}else{this._progress(false);this.element.html(am)}},_retryRequest:function(am){am.preventDefault();this.dataSource.fetch()},items:function(){return this.element.find(".k-item > span:first-child")},setDataSource:function(an){var am=this.options;am.dataSource=an;this._dataSource();if(this.options.autoBind){this._progress(true);this.dataSource.fetch()}},_bindDataSource:function(){this._refreshHandler=ac(this.refresh,this);this._errorHandler=ac(this._error,this);this.dataSource.bind(I,this._refreshHandler);this.dataSource.bind(O,this._errorHandler)},_unbindDataSource:function(){var am=this.dataSource;if(am){am.unbind(I,this._refreshHandler);am.unbind(O,this._errorHandler)}},_fieldAccessor:function(ap){var an=this.options[ad[ap]]||[],ao=an.length,am="(function(item) {";if(ao===0){am+="return item['"+ap+"'];"}else{am+="var levels = ["+K.map(an,function(aq){return"function(d){ return "+N.expr(aq)+"}"}).join(",")+"];";am+="if(item.level){return levels[Math.min(item.level(), "+ao+"-1)](item);}else";am+="{return levels["+ao+"-1](item)}"}am+="})";return am},_dataSource:function(){var an=this,am=an.options,ao=am.dataSource;if(!ao){return}ao=B(ao)?{data:ao}:ao;an._unbindDataSource();if(!ao.fields){ao.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]}an.dataSource=k.create(ao);an._bindDataSource()},_appendItems:function(at,au,aq){var ar=this,an,am;if(aq.hasClass("k-panelbar")){an=aq.children("li");am=aq}else{am=aq.children(".k-group");if(!am.length){am=ar._addGroupElement(aq)}an=am.children("li")}var ao={firstLevel:aq.hasClass("k-panelbar"),expanded:true,length:an.length};var av=K.map(au,function(ax,aw){if(typeof ax==="string"){return K(ax)}else{return K(ar.renderItem({group:ao,item:p(ax,{index:aw})}))}});if(typeof at==L){at=an.length}for(var ap=0;ap<av.length;ap++){if(an.length===0||at===0){am.append(av[ap])}else{av[ap].insertAfter(an[at-1])}}ar._angularCompileElements(av,au);if(ar.dataItem(aq)){ar.dataItem(aq).hasChildren=true;ar.updateArrow(aq)}},_updateItems:function(au,av){var at=this;var ar,aq,aw,ax;var ap={panelBar:at.options,item:ax,group:{}};var ao=av!="expanded";if(av=="selected"){if(au[0][av]){var an=at.findByUid(au[0].uid);if(!an.hasClass(y)){at.select(an,true)}}else{at.clearSelection()}}else{var am=K.map(au,function(ay){return at.findByUid(ay.uid)});if(ao){at.angular("cleanup",function(){return{elements:am}})}for(ar=0;ar<au.length;ar++){ap.item=ax=au[ar];ap.panelBar=at;aw=am[ar];aq=aw.parent();if(ao){ap.group={firstLevel:aq.hasClass("k-panelbar"),expanded:aw.parent().hasClass(ak),length:aw.children().length};aw.children(".k-link").remove();aw.prepend(at.templates.itemWrapper(p(ap,{arrow:ax.hasChildren||ax.content||ax.contentUrl?at.templates.arrow:at.templates.empty},u)))}if(av=="expanded"){at._toggleItem(aw,!ax[av],ax[av]?"true":true)}else{if(av=="enabled"){at.enable(aw,ax[av]);if(!ax[av]){if(ax.selected){ax.set("selected",false)}}}}if(aw.length){this.trigger("itemChange",{item:aw,data:ax,ns:U})}}if(ao){at.angular("compile",function(){return{elements:am,data:K.map(au,function(ay){return[{dataItem:ay}]})}})}}},_toggleDisabled:function(an,am){an=this.element.find(an);an.toggleClass(G,am).toggleClass(y,!am).attr(m,!am)},dataItem:function(an){var am=K(an).closest(af).attr(N.attr("uid")),ao=this.dataSource;return ao&&ao.getByUid(am)},select:function(am,ao){var an=this;if(am===r){return an.element.find(aj).parent()}am=an.element.find(am);if(!am.length){this._updateSelected(am)}else{am.each(function(){var aq=K(this),ap=aq.children(h);if(aq.hasClass(y)){return an}an._updateSelected(ap,ao)})}return an},clearSelection:function(){this.select(K())},enable:function(am,an){this._toggleDisabled(am,an!==false);return this},disable:function(am){this._toggleDisabled(am,false);return this},append:function(ao,am){am=this.element.find(am);var an=this._insert(ao,am,am.length?am.find(Y):null);aa(an.items,function(){an.group.append(this);v(this)});this.updateArrow(am);v(an.group.find(".k-first, .k-last"));an.group.height("auto");return this},insertBefore:function(ao,am){am=this.element.find(am);var an=this._insert(ao,am,am.parent());aa(an.items,function(){am.before(this);v(this)});v(am);an.group.height("auto");return this},insertAfter:function(ao,am){am=this.element.find(am);var an=this._insert(ao,am,am.parent());aa(an.items,function(){am.after(this);v(this)});v(am);an.group.height("auto");return this},remove:function(am){am=this.element.find(am);var ao=this,an=am.parentsUntil(ao.element,af),ap=am.parent("ul");am.remove();if(ap&&!ap.hasClass("k-panelbar")&&!ap.children(af).length){ap.remove()}if(an.length){an=an.eq(0);ao.updateArrow(an);v(an)}return ao},reload:function(am){var an=this;am=an.element.find(am);am.each(function(){var ao=K(this);an._ajaxRequest(ao,ao.children("."+X),!ao.is(ah))})},_first:function(){return this.element.children(c).first()},_last:function(){var am=this.element.children(c).last(),an=am.children(al);if(an[0]){return an.children(c).last()}return am},_current:function(am){var an=this,ao=an._focused,ap=an._itemId;if(am===r){return ao}an.element.removeAttr("aria-activedescendant");if(ao&&ao.length){if(ao[0].id===ap){ao.removeAttr("id")}ao.children(h).removeClass(A)}if(K(am).length){ap=am[0].id||ap;am.attr("id",ap).children(h).addClass(A);an.element.attr("aria-activedescendant",ap)}an._focused=am},_keydown:function(ap){var an=this,am=ap.keyCode,ao=an._current();if(ap.target!=ap.currentTarget){return}if(am==H.DOWN||am==H.RIGHT){an._current(an._nextItem(ao));ap.preventDefault()}else{if(am==H.UP||am==H.LEFT){an._current(an._prevItem(ao));ap.preventDefault()}else{if(am==H.ENTER||am==H.SPACEBAR){an._click(ao.children(h));ap.preventDefault()}else{if(am==H.HOME){an._current(an._first());ap.preventDefault()}else{if(am==H.END){an._current(an._last());ap.preventDefault()}}}}}},_nextItem:function(an){if(!an){return this._first()}var ao=an.children(al),am=an.nextAll(":visible").first();if(ao[0]){am=ao.children("."+t)}if(!am[0]){am=an.parent(al).parent(af).next()}if(!am[0]){am=this._first()}if(am.hasClass(y)){am=this._nextItem(am)}return am},_prevItem:function(ao){if(!ao){return this._last()}var an=ao.prevAll(":visible").first(),am;if(!an[0]){an=ao.parent(al).parent(af);if(!an[0]){an=this._last()}}else{am=an;while(am[0]){am=am.children(al).children("."+S);if(am[0]){an=am}}}if(an.hasClass(y)){an=this._prevItem(an)}return an},_insert:function(av,ao,at){var ap=this,ar,au=K.isPlainObject(av),aq=ao&&ao[0],an;if(!aq){at=ap.element}an={firstLevel:at.hasClass("k-panelbar"),expanded:K(ao).hasClass(ak),length:at.children().length};if(aq&&!at.length){at=K(ap.renderGroup({group:an,options:ap.options})).appendTo(ao)}if(au||K.isArray(av)||av instanceof k){if(av instanceof k){av=av.data()}ar=K.map(au?[av]:av,function(ax,aw){if(typeof ax==="string"){return K(ax)}else{return K(ap.renderItem({group:an,item:p(ax,{index:aw})}))}});if(aq){var am=ap.dataItem(ao);if(am){am.hasChildren=true}ao.attr(J,false)}}else{if(typeof av=="string"&&av.charAt(0)!="<"){ar=ap.element.find(av)}else{ar=K(av)}ap._updateItemsClasses(ar)}if(!av.length){av=[av]}ap._angularCompileElements(ar,av);return{items:ar,group:at}},_toggleHover:function(an){var am=K(an.currentTarget);if(!am.parents("li."+y).length){am.toggleClass("k-state-hover",an.type==j)}},_updateClasses:function(){var ao=this,an,am;an=ao.element.find("li > ul").not(function(){return K(this).parentsUntil(".k-panelbar","div").length}).addClass("k-group k-panel").attr("role","group");an.parent().attr(J,false).not("."+ak).children("ul").attr(T,true).hide();am=ao.element.add(an).children();ao._updateItemsClasses(am);ao.updateArrow(am);v(am)},_updateItemsClasses:function(an){var ao=an.length,am=0;for(;am<ao;am++){this._updateItemClasses(an[am],am)}},_updateItemClasses:function(at,ap){var aq=this._selected,an=this.options.contentUrls,ao=an&&an[ap],am=this.element[0],au,ar;at=K(at).addClass("k-item").attr("role","menuitem");if(N.support.browser.msie){at.css("list-style-position","inside").css("list-style-position","")}at.children(R).addClass(n);ar=at.children("a").addClass(F);if(ar[0]){ar.attr("href",ao);ar.children(R).addClass(n)}at.filter(":not([disabled]):not([class*=k-state])").addClass("k-state-default");at.filter("li[disabled]").addClass("k-state-disabled").attr(m,true).removeAttr("disabled");at.children("div").addClass(X).attr("role","region").attr(T,true).hide().parent().attr(J,false);ar=at.children(ai);if(ar[0]){if(aq){aq.removeAttr(f).children(ai).removeClass(M)}ar.addClass(M);this._selected=at.attr(f,true)}if(!at.children(h)[0]){au="<span class='"+F+"'/>";if(an&&an[ap]&&at[0].parentNode==am){au='<a class="k-link k-header" href="'+an[ap]+'"/>'}at.contents().filter(function(){return !this.nodeName.match(w)&&!(this.nodeType==3&&!K.trim(this.nodeValue))}).wrapAll(au)}if(at.parent(".k-panelbar")[0]){at.children(h).addClass("k-header")}},_click:function(av){var au=this,at=au.element,ax,ar,aq,an;if(av.parents("li."+y).length){return}if(av.closest(".k-widget")[0]!=at[0]){return}var aw=av.closest(h),ay=aw.closest(af);au._updateSelected(aw);var ap=ay.children(".k-group,.k-content");var am=this.dataItem(ay);if(!ap.length&&(au.options.loadOnDemand&&am&&am.hasChildren||this._hasChildItems(ay)||ay.content||ay.contentUrl)){ap=au._addGroupElement(ay)}ar=ay.find(Y).add(ay.find(V));aq=aw.attr(Z);an=aq&&(aq.charAt(aq.length-1)=="#"||aq.indexOf("#"+au.element[0].id+"-")!=-1);ax=!!(an||ar.length);if(ar.data("animating")){return ax}if(au._triggerEvent(x,ay)){ax=true}if(ax===false){return}if(au.options.expandMode==i){if(au._collapseAllExpanded(ay)){return ax}}if(ar.length){var ao=ar.is(ah);if(!au._triggerEvent(!ao?P:C,ay)){ax=au._toggleItem(ay,ao)}}return ax},_hasChildItems:function(am){return am.items&&am.items.length>0||am.hasChildren},_toggleItem:function(ap,aq,at){var ar=this,av=ap.find(Y),aw=ap.find(h),an=aw.attr(Z),ax,au,am=ar.dataItem(ap);var ao=am&&am.loaded();if(am&&!at){am.set("expanded",!aq);ax=am.hasChildren||!!am.content||!!am.contentUrl;return ax}if(am&&(!at||at==="true")&&!ao&&!am.content&&!am.contentUrl){if(ar.options.loadOnDemand){this._progress(ap,true)}ap.children(".k-group,.k-content").remove();ax=am.hasChildren;am.load()}else{if(av.length){this._toggleGroup(av,aq);ax=true}else{au=ap.children("."+X);if(au.length){ax=true;if(!au.is(d)||an===r){ar._toggleGroup(au,aq)}else{ar._ajaxRequest(ap,au,aq)}}}}return ax},_toggleGroup:function(ao,am){var aq=this,an=aq.options.animation,ar=an.expand,at=p({},an.collapse),ap=at&&"effects" in at;if(ao.is(ah)!=am){aq._animating=false;return}ao.parent().attr(J,!am).attr(T,am).toggleClass(ak,!am).find("> .k-link > .k-panelbar-collapse, .k-panelbar-expand").toggleClass("k-i-arrow-n",!am).toggleClass("k-panelbar-collapse",!am).toggleClass("k-i-arrow-s",am).toggleClass("k-panelbar-expand",am);if(am){ar=p(ap?at:p({reverse:true},ar),{hide:true});ar.complete=function(){aq._animationCallback()}}else{ar=p({complete:function(au){aq._triggerEvent(q,au.closest(af));aq._animationCallback()}},ar)}ao.kendoStop(true,true).kendoAnimate(ar)},_animationCallback:function(){var am=this;am.trigger("complete");am._animating=false},_addGroupElement:function(am){var an=K('<ul role="group" aria-hidden="true" class="k-group k-panel" style="display:none"></ul>');am.append(an);return an},_collapseAllExpanded:function(ap){var ao=this,an,aq=false;var am=ap.find(Y).add(ap.find(V));if(am.is(ah)){aq=true}if(!(am.is(ah)||am.length===0)){an=ap.siblings();an.find(Y).add(an.find(V)).filter(function(){return K(this).is(ah)}).each(function(ar,at){at=K(at);aq=ao._triggerEvent(C,at.closest(af));if(!aq){ao._toggleGroup(at,true)}});ao.one("complete",function(){setTimeout(function(){an.each(function(at,au){var ar=ao.dataItem(au);if(ar){ar.set("expanded",false)}})})})}return aq},_ajaxRequest:function(aq,av,ar){var at=this,am=aq.find(".k-panelbar-collapse, .k-panelbar-expand"),au=aq.find(h),ao=setTimeout(function(){am.addClass("k-i-loading")},100),ap={},an=au.attr(Z);K.ajax({type:"GET",cache:false,url:an,dataType:"html",data:ap,error:function(ax,aw){am.removeClass("k-i-loading");if(at.trigger(O,{xhr:ax,status:aw})){this.complete()}},complete:function(){clearTimeout(ao);am.removeClass("k-i-loading")},success:function(ay){function ax(){return{elements:av.get()}}try{at.angular("cleanup",ax);av.html(ay);at.angular("compile",ax)}catch(az){var aw=window.console;if(aw&&aw.error){aw.error(az.name+": "+az.message+" in "+an)}this.error(this.xhr,"error")}at._toggleGroup(av,ar);at.trigger(b,{item:aq[0],contentElement:av[0]})}})},_triggerEvent:function(am,an){var ao=this;return ao.trigger(am,{item:an[0]})},_updateSelected:function(ar,at){var aq=this,an=aq.element,ap=ar.parent(af),ao=aq._selected,am=aq.dataItem(ap);if(ao){ao.removeAttr(f)}aq._selected=ap.attr(f,true);an.find(aj).removeClass(M);an.find("> ."+W+", .k-panel > ."+W).removeClass(W);ar.addClass(M);ar.parentsUntil(an,af).filter(":has(.k-header)").addClass(W);aq._current(ap[0]?ap:null);if(am){am.set("selected",true)}if(!at){aq.trigger(I)}},_animations:function(am){if(am&&"animation" in am&&!am.animation){am.animation={expand:{effects:{}},collapse:{hide:true,effects:{}}}}},renderItem:function(am){var ao=this;am=p({panelBar:ao,group:{}},am);var ap=ao.templates.empty,an=am.item;return ao.templates.item(p(am,{itemWrapper:ao.templates.itemWrapper,renderContent:ao.renderContent,arrow:ao._hasChildItems(an)||an.content||an.contentUrl?ao.templates.arrow:ap,subGroup:!am.loadOnDemand||an.expanded?ao.renderGroup:ap},u))},renderGroup:function(am){var ao=this;var an=ao.templates||am.panelBar.templates;return an.group(p({renderItems:function(ar){var au="",at=0,aq=ar.items,ap=aq?aq.length:0,av=p({length:ap},ar.group);for(;at<ap;at++){au+=ar.panelBar.renderItem(p(ar,{group:av,item:p({index:at},aq[at])}))}return au}},am,u))},renderContent:function(am){return am.panelBar.templates.content(p(am,u))}});N.ui.plugin(z)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.responsivepanel",["kendo.core"],a)}(function(){var a={id:"responsive-panel",name:"Responsive Panel",category:"web",description:"The Responsive Panel widget allows a panel of content to be hidden on mobile devices, available through a toggle button.",depends:["core"]};(function(f,c){var h=f.proxy;var d=".kendoResponsivePanel";var e="open";var g="close";var j="click"+d+" touchstart"+d;var i=kendo.ui.Widget;var b=i.extend({init:function(l,k){i.fn.init.call(this,l,k);this._guid="_"+kendo.guid();this._toggleHandler=h(this._toggleButtonClick,this);this._closeHandler=h(this._close,this);f(document.documentElement).on(j,this.options.toggleButton,this._toggleHandler);this._registerBreakpoint();this.element.addClass("k-rpanel k-rpanel-"+this.options.orientation+" "+this._guid);this._resizeHandler=h(this.resize,this,true);f(window).on("resize"+d,this._resizeHandler)},_mediaQuery:"@media (max-width: #= breakpoint-1 #px) {.#= guid #.k-rpanel-animate.k-rpanel-left,.#= guid #.k-rpanel-animate.k-rpanel-right {-webkit-transition: -webkit-transform .2s ease-out;-ms-transition: -ms-transform .2s ease-out;transition: transform .2s ease-out;} .#= guid #.k-rpanel-top {overflow: hidden;}.#= guid #.k-rpanel-animate.k-rpanel-top {-webkit-transition: max-height .2s linear;-ms-transition: max-height .2s linear;transition: max-height .2s linear;}} @media (min-width: #= breakpoint #px) {#= toggleButton # { display: none; } .#= guid #.k-rpanel-left { float: left; } .#= guid #.k-rpanel-right { float: right; } .#= guid #.k-rpanel-left, .#= guid #.k-rpanel-right {position: relative;-webkit-transform: translateX(0);-ms-transform: translateX(0);transform: translateX(0);-webkit-transform: translateX(0) translateZ(0);-ms-transform: translateX(0) translateZ(0);transform: translateX(0) translateZ(0);} .k-ie9 .#= guid #.k-rpanel-left { left: 0; } .#= guid #.k-rpanel-top { max-height: none; }}",_registerBreakpoint:function(){var k=this.options;this._registerStyle(kendo.template(this._mediaQuery)({breakpoint:k.breakpoint,toggleButton:k.toggleButton,guid:this._guid}))},_registerStyle:function(m){var k=f("head,body")[0];var l=document.createElement("style");k.appendChild(l);if(l.styleSheet){l.styleSheet.cssText=m}else{l.appendChild(document.createTextNode(m))}},options:{name:"ResponsivePanel",orientation:"left",toggleButton:".k-rpanel-toggle",breakpoint:640,autoClose:true},events:[e,g],_resize:function(){this.element.removeClass("k-rpanel-animate k-rpanel-expanded");f(document.documentElement).off(j,this._closeHandler)},_toggleButtonClick:function(k){k.preventDefault();if(this.element.hasClass("k-rpanel-expanded")){this.close()}else{this.open()}},open:function(){if(!this.trigger(e)){this.element.addClass("k-rpanel-animate k-rpanel-expanded");if(this.options.autoClose){f(document.documentElement).on(j,this._closeHandler)}}},close:function(){if(!this.trigger(g)){this.element.addClass("k-rpanel-animate").removeClass("k-rpanel-expanded");f(document.documentElement).off(j,this._closeHandler)}},_close:function(m){var l=m.isDefaultPrevented();var k=f(m.target).closest(this.options.toggleButton+",.k-rpanel");if(!k.length&&!l){this.close()}},destroy:function(){i.fn.destroy.call(this);f(window).off("resize"+d,this._resizeHandler);f(document.documentElement).off(j,this._closeHandler)}});kendo.ui.plugin(b)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.timepicker",["kendo.popup"],a)}(function(){var a={id:"timepicker",name:"TimePicker",category:"web",description:"The TimePicker widget allows the end user to select a value from a list of predefined values or to type a new value.",depends:["popup"]};(function(D,n){var E=window.kendo,x=E.keys,q=E.parseDate,g=E._activeElement,i=E._extractFormat,N=E.support,b=N.browser,M=E.ui,c=M.Widget,R="open",V="close",B="change",U=".kendoTimePicker",O="click"+U,Q="k-state-default",A="disabled",h="readonly",u="li",P="<span/>",J="k-state-focused",r="k-state-hover",f="mouseenter"+U+" mouseleave"+U,K="mousedown"+U,F=60000,e=86400000,y="k-state-selected",o="k-state-disabled",d="aria-selected",C="aria-expanded",L="aria-hidden",j="aria-disabled",W="aria-activedescendant",v="id",w=D.isArray,l=D.extend,T=D.proxy,k=Date,t=new k();t=new k(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0);var s=function(X){var Y=this,Z=X.id;Y.options=X;Y._dates=[];Y.ul=D('<ul tabindex="-1" role="listbox" aria-hidden="true" unselectable="on" class="k-list k-reset"/>').css({overflow:N.kineticScrollNeeded?"":"auto"}).on(O,u,T(Y._click,Y)).on("mouseenter"+U,u,function(){D(this).addClass(r)}).on("mouseleave"+U,u,function(){D(this).removeClass(r)});Y.list=D("<div class='k-list-container k-list-scroller' unselectable='on'/>").append(Y.ul).on(K,H);if(Z){Y._timeViewID=Z+"_timeview";Y._optionID=Z+"_option_selected";Y.ul.attr(v,Y._timeViewID)}Y._popup();Y._heightHandler=T(Y._height,Y);Y.template=E.template('<li tabindex="-1" role="option" class="k-item" unselectable="on">#=data#</li>',{useWithBlock:false})};s.prototype={current:function(X){var Y=this,Z=Y.options.active;if(X!==n){if(Y._current){Y._current.removeClass(y).removeAttr(d).removeAttr(v)}if(X){X=D(X).addClass(y).attr(v,Y._optionID).attr(d,true);Y.scroll(X[0])}Y._current=X;if(Z){Z(X)}}else{return Y._current}},close:function(){this.popup.close()},destroy:function(){var X=this;X.ul.off(U);X.list.off(U);X.popup.destroy()},open:function(){var X=this;if(!X.ul[0].firstChild){X.bind()}X.popup.open();if(X._current){X.scroll(X._current[0])}},dataBind:function(X){var ac=this,ag=ac.options,ad=ag.format,Y=E.toString,af=ac.template,Z=X.length,ae=0,aa,ab="";for(;ae<Z;ae++){aa=X[ae];if(G(aa,ag.min,ag.max)){ab+=af(Y(aa,ad,ag.culture))}}ac._html(ab)},refresh:function(){var ac=this,Z=ac.options,am=Z.format,ab=I(),ae=ab<0,aj=Z.min,al=Z.max,ad=m(aj),af=m(al),an=Z.interval*F,ak=E.toString,ao=ac.template,aa=new k(+aj),ah=aa.getDate(),X,ap,ai=0,Y,ag="";if(ae){Y=(e+ab*F)/an}else{Y=e/an}if(ad!=af){if(ad>af){af+=e}Y=(af-ad)/an+1}ap=parseInt(Y,10);for(;ai<Y;ai++){if(ai){p(aa,an,ae)}if(af&&ap==ai){X=m(aa);if(ah<aa.getDate()){X+=e}if(X>af){aa=new k(+al)}}ac._dates.push(m(aa));ag+=ao(ak(aa,am,Z.culture))}ac._html(ag)},bind:function(){var X=this,Y=X.options.dates;if(Y&&Y[0]){X.dataBind(Y)}else{X.refresh()}},_html:function(X){var Y=this;Y.ul[0].innerHTML=X;Y.popup.unbind(R,Y._heightHandler);Y.popup.one(R,Y._heightHandler);Y.current(null);Y.select(Y._value)},scroll:function(ac){if(!ac){return}var ab=this.list[0],ad=ac.offsetTop,Z=ac.offsetHeight,Y=ab.scrollTop,X=ab.clientHeight,aa=ad+Z;if(Y>ad){Y=ad}else{if(aa>Y+X){Y=aa-X}}ab.scrollTop=Y},select:function(X){var aa=this,Y=aa.options,ab=aa._current,Z;if(X instanceof Date){X=E.toString(X,Y.format,Y.culture)}if(typeof X==="string"){if(!ab||ab.text()!==X){X=D.grep(aa.ul[0].childNodes,function(ac){return(ac.textContent||ac.innerText)==X});X=X[0]?X:null}else{X=ab}}Z=aa._distinctSelection(X);aa.current(Z)},_distinctSelection:function(Z){var aa=this,Y,X;if(Z&&Z.length>1){Y=m(aa._value);X=D.inArray(Y,aa._dates);Z=aa.ul.children()[X]}return Z},setOptions:function(Y){var X=this.options;Y.min=q(Y.min);Y.max=q(Y.max);this.options=l(X,Y,{active:X.active,change:X.change,close:X.close,open:X.open});this.bind()},toggle:function(){var X=this;if(X.popup.visible()){X.close()}else{X.open()}},value:function(Y){var X=this;X._value=Y;if(X.ul[0].firstChild){X.select(Y)}},_click:function(ab){var Z=this,X=D(ab.currentTarget),Y=X.text(),aa=Z.options.dates;if(aa&&aa.length>0){Y=aa[X.index()]}if(!ab.isDefaultPrevented()){Z.select(X);Z.options.change(Y,true);Z.close()}},_height:function(){var Z=this;var aa=Z.list;var Y=aa.parent(".k-animation-container");var X=Z.options.height;if(Z.ul[0].children.length){aa.add(Y).show().height(Z.ul[0].scrollHeight>X?X:"auto").hide()}},_parse:function(Z){var Y=this,X=Y.options,aa=Y._value||t;if(Z instanceof k){return Z}Z=q(Z,X.parseFormats,X.culture);if(Z){Z=new k(aa.getFullYear(),aa.getMonth(),aa.getDate(),Z.getHours(),Z.getMinutes(),Z.getSeconds(),Z.getMilliseconds())}return Z},_adjustListWidth:function(){var aa=this.list,Z=aa[0].style.width,ac=this.options.anchor,Y,X,ab=E._outerWidth;if(!aa.data("width")&&Z){return}Y=window.getComputedStyle?window.getComputedStyle(ac[0],null):0;X=Y?parseFloat(Y.width):ab(ac);if(Y&&(b.mozilla||b.msie)){X+=parseFloat(Y.paddingLeft)+parseFloat(Y.paddingRight)+parseFloat(Y.borderLeftWidth)+parseFloat(Y.borderRightWidth)}Z=X-(ab(aa)-aa.width());aa.css({fontFamily:ac.css("font-family"),width:Z}).data("width",Z)},_popup:function(){var Z=this,aa=Z.list,Y=Z.options,X=Y.anchor;Z.popup=new M.Popup(aa,l(Y.popup,{anchor:X,open:Y.open,close:Y.close,animation:Y.animation,isRtl:N.isRtl(Y.anchor)}))},move:function(ab){var Z=this,Y=ab.keyCode,X=Z.ul[0],aa=Z._current,ac=Y===x.DOWN;if(Y===x.UP||ac){if(ab.altKey){Z.toggle(ac);return}else{if(ac){aa=aa?aa[0].nextSibling:X.firstChild}else{aa=aa?aa[0].previousSibling:X.lastChild}}if(aa){Z.select(aa)}Z.options.change(Z._current.text());ab.preventDefault()}else{if(Y===x.ENTER||Y===x.TAB||Y===x.ESC){ab.preventDefault();if(aa){Z.options.change(aa.text(),true)}Z.close()}}}};function p(X,aa,Z){var ab=X.getTimezoneOffset(),Y;X.setTime(X.getTime()+aa);if(!Z){Y=X.getTimezoneOffset()-ab;X.setTime(X.getTime()+Y*F)}}function I(){var X=new k(),Y=new k(X.getFullYear(),X.getMonth(),X.getDate(),0,0,0),Z=new k(X.getFullYear(),X.getMonth(),X.getDate(),12,0,0);return -1*(Y.getTimezoneOffset()-Z.getTimezoneOffset())}function m(X){return X.getHours()*60*F+X.getMinutes()*F+X.getSeconds()*1000+X.getMilliseconds()}function G(aa,Z,X){var Y=m(Z),ab=m(X),ac;if(!aa||Y==ab){return true}ac=m(aa);if(Y>ac){ac+=e}if(ab<Y){ab+=e}return ac>=Y&&ac<=ab}s.getMilliseconds=m;E.TimeView=s;var z=c.extend({init:function(aa,Y){var ac=this,Z,X,ab;c.fn.init.call(ac,aa,Y);aa=ac.element;Y=ac.options;Y.min=q(aa.attr("min"))||q(Y.min);Y.max=q(aa.attr("max"))||q(Y.max);S(Y);ac._initialOptions=l({},Y);ac._wrapper();ac.timeView=X=new s(l({},Y,{id:aa.attr(v),anchor:ac.wrapper,format:Y.format,change:function(af,ae){if(ae){ac._change(af)}else{aa.val(af)}},open:function(ae){ac.timeView._adjustListWidth();if(ac.trigger(R)){ae.preventDefault()}else{aa.attr(C,true);Z.attr(L,false)}},close:function(ae){if(ac.trigger(V)){ae.preventDefault()}else{aa.attr(C,false);Z.attr(L,true)}},active:function(ae){aa.removeAttr(W);if(ae){aa.attr(W,X._optionID)}}}));Z=X.ul;ac._icon();ac._reset();try{aa[0].setAttribute("type","text")}catch(ad){aa[0].type="text"}aa.addClass("k-input").attr({role:"combobox","aria-expanded":false,"aria-owns":X._timeViewID});ab=aa.is("[disabled]")||D(ac.element).parents("fieldset").is(":disabled");if(ab){ac.enable(false)}else{ac.readonly(aa.is("[readonly]"))}ac._old=ac._update(Y.value||ac.element.val());ac._oldText=aa.val();E.notify(ac)},options:{name:"TimePicker",min:t,max:t,format:"",dates:[],parseFormats:[],value:null,interval:30,height:200,animation:{}},events:[R,V,B],setOptions:function(X){var Y=this;var Z=Y._value;c.fn.setOptions.call(Y,X);X=Y.options;S(X);Y.timeView.setOptions(X);if(Z){Y.element.val(E.toString(Z,X.format,X.culture))}},dataBind:function(X){if(w(X)){this.timeView.dataBind(X)}},_editable:function(Z){var ab=this,Y=Z.disable,X=Z.readonly,ac=ab._arrow.off(U),aa=ab.element.off(U),ad=ab._inputWrapper.off(U);if(!X&&!Y){ad.addClass(Q).removeClass(o).on(f,ab._toggleHover);aa.removeAttr(A).removeAttr(h).attr(j,false).on("keydown"+U,T(ab._keydown,ab)).on("focusout"+U,T(ab._blur,ab)).on("focus"+U,function(){ab._inputWrapper.addClass(J)});ac.on(O,T(ab._click,ab)).on(K,H)}else{ad.addClass(Y?o:Q).removeClass(Y?Q:o);aa.attr(A,Y).attr(h,X).attr(j,Y)}},readonly:function(X){this._editable({readonly:X===n?true:X,disable:false})},enable:function(X){this._editable({readonly:false,disable:!(X=X===n?true:X)})},destroy:function(){var X=this;c.fn.destroy.call(X);X.timeView.destroy();X.element.off(U);X._arrow.off(U);X._inputWrapper.off(U);if(X._form){X._form.off("reset",X._resetHandler)}},close:function(){this.timeView.close()},open:function(){this.timeView.open()},min:function(X){return this._option("min",X)},max:function(X){return this._option("max",X)},value:function(Y){var X=this;if(Y===n){return X._value}X._old=X._update(Y);if(X._old===null){X.element.val("")}X._oldText=X.element.val()},_blur:function(){var X=this,Y=X.element.val();X.close();if(Y!==X._oldText){X._change(Y)}X._inputWrapper.removeClass(J)},_click:function(){var Y=this,X=Y.element;Y.timeView.toggle();if(!N.touch&&X[0]!==g()){X.focus()}},_change:function(Y){var X=this;Y=X._update(Y);if(+X._old!=+Y){X._old=Y;X._oldText=X.element.val();if(!X._typing){X.element.trigger(B)}X.trigger(B)}X._typing=false},_icon:function(){var Y=this,X=Y.element,Z;Z=X.next("span.k-select");if(!Z[0]){Z=D('<span unselectable="on" class="k-select" aria-label="select"><span class="k-icon k-i-clock"></span></span>').insertAfter(X)}Y._arrow=Z.attr({role:"button","aria-controls":Y.timeView._timeViewID})},_keydown:function(ab){var Z=this,Y=ab.keyCode,X=Z.timeView,aa=Z.element.val();if(X.popup.visible()||ab.altKey){X.move(ab)}else{if(Y===x.ENTER&&aa!==Z._oldText){Z._change(aa)}else{Z._typing=true}}},_option:function(Y,aa){var Z=this,X=Z.options;if(aa===n){return X[Y]}aa=Z.timeView._parse(aa);if(!aa){return}aa=new k(+aa);X[Y]=aa;Z.timeView.options[Y]=aa;Z.timeView.bind()},_toggleHover:function(X){D(X.currentTarget).toggleClass(r,X.type==="mouseenter")},_update:function(ab){var aa=this,Z=aa.options,Y=aa.timeView,X=Y._parse(ab);if(!G(X,Z.min,Z.max)){X=null}aa._value=X;aa.element.val(E.toString(X||ab,Z.format,Z.culture));Y.value(X);return X},_wrapper:function(){var Y=this,X=Y.element,Z;Z=X.parents(".k-timepicker");if(!Z[0]){Z=X.wrap(P).parent().addClass("k-picker-wrap k-state-default");Z=Z.wrap(P).parent()}Z[0].style.cssText=X[0].style.cssText;Y.wrapper=Z.addClass("k-widget k-timepicker k-header").addClass(X[0].className);X.css({width:"100%",height:X[0].style.height});Y._inputWrapper=D(Z[0].firstChild)},_reset:function(){var Z=this,X=Z.element,aa=X.attr("form"),Y=aa?D("#"+aa):X.closest("form");if(Y[0]){Z._resetHandler=function(){Z.value(X[0].defaultValue);Z.max(Z._initialOptions.max);Z.min(Z._initialOptions.min)};Z._form=Y.on("reset",Z._resetHandler)}}});function S(X){var Y=X.parseFormats;X.format=i(X.format||E.getCulture(X.culture).calendars.standard.patterns.t);Y=w(Y)?Y:[Y];Y.splice(0,0,X.format);X.parseFormats=Y}function H(X){X.preventDefault()}M.plugin(z)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.datetimepicker",["kendo.datepicker","kendo.timepicker"],a)}(function(){var a={id:"datetimepicker",name:"DateTimePicker",category:"web",description:"The DateTimePicker allows the end user to select a value from a calendar or a time drop-down list.",depends:["datepicker","timepicker"]};(function(y,m){var z=window.kendo,r=z.TimeView,p=z.parseDate,f=z._activeElement,h=z._extractFormat,K=z.calendar,A=K.isInRange,b=K.restrictValue,u=K.isEqualDatePart,l=r.getMilliseconds,F=z.ui,c=F.Widget,L="open",Q="close",w="change",P=".kendoDateTimePicker",G="click"+P,v="disabled",g="readonly",I="k-state-default",C="k-state-focused",q="k-state-hover",n="k-state-disabled",d="mouseenter"+P+" mouseleave"+P,D="mousedown"+P,e="month",H="<span/>",S="aria-activedescendant",x="aria-expanded",E="aria-hidden",N="aria-owns",i="aria-disabled",j=Date,s=new j(1800,0,1),R=new j(2099,11,31),M={view:"date"},o={view:"time"},k=y.extend;var J=c.extend({init:function(U,T){var W=this,V;c.fn.init.call(W,U,T);U=W.element;T=W.options;T.disableDates=z.calendar.disabled(T.disableDates);T.min=p(U.attr("min"))||p(T.min);T.max=p(U.attr("max"))||p(T.max);O(T);W._initialOptions=k({},T);W._wrapper();W._views();W._icons();W._reset();W._template();try{U[0].setAttribute("type","text")}catch(X){U[0].type="text"}U.addClass("k-input").attr({role:"combobox","aria-expanded":false});W._midnight=W._calculateMidnight(T.min,T.max);V=U.is("[disabled]")||y(W.element).parents("fieldset").is(":disabled");if(V){W.enable(false)}else{W.readonly(U.is("[readonly]"))}W._old=W._update(T.value||W.element.val());W._oldText=U.val();z.notify(W)},options:{name:"DateTimePicker",value:null,format:"",timeFormat:"",culture:"",parseFormats:[],dates:[],min:new j(s),max:new j(R),interval:30,height:200,footer:"",start:e,depth:e,animation:{},month:{},ARIATemplate:'Current focused date is #=kendo.toString(data.current, "d")#',dateButtonText:"Open the date view",timeButtonText:"Open the time view"},events:[L,Q,w],setOptions:function(U){var X=this,Y=X._value,V,T,W;c.fn.setOptions.call(X,U);U=X.options;U.min=V=p(U.min);U.max=T=p(U.max);O(U);X._midnight=X._calculateMidnight(U.min,U.max);W=U.value||X._value||X.dateView._current;if(V&&!u(V,W)){V=new j(s)}if(T&&!u(T,W)){T=new j(R)}X.dateView.setOptions(U);X.timeView.setOptions(k({},U,{format:U.timeFormat,min:V,max:T}));if(Y){X.element.val(z.toString(Y,U.format,U.culture));X._updateARIA(Y)}},_editable:function(V){var Y=this,X=Y.element.off(P),W=Y._dateIcon.off(P),Z=Y._timeIcon.off(P),aa=Y._inputWrapper.off(P),T=V.readonly,U=V.disable;if(!T&&!U){aa.addClass(I).removeClass(n).on(d,Y._toggleHover);X.removeAttr(v).removeAttr(g).attr(i,false).on("keydown"+P,y.proxy(Y._keydown,Y)).on("focus"+P,function(){Y._inputWrapper.addClass(C)}).on("focusout"+P,function(){Y._inputWrapper.removeClass(C);if(X.val()!==Y._oldText){Y._change(X.val())}Y.close("date");Y.close("time")});W.on(D,B).on(G,function(){Y.toggle("date");if(!z.support.touch&&X[0]!==f()){X.focus()}});Z.on(D,B).on(G,function(){Y.toggle("time");if(!z.support.touch&&X[0]!==f()){X.focus()}})}else{aa.addClass(U?n:I).removeClass(U?I:n);X.attr(v,U).attr(g,T).attr(i,U)}},readonly:function(T){this._editable({readonly:T===m?true:T,disable:false})},enable:function(T){this._editable({readonly:false,disable:!(T=T===m?true:T)})},destroy:function(){var T=this;c.fn.destroy.call(T);T.dateView.destroy();T.timeView.destroy();T.element.off(P);T._dateIcon.off(P);T._timeIcon.off(P);T._inputWrapper.off(P);if(T._form){T._form.off("reset",T._resetHandler)}},close:function(T){if(T!=="time"){T="date"}this[T+"View"].close()},open:function(T){if(T!=="time"){T="date"}this[T+"View"].open()},min:function(T){return this._option("min",T)},max:function(T){return this._option("max",T)},toggle:function(U){var T="timeView";if(U!=="time"){U="date"}else{T="dateView"}this[U+"View"].toggle();this[T].close()},value:function(U){var T=this;if(U===m){return T._value}T._old=T._update(U);if(T._old===null){T.element.val("")}T._oldText=T.element.val()},_change:function(X){var W=this,V=W.element.val(),U;X=W._update(X);U=+W._old!=+X;var Y=U&&!W._typing;var T=V!==W.element.val();if(Y||T){W.element.trigger(w)}if(U){W._old=X;W._oldText=W.element.val();W.trigger(w)}W._typing=false},_option:function(U,Y){var V=this;var aa=V.options;var ab=V.timeView;var T=ab.options;var W=V._value||V._old;var X;var Z;if(Y===m){return aa[U]}Y=p(Y,aa.parseFormats,aa.culture);if(!Y){return}if(aa.min.getTime()===aa.max.getTime()){T.dates=[]}aa[U]=new j(Y.getTime());V.dateView[U](Y);V._midnight=V._calculateMidnight(aa.min,aa.max);if(W){X=u(aa.min,W);Z=u(aa.max,W)}if(X||Z){T[U]=Y;if(X&&!Z){T.max=t(aa.interval)}if(Z){if(V._midnight){ab.dataBind([R]);return}else{if(!X){T.min=s}}}}else{T.max=R;T.min=s}ab.bind()},_toggleHover:function(T){y(T.currentTarget).toggleClass(q,T.type==="mouseenter")},_update:function(ae){var aa=this,ag=aa.options,X=ag.min,ac=ag.max,T=ag.dates,ah=aa.timeView,ab=aa._value,V=p(ae,ag.parseFormats,ag.culture),W=V===null&&ab===null||V instanceof Date&&ab instanceof Date,ad,Z,U,af,Y;if(ag.disableDates&&ag.disableDates(V)){V=null;if(!aa._old&&!aa.element.val()){ae=null}}if(+V===+ab&&W){Y=z.toString(V,ag.format,ag.culture);if(Y!==ae){aa.element.val(V===null?ae:Y);if(ae instanceof String){aa.element.trigger(w)}}return V}if(V!==null&&u(V,X)){V=b(V,X,ac)}else{if(!A(V,X,ac)){V=null}}aa._value=V;ah.value(V);aa.dateView.value(V);if(V){U=aa._old;Z=ah.options;if(T[0]){T=y.grep(T,function(ai){return u(V,ai)});if(T[0]){ah.dataBind(T);af=true}}if(!af){if(u(V,X)){Z.min=X;Z.max=t(ag.interval);ad=true}if(u(V,ac)){if(aa._midnight){ah.dataBind([R]);af=true}else{Z.max=ac;if(!ad){Z.min=s}ad=true}}}if(!af&&(!U&&ad||U&&!u(U,V))){if(!ad){Z.max=R;Z.min=s}ah.bind()}}aa.element.val(z.toString(V||ae,ag.format,ag.culture));aa._updateARIA(V);return V},_keydown:function(Y){var W=this,T=W.dateView,V=W.timeView,X=W.element.val(),U=T.popup.visible();if(Y.altKey&&Y.keyCode===z.keys.DOWN){W.toggle(U?"time":"date")}else{if(U){T.move(Y);W._updateARIA(T._current)}else{if(V.popup.visible()){V.move(Y)}else{if(Y.keyCode===z.keys.ENTER&&X!==W._oldText){W._change(X)}else{W._typing=true}}}}},_views:function(){var Y=this,W=Y.element,ab=Y.options,U=W.attr("id"),X,ac,T,Z,aa,V;Y.dateView=X=new z.DateView(k({},ab,{id:U,anchor:Y.wrapper,change:function(){var af=X.calendar.value(),ai=+af,ad=+ab.min,ah=+ab.max,ag,ae;if(ai===ad||ai===ah){ag=ai===ad?ad:ah;ag=new j(Y._value||ag);ag.setFullYear(af.getFullYear(),af.getMonth(),af.getDate());if(A(ag,ad,ah)){af=ag}}if(Y._value){ae=z.date.setHours(new Date(af),Y._value);if(A(ae,ad,ah)){af=ae}}Y._change(af);Y.close("date")},close:function(ad){if(Y.trigger(Q,M)){ad.preventDefault()}else{W.attr(x,false);T.attr(E,true);if(!ac.popup.visible()){W.removeAttr(N)}}},open:function(ad){if(Y.trigger(L,M)){ad.preventDefault()}else{if(W.val()!==Y._oldText){V=p(W.val(),ab.parseFormats,ab.culture);Y.dateView[V?"current":"value"](V)}T.attr(E,false);W.attr(x,true).attr(N,X._dateViewID);Y._updateARIA(V)}}}));T=X.div;aa=ab.min.getTime();Y.timeView=ac=new r({id:U,value:ab.value,anchor:Y.wrapper,animation:ab.animation,format:ab.timeFormat,culture:ab.culture,height:ab.height,interval:ab.interval,min:new j(s),max:new j(R),dates:aa===ab.max.getTime()?[new Date(aa)]:[],parseFormats:ab.parseFormats,change:function(ae,ad){ae=ac._parse(ae);if(ae<ab.min){ae=new j(+ab.min);ac.options.min=ae}else{if(ae>ab.max){ae=new j(+ab.max);ac.options.max=ae}}if(ad){Y._timeSelected=true;Y._change(ae)}else{W.val(z.toString(ae,ab.format,ab.culture));X.value(ae);Y._updateARIA(ae)}},close:function(ad){if(Y.trigger(Q,o)){ad.preventDefault()}else{Z.attr(E,true);W.attr(x,false);if(!X.popup.visible()){W.removeAttr(N)}}},open:function(ad){ac._adjustListWidth();if(Y.trigger(L,o)){ad.preventDefault()}else{if(W.val()!==Y._oldText){V=p(W.val(),ab.parseFormats,ab.culture);Y.timeView.value(V)}Z.attr(E,false);W.attr(x,true).attr(N,ac._timeViewID);ac.options.active(ac.current())}},active:function(ad){W.removeAttr(S);if(ad){W.attr(S,ac._optionID)}}});Z=ac.ul},_icons:function(){var W=this;var V=W.element;var T=W.options;var U;U=V.next("span.k-select");if(!U[0]){U=y('<span unselectable="on" class="k-select"><span class="k-link k-link-date" aria-label="'+T.dateButtonText+'"><span unselectable="on" class="k-icon k-i-calendar"></span></span><span class="k-link k-link-time" aria-label="'+T.timeButtonText+'"><span unselectable="on" class="k-icon k-i-clock"></span></span></span>').insertAfter(V)}U=U.children();U=U.children();W._dateIcon=U.eq(0).attr("aria-controls",W.dateView._dateViewID);W._timeIcon=U.eq(1).attr("aria-controls",W.timeView._timeViewID)},_wrapper:function(){var U=this,T=U.element,V;V=T.parents(".k-datetimepicker");if(!V[0]){V=T.wrap(H).parent().addClass("k-picker-wrap k-state-default");V=V.wrap(H).parent()}V[0].style.cssText=T[0].style.cssText;T.css({width:"100%",height:T[0].style.height});U.wrapper=V.addClass("k-widget k-datetimepicker k-header").addClass(T[0].className);U._inputWrapper=y(V[0].firstChild)},_reset:function(){var V=this,T=V.element,W=T.attr("form"),U=W?y("#"+W):T.closest("form");if(U[0]){V._resetHandler=function(){V.value(T[0].defaultValue);V.max(V._initialOptions.max);V.min(V._initialOptions.min)};V._form=U.on("reset",V._resetHandler)}},_template:function(){this._ariaTemplate=z.template(this.options.ARIATemplate)},_calculateMidnight:function(U,T){return l(U)+l(T)===0},_updateARIA:function(U){var T;var V=this;var W=V.dateView.calendar;V.element.removeAttr(S);if(W){T=W._cell;T.attr("aria-label",V._ariaTemplate({current:U||W.current()}));V.element.attr(S,T.attr("id"))}}});function t(T){var U=new Date(2100,0,1);U.setMinutes(-T);return U}function B(T){T.preventDefault()}function O(T){var U=z.getCulture(T.culture).calendars.standard.patterns,W=!T.parseFormats.length,V;T.format=h(T.format||U.g);T.timeFormat=V=h(T.timeFormat||U.t);z.DateView.normalize(T);if(W){T.parseFormats.unshift("yyyy-MM-ddTHH:mm:ss")}if(y.inArray(V,T.parseFormats)===-1){T.parseFormats.splice(1,0,V)}}F.plugin(J)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.splitter",["kendo.resizable"],a)}(function(){var a={id:"splitter",name:"Splitter",category:"web",description:"The Splitter widget provides an easy way to create a dynamic layout of resizable and collapsible panes.",depends:["resizable"]};(function(i,k){var v=window.kendo,u=v.ui,s=v.keys,C=i.extend,z=i.proxy,f=u.Widget,D=/^\d+(\.\d+)?px$/i,F=/^\d+(\.\d+)?%$/i,B=".kendoSplitter",d="expand",g="collapse",t="contentLoad",m="error",o="resize",I="layoutChange",J="horizontal",x="vertical",A="mouseenter",j="click",H="pane",n="mouseleave",p="k-state-focused",h="k-"+H,l="."+h;function w(K){return F.test(K)}function y(K){return D.test(K)||/^\d+$/.test(K)}function q(K){return !w(K)&&!y(K)}function E(L,M){var K=parseInt(L,10);if(w(L)){K=Math.floor(K*M/100)}return K}function G(K,L){return function(P,O){var N=this.element.find(P).data(H);if(arguments.length==1){return N[K]}N[K]=O;if(L){var M=this.element.data("kendo"+this.options.name);M.resize(true)}}}var e=f.extend({init:function(L,K){var M=this,N;f.fn.init.call(M,L,K);M.wrapper=M.element;N=M.options.orientation.toLowerCase()!=x;M.orientation=N?J:x;M._dimension=N?"width":"height";M._keys={decrease:N?s.LEFT:s.UP,increase:N?s.RIGHT:s.DOWN};M._resizeStep=10;M._marker=v.guid().substring(0,8);M._initPanes();M.resizing=new b(M);M.element.triggerHandler("init"+B)},events:[d,g,t,m,o,I],_addOverlays:function(){this._panes().append("<div class='k-splitter-overlay k-overlay' />")},_removeOverlays:function(){this._panes().children(".k-splitter-overlay").remove()},_attachEvents:function(){var L=this,K=L.options.orientation;L.element.children(".k-splitbar-draggable-"+K).on("keydown"+B,z(L._keydown,L)).on("mousedown"+B,function(M){M.currentTarget.focus()}).on("focus"+B,function(M){i(M.currentTarget).addClass(p)}).on("blur"+B,function(M){i(M.currentTarget).removeClass(p);if(L.resizing){L.resizing.end()}}).on(A+B,function(){i(this).addClass("k-splitbar-"+L.orientation+"-hover")}).on(n+B,function(){i(this).removeClass("k-splitbar-"+L.orientation+"-hover")}).on("mousedown"+B,z(L._addOverlays,L)).end().children(".k-splitbar").on("dblclick"+B,z(L._togglePane,L)).children(".k-collapse-next, .k-collapse-prev").on(j+B,L._arrowClick(g)).end().children(".k-expand-next, .k-expand-prev").on(j+B,L._arrowClick(d)).end().end();i(window).on("resize"+B+L._marker,z(L.resize,L,false));i(document).on("mouseup"+B+L._marker,z(L._removeOverlays,L))},_detachEvents:function(){var K=this;K.element.children(".k-splitbar-draggable-"+K.orientation).off(B).end().children(".k-splitbar").off("dblclick"+B).children(".k-collapse-next, .k-collapse-prev, .k-expand-next, .k-expand-prev").off(B);i(window).off(B+K._marker);i(document).off(B+K._marker)},options:{name:"Splitter",orientation:J,panes:[]},destroy:function(){f.fn.destroy.call(this);this._detachEvents();if(this.resizing){this.resizing.destroy()}v.destroy(this.element);this.wrapper=this.element=null},_keydown:function(N){var M=this,S=N.keyCode,P=M.resizing,O=i(N.currentTarget),L=M._keys,R=S===L.increase,Q=S===L.decrease,K;if(R||Q){if(N.ctrlKey){K=O[Q?"next":"prev"]();if(P&&P.isResizing()){P.end()}if(!K[M._dimension]()){M._triggerAction(d,K)}else{M._triggerAction(g,O[Q?"prev":"next"]())}}else{if(P){P.move((Q?-1:1)*M._resizeStep,O)}}N.preventDefault()}else{if(S===s.ENTER&&P){P.end();N.preventDefault()}}},_initPanes:function(){var K=this.options.panes||[];var L=this;this.element.addClass("k-widget").addClass("k-splitter").children().each(function(M,N){if(N.nodeName.toLowerCase()!="script"){L._initPane(N,K[M])}});this.resize()},_initPane:function(L,K){L=i(L).attr("role","group").addClass(h);L.data(H,K?K:{}).toggleClass("k-scrollable",K?K.scrollable!==false:true);this.ajaxRequest(L)},ajaxRequest:function(O,K,N){var L=this,M;O=L.element.find(O);M=O.data(H);K=K||M.contentUrl;if(K){O.append("<span class='k-icon k-i-loading k-pane-loading' />");if(v.isLocalUrl(K)){jQuery.ajax({url:K,data:N||{},type:"GET",dataType:"html",success:function(P){L.angular("cleanup",function(){return{elements:O.get()}});O.html(P);L.angular("compile",function(){return{elements:O.get()}});L.trigger(t,{pane:O[0]})},error:function(Q,P){L.trigger(m,{pane:O[0],status:P,xhr:Q})}})}else{O.removeClass("k-scrollable").html("<iframe src='"+K+"' frameborder='0' class='k-content-frame'>This page requires frames in order to show content</iframe>")}}},_triggerAction:function(K,L){if(!this.trigger(K,{pane:L[0]})){this[K](L[0])}},_togglePane:function(N){var K=this,M=i(N.target),L;if(M.closest(".k-splitter")[0]!=K.element[0]){return}L=M.children(".k-icon:not(.k-resize-handle)");if(L.length!==1){return}if(L.is(".k-collapse-prev")){K._triggerAction(g,M.prev())}else{if(L.is(".k-collapse-next")){K._triggerAction(g,M.next())}else{if(L.is(".k-expand-prev")){K._triggerAction(d,M.prev())}else{if(L.is(".k-expand-next")){K._triggerAction(d,M.next())}}}}},_arrowClick:function(L){var K=this;return function(N){var M=i(N.target),O;if(M.closest(".k-splitter")[0]!=K.element[0]){return}if(M.is(".k-"+L+"-prev")){O=M.parent().prev()}else{O=M.parent().next()}K._triggerAction(L,O)}},_updateSplitBar:function(P,Q,N){var L=function(U,V){return V?"<div class='k-icon "+U+"' />":""},K=this.orientation,T=Q.resizable!==false&&N.resizable!==false,R=Q.collapsible,M=Q.collapsed,O=N.collapsible,S=N.collapsed;P.addClass("k-splitbar k-state-default k-splitbar-"+K).attr("role","separator").attr("aria-expanded",!(M||S)).removeClass("k-splitbar-"+K+"-hover").toggleClass("k-splitbar-draggable-"+K,T&&!M&&!S).toggleClass("k-splitbar-static-"+K,!T&&!R&&!O).html(L("k-collapse-prev k-i-arrow-60-up",R&&!M&&!S&&K==x)+L("k-collapse-prev k-i-arrow-60-left",R&&!M&&!S&&K==J)+L("k-expand-prev k-i-arrow-60-down",R&&M&&!S&&K==x)+L("k-expand-prev k-i-arrow-60-right",R&&M&&!S&&K==J)+L("k-resize-handle k-i-hbar",T&&K==x)+L("k-resize-handle k-i-vbar",T&&K==J)+L("k-collapse-next k-i-arrow-60-down",O&&!S&&!M&&K==x)+L("k-collapse-next k-i-arrow-60-right",O&&!S&&!M&&K==J)+L("k-expand-next k-i-arrow-60-up",O&&S&&!M&&K==x)+L("k-expand-next k-i-arrow-60-left",O&&S&&!M&&K==J));if(!T&&!R&&!O){P.removeAttr("tabindex")}},_updateSplitBars:function(){var K=this;this.element.children(".k-splitbar").each(function(){var N=i(this),M=N.prevAll(l).first().data(H),L=N.nextAll(l).first().data(H);if(!L){return}K._updateSplitBar(N,M,L)})},_removeSplitBars:function(){this.element.children(".k-splitbar").remove()},_panes:function(){if(!this.element){return i()}return this.element.children(l)},_resize:function(){var R=this,L=R.element,Q=L.children(l),P=R.orientation==J,U=L.children(".k-splitbar"),Z=U.length,O=P?"width":"height",V=L[O]();R.wrapper.addClass("k-splitter-resizing");if(Z===0){Z=Q.length-1;Q.slice(0,Z).after("<div tabindex='0' class='k-splitbar' data-marker='"+R._marker+"' />");R._updateSplitBars();U=L.children(".k-splitbar")}else{R._updateSplitBars()}U.each(function(){V-=this[P?"offsetWidth":"offsetHeight"]});var K=0,X=0,ab=i();Q.css({position:"absolute",top:0})[O](function(){var ae=i(this),ac=ae.data(H)||{},ad;ae.removeClass("k-state-collapsed");if(ac.collapsed){ad=ac.collapsedSize?E(ac.collapsedSize,V):0;ae.css("overflow","hidden").addClass("k-state-collapsed")}else{if(q(ac.size)){ab=ab.add(this);return}else{ad=E(ac.size,V)}}X++;K+=ad;return ad});V-=K;var T=ab.length,N=Math.floor(V/T);ab.slice(0,T-1).css(O,N).end().eq(T-1).css(O,V-(T-1)*N);var M=0,S=P?"height":"width",aa=P?"left":"top",Y=P?"offsetWidth":"offsetHeight";if(T===0){var W=Q.filter(function(){return !(i(this).data(H)||{}).collapsed}).last();W[O](V+W[0][Y])}L.children().css(S,L[S]()).each(function(ac,ad){if(ad.tagName.toLowerCase()!="script"){ad.style[aa]=Math.floor(M)+"px";M+=ad[Y]}});R._detachEvents();R._attachEvents();R.wrapper.removeClass("k-splitter-resizing");v.resize(Q);R.trigger(I)},toggle:function(N,K){var L=this,M;N=L.element.find(N);M=N.data(H);if(!K&&!M.collapsible){return}if(arguments.length==1){K=M.collapsed===k?false:M.collapsed}M.collapsed=!K;if(M.collapsed){N.css("overflow","hidden")}else{N.css("overflow","")}L.resize(true)},collapse:function(K){this.toggle(K,false)},expand:function(K){this.toggle(K,true)},_addPane:function(L,K,N){var M=this;if(N.length){M.options.panes.splice(K,0,L);M._initPane(N,L);M._removeSplitBars();M.resize(true)}return N},append:function(K){K=K||{};var L=this,M=i("<div />").appendTo(L.element);return L._addPane(K,L.options.panes.length,M)},insertBefore:function(L,M){M=i(M);L=L||{};var N=this,K=N.wrapper.children(".k-pane").index(M),O=i("<div />").insertBefore(i(M));return N._addPane(L,K,O)},insertAfter:function(L,M){M=i(M);L=L||{};var N=this,K=N.wrapper.children(".k-pane").index(M),O=i("<div />").insertAfter(i(M));return N._addPane(L,K+1,O)},remove:function(L){L=i(L);var K=this;if(L.length){v.destroy(L);L.each(function(M,N){K.options.panes.splice(K.wrapper.children(".k-pane").index(N),1);i(N).remove()});K._removeSplitBars();if(K.options.panes.length){K.resize(true)}}return K},size:G("size",true),min:G("min"),max:G("max")});u.plugin(e);var c={sizingProperty:"height",sizingDomProperty:"offsetHeight",alternateSizingProperty:"width",positioningProperty:"top",mousePositioningProperty:"pageY"};var r={sizingProperty:"width",sizingDomProperty:"offsetWidth",alternateSizingProperty:"height",positioningProperty:"left",mousePositioningProperty:"pageX"};function b(M){var L=this,K=M.orientation;L.owner=M;L._element=M.element;L.orientation=K;C(L,K===J?r:c);L._resizable=new v.ui.Resizable(M.element,{orientation:K,handle:".k-splitbar-draggable-"+K+"[data-marker="+M._marker+"]",hint:z(L._createHint,L),start:z(L._start,L),max:z(L._max,L),min:z(L._min,L),invalidClass:"k-restricted-size-"+K,resizeend:z(L._stop,L)})}b.prototype={press:function(K){this._resizable.press(K)},move:function(L,K){if(!this.pressed){this.press(K);this.pressed=true}if(!this._resizable.target){this._resizable.press(K)}this._resizable.move(L)},end:function(){this._resizable.end();this.pressed=false},destroy:function(){this._resizable.destroy();this._resizable=this._element=this.owner=null},isResizing:function(){return this._resizable.resizing},_createHint:function(L){var K=this;return i("<div class='k-ghost-splitbar k-ghost-splitbar-"+K.orientation+" k-state-default' />").css(K.alternateSizingProperty,L[K.alternateSizingProperty]())},_start:function(T){var Q=this,R=i(T.currentTarget),W=R.prev(),N=R.next(),L=W.data(H),K=N.data(H),S=parseInt(W[0].style[Q.positioningProperty],10),M=parseInt(N[0].style[Q.positioningProperty],10)+N[0][Q.sizingDomProperty]-R[0][Q.sizingDomProperty],Y=parseInt(Q._element.css(Q.sizingProperty),10),X=function(Z){var aa=parseInt(Z,10);return(y(Z)?aa:Y*aa/100)||0},V=X(L.min),P=X(L.max)||M-S,U=X(K.min),O=X(K.max)||M-S;Q.previousPane=W;Q.nextPane=N;Q._maxPosition=Math.min(M-U,S+P);Q._minPosition=Math.max(S+V,M-O)},_max:function(){return this._maxPosition},_min:function(){return this._minPosition},_stop:function(T){var R=this,S=i(T.currentTarget),M=R.owner;M._panes().children(".k-splitter-overlay").remove();if(T.keyCode!==v.keys.ESC){var O=T.position,V=S.prev(),P=S.next(),N=V.data(H),L=P.data(H),K=O-parseInt(V[0].style[R.positioningProperty],10),U=parseInt(P[0].style[R.positioningProperty],10)+P[0][R.sizingDomProperty]-O-S[0][R.sizingDomProperty],Q=R._element.children(l).filter(function(){return q(i(this).data(H).size)}).length;if(!q(N.size)||Q>1){if(q(N.size)){Q--}N.size=K+"px"}if(!q(L.size)||Q>1){L.size=U+"px"}M.resize(true)}return false}}}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.dialog",["kendo.core","kendo.popup"],a)}(function(){var a={id:"dialog",name:"Dialog",category:"web",description:"The dialog widget is a modal popup that brings information to the user.",depends:["core","popup"]};(function(L,v){var M=window.kendo,c=M.Class,k=M.ui.Widget,X=L.proxy,l=M.template,F=M.keys,w=L.isFunction,P="kendoWindow",N=".k-dialog",I=".k-window",s=".k-dialog-close",C="k-content",K=".k-content",Y="k-dialog-titleless",B=".k-dialog-title",z=".k-window-titlebar",r=".k-dialog-buttongroup",m=".k-button",E="k-alert",n="k-confirm",H="k-prompt",S=".k-textbox",u=".k-overlay",ac=":visible",p="zIndex",U="body",y="initOpen",W="open",aa="close",d="show",q="hide",j="width",i=100,D={okText:"OK",cancel:"Cancel"},G=Math.ceil,e,O=":not(link,meta,script,style)";function T(ad){return typeof ad!="undefined"}function Z(af,ad,ae){return Math.max(Math.min(parseInt(af,10),ae===Infinity?ae:parseInt(ae,10)),parseInt(ad,10))}function f(ad){return ad.keyCode==F.ENTER||ad.keyCode==F.SPACEBAR}var h=k.extend({init:function(ae,ad){var af=this;k.fn.init.call(af,ae,ad);af._init(af.element,af.options);M.notify(af)},_init:function(ae,ad){var af=this,ag;af._centerCallback=X(af._center,af);af.appendTo=L(U);if(!T(ad.visible)||ad.visible===null){ad.visible=ae.is(ac)}if(af.wrapperTemplate===v){af.wrapperTemplate=e.wrapper}af._createDialog();ag=af.wrapper=ae.closest(N);if(ad._defaultFocus===v){af._defaultFocus=ae[0]}af._tabindex(ae);af._dimensions();this._tabKeyTrap=new g(ag);if(!af.options.visible){af.wrapper.hide()}else{af.toFront();af._triggerInitOpen();af.trigger(W);if(ad.modal){af._overlay(ag.is(ac)).css({opacity:0.5});af._focusDialog()}}if(ad.closable){ag.autoApplyNS(P);ae.autoApplyNS(P);ag.find(s).on("click",X(af._closeClick,af)).on("keydown",X(af._closeKeyHandler,af));ae.on("keydown",X(af._keydown,af))}},_dimensions:function(){var ai=this,ak=ai.wrapper,ae=ai.options,ag=ae.width,ad=ae.height,ah=["minWidth","minHeight","maxWidth","maxHeight"];for(var af=0;af<ah.length;af++){var aj=ae[ah[af]];if(aj&&aj!=Infinity){ak.css(ah[af],aj)}}this._setElementMaxHeight();if(ag){if(ag.toString().indexOf("%")>0){ak.width(ag)}else{ak.width(Z(ag,ae.minWidth,ae.maxWidth))}}if(ad){if(ad.toString().indexOf("%")>0){ak.height(ad)}else{ak.height(Z(ad,ae.minHeight,ae.maxHeight))}this._setElementHeight()}},_setElementMaxHeight:function(){var ag=this,ae=ag.element,af=ag.options.maxHeight,ad,ah;if(af!=Infinity){ad=ag._paddingBox(ae);ah=parseFloat(af,10)-ag._uiHeight()-ad.vertical;if(ah>0){ae.css({maxHeight:G(ah)+"px",overflow:"hidden"})}}},_paddingBox:function(ae){var af=parseFloat(ae.css("padding-top"),10),ad=parseFloat(ae.css("padding-left"),10),ag=parseFloat(ae.css("padding-bottom"),10),ah=parseFloat(ae.css("padding-right"),10);return{vertical:af+ag,horizontal:ad+ah}},_setElementHeight:function(){var ah=this,af=ah.element,ad=ah.options.height,ae=ah._paddingBox(af),ag=parseFloat(ad,10)-ah._uiHeight()-ae.vertical;if(ag>0){ah.element.css({height:G(ag)+"px",overflow:"hidden"})}},_uiHeight:function(){var ae=this,ai=ae.wrapper,ad=ai.children(r),ah=ad[0]&&ad[0].offsetHeight||0,ag=ai.children(z),af=ag[0]&&ag[0].offsetHeight||0;return ah+af},_overlay:function(ae){var ad=this.appendTo.children(u),af=this.wrapper;if(!ad.length){ad=L(e.overlay)}ad.insertBefore(af[0]).toggle(ae).css(p,parseInt(af.css(p),10)-1);if(ae){this._waiAriaOverlay()}else{this._removeWaiAriaOverlay()}return ad},_waiAriaOverlay:function(){var ad=this.wrapper;this._overlayedNodes=ad.prevAll(O).add(ad.nextAll(O)).each(function(){var ae=L(this);ae.data("ariaHidden",ae.attr("aria-hidden"));ae.attr("aria-hidden","true")})},_removeWaiAriaOverlay:function(){return this._overlayedNodes&&this._overlayedNodes.each(function(){var ad=L(this);var ae=ad.data("ariaHidden");if(ae){ad.attr("aria-hidden",ae)}else{ad.removeAttr("aria-hidden")}})},_closeClick:function(ad){ad.preventDefault();this.close()},_closeKeyHandler:function(ad){if(f(ad)||ad.keyCode==F.ESC){this.close()}},_keydown:function(ag){var ae=this,ad=ae.options,af=ag.keyCode;if(af==F.ESC&&!ae._closing&&ad.closable){ae.close()}},_createDialog:function(){var ag=this,af=ag.element,ae=ag.options,ad=M.support.isRtl(af),ai=L(e.titlebar(ae)),ah=(af.id||M.guid())+"_title",aj=L(ag.wrapperTemplate(ae));aj.toggleClass("k-rtl",ad);af.addClass(C);ag.appendTo.append(aj);if(ae.closable!==false){if(ae.title!==false){ai.append(e.close(ae))}else{aj.append(e.close(ae))}}if(ae.title!==false){aj.append(ai);ai.attr("id",ah);aj.attr("aria-labelledby",ah)}else{aj.addClass(Y)}aj.append(af);if(ae.content){M.destroy(af.children());af.html(ae.content)}if(ae.actions.length){ag._createActionbar(aj)}},_createActionbar:function(ag){var af=this.options.buttonLayout==="stretched";var ae=af?"stretched":"normal";var ad=L(e.actionbar({buttonLayout:ae}));this._addButtons(ad);if(af){this._normalizeButtonSize(ad)}ag.append(ad)},_addButtons:function(al){var ak=this,ae=ak.options,ag=X(ak._actionClick,ak),am=X(ak._actionKeyHandler,ak),ai=ak.options.actions,af=ai.length,ao=i/af,ah,an;for(var aj=0;aj<af;aj++){ah=ai[aj];an=ak._mergeTextWithOptions(ah);var ad=L(e.action(ah)).autoApplyNS(P).html(an).appendTo(al).data("action",ah.action).on("click",ag).on("keydown",am);if(ae.buttonLayout==="stretched"){ad.css(j,ao+"%")}}},_mergeTextWithOptions:function(ad){var ae=ad.text;return ae?l(ae)(this.options):""},_normalizeButtonSize:function(af){var ah=this,ag=ah.options,ad=af.children(m+":last"),ae=parseFloat(ad[0].style[j]),ai=i-ag.actions.length*ae;if(ai>0){ad.css(j,ae+ai+"%")}},_tabindex:function(ag){var ae=this;var ai=ae.wrapper;var af=ai.find(s);var ah=ai.find(r+" "+m);k.fn._tabindex.call(this,ag);var ad=ag.attr("tabindex");af.attr("tabIndex",ad);ah.attr("tabIndex",ad)},_actionClick:function(ad){this._runActionBtn(ad.currentTarget)},_actionKeyHandler:function(ad){if(f(ad)){this._runActionBtn(ad.currentTarget)}else{if(ad.keyCode==F.ESC){this.close()}}},_runActionBtn:function(ag){var ae=this;if(ae._closing){return}var af=L(ag).data("action"),ad=w(af)&&af({sender:ae})===false;if(!ad){ae.close()}},open:function(){var ai=this,aj=ai.wrapper,ah=this._animationOptions(W),af=ai.options,ae,ag;this._triggerInitOpen();if(!ai.trigger(W)){if(ai._closing){aj.kendoStop(true,true)}ai._closing=false;ai.toFront();af.visible=true;if(af.modal){ag=!!ai._modals().length;ae=ai._overlay(ag);ae.kendoStop(true,true);if(ah.duration&&M.effects.Fade&&!ag){var ad=M.fx(ae).fadeIn();ad.duration(ah.duration||0);ad.endValue(0.5);ad.play()}else{ae.css("opacity",0.5)}ae.show()}aj.show().kendoStop().kendoAnimate({effects:ah.effects,duration:ah.duration,complete:X(ai._openAnimationEnd,ai)});aj.show()}return ai},_animationOptions:function(af){var ae=this.options.animation;var ad={open:{effects:{}},close:{hide:true,effects:{}}};return ae&&ae[af]||ad[af]},_openAnimationEnd:function(){if(this.options.modal){this._focusDialog()}this.trigger(d)},_triggerInitOpen:function(){if(!T(this._initOpenTriggered)){this._initOpenTriggered=true;this.trigger(y)}},toFront:function(){var ae=this,ag=ae.wrapper,af=+ag.css(p),ad=af;ae.center();L(I).each(function(aj,ai){var ah=L(ai),ak=ah.css(p);if(!isNaN(ak)){af=Math.max(+ak,af)}});if(!ag[0].style.zIndex||ad<af){ag.css(p,af+2)}ae.element.find("> .k-overlay").remove();ag=null;return ae},close:function(){this._close(true);this._stopCenterOnResize();return this},_close:function(ah){var af=this,ai=af.wrapper,ad=af.options,ae=this._animationOptions("open"),ag=this._animationOptions("close");if(ai.is(ac)&&!af.trigger(aa,{userTriggered:!ah})){if(af._closing){return}af._closing=true;ad.visible=false;this._removeOverlay();ai.kendoStop().kendoAnimate({effects:ag.effects||ae.effects,reverse:ag.reverse===true,duration:ag.duration,complete:X(this._closeAnimationEnd,this)})}return af},center:function(){this._center();this._centerOnResize()},_center:function(){var ag=this,aj=ag.wrapper,ae=L(window),ah=0,ai=0,af=ai+Math.max(0,(ae.width()-aj.width())/2),ad=ah+Math.max(0,(ae.height()-aj.height()-parseInt(aj.css("paddingTop"),10))/2);aj.css({left:af,top:ad});return ag},_centerOnResize:function(){if(this._trackResize){return}M.onResize(this._centerCallback);this._trackResize=true},_stopCenterOnResize:function(){M.unbindResize(this._centerCallback);this._trackResize=false},_removeOverlay:function(){var ae=this._modals();var ad=this.options;var af=ad.modal&&!ae.length;if(af){this._overlay(false).remove()}else{if(ae.length){this._object(ae.last())._overlay(true)}}},_closeAnimationEnd:function(){var ae=this;ae._closing=false;ae.wrapper.hide().css("opacity","");ae.trigger(q);if(ae.options.modal){var ad=ae._object(ae._modals().last());if(ad){ad.toFront()}}},_modals:function(){var ad=this;var ae=L(I).filter(function(){var ah=L(this);var ag=ad._object(ah);var af=ag&&ag.options;return af&&af.modal&&ad.options.appendTo==af.appendTo&&af.visible&&ah.is(ac)}).sort(function(ag,af){return +L(ag).css("zIndex")-+L(af).css("zIndex")});ad=null;return ae},_object:function(ad){var ae=ad.children(K);var af=M.widgetInstance(ae);if(af){return af}return v},destroy:function(){var ad=this;ad._destroy();k.fn.destroy.call(ad);ad.wrapper.remove();ad.wrapper=ad.element=L()},_destroy:function(){var ae=this;var ad="."+P;ae.wrapper.off(ad);ae.element.off(ad);ae.wrapper.find(s+","+r+" > "+m).off(ad);ae._stopCenterOnResize()},title:function(ae){var af=this,ai=af.wrapper,ad=af.options,ag=ai.children(z),ah=ag.children(B);if(!arguments.length){return ah.html()}if(ae===false){ag.remove();ai.addClass(Y)}else{if(!ag.length){ag=L(e.titlebar(ad)).prependTo(ai);ah=ag.children(B);ai.removeClass(Y)}ah.html(ae)}af.options.title=ae;return af},content:function(ad,ag){var af=this,ae=af.wrapper.children(K);if(!T(ad)){return ae.html()}this.angular("cleanup",function(){return{elements:ae.children()}});M.destroy(ae.children());ae.html(ad);this.angular("compile",function(){var ah=[];for(var ai=ae.length;--ai>=0;){ah.push({dataItem:ag})}return{elements:ae.children(),data:ah}});af.options.content=ad;return af},_focusDialog:function(){if(this._defaultFocus){this._focus(this._defaultFocus)}this._tabKeyTrap.trap()},_focus:function(ad){if(ad){ad.focus()}},events:[y,W,aa,d,q],options:{title:"",buttonLayout:"stretched",actions:[],modal:true,width:null,height:null,minWidth:0,minHeight:0,maxWidth:Infinity,maxHeight:Infinity,content:null,visible:null,appendTo:U,closable:true}});var x=h.extend({options:{name:"Dialog",messages:{close:"Close"}}});M.ui.plugin(x);var o=h.extend({_init:function(ae,ad){var af=this;af.wrapperTemplate=e.alertWrapper;ad._defaultFocus=null;af._ensureContentId(ae);h.fn._init.call(af,ae,ad);af.bind(q,X(af.destroy,af));af._ariaDescribedBy();af._initFocus()},_ensureContentId:function(ad){var ae=L(ad);if(!ae.attr("id")){ae.attr("id",M.guid()+"_k-popup")}},_ariaDescribedBy:function(){this.wrapper.attr("aria-describedby",this.element.attr("id"))},_initFocus:function(){var ad=this.options;this._defaultFocus=this._chooseEntryFocus();if(this._defaultFocus&&ad.visible&&ad.modal){this._focusDialog()}},_chooseEntryFocus:function(){return this.wrapper.find(r+" > "+m)[0]},options:{title:window.location.host,closable:false,messages:D}});var A=o.extend({_init:function(ae,ad){var af=this;o.fn._init.call(af,ae,ad);af.wrapper.addClass(E)},options:{name:"Alert",modal:true,actions:[{text:"#= messages.okText #"}]}});M.ui.plugin(A);var V=function(ad){return L(e.alert).kendoAlert({content:ad}).data("kendoAlert").open()};var R=o.extend({_init:function(ae,ad){var af=this;o.fn._init.call(af,ae,ad);af.wrapper.addClass(n);af.result=L.Deferred()},options:{name:"Confirm",modal:true,actions:[{text:"#= messages.okText #",primary:true,action:function(ad){ad.sender.result.resolve()}},{text:"#= messages.cancel #",action:function(ad){ad.sender.result.reject()}}]}});M.ui.plugin(R);var J=function(ae){var ad=L(e.confirm).kendoConfirm({content:ae}).data("kendoConfirm").open();return ad.result};var t=o.extend({_init:function(ae,ad){var af=this;o.fn._init.call(af,ae,ad);af.wrapper.addClass(H);af._createPrompt();af.result=L.Deferred()},_createPrompt:function(){var ad=this.options.value,ae=L(e.promptInputContainer).insertAfter(this.element);if(ad){ae.children(S).val(ad)}this._defaultFocus=this._chooseEntryFocus();this._focusDialog()},_chooseEntryFocus:function(){return this.wrapper.find(S)[0]},options:{name:"Prompt",modal:true,value:"",actions:[{text:"#= messages.okText #",primary:true,action:function(af){var ad=af.sender,ae=ad.wrapper.find(S).val();ad.result.resolve(ae)}},{text:"#= messages.cancel #",action:function(af){var ad=af.sender,ae=ad.wrapper.find(S).val();af.sender.result.reject(ae)}}]}});M.ui.plugin(t);var ab=function(af,ae){var ad=L(e.prompt).kendoPrompt({content:af,value:ae}).data("kendoPrompt").open();return ad.result};e={wrapper:l("<div class='k-widget k-dialog k-window' role='dialog' />"),action:l("<button type='button' class='k-button# if (data.primary) { # k-primary# } role='button' #'></button>"),titlebar:l("<div class='k-window-titlebar k-dialog-titlebar k-header'><span class='k-window-title k-dialog-title'>#= title #</span></div>"),close:l("<a role='button' href='\\#' class='k-button-bare k-dialog-action k-dialog-close' title='#= messages.close #' aria-label='#= messages.close #' tabindex='-1'><span class='k-icon k-i-close'></span></a>"),actionbar:l("<div class='k-dialog-buttongroup k-dialog-button-layout-#= buttonLayout #' role='toolbar' />"),overlay:"<div class='k-overlay' />",alertWrapper:l("<div class='k-widget k-dialog k-window' role='alertdialog' />"),alert:"<div />",confirm:"<div />",prompt:"<div />",promptInputContainer:"<div class='k-prompt-container'><input type='text' class='k-textbox' /></div>"};var b="kendoTabKeyTrap";var Q="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex], *[contenteditable]";var g=c.extend({init:function(ad){this.element=L(ad);this.element.autoApplyNS(b)},trap:function(){this.element.on("keydown",X(this._keepInTrap,this))},removeTrap:function(){this.element.kendoDestroy(b)},destroy:function(){this.element.kendoDestroy(b);this.element=v},_keepInTrap:function(ag){if(ag.which!==9){return}var af=ag.target;var ae=this.element.find(Q).filter(":visible[tabindex!=-1]");var ad=ae.length;var ai=ad-1;var ah=ae.index(af);if(ag.shiftKey){if(ah===0){ae.get(ai).focus();ag.preventDefault()}}else{if(ah===ai){ae.get(0).focus();ag.preventDefault()}}}});M.alert=V;M.confirm=J;M.prompt=ab}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.virtuallist",["kendo.data"],a)}(function(){var a={id:"virtuallist",name:"VirtualList",category:"framework",depends:["data"],hidden:true};(function(w,i){var x=window.kendo,B=x.ui,e=B.Widget,t=B.DataBoundWidget,K=w.proxy,P="k-virtual-wrap",O="k-virtual-list",D="k-virtual-content",H="k-list",z="k-group-header",c="k-virtual-item",M="k-item",A="k-height-container",F="k-group",r="k-state-selected",y="k-state-focused",l="k-state-hover",v="change",G="click",R="listBound",f="itemChange",h="activate",I="deactivate",k=".VirtualList";function p(S){return S[S.length-1]}function o(S){return S instanceof Array?S:[S]}function m(S){return typeof S==="string"||typeof S==="number"||typeof S==="boolean"}function N(U,S,T){return Math.ceil(U*S/T)}function b(V,U,T){var S=document.createElement(T||"div");if(U){S.className=U}V.appendChild(S);return S}function s(){var T=w('<div class="k-popup"><ul class="k-list"><li class="k-item"><li></ul></div>'),S;T.css({position:"absolute",left:"-200000px",visibility:"hidden"});T.appendTo(document.body);S=parseFloat(x.getComputedStyles(T.find(".k-item")[0],["line-height"])["line-height"]);T.remove();return S}function C(U,S,T){return{down:U*T,up:U*(S-1-T)}}function L(S,V){var U=(S.listScreens-1-S.threshold)*V;var T=S.threshold*V;return function(X,Y,W){if(Y>W){return Y-X.top<U}else{return X.top===0||Y-X.top>T}}}function J(S,T){return function(U){return T(S.scrollTop,U)}}function g(S){return function(U,T){S(U.items,U.index,T);return U}}function E(S,T){if(x.support.browser.msie&&x.support.browser.version<10){S.style.top=T+"px"}else{S.style.webkitTransform="translateY("+T+"px)";S.style.transform="translateY("+T+"px)"}}function n(T,S){return function(W,V){for(var X=0,U=W.length;X<U;X++){T(W[X],V[X],S);if(V[X].item){this.trigger(f,{item:w(W[X]),data:V[X].item,ns:x.ui})}}}}function Q(T,U){var S;if(U>0){S=T.splice(0,U);T.push.apply(T,S)}else{S=T.splice(U,-U);T.unshift.apply(T,S)}return S}function u(T,V,S){var U=S.template;T=w(T);if(!V.item){U=S.placeholderTemplate}this.angular("cleanup",function(){return{elements:[T]}});T.attr("data-uid",V.item?V.item.uid:"").attr("data-offset-index",V.index).html(U(V.item||{}));T.toggleClass(y,V.current);T.toggleClass(r,V.selected);T.toggleClass("k-first",V.newGroup);T.toggleClass("k-loading-item",!V.item);if(V.index!==0&&V.newGroup){w("<div class="+F+"></div>").appendTo(T).html(S.groupTemplate(V.group))}if(V.top!==i){E(T[0],V.top)}this.angular("compile",function(){return{elements:[T],data:[{dataItem:V.item,group:V.group,newGroup:V.newGroup}]}})}function q(W,V){var ab=V.length;var S=W.length;var T;var aa;var Z,X;var Y=[];var U=[];if(S){for(Z=0;Z<S;Z++){T=W[Z];aa=false;for(X=0;X<ab;X++){if(T===V[X]){aa=true;Y.push({index:Z,item:T});break}}if(!aa){U.push(T)}}}return{changed:Y,unchanged:U}}function j(S){return S&&S.state()!=="resolved"}var d=t.extend({init:function(T,S){var U=this;U.bound(false);U._fetching=false;e.fn.init.call(U,T,S);if(!U.options.itemHeight){U.options.itemHeight=s()}S=U.options;U.element.addClass(H+" "+O).attr("role","listbox");U.content=U.element.wrap("<div unselectable='on' class='"+D+"'></div>").parent();U.wrapper=U.content.wrap("<div class='"+P+"'></div>").parent();U.header=U.content.before("<div class='"+z+"'></div>").prev();U.element.on("mouseenter"+k,"li:not(.k-loading-item)",function(){w(this).addClass(l)}).on("mouseleave"+k,"li",function(){w(this).removeClass(l)});U._values=o(U.options.value);U._selectedDataItems=[];U._selectedIndexes=[];U._rangesList={};U._promisesList=[];U._optionID=x.guid();U._templates();U.setDataSource(S.dataSource);U.content.on("scroll"+k,x.throttle(function(){U._renderItems();U._triggerListBound()},S.delay));U._selectable()},options:{name:"VirtualList",autoBind:true,delay:100,height:null,listScreens:4,threshold:0.5,itemHeight:null,oppositeBuffer:1,type:"flat",selectable:false,value:[],dataValueField:null,template:"#:data#",placeholderTemplate:"loading...",groupTemplate:"#:data#",fixedGroupTemplate:"fixed header template",mapValueTo:"index",valueMapper:null},events:[v,G,R,f,h,I],setOptions:function(S){e.fn.setOptions.call(this,S);if(this._selectProxy&&this.options.selectable===false){this.element.off(G,"."+c,this._selectProxy)}else{if(!this._selectProxy&&this.options.selectable){this._selectable()}}this._templates();this.refresh()},items:function(){return w(this._items)},destroy:function(){this.wrapper.off(k);this.dataSource.unbind(v,this._refreshHandler);e.fn.destroy.call(this)},setDataSource:function(U){var S=this;var V=U||{};var T;V=w.isArray(V)?{data:V}:V;V=x.data.DataSource.create(V);if(S.dataSource){S.dataSource.unbind(v,S._refreshHandler);S._clean();S.bound(false);S._deferValueSet=true;T=S.value();S.value([]);S.mute(function(){S.value(T)})}else{S._refreshHandler=w.proxy(S.refresh,S)}S.dataSource=V.bind(v,S._refreshHandler);S.setDSFilter(V.filter());if(V.view().length!==0){S.refresh()}else{if(S.options.autoBind){V.fetch()}}},skip:function(){return this.dataSource.currentRangeStart()},_triggerListBound:function(){var T=this;var S=T.skip();if(T.bound()&&!T._selectingValue&&T._skip!==S){T._skip=S;T.trigger(R)}},_getValues:function(T){var S=this._valueGetter;return w.map(T,function(U){return S(U)})},refresh:function(X){var V=this;var W=X&&X.action;var U=W==="itemchange";var T=this.isFiltered();var S;if(V._mute){return}V._deferValueSet=false;if(!V._fetching){if(T){V.focus(0)}V._createList();if(!W&&V._values.length&&!T&&!V.options.skipUpdateOnBind){V._selectingValue=true;V.value(V._values,true).done(function(){V.bound(true);V._selectingValue=false;V._triggerListBound()})}else{V.bound(true);V._triggerListBound()}}else{if(V._renderItems){V._renderItems(true)}V._triggerListBound()}if(U||W==="remove"){S=q(V._selectedDataItems,X.items);if(S.changed.length){if(U){V.trigger("selectedItemChange",{items:S.changed})}else{V.value(V._getValues(S.unchanged))}}}V._fetching=false},removeAt:function(S){this._selectedIndexes.splice(S,1);this._values.splice(S,1);return{position:S,dataItem:this._selectedDataItems.splice(S,1)[0]}},setValue:function(S){this._values=o(S)},value:function(U,S){var T=this;if(U===i){return T._values.slice()}if(U===null){U=[]}U=o(U);if(!T._valueDeferred||T._valueDeferred.state()==="resolved"){T._valueDeferred=w.Deferred()}var V=T.options.selectable==="multiple"&&T.select().length&&U.length;if(V||!U.length){T.select(-1)}T._values=U;if(T.bound()&&!T._mute&&!T._deferValueSet||S){T._prefetchByValue(U)}return T._valueDeferred},_prefetchByValue:function(Z){var W=this,Y=W._dataView,T=W._valueGetter,S=W.options.mapValueTo,ab,V=false,aa=[];for(var U=0;U<Z.length;U++){for(var X=0;X<Y.length;X++){ab=Y[X].item;if(ab){V=m(ab)?Z[U]===ab:Z[U]===T(ab);if(V){aa.push(Y[X].index)}}}}if(aa.length===Z.length){W._values=[];W.select(aa);return}if(typeof W.options.valueMapper==="function"){W.options.valueMapper({value:this.options.selectable==="multiple"?Z:Z[0],success:function(ac){if(S==="index"){W.mapValueToIndex(ac)}else{if(S==="dataItem"){W.mapValueToDataItem(ac)}}}})}else{W.select([-1])}},mapValueToIndex:function(S){if(S===i||S===-1||S===null){S=[]}else{S=o(S)}if(!S.length){S=[-1]}else{var T=this._deselect([]).removed;if(T.length){this._triggerChange(T,[])}}this.select(S)},mapValueToDataItem:function(S){var V,U;if(S===i||S===null){S=[]}else{S=o(S)}if(!S.length){this.select([-1])}else{V=w.map(this._selectedDataItems,function(X,W){return{index:W,dataItem:X}});U=w.map(S,function(X,W){return{index:W,dataItem:X}});this._selectedDataItems=S;this._selectedIndexes=[];for(var T=0;T<this._selectedDataItems.length;T++){this._selectedIndexes.push(i)}this._triggerChange(V,U);if(this._valueDeferred){this._valueDeferred.resolve()}}},deferredRange:function(Y){var S=this.dataSource;var V=this.itemCount;var T=this._rangesList;var aa=w.Deferred();var X=[];var Z=Math.floor(Y/V)*V;var W=Math.ceil(Y/V)*V;var U=W===Z?[W]:[Z,W];w.each(U,function(ae,af){var ac=af+V;var ab=T[af];var ad;if(!ab||ab.end!==ac){ad=w.Deferred();T[af]={end:ac,deferred:ad};S._multiplePrefetch(af,V,function(){ad.resolve()})}else{ad=ab.deferred}X.push(ad)});w.when.apply(w,X).then(function(){aa.resolve()});return aa},prefetch:function(U){var V=this,T=this.itemCount,S=!V._promisesList.length;if(!j(V._activeDeferred)){V._activeDeferred=w.Deferred();V._promisesList=[]}w.each(U,function(X,W){V._promisesList.push(V.deferredRange(V._getSkip(W,T)))});if(S){w.when.apply(w,V._promisesList).done(function(){V._promisesList=[];V._activeDeferred.resolve()})}return V._activeDeferred},_findDataItem:function(S,T){var V;if(this.options.type==="group"){for(var U=0;U<S.length;U++){V=S[U].items;if(V.length<=T){T=T-V.length}else{return V[T]}}}return S[T]},_getRange:function(T,S){return this.dataSource._findRange(T,Math.min(T+S,this.dataSource.total()))},dataItemByIndex:function(U){var T=this.itemCount;var V=this._getSkip(U,T);var S=this._getRange(V,T);return this._findDataItem(S,[U-V])},selectedDataItems:function(){return this._selectedDataItems.slice()},scrollWith:function(S){this.content.scrollTop(this.content.scrollTop()+S)},scrollTo:function(S){this.content.scrollTop(S)},scrollToIndex:function(S){this.scrollTo(S*this.options.itemHeight)},focus:function(ab){var V,X,U,Y,T=this.options.itemHeight,S=this._optionID,Z=true;if(ab===i){Y=this.element.find("."+y);return Y.length?Y:null}if(typeof ab==="function"){U=this.dataSource.flatView();for(var aa=0;aa<U.length;aa++){if(ab(U[aa])){ab=aa;break}}}if(ab instanceof Array){ab=p(ab)}if(isNaN(ab)){V=w(ab);X=parseInt(w(V).attr("data-offset-index"),10)}else{X=ab;V=this._getElementByIndex(X)}if(X===-1){this.element.find("."+y).removeClass(y);this._focusedIndex=i;return}if(V.length){if(V.hasClass(y)){Z=false}if(this._focusedIndex!==i){Y=this._getElementByIndex(this._focusedIndex);Y.removeClass(y).removeAttr("id");if(Z){this.trigger(I)}}this._focusedIndex=X;V.addClass(y).attr("id",S);var W=this._getElementLocation(X);if(W==="top"){this.scrollTo(X*T)}else{if(W==="bottom"){this.scrollTo(X*T+T-this._screenHeight)}else{if(W==="outScreen"){this.scrollTo(X*T)}}}if(Z){this.trigger(h)}}else{this._focusedIndex=X;this.items().removeClass(y);this.scrollToIndex(X)}},focusIndex:function(){return this._focusedIndex},focusFirst:function(){this.scrollTo(0);this.focus(0)},focusLast:function(){var S=this.dataSource.total();this.scrollTo(this.heightContainer.offsetHeight);this.focus(S)},focusPrev:function(){var S=this._focusedIndex;var T;if(!isNaN(S)&&S>0){S-=1;this.focus(S);T=this.focus();if(T&&T.hasClass("k-loading-item")){S+=1;this.focus(S)}return S}else{S=this.dataSource.total()-1;this.focus(S);return S}},focusNext:function(){var S=this._focusedIndex;var U=this.dataSource.total()-1;var T;if(!isNaN(S)&&S<U){S+=1;this.focus(S);T=this.focus();if(T&&T.hasClass("k-loading-item")){S-=1;this.focus(S)}return S}else{S=0;this.focus(S);return S}},_triggerChange:function(T,S){T=T||[];S=S||[];if(T.length||S.length){this.trigger(v,{removed:T,added:S})}},select:function(aa){var U=this,Z,Y=U.options.selectable!=="multiple",X=j(U._activeDeferred),W=this.isFiltered(),V,ab,ac,T=[];if(aa===i){return U._selectedIndexes.slice()}if(!U._selectDeferred||U._selectDeferred.state()==="resolved"){U._selectDeferred=w.Deferred()}Z=U._getIndecies(aa);V=Y&&!W&&p(Z)===p(this._selectedIndexes);T=U._deselectCurrentValues(Z);if(T.length||!Z.length||V){U._triggerChange(T);if(U._valueDeferred){U._valueDeferred.resolve()}return U._selectDeferred.resolve().promise()}if(Z.length===1&&Z[0]===-1){Z=[]}ac=U._deselect(Z);T=ac.removed;Z=ac.indices;if(Y){X=false;if(Z.length){Z=[p(Z)]}}var S=function(){var ad=U._select(Z);U.focus(Z);U._triggerChange(T,ad);if(U._valueDeferred){U._valueDeferred.resolve()}U._selectDeferred.resolve()};ab=U.prefetch(Z);if(!X){if(ab){ab.done(S)}else{S()}}return U._selectDeferred.promise()},bound:function(S){if(S===i){return this._listCreated}this._listCreated=S},mute:function(S){this._mute=true;K(S(),this);this._mute=false},setDSFilter:function(S){this._lastDSFilter=w.extend({},S)},isFiltered:function(){if(!this._lastDSFilter){this.setDSFilter(this.dataSource.filter())}return !x.data.Query.compareFilters(this.dataSource.filter(),this._lastDSFilter)},skipUpdate:w.noop,_getElementByIndex:function(S){return this.items().filter(function(T,U){return S===parseInt(w(U).attr("data-offset-index"),10)})},_getElementByDataItem:function(U){var X=this._dataView,S=this._valueGetter,W,T;for(var V=0;V<X.length;V++){T=X[V].item&&m(X[V].item)?X[V].item===U:S(X[V].item)===S(U);if(T){W=X[V];break}}return W?this._getElementByIndex(W.index):w()},_clean:function(){this.result=i;this._lastScrollTop=i;this._skip=i;w(this.heightContainer).remove();this.heightContainer=i;this.element.empty()},_height:function(){var T=!!this.dataSource.view().length,S=this.options.height,V=this.options.itemHeight,U=this.dataSource.total();if(!T){S=0}else{if(S/V>U){S=U*V}}return S},setScreenHeight:function(){var S=this._height();this.content.height(S);this._screenHeight=S},screenHeight:function(){return this._screenHeight},_getElementLocation:function(T){var X=this.content.scrollTop(),Z=this._screenHeight,Y=this.options.itemHeight,V=T*Y,U=V+Y,W=X+Z,S;if(V===X-Y||U>X&&V<X){S="top"}else{if(V===W||V<W&&W<U){S="bottom"}else{if(V>=X&&V<=X+(Z-Y)){S="inScreen"}else{S="outScreen"}}}return S},_templates:function(){var S=this.options;var U={template:S.template,placeholderTemplate:S.placeholderTemplate,groupTemplate:S.groupTemplate,fixedGroupTemplate:S.fixedGroupTemplate};for(var T in U){if(typeof U[T]!=="function"){U[T]=x.template(U[T]||"")}}this.templates=U},_generateItems:function(T,V){var S=[],U,W=this.options.itemHeight+"px";while(V-->0){U=document.createElement("li");U.tabIndex=-1;U.className=c+" "+M;U.setAttribute("role","option");U.style.height=W;U.style.minHeight=W;T.appendChild(U);S.push(U)}return S},_saveInitialRanges:function(){var S=this.dataSource._ranges;var T=w.Deferred();T.resolve();this._rangesList={};for(var U=0;U<S.length;U++){this._rangesList[S[U].start]={end:S[U].end,deferred:T}}},_createList:function(){var U=this,T=U.content.get(0),S=U.options,V=U.dataSource;if(U.bound()){U._clean()}U._saveInitialRanges();U._buildValueGetter();U.setScreenHeight();U.itemCount=N(U._screenHeight,S.listScreens,S.itemHeight);if(U.itemCount>V.total()){U.itemCount=V.total()}U._items=U._generateItems(U.element[0],U.itemCount);U._setHeight(S.itemHeight*V.total());U.options.type=(V.group()||[]).length?"group":"flat";if(U.options.type==="flat"){U.header.hide()}else{U.header.show()}U.getter=U._getter(function(){U._renderItems(true)});U._onScroll=function(Y,X){var W=U._listItems(U.getter);return U._fixedHeader(Y,W(Y,X))};U._renderItems=U._whenChanged(J(T,U._onScroll),g(U._reorderList(U._items,w.proxy(u,U))));U._renderItems();U._calculateGroupPadding(U._screenHeight)},_setHeight:function(S){var V,U=this.heightContainer;if(!U){U=this.heightContainer=b(this.content[0],A)}else{V=U.offsetHeight}if(S!==V){U.innerHTML="";while(S>0){var T=Math.min(S,250000);b(U).style.height=T+"px";S-=T}}},_getter:function(){var S=null,X=this.dataSource,U=X.skip(),W=this.options.type,T=this.itemCount,V={};if(X.pageSize()<T){this.mute(function(){X.pageSize(T)})}return function(ad,ah){var ac=this;if(!X.inRange(ah,T)){if(S!==ah){S=ah;U=ah;if(ac._getterDeferred){ac._getterDeferred.reject()}ac._getterDeferred=ac.deferredRange(ah);ac._getterDeferred.then(function(){var aj=ac._indexConstraint(ac.content[0].scrollTop);ac._getterDeferred=null;if(ah<=aj&&aj<=ah+T){ac._fetching=true;X.range(ah,T)}})}return null}else{if(U!==ah){this.mute(function(){X.range(ah,T);U=ah})}var ai;if(W==="group"){if(!V[ah]){var af=V[ah]=[];var Z=X.view();for(var ab=0,ae=Z.length;ab<ae;ab++){var ag=Z[ab];for(var aa=0,Y=ag.items.length;aa<Y;aa++){af.push({item:ag.items[aa],group:ag.value})}}}ai=V[ah][ad-ah]}else{ai=X.view()[ad-ah]}return ai}}},_fixedHeader:function(X,V){var W=this.currentVisibleGroup,Y=this.options.itemHeight,U=Math.floor((X-V.top)/Y),T=V.items[U];if(T&&T.item){var S=T.group;if(S!==W){this.header[0].innerHTML=S||"";this.currentVisibleGroup=S}}return V},_itemMapper:function(ae,Y,ac){var ab=this.options.type,T=this.options.itemHeight,aa=this._focusedIndex,V=false,Z=false,S=false,ad=null,X=false,U=this._valueGetter;if(ab==="group"){if(ae){S=Y===0||this._currentGroup&&this._currentGroup!==ae.group;this._currentGroup=ae.group}ad=ae?ae.group:null;ae=ae?ae.item:null}if(!this.isFiltered()&&ac.length&&ae){for(var W=0;W<ac.length;W++){X=m(ae)?ac[W]===ae:ac[W]===U(ae);if(X){ac.splice(W,1);V=true;break}}}if(aa===Y){Z=true}return{item:ae?ae:null,group:ad,newGroup:S,selected:V,current:Z,index:Y,top:Y*T}},_range:function(T){var Y=this.itemCount,X=this._values.slice(),S=[],W;this._view={};this._currentGroup=null;for(var U=T,V=T+Y;U<V;U++){W=this._itemMapper(this.getter(U,T),U,X);S.push(W);this._view[W.index]=W}this._dataView=S;return S},_getDataItemsCollection:function(U,T){var S=this._range(this._listIndex(U,T));return{index:S.length?S[0].index:0,top:S.length?S[0].top:0,items:S}},_listItems:function(){var U=this._screenHeight,S=this.options;var T=L(S,U);return w.proxy(function(Y,X){var V=this.result,W=this._lastScrollTop;if(X||!V||!T(V,Y,W)){V=this._getDataItemsCollection(Y,W)}this._lastScrollTop=Y;this.result=V;return V},this)},_whenChanged:function(S,U){var T;return function(V){var W=S(V);if(W!==T){T=W;U(W,V)}}},_reorderList:function(W,S){var U=this;var T=W.length;var V=-Infinity;S=w.proxy(n(S,this.templates),this);return function(ac,ab,Z){var aa=ab-V;var Y,X;if(Z||Math.abs(aa)>=T){Y=W;X=ac}else{Y=Q(W,aa);X=aa>0?ac.slice(-aa):ac.slice(0,-aa)}S(Y,X,U.bound());V=ab}},_bufferSizes:function(){var S=this.options;return C(this._screenHeight,S.listScreens,S.oppositeBuffer)},_indexConstraint:function(S){var U=this.itemCount,V=this.options.itemHeight,T=this.dataSource.total();return Math.min(Math.max(T-U,0),Math.max(0,Math.floor(S/V)))},_listIndex:function(V,U){var T=this._bufferSizes(),S;S=V-(V>U?T.down:T.up);return this._indexConstraint(S)},_selectable:function(){if(this.options.selectable){this._selectProxy=w.proxy(this,"_clickHandler");this.element.on(G+k,"."+c,this._selectProxy)}},getElementIndex:function(S){if(!(S instanceof jQuery)){return i}return parseInt(S.attr("data-offset-index"),10)},_getIndecies:function(V){var T=[],W;if(typeof V==="function"){W=this.dataSource.flatView();for(var S=0;S<W.length;S++){if(V(W[S])){T.push(S);break}}}if(typeof V==="number"){T.push(V)}var U=this.getElementIndex(V);if(!isNaN(U)){T.push(U)}if(V instanceof Array){T=V}return T},_deselect:function(af){var aa=[],U,S,ae=this._selectedIndexes,ab=this._selectedDataItems,Z=0,ac=this.options.selectable,T=0,W=this._valueGetter,ag,Y,ah=null;af=af.slice();if(ac===true||!af.length){for(var ad=0;ad<ae.length;ad++){if(ae[ad]!==i){this._getElementByIndex(ae[ad]).removeClass(r)}else{if(ab[ad]){this._getElementByDataItem(ab[ad]).removeClass(r)}}aa.push({index:ae[ad],position:ad,dataItem:ab[ad]})}this._values=[];this._selectedDataItems=[];this._selectedIndexes=[]}else{if(ac==="multiple"){for(var X=0;X<af.length;X++){ah=null;Z=w.inArray(af[X],ae);S=this.dataItemByIndex(af[X]);if(Z===-1&&S){for(var V=0;V<ab.length;V++){Y=m(S)?ab[V]===S:W(ab[V])===W(S);if(Y){ag=this._getElementByIndex(af[X]);ah=this._deselectSingleItem(ag,V,af[X],T)}}}else{U=ae[Z];if(U!==i){ag=this._getElementByIndex(U);ah=this._deselectSingleItem(ag,Z,U,T)}}if(ah){af.splice(X,1);aa.push(ah);T++;X--}}}}return{indices:af,removed:aa}},_deselectSingleItem:function(V,T,S,W){var U;if(!V.hasClass("k-state-selected")){return}V.removeClass(r);this._values.splice(T,1);this._selectedIndexes.splice(T,1);U=this._selectedDataItems.splice(T,1)[0];return{index:S,position:T+W,dataItem:U}},_deselectCurrentValues:function(aa){var S=this.element[0].children;var X,W,U;var Z=this._values;var V=[];var Y=0;var T;if(this.options.selectable!=="multiple"||!this.isFiltered()){return[]}if(aa[0]===-1){w(S).removeClass("k-state-selected");V=w.map(this._selectedDataItems.slice(0),function(ac,ab){return{dataItem:ac,position:ab}});this._selectedIndexes=[];this._selectedDataItems=[];this._values=[];return V}for(;Y<aa.length;Y++){U=-1;W=aa[Y];X=this._valueGetter(this.dataItemByIndex(W));for(T=0;T<Z.length;T++){if(X==Z[T]){U=T;break}}if(U>-1){V.push(this.removeAt(U));w(S[W]).removeClass("k-state-selected")}}return V},_getSkip:function(T,S){var U=T<S?1:Math.floor(T/S)+1;return(U-1)*S},_select:function(W){var X=this,Z=this.options.selectable!=="multiple",S=this.dataSource,T,aa,U=this.itemCount,V=this._valueGetter,Y=[];if(Z){X._selectedIndexes=[];X._selectedDataItems=[];X._values=[]}aa=S.skip();w.each(W,function(ac,ab){var ad=X._getSkip(ab,U);X.mute(function(){S.range(ad,U);T=X._findDataItem(S.view(),[ab-ad]);X._selectedIndexes.push(ab);X._selectedDataItems.push(T);X._values.push(m(T)?T:V(T));Y.push({index:ab,dataItem:T});X._getElementByIndex(ab).addClass(r);S.range(aa,U)})});return Y},_clickHandler:function(T){var S=w(T.currentTarget);if(!T.isDefaultPrevented()&&S.attr("data-uid")){this.trigger(G,{item:S})}},_buildValueGetter:function(){this._valueGetter=x.getter(this.options.dataValueField)},_calculateGroupPadding:function(S){var V=this.items().first(),T=this.header,U=0;if(T[0]&&T[0].style.display!=="none"){if(S!=="auto"){U=x.support.scrollbar()}U+=parseFloat(V.css("border-right-width"),10)+parseFloat(V.children(".k-group").css("right"),10);T.css("padding-right",U)}}});x.ui.VirtualList=d;x.ui.plugin(d)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.scheduler.view",["kendo.core"],a)}(function(){var a={id:"scheduler.view",name:"Scheduler View",category:"web",description:"The Scheduler Common View",depends:["core"],hidden:true};kendo.ui.scheduler={};(function(y){var z=window.kendo,C=z.ui,f=C.Widget,H=z._outerHeight,s=z.keys,A=".kendoSchedulerView",u=Math;function q(P,Q){var O=[];function R(U,T){T=T[Q];if(T){var V=O[U]=O[U]||[];for(var S=0;S<T.length;S++){V.push(T[S]);R(U+1,T[S])}}}R(0,P);return O}function D(){if(z.support.cssBorderSpacing){return""}return'cellspacing="0"'}function r(P,O){if(!P.length){return""}return"<table "+D()+' class="'+y.trim("k-scheduler-table "+(O||""))+'"><tr>'+P.join("</tr><tr>")+"</tr></table>"}function N(P,O){if(!P.length){return""}return"<div style='position:relative'>"+r(P,O)+"</div>"}function B(Q,R,P){var S=[];if(P>0){for(var O=0;O<Q;O++){S.push("<th>&nbsp;</th>")}}if(R){S.push('<th class="k-scheduler-times-all-day">'+R.text+"</th>")}if(P<1){return y()}return y('<div class="k-scheduler-times">'+r(S)+"</div>")}function b(Z,X,V){var ab=[];var Y;for(var aa=0;aa<Z.length;aa++){var Q=Z[aa];var R=[];var S=X/Q.length;for(Y=0;Y<Q.length;Y++){var U=Q[Y];R.push('<th colspan="'+(U.colspan||S)+'" class="'+(U.className||"")+'">'+U.text+"</th>")}ab.push(R.join(""))}var W=[];if(V){var P=Z[Z.length-1];var T=[];var O=V.cellContent;for(Y=0;Y<P.length;Y++){T.push('<td class="'+(P[Y].className||"")+'">'+(O?O(Y):"&nbsp;")+"</td>")}W.push(T.join(""))}return y('<div class="k-scheduler-header k-state-default"><div class="k-scheduler-header-wrap">'+r(ab)+N(W,"k-scheduler-header-all-day")+"</div></div>")}function t(P,V){var W=new Array(V).join().split(",");var Q=[];var U;for(var S=0;S<P.length;S++){var O=P[S];var R=V/O.length;var T;for(U=0;U<O.length;U++){T=O[U].className||"";if(O[U].allDay){T="k-scheduler-times-all-day"}W[R*U]+='<th class="'+T+'" rowspan="'+R+'">'+O[U].text+"</th>"}}for(U=0;U<V;U++){Q.push(W[U])}if(V<1){return y()}return y('<div class="k-scheduler-times">'+r(Q)+"</div>")}function k(){return y('<div class="k-scheduler-content"><table '+D()+' class="k-scheduler-table"/></div>')}var F='<div class="k-marquee k-scheduler-marquee"><div class="k-marquee-color"></div><div class="k-marquee-text"><div class="k-label-top"></div><div class="k-label-bottom"></div></div></div>';var n=z.Class.extend({init:function(P,O){this._index=P;this._timeSlotCollections=[];this._daySlotCollections=[];this._isRtl=O},addTimeSlotCollection:function(O,P){return this._addCollection(O,P,this._timeSlotCollections)},addDaySlotCollection:function(O,P){return this._addCollection(O,P,this._daySlotCollections)},_addCollection:function(O,Q,P){var R=new E(O,Q,this._index,P.length);P.push(R);return R},timeSlotCollectionCount:function(){return this._timeSlotCollections.length},daySlotCollectionCount:function(){return this._daySlotCollections.length},daySlotByPosition:function(O,Q,P){return this._slotByPosition(O,Q,this._daySlotCollections,P)},timeSlotByPosition:function(O,Q,P){return this._slotByPosition(O,Q,this._timeSlotCollections,P)},_slotByPosition:function(X,W,S,Q){for(var V=0;V<S.length;V++){var T=S[V];for(var U=0;U<T.count();U++){var Y=T.at(U);var P=Y.offsetWidth;var aa=Y.offsetHeight;var Z;var R=Y.offsetLeft+P;var O=Y.offsetTop+aa;if(!Q){Z=T.at(U+1)}if(Z){if(Z.offsetLeft!=Y.offsetLeft){if(this._isRtl){R=Y.offsetLeft+(Y.offsetLeft-Z.offsetLeft)}else{R=Z.offsetLeft}}else{O=Z.offsetTop}}if(X>=Y.offsetLeft&&X<R&&W>=Y.offsetTop&&W<O){return Y}}}},refresh:function(){var O;for(O=0;O<this._daySlotCollections.length;O++){this._daySlotCollections[O].refresh()}for(O=0;O<this._timeSlotCollections.length;O++){this._timeSlotCollections[O].refresh()}},timeSlotRanges:function(Q,P){var R=this._timeSlotCollections;var S=this._startSlot(Q,R);if(!S.inRange&&Q>=S.slot.end){S=null}var O=S;if(Q<P){O=this._endSlot(P,R)}if(O&&!O.inRange&&P<=O.slot.start){O=null}if(S===null&&O===null){return[]}if(S===null){S={inRange:true,slot:R[O.slot.collectionIndex].first()}}if(O===null){O={inRange:true,slot:R[S.slot.collectionIndex].last()}}return this._continuousRange(M,R,S,O)},daySlotRanges:function(R,P,Q){var S=this._daySlotCollections;var T=this._startSlot(R,S,Q);if(!T.inRange&&R>=T.slot.end){T=null}var O=T;if(R<P){O=this._endSlot(P,S,Q)}if(O&&!O.inRange&&P<=O.slot.start){O=null}if(T===null&&O===null){return[]}if(T===null){do{R+=z.date.MS_PER_DAY;T=this._startSlot(R,S,Q)}while(!T.inRange&&R>=T.slot.end)}if(O===null){do{P-=z.date.MS_PER_DAY;O=this._endSlot(P,S,Q)}while(!O.inRange&&P<=O.slot.start)}return this._continuousRange(c,S,T,O)},_continuousRange:function(V,U,Q,R){var aa=Q.slot;var P=R.slot;var ac=aa.collectionIndex;var T=P.collectionIndex;var O=[];for(var Y=ac;Y<=T;Y++){var W=U[Y];var S=W.first();var ab=W.last();var Z=false;var X=false;if(Y==ac){X=!Q.inRange}if(Y==T){Z=!R.inRange}if(S.start<aa.start){S=aa}if(ab.start>P.start){ab=P}if(ac<T){if(Y==ac){Z=true}else{if(Y==T){X=true}else{Z=X=true}}}O.push(new V({start:S,end:ab,collection:W,head:Z,tail:X}))}return O},slotRanges:function(Q,R){var P=Q._startTime||z.date.toUtcTime(Q.start);var O=Q._endTime||z.date.toUtcTime(Q.end);if(R===undefined){R=Q.isMultiDay()}if(R){return this.daySlotRanges(P,O,Q.isAllDay)}return this.timeSlotRanges(P,O)},ranges:function(Q,O,R,P){if(typeof Q!="number"){Q=z.date.toUtcTime(Q)}if(typeof O!="number"){O=z.date.toUtcTime(O)}if(R){return this.daySlotRanges(Q,O,P)}return this.timeSlotRanges(Q,O)},_startCollection:function(P,Q){for(var O=0;O<Q.length;O++){var R=Q[O];if(R.startInRange(P)){return R}}return null},_endCollection:function(P,R,Q){for(var O=0;O<R.length;O++){var S=R[O];if(S.endInRange(P,Q)){return S}}return null},_getCollections:function(O){return O?this._daySlotCollections:this._timeSlotCollections},continuousSlot:function(S,O){var Q=O?-1:1;var P=this._getCollections(S.isDaySlot);var R=P[S.collectionIndex+Q];return R?R[O?"last":"first"]():undefined},firstSlot:function(){var O=this._getCollections(this.daySlotCollectionCount());return O[0].first()},lastSlot:function(){var O=this._getCollections(this.daySlotCollectionCount());return O[O.length-1].last()},upSlot:function(S,P,O){var Q=this;var R=function(U,T,V){var W=V===0;if(!P&&!U&&W&&Q.daySlotCollectionCount()){return Q._daySlotCollections[0].at(T)}};if(!this.timeSlotCollectionCount()){P=true}return this._verticalSlot(S,-1,R,O)},downSlot:function(S,P,O){var R=this;var Q=function(U,T,V){if(!P&&U&&R.timeSlotCollectionCount()){return R._timeSlotCollections[V].at(0)}};if(!this.timeSlotCollectionCount()){P=true}return this._verticalSlot(S,1,Q,O)},leftSlot:function(P,O){return this._horizontalSlot(P,-1,O)},rightSlot:function(P,O){return this._horizontalSlot(P,1,O)},_horizontalSlot:function(V,T,R){var Q=V.index;var P=V.isDaySlot;var O=V.collectionIndex;var S=this._getCollections(P);P=R?false:P;if(P){Q+=T}else{O+=T}var U=S[O];return U?U.at(Q):undefined},_verticalSlot:function(W,Q,R,P){var U=W.index;var O=W.isDaySlot;var V=W.collectionIndex;var S=this._getCollections(O);W=R(O,V,U);if(W){return W}O=P?false:O;if(O){V+=Q}else{U+=Q}var T=S[V];return T?T.at(U):undefined},_collection:function(O,Q){var P=Q?this._daySlotCollections:this._timeSlotCollections;return P[O]},_startSlot:function(Q,P,O){var S=this._startCollection(Q,P);var R=true;if(!S){S=P[0];R=false}var T=S.slotByStartDate(Q,O);if(!T){T=S.first();R=false}return{slot:T,inRange:R}},_endSlot:function(Q,P,O){var S=this._endCollection(Q,P,O);var R=true;if(!S){S=P[P.length-1];R=false}var T=S.slotByEndDate(Q,O);if(!T){T=S.last();R=false}return{slot:T,inRange:R}},getSlotCollection:function(O,P){return this[P?"getDaySlotCollection":"getTimeSlotCollection"](O)},getTimeSlotCollection:function(O){return this._timeSlotCollections[O]},getDaySlotCollection:function(O){return this._daySlotCollections[O]}});var L=z.Class.extend({init:function(O){y.extend(this,O)},innerHeight:function(){var S=this.collection;var R=this.start.index;var Q=this.end.index;var O=0;for(var P=R;P<=Q;P++){O+=S.at(P).offsetHeight}return O},events:function(){return this.collection.events()},addEvent:function(O){this.events().push(O)},startSlot:function(){if(this.start.offsetLeft>this.end.offsetLeft){return this.end}return this.start},endSlot:function(){if(this.start.offsetLeft>this.end.offsetLeft){return this.start}return this.end}});var M=L.extend({innerHeight:function(){var S=this.collection;var R=this.start.index;var Q=this.end.index;var O=0;for(var P=R;P<=Q;P++){O+=S.at(P).offsetHeight}return O},outerRect:function(Q,P,O){return this._rect("offset",Q,P,O)},_rect:function(ab,R,U,T){var aa;var O;var S;var ac;var Z=this.start;var Q=this.end;var W=z.support.isRtl(Z.element);if(typeof R!="number"){R=z.date.toUtcTime(R)}if(typeof U!="number"){U=z.date.toUtcTime(U)}if(T){aa=Z.offsetTop;O=Q.offsetTop+Q[ab+"Height"];if(W){S=Q.offsetLeft;ac=Z.offsetLeft+Z[ab+"Width"]}else{S=Z.offsetLeft;ac=Q.offsetLeft+Q[ab+"Width"]}}else{var V=R-Z.start;if(V<0){V=0}var P=Z.end-Z.start;aa=Z.offsetTop+Z[ab+"Height"]*V/P;var Y=Q.end-U;if(Y<0){Y=0}var X=Q.end-Q.start;O=Q.offsetTop+Q[ab+"Height"]-Q[ab+"Height"]*Y/X;if(W){S=Math.round(Q.offsetLeft+Q[ab+"Width"]*Y/X);ac=Math.round(Z.offsetLeft+Z[ab+"Width"]-Z[ab+"Width"]*V/P)}else{S=Math.round(Z.offsetLeft+Z[ab+"Width"]*V/P);ac=Math.round(Q.offsetLeft+Q[ab+"Width"]-Q[ab+"Width"]*Y/X)}}return{top:aa,bottom:O,left:S===0?S:S+1,right:ac}},innerRect:function(Q,P,O){return this._rect("client",Q,P,O)}});var c=L.extend({innerWidth:function(){var T=this.collection;var S=this.start.index;var R=this.end.index;var O=0;var Q=S!==R?"offsetWidth":"clientWidth";for(var P=S;P<=R;P++){O+=T.at(P)[Q]}return O}});var E=z.Class.extend({init:function(P,R,Q,O){this._slots=[];this._events=[];this._start=z.date.toUtcTime(P);this._end=z.date.toUtcTime(R);this._groupIndex=Q;this._collectionIndex=O},refresh:function(){for(var O=0;O<this._slots.length;O++){this._slots[O].refresh()}},startInRange:function(O){return this._start<=O&&O<this._end},endInRange:function(P,Q){var O=Q?P<this._end:P<=this._end;return this._start<=P&&O},slotByStartDate:function(P){var Q=P;if(typeof Q!="number"){Q=z.date.toUtcTime(P)}for(var O=0;O<this._slots.length;O++){var R=this._slots[O];if(R.startInRange(Q)){return R}}return null},slotByEndDate:function(Q,O){var R=Q;if(typeof R!="number"){R=z.date.toUtcTime(Q)}if(O){return this.slotByStartDate(Q,false)}for(var P=0;P<this._slots.length;P++){var S=this._slots[P];if(S.endInRange(R)){return S}}return null},count:function(){return this._slots.length},events:function(){return this._events},addTimeSlot:function(P,S,O,Q){var R=new w(P,S,O,this._groupIndex,this._collectionIndex,this._slots.length,Q);this._slots.push(R)},addDaySlot:function(P,S,O,Q){var R=new l(P,S,O,this._groupIndex,this._collectionIndex,this._slots.length,Q);this._slots.push(R)},first:function(){return this._slots[0]},last:function(){return this._slots[this._slots.length-1]},at:function(O){return this._slots[O]}});var g=z.Class.extend({init:function(R,T,P,S,O,Q){this.element=R;this.clientWidth=R.clientWidth;this.clientHeight=R.clientHeight;this.offsetWidth=R.offsetWidth;this.offsetHeight=R.offsetHeight;this.offsetTop=R.offsetTop;this.offsetLeft=R.offsetLeft;this.start=T;this.end=P;this.element=R;this.groupIndex=S;this.collectionIndex=O;this.index=Q;this.isDaySlot=false},refresh:function(){var O=this.element;this.clientWidth=O.clientWidth;this.clientHeight=O.clientHeight;this.offsetWidth=O.offsetWidth;this.offsetHeight=O.offsetHeight;this.offsetTop=O.offsetTop;this.offsetLeft=O.offsetLeft},startDate:function(){return z.timezone.toLocalDate(this.start)},endDate:function(){return z.timezone.toLocalDate(this.end)},startInRange:function(O){return this.start<=O&&O<this.end},endInRange:function(O){return this.start<O&&O<=this.end},startOffset:function(){return this.start},endOffset:function(){return this.end}});var w=g.extend({init:function(R,U,P,S,O,Q,T){g.fn.init.apply(this,arguments);this.isHorizontal=T?true:false},offsetX:function(O,P){if(O){return this.offsetLeft+P}else{return this.offsetLeft+P}},startInRange:function(O){return this.start<=O&&O<this.end},endInRange:function(O){return this.start<O&&O<=this.end},startOffset:function(P,V,O){if(O){return this.start}var T=y(this.element).offset();var S=this.end-this.start;var U;var R;if(this.isHorizontal){var Q=z.support.isRtl(this.element);U=P-T.left;R=Math.floor(S*(U/this.offsetWidth));if(Q){return this.start+S-R}}else{U=V-T.top;R=Math.floor(S*(U/this.offsetHeight))}return this.start+R},endOffset:function(P,V,O){if(O){return this.end}var T=y(this.element).offset();var S=this.end-this.start;var U;var R;if(this.isHorizontal){var Q=z.support.isRtl(this.element);U=P-T.left;R=Math.floor(S*(U/this.offsetWidth));if(Q){return this.start+S-R}}else{U=V-T.top;R=Math.floor(S*(U/this.offsetHeight))}return this.start+R}});var l=g.extend({init:function(R,U,P,S,O,Q,T){g.fn.init.apply(this,arguments);this.eventCount=T;this.isDaySlot=true;if(this.element.children.length){this.firstChildHeight=this.element.children[0].offsetHeight+3;this.firstChildTop=this.element.children[0].offsetTop}else{this.firstChildHeight=3;this.firstChildTop=0}},startDate:function(){var O=new Date(this.start);return z.timezone.apply(O,"Etc/UTC")},endDate:function(){var O=new Date(this.end);return z.timezone.apply(O,"Etc/UTC")},startInRange:function(O){return this.start<=O&&O<this.end},endInRange:function(O){return this.start<O&&O<=this.end}});var d;function I(){d=d?d:z.support.scrollbar();return d}z.ui.SchedulerView=f.extend({init:function(P,O){f.fn.init.call(this,P,O);this._normalizeOptions();this._scrollbar=I();this._isRtl=z.support.isRtl(P);this._resizeHint=y();this._moveHint=y();this._cellId=z.guid();this._resourcesForGroups();this._selectedSlots=[]},_normalizeOptions:function(){var O=this.options;if(O.startTime){O.startTime.setMilliseconds(0)}if(O.endTime){O.endTime.setMilliseconds(0)}if(O.workDayStart){O.workDayStart.setMilliseconds(0)}if(O.workDayEnd){O.workDayEnd.setMilliseconds(0)}},_isMobile:function(){var O=this.options;return O.mobile===true&&z.support.mobileOS||O.mobile==="phone"||O.mobile==="tablet"},_isMobilePhoneView:function(){var O=this.options;return O.mobile===true&&z.support.mobileOS&&!z.support.mobileOS.tablet||O.mobile==="phone"},_addResourceView:function(){var O=new n(this.groups.length,this._isRtl);this.groups.push(O);return O},dateForTitle:function(){return z.format(this.options.selectedDateFormat,this.startDate(),this.endDate())},shortDateForTitle:function(){return z.format(this.options.selectedShortDateFormat,this.startDate(),this.endDate())},_changeGroup:function(O,P){var R=P?"prevGroupSlot":"nextGroupSlot";var Q=this[R](O.start,O.groupIndex,O.isAllDay);if(Q){O.groupIndex+=P?-1:1}if(this._isGroupedByDate()&&!Q){O.groupIndex=P?this.groups.length-1:0}return Q},_changeDate:function(Q,U,S){var T=this.groups[Q.groupIndex];var R,P;if(S){R=T._getCollections(false);P=T.daySlotCollectionCount()?U.index-1:U.collectionIndex-1;if(P>=0){return R[P]._slots[R[P]._slots.length-1]}}else{R=T._getCollections(T.daySlotCollectionCount());P=T.daySlotCollectionCount()?0:U.collectionIndex+1;var O=T.daySlotCollectionCount()?U.collectionIndex+1:0;if(R[P]&&R[P]._slots[O]){return R[P]._slots[O]}}},_changeGroupContinuously:function(){return null},_changeViewPeriod:function(){return false},_horizontalSlots:function(V,Q,Y,S){var O=S?"leftSlot":"rightSlot";var P={startSlot:Q[0].start,endSlot:Q[Q.length-1].end};var X=this.groups[V.groupIndex];var T=this._isVerticallyGrouped();if(!Y){var U=this._normalizeHorizontalSelection(V,Q,S);if(U){P.startSlot=P.endSlot=U}}if(this._isGroupedByDate()&&!Y){var W=this._changeGroup(V,S);if(!W){P=this._getNextHorizontalRange(X,O,P)}else{P.startSlot=P.endSlot=W}}else{P.startSlot=X[O](P.startSlot);P.endSlot=X[O](P.endSlot);if(!Y&&!T&&(!P.startSlot||!P.endSlot)){P.startSlot=P.endSlot=this._changeGroup(V,S)}}var R;if((!P.startSlot||!P.endSlot)&&!this._isGroupedByDate()){R=this._continuousSlot(V,Q,S);R=this._changeGroupContinuously(V,R,Y,S);if(R){P.startSlot=P.endSlot=R}}return P},_getNextHorizontalRange:function(P,Q,O){if(!this._isVerticallyGrouped()){O.startSlot=P[Q](O.startSlot);O.endSlot=P[Q](O.endSlot)}return O},_verticalSlots:function(S,P,O,R){var T=this.groups[S.groupIndex];var V;var Q={startSlot:P[0].start,endSlot:P[P.length-1].end};if(!O){V=this._normalizeVerticalSelection(S,P,R);if(V){Q.startSlot=Q.endSlot=V}}var U=R?"upSlot":"downSlot";Q=this._getNextVerticalRange(T,U,Q,O);if(!O&&this._isVerticallyGrouped()&&(!Q.startSlot||!Q.endSlot)){if(this._isGroupedByDate()){Q.startSlot=Q.endSlot=this._changeDate(S,V,R)}else{Q.startSlot=Q.endSlot=this._changeGroup(S,R)}}return Q},_getNextVerticalRange:function(Q,R,P,O){P.startSlot=Q[R](P.startSlot,O);P.endSlot=Q[R](P.endSlot,O);return P},_normalizeHorizontalSelection:function(){return null},_normalizeVerticalSelection:function(Q,O,P){var R;if(P){R=O[0].start}else{R=O[O.length-1].end}return R},_continuousSlot:function(){return null},constrainSelection:function(O){var P=this.groups[0];var Q;if(!this.inRange(O)){Q=P.firstSlot();O.isAllDay=Q.isDaySlot;O.start=Q.startDate();O.end=Q.endDate()}else{if(!P.daySlotCollectionCount()){O.isAllDay=false}else{if(!P.timeSlotCollectionCount()){O.isAllDay=true}}}if(!this.groups[O.groupIndex]){O.groupIndex=0}},move:function(W,Y,Q){var R=false;var X=this.groups[W.groupIndex];var V=this._isGroupedByDate()&&this._isVerticallyGrouped();if(!X.timeSlotCollectionCount()){W.isAllDay=true}var P=X.ranges(W.start,W.end,W.isAllDay,false);var U,O,T,S;if(Y===s.DOWN||Y===s.UP){R=true;T=Y===s.UP;this._updateDirection(W,P,Q,T,true);S=this._verticalSlots(W,P,Q,T);if(!S.startSlot&&!Q&&this._changeViewPeriod(W,T,!V)){return R}}else{if(Y===s.LEFT||Y===s.RIGHT){R=true;T=Y===s.LEFT;this._updateDirection(W,P,Q,T,false);S=this._horizontalSlots(W,P,Q,T);if(!S.startSlot&&!Q&&this._changeViewPeriod(W,T,V)){return R}}}if(R){U=S.startSlot;O=S.endSlot;if(Q){var Z=W.backward;if(Z&&U){W.start=U.startDate()}else{if(!Z&&O){W.end=O.endDate()}}}else{if(U&&O){W.isAllDay=U.isDaySlot;W.start=U.startDate();W.end=O.endDate()}}W.events=[]}return R},moveToEventInGroup:function(V,T,U,R){var W=V._continuousEvents||[];var X,O;var Q=R?-1:1;var P=W.length;var S=R?P-1:0;while(S<P&&S>-1){O=W[S];if(!R&&O.start.startDate()>=T.startDate()||R&&O.start.startDate()<=T.startDate()){if(U.length){O=W[S+Q]}if(O&&y.inArray(O.uid,U)===-1){X=!!O;break}}S+=Q}return O},moveToEvent:function(X,U){var Z=X.groupIndex;var Y=this.groups[Z];var W=Y.ranges(X.start,X.end,X.isAllDay,false)[0].start;var R=this.groups.length;var T=U?-1:1;var aa=X.events;var Q;if(this._isGroupedByDate()){var S=this._getAllEvents();var ab=this._getUniqueEvents(S);var P=this._getSortedEvents(ab);if(aa.length===0){var O=this._getNextEventIndexBySlot(W,P,Z);if(U){O--}Q=P[O]}else{var V=this._getStartIdx(aa,P);while(V<P.length&&V>-1){if(aa.length>0){W=this._getSelectedSlot(W,P,Q,V,T,U)}if(!W){break}if(!U&&P[V].start.startDate()>=W.startDate()||U&&P[V].start.startDate()<=W.startDate()){if(aa[0]!=P[V].uid){Q=P[V];break}}V+=T}}}else{while(Z<R&&Z>-1){Q=this.moveToEventInGroup(Y,W,aa,U);Z+=T;Y=this.groups[Z];if(!Y||Q){break}aa=[];if(U){W=Y.lastSlot()}else{W=Y.firstSlot(true)}}}if(Q){X.events=[Q.uid];X.start=Q.start.startDate();X.end=Q.end.endDate();X.isAllDay=Q.start.isDaySlot;X.groupIndex=Q.start.groupIndex}return !!Q},current:function(O){if(O!==undefined){this._current=O;if(this.content.has(O)){this._scrollTo(O,this.content[0])}}else{return this._current}},select:function(O){this.clearSelection();if(!this._selectEvents(O)){this._selectSlots(O)}},_getNextEventIndexBySlot:function(U,Q,S){var O=0;var T=z.date.getDate(U.startDate());for(var P=0;P<Q.length;P++){var R=z.date.getDate(Q[P].start.startDate());if(T>R){O++;continue}if(T.getTime()===R.getTime()&&S>Q[P].start.groupIndex){O++;continue}if(T.getTime()===R.getTime()&&S>=Q[P].start.groupIndex&&U.startDate()>Q[P].start.startDate()){O++;continue}break}return O},_getSelectedSlot:function(V,P,R,O,U,Q){if(P[O+U]&&P[O].start.groupIndex!==P[O+U].start.groupIndex){var S=P[O+U].start.groupIndex;var T=this.groups[S];if(!T||R){V=null}if(Q){V=T.lastSlot()}else{V=T.firstSlot(true)}}return V},_getStartIdx:function(P,O){var Q=0;y.each(O,function(){if(this.uid===P[0]){return false}Q++});return Q},_getAllEvents:function(){var Q=[];var P=this.groups;for(var O=0;O<P.length;O++){if(P[O]._continuousEvents){Q=Q.concat(P[O]._continuousEvents)}}return Q},_getUniqueEvents:function(O){var S=[];for(var Q=0;Q<O.length;Q++){var R=false;for(var P=0;P<S.length;P++){if(O[Q].uid===S[P].uid){R=true;break}}if(!R){S.push(O[Q])}}return S},_getSortedEvents:function(O){return O.sort(function(T,Q){var S=T.start.startDate();var R=Q.start.startDate();var P=z.date.getDate(S)-z.date.getDate(R);if(P===0){P=T.start.groupIndex-Q.start.groupIndex}if(P===0){P=S.getTime()-R.getTime()}if(P===0){if(T.start.isDaySlot&&!Q.start.isDaySlot){P=-1}if(!T.start.isDaySlot&&Q.start.isDaySlot){P=1}}if(P===0){P=y(T.element).index()-y(Q.element).index()}return P})},_selectSlots:function(W){var U=W.isAllDay;var X=this.groups[W.groupIndex];if(!X.timeSlotCollectionCount()){U=true}this._selectedSlots=[];var O=X.ranges(W.start,W.end,U,false);var Q;var V;for(var P=0;P<O.length;P++){var R=O[P];var S=R.collection;for(var T=R.start.index;T<=R.end.index;T++){V=S.at(T);Q=V.element;Q.setAttribute("aria-selected",true);J(Q);this._selectedSlots.push({start:V.startDate(),end:V.endDate(),element:Q})}}if(W.backward){Q=O[0].start.element}this.current(Q)},_selectEvents:function(R){var T=false;var Q=R.events;var U=this.groups[R.groupIndex]._continuousEvents||[];var P,S=U.length;if(!Q[0]||!U[0]){return T}var O=y();R.events=[];for(P=0;P<S;P++){if(y.inArray(U[P].uid,Q)>-1){O=O.add(U[P].element);R.events.push(U[P].uid)}}if(O[0]){O.addClass("k-state-selected").attr("aria-selected",true);this.current(O.last()[0]);this._selectedSlots=[];T=true}return T},inRange:function(Q){var O=this.startDate();var R=z.date.addDays(this.endDate(),1);var S=Q.start;var P=Q.end;return O<=S&&S<R&&O<P&&P<=R},_resourceValue:function(P,O){if(P.valuePrimitive){O=z.getter(P.dataValueField)(O)}return O},_resourceBySlot:function(V){var T=this.groupedResources;var P={};if(T.length){var S=V.groupIndex;for(var O=T.length-1;O>=0;O--){var R=T[O];var Q=this._resourceValue(R,R.dataSource.view()[S%R.dataSource.total()]);if(R.multiple){Q=[Q]}var U=z.setter(R.field);U(P,Q);S=Math.floor(S/R.dataSource.total())}}return P},_createResizeHint:function(R,Q,P,O){return y(F).css({left:R,top:Q,width:P,height:O})},_removeResizeHint:function(){this._resizeHint.remove();this._resizeHint=y()},_removeMoveHint:function(){this._moveHint.remove();this._moveHint=y()},_scrollTo:function(S,Q){var R=S.offsetTop,P=S.offsetHeight,V=Q.scrollTop,U=Q.clientHeight,T=R+P,O=0;if(V>R){O=R}else{if(T>V+U){if(P<=U){O=T-U}else{O=R}}else{O=V}}Q.scrollTop=O},_shouldInverseResourceColor:function(Q){var R=new o(Q.color).isDark();var O=this.element.css("color");var P=new o(O).isDark();return R==P},_eventTmpl:function(V,O){var W=this.options,Q=y.extend({},z.Template,W.templateSettings),R=Q.paramName,S="",T=typeof V,P={storage:{},count:0};if(T==="function"){P.storage["tmpl"+P.count]=V;S+="#=this.tmpl"+P.count+"("+R+")#";P.count++}else{if(T==="string"){S+=V}}var U=z.template(z.format(O,S),Q);if(P.count>0){U=y.proxy(U,P.storage)}return U},eventResources:function(O){var Q=[],aa=this.options;if(!aa.resources){return Q}for(var Z=0;Z<aa.resources.length;Z++){var R=aa.resources[Z];var X=R.field;var V=z.getter(X)(O);if(V==null){continue}if(!R.multiple){V=[V]}var T=R.dataSource.view();for(var U=0;U<V.length;U++){var P=null;var Y=V[U];if(!R.valuePrimitive){Y=z.getter(R.dataValueField)(Y)}for(var W=0;W<T.length;W++){if(T[W].get(R.dataValueField)==Y){P=T[W];break}}if(P!==null){var S=z.getter(R.dataColorField)(P);Q.push({field:R.field,title:R.title,name:R.name,text:z.getter(R.dataTextField)(P),value:Y,color:S})}}}return Q},createLayout:function(U){var R=-1;if(!U.rows){U.rows=[]}for(var O=0;O<U.rows.length;O++){if(U.rows[O].allDay){R=O;break}}var S=U.rows[R];if(R>=0){U.rows.splice(R,1)}var T=this.columnLevels=q(U,"columns");var Q=this.rowLevels=q(U,"rows");this.table=y("<table "+D()+' class="k-scheduler-layout k-scheduler-'+this.name+'view"><tbody></tbody></table>');var P=Q[Q.length-1].length;this.table.find("tbody:first").append(this._topSection(T,S,P));this.table.find("tbody:first").append(this._bottomSection(T,Q,P));this.element.append(this.table);this._scroller()},refreshLayout:function(){var U=this,V=U.element.find(">.k-scheduler-toolbar"),Y=U.element.innerHeight(),Z=this._scrollbar,S=0,O=this._isRtl?"left":"right";for(var W=0;W<V.length;W++){Y-=H(V.eq(W))}if(U.datesHeader){S=H(U.datesHeader)}if(U.timesHeader&&H(U.timesHeader)>S){S=H(U.timesHeader)}if(U.datesHeader&&U.timesHeader){var X=U.datesHeader.find("table:first tr");U.timesHeader.find("tr").height(function(aa){y(this).height(X.eq(aa).height())})}if(S){Y-=S}if(U.footer){Y-=H(U.footer)}var R=function(ac){var ab,aa;if(ac[0].style.height){return true}else{ab=ac.height()}ac.height("auto");aa=ac.height();if(ab!=aa){ac.height("");return true}ac.height("");return false};var Q=U.content[0],T=!z.support.kineticScrollNeeded?Z:0;if(R(U.element)){if(Y>Z*2){U.content.height(Y)}else{U.content.height(Z*2+1)}U.times.height(Q.clientHeight);var P=U.times.find("table");if(P.length){P.height(U.content.find("table")[0].clientHeight)}}if(Q.offsetWidth-Q.clientWidth>0){U.table.addClass("k-scrollbar-v");U.datesHeader.css("padding-"+O,T-parseInt(U.datesHeader.children().css("border-"+O+"-width"),10))}else{U.datesHeader.css("padding-"+O,"")}if(Q.offsetHeight-Q.clientHeight>0||Q.clientHeight>U.content.children(".k-scheduler-table").height()){U.table.addClass("k-scrollbar-h")}else{U.table.removeClass("k-scrollbar-h")}},_topSection:function(Q,P,O){this.timesHeader=B(Q.length,P,O);var R=Q[Q.length-1].length;this.datesHeader=b(Q,R,P);return y("<tr>").append(this.timesHeader.add(this.datesHeader).wrap("<td>").parent())},_bottomSection:function(Q,P,O){this.times=t(P,O);this.content=k(Q[Q.length-1],P[P.length-1]);return y("<tr>").append(this.times.add(this.content).wrap("<td>").parent())},_scroller:function(){var P=this;this.content.bind("scroll"+A,function(){P.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(this.scrollLeft);P.times.scrollTop(this.scrollTop)});var O=z.touchScroller(this.content,{avoidScrolling:function(Q){return y(Q.event.target).closest(".k-event.k-event-active").length>0}});if(O&&O.movable){this._touchScroller=O;this.content=O.scrollElement;O.movable.bind("change",function(Q){P.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(-Q.sender.x);P.times.scrollTop(-Q.sender.y)})}},_resourcesForGroups:function(){var Q=[];var P=this.options.group;var S=this.options.resources;P=P&&P.resources?P.resources:[];if(S&&P.length){for(var O=0,R=S.length;O<R;O++){for(var T=0,U=P.length;T<U;T++){if(S[O].name===P[T]){Q.push(S[O])}}}}this.groupedResources=Q},_createDateLayout:function(P,O,Q){return h("rows",P,O,Q)},_createColumnsLayout:function(R,O,P,Q,S){return i("columns",R,O,P,Q,S)},_groupOrientation:function(){var O=this.options.group;return O&&O.resources?O.orientation:"horizontal"},_isGroupedByDate:function(){return this.options.group&&this.options.group.date},_isVerticallyGrouped:function(){return this.groupedResources.length&&this._groupOrientation()==="vertical"},_createRowsLayout:function(R,O,P,Q){return i("rows",R,O,P,Q)},selectionByElement:function(){return null},clearSelection:function(){this.content.find(".k-state-selected").removeAttr("id").attr("aria-selected",false).removeClass("k-state-selected")},destroy:function(){var O=this;f.fn.destroy.call(this);if(O.table){z.destroy(O.table);O.table.remove()}O.groups=null;O.table=null;O.content=null;O.times=null;O.datesHeader=null;O.timesHeader=null;O.footer=null;O._resizeHint=null;O._moveHint=null},calendarInfo:function(){return z.getCulture().calendars.standard},prevGroupSlot:function(O,P,R){var S;var Q=this.groups[P];var T=Q.ranges(O,O,R,false)[0].start;if(P<=0){return}if(this._isGroupedByDate()){return T}if(this._isVerticallyGrouped()){if(!Q.timeSlotCollectionCount()){S=Q._collection(Q.daySlotCollectionCount()-1,true);return S.at(T.index)}else{S=Q._collection(R?T.index:T.collectionIndex,false);return S.last()}}else{if(!Q.timeSlotCollectionCount()){S=Q._collection(T.collectionIndex,true);return S.last()}else{S=Q._collection(R?0:Q.timeSlotCollectionCount()-1,R);return R?S.last():S.at(T.index)}}},nextGroupSlot:function(P,Q,S){var T;var R=this.groups[Q];var U=R.ranges(P,P,S,false)[0].start;var O;if(Q>=this.groups.length-1){return}if(this._isGroupedByDate()){return U}if(this._isVerticallyGrouped()){if(!R.timeSlotCollectionCount()){T=R._collection(0,true);return T.at(U.index)}else{O=R.daySlotCollectionCount();T=R._collection(O?0:U.collectionIndex,O);return S?T.first():T.at(U.collectionIndex)}}else{if(!R.timeSlotCollectionCount()){T=R._collection(U.collectionIndex,true);return T.first()}else{T=R._collection(0,S);return S?T.first():T.at(U.index)}}},_eventOptionsForMove:function(){return{}},_updateEventForResize:function(){return},_updateEventForSelection:function(O){return O}});function x(S,V,P){var O,Q,U,T,R;for(O=S.length-1;O>=0;O--){Q=p(S[O]);U=Q.start;R=Q.end;T=U<=V&&R>=V;if(T||U>=V&&R<=P||V<=U&&P>=U){if(U<V){V=U}if(R>P){P=R}}}return e(S,V,P)}function p(O){return{start:O.start,end:O.end}}function e(S,T,R){var P=[];for(var O=0;O<S.length;O++){var Q=p(S[O]);if(Q.start<T&&Q.end>T||Q.start>=T&&Q.end<=R){P.push(S[O])}}return P}function v(O){return G(O)}function m(O){return G(O)}var o=function(U){var Q=this,P=o.formats,T,S,V,R,O;if(arguments.length===1){U=Q.resolveColor(U);for(R=0;R<P.length;R++){T=P[R].re;S=P[R].process;V=T.exec(U);if(V){O=S(V);Q.r=O[0];Q.g=O[1];Q.b=O[2]}}}else{Q.r=arguments[0];Q.g=arguments[1];Q.b=arguments[2]}Q.r=Q.normalizeByte(Q.r);Q.g=Q.normalizeByte(Q.g);Q.b=Q.normalizeByte(Q.b)};o.prototype={resolveColor:function(O){O=O||"#000";if(O.charAt(0)=="#"){O=O.substr(1,6)}O=O.replace(/ /g,"");O=O.toLowerCase();O=o.namedColors[O]||O;return O},normalizeByte:function(O){return O<0||isNaN(O)?0:O>255?255:O},percBrightness:function(){var O=this;return u.sqrt(0.241*O.r*O.r+0.691*O.g*O.g+0.068*O.b*O.b)},isDark:function(){var P=this;var O=P.percBrightness();return O<180}};o.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(O){return[parseInt(O[1],10),parseInt(O[2],10),parseInt(O[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(O){return[parseInt(O[1],16),parseInt(O[2],16),parseInt(O[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(O){return[parseInt(O[1]+O[1],16),parseInt(O[2]+O[2],16),parseInt(O[3]+O[3],16)]}}];o.namedColors={aqua:"00ffff",azure:"f0ffff",beige:"f5f5dc",black:"000000",blue:"0000ff",brown:"a52a2a",coral:"ff7f50",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgray:"a9a9a9",darkgreen:"006400",darkorange:"ff8c00",darkred:"8b0000",dimgray:"696969",fuchsia:"ff00ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lightblue:"add8e6",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumblue:"0000cd",navy:"000080",olive:"808000",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",pink:"ffc0cb",plum:"dda0dd",purple:"800080",red:"ff0000",royalblue:"4169e1",salmon:"fa8072",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",steelblue:"4682b4",tan:"d2b48c",teal:"008080",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};function G(P){var R=[];for(var T=0;T<P.length;T++){var O=P[T];var V=p(O);var Q=null;for(var S=0,W=R.length;S<W;S++){var U=V.start>R[S].end;if(V.start<R[S].start||U){Q=R[S];if(Q.end<V.end){Q.end=V.end}break}}if(!Q){Q={start:V.start,end:V.end,events:[]};R.push(Q)}Q.events.push(O)}return R}function h(P,Q,O,R){var S=[];y.each(Q,function(T,V){var U=V.className?"k-slot-cell "+V.className:"k-slot-cell";var W={text:V.text,className:U};if(R&&!V.minorTicks){W[P]=h(P,V.columns,O,R)}else{W[P]=O}S.push(W)});return S}function i(Q,S,Y,X,P,O){var T=S[0];var R=[];if(T){if(P&&Y){y.each(P,function(Z,aa){if(O&&!aa.minorTicks){aa[Q]=i(Q,S,aa.columns,X,aa.columns,O)}else{aa[Q]=i(Q,S,null,X)}});R=P}else{var V=T.dataSource.view();for(var W=0;W<V.length;W++){var U={text:X({text:z.htmlEncode(z.getter(T.dataTextField)(V[W])),color:z.getter(T.dataColorField)(V[W]),field:T.field,title:T.title,name:T.name,value:z.getter(T.dataValueField)(V[W])}),className:"k-slot-cell"};U[Q]=i(Q,S.slice(1),Y,X);R.push(U)}}return R}return Y}function K(O){return function(Q){if(y.isArray(Q)||Q instanceof z.data.ObservableArray){for(var P=0;P<Q.length;P++){if(Q[P]==O){return true}}return false}return Q==O}}var j=/\s*k-state-selected/;function J(O){O.className=O.className.replace(j,"")+" k-state-selected"}y.extend(C.SchedulerView,{createColumns:v,createRows:m,rangeIndex:p,collidingEvents:x,groupEqFilter:K})}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.scheduler.dayview",["kendo.scheduler.view"],a)}(function(){var a={id:"scheduler.dayview",name:"Scheduler Day View",category:"web",description:"The Scheduler Day View",depends:["scheduler.view"],hidden:true};(function(g,i){var s=window.kendo,r=s.ui,q=s.date.setTime,c=r.SchedulerView,b=s._outerWidth,e=s._outerHeight,B=g.extend,x=g.proxy,n=s.date.getDate,h=s.date.MS_PER_MINUTE,d=s.date.MS_PER_DAY,y="k-current-time",w="k-current-time-arrow",l=0.8666,C=s.date.getMilliseconds,A=".kendoMultiDayView";var v=s.template('<div title="(#=kendo.format("{0:t} - {1:t}", start, end)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'),k=s.template('<div title="(#=kendo.format("{0:t}", start)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template">${title}</div></div>'),m=s.template("<span class='k-link k-nav-day'>#=kendo.toString(date, 'ddd M/dd')#</span>"),z='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-60-left"></span>#}## if(data.isException()) {#<span class="k-icon k-i-warning"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-reload"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-i-close"></span></a>#}## if(data.head || data.middle) {#<span class="k-icon k-i-arrow-60-right"></span>#}#</span>#if(resizable && !singleDay && !data.tail && !data.middle){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !singleDay && !data.head && !data.middle){#<span class="k-resize-handle k-resize-e"></span>#}#</div>',D='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#" #if (resources[0]) { #style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.isException()) {#<span class="k-icon k-i-warning"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-reload"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-i-close"></span></a>#}#</span><span class="k-event-top-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-60-up"></span># } #</span><span class="k-event-bottom-actions"># if(data.head || data.middle) {#<span class="k-icon k-i-arrow-60-down"></span># } #</span># if(resizable && !data.tail && !data.middle) {#<span class="k-resize-handle k-resize-n"></span># } ## if(resizable && !data.head && !data.middle) {#<span class="k-resize-handle k-resize-s"></span># } #</div>';function f(E){var F=new Date(1980,1,1,0,0,0);q(F,C(E));return F}function o(G,F,E){return G>=F&&G<=E}function t(G,F,E,H){H=H?G<=E:G<E;return G>F&&H}function u(L,H,K,J){var I=L._continuousEvents;var G=I[I.length-1];var F=n(H.start.startDate()).getTime();if(J&&G&&n(G.start.startDate()).getTime()==F){var E=I.length-1;for(;E>-1;E--){if(I[E].isAllDay||n(I[E].start.startDate()).getTime()<F){break}}I.splice(E+1,0,{element:K,isAllDay:true,uid:K.attr(s.attr("uid")),start:H.start,end:H.end})}else{I.push({element:K,isAllDay:J,uid:K.attr(s.attr("uid")),start:H.start,end:H.end})}}function j(E){var F=[];var G=E.workWeekStart;F.push(G);while(E.workWeekEnd!=G){if(G>6){G-=7}else{G++}F.push(G)}return F}var p=c.extend({init:function(F,E){var G=this;c.fn.init.call(G,F,E);G.title=G.options.title||G.options.name;G._workDays=j(G.options);G._templates();G._editable();G.calculateDateRange();G._groups();G._currentTime(true)},_currentTimeMarkerUpdater:function(){this._updateCurrentTimeMarker(new Date())},_updateCurrentTimeMarker:function(F){var U=this.options;if(U.currentTimeMarker.useLocalTimezone===false){var N=U.dataSource.options.schema.timezone;if(U.dataSource&&N){var R=s.timezone.offset(F,N);F=s.timezone.convert(F,F.getTimezoneOffset(),R)}}this.times.find("."+y).remove();this.content.find("."+y).remove();var I=!U.group||U.group.orientation=="horizontal"?1:this.groups.length;var J=this.times.find("tr:first th:first");var G=this.times.find("tr:first th:last");for(var S=0;S<I;S++){var T=this.groups[S];if(!T){return}var P=s.date.toUtcTime(F);var E=T.timeSlotRanges(P,P+1);if(E.length===0){return}var M=E[0].collection;var L=M.slotByStartDate(F);if(L){var K="<div class='"+y+"'></div>";var Q=g(K).prependTo(this.times);var O=Math.round(E[0].innerRect(F,new Date(F.getTime()+1),false).top);var H={};if(this._isRtl){H.right=J.position().left+e(J)-e(G);Q.addClass(w+"-left")}else{H.left=G.position().left;Q.addClass(w+"-right")}H.top=O-b(Q)*l/2;Q.css(H);g(K).prependTo(this.content).css({top:O,height:"1px",right:"1px",width:this.content[0].scrollWidth,left:0})}}},_currentTime:function(E){var G=this;var F=G.options.currentTimeMarker;if(F!==false&&F.updateInterval!==i){G._currentTimeMarkerUpdater();if(E){G._currentTimeUpdateTimer=setInterval(x(this._currentTimeMarkerUpdater,G),F.updateInterval)}}},_updateResizeHint:function(U,H,R,J){var F=U.isMultiDay();var L=this.groups[H];var G=L.ranges(R,J,F,U.isAllDay);var T,S,Q,P;this._removeResizeHint();for(var W=0;W<G.length;W++){var O=G[W];var K=O.startSlot();if(this._isGroupedByDate()&&F){for(var M=K.index;M<=O.end.index;M++){var I=O.collection._slots[M];T=I.offsetWidth;S=I.clientHeight;Q=I.offsetTop;P=c.fn._createResizeHint.call(this,I.offsetLeft,Q,T,S);this._resizeHint=this._resizeHint.add(P)}}else{T=K.offsetWidth;S=K.clientHeight;Q=K.offsetTop;if(F){T=O.innerWidth()}else{var E=O.outerRect(R,J,this.options.snap);Q=E.top;S=E.bottom-E.top}P=c.fn._createResizeHint.call(this,K.offsetLeft,Q,T,S);this._resizeHint=this._resizeHint.add(P)}}var V="t";var N=this.content;if(F){V="M/dd";N=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div");if(!N.length){N=this.content}}this._resizeHint.appendTo(N);this._resizeHint.find(".k-label-top,.k-label-bottom").text("");this._resizeHint.first().addClass("k-first").find(".k-label-top").text(s.toString(s.timezone.toLocalDate(R),V));this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(s.toString(s.timezone.toLocalDate(J),V))},_updateMoveHint:function(F,U,E){var J=F.isMultiDay();var T=this.groups[U];var H=s.date.toUtcTime(F.start)+E;var K=H+F.duration();var G=T.ranges(H,K,J,F.isAllDay);H=s.timezone.toLocalDate(H);K=s.timezone.toLocalDate(K);this._removeMoveHint();if(!J&&(C(K)===0||C(K)<C(this.startTime()))){if(G.length>1){G.pop()}}for(var I=0;I<G.length;I++){var M=G[I];var R=M.start;var L;var N={left:R.offsetLeft+2,top:R.offsetTop};if(this._isGroupedByDate()&&J){for(var P=R.index;P<=M.end.index;P++){var S=M.collection._slots[P];N.left=this._isRtl?S.clientWidth*0.1+S.offsetLeft+2:S.offsetLeft+2;N.height=S.offsetHeight;N.width=S.clientWidth*0.9-4;L=this._createEventElement(F.clone({start:H,end:K}),!J);this._appendMoveHint(L,N)}}else{if(this._isRtl){N.left=R.clientWidth*0.1+R.offsetLeft+2}if(J){N.width=M.innerWidth()-4}else{var Q=M.outerRect(H,K,this.options.snap);N.top=Q.top;N.height=Q.bottom-Q.top;N.width=R.clientWidth*0.9-4}L=this._createEventElement(F.clone({start:H,end:K}),!J);this._appendMoveHint(L,N)}}var O=this.content;if(J){O=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div");if(!O.length){O=this.content}}this._moveHint.appendTo(O)},_appendMoveHint:function(F,E){F.addClass("k-event-drag-hint");F.css(E);this._moveHint=this._moveHint.add(F)},_slotByPosition:function(E,J){var I,H;if(this._isVerticallyGrouped()){H=this.content.offset();J+=this.content[0].scrollTop;E+=this.content[0].scrollLeft}else{H=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day)").find(">div").offset()}if(H){E-=H.left;J-=H.top}E=Math.ceil(E);J=Math.ceil(J);var G;var F;for(F=0;F<this.groups.length;F++){G=this.groups[F];I=G.daySlotByPosition(E,J,this._isGroupedByDate());if(I){return I}}if(H){E+=H.left;J+=H.top}H=this.content.offset();E-=H.left;J-=H.top;if(!this._isVerticallyGrouped()){J+=this.content[0].scrollTop;E+=this.content[0].scrollLeft}E=Math.ceil(E);J=Math.ceil(J);for(F=0;F<this.groups.length;F++){G=this.groups[F];I=G.timeSlotByPosition(E,J);if(I){return I}}return null},_groupCount:function(){var F=this.groupedResources;var E=this._isGroupedByDate();if(F.length){if(this._groupOrientation()==="vertical"){if(E){return this._columnCountForLevel(F.length-1)}else{return this._rowCountForLevel(F.length-1)}}else{if(E){return this._columnCountForLevel(F.length)/this._columnCountForLevel(0)}else{return this._columnCountForLevel(F.length)/this._columnOffsetForResource(F.length)}}}return 1},_columnCountInResourceView:function(){var F=this.groupedResources;var E=this._isGroupedByDate();if(!F.length||this._isVerticallyGrouped()){if(E){return this._rowCountForLevel(0)}else{return this._columnCountForLevel(0)}}if(E){return this._columnCountForLevel(0)}else{return this._columnOffsetForResource(F.length)}},_timeSlotGroups:function(Q,K){var F=this._timeSlotInterval();var J=Q;var E=this._isGroupedByDate();var O=this.content.find("tr:not(.k-scheduler-header-all-day)");var R,H,N,L;O.attr("role","row");var M=O.length;if(this._isVerticallyGrouped()){if(E){J=K}M=Math.floor(M/J)}for(var P=0;P<J;P++){var I=0;var G=0;if(this._isVerticallyGrouped()){I=P}else{G=P}N=I*M;while(N<(I+1)*M){var T=O[N].children;if(N%M===0){H=C(new Date(+this.startTime()))}var S=0;if(E){if(this._isVerticallyGrouped()){for(L=0;L<Q;L++){R=this.groups[L];this._addTimeSlotGroup(R,T,L,H,F,P)}}else{R=this.groups[P];for(L=G;L<Q*K;L=L+Q){this._addTimeSlotGroup(R,T,L,H,F,S);S++}}}else{R=this.groups[P];for(L=G*K;L<(G+1)*K;L++){this._addTimeSlotGroup(R,T,L,H,F,S);S++}}H+=F;N++}}},_addTimeSlotGroup:function(M,P,L,I,H,O){var N=P[L];var K=M.getTimeSlotCollection(O);var G=this._dates[O];var F=Date.UTC(G.getFullYear(),G.getMonth(),G.getDate());var E=F+I;var J=E+H;N.setAttribute("role","gridcell");N.setAttribute("aria-selected",false);K.addTimeSlot(N,E,J)},_addDaySlotGroup:function(K,G,F,J,I){var E=G[F];var L=this._dates[I];var H=Date.UTC(L.getFullYear(),L.getMonth(),L.getDate());E.setAttribute("role","gridcell");E.setAttribute("aria-selected",false);K.addDaySlot(E,H,H+s.date.MS_PER_DAY)},_daySlotGroups:function(O,J){var M,L;var I=O;var E=this._isGroupedByDate();if(this._isVerticallyGrouped()){if(E){I=J}M=this.element.find(".k-scheduler-header-all-day")}else{M=this.element.find(".k-scheduler-header-all-day tr")}M.attr("role","row");for(var P=0;P<I;P++){var H=0;var N,G;if(this._isVerticallyGrouped()){H=P}var Q=M[H].children;var F=0;if(!this._isVerticallyGrouped()){F=P}var K=0;if(E){if(this._isVerticallyGrouped()){for(L=0;L<O;L++){N=this.groups[L];G=N.getDaySlotCollection(0);this._addDaySlotGroup(G,Q,L,J,P)}}else{N=this.groups[P];G=N.getDaySlotCollection(0);for(L=F;L<O*J;L=L+O){this._addDaySlotGroup(G,Q,L,J,K);K++}}}else{N=this.groups[P];G=N.getDaySlotCollection(0);for(L=F*J;L<(F+1)*J;L++){this._addDaySlotGroup(G,Q,L,J,K);K++}}}},_groups:function(){var I=this._groupCount();var H=this._columnCountInResourceView();this.groups=[];for(var E=0;E<I;E++){var F=this._addResourceView(E);for(var G=0;G<H;G++){F.addTimeSlotCollection(this._dates[G],s.date.addDays(this._dates[G],1))}if(this.options.allDaySlot){F.addDaySlotCollection(this._dates[0],s.date.addDays(this._dates[this._dates.length-1],1))}}this._timeSlotGroups(I,H);if(this.options.allDaySlot){this._daySlotGroups(I,H)}},options:{name:"MultiDayView",selectedDateFormat:"{0:D}",selectedShortDateFormat:"{0:d}",allDaySlot:true,showWorkHours:false,title:"",startTime:s.date.today(),endTime:s.date.today(),minorTickCount:2,majorTick:60,majorTimeHeaderTemplate:"#=kendo.toString(date, 't')#",minorTimeHeaderTemplate:"&nbsp;",groupHeaderTemplate:"#=text#",slotTemplate:"&nbsp;",allDaySlotTemplate:"&nbsp;",eventTemplate:v,allDayEventTemplate:k,dateHeaderTemplate:m,editable:true,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,footer:{command:"workDay"},messages:{allDay:"all day",showFullDay:"Show full day",showWorkDay:"Show business hours"},currentTimeMarker:{updateInterval:10000,useLocalTimezone:true}},events:["remove","add","edit"],_templates:function(){var E=this.options,F=B({},s.Template,E.templateSettings);this.eventTemplate=this._eventTmpl(E.eventTemplate,D);this.allDayEventTemplate=this._eventTmpl(E.allDayEventTemplate,z);this.majorTimeHeaderTemplate=s.template(E.majorTimeHeaderTemplate,F);this.minorTimeHeaderTemplate=s.template(E.minorTimeHeaderTemplate,F);this.dateHeaderTemplate=s.template(E.dateHeaderTemplate,F);this.slotTemplate=s.template(E.slotTemplate,F);this.allDaySlotTemplate=s.template(E.allDaySlotTemplate,F);this.groupHeaderTemplate=s.template(E.groupHeaderTemplate,F)},_editable:function(){if(this.options.editable){if(this._isMobile()){this._touchEditable()}else{this._mouseEditable()}}},_mouseEditable:function(){var E=this;E.element.on("click"+A,".k-event a:has(.k-i-close)",function(F){E.trigger("remove",{uid:g(this).closest(".k-event").attr(s.attr("uid"))});F.preventDefault()});if(E.options.editable.create!==false){E.element.on("dblclick"+A,".k-scheduler-content td",function(F){if(!g(this).parent().hasClass("k-scheduler-header-all-day")){var H=E._slotByPosition(F.pageX,F.pageY);if(H){var G=E._resourceBySlot(H);E.trigger("add",{eventInfo:B({start:H.startDate(),end:H.endDate()},G)})}F.preventDefault()}}).on("dblclick"+A,".k-scheduler-header-all-day td",function(F){var H=E._slotByPosition(F.pageX,F.pageY);if(H){var G=E._resourceBySlot(H);E.trigger("add",{eventInfo:B({},{isAllDay:true,start:s.date.getDate(H.startDate()),end:s.date.getDate(H.startDate())},G)})}F.preventDefault()})}if(E.options.editable.update!==false){E.element.on("dblclick"+A,".k-event",function(F){E.trigger("edit",{uid:g(this).closest(".k-event").attr(s.attr("uid"))});F.preventDefault()})}},_touchEditable:function(){var F=this;var E=0;if(s.support.mobileOS.android){E=5}if(F.options.editable.create!==false){F._addUserEvents=new s.UserEvents(F.element,{threshold:E,filter:".k-scheduler-content td",tap:function(H){if(!g(H.target).parent().hasClass("k-scheduler-header-all-day")){var G=H.x.location!==i?H.x.location:H.x;var K=H.y.location!==i?H.y.location:H.y;var J=F._slotByPosition(G,K);if(J){var I=F._resourceBySlot(J);F.trigger("add",{eventInfo:B({start:J.startDate(),end:J.endDate()},I)})}H.preventDefault()}}});F._allDayUserEvents=new s.UserEvents(F.element,{threshold:E,filter:".k-scheduler-header-all-day td",tap:function(H){var G=H.x.location!==i?H.x.location:H.x;var K=H.y.location!==i?H.y.location:H.y;var J=F._slotByPosition(G,K);if(J){var I=F._resourceBySlot(J);F.trigger("add",{eventInfo:B({},{isAllDay:true,start:s.date.getDate(J.startDate()),end:s.date.getDate(J.startDate())},I)})}H.preventDefault()}})}if(F.options.editable.update!==false){F._editUserEvents=new s.UserEvents(F.element,{threshold:E,filter:".k-event",tap:function(H){var G=g(H.target).closest(".k-event");if(!G.hasClass("k-event-active")){F.trigger("edit",{uid:G.attr(s.attr("uid"))})}H.preventDefault()}})}},_layout:function(E){var I=[];var L=[];var M=this.options;var J=this;var F=J._isGroupedByDate();for(var K=0;K<E.length;K++){var H={};H.text=J.dateHeaderTemplate({date:E[K]});if(s.date.isToday(E[K])){H.className="k-today"}I.push(H)}var G=this.groupedResources;if(M.allDaySlot){L.push({text:M.messages.allDay,allDay:true,cellContent:function(N){var O=N;N=G.length&&J._groupOrientation()!=="vertical"?N%E.length:N;return J.allDaySlotTemplate({date:E[N],resources:function(){return J._resourceBySlot({groupIndex:O})}})}})}this._forTimeRange(this.startTime(),this.endTime(),function(O,Q,N,R){var P=Q?J.majorTimeHeaderTemplate:J.minorTimeHeaderTemplate;var S={text:P({date:O}),className:R?"k-slot-cell":""};L.push(S)});if(G.length){if(this._groupOrientation()==="vertical"){if(F){L=this._createDateLayout(I,L);I=this._createColumnsLayout(G,null,this.groupHeaderTemplate)}else{L=this._createRowsLayout(G,L,this.groupHeaderTemplate)}}else{if(F){I=this._createColumnsLayout(G,I,this.groupHeaderTemplate,I)}else{I=this._createColumnsLayout(G,I,this.groupHeaderTemplate)}}}return{columns:I,rows:L}},_footer:function(){var E=this.options;if(E.footer!==false){var F='<div class="k-header k-scheduler-footer">';var H=E.footer.command;if(H&&H==="workDay"){F+='<ul class="k-reset k-header">';F+='<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"></span>';F+=(E.showWorkHours?E.messages.showFullDay:E.messages.showWorkDay)+"</a></li>";F+="</ul>"}else{F+="&nbsp;"}F+="</div>";this.footer=g(F).appendTo(this.element);var G=this;this.footer.on("click"+A,".k-scheduler-fullday",function(I){I.preventDefault();G.trigger("navigate",{view:G.name||E.name,date:E.date,isWorkDay:!E.showWorkHours})})}},_forTimeRange:function(Q,S,R,F){Q=f(Q);S=f(S);var J=this,K=C(Q),M=C(S),I=J.options.minorTickCount,W=J.options.majorTick*h,U=W/I||1,H=new Date(+Q),N=H.getDate(),E,P=0,G,O="";G=d/U;if(K!=M){if(K>M){M+=d}G=(M-K)/U}G=Math.round(G);for(;P<G;P++){var X=P%(W/U),V=X===0,T=X<I-1,L=X===I-1;O+=R(H,V,T,L);q(H,U,false)}if(M){E=C(H);if(N<H.getDate()){E+=d}if(E>M){H=new Date(+S)}}if(F){O+=F(H)}return O},_content:function(E){var P=this;var U=P.options;var H=P.startTime();var N=this.endTime();var K=1;var S=1;var R=E.length;var O="";var J=this.groupedResources;var M=this.allDaySlotTemplate;var L=false;var G;var I=P._isGroupedByDate();var Q=0;if(J.length){L=P._groupOrientation()==="vertical";if(L){S=this._rowCountForLevel(this.rowLevels.length-2);if(I){K=this._columnCountForLevel(this.columnLevels.length-1)}if(U.allDaySlot){G=function(Y){var W='<tr class="k-scheduler-header-all-day">';var X=I?0:Y;var Z=function(){return P._resourceBySlot({groupIndex:X})};if(I){for(;X<K;X++){W+="<td>"+M({date:E[Q],resources:Z})+"</td>"}}else{for(var V=0;V<E.length;V++){W+="<td>"+M({date:E[V],resources:Z})+"</td>"}}return W+"</tr>"}}}else{if(I){K=this._columnCountForLevel(this.columnLevels.length-1)/this._columnCountForLevel(0)}else{K=this._columnCountForLevel(this.columnLevels.length-2)}}}O+="<tbody>";var T=function(X,aa){var Z="";var ab=0;var W,Y;Z="<tr"+(aa?' class="k-middle-row"':"")+">";if(I){for(W=0,Y=R;W<Y;W++){for(ab=0;ab<K;ab++){var V=W;if(L){V=Q}Z=P._addCellsToContent(Z,E,X,V,ab,F)}if(L){break}}}else{for(;ab<K;ab++){for(W=0,Y=R;W<Y;W++){Z=P._addCellsToContent(Z,E,X,W,ab,F)}}}Z+="</tr>";return Z};for(var F=0;F<S;F++){O+=G?G(F):"";O+=this._forTimeRange(H,N,T);if(L){Q++}}O+="</tbody>";this.content.find("table").append(O)},_addCellsToContent:function(L,E,I,N,O,F){var K=this;var J="";var M;var P=this.slotTemplate;var H=this._groupOrientation()==="vertical";var G=function(Q){return function(){return K._resourceBySlot({groupIndex:Q})}};if(s.date.isToday(E[N])){J+="k-today"}if(s.date.getMilliseconds(I)<s.date.getMilliseconds(this.options.workDayStart)||s.date.getMilliseconds(I)>=s.date.getMilliseconds(this.options.workDayEnd)||!this._isWorkDay(E[N])){J+=" k-nonwork-hour"}L+="<td"+(J!==""?' class="'+J+'"':"")+">";M=s.date.getDate(E[N]);s.date.setTime(M,s.date.getMilliseconds(I));L+=P({date:M,resources:G(H&&!K._isGroupedByDate()?F:O)});L+="</td>";return L},_isWorkDay:function(F){var E=F.getDay();var H=this._workDays;for(var G=0;G<H.length;G++){if(H[G]===E){return true}}return false},_render:function(G){var F=this;G=G||[];this._dates=G;this._startDate=G[0];this._endDate=G[G.length-1||0];this.createLayout(this._layout(G));this._content(G);this._footer();this.refreshLayout();var E=this.element.find(".k-scheduler-header-all-day td");if(E.length){this._allDayHeaderHeight=E.first()[0].clientHeight}F.element.on("click"+A,".k-nav-day",function(K){var I=g(K.currentTarget).closest("th");var L=I.offset();var J=0;var H=e(I);if(F._isGroupedByDate()){if(F._isVerticallyGrouped()){J=b(F.times);H=0}else{H=e(F.datesHeader)}}var M=F._slotByPosition(L.left+J,L.top+H);F.trigger("navigate",{view:"day",date:M.startDate()})})},startTime:function(){var E=this.options;return E.showWorkHours?E.workDayStart:E.startTime},endTime:function(){var E=this.options;return E.showWorkHours?E.workDayEnd:E.endTime},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_end:function(E){var F=C(this.endTime())||d;if(E){F=0}return new Date(this._endDate.getTime()+F)},nextDate:function(){return s.date.nextDay(this.endDate())},previousDate:function(){return s.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},destroy:function(){var E=this;if(E._currentTimeUpdateTimer){clearInterval(E._currentTimeUpdateTimer)}if(E.datesHeader){E.datesHeader.off(A)}if(E.element){E.element.off(A)}if(E.footer){E.footer.remove()}c.fn.destroy.call(this);if(this._isMobile()&&E.options.editable){if(E.options.editable.create!==false){E._addUserEvents.destroy();E._allDayUserEvents.destroy()}if(E.options.editable.update!==false){E._editUserEvents.destroy()}}},inRange:function(G){var I=c.fn.inRange.call(this,G);if(G.isAllDay){return I}var H=C(this.startTime());var F=C(this.endTime())||s.date.MS_PER_DAY;var J=C(G.start);var E=C(G.end)||s.date.MS_PER_DAY;return I&&H<=J&&E<=F},selectionByElement:function(E){var F=E.offset();return this._slotByPosition(F.left,F.top)},_timeSlotInterval:function(){var E=this.options;return E.majorTick/E.minorTickCount*h},_timeSlotIndex:function(G){var F=this.options;var I=C(G);var H=C(this.startTime());var E=F.majorTick/F.minorTickCount*h;return(I-H)/E},_slotIndex:function(E,F){if(F){return this._dateSlotIndex(E)}return this._timeSlotIndex(E)},_dateSlotIndex:function(F,L){var E;var H;var G=this._dates||[];var K;var I;var J=1;for(E=0,H=G.length;E<H;E++){K=s.date.getDate(G[E]);I=new Date(s.date.getDate(G[E]).getTime()+d-(L?0:1));if(o(F,K,I)){return E*J}}return -1},_positionAllDayEvent:function(E,F){var J=F.innerWidth();var I=F.start.index;var G=F.end.index;var P=c.collidingEvents(F.events(),I,G);var L=this._headerColumnCount||0;var O=2;var Q=I!==G?5:4;var M=this._allDayHeaderHeight;var K=F.startSlot();E.css({left:K.offsetLeft+O,width:J-Q});F.addEvent({slotIndex:I,start:I,end:G,element:E});P.push({slotIndex:I,start:I,end:G,element:E});var N=c.createRows(P);if(N.length&&N.length>L){this._headerColumnCount=N.length}var S=F.start.offsetTop;for(var R=0,H=N.length;R<H;R++){var T=N[R].events;for(var U=0,V=T.length;U<V;U++){g(T[U].element).css({top:S+R*M})}}},_arrangeColumns:function(N,Q,T,O){var R=O.start;N={element:N,slotIndex:R.index,start:Q,end:Q+T};var K,H=R.clientWidth,L=H*0.1,P,G=O.events(),E=c.collidingEvents(G,N.start,N.end);O.addEvent(N);E.push(N);K=c.createColumns(E);var J=(H-L)/K.length;for(var S=0,I=K.length;S<I;S++){P=K[S].events;for(var M=0,F=P.length;M<F;M++){P[M].element[0].style.width=J-4+"px";P[M].element[0].style.left=(this._isRtl?L:0)+R.offsetLeft+S*J+2+"px"}}},_positionEvent:function(J,H,G){var K=J._startTime||J.start;var F=J._endTime||J.end;var I=G.innerRect(K,F,false);var E=I.bottom-I.top-2;if(E<0){E=0}H.css({top:I.top,height:E});this._arrangeColumns(H,I.top,H[0].clientHeight,G)},_createEventElement:function(R,W,I,L){var X=W?this.eventTemplate:this.allDayEventTemplate;var G=this.options;var Q=G.editable;var P=this._isMobile();var O=Q&&Q.destroy!==false&&!P;var K=Q&&Q.resize!==false;var F=n(this.startDate());var S=n(this.endDate());var N=C(this.startTime());var H=C(this.endTime());var J=R._time("start");var V=R._time("end");var Z;if(N>=H){H=C(new Date(this.endTime().getTime()+d-1))}if(!W&&!R.isAllDay){S=new Date(S.getTime()+d)}var U=R.start;var M=R.end;if(R.isAllDay){M=n(R.end)}if(!o(n(U),F,S)&&!o(M,F,S)||W&&J<N&&V>H){Z=true}else{if(n(U)<F||W&&J<N){L=true}else{if(M>S&&!W||W&&V>H){I=true}}}var T=this.eventResources(R);if(R._startTime&&J!==s.date.getMilliseconds(R.start)){U=new Date(J);U=s.timezone.apply(U,"Etc/UTC")}if(R._endTime&&V!==s.date.getMilliseconds(R.end)){M=new Date(V);M=s.timezone.apply(M,"Etc/UTC")}var Y=B({},{ns:s.ns,resizable:K,showDelete:O,middle:Z,head:I,tail:L,singleDay:this._dates.length==1,resources:T,inverseColor:T&&T[0]?this._shouldInverseResourceColor(T[0]):false},R,{start:U,end:M});var E=g(X(Y));this.angular("compile",function(){return{elements:E,data:[{dataItem:Y}]}});return E},_isInTimeSlot:function(H){var F=this.startTime(),J=this.endTime(),G=H._startTime||H.start,E=H._endTime||H.end;if(C(J)===C(s.date.getDate(J))){J=s.date.getDate(J);q(J,d-1)}if(H._date("end")>H._date("start")){E=+H._date("end")+(d-1)}E=E-H._date("end");G=G-H._date("start");J=C(J);F=C(F);if(F===G&&G===E){return true}var I=G!==J;return t(G,F,J,I)||t(E,F,J,I)||t(F,G,E)||t(J,G,E)},_isInDateSlot:function(H){var E=this.groups[0];var J=E.firstSlot().start;var I=E.lastSlot().end-1;var G=s.date.toUtcTime(H.start);var F=s.date.toUtcTime(H.end);return(o(G,J,I)||o(F,J,I)||o(J,G,F)||o(I,G,F))&&(!o(F,J,J)||o(F,G,G)||H.isAllDay)},_updateAllDayHeaderHeight:function(E){if(this._height!==E){this._height=E;var F=this.element.find(".k-scheduler-header-all-day td");if(F.length){F.parent().add(this.element.find(".k-scheduler-times-all-day").parent()).height(E);for(var G=0;G<this.groups.length;G++){this.groups[G].refresh()}}}},_renderEvents:function(G,K){var U=this.datesHeader.find(".k-scheduler-header-wrap > div");var X=this._isGroupedByDate();var Y;var V;var M;for(V=0,M=G.length;V<M;V++){Y=G[V];if(this._isInDateSlot(Y)){var aa=Y.isAllDay||Y.end.getTime()-Y.start.getTime()>=d;var S=aa&&!this._isVerticallyGrouped()?U:this.content;var H,J,T,P,L,R;if(!aa){if(this._isInTimeSlot(Y)){R=this.groups[K];if(!R._continuousEvents){R._continuousEvents=[]}J=R.slotRanges(Y);var ab=J.length;for(var ac=0;ac<ab;ac++){T=J[ac];P=Y.start;L=Y.end;if(ab>1){if(ac===0){L=T.end.endDate()}else{if(ac==ab-1){P=T.start.startDate()}else{P=T.start.startDate();L=T.end.endDate()}}}var N=Y.clone({start:P,end:L,_startTime:Y._startTime,_endTime:Y.endTime});if(this._isInTimeSlot(N)){var Q=T.head;H=this._createEventElement(Y,!aa,Q,T.tail);H.appendTo(S);this._positionEvent(N,H,T);u(R,T,H,false)}}}}else{if(this.options.allDaySlot){R=this.groups[K];if(!R._continuousEvents){R._continuousEvents=[]}J=R.slotRanges(Y);if(J.length){T=J[0];var O=T.start.index;var I=T.end.index;if(X&&O!==I){P=T.start.start;L=T.end.end;var F=new Date(P);var E=new Date(P);for(var Z=T.start.index;Z<=T.end.index;Z++){H=this._createEventElement(Y,!aa,Z!==I,Z!==O);var W=R.daySlotRanges(F,E,true)[0];E.setDate(E.getDate()+1);F.setDate(F.getDate()+1);this._positionAllDayEvent(H,W);u(R,W,H,true);H.appendTo(S)}}else{H=this._createEventElement(Y,!aa);this._positionAllDayEvent(H,J[0]);u(R,J[0],H,true);H.appendTo(S)}}}}}}},render:function(H){this._headerColumnCount=0;this._groups();this.element.find(".k-event").remove();H=new s.data.Query(H).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray();var G=[];this._eventsByResource(H,this.groupedResources,G);var F=g.map(this._dates,function(J){return Math.max.apply(null,g.map(G,function(K){return g.grep(K,function(L){return L.isMultiDay()&&o(J,n(L.start),n(L.end))}).length}))});var E=Math.max.apply(null,F);this._updateAllDayHeaderHeight((E+1)*this._allDayHeaderHeight);for(var I=0;I<G.length;I++){this._renderEvents(G[I],I)}this.refreshLayout();this._currentTime(false);this.trigger("activate")},_eventsByResource:function(G,K,E){var J=K[0];if(J){var F=J.dataSource.view();for(var H=0;H<F.length;H++){var I=this._resourceValue(J,F[H]);var L=new s.data.Query(G).filter({field:J.field,operator:c.groupEqFilter(I)}).toArray();if(K.length>1){this._eventsByResource(L,K.slice(1),E)}else{E.push(L)}}}else{E.push(G)}},_columnOffsetForResource:function(E){return this._columnCountForLevel(E)/this._columnCountForLevel(E-1)},_columnCountForLevel:function(F){var E=this.columnLevels[F];return E?E.length:0},_rowCountForLevel:function(F){var E=this.rowLevels[F];return E?E.length:0},clearSelection:function(){this.content.add(this.datesHeader).find(".k-state-selected").removeAttr("id").attr("aria-selected",false).removeClass("k-state-selected")},_updateDirection:function(K,G,F,I,H){var E=K.isAllDay;var L=G[0].start;var J=G[G.length-1].end;if(F){if(H){if(!E&&L.index===J.index&&L.collectionIndex===J.collectionIndex){K.backward=I}}else{if(E&&L.index===J.index||!E&&L.collectionIndex===J.collectionIndex){K.backward=I}}}},_changeViewPeriod:function(Q,O,H){if(!H){var F=O?this.previousDate():this.nextDate();var E=Q.start;var I=Q.end;var P=this._isGroupedByDate()&&this._isVerticallyGrouped();var R=this.groups[Q.groupIndex];var L=O?R._timeSlotCollections:R._getCollections(R.daySlotCollectionCount());var N=L[L.length-1]._slots;var M=!O&&!R.daySlotCollectionCount()?0:N.length-1;var K;Q.start=new Date(F);Q.end=new Date(F);if(P){var J=new Date(N[M].startDate());var G=new Date(N[M].endDate());K=C(G)?C(G):d;q(Q.start,C(J));q(Q.end,K);if(R.daySlotCollectionCount()){Q.isAllDay=!Q.isAllDay}}else{K=Q.isAllDay||!C(I)?d:C(I);q(Q.start,C(E));q(Q.end,K)}if(!this._isVerticallyGrouped()){Q.groupIndex=O?this.groups.length-1:0}Q.events=[];return true}}});B(true,r,{MultiDayView:p,DayView:p.extend({options:{name:"DayView",title:"Day"},name:"day"}),WeekView:p.extend({options:{name:"WeekView",title:"Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}"},name:"week",calculateDateRange:function(){var F=this.options.date,I=s.date.dayOfWeek(F,this.calendarInfo().firstDay,-1),E,G,H=[];for(E=0,G=7;E<G;E++){H.push(I);I=s.date.nextDay(I)}this._render(H)}}),WorkWeekView:p.extend({options:{name:"WorkWeekView",title:"Work Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}"},name:"workWeek",nextDate:function(){var E=s.date.dayOfWeek(s.date.nextDay(this.startDate()),this.calendarInfo().firstDay,1);return s.date.addDays(E,this._workDays[0])},previousDate:function(){var E=s.date.dayOfWeek(this.startDate(),this.calendarInfo().firstDay,-1);var F=this._workDays;return s.date.addDays(E,F[F.length-1]-7)},calculateDateRange:function(){var H=this.options.date,G=s.date.dayOfWeek,F=G(H,this.calendarInfo().firstDay,-1),J=G(F,this.options.workWeekStart,1),E=G(J,this.options.workWeekEnd,1),I=[];while(J<=E){I.push(J);J=s.date.nextDay(J)}this._render(I)}})})}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.scheduler.agendaview",["kendo.scheduler.view"],a)}(function(){var a={id:"scheduler.agendaview",name:"Scheduler Agenda View",category:"web",description:"The Scheduler Agenda View",depends:["scheduler.view"],hidden:true};(function(e){var g=window.kendo,i=g.ui,c=".kendoAgendaView";var f='<div class="k-task" title="#:title.replace(/"/g,"\'")#" data-#=kendo.ns#uid="#=uid#"># if (resources[0]) {#<span class="k-scheduler-mark" style="background-color:#=resources[0].color#"></span># } ## if (data.isException()) { #<span class="k-icon k-i-warning"></span># } else if (data.isRecurring()) {#<span class="k-icon k-i-reload"></span># } #{0}#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-i-close"></span></a>#}#</div>';var l=g.Class.extend({init:function(m){this._view=m},_getColumns:function(n,m){return n.concat(m)},_getGroupsInDay:function(){return[]},_getSumOfItemsForDate:function(){return 0},_renderTaskGroupsCells:function(p,m,o,q){var n=this._view;if(o===0&&q===0&&m.length){n._renderTaskGroupsCells(p,m)}},_renderDateCell:function(n,m,s,q,p,r){var o=this._view;n.push(g.format('<td class="k-scheduler-datecolumn{3}{2}" rowspan="{0}">{1}</td>',s.length,o._dateTemplate({date:q}),p==r.length-1&&!m.length?" k-last":"",!m.length?" k-first":""))},_renderDates:function(){return undefined},_getParents:function(m){return m.splice(0)},_getGroupsByDate:function(){return undefined},_renderTaskGroups:function(p,n,o){var m=this._view;p.append(m._renderTaskGroups(n,o))}});var j=g.Class.extend({init:function(m){this._view=m},_getColumns:function(q,o){var m=this._view;if(m._isMobilePhoneView()){return q.concat(o)}else{var n=o.slice(0,1);var p=o.slice(1);return n.concat(q).concat(p)}},_compareDateGroups:function(n,o,m){if(n[m].text==o[m].text){if(m===0){return true}else{return this._compareDateGroups(n,o,m-1)}}return false},_getGroupsInDay:function(s,m){var q=[];var r=null;for(var p=0;p<s.length;p++){for(var o=0;o<s[p].items.length;o++){var t=0;if(q.length===0){for(t;t<m[p].length;t++){q.push([1])}}else{for(t;t<m[p].length;t++){if(this._compareDateGroups(m[p],r,t)){q[t][q[t].length-1]++}else{var u=q[t][q[t].length-1]-1;for(var n=0;n<u;n++){q[t].push(0)}q[t].push(1)}}}r=m[p]}}return q},_getSumOfItemsForDate:function(n){var o=0;for(var m=0;m<n.length;m++){o+=n[m].items.length}return o},_renderTaskGroupsCells:function(t,o,n,q,r,v,p,w){var s=this._view;var m=s._isMobilePhoneView();if(!m){if(n===0&&q===0){t.push(g.format('<td class="k-scheduler-datecolumn k-first" rowspan="{0}">{1}</td>',v,s._dateTemplate({date:p})))}for(var u=0;u<o[n].length;u++){if(r[u][w]){t.push(g.format('<td class="k-scheduler-groupcolumn" rowspan="{0}">{1}</td>',r[u][w],s._groupTemplate({value:o[n][u].text}),o[n][u].className))}}}else{if(n===0&&q===0&&o.length){s._renderTaskGroupsCells(t,o)}}},_renderDateCell:function(){return undefined},_renderDates:function(p){var m=this._view;var o=m._groupsByDate.sort(function(r,q){return r.array[0].value.getTime()-q.array[0].value.getTime()});for(var n=0;n<o.length;n++){p.append(m._renderTaskGroups(o[n].array,o[n].groups))}},_getParents:function(m){return m.slice(0)},_getGroupsByDate:function(n,m,r){var p=this._view;if(n[m].items){for(var o=0;o<n[m].items.length;o++){var q=n[m].items[o].value;var t=false;for(var s=0;s<p._groupsByDate.length;s++){if(p._groupsByDate[s].array[0].value.getTime()===q.getTime()){t=true;p._groupsByDate[s].array.push(n[m].items[o]);p._groupsByDate[s].groups.push(r)}}if(!t){p._groupsByDate.push({array:[n[m].items[o]],groups:[r]})}}}},_renderTaskGroups:function(){return undefined}});g.ui.scheduler.AgendaGroupedView=l;g.ui.scheduler.AgendaGroupedByDateView=j;i.AgendaView=i.SchedulerView.extend({init:function(n,m){i.SchedulerView.fn.init.call(this,n,m);this._groupedView=this._getGroupedView();m=this.options;if(m.editable){m.editable=e.extend({"delete":true},m.editable,{create:false,update:false})}this.title=m.title;this._eventTemplate=this._eventTmpl(m.eventTemplate,f);this._dateTemplate=g.template(m.eventDateTemplate);this._groupTemplate=g.template(m.eventGroupTemplate);this._timeTemplate=g.template(m.eventTimeTemplate);this.element.on("mouseenter"+c,".k-scheduler-agenda .k-scheduler-content tr","_mouseenter").on("mouseleave"+c,".k-scheduler-agenda .k-scheduler-content tr","_mouseleave").on("click"+c,".k-scheduler-agenda .k-scheduler-content .k-link:has(.k-i-close)","_remove");this._renderLayout(m.date)},name:"agenda",_getGroupedView:function(){if(this._isGroupedByDate()){return new g.ui.scheduler.AgendaGroupedByDateView(this)}else{return new g.ui.scheduler.AgendaGroupedView(this)}},_mouseenter:function(m){e(m.currentTarget).addClass("k-state-hover")},_mouseleave:function(m){e(m.currentTarget).removeClass("k-state-hover")},_remove:function(m){m.preventDefault();this.trigger("remove",{uid:e(m.currentTarget).closest(".k-task").attr(g.attr("uid"))})},nextDate:function(){return g.date.nextDay(this.startDate())},startDate:function(){return this._startDate},endDate:function(){return this._endDate},previousDate:function(){return g.date.previousDay(this.startDate())},_renderLayout:function(m){this._startDate=m;this._endDate=g.date.addDays(m,7);this.createLayout(this._layout());this.table.addClass("k-scheduler-agenda")},_layout:function(){var n=[{text:this.options.messages.time,className:"k-scheduler-timecolumn"},{text:this.options.messages.event}];if(!this._isMobilePhoneView()){n.splice(0,0,{text:this.options.messages.date,className:"k-scheduler-datecolumn"})}var o=this.groupedResources;if(o.length){var p=[];for(var m=0;m<o.length;m++){p.push({text:"",className:"k-scheduler-groupcolumn"})}n=this._groupedView._getColumns(p,n)}return{columns:n}},_tasks:function(u){var r=[];for(var t=0;t<u.length;t++){var n=u[t];var o=n.start;var q=n.isAllDay?g.date.getDate(n.end):n.end;var m=Math.ceil((q-g.date.getDate(o))/g.date.MS_PER_DAY);if(n.isAllDay){m+=1}var p=n.clone();p.startDate=g.date.getDate(o);if(p.startDate>=this.startDate()){r.push(p)}if(m>1){p.end=g.date.nextDay(o);p.head=true;for(var s=1;s<m;s++){o=p.end;p=n.clone();p.start=p.startDate=g.date.getDate(o);p.end=g.date.nextDay(o);if(s==m-1){p.end=new Date(p.start.getFullYear(),p.start.getMonth(),p.start.getDate(),q.getHours(),q.getMinutes(),q.getSeconds(),q.getMilliseconds());p.tail=true}else{p.isAllDay=true;p.middle=true}if(g.date.getDate(p.end)<=this.endDate()&&p.start>=this.startDate()||g.date.getDate(p.start).getTime()==this.endDate().getTime()){r.push(p)}}}}return new g.data.Query(r).sort([{field:"start",dir:"asc"},{field:"end",dir:"asc"}]).groupBy({field:"startDate"}).toArray()},_renderTaskGroups:function(y,s){var z=[];var r=this.options.editable;var m=r&&r.destroy!==false&&!this._isMobile();var n=this._isMobilePhoneView();var C=this._groupedView._getSumOfItemsForDate(y);var w=this._groupedView._getGroupsInDay(y,s);var B=0;for(var q=0;q<y.length;q++){var t=y[q].value;var u=y[q].items;var x=g.date.isToday(t);for(var v=0;v<u.length;v++){var p=u[v];var o=[];var A=!n?o:[];this._groupedView._renderTaskGroupsCells(A,s,q,v,w,C,t,B);B++;if(v===0){if(n){A.push(g.format('<td class="k-scheduler-datecolumn" colspan="2">{0}</td>',this._dateTemplate({date:t})));z.push('<tr role="row" aria-selected="false"'+(x?' class="k-today">':">")+A.join("")+"</tr>")}else{this._groupedView._renderDateCell(o,s,u,t,q,y)}}if(p.head){p.format="{0:t}"}else{if(p.tail){p.format="{1:t}"}else{p.format="{0:t}-{1:t}"}}p.resources=this.eventResources(p);o.push(g.format('<td class="k-scheduler-timecolumn"><div>{0}{1}{2}</div></td><td>{3}</td>',p.tail||p.middle?'<span class="k-icon k-i-arrow-60-left"></span>':"",this._timeTemplate(p.clone({start:p._startTime||p.start,end:p.endTime||p.end})),p.head||p.middle?'<span class="k-icon k-i-arrow-60-right"></span>':"",this._eventTemplate(p.clone({showDelete:m}))));z.push('<tr role="row" aria-selected="false"'+(x?' class="k-today">':">")+o.join("")+"</tr>")}}return z.join("")},_renderTaskGroupsCells:function(o,n){for(var m=0;m<n.length;m++){o.push(g.format('<td class="k-scheduler-groupcolumn{2}" rowspan="{0}">{1}</td>',n[m].rowSpan,this._groupTemplate({value:n[m].text}),n[m].className))}},render:function(o){var p=this.content.find("table").empty();var m=[];if(o.length>0){var q=this.groupedResources;if(q.length){m=this._createGroupConfiguration(o,q,null);this._groupsByDate=[];this._renderGroups(m,p,[]);this._groupedView._renderDates(p)}else{m=this._tasks(o);p.append(this._renderTaskGroups(m,[]))}}var n=this._eventsList=b(m);this._angularItems(p,n);this.refreshLayout();this.trigger("activate")},_angularItems:function(n,m){this.angular("compile",function(){var p=[],o=m.map(function(q){p.push({dataItem:q});return n.find(".k-task["+g.attr("uid")+"="+q.uid+"]")});return{elements:o,data:p}})},_renderGroups:function(n,r,p){for(var m=0,q=n.length;m<q;m++){var o=this._groupedView._getParents(p);o.push(n[m]);this._groupedView._getGroupsByDate(n,m,o);if(n[m].groups){this._renderGroups(n[m].groups,r,o)}else{this._groupedView._renderTaskGroups(r,n[m].items,o)}}},_createGroupConfiguration:function(z,o,y){var p=o[0];var n=[];var t=p.dataSource.view();var m=this._isMobilePhoneView();for(var v=0;v<t.length;v++){var x=k(p,t[v]);var s=new g.data.Query(z).filter({field:p.field,operator:i.SchedulerView.groupEqFilter(x)}).toArray();if(s.length){var q=this._tasks(s);var u=y?"":" k-first";if(v===t.length-1&&(!y||y.className.indexOf("k-last")>-1)){u+=" k-last"}var r={text:g.getter(p.dataTextField)(t[v]),value:x,rowSpan:0,className:u};if(o.length>1){r.groups=this._createGroupConfiguration(s,o.slice(1),r);if(y){y.rowSpan+=r.rowSpan}}else{r.items=q;var w=h(r.items);if(m){w+=r.items.length}r.rowSpan=w;if(y){y.rowSpan+=w}}n.push(r)}}return n},selectionByElement:function(m){var n,p;m=e(m);if(m.hasClass("k-scheduler-datecolumn")||!this._eventsList.length){return}if(m.is(".k-task")){m=m.closest("td")}if(this._isMobile()){var o=m.parent();n=o.parent().children().filter(function(){return e(this).children(":not(.k-scheduler-datecolumn)").length}).index(o)}else{n=m.parent().index()}p=this._eventsList[n];return{index:n,start:p.start,end:p.end,isAllDay:p.isAllDay,uid:p.uid}},select:function(m){this.clearSelection();var n=this.table.find(".k-task").eq(m.index).closest("tr").addClass("k-state-selected").attr("aria-selected",true)[0];this.current(n)},move:function(o,n){var q=false;var m=o.index;if(n==g.keys.UP){m--;q=true}else{if(n==g.keys.DOWN){m++;q=true}}if(q){var p=this._eventsList[m];if(p){o.start=p.start;o.end=p.end;o.isAllDay=p.isAllDay;o.events=[p.uid];o.index=m}}return q},moveToEvent:function(){return false},constrainSelection:function(m){var n=this._eventsList[0];if(n){m.start=n.start;m.end=n.end;m.isAllDay=n.isAllDay;m.events=[n.uid];m.index=0}},isInRange:function(){return true},destroy:function(){if(this.element){this.element.off(c)}i.SchedulerView.fn.destroy.call(this)},options:{title:"Agenda",name:"agenda",editable:true,selectedDateFormat:"{0:D}-{1:D}",selectedShortDateFormat:"{0:d} - {1:d}",eventTemplate:"#:title#",eventTimeTemplate:"#if(data.isAllDay) {##=this.options.messages.allDay##} else { ##=kendo.format(format, start, end)## } #",eventDateTemplate:'<strong class="k-scheduler-agendaday">#=kendo.toString(date, "dd")#</strong><em class="k-scheduler-agendaweek">#=kendo.toString(date,"dddd")#</em><span class="k-scheduler-agendadate">#=kendo.toString(date, "y")#</span>',eventGroupTemplate:'<strong class="k-scheduler-adgendagroup">#=value#</strong>',messages:{event:"Event",date:"Date",time:"Time",allDay:"all day"}}});function h(p){var n=0;for(var m=0,o=p.length;m<o;m++){n+=p[m].items.length}return n}function k(n,m){if(n.valuePrimitive){m=g.getter(n.dataValueField)(m)}return m}function b(o){var n=0,q=o.length,p,m=[];for(;n<q;n++){p=o[n];if(p.groups){p=d(p.groups);m=m.concat(p)}else{m=m.concat(d(p.items))}}return m}function d(n){var o=[].concat(n),q=o.shift(),m=[],p=[].push;while(q){if(q.groups){p.apply(o,q.groups)}else{if(q.items){p.apply(o,q.items)}else{p.call(m,q)}}q=o.shift()}return m}}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.scheduler.monthview",["kendo.scheduler.view"],a)}(function(){var a={id:"scheduler.monthview",name:"Scheduler Month View",category:"web",description:"The Scheduler Month View",depends:["scheduler.view"],hidden:true};(function(d){var n=window.kendo,m=n.ui,b=m.SchedulerView,p=".kendoMonthView",q=d.extend,j=n.date.getDate,c=n.date.MS_PER_DAY,s=6,e=7,r=n.template('<span class="k-link k-nav-day">#:kendo.toString(date, "dd")#</span>'),t='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-60-left"></span>#}## if(data.isException()) {#<span class="k-icon k-i-warning"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-reload"></span>#}#</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-i-close"></span></a>#}## if(data.head || data.middle) {#<span class="k-icon k-i-arrow-60-right"></span>#}#</span># if(resizable && !data.tail && !data.middle) {#<span class="k-resize-handle k-resize-w"></span>#}## if(resizable && !data.head && !data.middle) {#<span class="k-resize-handle k-resize-e"></span>#}#</div>',f=n.template('<div title="#=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template">#:title#</div></div>');var g=n.template('<div style="width:#=width#px;left:#=left#px;top:#=top#px" class="k-more-events k-button"><span>...</span></div>');var l=n.Class.extend({init:function(u){this._view=u},_verticalRowCountForLevel:function(v){var u=this._view;return u._rowCountForLevel(v)},_horizontalGroupCountForLevel:function(v){var u=this._view;return u._columnCountForLevel(v)},_getCalendarRowsLength:function(v,u){return u/v},_createRows:function(v,z,B,y){var A=this._view;var w=e;var u=A._isVerticallyGrouped();var x="";for(var C=0;C<B;C++){x+=A._createRow(v,z,w,u?y:C)}return x},_adjustStartDate:function(u){return n.date.addDays(u,e)},_getContent:function(v,u,w){return v({date:u,resources:w})},_getTimeSlotByPosition:function(u,z,v){var w=this._view.groups[v];return w.daySlotByPosition(u,z)},_nextSlotStartDate:function(u){return n.date.nextDay(u)},_createRowsLayout:function(x,w,v){var u=this._view;return u._createRowsLayout(x,w,v)},_createVerticalColumnsLayout:function(x,w,v,u){return u},_createColumnsLayout:function(x,w,v){var u=this._view;return u._createColumnsLayout(x,w,v)},_verticalGroupCount:function(v){var u=this._view;return u._rowCountForLevel(v)},_horizontalGroupCount:function(v){var u=this._view;return u._columnCountForLevel(v)/u._columnOffsetForResource(v)},_positionEvent:function(u,D,z,w,v,x,y){var A=this._view;var C=A._isMobilePhoneView();if(w>1){if(y===0){x=z.end.endDate()}else{if(y==w-1){v=z.start.startDate()}else{v=z.start.startDate();x=z.end.endDate()}}}var B=u.clone({start:v,end:x,head:z.head,tail:z.tail});if(C){A._positionMobileEvent(z,A._createEventElement(B),D)}else{A._positionEvent(z,A._createEventElement(B),D)}},_addDaySlotCollections:function(I,D,v){var F=this._view;var z=e;var E=s;for(var J=0;J<I;J++){var B=0;var y=0;if(F._isVerticallyGrouped()){y=J}for(var C=y*E;C<(y+1)*E;C++){var H=F.groups[J];var x=H.addDaySlotCollection(n.date.addDays(v,B),n.date.addDays(v,B+z));var u=D[C];var K=u.children;var w=0;u.setAttribute("role","row");if(!F._isVerticallyGrouped()){w=J}for(var A=w*z;A<(w+1)*z;A++){var G=K[A];F.addDaySlot(x,G,v,B);B++}}}},_changePeriodGroupIndex:function(v){var u=this._view;return v?u.groups.length-1:0},_createResizeHint:function(w){var v=this._view;var z=w.startSlot().offsetLeft;var y=w.start.offsetTop;var x=w.innerWidth();var u=w.start.clientHeight-2;var A=b.fn._createResizeHint.call(v,z,y,x,u);v._appendResizeHint(A)},_createMoveHint:function(v,x){var u=this._view;var y=v.startSlot();var w=v.endSlot();var z=u._createEventElement(x.clone({head:v.head,tail:v.tail}));z.css({left:y.offsetLeft+2,top:y.offsetTop+y.firstChildHeight,height:u.options.eventHeight,width:v.innerWidth()-(y.index!==w.index?5:4)});z.addClass("k-event-drag-hint");u._appendMoveHint(z)}});var i=n.Class.extend({init:function(u){this._view=u},_verticalRowCountForLevel:function(){return 1},_horizontalGroupCountForLevel:function(v){var u=this._view;return u._columnCountForLevel(v+1)/e},_createRows:function(v,z,C){var A=this._view;var w=e;var u=A._isVerticallyGrouped();var y="";var x=0;if(u){var B=new Date(v);var D=A._groupCount();for(x;x<s;x++){y+=A._createRow(B,z,D,x);B=n.date.addDays(B,w)}v=n.date.nextDay(v)}else{for(x;x<w;x++){y+=A._createRow(v,z,C,x);v=n.date.nextDay(v)}v=n.date.addDays(v,w)}return y},_adjustStartDate:function(x,w){var u=this._view;var v=u._isVerticallyGrouped();if(v){if(w){return n.date.addDays(x,e*(s-1)+1)}else{return n.date.nextDay(x)}}return n.date.addDays(x,e)},_getContent:function(w,u,x,v){if(v===0){return w({date:u,resources:x})}return""},_getTimeSlotByPosition:function(u,z,v){var w=this._view.groups[v];return w.daySlotByPosition(u,z,true)},_nextSlotStartDate:function(u){return u},_getCalendarRowsLength:function(){var u=this._view;var v=u._isVerticallyGrouped();return v?e:s},_createRowsLayout:function(y,x,w,v){var u=this._view;return u._createDateLayout(v,null,false)},_createVerticalColumnsLayout:function(w,C,u){var A=this._view;var x=w[0];var v=[];var z=x.dataSource.view();for(var B=0;B<z.length*s;B++){var y={text:u({text:n.htmlEncode(n.getter(x.dataTextField)(z[B%z.length])),color:n.getter(x.dataColorField)(z[B%z.length]),field:x.field,title:x.title,name:x.name,value:n.getter(x.dataValueField)(z[B%z.length])}),className:"k-slot-cell"};y.columns=A._createColumnsLayout(w.slice(1),null,u);v.push(y)}return v},_createColumnsLayout:function(y,x,w,u){var v=this._view;return v._createColumnsLayout(y,x,w,u,true)},_verticalGroupCount:function(v){var u=this._view;return u._columnCountForLevel(v)/s},_horizontalGroupCount:function(v){var u=this._view;return u._columnCountForLevel(v)/e},_positionEvent:function(u,G,A,w,v,x){var C=this._view;var F=A.start.index;var z=A.end.index;var E=C._isMobilePhoneView();for(var y=A.start.index;y<=A.end.index;y++){var B=A.collection._slots[y];var H=G.daySlotRanges(B.start,B.start,true)[0];var D=u.clone({start:y===F?B.start:v,end:y===z?B.end:x,head:y!==z||A.head,tail:y!==F||A.tail});if(E){C._positionMobileEvent(H,C._createEventElement(D),G)}else{C._positionEvent(H,C._createEventElement(D),G)}}},_addDaySlotCollections:function(x,L,w){var J=this._view;var N=e;var E=s;var H=J._isVerticallyGrouped();for(var I=0;I<N;I++){for(var F=0;F<E;F++){var y=0;var v=H?I:F;var O=L[v];var z=O.children;var M=0;O.setAttribute("role","row");if(!J._isVerticallyGrouped()){M=I}for(var C=M*x;C<(M+1)*x;C++){var D=F*N+I;var G=H?C+F*x:C;var u=z[G];var A=H?C:y;var B=J.groups[A];var K;if(I===0){K=B.addDaySlotCollection(n.date.addDays(w,D),n.date.addDays(w,D+N))}else{K=B._daySlotCollections[F]}J.addDaySlot(K,u,w,D);y++}}}},_changePeriodGroupIndex:function(w,v,x){var u=this._view;if(v&&u._isVerticallyGrouped()){return w?u.groups.length-1:0}return x},_createResizeHint:function(x){var A=this._view;var v,z,u,C,w;if(A._isVerticallyGrouped()){v=x.startSlot().offsetLeft;z=x.start.offsetTop;u=x.startSlot().offsetWidth;C=x.endSlot().offsetTop+x.startSlot().offsetHeight-x.startSlot().offsetTop-2;w=b.fn._createResizeHint.call(A,v,z,u,C);A._appendResizeHint(w)}else{for(var y=x.startSlot().index;y<=x.endSlot().index;y++){var B=x.collection._slots[y];v=B.offsetLeft;z=B.offsetTop;u=B.offsetWidth;C=B.offsetHeight-2;w=b.fn._createResizeHint.call(A,v,z,u,C);A._appendResizeHint(w)}}},_createMoveHint:function(v,y){var u=this._view;var z=v.startSlot();var w=v.endSlot();for(var x=z.index;x<=w.index;x++){var B=v.collection._slots[x];var A=u._createEventElement(y.clone({head:v.head,tail:v.tail}));A.css({left:B.offsetLeft,top:B.offsetTop+B.firstChildHeight,height:u.options.eventHeight,width:B.offsetWidth-2});A.addClass("k-event-drag-hint");u._appendMoveHint(A)}}});n.ui.scheduler.MonthGroupedView=l;n.ui.scheduler.MonthGroupedByDateView=i;m.MonthView=b.extend({init:function(v,u){var w=this;b.fn.init.call(w,v,u);w._groupedView=w._getGroupedView();w.title=w.options.title;w._templates();w._editable();w._renderLayout(w.options.date);w._groups()},name:"month",_getGroupedView:function(){if(this._isGroupedByDate()){return new n.ui.scheduler.MonthGroupedByDateView(this)}else{return new n.ui.scheduler.MonthGroupedView(this)}},_updateDirection:function(B,v,D,z,w){if(D){var A=v[0].start;var u=v[v.length-1].end;var x=A.index===u.index;var y=A.collectionIndex===u.collectionIndex;var C;if(w){C=x&&y||y}else{C=x&&y}if(C){B.backward=z}}},_changeDate:function(w,A,y){var z=this.groups[w.groupIndex];var x,v;if(y){x=z._getCollections(z.daySlotCollectionCount());v=A.collectionIndex-1;if(v>=0){return x[v]._slots[x[v]._slots.length-1]}}else{x=z._getCollections(z.daySlotCollectionCount());v=A.collectionIndex+1;var u=0;if(x[v]&&x[v]._slots[u]){return x[v]._slots[u]}}},_getNextHorizontalRange:function(v,x,u){var w=this._isVerticallyGrouped();u.startSlot=v[x](u.startSlot,w);u.endSlot=v[x](u.endSlot,w);return u},_getNextVerticalRange:function(w,y,v,u){var x=this._isVerticallyGrouped()&&this._isGroupedByDate();v.startSlot=w[y](v.startSlot,u,x);v.endSlot=w[y](v.endSlot,u,x);return v},_changeViewPeriod:function(w,v,u){var x=u?7:1;if(v){x*=-1}w.start=n.date.addDays(w.start,x);w.end=n.date.addDays(w.end,x);if(!u||u&&this._isVerticallyGrouped()){w.groupIndex=this._groupedView._changePeriodGroupIndex(v,u,w.groupIndex)}w.events=[];return true},_continuousSlot:function(x,u,w){var v=x.backward?0:u.length-1;var y=this.groups[x.groupIndex];return y.continuousSlot(u[v].start,w)},_changeGroupContinuously:function(z,y,u,x){if(!u){var A=z.groupIndex;var v=this.groups.length-1;var w=this._isVerticallyGrouped();var B=this.groups[A];if(!y&&w){y=B[x?"lastSlot":"firstSlot"]();A+=x?-1:1}else{if(y&&!w){A=x?v:0}}if(A<0||A>v){A=x?v:0;y=null}z.groupIndex=A}return y},_normalizeHorizontalSelection:function(w,u,v){var x;if(v){x=u[0].start}else{x=u[u.length-1].end}return x},_normalizeVerticalSelection:function(v,u){var w;if(v.backward){w=u[0].start}else{w=u[u.length-1].end}return w},_templates:function(){var u=this.options,v=q({},n.Template,u.templateSettings);this.eventTemplate=this._eventTmpl(u.eventTemplate,t);this.dayTemplate=n.template(u.dayTemplate,v);this.groupHeaderTemplate=n.template(u.groupHeaderTemplate,v)},dateForTitle:function(){return n.format(this.options.selectedDateFormat,this._firstDayOfMonth,this._lastDayOfMonth)},shortDateForTitle:function(){return n.format(this.options.selectedShortDateFormat,this._firstDayOfMonth,this._lastDayOfMonth)},nextDate:function(){return n.date.nextDay(this._lastDayOfMonth)},previousDate:function(){return n.date.previousDay(this._firstDayOfMonth)},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_renderLayout:function(u){var v=this;this._firstDayOfMonth=n.date.firstDayOfMonth(u);this._lastDayOfMonth=n.date.lastDayOfMonth(u);this._startDate=h(u,this.calendarInfo());this.createLayout(this._layout());this._content();this.refreshLayout();this.content.on("click"+p,".k-nav-day,.k-more-events",function(w){var x=d(w.currentTarget).offset();var y=v._slotByPosition(x.left,x.top);w.preventDefault();v.trigger("navigate",{view:"day",date:y.startDate()})})},_editable:function(){if(this.options.editable&&!this._isMobilePhoneView()){if(this._isMobile()){this._touchEditable()}else{this._mouseEditable()}}},_mouseEditable:function(){var u=this;u.element.on("click"+p,".k-scheduler-monthview .k-event a:has(.k-i-close)",function(v){u.trigger("remove",{uid:d(this).closest(".k-event").attr(n.attr("uid"))});v.preventDefault()});if(u.options.editable.create!==false){u.element.on("dblclick"+p,".k-scheduler-monthview .k-scheduler-content td",function(v){var x=d(v.currentTarget).offset();var y=u._slotByPosition(x.left,x.top);if(y){var w=u._resourceBySlot(y);u.trigger("add",{eventInfo:q({isAllDay:true,start:y.startDate(),end:y.startDate()},w)})}v.preventDefault()})}if(u.options.editable.update!==false){u.element.on("dblclick"+p,".k-scheduler-monthview .k-event",function(v){u.trigger("edit",{uid:d(this).closest(".k-event").attr(n.attr("uid"))});v.preventDefault()})}},_touchEditable:function(){var v=this;var u=0;if(n.support.mobileOS.android){u=5}if(v.options.editable.create!==false){v._addUserEvents=new n.UserEvents(v.element,{threshold:u,filter:".k-scheduler-monthview .k-scheduler-content td",tap:function(w){var y=d(w.target).offset();var z=v._slotByPosition(y.left,y.top);if(z){var x=v._resourceBySlot(z);v.trigger("add",{eventInfo:q({isAllDay:true,start:z.startDate(),end:z.startDate()},x)})}w.preventDefault()}})}if(v.options.editable.update!==false){v._editUserEvents=new n.UserEvents(v.element,{threshold:u,filter:".k-scheduler-monthview .k-event",tap:function(w){if(d(w.event.target).closest("a:has(.k-i-close)").length===0){v.trigger("edit",{uid:d(w.target).closest(".k-event").attr(n.attr("uid"))});w.preventDefault()}}})}},selectionByElement:function(u){var v=d(u).offset();return this._slotByPosition(v.left,v.top)},_columnCountForLevel:function(v){var u=this.columnLevels[v];return u?u.length:0},_rowCountForLevel:function(v){var u=this.rowLevels[v];return u?u.length:0},_content:function(){var u="<tbody>";var x=1;var w=this._groupedView;var v=this.groupedResources;if(v.length){if(this._isVerticallyGrouped()){x=w._verticalRowCountForLevel(v.length-1)}}for(var y=0;y<x;y++){u+=this._createCalendar(y)}u+="</tbody>";this.content.find("table").html(u)},_createCalendar:function(A){var w=this.startDate();var C=e*s;var y=e;var G=[w];var z="";var D=1;var u=this._isVerticallyGrouped();var F=this._groupedView;var x=this.groupedResources;if(x.length){if(!u){D=F._horizontalGroupCountForLevel(x.length-1)}}this._slotIndices={};var E=F._getCalendarRowsLength(y,C);for(var v=0;v<E;v++){z+="<tr>";G.push(w);var B=v*y;z+=F._createRows(w,B,D,A);w=F._adjustStartDate(w,v===E-1);z+="</tr>"}this._weekStartDates=G;this._endDate=n.date.previousDay(w);return z},_createRow:function(v,D,y,F){var B=this;var z=B._firstDayOfMonth;var E=B._lastDayOfMonth;var C=B.dayTemplate;var x="";var A="";var G=this._groupedView;var w=function(){return B._resourceBySlot({groupIndex:F})};for(var u=0;u<y;u++){x="";if(n.date.isToday(v)){x+="k-today"}if(!n.date.isInDateRange(v,z,E)){x+=" k-other-month"}A+="<td ";if(x!==""){A+='class="'+x+'"'}A+=">";A+=G._getContent(C,v,w,u);A+="</td>";B._slotIndices[j(v).getTime()]=D+u;v=G._nextSlotStartDate(v)}return A},_layout:function(){var u=this.calendarInfo();var y=this._isMobile()?u.days.namesShort:u.days.names;var x=o(y,u.firstDay);var w=d.map(x,function(D){return{text:D}});var v=this.groupedResources;var B;var A=this._groupedView;if(v.length){if(this._isVerticallyGrouped()){var C=[];for(var z=0;z<6;z++){C.push({text:"<div>&nbsp;</div>",className:"k-hidden k-slot-cell"})}B=A._createRowsLayout(v,C,this.groupHeaderTemplate,w);w=A._createVerticalColumnsLayout(v,C,this.groupHeaderTemplate,w)}else{w=A._createColumnsLayout(v,w,this.groupHeaderTemplate,w)}}return{columns:w,rows:B}},_createEventElement:function(y){var v=this.options;var x=v.editable;var u=this._isMobile();y.showDelete=x&&x.destroy!==false&&!u;y.resizable=x&&x.resize!==false&&!u;y.ns=n.ns;y.resources=this.eventResources(y);y.inverseColor=y.resources&&y.resources[0]?this._shouldInverseResourceColor(y.resources[0]):false;var w=d(this.eventTemplate(y));this.angular("compile",function(){return{elements:w,data:[{dataItem:y}]}});return w},_isInDateSlot:function(x){var u=this.groups[0];var z=u.firstSlot().start;var y=u.lastSlot().end-1;var w=n.date.toUtcTime(x.start);var v=n.date.toUtcTime(x.end);return(k(w,z,y)||k(v,z,y)||k(z,w,v)||k(y,w,v))&&(!k(v,z,z)||k(v,w,w)||x.isAllDay)},_slotIndex:function(u){return this._slotIndices[j(u).getTime()]},_positionMobileEvent:function(y,w,C){var z=y.start;if(y.start.offsetLeft>y.end.offsetLeft){z=y.end}var B=y.start.index;var x=B;var u=3;var D=b.collidingEvents(y.events(),B,x);D.push({element:w,start:B,end:x});var E=b.createRows(D);var A=y.collection.at(B);var v=A.container;if(!v){v=d(n.format('<div class="k-events-container" style="top:{0};left:{1};width:{2}"/>',z.offsetTop+z.firstChildTop+z.firstChildHeight-3+"px",z.offsetLeft+"px",z.offsetWidth+"px"));A.container=v;this.content[0].appendChild(v[0])}if(E.length<=u){y.addEvent({element:w,start:B,end:x,groupIndex:z.groupIndex});C._continuousEvents.push({element:w,uid:w.attr(n.attr("uid")),start:y.start,end:y.end});v[0].appendChild(w[0])}},_positionEvent:function(w,v,E){var D=this.options.eventHeight;var G=w.start;if(w.start.offsetLeft>w.end.offsetLeft){G=w.end}var B=w.start.index;var x=w.end.index;var C=G.eventCount;var u=b.collidingEvents(w.events(),B,x);var H=B!==x?5:4;u.push({element:v,start:B,end:x});var F=b.createRows(u);for(var J=0,A=Math.min(F.length,C);J<A;J++){var K=F[J].events;var y=G.offsetTop+G.firstChildHeight+J*D+3*J+"px";for(var L=0,N=K.length;L<N;L++){K[L].element[0].style.top=y}}if(F.length>C){for(var M=B;M<=x;M++){var I=w.collection;var z=I.at(M);if(z.more){return}z.more=d(g({ns:n.ns,start:M,end:M,width:z.clientWidth-2,left:z.offsetLeft+2,top:z.offsetTop+z.firstChildHeight+C*D+3*C}));this.content[0].appendChild(z.more[0])}}else{w.addEvent({element:v,start:B,end:x,groupIndex:G.groupIndex});v[0].style.width=w.innerWidth()-H+"px";v[0].style.left=G.offsetLeft+2+"px";v[0].style.height=D+"px";E._continuousEvents.push({element:v,uid:v.attr(n.attr("uid")),start:w.start,end:w.end});v.appendTo(this.content)}},_slotByPosition:function(u,A){var w=this.content.offset();u-=w.left;A-=w.top;A+=this.content[0].scrollTop;u+=this.content[0].scrollLeft;u=Math.ceil(u);A=Math.ceil(A);for(var v=0;v<this.groups.length;v++){var z=this._groupedView._getTimeSlotByPosition(u,A,v);if(z){return z}}return null},_appendResizeHint:function(u){u.appendTo(this.content);this._resizeHint=this._resizeHint.add(u)},_updateResizeHint:function(y,z,x,w){this._removeResizeHint();var A=this.groups[z];var v=A.ranges(x,w,true,y.isAllDay);for(var u=0;u<v.length;u++){this._groupedView._createResizeHint(v[u])}this._resizeHint.find(".k-label-top,.k-label-bottom").text("");this._resizeHint.first().addClass("k-first").find(".k-label-top").text(n.toString(n.timezone.toLocalDate(x),"M/dd"));this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(n.toString(n.timezone.toLocalDate(w),"M/dd"))},_updateMoveHint:function(x,y,B){var A=n.date.toUtcTime(x.start)+B;var w=A+x.duration();var z=this.groups[y];var v=z.ranges(A,w,true,x.isAllDay);this._removeMoveHint();for(var u=0;u<v.length;u++){this._groupedView._createMoveHint(v[u],x)}},_appendMoveHint:function(u){u.appendTo(this.content);this._moveHint=this._moveHint.add(u)},_groups:function(){var x=this._groupCount();var w=this.content[0].getElementsByTagName("tr");var v=this.startDate();this.groups=[];for(var u=0;u<x;u++){this._addResourceView(u)}this._groupedView._addDaySlotCollections(x,w,v)},addDaySlot:function(y,C,w,A){var z=C.clientHeight;var B=C.children.length?C.children[0].offsetHeight+3:0;var v=n.date.addDays(w,A);var x=n.date.MS_PER_DAY;if(w.getHours()!==v.getHours()){x+=(w.getHours()-v.getHours())*n.date.MS_PER_HOUR}v=n.date.toUtcTime(v);x+=v;var u=Math.floor((z-B-this.options.moreButtonHeight)/(this.options.eventHeight+3));C.setAttribute("role","gridcell");C.setAttribute("aria-selected",false);y.addDaySlot(C,v,x,u)},render:function(u){this.content.children(".k-event,.k-more-events,.k-events-container").remove();this._groups();u=new n.data.Query(u).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray();var v=this.groupedResources;if(v.length){this._renderGroups(u,v,0,1)}else{this._renderEvents(u,0)}this.refreshLayout();this.trigger("activate")},_renderEvents:function(F,E){var u;var C;var x;for(C=0,x=F.length;C<x;C++){u=F[C];if(this._isInDateSlot(u)){var D=this.groups[E];if(!D._continuousEvents){D._continuousEvents=[]}var v=D.slotRanges(u,true);var A=v.length;for(var z=0;z<A;z++){var B=v[z];var w=u.start;var y=u.end;this._groupedView._positionEvent(u,D,B,A,w,y,z)}}}},_renderGroups:function(C,w,y,v){var x=w[0];if(x){var A=x.dataSource.view();for(var u=0;u<A.length;u++){var B=this._resourceValue(x,A[u]);var z=new n.data.Query(C).filter({field:x.field,operator:b.groupEqFilter(B)}).toArray();if(w.length>1){y=this._renderGroups(z,w.slice(1),y++,v+1)}else{this._renderEvents(z,y++)}}}return y},_groupCount:function(){var u=this.groupedResources;var v=this._groupedView;if(u.length){if(this._isVerticallyGrouped()){return v._verticalGroupCount(u.length-1)}else{return v._horizontalGroupCount(u.length)}}return 1},_columnOffsetForResource:function(u){return this._columnCountForLevel(u)/this._columnCountForLevel(u-1)},destroy:function(){if(this.table){this.table.removeClass("k-scheduler-monthview")}if(this.content){this.content.off(p)}if(this.element){this.element.off(p)}b.fn.destroy.call(this);if(this._isMobile()&&!this._isMobilePhoneView()&&this.options.editable){if(this.options.editable.create!==false){this._addUserEvents.destroy()}if(this.options.editable.update!==false){this._editUserEvents.destroy()}}},events:["remove","add","edit","navigate"],options:{title:"Month",name:"month",eventHeight:25,moreButtonHeight:13,editable:true,selectedDateFormat:"{0:y}",selectedShortDateFormat:"{0:y}",groupHeaderTemplate:"#=text#",dayTemplate:r,eventTemplate:f}});function o(v,u){return v.slice(u).concat(v.slice(0,u))}function h(x,u){var v=u.firstDay,w=new Date(x.getFullYear(),x.getMonth(),0,x.getHours(),x.getMinutes(),x.getSeconds(),x.getMilliseconds());while(w.getDay()!=v){n.date.setTime(w,-1*c)}return w}function k(x,w,u){var v=w,y=u,z;z=x;return z>=v&&z<=y}}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.scheduler.recurrence",["kendo.dropdownlist","kendo.datepicker","kendo.numerictextbox"],a)}(function(){var a={id:"scheduler.recurrence",name:"Recurrence",category:"web",depends:["dropdownlist","datepicker","numerictextbox"],hidden:true};(function(al,q){var o=window.kendo,S=o.timezone,ar=o.Class,F=o.ui,l=F.Widget,Y=F.DropDownList,ad=o.date,i=ad.setTime,J=ad.setDayOfWeek,an=ad.adjustDST,r=ad.firstDayOfMonth,K=ad.getMilliseconds,p=[0,31,60,91,121,152,182,213,244,274,305,335,366],Q=[0,31,59,90,120,151,181,212,243,273,304,334,365],y=[31,28,30,31,30,31,30,31,30,31,30,31],v={0:"SU",1:"MO",2:"TU",3:"WE",4:"TH",5:"FR",6:"SA"},e={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},u=["yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-ddTHH","yyyy-MM-dd","yyyyMMddTHHmmssfffzzz","yyyyMMddTHHmmsszzz","yyyyMMddTHHmmss","yyyyMMddTHHmm","yyyyMMddTHH","yyyyMMdd"],k=["months","weeks","yearDays","monthDays","weekDays","hours","minutes","seconds"],af=k.length,ag="yyyyMMddTHHmmssZ",z={months:function(az,ay,aB){var aA=aB.months,ax=am(aA,az.getMonth()+1),aC=false;if(ax!==null){if(ax.length){az.setMonth(ax[0]-1,1)}else{az.setFullYear(az.getFullYear()+1,aA[0]-1,1)}aC=true}return aC},monthDays:function(ax,ay,aD){var aC,aB,aF,aA=false,aE=ax.getHours(),az=function(aG){if(aG<0){aG=aC+aG}return aG};while(ax<=ay){aB=ax.getMonth();aC=W(ax);aF=am(aD.monthDays,ax.getDate(),az);if(aF===null){return aA}aA=true;if(aF.length){ax.setMonth(aB,aF.sort(E)[0]);an(ax,aE);if(aB===ax.getMonth()){break}}else{ax.setMonth(aB+1,1)}}return aA},yearDays:function(aB,az,aD){var aC,ax,aE=false,ay=aB.getHours(),aA=function(aF){if(aF<0){aF=aC+aF}return aF};while(aB<az){aC=s(aB)?366:365;ax=am(aD.yearDays,c(aB),aA);if(ax===null){return aE}aE=true;aC=aB.getFullYear();if(ax.length){aB.setFullYear(aC,0,ax.sort(E)[0]);an(aB,ay);break}else{aB.setFullYear(aC+1,0,1)}}return aE},weeks:function(ay,az,aD){var aG=aD.weekStart,aC,ax,aE,aB=false,aF=ay.getHours(),aA=function(aH){if(aH<0){aH=53+aH}return aH};while(ay<az){ax=am(aD.weeks,ai(ay,aG),aA);if(ax===null){return aB}aB=true;aC=ay.getFullYear();if(ax.length){aE=ax.sort(E)[0]*7-1;ay.setFullYear(aC,0,aE);J(ay,aG,-1);an(ay,aF);break}else{ay.setFullYear(aC+1,0,1)}}return aB},weekDays:function(ay,aA,aC){var az=aC.weekDays;var aF=aC.weekStart;var aE=R(az,ay,aF);var aD=ay.getHours();var ax,aB;if(aE===null){return false}ax=aE[0];if(!ax){ax=az[0];J(ay,aF)}aB=ax.day;if(ax.offset){while(ay<=aA&&!w(ay,ax,aF)){if(B(ay,aF)===aj(ay,aF)){ay.setMonth(ay.getMonth()+1,1);an(ay,aD)}else{ay.setDate(ay.getDate()+7);an(ay,aD);J(ay,aF,-1)}}}if(ay.getDay()!==aB){J(ay,aB)}return true},hours:function(aA,az,aD){var ax=aD.hours,aB=aD._startTime,aC=aB.getHours(),ay=am(ax,aC),aE=false;if(ay!==null){aE=true;aA.setHours(aC);an(aA,aC);if(ay.length){ay=ay[0];aA.setHours(ay)}else{ay=aA.getHours();aA.setDate(aA.getDate()+1);an(aA,ay);ay=ax[0];aA.setHours(ay);an(aA,ay)}if(aD.minutes){aA.setMinutes(0)}aB.setHours(ay,aA.getMinutes())}return aE},minutes:function(aB,az,aD){var ax=aD.minutes,aA=aB.getMinutes(),aC=am(ax,aA),ay=aD._startTime.getHours(),aE=false;if(aC!==null){aE=true;if(aC.length){aC=aC[0]}else{ay+=1;aC=ax[0]}if(aD.seconds){aB.setSeconds(0)}aB.setHours(ay,aC);ay=ay%24;an(aB,ay);aD._startTime.setHours(ay,aC,aB.getSeconds())}return aE},seconds:function(aA,az,aC){var ay=aC.seconds,ax=aC._startTime.getHours(),aE=am(ay,aA.getSeconds()),aB=aA.getMinutes(),aD=false;if(aE!==null){aD=true;if(aE.length){aA.setSeconds(aE[0])}else{aB+=1;aA.setMinutes(aB,ay[0]);if(aB>59){aB=aB%60;ax=(ax+1)%24}}aC._startTime.setHours(ax,aB,aA.getSeconds())}return aD}},x=ar.extend({next:function(ay,aB){var aA=aB._startTime,ax=aA.getDate(),az,aC;if(aB.seconds){aC=ay.getSeconds()+1;ay.setSeconds(aC);aA.setSeconds(aC);aA.setDate(ax)}else{if(aB.minutes){az=ay.getMinutes()+1;ay.setMinutes(az);aA.setMinutes(az);aA.setDate(ax)}else{return false}}return true},normalize:function(ax){var ay=ax.rule;if(ax.idx===4&&ay.hours){ay._startTime.setHours(0);this._hour(ax.date,ay)}},limit:function(ay,az,aC){var ax=aC.interval,aD,aA,aF,aE,aB;while(ay<=az){aF=aA=q;aB=ay.getDate();for(aE=0;aE<af;aE++){aD=k[aE];if(aC[aD]){aF=z[aD](ay,az,aC);if(aA!==q&&aF){break}else{aA=aF}}if(aF){this.normalize({date:ay,rule:aC,day:aB,idx:aE})}}if((ax===1||!this.interval(aC,ay))&&aE===af){break}}},interval:function(aG,aC){var ay=new Date(aG._startPeriod);var aA=new Date(aC);var aH=aC.getHours();var aM=aG.weekStart;var az=aG.interval;var aE=aG.freq;var aL=false;var aD=0;var aB=0;var aF=1;var aJ;var ax;if(aE==="hourly"){aJ=aA.getTimezoneOffset()-ay.getTimezoneOffset();ax=aG._startTime.getHours();aA=aA.getTime();if(aH!==ax){aA+=(ax-aH)*ad.MS_PER_HOUR}aA-=ay;if(aJ){aA-=aJ*ad.MS_PER_MINUTE}aJ=Math.floor(aA/ad.MS_PER_HOUR);aD=C(aJ,az);if(aD!==0){this._hour(aC,aG,aD);aL=true}}else{if(aE==="daily"){ad.setTime(aA,-ay,true);aJ=Math.ceil(aA/ad.MS_PER_DAY);aD=C(aJ,az);if(aD!==0){this._date(aC,aG,aD);aL=true}}else{if(aE==="weekly"){aD=this._getNumberOfWeeksBetweenDates(ay,aC);var aK=ah(aC.getDay(),aM);var aI=ah(ay.getDay(),aM);if(aK<aI){aD+=1}aD=C(aD,az);if(aD!==0){ad.setDayOfWeek(aC,aG.weekStart,-1);aC.setDate(aC.getDate()+aD*7);an(aC,aH);aL=true}}else{if(aE==="monthly"){aJ=aC.getFullYear()-ay.getFullYear();aJ=aC.getMonth()-ay.getMonth()+aJ*12;aD=C(aJ,az);if(aD!==0){aF=aG._hasRuleValue?1:aC.getDate();aC.setFullYear(aC.getFullYear(),aC.getMonth()+aD,aF);an(aC,aH);aL=true}}else{if(aE==="yearly"){aJ=aC.getFullYear()-ay.getFullYear();aD=C(aJ,az);if(!aG.months){aB=aC.getMonth()}if(!aG.yearDays&&!aG.monthDays&&!aG.weekDays){aF=aC.getDate()}if(aD!==0){aC.setFullYear(aC.getFullYear()+aD,aB,aF);an(aC,aH);aL=true}}}}}}return aL},_getNumberOfWeeksBetweenDates:function(aA,ax){var ay=(ax-aA)/604800000;var az=Math.floor(ay);if(ay-az>0.99){az=Math.round(ay)}return az},_hour:function(az,aB,ay){var aA=aB._startTime,ax=aA.getHours();if(ay){ax+=ay}az.setHours(ax);ax=ax%24;aA.setHours(ax);an(az,ax)},_date:function(az,aA,ay){var ax=az.getHours();az.setDate(az.getDate()+ay);if(!an(az,ax)){this._hour(az,aA)}}}),H=x.extend({next:function(ax,ay){if(!x.fn.next(ax,ay)){this._hour(ax,ay,1)}},normalize:function(ax){var ay=ax.rule;if(ax.idx===4){ay._startTime.setHours(0);this._hour(ax.date,ay)}}}),ap=x.extend({next:function(ax,ay){if(!x.fn.next(ax,ay)){this[ay.hours?"_hour":"_date"](ax,ay,1)}}}),O=ap.extend({setup:function(ay,ax){if(!ay.weekDays){ay.weekDays=[{day:ax.getDay(),offset:0}]}}}),av=x.extend({next:function(az,aA){var ay,ax;if(!x.fn.next(az,aA)){if(aA.hours){this._hour(az,aA,1)}else{if(aA.monthDays||aA.weekDays||aA.yearDays||aA.weeks){this._date(az,aA,1)}else{ay=az.getDate();ax=az.getHours();az.setMonth(az.getMonth()+1);an(az,ax);while(az.getDate()!==ay){az.setDate(ay);an(az,ax)}this._hour(az,aA)}}}},normalize:function(az){var aA=az.rule,ay=az.date,ax=ay.getHours();if(az.idx===0&&!aA.monthDays&&!aA.weekDays){ay.setDate(az.day);an(ay,ax)}else{x.fn.normalize(az)}},setup:function(az,ay,ax){if(!az.monthDays&&!az.weekDays){ax.setDate(ay.getDate())}}}),V=av.extend({next:function(az,aA){var ay,ax=az.getHours();if(!x.fn.next(az,aA)){if(aA.hours){this._hour(az,aA,1)}else{if(aA.monthDays||aA.weekDays||aA.yearDays||aA.weeks){this._date(az,aA,1)}else{if(aA.months){ay=az.getDate();az.setMonth(az.getMonth()+1);an(az,ax);while(az.getDate()!==ay){az.setDate(ay);an(az,ax)}this._hour(az,aA)}else{az.setFullYear(az.getFullYear()+1);an(az,ax);this._hour(az,aA)}}}}},setup:function(){}}),h={hourly:new H(),daily:new ap(),weekly:new O(),monthly:new av(),yearly:new V()},ak="click";function C(az,ay){var ax;if(az!==0&&az<ay){ax=ay-az}else{ax=az%ay;if(ax){ax=ay-ax}}return ax}function c(ax){var ay=ax.getMonth();var az=s(ax)?p[ay]:Q[ay];return az+ax.getDate()}function ai(ay,ax){var az,aA;ay=new Date(ay.getFullYear(),ay.getMonth(),ay.getDate());an(ay,0);az=ay.getFullYear();if(ax!==q){J(ay,ax,-1);ay.setDate(ay.getDate()+4)}else{ay.setDate(ay.getDate()+(4-(ay.getDay()||7)))}an(ay,0);aA=Math.floor((ay.getTime()-new Date(az,0,1,-6))/86400000);return 1+Math.floor(aA/7)}function B(ay,ax){var az=r(ay).getDay();var aA=7-(az+7-(ax||7))||7;if(aA<0){aA+=7}return Math.ceil((ay.getDate()-aA)/7)+1}function ah(ay,ax){return ay+(ay<ax?7:0)}function G(ay,aA,aF){var az=aA.offset;if(!az){return B(ay,aF)}var ax=new Date(ay.getFullYear(),ay.getMonth()+1,0);var aC=B(ax,aF);var aB=ah(aA.day,aF);var aE=aB<ah(new Date(ay.getFullYear(),ay.getMonth(),1).getDay(),aF);var aD=aB>ah(ax.getDay(),aF);if(az<0){az=aC+(az+1-(aD?1:0))}else{if(aE){az+=1}}aC-=aD?1:0;if(az<(aE?1:0)||az>aC){return null}return az}function aj(ay,ax){return B(new Date(ay.getFullYear(),ay.getMonth()+1,0),ax)}function w(ay,az,ax){return B(ay,ax)===G(ay,az,ax)}function R(aB,aA,aH){var aC=ah(aA.getDay(),aH);var az=aB.length;var ay;var aD,aE;var ax;var aG=[];var aF=0;for(;aF<az;aF++){aD=aB[aF];ax=B(aA,aH);ay=G(aA,aD,aH);if(ay===null){continue}if(ax<ay){aG.push(aD)}else{if(ax===ay){aE=ah(aD.day,aH);if(aC<aE){aG.push(aD)}else{if(aC===aE){return null}}}}}return aG}function am(aB,aA,ay){var ax=0,az=aB.length,aD=[],aC;for(;ax<az;ax++){aC=aB[ax];if(ay){aC=ay(aC)}if(aA===aC){return null}else{if(aA<aC){aD.push(aC)}}}return aD}function at(aB,ay){var ax=0,az=aB.length,aA;for(;ax<az;ax++){aA=parseInt(aB[ax],10);if(isNaN(aA)||aA<ay.start||aA>ay.end||aA===0&&ay.start<0){return null}aB[ax]=aA}return aB.sort(E)}function f(aC){var ax=0,aA=aC.length,aB,az,ay;for(;ax<aA;ax++){aB=aC[ax];az=aB.length;ay=aB.substring(az-2).toUpperCase();ay=e[ay];if(ay===q){return null}aC[ax]={offset:parseInt(aB.substring(0,az-2),10)||0,day:ay}}return aC}function I(aC){var ay=0,aA=aC.length,aB,az,ax=[];for(;ay<aA;ay++){aB=aC[ay];if(typeof aB==="string"){az=aB}else{az=""+v[aB.day];if(aB.offset){az=aB.offset+az}}ax.push(az)}return ax.toString()}function W(ax){var ay=ax.getMonth();if(ay===1){if(new Date(ax.getFullYear(),1,29).getMonth()===1){return 29}return 28}return y[ay]}function s(ax){ax=ax.getFullYear();return ax%4===0&&ax%100!==0||ax%400===0}function E(ay,ax){return ay-ax}function au(aA,ay){var ax=0,aB,az,aC=[];if(aA){aA=aA.split(aA.indexOf(";")!==-1?";":",");aB=aA.length;for(;ax<aB;ax++){az=j(aA[ax],ay);if(az){aC.push(az)}}}return aC}function ab(aA,az,ay){var aD=al.isArray(aA)?aA:au(aA,ay),aC=az.getTime()-az.getMilliseconds(),ax=0,aB=aD.length;for(;ax<aB;ax++){if(aD[ax].getTime()===aC){return true}}return false}function ao(aC,az){var ay=0;var aB;var aA;var ax=[].concat(aC);for(aB=ax.length;ay<aB;ay++){aA=ax[ay];aA=o.timezone.convert(aA,az||aA.getTimezoneOffset(),"Etc/UTC");ax[ay]=o.toString(aA,ag)}return ax.join(",")}function t(az,ay){var ax=new Date(az);switch(ay.freq){case"yearly":ax.setFullYear(ax.getFullYear(),0,1);break;case"monthly":ax.setFullYear(ax.getFullYear(),ax.getMonth(),1);break;case"weekly":J(ax,ay.weekStart,-1);break;default:break}if(ay.hours){ax.setHours(0)}if(ay.minutes){ax.setMinutes(0)}if(ay.seconds){ax.setSeconds(0)}return ax}function X(az,ay){var ax=new Date(az);switch(ay.freq){case"yearly":ax.setFullYear(ax.getFullYear(),11,31);break;case"monthly":ax.setFullYear(ax.getFullYear(),ax.getMonth()+1,0);break;case"weekly":J(ax,ay.weekStart,-1);ax.setDate(ax.getDate()+6);break;default:break}if(ay.hours){ax.setHours(23)}if(ay.minutes){ax.setMinutes(59)}if(ay.seconds){ax.setSeconds(59)}return ax}function T(aA,ay,aB){var aD=aA.length;var aF=[];var aC;var ax;for(var aE=0,az=aB.length;aE<az;aE++){aC=aB[aE];if(aC<0){aC=aD+aC}else{aC-=1}ax=aA[aC];if(ax&&ax.start>=ay){aF.push(ax)}}return aF}function g(aB,az,ay){var aA=[];var aC;for(var ax=0;ax<aB.length;ax++){aC=aB[ax];if(!ab(az,aC.start,ay)){aA.push(aC)}}return aA}function U(aS,aD,az,aX){var aH=Z(aS.recurrenceRule,aX),aN,aB,aU,aT,aR,aJ,aQ,aF,aM,aO,aP,aK,aW,aY,aE,aZ,ay,aG,aC,aI,aA,aV,ax=[];if(!aH){return[aS]}aI=aH.positions;aA=aI?0:1;aO=aH.start;aP=aH.end;if(aO||aP){aS=aS.clone({start:aO?new Date(aO.value[0]):q,end:aP?new Date(aP.value[0]):q})}ay=aS.start;aZ=ay.getTime();aE=K(ay);aY=au(aS.recurrenceException,aX);if(!aY[0]&&aH.exdates){aY=aH.exdates.value;aS.set("recurrenceException",ao(aY,aX))}aF=aD=new Date(aD);az=new Date(az);aW=aH.freq;aC=h[aW];aG=aH.count;if(aH.until&&aH.until<az){az=new Date(aH.until)}aK=aW==="yearly"||aW==="monthly"||aW==="weekly";if(aD<aZ||aG||aH.interval>1||aK){aD=new Date(aZ)}else{aT=aD.getHours();aR=aD.getMinutes();aJ=aD.getSeconds();if(!aH.hours){aT=ay.getHours()}if(!aH.minutes){aR=ay.getMinutes()}if(!aH.seconds){aJ=ay.getSeconds()}aD.setHours(aT,aR,aJ,ay.getMilliseconds())}aH._startPeriod=new Date(aD);if(aI){aD=t(aD,aH);az=X(az,aH);var aL=K(az)-K(aD);if(aL<0){aT=aD.getHours();az.setHours(aT,aD.getMinutes(),aD.getSeconds(),aD.getMilliseconds());ad.adjustDST(az,aT)}aH._startPeriod=new Date(aD);aH._endPeriod=X(aD,aH)}aQ=aS.duration();aH._startTime=aN=ad.toInvariantTime(aD);if(aC.setup){aC.setup(aH,ay,aD)}aC.limit(aD,az,aH);while(aD<=az){aU=new Date(aD);i(aU,aQ);aM=aD>=aF||aU>aF;if(aM&&!ab(aY,aD,aX)||aI){aN=ad.toUtcTime(ad.getDate(aD))+K(aH._startTime);aB=aN+aQ;if(aZ!==aD.getTime()||aE!==K(aH._startTime)){ax.push(aS.toOccurrence({start:new Date(aD),end:aU,_startTime:aN,_endTime:aB}))}else{aS._startTime=aN;aS._endTime=aB;ax.push(aS)}}if(aI){aC.next(aD,aH);aC.limit(aD,az,aH);if(aD>aH._endPeriod){aV=T(ax.slice(aA),ay,aI);aV=g(aV,aY,aX);ax=ax.slice(0,aA).concat(aV);aH._endPeriod=X(aD,aH);aA=ax.length}if(aG&&aG===aA){break}}else{if(aG&&aG===aA){break}aA+=1;aC.next(aD,aH);aC.limit(aD,az,aH)}}return ax}function j(ay,ax){ay=o.parseDate(ay,u);if(ay&&ax){ay=S.convert(ay,ay.getTimezoneOffset(),ax)}return ay}function N(aB,aC){var ax=aB.split(";");var aA;var aG;var aE;var az;var aH,aF;for(var aD=0,ay=ax.length;aD<ay;aD++){aA=ax[aD].split(":");aG=aA[0];aE=aA[1];if(aG.indexOf("TZID")!==-1){az=aG.substring(aG.indexOf("TZID")).split("=")[1]}if(aE){aE=aE.split(",");for(aH=0,aF=aE.length;aH<aF;aH++){aE[aH]=j(aE[aH],az||aC)}}}if(aE){return{value:aE,tzid:az}}}function Z(aC,aD){var aK={};var aF,aG;var aH=0,ay;var aB=false;var aE,ax,aA;var aJ,aL,az;var aI=function(aN,aM){var aP=aN.day,aO=aM.day;if(aP<aL){aP+=7}if(aO<aL){aO+=7}return aP-aO};if(!aC){return null}aA=aC.split("\n");if(!aA[1]&&(aC.indexOf("DTSTART")!==-1||aC.indexOf("DTEND")!==-1||aC.indexOf("EXDATE")!==-1)){aA=aC.split(" ")}for(aH=0,ay=aA.length;aH<ay;aH++){ax=al.trim(aA[aH]);if(ax.indexOf("DTSTART")!==-1){aK.start=N(ax,aD)}else{if(ax.indexOf("DTEND")!==-1){aK.end=N(ax,aD)}else{if(ax.indexOf("EXDATE")!==-1){aK.exdates=N(ax,aD)}else{if(ax.indexOf("RRULE")!==-1){aE=ax.substring(6)}else{if(al.trim(ax)){aE=ax}}}}}}aE=aE.split(";");for(aH=0,ay=aE.length;aH<ay;aH++){aJ=aE[aH];aF=aJ.split("=");aG=al.trim(aF[1]).split(",");switch(al.trim(aF[0]).toUpperCase()){case"FREQ":aK.freq=aG[0].toLowerCase();break;case"UNTIL":aK.until=j(aG[0],aD);break;case"COUNT":aK.count=parseInt(aG[0],10);break;case"INTERVAL":aK.interval=parseInt(aG[0],10);break;case"BYSECOND":aK.seconds=at(aG,{start:0,end:60});aB=true;break;case"BYMINUTE":aK.minutes=at(aG,{start:0,end:59});aB=true;break;case"BYHOUR":aK.hours=at(aG,{start:0,end:23});aB=true;break;case"BYMONTHDAY":aK.monthDays=at(aG,{start:-31,end:31});aB=true;break;case"BYYEARDAY":aK.yearDays=at(aG,{start:-366,end:366});aB=true;break;case"BYMONTH":aK.months=at(aG,{start:1,end:12});aB=true;break;case"BYDAY":aK.weekDays=az=f(aG);aB=true;break;case"BYWEEKNO":aK.weeks=at(aG,{start:-53,end:53});aB=true;break;case"BYSETPOS":aK.positions=at(aG,{start:-366,end:366});break;case"WKST":aK.weekStart=aL=e[aG[0]];break}}if(aK.freq===q||aK.count!==q&&aK.until){return null}if(!aK.interval){aK.interval=1}if(aL===q){aK.weekStart=aL=o.culture().calendar.firstDay}if(az){aK.weekDays=az.sort(aI)}if(aK.positions&&!aB){aK.positions=null}aK._hasRuleValue=aB;return aK}function d(aB,ay){var aA=aB.value;var aD=aB.tzid||"";var az=aA.length;var ax=0;var aC;for(;ax<az;ax++){aC=aA[ax];aC=S.convert(aC,aD||ay||aC.getTimezoneOffset(),"Etc/UTC");aA[ax]=o.toString(aC,"yyyyMMddTHHmmssZ")}if(aD){aD=";TZID="+aD}return aD+":"+aA.join(",")+" "}function b(aC,aA){var az=aC.weekStart;var aB="FREQ="+aC.freq.toUpperCase();var ax=aC.exdates||"";var aE=aC.start||"";var ay=aC.end||"";var aD=aC.until;if(aC.interval>1){aB+=";INTERVAL="+aC.interval}if(aC.count){aB+=";COUNT="+aC.count}if(aD){aD=S.convert(aD,aA||aD.getTimezoneOffset(),"Etc/UTC");aB+=";UNTIL="+o.toString(aD,"yyyyMMddTHHmmssZ")}if(aC.months){aB+=";BYMONTH="+aC.months}if(aC.weeks){aB+=";BYWEEKNO="+aC.weeks}if(aC.yearDays){aB+=";BYYEARDAY="+aC.yearDays}if(aC.monthDays){aB+=";BYMONTHDAY="+aC.monthDays}if(aC.weekDays){aB+=";BYDAY="+I(aC.weekDays)}if(aC.hours){aB+=";BYHOUR="+aC.hours}if(aC.minutes){aB+=";BYMINUTE="+aC.minutes}if(aC.seconds){aB+=";BYSECOND="+aC.seconds}if(aC.positions){aB+=";BYSETPOS="+aC.positions}if(az!==q){aB+=";WKST="+v[az]}if(aE){aE="DTSTART"+d(aE,aA)}if(ay){ay="DTEND"+d(ay,aA)}if(ax){ax="EXDATE"+d(ax,aA)}if(aE||ay||ax){aB=aE+ay+ax+"RRULE:"+aB}return aB}o.recurrence={rule:{parse:Z,serialize:b},expand:U,dayInYear:c,weekInYear:ai,weekInMonth:B,numberOfWeeks:aj,isException:ab,toExceptionString:ao};var A=function(aA){var aB=o.culture().calendar.days.namesShort,aC=aB.length,ay="",ax=0,az=[];for(;ax<aC;ax++){az.push(ax)}aB=aB.slice(aA).concat(aB.slice(0,aA));az=az.slice(aA).concat(az.slice(0,aA));for(ax=0;ax<aC;ax++){ay+='<label class="k-check"><input class="k-recur-weekday-checkbox" type="checkbox" value="'+az[ax]+'" /> '+aB[ax]+"</label>"}return ay};var m=o.template('# if (frequency !== "never") { #<div class="k-edit-label"><label>#:messages.repeatEvery#</label></div><div class="k-edit-field"><input class="k-recur-interval"/>#:messages.interval#</div># } ## if (frequency === "weekly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field">#=weekDayCheckBoxes(firstWeekDay)#</div># } else if (frequency === "monthly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field"><ul class="k-reset"><li><label><input class="k-recur-month-radio" type="radio" name="month" value="monthday" />#:messages.day#</label><input class="k-recur-monthday" /></li><li><input class="k-recur-month-radio" type="radio" name="month" value="weekday" /><input class="k-recur-weekday-offset" /><input class="k-recur-weekday" /></li></ul></div># } else if (frequency === "yearly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field"><ul class="k-reset"><li><input class="k-recur-year-radio" type="radio" name="year" value="monthday" /><input class="k-recur-month" /><input class="k-recur-monthday" /></li><li><input class="k-recur-year-radio" type="radio" name="year" value="weekday" /><input class="k-recur-weekday-offset" /><input class="k-recur-weekday" />#:messages.of#<input class="k-recur-month" /></li></ul></div># } ## if (frequency !== "never") { #<div class="k-edit-label"><label>#:end.label#</label></div><div class="k-edit-field"><ul class="k-reset"><li><label><input class="k-recur-end-never" type="radio" name="end" value="never" />#:end.never#</label></li><li><label><input class="k-recur-end-count" type="radio" name="end" value="count" />#:end.after#</label><input class="k-recur-count" />#:end.occurrence#</li><li><label><input class="k-recur-end-until" type="radio" name="end" value="until" />#:end.on#</label><input class="k-recur-until" /></li></ul></div># } #');var aq=[{day:0,offset:0},{day:1,offset:0},{day:2,offset:0},{day:3,offset:0},{day:4,offset:0},{day:5,offset:0},{day:6,offset:0}];var M=[{day:1,offset:0},{day:2,offset:0},{day:3,offset:0},{day:4,offset:0},{day:5,offset:0}];var D=[{day:0,offset:0},{day:6,offset:0}];var ae=l.extend({init:function(ay,ax){var aB;var az=this;var aA=ax&&ax.frequencies;l.fn.init.call(az,ay,ax);az.wrapper=az.element;ax=az.options;ax.start=aB=ax.start||ad.today();if(aA){ax.frequencies=aA}if(typeof aB==="string"){ax.start=o.parseDate(aB,"yyyyMMddTHHmmss")}if(ax.firstWeekDay===null){ax.firstWeekDay=o.culture().calendar.firstDay}az._namespace="."+ax.name},options:{value:"",start:"",timezone:"",spinners:true,firstWeekDay:null,frequencies:["never","daily","weekly","monthly","yearly"],mobile:false,messages:{frequencies:{never:"Never",hourly:"Hourly",daily:"Daily",weekly:"Weekly",monthly:"Monthly",yearly:"Yearly"},hourly:{repeatEvery:"Repeat every: ",interval:" hour(s)"},daily:{repeatEvery:"Repeat every: ",interval:" day(s)"},weekly:{interval:" week(s)",repeatEvery:"Repeat every: ",repeatOn:"Repeat on: "},monthly:{repeatEvery:"Repeat every: ",repeatOn:"Repeat on: ",interval:" month(s)",day:"Day "},yearly:{repeatEvery:"Repeat every: ",repeatOn:"Repeat on: ",interval:" year(s)",of:" of "},end:{label:"End:",mobileLabel:"Ends",never:"Never",after:"After ",occurrence:" occurrence(s)",on:"On "},offsetPositions:{first:"first",second:"second",third:"third",fourth:"fourth",last:"last"},weekdays:{day:"day",weekday:"weekday",weekend:"weekend day"}}},events:["change"],_initInterval:function(){var ax=this;var ay=ax._value;ax._container.find(".k-recur-interval").kendoNumericTextBox({spinners:ax.options.spinners,value:ay.interval||1,decimals:0,format:"#",min:1,change:function(){ay.interval=this.value();ax._trigger()}})},_weekDayRule:function(ax){var az=this;var aA=(az._weekDay.element||az._weekDay).val();var aC=Number((az._weekDayOffset.element||az._weekDayOffset).val());var aB=null;var ay=null;if(!ax){if(aA==="day"){aB=aq;ay=aC}else{if(aA==="weekday"){aB=M;ay=aC}else{if(aA==="weekend"){aB=D;ay=aC}else{aB=[{offset:aC,day:Number(aA)}]}}}}az._value.weekDays=aB;az._value.positions=ay},_weekDayView:function(){var aC=this;var aD=aC._value.weekDays;var ay=aC._value.positions;var az=aC._weekDayOffset;var aA;var ax;var aB;var aE;if(aD){aB=aD.length;if(ay){if(aB===7){ax="day";aA=ay}else{if(aB===5){ax="weekday";aA=ay}else{if(aB===2){ax="weekend";aA=ay}}}}if(!ax){aD=aD[0];ax=aD.day;aA=aD.offset||""}aE=az.value?"value":"val";az[aE](aA);aC._weekDay[aE](ax)}},_initWeekDay:function(){var aA=this,aB;var ax=aA.options.messages.weekdays;var az=aA.options.messages.offsetPositions;var ay=aA._container.find(".k-recur-weekday");var aC=function(){aA._weekDayRule();aA._trigger()};if(ay[0]){aA._weekDayOffset=new Y(aA._container.find(".k-recur-weekday-offset"),{change:aC,dataTextField:"text",dataValueField:"value",dataSource:[{text:az.first,value:"1"},{text:az.second,value:"2"},{text:az.third,value:"3"},{text:az.fourth,value:"4"},{text:az.last,value:"-1"}]});aB=[{text:ax.day,value:"day"},{text:ax.weekday,value:"weekday"},{text:ax.weekend,value:"weekend"}];aA._weekDay=new Y(ay,{value:aA.options.start.getDay(),change:aC,dataTextField:"text",dataValueField:"value",dataSource:aB.concat(al.map(o.culture().calendar.days.names,function(aE,aD){return{text:aE,value:aD}}))});aA._weekDayView()}},_initWeekDays:function(){var aC=this;var aD=aC._value;var aE=aC._container.find(".k-recur-weekday-checkbox");if(aE[0]){aE.on(ak+aC._namespace,function(){aD.weekDays=al.map(aE.filter(":checked"),function(aF){return{day:Number(aF.value),offset:0}});if(!aC.options.mobile){aC._trigger()}});if(aD.weekDays){var ax,az;var aA=0,ay=aE.length;var aB=aD.weekDays.length;for(;aA<ay;aA++){az=aE[aA];for(ax=0;ax<aB;ax++){if(az.value==aD.weekDays[ax].day){az.checked=true}}}}}},_initMonthDay:function(){var ay=this;var az=ay._value;var ax=ay._container.find(".k-recur-monthday");if(ax[0]){ay._monthDay=new o.ui.NumericTextBox(ax,{spinners:ay.options.spinners,min:1,max:31,decimals:0,format:"#",value:az.monthDays?az.monthDays[0]:ay.options.start.getDate(),change:function(){var aA=this.value();az.monthDays=aA?[aA]:aA;ay._trigger()}})}},_initCount:function(){var ay=this,ax=ay._container.find(".k-recur-count"),az=ay._value;ay._count=ax.kendoNumericTextBox({spinners:ay.options.spinners,value:az.count||1,decimals:0,format:"#",min:1,change:function(){az.count=this.value();ay._trigger()}}).data("kendoNumericTextBox")},_initUntil:function(){var ay=this,ax=ay._container.find(".k-recur-until"),aB=ay.options.start,az=ay._value,aA=az.until;ay._until=ax.kendoDatePicker({min:aA&&aA<aB?aA:aB,value:aA||new Date(aB.getFullYear(),aB.getMonth(),aB.getDate(),23,59,59),change:function(){var aC=this.value();az.until=new Date(aC.getFullYear(),aC.getMonth(),aC.getDate(),23,59,59);ay._trigger()}}).data("kendoDatePicker")},_trigger:function(){if(!this.options.mobile){this.trigger("change")}}});var aa=ae.extend({init:function(ay,ax){var az=this;ae.fn.init.call(az,ay,ax);az._initFrequency();az._initContainer();az.value(az.options.value)},options:{name:"RecurrenceEditor"},events:["change"],destroy:function(){var ax=this;ax._frequency.destroy();ax._container.find("input[type=radio],input[type=checkbox]").off(ak+ax._namespace);o.destroy(ax._container);ae.fn.destroy.call(ax)},value:function(az){var ay=this;var ax=ay.options.timezone;var aA;if(az===q){if(!ay._value.freq){return""}return b(ay._value,ax)}ay._value=Z(az,ax)||{};aA=ay._value.freq;if(aA){ay._frequency.value(aA)}else{ay._frequency.select(0)}ay._initView(ay._frequency.value())},_initContainer:function(){var ay=this.element,ax=al('<div class="k-recur-view" />'),az=ay.parent(".k-edit-field");if(az[0]){ax.insertAfter(az)}else{ay.append(ax)}this._container=ax},_initFrequency:function(){var az=this,ax=az.options,aB=ax.frequencies,ay=ax.messages.frequencies,aC=al("<input />"),aA;aB=al.map(aB,function(aD){return{text:ay[aD],value:aD}});aA=aB[0];if(aA&&aA.value==="never"){aA.value=""}az.element.append(aC);az._frequency=new Y(aC,{dataTextField:"text",dataValueField:"value",dataSource:aB,change:function(){az._value={};az._initView(az._frequency.value());az.trigger("change")}})},_initView:function(aB){var ay=this;var aA=ay._value;var ax=ay.options;var az={frequency:aB||"never",weekDayCheckBoxes:A,firstWeekDay:ax.firstWeekDay,messages:ax.messages[aB],end:ax.messages.end};o.destroy(ay._container);ay._container.html(m(az));if(!aB){ay._value={};return}aA.freq=aB;if(aB==="weekly"&&!aA.weekDays){aA.weekDays=[{day:ax.start.getDay(),offset:0}]}ay._initInterval();ay._initWeekDays();ay._initMonthDay();ay._initWeekDay();ay._initMonth();ay._initCount();ay._initUntil();ay._period();ay._end()},_initMonth:function(){var az=this;var aB=az._value;var aA=aB.months||[az.options.start.getMonth()+1];var ax=az._container.find(".k-recur-month");var ay;if(ax[0]){ay={change:function(){aB.months=[Number(this.value())];az.trigger("change")},dataTextField:"text",dataValueField:"value",dataSource:al.map(o.culture().calendar.months.names,function(aD,aC){return{text:aD,value:aC+1}})};az._month1=new Y(ax[0],ay);az._month2=new Y(ax[1],ay);if(aA){aA=aA[0];az._month1.value(aA);az._month2.value(aA)}}},_end:function(){var aB=this;var aC=aB._value;var ax=aB._container;var az=aB._namespace;var aA=function(aD){aB._toggleEnd(aD.currentTarget.value);aB.trigger("change")};var ay;aB._buttonNever=ax.find(".k-recur-end-never").on(ak+az,aA);aB._buttonCount=ax.find(".k-recur-end-count").on(ak+az,aA);aB._buttonUntil=ax.find(".k-recur-end-until").on(ak+az,aA);if(aC.count){ay="count"}else{if(aC.until){ay="until"}}aB._toggleEnd(ay)},_period:function(){var aB=this;var aC=aB._value;var ay=aC.freq==="monthly";var aA=ay?aB._toggleMonthDay:aB._toggleYear;var ax=".k-recur-"+(ay?"month":"year")+"-radio";var az=aB._container.find(ax);if(!ay&&aC.freq!=="yearly"){return}az.on(ak+aB._namespace,function(aD){aA.call(aB,aD.currentTarget.value);aB.trigger("change")});aB._buttonMonthDay=az.eq(0);aB._buttonWeekDay=az.eq(1);aA.call(aB,aC.weekDays?"weekday":"monthday")},_toggleEnd:function(ay){var aB=this;var aA,aC;var ax,az;if(ay==="count"){aB._buttonCount.prop("checked",true);ax=true;az=false;aA=aB._count.value();aC=null}else{if(ay==="until"){aB._buttonUntil.prop("checked",true);ax=false;az=true;aA=null;aC=aB._until.value()}else{aB._buttonNever.prop("checked",true);ax=az=false;aA=aC=null}}aB._count.enable(ax);aB._until.enable(az);aB._value.count=aA;aB._value.until=aC},_toggleMonthDay:function(aB){var aA=this;var az=false;var ay=true;var ax=false;var aC;if(aB==="monthday"){aA._buttonMonthDay.prop("checked",true);aC=[aA._monthDay.value()];az=true;ay=false;ax=true}else{aA._buttonWeekDay.prop("checked",true);aC=null}aA._weekDay.enable(ay);aA._weekDayOffset.enable(ay);aA._monthDay.enable(az);aA._value.monthDays=aC;aA._weekDayRule(ax)},_toggleYear:function(aB){var az=this;var ay=false;var ax=true;var aA;if(aB==="monthday"){ay=true;ax=false;aA=az._month1.value()}else{aA=az._month2.value()}az._month1.enable(ay);az._month2.enable(ax);az._value.months=[aA];az._toggleMonthDay(aB)}});F.plugin(aa);var P=o.template('<div class="k-edit-label"><label>#:headerTitle#</label></div><div class="k-edit-field k-recur-pattern k-scheduler-toolbar"></div><div class="k-recur-view"></div>');var aw=o.template('# if (frequency !== "never") { #<div class="k-edit-label"><label>#:messages.repeatEvery#</label></div><div class="k-edit-field"><input class="k-recur-interval" pattern="\\\\d*"/>#:messages.interval#</div># } ## if (frequency === "weekly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field">#=weekDayCheckBoxes(firstWeekDay)#</div># } else if (frequency === "monthly") { #<div class="k-edit-label"><label>#:messages.repeatBy#</label></div><div class="k-edit-field k-scheduler-toolbar k-repeat-rule"></div><div class="k-monthday-view" style="display:none"><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><input class="k-recur-monthday" pattern="\\\\d*"/></div></div><div class="k-weekday-view" style="display:none"><div class="k-edit-label"><label>#:messages.every#</label></div><div class="k-edit-field"><select class="k-recur-weekday-offset"></select></div><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><select class="k-recur-weekday"></select></div></div># } else if (frequency === "yearly") { #<div class="k-edit-label"><label>#:messages.repeatBy#</label></div><div class="k-edit-field k-scheduler-toolbar k-repeat-rule"></div><div class="k-monthday-view" style="display:none"><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><input class="k-recur-monthday" pattern="\\\\d*"/></div></div><div class="k-weekday-view" style="display:none"><div class="k-edit-label"><label>#:messages.every#</label></div><div class="k-edit-field"><select class="k-recur-weekday-offset"></select></div><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><select class="k-recur-weekday"></select></div></div><div class="k-edit-label"><label>#:messages.month#</label></div><div class="k-edit-field"><select class="k-recur-month"></select></div># } #');var n=o.template('# if (endPattern === "count") { #<div class="k-edit-label"><label>#:messages.after#</label></div><div class="k-edit-field"><input class="k-recur-count" pattern="\\\\d*" /></div># } else if (endPattern === "until") { #<div class="k-edit-label"><label>#:messages.on#</label></div><div class="k-edit-field"><input type="date" class="k-recur-until" /></div># } #');var L=o.template('<ul class="k-reset k-header k-scheduler-navigation">#for (var i = 0, length = dataSource.length; i < length; i++) {#<li class="k-state-default #= value === dataSource[i].value ? "k-state-selected" : "" #"><a role="button" href="\\#" class="k-link" data-#=ns#value="#=dataSource[i].value#">#:dataSource[i].text#</a></li>#}#</ul>');var ac=ae.extend({init:function(ay,ax){var az=this;ae.fn.init.call(az,ay,ax);ax=az.options;az._optionTemplate=o.template('<option value="#:value#">#:text#</option>');az.value(ax.value);az._pane=ax.pane;az._initRepeatButton();az._initRepeatEnd();az._defaultValue=az._value},options:{name:"MobileRecurrenceEditor",animations:{left:"slide",right:"slide:right"},mobile:true,messages:{cancel:"Cancel",update:"Save",endTitle:"Repeat ends",repeatTitle:"Repeat pattern",headerTitle:"Repeat event",end:{patterns:{never:"Never",after:"After...",on:"On..."},never:"Never",after:"End repeat after",on:"End repeat on"},daily:{interval:""},hourly:{interval:""},weekly:{interval:""},monthly:{interval:"",repeatBy:"Repeat by: ",dayOfMonth:"Day of the month",dayOfWeek:"Day of the week",repeatEvery:"Repeat every",every:"Every",day:"Day "},yearly:{interval:"",repeatBy:"Repeat by: ",dayOfMonth:"Day of the month",dayOfWeek:"Day of the week",repeatEvery:"Repeat every: ",every:"Every",month:"Month",day:"Day"}}},events:["change"],value:function(az){var ay=this;var ax=ay.options.timezone;if(az===q){if(!ay._value.freq){return""}return b(ay._value,ax)}ay._value=Z(az,ax)||{}},destroy:function(){this._destroyView();o.destroy(this._endFields);this._repeatButton.off(ak+this._namespace);ae.fn.destroy.call(this)},_initRepeatButton:function(){var ax=this;var ay=ax.options.messages.frequencies[this._value.freq||"never"];ax._repeatButton=al('<a href="#" class="k-button k-scheduler-recur">'+ay+"</a>").on(ak+ax._namespace,function(az){az.preventDefault();ax._createView("repeat");ax._pane.navigate("recurrence",ax.options.animations.left)});ax.element.append(ax._repeatButton)},_initRepeatEnd:function(){var ay=this;var ax=al('<div class="k-edit-label"><label>'+ay.options.messages.end.mobileLabel+"</label></div>").insertAfter(ay.element.parent(".k-edit-field"));var az=al('<div class="k-edit-field"><a href="#" class="k-button k-scheduler-recur-end"></a></div>').on(ak+ay._namespace,function(aA){aA.preventDefault();if(!ay._value.freq){return}ay._createView("end");ay._pane.navigate("recurrence",ay.options.animations.left)}).insertAfter(ax);ay._endFields=ax.add(az).toggleClass("k-state-disabled",!ay._value.freq);ay._endButton=az.find(".k-scheduler-recur-end").text(ay._endText())},_endText:function(){var ay=this._value;var ax=this.options.messages.end;var az=ax.never;if(ay.count){az=o.format("{0} {1}",ax.after,ay.count)}else{if(ay.until){az=o.format("{0} {1:d}",ax.on,ay.until)}}return az},_initFrequency:function(){var ay=this;var az=ay.options.messages.frequencies;var ax=L({dataSource:al.map(this.options.frequencies,function(aA){return{text:az[aA],value:aA!=="never"?aA:""}}),value:ay._value.freq||"",ns:o.ns});ay._view.element.find(".k-recur-pattern").append(ax).on(ak+ay._namespace,".k-scheduler-navigation li",function(aB){var aA=al(this);aB.preventDefault();aA.addClass("k-state-selected").siblings().removeClass("k-state-selected");ay._value={freq:aA.children("a").attr(o.attr("value"))};ay._initRepeatView()})},_initEndNavigation:function(){var az=this;var ax=az.options.messages.end.patterns;var aB=az._value;var aA="";if(aB.count){aA="count"}else{if(aB.until){aA="until"}}var ay=L({dataSource:[{text:ax.never,value:""},{text:ax.after,value:"count"},{text:ax.on,value:"until"}],value:aA,ns:o.ns});az._view.element.find(".k-recur-pattern").append(ay).on(ak+az._namespace,".k-scheduler-navigation li",function(aE){var aC=al(this);var aD=null;var aF=null;aE.preventDefault();aC.addClass("k-state-selected").siblings().removeClass("k-state-selected");az._initEndView(aC.children("a").attr(o.attr("value")));if(az._count){aD=az._count.value();aF=null}else{if(az._until){aD=null;aF=az._until.val?o.parseDate(az._until.val(),"yyyy-MM-dd"):az._until.value()}}aB.count=aD;aB.until=aF})},_createView:function(ax){var aB=this;var ay=aB.options;var aA=ay.messages;var aC=aA[ax==="repeat"?"repeatTitle":"endTitle"];var az='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list" id="recurrence"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+aA.cancel+"</a>"+aA.headerTitle+'<a href="#" class="k-button k-scheduler-update">'+aA.update+"</a></div>";var aD=aB._pane.view().id;aB._view=aB._pane.append(az+P({headerTitle:aC}));aB._view.element.on(ak+aB._namespace,"a.k-scheduler-cancel, a.k-scheduler-update",function(aF){aF.preventDefault();aF.stopPropagation();if(al(this).hasClass("k-scheduler-update")){aB.trigger("change");aB._defaultValue=al.extend({},aB._value)}else{aB._value=aB._defaultValue}var aE=aB._value.freq;aB._endButton.text(aB._endText());aB._endFields.toggleClass("k-state-disabled",!aE);aB._repeatButton.text(aA.frequencies[aE||"never"]);aB._pane.one("viewShow",function(){aB._destroyView()});aB._pane.navigate(aD,aB.options.animations.right)});aB._container=aB._view.element.find(".k-recur-view");if(ax==="repeat"){aB._initFrequency();aB._initRepeatView()}else{aB._initEndNavigation();aB._initEndView()}},_destroyView:function(){if(this._view){this._view.destroy();this._view.element.remove()}this._view=null},_initRepeatView:function(){var az=this;var aC=az._value.freq||"never";var aA={frequency:aC,weekDayCheckBoxes:A,firstWeekDay:az.options.firstWeekDay,messages:az.options.messages[aC]};var ay=aw(aA);var ax=az._container;var aB=az._value;o.destroy(ax);ax.html(ay);if(!ay){az._value={};return}if(aC==="weekly"&&!aB.weekDays){aB.weekDays=[{day:az.options.start.getDay(),offset:0}]}az._initInterval();az._initMonthDay();az._initWeekDays();az._initWeekDay();az._initMonth();az._period()},_initEndView:function(az){var ax=this;var aA=ax._value;if(az===q){if(aA.count){az="count"}else{if(aA.until){az="until"}}}var ay={endPattern:az,messages:ax.options.messages.end};o.destroy(ax._container);ax._container.html(n(ay));ax._initCount();ax._initUntil()},_initWeekDay:function(){var aA=this,aB;var ax=aA.options.messages.weekdays;var az=aA.options.messages.offsetPositions;var ay=aA._container.find(".k-recur-weekday");var aC=function(){aA._weekDayRule();aA.trigger("change")};if(ay[0]){aA._weekDayOffset=aA._container.find(".k-recur-weekday-offset").html(aA._options([{text:az.first,value:"1"},{text:az.second,value:"2"},{text:az.third,value:"3"},{text:az.fourth,value:"4"},{text:az.last,value:"-1"}])).change(aC);aB=[{text:ax.day,value:"day"},{text:ax.weekday,value:"weekday"},{text:ax.weekend,value:"weekend"}];aB=aB.concat(al.map(o.culture().calendar.days.names,function(aE,aD){return{text:aE,value:aD}}));aA._weekDay=ay.html(aA._options(aB)).change(aC).val(aA.options.start.getDay());aA._weekDayView()}},_initMonth:function(){var az=this;var aC=az._value;var aD=az.options.start;var aB=aC.months||[aD.getMonth()+1];var ax=az._container.find(".k-recur-month");var ay=o.culture().calendar.months.names;if(ax[0]){var aA=al.map(ay,function(aF,aE){return{text:aF,value:aE+1}});ax.html(az._options(aA)).change(function(){aC.months=[Number(this.value)]});az._monthSelect=ax;if(aB){ax.val(aB[0])}}},_period:function(){var aD=this;var aE=aD._value;var az=aD._container;var aB=aD.options.messages[aE.freq];var ax=az.find(".k-repeat-rule");var ay=az.find(".k-weekday-view");var aA=az.find(".k-monthday-view");if(ax[0]){var aF=aE.weekDays?"weekday":"monthday";var aC=L({value:aF,dataSource:[{text:aB.dayOfMonth,value:"monthday"},{text:aB.dayOfWeek,value:"weekday"}],ns:o.ns});var aG=function(aL){var aI=aD._weekDay.val();var aH=aD._weekDayOffset.val();var aJ=aD._monthDay.value();var aK=aD._monthSelect?aD._monthSelect.val():null;if(aL==="monthday"){aE.weekDays=null;aE.monthDays=aJ?[aJ]:aJ;aE.months=aK?[Number(aK)]:aK;ay.hide();aA.show()}else{aE.monthDays=null;aE.months=aK?[Number(aK)]:aK;aE.weekDays=[{offset:Number(aH),day:Number(aI)}];ay.show();aA.hide()}};ax.append(aC).on(ak+aD._namespace,".k-scheduler-navigation li",function(aJ){var aH=al(this).addClass("k-state-selected");aJ.preventDefault();aH.siblings().removeClass("k-state-selected");var aI=aH.children("a").attr(o.attr("value"));aG(aI)});aG(aF)}},_initUntil:function(){var az=this;var ax=az._container.find(".k-recur-until");var aC=az.options.start;var aA=az._value;var aB=aA.until;var ay=aB&&aB<aC?aB:aC;if(o.support.input.date){az._until=ax.attr("min",o.toString(ay,"yyyy-MM-dd")).val(o.toString(aB||aC,"yyyy-MM-dd")).on("change",function(){aA.until=o.parseDate(this.value,"yyyy-MM-dd")})}else{az._until=ax.kendoDatePicker({min:ay,value:aB||aC,change:function(){aA.until=this.value()}}).data("kendoDatePicker")}},_options:function(aC,aB){var ax=0;var ay="";var aA=aC.length;var az=this._optionTemplate;if(aB){ay+=az({value:"",text:aB})}for(;ax<aA;ax++){ay+=az(aC[ax])}return ay}});F.plugin(ac)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.scheduler.timelineview",["kendo.scheduler.view"],a)}(function(){var a={id:"scheduler.timelineview",name:"Scheduler Timeline View",category:"web",description:"The Scheduler Timeline View",depends:["scheduler.view"],hidden:true};(function(i,k){var t=window.kendo,s=t.ui,r=t.date.setTime,d=s.SchedulerView,c=t._outerWidth,f=t._outerHeight,C=i.extend,z=i.proxy,q=t.date.getDate,D=t.date.getMilliseconds,e=t.date.MS_PER_DAY,j=t.date.MS_PER_MINUTE,A="k-current-time",x="k-current-time-arrow",h="k-scheduler-header-wrap",n=0.8666,B=".kendoTimelineView";var m=t.template('<div><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'),o=t.template("<span class='k-link k-nav-day'>#=kendo.format('{0:m}', date)#</span>"),E='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail) {#<span class="k-icon k-i-arrow-60-left"></span>#}## if(data.isException()) {#<span class="k-icon k-i-warning"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-reload"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-i-close"></span></a>#}## if(data.head) {#<span class="k-icon k-i-arrow-60-right"></span>#}#</span>#if(resizable && !data.tail){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !data.head){#<span class="k-resize-handle k-resize-e"></span>#}#</div>';function g(F){var G=new Date(1980,1,1,0,0,0);r(G,D(F));return G}function l(F){var G=[];var H=F.workWeekStart;G.push(H);while(F.workWeekEnd!=H){if(H>6){H-=7}else{H++}G.push(H)}return G}function y(F){var H=0;if(F.columns){for(var G=0;G<F.columns.length;G++){H+=y(F.columns[G])}F.colspan=H;return H}else{F.colspan=1;return 1}}function v(J,K,G){var F,H,L,I;for(F=J.length-1;F>=0;F--){H=J[F].rectLeft;I=J[F].rectRight;L=H<=K&&I>=K;if(L||H>=K&&I<=G||K<=H&&G>=H){if(H<K){K=H}if(I>G){G=I}}}return w(J,K,G)}function w(J,K,H){var G=[];for(var F=0;F<J.length;F++){var I={rectLeft:J[F].rectLeft,rectRight:J[F].rectRight};if(I.rectLeft<K&&I.rectRight>K||I.rectLeft>=K&&I.rectRight<=H){G.push(J[F])}}return G}var p=t.Class.extend({init:function(F){this._view=F},_getTimeSlotByPosition:function(F,I,G){var H=this._view.groups[G];return H.timeSlotByPosition(F,I)},_hideHeaders:function(){var F=this._view;F.timesHeader.find("table tr:last").hide();F.datesHeader.find("table tr:last").hide()},_setColspan:function(F){y(F)},_createRowsLayout:function(I,H,G){var F=this._view;return F._createRowsLayout(I,H,G)},_createVerticalColumnsLayout:function(I,H,G,F){return F},_createColumnsLayout:function(I,H,G){var F=this._view;return F._createColumnsLayout(I,H,G)},_getRowCount:function(){var F=this._view;return F._groupCount()},_getGroupsCount:function(){return 1},_addContent:function(F,N,K,P,H,L,U,I){var O=this._view;var M="";var T=O.options;var R=function(V){var X="";var W="";var Z;var Y=function(aa){return function(){return O._resourceBySlot({groupIndex:aa})}};if(t.date.isToday(F[Q])){W+="k-today"}if(t.date.getMilliseconds(V)<t.date.getMilliseconds(T.workDayStart)||t.date.getMilliseconds(V)>=t.date.getMilliseconds(T.workDayEnd)||!O._isWorkDay(F[Q])){W+=" k-nonwork-hour"}X+="<td"+(W!==""?' class="'+W+'"':"")+">";Z=t.date.getDate(F[Q]);t.date.setTime(Z,t.date.getMilliseconds(V));X+=U({date:Z,resources:Y(I?G:S)});X+="</td>";return X};for(var G=0;G<P;G++){M+="<tr>";for(var S=0;S<K;S++){for(var Q=0,J=N;Q<J;Q++){M+=O._forTimeRange(H,L,R)}}M+="</tr>"}return M},_addTimeSlotsCollections:function(G,T,S,X,P){var R=this._view;var N=S.length;if(P){N=Math.floor(N/G)}for(var F=0;F<G;F++){var W=0;var K=R.groups[F];var J;if(P){W=F}var O=W*N;var U=0;if(!P){U=F}var H=S[O].children;var I=H.length/(!P?G:1);var M=I/T;for(var Q=0;Q<T;Q++){var V=Q*M+I*U;J=D(new Date(+R.startTime()));for(var L=0;L<M;L++){R._addTimeSlotToCollection(K,H,L,V,Q,J,X);J+=X}}}},_getVerticalGroupCount:function(F){return F},_getVerticalRowCount:function(I,G,H){var F=this._view;return F._isVerticallyGrouped()?I[G].maxRowCount:H},_renderEvent:function(I,F,N,M,K,G){var L=this._view;var J;J=L._createEventElement(N.occurrence,F,K.head||N.head,K.tail||N.tail);J.appendTo(G).css({top:0,height:L.options.eventHeight});var H={start:N.occurrence._startTime||N.occurrence.start,end:N.occurrence._endTime||N.occurrence.end,element:J,uid:F.uid,slotRange:K,rowIndex:0,offsetTop:0};I.events[F.uid]=H;L.addContinuousEvent(M,K,J,F.isAllDay);L._arrangeRows(H,K,I)},_verticalCountForLevel:function(G){var F=this._view;return F._rowCountForLevel(G)},_horizontalCountForLevel:function(G){var F=this._view;return F._columnCountForLevel(G)},_updateCurrentVerticalTimeMarker:function(J,K){var I=this._view;var H="<div class='"+A+"'></div>";var G=I.datesHeader.find("."+h);var L=Math.round(J[0].innerRect(K,new Date(K.getTime()+1),false).left);var F=i(H).prependTo(G).addClass(x+"-down");F.css({left:I._adjustLeftPosition(L-c(F)*n/2),top:G.find("tr:last").prev().position().top});i(H).prependTo(I.content).css({left:I._adjustLeftPosition(L),width:"1px",height:I.content[0].scrollHeight-1,top:0})},_changeGroup:function(){return k},_prevGroupSlot:function(J,H,G){var F=this._view;if(F._isVerticallyGrouped()){return J}else{var I=H._collection(0,G);return I.last()}},_nextGroupSlot:function(J,H,G){var F=this._view;if(F._isVerticallyGrouped()){return J}else{var I=H._collection(0,G);return I.first()}},_verticalSlots:function(H,G){var F=this._view;return F._changeGroup(H,G)},_verticalMethod:function(F){return F?"leftSlot":"rightSlot"},_normalizeVerticalSelection:function(){return k},_horizontalSlots:function(K,L,F,I,G,N,H){var J=this._view;var M={};M.startSlot=L[F](I);M.endSlot=L[F](G);if(!N&&J._isHorizontallyGrouped()&&(!M.startSlot||!M.endSlot)){M.startSlot=M.endSlot=J._changeGroup(K,H)}return M},_changeVerticalViewPeriod:function(){return false},_changeHorizontalViewPeriod:function(J,G,I,H){var F=this._view;if((!J.startSlot||!J.endSlot)&&!G&&F._changeViewPeriod(I,H,false)){return true}return false},_updateDirection:function(J,H,G,I){var F=this._view;F._updateDirection(J,H,G,I,true)},_createMoveHint:function(I,N){var M=this._view;var K=I.start;var H=M._createEventElement(N.occurrence,N.occurrence,false,false);H.addClass("k-event-drag-hint");var L=I.innerRect(N.occurrence.start,N.occurrence.end,M.options.snap);var F=L.right-L.left-2;if(F<0){F=0}var G=M._adjustLeftPosition(L.left);var J={left:G,top:K.offsetTop,height:K.offsetHeight-2,width:F};H.css(J);M._moveHint=M._moveHint.add(H)},_adjustLeftPosition:function(G){var F=this._view;if(F._isRtl){G-=F.content[0].scrollWidth-F.content[0].offsetWidth}return G}});var b=t.Class.extend({init:function(F){this._view=F},_getTimeSlotByPosition:function(F,I,G){var H=this._view.groups[G];return H.timeSlotByPosition(F,I,true)},_hideHeaders:function(){var F=this._view;if(!F._isVerticallyGrouped()){F.timesHeader.find("table tr").eq(2).hide();F.datesHeader.find("table tr").eq(2).hide()}else{F.times.find(".k-last").hide()}},_setColspan:function(){},_createRowsLayout:function(J,I,H,G){var F=this._view;return F._createDateLayout(G,null,true)},_createVerticalColumnsLayout:function(I,H,G){var F=this._view;return F._createColumnsLayout(I,null,G)},_createColumnsLayout:function(J,I,H,F){var G=this._view;return G._createColumnsLayout(J,I,H,F,true)},_getRowCount:function(G){var F=this._view;return F._rowCountForLevel(G)},_getGroupsCount:function(){var F=this._view;return F._groupCount()},_addContent:function(N,X,V,O,L,K,U,H){var S=this._view;var Q="";var J=S.options;var G=function(ac,Z,af,ag,aa,aj){var ah="";var ad="";var ai;var ae=S._isVerticallyGrouped()?R:T;var ab=function(ak){return function(){return S._resourceBySlot({groupIndex:ak})}};if(t.date.isToday(N[T])){ad+="k-today"}if(t.date.getMilliseconds(ac)<t.date.getMilliseconds(J.workDayStart)||t.date.getMilliseconds(ac)>=t.date.getMilliseconds(J.workDayEnd)||!S._isWorkDay(N[ae])){ad+=" k-nonwork-hour"}ah+="<td"+(ad!==""?' class="'+ad+'"':"")+">";ai=t.date.getDate(N[T]);t.date.setTime(ai,t.date.getMilliseconds(ac));ah+=U({date:ai,resources:ab(aj)});ah+="</td>";return ah};var P=new Date(L),M=S.options.minorTickCount,Y=S.options.majorTick*j,W=Y/M||1,R;for(var F=0;F<O;F++){Q+="<tr>";if(F%(O/S._dates.length)===0){R=F/(O/S._dates.length);P=new Date(S._dates[R]);t.date.setTime(P,t.date.getMilliseconds(L))}for(var T=0,I=X;T<I;T++){Q+=S._forTimeRange(P,K,G,H,V);if(H){r(P,W,false);break}}Q+="</tr>"}return Q},_addTimeSlotsCollections:function(G,T,S,X,P){var R=this._view;var N=S.length;if(P){N=N/T}for(var Q=0;Q<T;Q++){var W=0;var J;if(P){W=Q}var O=W*N;var U=0;var H=S[O].children;var I=P?N:H.length/(T*G);var M=H.length/T;var V;J=D(new Date(+R.startTime()));for(var L=0;L<I;L++){if(!P){V=Q*M+G*L;U++}else{V=0;H=S[L+I*Q].children}for(var F=0;F<G;F++){var K=R.groups[F];R._addTimeSlotToCollection(K,H,F,V,Q,J,X)}J+=X}}},_getVerticalGroupCount:function(){var F=this._view;return F.content.find("tr").length},_getVerticalRowCount:function(H,F,G){return G},_renderEvent:function(J,F,T,R,N,G,Q,M){var P=this._view;var L;var H=[];for(var K=N.start.index;K<=N.end.index;K++){L=P._createEventElement(T.occurrence,F,K!==M,K!==Q);L.appendTo(G).css({top:0,height:P.options.eventHeight});var O=R._timeSlotCollections[0]._slots[K];var S=R.timeSlotRanges(O.start,O.end,false)[0];var I={start:K===Q?T.occurrence._startTime||T.occurrence.start:O.start,end:K===M?T.occurrence._endTime||T.occurrence.end:O.end,element:L,uid:F.uid,slotRange:S,rowIndex:0,offsetTop:0};J.events[F.uid]=I;H.push(I);P.addContinuousEvent(R,S,L,F.isAllDay);P._arrangeRows(I,S,J)}J.events[F.uid]=H},_verticalCountForLevel:function(G){var F=this._view;return F._columnCountForLevel(G)},_horizontalCountForLevel:function(H,G){var F=this._view;return F._columnCountForLevel(G)/F._columnCountForLevel(2)},_updateCurrentVerticalTimeMarker:function(F,G){var M=this._view;var J=M.times.find("tr:first th:first");var H=M.times.find("tr:first th:last");var K="<div class='"+A+"'></div>";var N=i(K).prependTo(M.times);var L=Math.round(F[0].innerRect(G,new Date(G.getTime()+1),false).top);var I={};if(this._isRtl){I.right=J.position().left+f(J)-f(H);N.addClass(x+"-left")}else{I.left=H.position().left;N.addClass(x+"-right")}I.top=L-c(N)*n/2;N.css(I);i(K).prependTo(M.content).css({top:L,height:"1px",right:"1px",width:M.content[0].scrollWidth,left:0})},_changeGroup:function(G,H,I){var F=this._view;if(!I){G.groupIndex=H?F.groups.length-1:0}},_prevGroupSlot:function(F){return F},_nextGroupSlot:function(F){return F},_changeDate:function(I,H,L){var F=this._view;var K=F.groups[I.groupIndex];var J,G;if(H){J=K._getCollections(false);G=L.index-1;if(G>=0){return J[0]._slots[G]}}else{J=K._getCollections(false);G=L.index+1;if(J[0]&&J[0]._slots[G]){return J[0]._slots[G]}}},_verticalSlots:function(G,F,H){return this._changeDate(G,F,H)},_verticalMethod:function(G,F){if(F){return G?"upSlot":"downSlot"}else{return G?"leftSlot":"rightSlot"}},_normalizeVerticalSelection:function(J,H,I,F){var G=this._view;if(!F){return G._normalizeVerticalSelection(J,H,I)}return k},_horizontalSlots:function(K,M,F,I,G,O,H){var J=this._view;var L=J._changeGroup(K,H);var N={};if(!L){if(!J._isVerticallyGrouped()){N.startSlot=M[F](I);N.endSlot=M[F](G)}}else{N.startSlot=N.endSlot=L}return N},_changeVerticalViewPeriod:function(J,G,I,H){var F=this._view;if((!J.startSlot||!J.endSlot)&&!G&&F._changeViewPeriod(I,H,F._isVerticallyGrouped())){return true}return false},_changeHorizontalViewPeriod:function(J,G,I,H){var F=this._view;if(F._isVerticallyGrouped()){return false}if((!J.startSlot||!J.endSlot)&&!G&&F._changeViewPeriod(I,H,false)){return true}return false},_updateDirection:function(J,H,G,I){var F=this._view;F._updateDirection(J,H,G,I,!F._isVerticallyGrouped())},_createMoveHint:function(H,N){var L=this._view;var K=H.start;var F=H.end;for(var J=K.index;J<=F.index;J++){var M=H.collection._slots[J];var G=L._createEventElement(N.occurrence,N.occurrence,false,false);G.addClass("k-event-drag-hint");var I={left:M.offsetLeft+2,top:M.offsetTop,height:L.options.eventHeight,width:M.offsetWidth};G.css(I);L._moveHint=L._moveHint.add(G)}},_adjustLeftPosition:function(G){var F=this._view;if(F._isRtl&&!F._isVerticallyGrouped()){G-=F.content[0].scrollWidth-F.content[0].offsetWidth}return G}});t.ui.scheduler.TimelineGroupedView=p;t.ui.scheduler.TimelineGroupedByDateView=b;var u=d.extend({init:function(G,F){var H=this;d.fn.init.call(H,G,F);H._groupedView=H._getGroupedView();H.title=H.options.title||H.options.name;H._workDays=l(H.options);H._templates();H._editable();H.calculateDateRange();H._groups();H._currentTime(true)},name:"timeline",_getGroupedView:function(){if(this._isGroupedByDate()){return new t.ui.scheduler.TimelineGroupedByDateView(this)}else{return new t.ui.scheduler.TimelineGroupedView(this)}},_getNextEventIndexBySlot:function(J,H,I){if(this._isVerticallyGrouped()){return t.ui.SchedulerView.fn._getNextEventIndexBySlot.call(this,J,H,I)}var F=0;for(var G=0;G<H.length;G++){if(J.startDate()>H[G].start.startDate()){F++;continue}if(J.startDate().getTime()===H[G].start.startDate().getTime()&&I>H[G].start.groupIndex){F++;continue}break}return F},_getSelectedSlot:function(K,G,I,F,J,H){if(this._isVerticallyGrouped()){return t.ui.SchedulerView.fn._getSelectedSlot.call(this,K,G,I,F,J,H)}return K},_getSortedEvents:function(F){if(this._isVerticallyGrouped()){return t.ui.SchedulerView.fn._getSortedEvents.call(this,F)}return F.sort(function(I,H){var G=I.start.startDate().getTime()-H.start.startDate().getTime();if(G===0){if(I.start.isDaySlot&&!H.start.isDaySlot){G=-1}if(!I.start.isDaySlot&&H.start.isDaySlot){G=1}}if(G===0){G=I.start.groupIndex-H.start.groupIndex}if(G===0){G=i(I.element).index()-i(H.element).index()}return G})},_currentTimeMarkerUpdater:function(){this._updateCurrentTimeMarker(new Date())},_updateCurrentTimeMarker:function(G){var T=this.options;this.datesHeader.find("."+A).remove();this.times.find("."+A).remove();this.content.find("."+A).remove();if(!this._isInDateSlot({start:G,end:G})){return}if(T.currentTimeMarker.useLocalTimezone===false){var M=T.dataSource.options.schema.timezone;if(T.dataSource&&M){var Q=t.timezone.offset(G,M);G=t.timezone.convert(G,G.getTimezoneOffset(),Q)}}var H=!T.group||T.group.orientation=="vertical"?1:this.groups.length;for(var R=0;R<H;R++){var S=this.groups[R];if(!S){return}var O=t.date.toUtcTime(G);var F=S.timeSlotRanges(O,O+1);if(F.length===0){return}var L=F[0].collection;var K=L.slotByStartDate(G);if(K){if(this._isVerticallyGrouped()){this._groupedView._updateCurrentVerticalTimeMarker(F,G)}else{var J="<div class='"+A+"'></div>";var N=this.datesHeader.find("."+h);var I=Math.round(F[0].innerRect(G,new Date(G.getTime()+1),false).left);var P=i(J).prependTo(N).addClass(x+"-down");P.css({left:this._adjustLeftPosition(I-c(P)*n/2),top:N.find("tr:last").prev().position().top});i(J).prependTo(this.content).css({left:this._adjustLeftPosition(I),width:"1px",height:this.content[0].scrollHeight-1,top:0})}}}},_adjustLeftPosition:function(F){return this._groupedView._adjustLeftPosition(F)},_currentTime:function(F){var H=this;var G=H.options.currentTimeMarker;if(G!==false&&G.updateInterval!==k){H._currentTimeMarkerUpdater();if(F){H._currentTimeUpdateTimer=setInterval(z(this._currentTimeMarkerUpdater,H),G.updateInterval)}}},_editable:function(){if(this.options.editable){if(this._isMobile()){this._touchEditable()}else{this._mouseEditable()}}},_mouseEditable:function(){var F=this;F.element.on("click"+B,".k-event a:has(.k-i-close)",function(G){F.trigger("remove",{uid:i(this).closest(".k-event").attr(t.attr("uid"))});G.preventDefault()});if(F.options.editable.create!==false){F.element.on("dblclick"+B,".k-scheduler-content td",function(G){var I=F._slotByPosition(G.pageX,G.pageY);if(I){var H=F._resourceBySlot(I);F.trigger("add",{eventInfo:C({start:I.startDate(),end:I.endDate()},H)})}G.preventDefault()})}if(F.options.editable.update!==false){F.element.on("dblclick"+B,".k-event",function(G){F.trigger("edit",{uid:i(this).closest(".k-event").attr(t.attr("uid"))});G.preventDefault()})}},_touchEditable:function(){var G=this;var F=0;if(t.support.mobileOS.android){F=5}if(G.options.editable.create!==false){G._addUserEvents=new t.UserEvents(G.element,{threshold:F,filter:".k-scheduler-content td",tap:function(I){var H=I.x.location!==k?I.x.location:I.x;var L=I.y.location!==k?I.y.location:I.y;var K=G._slotByPosition(H,L);if(K){var J=G._resourceBySlot(K);G.trigger("add",{eventInfo:C({start:K.startDate(),end:K.endDate()},J)})}I.preventDefault()}})}if(G.options.editable.update!==false){G._editUserEvents=new t.UserEvents(G.element,{threshold:F,filter:".k-event",tap:function(I){var H=i(I.target).closest(".k-event");if(!H.hasClass("k-event-active")){G.trigger("edit",{uid:H.attr(t.attr("uid"))})}I.preventDefault()}})}},_slotByPosition:function(F,L){var K;var H=this.content;var J=H.offset();var I;F-=J.left;L-=J.top;if(this._isRtl){var G=t.support.browser;if(G.mozilla){F+=H[0].scrollWidth-H[0].offsetWidth;F+=H[0].scrollLeft}else{if(G.msie){F-=H.scrollLeft();F+=H[0].scrollWidth-H[0].offsetWidth}else{if(G.webkit){F+=H[0].scrollLeft}}}}else{F+=H[0].scrollLeft}L+=H[0].scrollTop;F=Math.ceil(F);L=Math.ceil(L);for(I=0;I<this.groups.length;I++){K=this._groupedView._getTimeSlotByPosition(F,L,I);if(K){return K}}return null},options:{name:"TimelineView",title:"Timeline",selectedDateFormat:"{0:D}",selectedShortDateFormat:"{0:d}",date:t.date.today(),startTime:t.date.today(),endTime:t.date.today(),showWorkHours:false,minorTickCount:2,editable:true,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,majorTick:60,eventHeight:25,eventMinWidth:0,columnWidth:100,groupHeaderTemplate:"#=text#",majorTimeHeaderTemplate:"#=kendo.toString(date, 't')#",slotTemplate:"&nbsp;",eventTemplate:m,dateHeaderTemplate:o,footer:{command:"workDay"},currentTimeMarker:{updateInterval:10000,useLocalTimezone:true},messages:{defaultRowText:"All events",showFullDay:"Show full day",showWorkDay:"Show business hours"}},events:["remove","add","edit"],_templates:function(){var F=this.options,G=C({},t.Template,F.templateSettings);this.eventTemplate=this._eventTmpl(F.eventTemplate,E);this.majorTimeHeaderTemplate=t.template(F.majorTimeHeaderTemplate,G);this.dateHeaderTemplate=t.template(F.dateHeaderTemplate,G);this.slotTemplate=t.template(F.slotTemplate,G);this.groupHeaderTemplate=t.template(F.groupHeaderTemplate,G)},_render:function(G){var F=this;G=G||[];F._dates=G;F._startDate=G[0];F._endDate=G[G.length-1||0];F._calculateSlotRanges();F.createLayout(F._layout(G));F._content(G);F._footer();F._setContentWidth();F.refreshLayout();F.datesHeader.on("click"+B,".k-nav-day",function(I){var H=i(I.currentTarget).closest("th");var J=F._slotByPosition(H.offset().left,F.content.offset().top);F.trigger("navigate",{view:"timeline",date:J.startDate()})});F._groupedView._hideHeaders()},_setContentWidth:function(){var J=this.content;var G=J.width();var H=this.content.find("table");var K=H.find("tr:first").children().length;var I=100;var F=K*this.options.columnWidth;if(G<F){I=Math.ceil(F/G*100)}H.add(this.datesHeader.find("table")).css("width",I+"%")},_calculateSlotRanges:function(){var K=this._dates;var G=this.startTime();var L=this.endTime();if(D(L)===D(t.date.getDate(L))){L=t.date.getDate(L);r(L,e-1)}L=D(L);G=D(G);var J=[];for(var F=0;F<K.length;F++){var I=q(K[F]);r(I,G);var H=q(K[F]);r(H,L);J.push({start:t.date.toUtcTime(I),end:t.date.toUtcTime(H)})}this._slotRanges=J},_forTimeRange:function(U,W,V,G,X){U=g(U);W=g(W);var M=this,N=D(U),O=D(W),K=M.options.minorTickCount,aa=M.options.majorTick*j,Y=aa/K||1,J=new Date(+U),P=J.getDate(),F,T=0,I,Q="";I=e/Y;if(N!=O){if(N>O){O+=e}I=(O-N)/Y}I=G?1:Math.round(I);if(X){I=I*X}for(;T<I;T++){var ab=T%(aa/Y);var L=ab===0;var H=ab<K-1;var S=ab===K-1;var Z=K;if(I%K!==0){var R=I-(T+1)<K;if(L&&R){Z=I%K}}Q+=V(J,L,H,S,Z,T%X);if(!G){if(X){if(T%X===X-1){r(J,Y,false)}}else{r(J,Y,false)}}}if(O){F=D(J);if(P<J.getDate()){F+=e}if(F>O){J=new Date(+W)}}return Q},_layout:function(F){var J=[];var H=[];var I=this;var O=[{text:I.options.messages.defaultRowText}];var N=I._groupedView;var L=[];for(var K=0;K<I.options.minorTickCount;K++){L.push({text:"",className:"k-last",minorTicks:true})}this._forTimeRange(I.startTime(),I.endTime(),function(Q,U,P,T,S){var R=I.majorTimeHeaderTemplate;if(U){var V={text:R({date:Q}),className:T?"k-slot-cell":"",columns:L.slice(0,S)};N._setColspan(V);J.push(V)}});for(var M=0;M<F.length;M++){H.push({text:I.dateHeaderTemplate({date:F[M]}),className:"k-slot-cell",columns:J.slice(0)})}var G=this.groupedResources;if(G.length){if(this._groupOrientation()==="vertical"){O=N._createRowsLayout(G,null,this.groupHeaderTemplate,H);H=N._createVerticalColumnsLayout(G,null,this.groupHeaderTemplate,H)}else{H=N._createColumnsLayout(G,H,this.groupHeaderTemplate,H)}}return{columns:H,rows:O}},_footer:function(){var F=this.options;if(F.footer!==false){var G='<div class="k-header k-scheduler-footer">';var I=F.footer.command;if(I&&I==="workDay"){G+='<ul class="k-reset k-header">';G+='<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"></span>';G+=(F.showWorkHours?F.messages.showFullDay:F.messages.showWorkDay)+"</a></li>";G+="</ul>"}else{G+="&nbsp;"}G+="</div>";this.footer=i(G).appendTo(this.element);var H=this;this.footer.on("click"+B,".k-scheduler-fullday",function(J){J.preventDefault();H.trigger("navigate",{view:H.name||F.name,date:H.startDate(),isWorkDay:!F.showWorkHours})})}},_columnCountForLevel:function(G){var F=this.columnLevels[G];return F?F.length:0},_rowCountForLevel:function(G){var F=this.rowLevels[G];return F?F.length:0},_isWorkDay:function(G){var F=G.getDay();var I=this._workDays;for(var H=0;H<I.length;H++){if(I[H]===F){return true}}return false},_content:function(F){var M=this;var H=M.startTime();var K=this.endTime();var J=1;var O=1;var N=F.length;var L="";var I=this.groupedResources;var P=this.slotTemplate;var G=false;if(I.length){G=M._groupOrientation()==="vertical";if(G){O=M._groupedView._getRowCount(this.rowLevels.length-1);J=M._groupedView._getGroupsCount()}else{J=M._groupCount()}}L+="<tbody>";L+=M._groupedView._addContent(F,N,J,O,H,K,P,G);L+="</tbody>";this.content.find("table").append(L)},_groups:function(){var L=this._groupCount();var J=this._dates;var I=J.length;this.groups=[];for(var F=0;F<L;F++){var H=this._addResourceView(F);var K=J[0];var G=J[J.length-1||0];H.addTimeSlotCollection(K,t.date.addDays(G,1))}this._timeSlotGroups(L,I)},_isHorizontallyGrouped:function(){return this.groupedResources.length&&this._groupOrientation()==="horizontal"},_timeSlotGroups:function(J,G){var F=this._timeSlotInterval();var I=this._isVerticallyGrouped();var H=this.content.find("tr");H.attr("role","row");this._groupedView._addTimeSlotsCollections(J,G,H,F,I)},_addTimeSlotToCollection:function(O,Q,N,I,R,K,J){var P=Q[N+I];var M=O.getTimeSlotCollection(0);var H=this._dates[R];var G=Date.UTC(H.getFullYear(),H.getMonth(),H.getDate());var F=G+K;var L=F+J;P.setAttribute("role","gridcell");P.setAttribute("aria-selected",false);M.addTimeSlot(P,F,L,true)},startDate:function(){return this._startDate},endDate:function(){return this._endDate},startTime:function(){var F=this.options;return F.showWorkHours?F.workDayStart:F.startTime},endTime:function(){var F=this.options;return F.showWorkHours?F.workDayEnd:F.endTime},_timeSlotInterval:function(){var F=this.options;return F.majorTick/F.minorTickCount*j},nextDate:function(){return t.date.nextDay(this.endDate())},previousDate:function(){return t.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},render:function(G){this._headerColumnCount=0;this._groups();this.element.find(".k-event").remove();G=new t.data.Query(G).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray();var F=[];this._eventsByResource(G,this.groupedResources,F);var J=[];var I=0;for(var H=0;H<F.length;H++){var K={groupIndex:H,maxRowCount:0,events:{}};J.push(K);this._renderEvents(F[H],H,K);if(I<K.maxRowCount){I=K.maxRowCount}}this._setRowsHeight(J,F.length,I);this._positionEvents(J,F.length);this._currentTime(false);this.trigger("activate")},_positionEvents:function(L,H){for(var K=0;K<H;K++){var J=L[K].events;for(var G in J){var F=J[G];if(i.isArray(F)){for(var I=0;I<F.length;I++){this._positionEvent(F[I])}}else{this._positionEvent(F)}}}},_setRowsHeight:function(G,H,J){var L=this.options.eventHeight+2;var N=this._getBottomRowOffset();var Q=this._groupedView;var K=Q._getVerticalGroupCount(H);H=this._isVerticallyGrouped()?K:1;for(var M=0;M<H;M++){var I=Q._getVerticalRowCount(G,M,J);I=I?I:1;var F=(L+2)*I+N;var O=i(this.times.find("tr")[M]);var P=i(this.content.find("tr")[M]);O.height(F);P.height(F)}this._setContentWidth();this.refreshLayout();this._refreshSlots()},_getBottomRowOffset:function(){var I=this.options.eventHeight*0.5;var F=this._isMobile();var H;var G;if(F){H=30;G=60}else{H=15;G=30}if(I>G){I=G}else{if(I<H){I=H}}return I},_positionEvent:function(F){var L=this.options.eventHeight+2;var J=F.slotRange.innerRect(F.start,F.end,false);var K=this._adjustLeftPosition(J.left);var I=J.right-J.left-2;if(I<0){I=0}if(I<this.options.eventMinWidth){var H=F.slotRange.collection;var M=H._slots[H._slots.length-1];var G=M.offsetLeft+M.offsetWidth;I=this.options.eventMinWidth;if(G<K+I){I=G-J.left-2}}F.element.css({top:F.slotRange.start.offsetTop+F.rowIndex*(L+2)+"px",left:K,width:I})},_refreshSlots:function(){for(var F=0;F<this.groups.length;F++){this.groups[F].refresh()}},_eventsByResource:function(H,L,F){var K=L[0];if(K){var G=K.dataSource.view();for(var I=0;I<G.length;I++){var J=this._resourceValue(K,G[I]);var M=new t.data.Query(H).filter({field:K.field,operator:d.groupEqFilter(J)}).toArray();if(L.length>1){this._eventsByResource(M,L.slice(1),F)}else{F.push(M)}}}else{F.push(H)}},_isInDateSlot:function(H){var G=H.start;var F=H.end;var J=q(this._startDate);var I=t.date.addDays(q(this._endDate),1);if(G<I&&J<=F){return true}return false},_isInTimeSlot:function(I){var H=I._startTime||t.date.toUtcTime(I.start);var G=I._endTime||t.date.toUtcTime(I.end);var J=this._slotRanges;if(H===G){G=G+1}for(var F=0;F<J.length;F++){if(H<J[F].end&&J[F].start<G){return true}}return false},_adjustEvent:function(F){var G=F.start;var J=F.end;var L=F._time("start");var P=F._time("end");var H=D(this.startTime());var K=D(this.endTime());var I=null;var N=null;var Q;var O=false;var M=false;if(F.isAllDay){I=q(G);if(H>L){r(I,H);M=true}N=q(J);if(K===D(q(this.endTime()))){N=t.date.addDays(N,1)}else{r(N,K);O=true}}else{K=K===0?e:K;if(H>L){I=q(G);r(I,H);M=true}else{if(K<L){I=q(G);I=t.date.addDays(I,1);r(I,H);M=true}}if(K<P){N=q(J);r(N,K);O=true}else{if(H>P){N=q(J);N=t.date.addDays(N,-1);r(N,K);O=true}}}Q=F.clone({start:I?I:G,end:N?N:J,_startTime:I?t.date.toUtcTime(I):F._startTime,_endTime:N?t.date.toUtcTime(N):F._endTime,isAllDay:false});return{occurrence:Q,head:O,tail:M}},_renderEvents:function(S,Q,K){var G;var N;var I;for(N=0,I=S.length;N<I;N++){G=S[N];if(this._isInDateSlot(G)){var J=G.isAllDay||G.end.getTime()-G.start.getTime()>=e;var H=this.content;if(J||this._isInTimeSlot(G)){var R=this._adjustEvent(G);var P=this.groups[Q];if(!P._continuousEvents){P._continuousEvents=[]}var F=P.slotRanges(R.occurrence,false);var M=F[0];var O=M.start.index;var L=M.end.index;if(this._isInTimeSlot(R.occurrence)){this._groupedView._renderEvent(K,G,R,P,M,H,O,L)}}}}},addContinuousEvent:function(J,F,I,H){var G=J._continuousEvents;G.push({element:I,isAllDay:H,uid:I.attr(t.attr("uid")),start:F.start,end:F.end})},_createEventElement:function(T,H,Q,O){var U=this.eventTemplate;var J=this.options.editable;var P=this._isMobile();var F=J&&J.destroy!==false&&!P;var G=J&&J.resize!==false;var N=H._time("start");var S=H._time("end");var M=H.start;var R=H.end;var I=this.eventResources(H);if(H._startTime&&N!==t.date.getMilliseconds(H.start)){M=new Date(N);M=t.timezone.apply(M,"Etc/UTC")}if(H._endTime&&S!==t.date.getMilliseconds(H.end)){R=new Date(S);R=t.timezone.apply(R,"Etc/UTC")}var L=C({},{ns:t.ns,resizable:G,showDelete:F,head:Q,tail:O,singleDay:this._dates.length==1,resources:I,inverseColor:I&&I[0]?this._shouldInverseResourceColor(I[0]):false},H,{start:M,end:R});var K=i(U(L));this.angular("compile",function(){return{elements:K,data:[{dataItem:L}]}});return K},_arrangeRows:function(J,N,K){var Q=N.start.index;var M=N.end.index;var O=J.slotRange.innerRect(J.start,J.end,false);var H=O.right+this.options.eventMinWidth;var R=v(N.events(),O.left,H);N.addEvent({slotIndex:Q,start:Q,end:M,rectLeft:O.left,rectRight:H,element:J.element,uid:J.uid});R.push({start:Q,end:M,uid:J.uid});var S=d.createRows(R);if(K.maxRowCount<S.length){K.maxRowCount=S.length}for(var P=0,I=S.length;P<I;P++){var F=S[P].events;for(var L=0,G=F.length;L<G;L++){K.events[F[L].uid].rowIndex=P}}},_groupCount:function(){var F=this.groupedResources;var G=this._groupedView;if(F.length){if(this._groupOrientation()==="vertical"){return G._verticalCountForLevel(F.length-1)}else{return G._horizontalCountForLevel(F.length-1,this.columnLevels.length-1)}}return 1},_updateEventForSelection:function(G){var F=this._adjustEvent(G.clone());return F.occurrence},_eventOptionsForMove:function(F){if(F.isAllDay){return{isAllDay:false}}return{}},_updateEventForResize:function(F){if(F.isAllDay){F.set("isAllDay",false)}},_updateMoveHint:function(G,N,F){var M=this.groups[N];var I=G.clone({start:G.start,end:G.end});var J=I.duration();I.start=new Date(I.start.getTime()+F);I.end=new Date(+I.start+J);var O=this._adjustEvent(I);var H=M.slotRanges(O.occurrence,false);this._removeMoveHint();for(var K=0;K<H.length;K++){this._groupedView._createMoveHint(H[K],O)}var L=this.content;this._moveHint.appendTo(L)},_updateResizeHint:function(G,T,K,P){var S=this.groups[T];var H=S.ranges(K,P,false,false);this._removeResizeHint();for(var M=0;M<H.length;M++){var O=H[M];var J=O.startSlot();var Q=O.innerRect(K,P,false);Q.top=J.offsetTop;var I=Q.right-Q.left;var U=O.endSlot().offsetTop+J.offsetHeight-Q.top;var L=this._adjustLeftPosition(Q.left);var N=d.fn._createResizeHint.call(this,L,Q.top,I,U);this._resizeHint=this._resizeHint.add(N)}var R="t";var F=this.content;this._resizeHint.appendTo(F);this._resizeHint.find(".k-label-top,.k-label-bottom").text("");this._resizeHint.first().addClass("k-first").find(".k-label-top").text(t.toString(t.timezone.toLocalDate(K),R));this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(t.toString(t.timezone.toLocalDate(P),R))},selectionByElement:function(F){var G=F.offset();return this._slotByPosition(G.left,G.top)},_updateDirection:function(K,G,F,I,H){var L=G[0].start;var J=G[G.length-1].end;if(F&&!H){if(L.index===J.index&&L.collectionIndex===J.collectionIndex){K.backward=I}}},_changeGroup:function(F,G){var I=G?"prevGroupSlot":"nextGroupSlot";var H=this[I](F.start,F.groupIndex,false);if(H){F.groupIndex+=G?-1:1}this._groupedView._changeGroup(F,G,H);return H},prevGroupSlot:function(F,G,I){var H=this.groups[G];var J=H.ranges(F,F,I,false)[0].start;if(G<=0){return}return this._groupedView._prevGroupSlot(J,H,I)},nextGroupSlot:function(F,G,I){var H=this.groups[G];var J=H.ranges(F,F,I,false)[0].start;if(G>=this.groups.length-1){return}return this._groupedView._nextGroupSlot(J,H,I)},_verticalSlots:function(L,H,O,I){var N=this._groupedView;var F=N._verticalMethod(I,O);var J=H[0].start;var G=H[H.length-1].end;var M=this.groups[L.groupIndex];var K=N._normalizeVerticalSelection(L,H,I,O);if(K){J=G=K}J=M[F](J);G=M[F](G);if(!O&&this._isVerticallyGrouped()&&(!J||!G)){J=G=N._verticalSlots(L,I,K)}return{startSlot:J,endSlot:G}},_horizontalSlots:function(K,H,N,I){var F=I?"upSlot":"downSlot";var J=H[0].start;var G=H[H.length-1].end;var L=this.groups[K.groupIndex];var M={};if(!N){M=this._groupedView._horizontalSlots(K,L,F,J,G,N,I)}else{M.startSlot=L[F](J);M.endSlot=L[F](G);if(!N&&this._isHorizontallyGrouped()&&(!J||!G)){M.startSlot=M.endSlot=this._changeGroup(K,I)}}return M},_changeViewPeriod:function(I,H){var G=H?this.previousDate():this.nextDate();var K=I.start;var F=I.end;I.start=new Date(G);I.end=new Date(G);if(this._isHorizontallyGrouped()){I.groupIndex=H?this.groups.length-1:0}var J=F-K;if(H){F=D(this.endTime());F=F===0?e:F;r(I.start,F-J);r(I.end,F)}else{K=D(this.startTime());r(I.start,K);r(I.end,K+J)}I.events=[];return true},move:function(M,O,H){var I=false;var N=this.groups[M.groupIndex];var P=t.keys;var R=this._groupedView;var G=N.ranges(M.start,M.end,false,false);var L,F,K,J;if(O===P.DOWN||O===P.UP){I=true;K=O===P.UP;R._updateDirection(M,G,H,K);J=this._verticalSlots(M,G,H,K);if(R._changeVerticalViewPeriod(J,H,M,K)){return I}}else{if(O===P.LEFT||O===P.RIGHT){I=true;K=O===P.LEFT;this._updateDirection(M,G,H,K,false);J=this._horizontalSlots(M,G,H,K);if(R._changeHorizontalViewPeriod(J,H,M,K)){return I}}}if(I){L=J.startSlot;F=J.endSlot;if(H){var Q=M.backward;if(Q&&L){M.start=L.startDate()}else{if(!Q&&F){M.end=F.endDate()}}}else{if(L&&F){M.start=L.startDate();M.end=F.endDate()}}M.events=[]}return I},destroy:function(){var F=this;if(F.element){F.element.off(B)}if(F.footer){F.footer.remove()}if(F._currentTimeUpdateTimer){clearInterval(F._currentTimeUpdateTimer)}d.fn.destroy.call(this);if(this._isMobile()&&F.options.editable){if(F.options.editable.create!==false){F._addUserEvents.destroy()}if(F.options.editable.update!==false){F._editUserEvents.destroy()}}}});C(true,s,{TimelineView:u,TimelineWeekView:u.extend({options:{name:"TimelineWeekView",title:"Timeline Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",majorTick:120},name:"timelineWeek",calculateDateRange:function(){var G=this.options.date,J=t.date.dayOfWeek(G,this.calendarInfo().firstDay,-1),F,H,I=[];for(F=0,H=7;F<H;F++){I.push(J);J=t.date.nextDay(J)}this._render(I)}}),TimelineWorkWeekView:u.extend({options:{name:"TimelineWorkWeekView",title:"Timeline Work Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",majorTick:120},name:"timelineWorkWeek",nextDate:function(){var F=t.date.dayOfWeek(t.date.nextDay(this.endDate()),this.calendarInfo().firstDay,1);return t.date.addDays(F,this._workDays[0])},previousDate:function(){var F=t.date.dayOfWeek(this.startDate(),this.calendarInfo().firstDay,-1);var G=this._workDays;return t.date.addDays(F,G[G.length-1]-7)},calculateDateRange:function(){var G=this.options.date,I=t.date.dayOfWeek(G,this.options.workWeekStart,-1),F=t.date.dayOfWeek(I,this.options.workWeekEnd,1),H=[];while(I<=F){H.push(I);I=t.date.nextDay(I)}this._render(H)}}),TimelineMonthView:u.extend({options:{name:"TimelineMonthView",title:"Timeline Month",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",workDayStart:new Date(1980,1,1,0,0,0),workDayEnd:new Date(1980,1,1,23,59,59),footer:false,majorTick:1440,minorTickCount:1},name:"timelineMonth",calculateDateRange:function(){var H=this.options.date,K=t.date.firstDayOfMonth(H),G=t.date.lastDayOfMonth(H),F,I,J=[];for(F=0,I=G.getDate();F<I;F++){J.push(K);K=t.date.nextDay(K)}this._render(J)}})})}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.scheduler",["kendo.dropdownlist","kendo.editable","kendo.multiselect","kendo.window","kendo.datetimepicker","kendo.scheduler.recurrence","kendo.scheduler.view","kendo.scheduler.dayview","kendo.scheduler.agendaview","kendo.scheduler.monthview","kendo.scheduler.timelineview","kendo.mobile.actionsheet","kendo.mobile.pane","kendo.pdf"],a)}(function(){var a={id:"scheduler",name:"Scheduler",category:"web",description:"The Scheduler is an event calendar.",depends:["dropdownlist","editable","multiselect","window","datepicker","datetimepicker","scheduler.recurrence","scheduler.view"],features:[{id:"scheduler-dayview",name:"Scheduler Day View",description:"Scheduler Day View",depends:["scheduler.dayview"]},{id:"scheduler-agendaview",name:"Scheduler Agenda View",description:"Scheduler Agenda View",depends:["scheduler.agendaview"]},{id:"scheduler-monthview",name:"Scheduler Month View",description:"Scheduler Month View",depends:["scheduler.monthview"]},{id:"scheduler-timelineview",name:"Scheduler Timeline View",description:"Scheduler Timeline View",depends:["scheduler.timelineview"]},{id:"scheduler-mobile",name:"Scheduler adaptive rendering",description:"Support for adaptive rendering",depends:["mobile.actionsheet","mobile.pane"]},{id:"scheduler-pdf-export",name:"PDF export",description:"Export the scheduler events as PDF",depends:["pdf","drawing"]},{id:"scheduler-timezones",name:"Timezones",description:"Allow selecting timezones different than Etc/UTC",depends:["timezones"]}]};(function(ap,x){var r=window.kendo,s=r.date,S=r.support.input,D=s.MS_PER_DAY,az=s.getDate,V=r.date.getMilliseconds,au=r.recurrence,G=r.keys,O=r.ui,j=O.Widget,c=O.DataBoundWidget,ax="string",aj=O.Popup,u=O.Calendar,m=r.data.DataSource,C=ap.isPlainObject,ab=ap.extend,y=ap.proxy,ah=Object.prototype.toString,b=ap.isArray,aw=".kendoScheduler",an="click",E="change",Z="cancel",aD="remove",ao="save",X="add",F="edit",aC=/(?:value:start|value:end)(?:,|$)/,f=az(new Date()),h=",",Y=/\;/g,aE="recurrenceException",k="Are you sure you want to delete this event?",J="Do you want to delete only this event occurrence or the whole series?",I="Do you want to edit only this event occurrence or the whole series?",aG="Are you sure you want to delete this event occurrence?",af="Are you sure you want to delete the whole series?",Q='<a class="k-button #=className#" #=attr# href="\\#">#=text#</a>',U=r.template('<li class="k-current-view" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>'),N=r.template('<div class="k-floatwrap k-header k-scheduler-toolbar"># if (pdf) { #<ul class="k-reset k-scheduler-tools"><li><a role="button" href="\\#" class="k-button k-pdf"><span class="k-icon k-i-file-pdf"></span>${messages.pdf}</a></li></ul># } #<ul class="k-reset k-scheduler-navigation"><li class="k-state-default k-header k-nav-today"><a role="button" href="\\#" class="k-link">${messages.today}</a></li><li class="k-state-default k-header k-nav-prev"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-60-left"></span></a></li><li class="k-state-default k-header k-nav-next"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-60-right"></span></a></li><li class="k-state-default k-nav-current"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-calendar"></span><span class="k-sm-date-format" data-#=ns#bind="text: formattedShortDate"></span><span class="k-lg-date-format" data-#=ns#bind="text: formattedDate"></span></a></li></ul>#if(viewsCount === 1){#<a role="button" data-#=ns#name="#=view#" href="\\#" class="k-link k-scheduler-refresh"><span class="k-icon k-i-reload"></span></a>#}else{#<ul class="k-reset k-header k-scheduler-views">#for(var view in views){#<li class="k-state-default k-view-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>#}#</ul>#}#</div>'),aq=r.template('<div class="k-floatwrap k-header k-scheduler-toolbar"><ul class="k-reset k-header k-scheduler-navigation"><li class="k-state-default k-nav-today"><a role="button" href="\\#" class="k-link">${messages.today}</a></li></ul>#if(viewsCount === 1){#<a role="button" data-#=ns#name="#=view#" href="\\#" class="k-link k-scheduler-refresh"><span class="k-icon k-i-reload"></span></a>#}else{#<ul class="k-reset k-header k-scheduler-views">#for(var view in views){#<li class="k-state-default k-view-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>#}#</ul>#}#</div><div class="k-floatwrap k-header k-scheduler-toolbar"><ul class="k-reset k-header k-scheduler-navigation"><li class="k-state-default k-nav-prev"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-60-left"></span></a></li><li class="k-state-default k-nav-current"><span class="k-sm-date-format" data-#=ns#bind="text: formattedShortDate"></span><span class="k-lg-date-format" data-#=ns#bind="text: formattedDate"></span></li><li class="k-state-default k-nav-next"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-60-right"></span></a></li></ul></div>'),ay=function(aL,aM){var aK={name:aM.field};var aO=!S.date?r.attr("role")+'="datepicker" ':"";var aJ=r.attr("role")+'="datetimepicker" ';var aN=aM.model.isAllDay;var aP=r.attr("validate")+"='"+!aN+"'";var aI=r.attr("validate")+"='"+aN+"'";ac(aK,aM);ag(aK,aM);ap('<input type="datetime-local" required '+r.attr("type")+'="date" '+aJ+r.attr("bind")+'="value:'+aM.field+',invisible:isAllDay" '+aP+"/>").attr(aK).appendTo(aL);ap('<input type="date" required '+r.attr("type")+'="date" '+aO+r.attr("bind")+'="value:'+aM.field+',visible:isAllDay" '+aI+"/>").attr(aK).appendTo(aL);ap("<span "+r.attr("for")+'="'+aM.field+'" class="k-invalid-msg"/>').hide().appendTo(aL)},ad=function(aK,aL){var aJ={name:aL.field},aM=aL.model.isAllDay,aN=r.attr("validate")+"='"+!aM+"' ",aI=r.attr("validate")+"='"+aM+"' ";ac(aJ,aL);ag(aJ,aL);ap('<input type="text" required '+r.attr("type")+'="date" '+r.attr("role")+'="datetimepicker" '+r.attr("bind")+'="value:'+aL.field+',invisible:isAllDay" '+aN+"/>").attr(aJ).appendTo(aK);ap('<input type="text" required '+r.attr("type")+'="date" '+r.attr("role")+'="datepicker" '+r.attr("bind")+'="value:'+aL.field+',visible:isAllDay" '+aI+"/>").attr(aJ).appendTo(aK);ap("<span "+r.attr("bind")+'="text: '+aL.field+'Timezone"></span>').appendTo(aK);if(aL.field==="end"){ap("<span "+r.attr("bind")+'="text: startTimezone, invisible: endTimezone"></span>').appendTo(aK)}ap("<span "+r.attr("for")+'="'+aL.field+'" class="k-invalid-msg"/>').hide().appendTo(aK)},av=function(aI,aJ){ap("<div "+r.attr("bind")+'="value:'+aJ.field+'" />').attr({name:aJ.field}).appendTo(aI).kendoRecurrenceEditor({start:aJ.model.start,timezone:aJ.timezone,messages:aJ.messages})},d=function(aI,aJ){ap("<div "+r.attr("bind")+'="value:'+aJ.field+'" />').attr({name:aJ.field}).appendTo(aI).kendoMobileRecurrenceEditor({start:aJ.model.start,timezone:aJ.timezone,messages:aJ.messages,pane:aJ.pane,value:aJ.model[aJ.field]})},W=function(aI,aJ){var aK=aF(aJ.model,aJ.messages.noTimezone);ap('<a href="#" class="k-button k-timezone-button" data-bind="invisible:isAllDay">'+aK+"</a>").click(aJ.click).appendTo(aI)},B=function(aI,aJ){ap('<a href="#" class="k-button" data-bind="invisible:isAllDay">'+aJ.messages.timezoneEditorButton+"</a>").click(aJ.click).appendTo(aI)},al=function(aI,aJ){ap("<div "+r.attr("bind")+'="value:'+aJ.field+'" />').attr({name:aJ.field}).toggle(aJ.visible).appendTo(aI).kendoMobileTimezoneEditor({optionLabel:aJ.noTimezone})},ae=function(aI,aJ){var aK=aJ.visible||aJ.visible===x;ap("<div "+r.attr("bind")+'="value:'+aJ.field+'" />').attr({name:aJ.field}).toggle(aK).appendTo(aI).kendoTimezoneEditor({optionLabel:aJ.noTimezone})};function aF(aI,aJ){aJ=aJ||"";if(aI.startTimezone){aJ=aI.startTimezone;if(aI.endTimezone){aJ+=" | "+aI.endTimezone}}return aJ}function ac(aJ,aI){var aK=aI.timezone;if(aK){aJ[r.attr("timezone")]=aK}}function ag(aL,aK){var aJ=aK.model.fields[aK.field].validation;if(aJ){var aI=aJ.dateCompare;if(aI&&C(aI)&&aI.message){aL[r.attr("dateCompare-msg")]=aI.message}}}function K(aJ,aI){return function(aK){aK=aJ(aK);ai(aK,"apply",aI);return aK||[]}}function A(aJ,aI){return function(aK){if(aK){if(ah.call(aK)!=="[object Array]"&&!(aK instanceof r.data.ObservableArray)){aK=[aK]}}ai(aK,"remove",aI,true);aK=aJ(aK);return aK||[]}}function ai(aN,aO,aM,aJ){var aL,aI,aK;aN=aN||[];for(aI=0,aK=aN.length;aI<aK;aI++){aL=aN[aI];if(aJ){if(aL.startTimezone||aL.endTimezone){if(aM){aL.start=r.timezone.convert(aL.start,aL.startTimezone||aL.endTimezone,aM);aL.end=r.timezone.convert(aL.end,aL.endTimezone||aL.startTimezone,aM);aL.start=r.timezone[aO](aL.start,aM);aL.end=r.timezone[aO](aL.end,aM)}else{aL.start=r.timezone[aO](aL.start,aL.startTimezone||aL.endTimezone);aL.end=r.timezone[aO](aL.end,aL.endTimezone||aL.startTimezone)}}else{if(aM){aL.start=r.timezone[aO](aL.start,aM);aL.end=r.timezone[aO](aL.end,aM)}}}else{if(aL.startTimezone||aL.endTimezone){aL.start=r.timezone[aO](aL.start,aL.startTimezone||aL.endTimezone);aL.end=r.timezone[aO](aL.end,aL.endTimezone||aL.startTimezone);if(aM){aL.start=r.timezone.convert(aL.start,aL.startTimezone||aL.endTimezone,aM);aL.end=r.timezone.convert(aL.end,aL.endTimezone||aL.startTimezone,aM)}}else{if(aM){aL.start=r.timezone[aO](aL.start,aM);aL.end=r.timezone[aO](aL.end,aM)}}}if(aJ){delete aL.uid}}return aN}function aH(aM,aJ){var aL=aM.length,aI=0,aK;for(;aI<aL;aI++){aK=aM[aI];if(aK.uid===aJ){return aK}}}var q=r.Class.extend({init:function(aK,aI){var aJ=aK.timezone;this.reader=aI;if(aI.model){this.model=aI.model}this.timezone=aJ;this.data=K(ap.proxy(this.data,this),aJ);this.serialize=A(ap.proxy(this.serialize,this),aJ)},errors:function(aI){return this.reader.errors(aI)},parse:function(aI){return this.reader.parse(aI)},data:function(aI){return this.reader.data(aI)},total:function(aI){return this.reader.total(aI)},groups:function(aI){return this.reader.groups(aI)},aggregates:function(aI){return this.reader.aggregates(aI)},serialize:function(aI){return this.reader.serialize(aI)}});function v(aK,aJ,aI){if(aI){aK=r.timezone.convert(aK,aJ,aI)}else{aK=r.timezone.remove(aK,aJ)}return aK}function w(aS){if(aS.filter("[name=end]").length){var aJ=aS.closest(".k-scheduler-edit-form");var aI=aJ.find("[name=start]:visible");var aR=aJ.find("[name=end]:visible");if(aR[0]&&aI[0]){var aK,aN;var aT=r.widgetInstance(aI,r.ui);var aU=r.widgetInstance(aR,r.ui);var aL=aJ.data("kendoEditable");var aO=aL?aL.options.model:null;if(aT&&aU){aK=aT.value();aN=aU.value()}else{aK=r.parseDate(aI.val());aN=r.parseDate(aR.val())}if(aK&&aN){if(aO){var aQ=aI.attr(r.attr("timezone"));var aP=aO.startTimezone;var aM=aO.endTimezone;aP=aP||aM;aM=aM||aP;if(aP){aK=v(aK,aP,aQ);aN=v(aN,aM,aQ)}}return aK<=aN}}}return true}var H=r.data.Model.define({init:function(aJ){var aI=this;r.data.Model.fn.init.call(aI,aJ);aI._defaultId=aI.defaults[aI.idField]},_time:function(aK){var aI=this[aK];var aJ="_"+aK+"Time";if(this[aJ]){return this[aJ]-r.date.toUtcTime(r.date.getDate(aI))}return V(aI)},_date:function(aJ){var aI="_"+aJ+"Time";if(this[aI]){return this[aI]-this._time(aJ)}return r.date.getDate(this[aJ])},clone:function(aI,aL){var aJ=this.uid,aK=new this.constructor(ap.extend({},this.toJSON(),aI));if(!aL){aK.uid=aJ}return aK},duration:function(){var aI=this.end;var aK=this.start;var aJ=(aI.getTimezoneOffset()-aK.getTimezoneOffset())*r.date.MS_PER_MINUTE;return aI-aK-aJ},expand:function(aK,aJ,aI){return au?au.expand(this,aK,aJ,aI):[this]},update:function(aI){for(var aJ in aI){this.set(aJ,aI[aJ])}if(this._startTime){this.set("_startTime",r.date.toUtcTime(this.start))}if(this._endTime){this.set("_endTime",r.date.toUtcTime(this.end))}},isMultiDay:function(){return this.isAllDay||this.duration()>=r.date.MS_PER_DAY},isException:function(){return !this.isNew()&&this.recurrenceId},isOccurrence:function(){return this.isNew()&&this.recurrenceId},isRecurring:function(){return !!(this.recurrenceRule||this.recurrenceId)},isRecurrenceHead:function(){return !!(this.id&&this.recurrenceRule)},toOccurrence:function(aI){aI=ap.extend(aI,{recurrenceException:null,recurrenceRule:null,recurrenceId:this.id||this.recurrenceId});aI[this.idField]=this.defaults[this.idField];return this.clone(aI,true)},toJSON:function(){var aI=r.data.Model.fn.toJSON.call(this);aI.uid=this.uid;delete aI._startTime;delete aI._endTime;return aI},shouldSerialize:function(aI){return r.data.Model.fn.shouldSerialize.call(this,aI)&&aI!=="_defaultId"},set:function(aL,aM){var aK=this.isAllDay||false;r.data.Model.fn.set.call(this,aL,aM);if(aL=="isAllDay"&&aM!=aK){var aN=r.date.getDate(this.start);var aI=new Date(this.end);var aJ=r.date.getMilliseconds(aI);if(aJ===0&&aM){aJ=D}this.set("start",aN);if(aM===true){r.date.setTime(aI,-aJ);if(aI<aN){aI=aN}}else{r.date.setTime(aI,D-aJ)}this.set("end",aI)}},id:"id",fields:{id:{type:"number"},title:{defaultValue:"",type:"string"},start:{type:"date",validation:{required:true}},startTimezone:{type:"string"},end:{type:"date",validation:{required:true,dateCompare:{value:w}}},endTimezone:{type:"string"},recurrenceRule:{defaultValue:"",type:"string"},recurrenceException:{defaultValue:"",type:"string"},isAllDay:{type:"boolean",defaultValue:false},description:{type:"string"}}});var aB=m.extend({init:function(aI){m.fn.init.call(this,ab(true,{},{schema:{modelBase:H,model:H}},aI));this.reader=new q(this.options.schema,this.reader)},expand:function(aL,aI){var aK=this.view(),aJ={};if(aL&&aI){aI=new Date(aI.getTime()+D-1);aJ={logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:aL},{field:"end",operator:"gte",value:aL},{field:"start",operator:"lte",value:aI}]},{logic:"and",filters:[{field:"start",operator:"lte",value:new Date(aL.getTime()+D-1)},{field:"end",operator:"gte",value:aL}]}]};aK=new r.data.Query(n(aK,aL,aI,this.reader.timezone)).filter(aJ).toArray()}return aK},cancelChanges:function(aI){if(aI&&aI.isOccurrence()){this._removeExceptionDate(aI)}m.fn.cancelChanges.call(this,aI)},insert:function(aJ,aI){if(!aI){return}if(!(aI instanceof H)){var aK=aI;aI=this._createNewModel();aI.accept(aK)}if(!this._pushCreated&&aI.isRecurrenceHead()||aI.recurrenceId){aI=aI.recurrenceId?aI:aI.toOccurrence();this._addExceptionDate(aI)}return m.fn.insert.call(this,aJ,aI)},pushCreate:function(aI){this._pushCreated=true;m.fn.pushCreate.call(this,aI);this._pushCreated=false},remove:function(aI){if(aI.isRecurrenceHead()){this._removeExceptions(aI)}else{if(aI.isRecurring()){this._addExceptionDate(aI)}}return m.fn.remove.call(this,aI)},_removeExceptions:function(aI){var aK=this.data().slice(0),aJ=aK.shift(),aL=aI.id;while(aJ){if(aJ.recurrenceId===aL){m.fn.remove.call(this,aJ)}aJ=aK.shift()}aI.set(aE,"")},_removeExceptionDate:function(aJ){if(aJ.recurrenceId){var aL=this.get(aJ.recurrenceId);if(aL){var aM=aJ.start;var aI=new RegExp("(\\"+h+"?)"+au.toExceptionString(aM,this.reader.timezone));var aK=(aL.recurrenceException||"").replace(Y,h).replace(/\,$/,"");aL.set(aE,aK.replace(aI,""))}}},_addExceptionDate:function(aJ){var aN=aJ.start;var aI=this.reader.timezone;var aL=this.get(aJ.recurrenceId);var aK=(aL.recurrenceException||"").replace(Y,h).replace(/\,$/,"");if(!au.isException(aK,aN,aI)){var aM=au.toExceptionString(aN,aI);aL.set(aE,aK+(aK&&aM?h:"")+aM)}}});function n(aL,aO,aK,aJ){var aM=aL.length,aN=[],aI=0;for(;aI<aM;aI++){aN=aN.concat(aL[aI].expand(aO,aK,aJ))}return aN}aB.create=function(aI){if(b(aI)||aI instanceof r.data.ObservableArray){aI={data:aI}}var aK=aI||{},aJ=aK.data;aK.data=aJ;if(!(aK instanceof aB)&&aK instanceof r.data.DataSource){throw new Error("Incorrect DataSource type. Only SchedulerDataSource instances are supported")}return aK instanceof aB?aK:new aB(aK)};ab(true,r.data,{SchedulerDataSource:aB,SchedulerDataReader:q,SchedulerEvent:H});var M={update:{text:"Save",className:"k-primary k-scheduler-update"},canceledit:{text:"Cancel",className:"k-scheduler-cancel"},destroy:{text:"Delete",imageClass:"k-i-close",className:"k-primary k-scheduler-delete",iconClass:"k-icon"}};function T(aI){delete aI.name;delete aI.prefix;delete aI.remove;delete aI.edit;delete aI.add;delete aI.navigate;return aI}function t(aM,aP){var aI=(aM.fields||aM)[aP];var aL=["url","email","number","date","boolean"];var aJ=aI?aI.validation:{};var aK=r.attr("type");var aR=ap.inArray;var aQ;var aO;var aN={};for(aQ in aJ){aO=aJ[aQ];if(aR(aQ,aL)>=0){aN[aK]=aQ}else{if(!r.isFunction(aO)){aN[aQ]=C(aO)?aO.value||aQ:aO}}aN[r.attr(aQ+"-msg")]=aO.message}return aN}function at(aK,aJ){var aI=t(aJ,aK.field);return function(aL){ap(r.format('<select data-{0}bind="value:{1}">',r.ns,aK.field)).appendTo(aL).attr(aI).kendoDropDownList({dataTextField:aK.dataTextField,dataValueField:aK.dataValueField,dataSource:aK.dataSource,valuePrimitive:aK.valuePrimitive,optionLabel:"None",template:r.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',aK.dataColorField,aK.dataTextField)})}}function P(aJ){var aI=t(aJ.model,aJ.field);return function(aK){ap('<textarea name="description" class="k-textbox"/>').attr(aI).appendTo(aK)}}function e(aK,aJ){var aI=t(aJ,aK.field);return function(aL){ap(r.format('<select data-{0}bind="value:{1}">',r.ns,aK.field)).appendTo(aL).attr(aI).kendoMultiSelect({dataTextField:aK.dataTextField,dataValueField:aK.dataValueField,dataSource:aK.dataSource,valuePrimitive:aK.valuePrimitive,itemTemplate:r.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',aK.dataColorField,aK.dataTextField),tagTemplate:r.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',aK.dataColorField,aK.dataTextField)})}}function z(aK,aJ){var aI=t(aJ,aK.field);return function(aN){var aO="";var aM=aK.dataSource.view();for(var aL=0,aP=aM.length;aL<aP;aL++){aO+=r.format('<option value="{0}">{1}</option>',r.getter(aK.dataValueField)(aM[aL]),r.getter(aK.dataTextField)(aM[aL]))}ap(r.format('<select data-{0}bind="value:{1}" multiple="multiple" data-{0}value-primitive="{3}">{2}</select>',r.ns,aK.field,aO,aK.valuePrimitive)).appendTo(aN).attr(aI)}}function L(aJ,aM){var aK=aJ.end.getTime()-aJ.start.getTime();var aL=new Date(aJ.start.getTime());r.date.setTime(aL,aM);var aI=new Date(aL.getTime());r.date.setTime(aI,aK,true);return{start:aL,end:aI}}var o={mobile:{dateRange:ay,timezonePopUp:W,timezone:al,recurrence:d,description:P,multipleResources:z,resources:at},desktop:{dateRange:ad,timezonePopUp:B,timezone:ae,recurrence:av,description:P,multipleResources:e,resources:at}};var R=r.Observable.extend({init:function(aJ,aI){r.Observable.fn.init.call(this);this.element=aJ;this.options=ab(true,{},this.options,aI);this.createButton=this.options.createButton;this.toggleDateValidationHandler=y(this._toggleDateValidation,this)},_toggleDateValidation:function(aO){if(aO.field=="isAllDay"){var aJ=this.container,aN=this.editable.options.model.isAllDay,aM=r.attr("bind"),aL,aI,aK;aJ.find("["+aM+"*=end],["+aM+"*=start]").each(function(){aL=ap(this);if(aC.test(aL.attr(aM))){aI=aL.is("["+r.attr("role")+"=datetimepicker],[type*=datetime]");aK=aN!==aI;aL.attr(r.attr("validate"),aK)}})}},fields:function(aP,aK){var aN=this;var aJ=aN.options.messages;var aO=aN.options.timezone;var aQ=function(aR){aR.preventDefault();aN._initTimezoneEditor(aK,this)};var aL=[{field:"title",title:aJ.editor.title},{field:"start",title:aJ.editor.start,editor:aP.dateRange,timezone:aO},{field:"end",title:aJ.editor.end,editor:aP.dateRange,timezone:aO},{field:"isAllDay",title:aJ.editor.allDayEvent}];if(r.timezone.windows_zones){aL.push({field:"timezone",title:aJ.editor.timezone,editor:aP.timezonePopUp,click:aQ,messages:aJ.editor,model:aK});aL.push({field:"startTimezone",title:aJ.editor.startTimezone,editor:aP.timezone,noTimezone:aJ.editor.noTimezone});aL.push({field:"endTimezone",title:aJ.editor.endTimezone,editor:aP.timezone,noTimezone:aJ.editor.noTimezone})}if(!aK.recurrenceId){aL.push({field:"recurrenceRule",title:aJ.editor.repeat,editor:aP.recurrence,timezone:aO,messages:aJ.recurrenceEditor,pane:this.pane})}if("description" in aK){aL.push({field:"description",title:aJ.editor.description,editor:aP.description({model:aK,field:"description"})})}for(var aM=0;aM<this.options.resources.length;aM++){var aI=this.options.resources[aM];aL.push({field:aI.field,title:aI.title,editor:aI.multiple?aP.multipleResources(aI,aK):aP.resources(aI,aK)})}return aL},end:function(){return this.editable.end()},_buildEditTemplate:function(aN,aO,aT){var aK=this.options.messages;var aJ=ab({},r.Template,this.options.templateSettings);var aL=aJ.paramName;var aS=this.options.editable.template;var aM="";if(aS){if(typeof aS===ax){aS=window.unescape(aS)}aM+=r.template(aS,aJ)(aN)}else{for(var aR=0,aI=aO.length;aR<aI;aR++){var aQ=aO[aR];if(aQ.field==="startTimezone"){aM+='<div class="k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones" style="display:none">';aM+='<div class="k-edit-form-container">';aM+='<div class="k-edit-label"></div>';aM+='<div class="k-edit-field"><label class="k-check"><input class="k-timezone-toggle" type="checkbox" />'+aK.editor.separateTimezones+"</label></div>"}aM+='<div class="k-edit-label"><label for="'+aQ.field+'">'+(aQ.title||aQ.field||"")+"</label></div>";if(!aN.editable||aN.editable(aQ.field)){aT.push(aQ);aM+="<div "+r.attr("container-for")+'="'+aQ.field+'" class="k-edit-field"></div>'}else{var aP="#:";if(aQ.field){aQ=r.expr(aQ.field,aL);aP+=aQ+"==null?'':"+aQ}else{aP+="''"}aP+="#";aP=r.template(aP,aJ);aM+='<div class="k-edit-field">'+aP(aN)+"</div>"}if(aQ.field==="endTimezone"){aM+=this._createEndTimezoneButton()}}}return aM},_createEndTimezoneButton:function(){return"</div></div>"},_revertTimezones:function(aI){aI.set("startTimezone",this._startTimezone);aI.set("endTimezone",this._endTimezone);delete this._startTimezone;delete this._endTimezone}});var i=R.extend({init:function(){R.fn.init.apply(this,arguments);this.pane=r.mobile.ui.Pane.wrap(this.element);this.pane.element.parent().css("height",this.options.height);this.view=this.pane.view();this._actionSheetButtonTemplate=r.template('<li><a #=attr# class="k-button #=className#" href="\\#">#:text#</a></li>');this._actionSheetPopupOptions=ap(document.documentElement).hasClass("km-root")?{modal:false}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"}},options:{animations:{left:"slide",right:"slide:right"}},destroy:function(){this.close();this.unbind();this.pane.destroy()},_initTimezoneEditor:function(aO){var aQ=this;var aL=aQ.pane;var aM=aQ.options.messages;var aI=aQ.timezoneView;var aK=aQ.container.find(".k-scheduler-timezones");var aP=aK.find(".k-timezone-toggle");var aR=aK.find(".k-edit-label:last").add(aK.find(".k-edit-field:last"));var aJ=function(aT){if(aT.field==="startTimezone"){var aS=aO.startTimezone;aP.prop("disabled",!aS);if(!aS){aR.hide();aO.set("endTimezone","");aP.prop("checked",false)}}};aQ._startTimezone=aO.startTimezone||"";aQ._endTimezone=aO.endTimezone||"";if(!aI){var aN='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+aM.cancel+"</a>"+aM.editor.timezoneTitle+'<a href="#" class="k-button k-scheduler-update">'+aM.save+"</a></div></div>";this.timezoneView=aI=aL.append(aN);aI.contentElement().append(aK.show());aI.element.on(an+aw,".k-scheduler-cancel, .k-scheduler-update",function(aS){aS.preventDefault();aS.stopPropagation();if(ap(this).hasClass("k-scheduler-cancel")){aQ._revertTimezones(aO)}aO.unbind("change",aJ);var aU=aL.element.find("#edit").data("kendoMobileView");var aT=aF(aO,aM.editor.noTimezone);aU.contentElement().find(".k-timezone-button").text(aT);aL.navigate(aU,aQ.options.animations.right)});aP.click(function(){aR.toggle(aP.prop("checked"));aO.set("endTimezone","")});aO.bind("change",aJ)}aP.prop("checked",aO.endTimezone).prop("disabled",!aO.startTimezone);if(aO.endTimezone){aR.show()}else{aR.hide()}aL.navigate(aI,aQ.options.animations.left)},_createActionSheetButton:function(aI){aI.template=this._actionSheetButtonTemplate;return this.createButton(aI)},showDialog:function(aI){var aL="";var aJ='<ul><li class="km-actionsheet-title">'+aI.title+"</li>";var aN=this.element.find(".k-event["+r.attr("uid")+"='"+aI.model.uid+"']");if(this.container){aN=this.container.find(".k-scheduler-delete");if(aN[0]){aL="phone"}}for(var aM=0;aM<aI.buttons.length;aM++){aJ+=this._createActionSheetButton(aI.buttons[aM])}aJ+="</ul>";var aK=ap(aJ).appendTo(this.pane.view().element).kendoMobileActionSheet({type:aL,cancel:this.options.messages.cancel,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy()},command:function(aP){var aO=aK.element.find("li:not(.km-actionsheet-cancel) > .k-button").index(ap(aP.currentTarget));if(aO>-1){aK.close();aI.buttons[aO].click()}},popup:this._actionSheetPopupOptions}).data("kendoMobileActionSheet");aK.open(aN)},editEvent:function(aO){var aK=this.pane;var aN="";var aM=this.options.messages;var aJ=aM.save;var aS=aM.destroy;var aL=aM.cancel;var aU=aM.editor.editorTitle;aN+='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list" id="edit" '+r.attr("uid")+'="'+aO.uid+'"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+aL+"</a>"+aU+'<a href="#" class="k-button k-scheduler-update">'+aJ+"</a></div>";var aP=this.fields(o.mobile,aO);var aQ=this;var aT=[];aN+=this._buildEditTemplate(aO,aP,aT);if(!aO.isNew()&&this.options.editable&&this.options.editable.destroy!==false){aN+='<div class="k-edit-buttons"><a href="#" class="k-scheduler-delete k-button">'+aS+"</a></div>"}aN+="</div>";var aR=aK.append(aN);var aI=this.container=aR.element;this.editable=aI.kendoEditable({fields:aT,model:aO,clearContainer:false,target:aQ.options.target,validateOnBlur:true}).data("kendoEditable");aI.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){ap(this).next().children("input").click()});if(!this.trigger("edit",{container:aI,model:aO})){aI.on(an+aw,"a.k-scheduler-edit, a.k-scheduler-cancel, a.k-scheduler-update, a.k-scheduler-delete",function(aX){aX.preventDefault();aX.stopPropagation();var aW=ap(this);if(!aW.hasClass("k-scheduler-edit")){var aV="cancel";if(aW.hasClass("k-scheduler-update")){aV="save"}else{if(aW.hasClass("k-scheduler-delete")){aV="remove"}}aQ.trigger(aV,{container:aI,model:aO})}else{aK.navigate("#edit",aQ.options.animations.right)}});aK.navigate(aR,aQ.options.animations.left);aO.bind("change",aQ.toggleDateValidationHandler)}else{this.trigger("cancel",{container:aI,model:aO})}return this.editable},_views:function(){return this.pane.element.find(r.roleSelector("view")).not(this.view.element)},close:function(){if(this.container){this.pane.navigate("",this.options.animations.right);var aK=this._views();var aJ;for(var aI=0,aL=aK.length;aI<aL;aI++){aJ=aK.eq(aI).data("kendoMobileView");if(aJ){aJ.purge()}}aK.remove();this.container=null;if(this.editable){this.editable.options.model.unbind("change",this.toggleDateValidationHandler);this.editable.destroy();this.editable=null}this.timezoneView=null}}});var ar=R.extend({destroy:function(){this.close();this.unbind()},editEvent:function(aP){var aR=this;var aL=aR.options.editable;var aO="<div "+r.attr("uid")+'="'+aP.uid+'" class="k-popup-edit-form k-scheduler-edit-form"><div class="k-edit-form-container">';var aN=aR.options.messages;var aK=aN.save;var aM=aN.cancel;var aJ=aN.destroy;var aQ=this.fields(o.desktop,aP);var aT=[];aO+=this._buildEditTemplate(aP,aQ,aT);var aS;var aU=C(aL)?aL.window:{};aO+='<div class="k-edit-buttons k-state-default">';aO+=this.createButton({name:"update",text:aK,attr:aS})+this.createButton({name:"canceledit",text:aM,attr:aS});if(!aP.isNew()&&aL.destroy!==false){aO+=this.createButton({name:"delete",text:aJ,attr:aS})}aO+="</div></div></div>";var aI=this.container=ap(aO).appendTo(aR.element).eq(0).kendoWindow(ab({modal:true,resizable:false,draggable:true,title:aN.editor.editorTitle,visible:false,close:function(aV){if(aV.userTriggered){if(aR.trigger(Z,{container:aI,model:aP})){aV.preventDefault()}}}},aU));aR.editable=aI.kendoEditable({fields:aT,model:aP,clearContainer:false,validateOnBlur:true,target:aR.options.target}).data("kendoEditable");if(!aR.trigger(F,{container:aI,model:aP})){aI.data("kendoWindow").center().open();aI.on(an+aw,"a.k-scheduler-cancel",function(aV){aV.preventDefault();aV.stopPropagation();aR.trigger(Z,{container:aI,model:aP})});aI.on(an+aw,"a.k-scheduler-update",function(aV){aV.preventDefault();aV.stopPropagation();aR.trigger("save",{container:aI,model:aP})});aI.on(an+aw,"a.k-scheduler-delete",function(aV){aV.preventDefault();aV.stopPropagation();aR.trigger(aD,{container:aI,model:aP})});r.cycleForm(aI);aP.bind("change",aR.toggleDateValidationHandler)}else{aR.trigger(Z,{container:aI,model:aP})}return aR.editable},close:function(){var aJ=this;var aI=function(){if(aJ.editable){aJ.editable.options.model.unbind("change",aJ.toggleDateValidationHandler);aJ.editable.destroy();aJ.editable=null;aJ.container=null}if(aJ.popup){aJ.popup.destroy();aJ.popup=null}};if(aJ.editable){if(aJ._timezonePopup&&aJ._timezonePopup.data("kendoWindow")){aJ._timezonePopup.data("kendoWindow").destroy();aJ._timezonePopup=null}if(aJ.container.is(":visible")){aJ.container.data("kendoWindow").bind("deactivate",aI).close()}else{aI()}}else{aI()}},_createEndTimezoneButton:function(){var aJ=this.options.messages;var aI="";aI+='<div class="k-edit-buttons k-state-default">';aI+=this.createButton({name:"savetimezone",text:aJ.save})+this.createButton({name:"canceltimezone",text:aJ.cancel});aI+="</div></div></div>";return aI},showDialog:function(aJ){var aK=r.format("<div class='k-popup-edit-form'><div class='k-edit-form-container'><p class='k-popup-message'>{0}</p>",aJ.text);aK+='<div class="k-edit-buttons k-state-default">';for(var aL=0;aL<aJ.buttons.length;aL++){aK+=this.createButton(aJ.buttons[aL])}aK+="</div></div></div>";var aM=this.element;if(this.popup){this.popup.destroy()}var aI=this.popup=ap(aK).appendTo(aM).eq(0).on("click",".k-button",function(aO){aO.preventDefault();aI.close();var aN=ap(aO.currentTarget).index();aJ.buttons[aN].click()}).kendoWindow({modal:true,resizable:false,draggable:false,title:aJ.title,visible:false,close:function(){this.destroy();aM.focus()}}).getKendoWindow();aI.center().open()},_initTimezoneEditor:function(aN,aP){var aQ=this;var aJ=aQ.container.find(".k-scheduler-timezones");var aO=aJ.find(".k-timezone-toggle");var aR=aJ.find(".k-edit-label:last").add(aJ.find(".k-edit-field:last"));var aM=aJ.find(".k-scheduler-savetimezone");var aK=aJ.find(".k-scheduler-canceltimezone");var aS=aQ._timezonePopup;var aI=function(aU){if(aU.field==="startTimezone"){var aT=aN.startTimezone;aO.prop("disabled",!aT);if(!aT){aR.hide();aN.set("endTimezone","");aO.prop("checked",false)}}};var aL;aQ._startTimezone=aN.startTimezone;aQ._endTimezone=aN.endTimezone;if(!aS){aQ._timezonePopup=aS=aJ.kendoWindow({modal:true,resizable:false,draggable:true,title:aQ.options.messages.editor.timezoneEditorTitle,visible:false,close:function(aT){aN.unbind("change",aI);if(aT.userTriggered){aQ._revertTimezones(aN)}if(aP){aP.focus()}}});aO.click(function(){aR.toggle(aO.prop("checked"));aN.set("endTimezone","")});aM.click(function(aT){aT.preventDefault();aL.close()});aK.click(function(aT){aT.preventDefault();aQ._revertTimezones(aN);aL.close()});aN.bind("change",aI)}aO.prop("checked",aN.endTimezone).prop("disabled",!aN.startTimezone);if(aN.endTimezone){aR.show()}else{aR.hide()}aL=aS.data("kendoWindow");aL.center().open()}});var l=c.extend({init:function(aJ,aI){var aK=this;j.fn.init.call(aK,aJ,aI);if(!aK.options.views||!aK.options.views.length){aK.options.views=["day","week"]}aK.resources=[];aK._initModel();aK._wrapper();aK._views();aK._toolbar();aK._dataSource();aK._resources();aK._resizeHandler=function(){aK.resize()};aK.wrapper.on("mousedown"+aw+" selectstart"+aw,function(aL){if(!ap(aL.target).is(":kendoFocusable")){aL.preventDefault()}});if(aK.options.editable&&aK.options.editable.resize!==false){aK._resizable()}aK._movable();aK._bindResize();if(aK.options.messages&&aK.options.messages.recurrence){au.options=aK.options.messages.recurrence}aK._selectable();aK._ariaId=r.guid();aK._createEditor()},_bindResize:function(){ap(window).on("resize"+aw,this._resizeHandler)},_unbindResize:function(){ap(window).off("resize"+aw,this._resizeHandler)},dataItems:function(){var aO=this;var aP=aO.items();var aS=aO._data;var aN=ap.map(aP,function(aT){return ap(aT).attr("data-uid")});var aL;var aR;var aJ={};var aK=aN.length;for(aL=0;aL<aK;aL++){aJ[aN[aL]]=null}var aM=aS.length;for(aL=0;aL<aM;aL++){var aI=aS[aL];if(aJ[aI.uid]!==x){aJ[aI.uid]=aI}}var aQ=[];for(aR in aJ){aQ.push(aJ[aR])}return aQ},_isMobile:function(){var aI=this.options;return aI.mobile===true&&r.support.mobileOS||aI.mobile==="phone"||aI.mobile==="tablet"},_isMobilePhoneView:function(){var aI=this.options;return aI.mobile===true&&r.support.mobileOS&&!r.support.mobileOS.tablet||aI.mobile==="phone"},_groupsByResource:function(aK,aT,aL,aJ,aQ){if(!aL){aL=[]}var aN=aK[0];if(aN){var aS;var aO=aN.dataSource.view();var aM=0;for(var aR=0;aR<aO.length;aR++){var aI=r.getter(aN.dataValueField)(aO[aR]);var aP=aT+aM+aR;aS=this._groupsByResource(aK.slice(1),aP,aL,aI,aN.field);aS[aN.field]=aI;aM=aS.groupIndex;if(aQ&&aJ){aS[aQ]=aJ}if(aK.length===1){aS.groupIndex=aT+aR;aL.push(aS)}}return aS}else{return{}}},data:function(){return this._data},select:function(aW){var aO=this;var aQ=aO.view();var aR=aO._selection;var aN=aQ.groups;var aK;if(aW===x){var aS;var aP=aQ._selectedSlots;if(!aR){return[]}if(aR&&aR.events){aS=aO._selectedEvents()}return{start:aR.start,end:aR.end,events:aS,slots:aP,resources:aQ._resourceBySlot(aR)}}if(!aW){aO._selection=null;aO._old=null;aQ.clearSelection();return}if(ap.isArray(aW)){aW={events:aW.splice(0)}}if(aW.resources){var aV;var aM=[];var aL=[];if(aQ.groupedResources){aO._groupsByResource(aQ.groupedResources,0,aL)}for(aV in aW.resources){aM.push({field:aV,operator:"eq",value:aW.resources[aV]})}aK=new r.data.Query(aL).filter(aM).toArray()}if(aW.events&&aW.events.length){aO._selectEvents(aW.events,aK);aO._select();return}if(aN&&(aW.start&&aW.end)){var aU=az(aQ._startDate);var aJ=r.date.addDays(az(aQ._endDate),1);var aT;var aI;if(aW.start<aJ&&aU<=aW.end){if(aK&&aK.length){aT=aN[aK[0].groupIndex]}else{aT=aN[0]}aI=aT.ranges(aW.start,aW.end,aW.isAllDay,false);if(aI.length){aO._selection={start:r.timezone.toLocalDate(aI[0].start.start),end:r.timezone.toLocalDate(aI[aI.length-1].end.end),groupIndex:aI[0].start.groupIndex,index:aI[0].start.index,isAllDay:aI[0].start.isDaySlot,events:[]};aO._select()}}}},_selectEvents:function(aO,aJ){var aP=this;var aS;var aR=aP.view();var aM=aR.groups;var aQ=aO.length;var aT=aJ&&aJ.length;for(aS=0;aS<aQ;aS++){if(aM&&aT){var aU=aM[aJ[0].groupIndex];var aV=[];var aL=aU.timeSlotCollectionCount();var aK=aU.daySlotCollectionCount();for(var aI=0;aI<aL;aI++){aV=aV.concat(aU.getTimeSlotCollection(aI).events())}for(var aW=0;aW<aK;aW++){aV=aV.concat(aU.getDaySlotCollection(aW).events())}aV=new r.data.Query(aV).filter({field:"element[0].getAttribute('data-uid')",operator:"eq",value:aO[aS]}).toArray();if(aV[0]){aP._createSelection(aV[0].element)}}else{var aN=aR.element.find(r.format(".k-event[data-uid={0}], .k-task[data-uid={0}]",aO[aS]));if(aN.length){aP._createSelection(aN[0])}}}},_selectable:function(){var aK=this,aL=aK.wrapper,aJ=r.support.mobileOS?"touchend":"mousedown";if(!aK.options.selectable){return}aK._tabindex();aL.on(aJ+aw,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",function(aP){var aQ=aP.which;var aN=aP.button;var aM=r.support.browser;var aO=aQ&&aQ===3||aN&&aN==2;if(r.support.mobileOS&&aP.isDefaultPrevented()){return}if(!aO){aK._createSelection(aP.currentTarget)}aL.focus();if(aM.msie&&aM.version<9){setTimeout(function(){aL.focus()})}});var aI=ap.proxy(aK._mouseMove,aK);aL.on("mousedown"+aw,".k-scheduler-header-all-day td, .k-scheduler-content td",function(aO){var aP=aO.which;var aM=aO.button;var aN=aP&&aP===3||aM&&aM==2;if(!aN){aL.on("mousemove"+aw,".k-scheduler-header-all-day td, .k-scheduler-content td",aI)}});aL.on("mouseup"+aw+" mouseleave"+aw,function(){aL.off("mousemove"+aw,".k-scheduler-header-all-day td, .k-scheduler-content td",aI)});aL.on("focus"+aw,function(){if(!aK._selection){aK._selectFirstSlot()}aK._select()});aL.on("focusout"+aw,function(){aK._ctrlKey=aK._shiftKey=false});aL.on("keydown"+aw,y(aK._keydown,aK));aL.on("keyup"+aw,function(aM){aK._ctrlKey=aM.ctrlKey;aK._shiftKey=aM.shiftKey})},_selectFirstSlot:function(){this._createSelection(this.wrapper.find(".k-scheduler-content").find("td:first"))},_select:function(){var aM=this;var aP=aM.view();var aI=aM.wrapper;var aO=aP.current();var aQ=aM._selection;if(!aQ){return}if(aO){aO.removeAttribute("id");aO.removeAttribute("aria-label");aI.removeAttr("aria-activedescendant")}aP.select(aQ);aO=aP.current();if(aO&&aM._old!==aO){var aK=ap(aO).data("uid");if(aM._old&&aK&&aK===ap(aM._old).data("uid")){return}var aJ;var aL=aQ;var aR=aM._selectedEvents();var aN=aP._selectedSlots;if(aR[0]){aL=aR[0]||aQ;aJ=r.format(aM.options.messages.ariaEventLabel,aL.title,aL.start,aL.start)}else{aJ=r.format(aM.options.messages.ariaSlotLabel,aL.start,aL.end)}aO.setAttribute("id",aM._ariaId);aO.setAttribute("aria-label",aJ);aI.attr("aria-activedescendant",aM._ariaId);aM._old=aO;aM.trigger("change",{start:aQ.start,end:aQ.end,events:aR,slots:aN,resources:aP._resourceBySlot(aQ)})}},_selectedEvents:function(){var aM=this._selection.events;var aL=aM.length;var aI=0;var aK;var aJ=[];for(;aI<aL;aI++){aK=this.occurrenceByUid(aM[aI]);if(aK){aJ.push(aK)}}return aJ},_mouseMove:function(aJ){var aI=this;clearTimeout(aI._moveTimer);aI._moveTimer=setTimeout(function(){var aL=aI.view();var aM=aI._selection;if(aM){var aO=aL.selectionByElement(ap(aJ.currentTarget));if(aO&&aM.groupIndex===aO.groupIndex){var aK=aO.startDate();var aN=aO.endDate();if(aK>=aM.end){aM.backward=false}else{if(aN<=aM.start){aM.backward=true}}if(aM.backward){aM.start=aK}else{aM.end=aN}aI._select()}}},5)},_viewByIndex:function(aK){var aJ,aI=this.views;for(aJ in aI){if(!aK){return aJ}aK--}},_keydown:function(aO){var aN=this,aL=aO.keyCode,aI=aN.view(),aK=aI.options.editable,aM=aN._selection,aJ=aO.shiftKey;aN._ctrlKey=aO.ctrlKey;aN._shiftKey=aO.shiftKey;if(!aM){aN._selectFirstSlot();aN._select();return}if(aL===G.TAB){if(aI.moveToEvent(aM,aJ)){aN._select();aO.preventDefault()}}else{if(aK&&aL===G.ENTER){if(aM.events.length){if(aK.update!==false){aN.editEvent(aM.events[0])}}else{if(aK.create!==false){if(aM.isAllDay){aM=ap.extend({},aM,{end:r.date.addDays(aM.end,-1)})}aN.addEvent(ab({},aM,aI._resourceBySlot(aM)))}}}else{if(aL===G.DELETE&&aK!==false&&aK.destroy!==false){aN.removeEvent(aM.events[0])}else{if(aL>=49&&aL<=57){aN.view(aN._viewByIndex(aL-49))}else{if(aI.move(aM,aL,aJ)){if(aI.inRange(aM)){aN._select()}else{aN.date(aM.start)}aO.preventDefault()}}}}}aN._adjustSelectedDate()},_createSelection:function(aK){var aI,aL,aJ;if(!this._selection||!this._ctrlKey&&!this._shiftKey){this._selection={events:[],groupIndex:0}}aK=ap(aK);aJ=this._selection;if(aK.is(".k-event")){aI=aK.attr(r.attr("uid"))}aL=this.view().selectionByElement(aK);if(aL){aJ.groupIndex=aL.groupIndex||0}if(aI){aL=aH(this._data,aI)}if(aL&&aL.uid){aI=[aL.uid]}this._updateSelection(aL,aI);this._adjustSelectedDate()},_updateSelection:function(aJ,aK,aM){var aL=this._selection;if(aJ&&aL){var aI=this.view();if(aJ.uid){aJ=aI._updateEventForSelection(aJ)}if(this._shiftKey&&aL.start&&aL.end){var aN=aJ.end<aL.end;aL.end=aJ.endDate?aJ.endDate():aJ.end;if(aN&&aI._timeSlotInterval){r.date.setTime(aL.end,-aI._timeSlotInterval())}}else{aL.start=aJ.startDate?aJ.startDate():aJ.start;aL.end=aJ.endDate?aJ.endDate():aJ.end}if("isDaySlot" in aJ){aL.isAllDay=aJ.isDaySlot}else{aL.isAllDay=aJ.isAllDay}if(aM!==null&&aM!==x){aL.groupIndex=aM}aL.index=aJ.index;if(this._ctrlKey){aL.events=aL.events.concat(aK||[])}else{aL.events=aK||[]}}},options:{name:"Scheduler",date:f,editable:true,autoBind:true,snap:true,mobile:false,timezone:"",allDaySlot:true,min:new Date(1900,0,1),max:new Date(2099,11,31),toolbar:null,footer:{},messages:{today:"Today",pdf:"Export to PDF",save:"Save",cancel:"Cancel",destroy:"Delete",deleteWindowTitle:"Delete event",ariaSlotLabel:"Selected from {0:t} to {1:t}",ariaEventLabel:"{0} on {1:D} at {2:t}",views:{day:"Day",week:"Week",workWeek:"Work Week",agenda:"Agenda",month:"Month",timeline:"Timeline",timelineWeek:"Timeline Week",timelineWorkWeek:"Timeline Work Week",timelineMonth:"Timeline Month"},recurrenceMessages:{deleteWindowTitle:"Delete Recurring Item",deleteWindowOccurrence:"Delete current occurrence",deleteWindowSeries:"Delete the series",editWindowTitle:"Edit Recurring Item",editWindowOccurrence:"Edit current occurrence",editWindowSeries:"Edit the series"},editable:{confirmation:k},editor:{title:"Title",start:"Start",end:"End",allDayEvent:"All day event",description:"Description",repeat:"Repeat",timezone:" ",startTimezone:"Start timezone",endTimezone:"End timezone",separateTimezones:"Use separate start and end time zones",timezoneEditorTitle:"Timezones",timezoneEditorButton:"Time zone",timezoneTitle:"Time zones",noTimezone:"No timezone",editorTitle:"Event"}},height:null,width:null,resources:[],group:{resources:[],orientation:"horizontal"},views:[],selectable:false},events:[aD,F,Z,ao,"add","dataBinding","dataBound","moveStart","move","moveEnd","resizeStart","resize","resizeEnd","navigate","change"],destroy:function(){var aJ=this,aI;j.fn.destroy.call(aJ);if(aJ.dataSource){aJ.dataSource.unbind(E,aJ._refreshHandler);aJ.dataSource.unbind("progress",aJ._progressHandler);aJ.dataSource.unbind("error",aJ._errorHandler)}if(aJ.calendar){aJ.calendar.destroy();aJ.popup.destroy()}if(aJ.view()){aJ.view().destroy()}if(aJ._editor){aJ._editor.destroy()}if(this._moveDraggable){this._moveDraggable.destroy()}if(this._resizeDraggable){this._resizeDraggable.destroy()}aI=aJ.element.add(aJ.wrapper).add(aJ.toolbar).add(aJ.popup);aI.off(aw);clearTimeout(aJ._moveTimer);aJ._model=null;aJ.toolbar=null;aJ.element=null;ap(window).off("resize"+aw,aJ._resizeHandler);r.destroy(aJ.wrapper)},setDataSource:function(aI){this.options.dataSource=aI;this._dataSource();if(this.options.autoBind){aI.fetch()}},items:function(){var aJ=this.wrapper.find(".k-scheduler-content");var aI=this.view();if(aI&&aI.options.name==="agenda"){return aJ.find(".k-task")}else{return aJ.find(".k-event").add(this.wrapper.find(".k-scheduler-header-wrap").find(".k-scheduler-header-all-day").siblings())}},_movable:function(){var aR;var aL;var aN;var aO;var aK;var aM;var aP=this;var aS;var aJ=0;var aQ=aP._isMobile();var aT=aP.options.editable&&aP.options.editable.move!==false;var aI=aP.options.editable&&aP.options.editable.resize!==false;if(aT||aI&&aQ){if(aQ&&r.support.mobileOS.android){aJ=5}aP._moveDraggable=new r.ui.Draggable(aP.element,{distance:aJ,filter:".k-event",ignore:".k-resize-handle",holdToDrag:aQ,autoScroll:true});if(aT){aP._moveDraggable.bind("dragstart",function(aW){var aU=aP.view();var aV=aW.currentTarget;if(!aU.options.editable||aU.options.editable.move===false){aW.preventDefault();return}if(aQ&&!aV.hasClass("k-event-active")){aP.element.find(".k-event-active").removeClass("k-event-active");aW.preventDefault();return}aK=aP.occurrenceByUid(aV.attr(r.attr("uid")));aM=aK.clone();aM.update(aU._eventOptionsForMove(aM));aR=aU._slotByPosition(aW.x.startLocation,aW.y.startLocation);aN=aR.startOffset(aW.x.startLocation,aW.y.startLocation,aP.options.snap);aL=aR;aS=aR;if(!aR||aP.trigger("moveStart",{event:aK})){aW.preventDefault()}}).bind("drag",function(aW){var aU=aP.view();var aY=aU._slotByPosition(aW.x.location,aW.y.location);var aX;var aV;if(!aY){return}aO=aY.startOffset(aW.x.location,aW.y.location,aP.options.snap);if(aY.isDaySlot!==aR.isDaySlot){aR=aU._slotByPosition(aW.x.location,aW.y.location);aN=aR.startOffset(aW.x.location,aW.y.location,aP.options.snap);aX=aO-aN;aM.isAllDay=aY.isDaySlot;aM.start=r.timezone.toLocalDate(aN);aM.end=r.timezone.toLocalDate(aO);aU._updateMoveHint(aM,aY.groupIndex,aX);aV={start:aM.start,end:aM.end}}else{aX=aO-aN;aU._updateMoveHint(aM,aY.groupIndex,aX);aV=L(aM,aX)}if(!aP.trigger("move",{event:aK,slot:{element:aY.element,start:aY.startDate(),end:aY.endDate(),isDaySlot:aY.isDaySlot},resources:aU._resourceBySlot(aY),start:aV.start,end:aV.end})){aL=aY}else{aU._updateMoveHint(aM,aY.groupIndex,aX)}}).bind("dragend",function(a1){aP.view()._removeMoveHint();var aU=aO-aN;var a0=L(aM,aU);var aV=a0.start;var aZ=a0.end;var a3=aP.view()._resourceBySlot(aL);var aW=aP.view()._resourceBySlot(aR);var aX=aP.trigger("moveEnd",{event:aK,slot:{element:aL.element,start:aL.startDate(),end:aL.endDate()},start:aV,end:aZ,resources:a3});if(!aX&&(aK.start.getTime()!==aV.getTime()||aK.end.getTime()!==aZ.getTime()||aS.isDaySlot!==aL.isDaySlot||r.stringify(a3)!==r.stringify(aW))){var a2=aP.view()._eventOptionsForMove(aK);var aY;if(aS.isDaySlot!==aL.isDaySlot){if(aL.isDaySlot){aY=ap.extend({start:aL.startDate(),end:aL.startDate(),isAllDay:aL.isDaySlot},a2,a3)}else{aY=ap.extend({isAllDay:aL.isDaySlot,start:aV,end:aZ},a2,a3)}}else{aY=ap.extend({isAllDay:aK.isAllDay,start:aV,end:aZ},a2,a3)}aP._updateEvent(null,aK,aY,aL.groupIndex)}a1.currentTarget.removeClass("k-event-active");this.cancelHold()}).bind("dragcancel",function(){aP.view()._removeMoveHint();this.cancelHold()})}if(aQ){aP._moveDraggable.bind("hold",function(aU){if(aP.element.find(".k-scheduler-monthview").length){aU.preventDefault()}aP.element.find(".k-event-active").removeClass("k-event-active");aU.currentTarget.addClass("k-event-active")});if(!r.support.mobileOS.android){aP._moveDraggable.userEvents.bind("press",function(aU){aU.preventDefault()})}}}},_resizable:function(){var aK;var aI;var aM;var aJ;var aP;var aL=this;var aO=0;function aN(aR){var aS={"k-resize-e":"east","k-resize-w":"west","k-resize-n":"north","k-resize-s":"south"};for(var aQ in aS){if(aR.hasClass(aQ)){return aS[aQ]}}}if(aL._isMobile()&&r.support.mobileOS.android){aO=5}aL._resizeDraggable=new r.ui.Draggable(aL.element,{distance:aO,filter:".k-resize-handle",autoScroll:true,dragstart:function(aU){var aQ=ap(aU.currentTarget);var aS=aQ.closest(".k-event");var aT=aS.attr(r.attr("uid"));var aR=aL.view();aM=aL.occurrenceByUid(aT);aJ=aM.clone();aR._updateEventForResize(aJ);aP=aR._slotByPosition(aU.x.startLocation,aU.y.startLocation);if(aL.trigger("resizeStart",{event:aM})){aU.preventDefault()}aK=r.date.toUtcTime(aJ.start);aI=r.date.toUtcTime(aJ.end)},drag:function(aW){if(!aP){return}var aQ=ap(aW.currentTarget);var aT=aN(aQ);var aR=aL.view();var aV=aR._slotByPosition(aW.x.location,aW.y.location);if(!aV||aP.groupIndex!=aV.groupIndex){return}aP=aV;var aU=aK;var aS=aI;if(aT=="south"){if(!aP.isDaySlot&&aP.end-r.date.toUtcTime(aJ.start)>=aR._timeSlotInterval()){if(aJ.isAllDay){aI=aP.startOffset(aW.x.location,aW.y.location,aL.options.snap)}else{aI=aP.endOffset(aW.x.location,aW.y.location,aL.options.snap)}}}else{if(aT=="north"){if(!aP.isDaySlot&&r.date.toUtcTime(aJ.end)-aP.start>=aR._timeSlotInterval()){aK=aP.startOffset(aW.x.location,aW.y.location,aL.options.snap)}}else{if(aT=="east"){if(aP.isDaySlot&&r.date.toUtcTime(r.date.getDate(aP.endDate()))>=r.date.toUtcTime(r.date.getDate(aJ.start))){if(aJ.isAllDay){aI=aP.startOffset(aW.x.location,aW.y.location,aL.options.snap)}else{aI=aP.endOffset(aW.x.location,aW.y.location,aL.options.snap)}}else{if(!aP.isDaySlot&&aP.end-r.date.toUtcTime(aJ.start)>=aR._timeSlotInterval()){aI=aP.endOffset(aW.x.location,aW.y.location,aL.options.snap)}}}else{if(aT=="west"){if(aP.isDaySlot&&r.date.toUtcTime(r.date.getDate(aJ.end))>=r.date.toUtcTime(r.date.getDate(aP.startDate()))){aK=aP.startOffset(aW.x.location,aW.y.location,aL.options.snap)}else{if(!aP.isDaySlot&&r.date.toUtcTime(aJ.end)-aP.start>=aR._timeSlotInterval()){aK=aP.startOffset(aW.x.location,aW.y.location,aL.options.snap)}}}}}}if(!aL.trigger("resize",{event:aM,slot:{element:aP.element,start:aP.startDate(),end:aP.endDate()},start:r.timezone.toLocalDate(aK),end:r.timezone.toLocalDate(aI),resources:aR._resourceBySlot(aP)})){aR._updateResizeHint(aJ,aP.groupIndex,aK,aI)}else{aK=aU;aI=aS}},dragend:function(aU){var aQ=ap(aU.currentTarget);var aV=new Date(aJ.start.getTime());var aR=new Date(aJ.end.getTime());var aS=aN(aQ);aL.view()._removeResizeHint();if(aS=="south"){aR=r.timezone.toLocalDate(aI)}else{if(aS=="north"){aV=r.timezone.toLocalDate(aK)}else{if(aS=="east"){if(aP.isDaySlot){aR=r.date.getDate(r.timezone.toLocalDate(aI))}else{aR=r.timezone.toLocalDate(aI)}}else{if(aS=="west"){if(aP.isDaySlot){aV=new Date(r.timezone.toLocalDate(aK));aV.setHours(0);aV.setMinutes(0)}else{aV=r.timezone.toLocalDate(aK)}}}}}var aT=aL.trigger("resizeEnd",{event:aM,slot:{element:aP.element,start:aP.startDate(),end:aP.endDate()},start:aV,end:aR,resources:aL.view()._resourceBySlot(aP)});if(!aT&&aR.getTime()>=aV.getTime()){if(aJ.start.getTime()!=aV.getTime()||aJ.end.getTime()!=aR.getTime()){aL.view()._updateEventForResize(aM);aL._updateEvent(aS,aM,{start:aV,end:aR})}}aP=null;aM=null},dragcancel:function(){aL.view()._removeResizeHint();aP=null;aM=null}})},_updateEvent:function(aL,aI,aN,aO){var aM=this;var aR=function(aS,aT){try{aM._preventRefresh=true;aS.update(aN);aM._convertDates(aS)}finally{aM._preventRefresh=false}if(!aM.trigger(ao,{event:aS})){if(aT){aT()}aM._updateSelection(aS,[aS.uid],aO);aM.dataSource.sync()}};var aK=function(aS){if(aS.recurrenceRule){return aM.dataSource.getByUid(aS.uid)}else{return aM.dataSource.get(aS.recurrenceId)}};var aP=function(){var aT=aK(aI);if(aL=="south"||aL=="north"){if(aN.start){var aU=r.date.getDate(aT.start);r.date.setTime(aU,V(aN.start));aN.start=aU}if(aN.end){var aS=r.date.getDate(aT.end);r.date.setTime(aS,V(aN.end));aN.end=aS}}aM.dataSource._removeExceptions(aT);aR(aT)};var aJ=function(){var aT=aK(aI);var aU=function(){aM._convertDates(aT)};var aS=aT.toOccurrence({start:aI.start,end:aI.end});aR(aM.dataSource.add(aS),aU)};if(aI.recurrenceRule||aI.isOccurrence()){var aQ=aM.options.messages.recurrenceMessages;aM._showRecurringDialog(aI,aJ,aP,{title:aQ.editWindowTitle,text:aQ.editRecurring?aQ.editRecurring:I,occurrenceText:aQ.editWindowOccurrence,seriesText:aQ.editWindowSeries})}else{aR(aM.dataSource.getByUid(aI.uid))}},_modelForContainer:function(aI){aI=ap(aI).closest("["+r.attr("uid")+"]");return this.dataSource.getByUid(aI.attr(r.attr("uid")))},showDialog:function(aI){this._editor.showDialog(aI)},focus:function(){this.wrapper.focus()},_confirmation:function(aP,aJ){var aK=this.options.editable;if(aK===true||aK.confirmation!==false){var aM=this.options.messages;var aO=aM.deleteWindowTitle;var aN=typeof aK.confirmation===ax?aK.confirmation:aM.editable.confirmation;if(this._isEditorOpened()&&aJ.isRecurring()){var aI=this.options.messages.recurrenceMessages;aO=aI.deleteWindowTitle;if(aJ.isException()){aN=aI.deleteRecurringConfirmation?aI.deleteRecurringConfirmation:aG}else{aN=aI.deleteSeriesConfirmation?aI.deleteSeriesConfirmation:af}}var aL=[{name:"destroy",text:aM.destroy,click:function(){aP()}}];if(!(this._isMobile()&&r.mobile.ui.Pane)){aL.push({name:"canceledit",text:aM.cancel,click:function(){aP(true)}})}this._unbindResize();this.showDialog({model:aJ,text:aN,title:aO,buttons:aL});this._bindResize()}else{aP()}},addEvent:function(aL){var aI=this._editor.editable;var aM=this.dataSource;var aJ;aL=aL||{};var aK=this.trigger("add",{event:aL});if(!aK&&(aI&&aI.end()||!aI)){this.cancelEvent();if(aL&&aL.toJSON){aL=aL.toJSON()}aJ=aM.add(aL);if(aJ){this.cancelEvent();this._editEvent(aJ)}}},saveEvent:function(){var aL=this._editor;if(!aL){return}var aK=aL.editable;var aI=aL.container;var aJ=this._modelForContainer(aI);if(aI&&aK&&aK.end()&&!this.trigger(ao,{container:aI,event:aJ})){if(aJ.isRecurrenceHead()){this.dataSource._removeExceptions(aJ)}if(!aJ.dirty&&!aJ.isOccurrence()){this._convertDates(aJ,"remove")}this.dataSource.sync()}},cancelEvent:function(){var aK=this._editor;var aI=aK.container;var aJ;if(aI){aJ=this._modelForContainer(aI);if(aJ&&aJ.isOccurrence()){this._convertDates(aJ,"remove");this._convertDates(this.dataSource.get(aJ.recurrenceId),"remove")}this.dataSource.cancelChanges(aJ);aK.close()}},editEvent:function(aJ){var aI=typeof aJ=="string"?this.occurrenceByUid(aJ):aJ;if(!aI){return}this.cancelEvent();if(aI.isRecurring()){this._editRecurringDialog(aI)}else{this._editEvent(aI)}},_editEvent:function(aI){this._unbindResize();this._createPopupEditor(aI);this._bindResize()},_editRecurringDialog:function(aJ){var aK=this;var aM=function(){if(aJ.isException()){aK._editEvent(aJ)}else{aK.addEvent(aJ)}};var aL=function(){if(aJ.recurrenceId){aJ=aK.dataSource.get(aJ.recurrenceId)}aK._editEvent(aJ)};var aI=aK.options.messages.recurrenceMessages;aK._showRecurringDialog(aJ,aM,aL,{title:aI.editWindowTitle,text:aI.editRecurring?aI.editRecurring:I,occurrenceText:aI.editWindowOccurrence,seriesText:aI.editWindowSeries})},_showRecurringDialog:function(aI,aN,aM,aL){var aK=this;var aJ=aK.options.editable;var aO=C(aJ)?aJ.editRecurringMode:"dialog";if(aO==="series"){aM()}else{if(aO==="occurrence"){aN()}else{this._unbindResize();aK.showDialog({model:aI,title:aL.title,text:aL.text,buttons:[{text:aL.occurrenceText,click:aN},{text:aL.seriesText,click:aM}]});this._bindResize()}}},_createButton:function(aL){var aK=aL.template||Q,aJ=typeof aL===ax?aL:aL.name||aL.text,aI={className:"k-scheduler-"+(aJ||"").replace(/\s/g,""),text:aJ,attr:""};if(!aJ&&!(C(aL)&&aL.template)){throw new Error("Custom commands should have name specified")}if(C(aL)){if(aL.className){aL.className+=" "+aI.className}if(aJ==="edit"&&C(aL.text)){aL=ab(true,{},aL);aL.text=aL.text.edit}aI=ab(true,aI,M[aJ],aL)}else{aI=ab(true,aI,M[aJ])}return r.template(aK)(aI)},_convertDates:function(aL,aO){var aM=this.dataSource.reader.timezone;var aI=aL.startTimezone;var aK=aL.endTimezone;var aN=aL.start;var aJ=aL.start;aO=aO||"apply";aI=aI||aK;aK=aK||aI;if(aI){if(aM){if(aO==="apply"){aN=r.timezone.convert(aL.start,aM,aI);aJ=r.timezone.convert(aL.end,aM,aK)}else{aN=r.timezone.convert(aL.start,aI,aM);aJ=r.timezone.convert(aL.end,aK,aM)}}else{aN=r.timezone[aO](aL.start,aI);aJ=r.timezone[aO](aL.end,aK)}aL._set("start",aN);aL._set("end",aJ)}},_createEditor:function(){var aJ=this;var aI;if(this._isMobile()&&r.mobile.ui.Pane){aI=aJ._editor=new i(this.wrapper,ab({},this.options,{target:this,timezone:aJ.dataSource.reader.timezone,resources:aJ.resources,createButton:y(this._createButton,this)}))}else{aI=aJ._editor=new ar(this.wrapper,ab({},this.options,{target:this,createButton:y(this._createButton,this),timezone:aJ.dataSource.reader.timezone,resources:aJ.resources}))}aI.bind("cancel",function(aK){if(aJ.trigger("cancel",{container:aK.container,event:aK.model})){aK.preventDefault();return}aJ.cancelEvent();aJ.focus()});aI.bind("edit",function(aK){if(aJ.trigger(F,{container:aK.container,event:aK.model})){aK.preventDefault()}});aI.bind("save",function(){aJ.saveEvent()});aI.bind("remove",function(aK){aJ.removeEvent(aK.model)})},_createPopupEditor:function(aI){var aJ=this._editor;if(!aI.isNew()||aI.isOccurrence()){if(aI.isOccurrence()){this._convertDates(aI.recurrenceId?this.dataSource.get(aI.recurrenceId):aI)}this._convertDates(aI)}this.editable=aJ.editEvent(aI)},removeEvent:function(aJ){var aK=this,aI=typeof aJ=="string"?aK.occurrenceByUid(aJ):aJ;if(!aI){return}if(aI.isRecurring()){aK._deleteRecurringDialog(aI)}else{aK._confirmation(function(aL){if(!aL){aK._removeEvent(aI)}},aI)}},occurrenceByUid:function(aI){var aJ=this.dataSource.getByUid(aI);if(!aJ){aJ=aH(this._data,aI)}return aJ},occurrencesInRange:function(aJ,aI){return new r.data.Query(this._data).filter({logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:aJ},{field:"end",operator:"gte",value:aJ},{field:"start",operator:"lt",value:aI}]},{logic:"and",filters:[{field:"start",operator:"lte",value:aJ},{field:"end",operator:"gt",value:aJ}]}]}).toArray()},_removeEvent:function(aI){if(!this.trigger(aD,{event:aI})){if(this.dataSource.remove(aI)){this.dataSource.sync()}}},_deleteRecurringDialog:function(aL){var aN=this;var aM=aL;var aJ=aN.options.editable;var aP;var aQ;var aR;var aK;var aO=C(aJ)?aJ.editRecurringMode:"dialog";aP=function(){var aV=aM.recurrenceId?aM:aM.toOccurrence();var aU=aN.dataSource.get(aV.recurrenceId);aN._convertDates(aU);aN._removeEvent(aV)};aQ=function(){if(aM.recurrenceId){aM=aN.dataSource.get(aM.recurrenceId)}aN._removeEvent(aM)};if(aO!="dialog"||aN._isEditorOpened()){aR=function(){aN._confirmation(function(aU){if(!aU){aP()}},aM)};aK=function(){aN._confirmation(function(aU){if(!aU){aQ()}},aM)}}var aI=aK||aQ;var aT=aR||aP;if(aN._isEditorOpened()){if(aL.isException()){aT()}else{aI()}}else{var aS=aN.options.messages.recurrenceMessages;aN._showRecurringDialog(aL,aT,aI,{title:aS.deleteWindowTitle,text:aS.deleteRecurring?aS.deleteRecurring:J,occurrenceText:aS.deleteWindowOccurrence,seriesText:aS.deleteWindowSeries})}},_isEditorOpened:function(){return !!this._editor.container},_unbindView:function(aI){var aJ=this;aJ.angular("cleanup",function(){return{elements:aJ.items()}});aI.destroy()},_bindView:function(aI){var aJ=this;if(aJ.options.editable){if(aJ._viewRemoveHandler){aI.unbind(aD,aJ._viewRemoveHandler)}aJ._viewRemoveHandler=function(aK){aJ.removeEvent(aK.uid)};aI.bind(aD,aJ._viewRemoveHandler);if(aJ._viewAddHandler){aI.unbind(X,aJ._viewAddHandler)}aJ._viewAddHandler=function(aK){aJ.addEvent(aK.eventInfo)};aI.bind(X,this._viewAddHandler);if(aJ._viewEditHandler){aI.unbind(F,aJ._viewEditHandler)}aJ._viewEditHandler=function(aK){aJ.editEvent(aK.uid)};aI.bind(F,this._viewEditHandler)}if(aJ._viewNavigateHandler){aI.unbind("navigate",aJ._viewNavigateHandler)}aJ._viewNavigateHandler=function(aL){if(aL.view){var aM="isWorkDay" in aL;var aK=aM?"changeWorkDay":"changeView";if(!aJ.trigger("navigate",{view:aL.view,isWorkDay:aL.isWorkDay,action:aK,date:aL.date})){if(aM){aJ._workDayMode=aL.isWorkDay}aJ._selectView(aL.view);aJ.date(aL.date)}}};aI.bind("navigate",aJ._viewNavigateHandler);if(aJ._viewActivateHandler){aI.unbind("activate",aJ._viewActivateHandler)}aJ._viewActivateHandler=function(){var aK=this;if(aJ._selection){aK.constrainSelection(aJ._selection);aJ._select();aJ._adjustSelectedDate()}};aI.bind("activate",aJ._viewActivateHandler)},_selectView:function(aI){var aL=this;if(aI&&aL.views[aI]){if(aL._selectedView){aL._unbindView(aL._selectedView)}aL._selectedView=aL._renderView(aI);aL._selectedViewName=aI;if(aL._viewsCount>1){var aK=U({views:aL.views,view:aI,ns:r.ns});var aM=aL.toolbar.find(".k-scheduler-views li:first-child");if(aM.is(".k-current-view")){aM.replaceWith(aK)}else{aL.toolbar.find(".k-scheduler-views").prepend(aK)}var aJ=aL.toolbar.find(".k-scheduler-views li").removeClass("k-state-selected");aJ.end().find(".k-view-"+aI.replace(/\./g,"\\.").toLowerCase()).addClass("k-state-selected")}}},view:function(aI){var aJ=this;if(aI){aJ._selectView(aI);aJ.rebind();return}return aJ._selectedView},viewName:function(){return this.view().name},_renderView:function(aJ){var aI=this._initializeView(aJ);this._bindView(aI);this._model.set("formattedDate",aI.dateForTitle());this._model.set("formattedShortDate",aI.shortDateForTitle());return aI},resize:function(aL){var aK=this.getSize();var aJ=this._size;var aI=this.view();if(!aI||!aI.groups){return}if(aL||!aJ||aK.width!==aJ.width||aK.height!==aJ.height){this.refresh({action:"resize"});this._size=aK}},_adjustSelectedDate:function(){var aI=this._model.selectedDate,aJ=this._selection,aK=aJ.start;if(aK&&!r.date.isInDateRange(aI,az(aK),az(aJ.end))){aI.setFullYear(aK.getFullYear(),aK.getMonth(),aK.getDate())}},_initializeView:function(aK){var aI=this.views[aK];if(aI){var aJ=C(aI),aL=aI.type;if(typeof aL===ax){aL=r.getter(aI.type)(window)}if(aL){aI=new aL(this.wrapper,T(ab(true,{},this.options,aJ?aI:{},{resources:this.resources,date:this.date(),showWorkHours:this._workDayMode})))}else{throw new Error("There is no such view")}}return aI},_views:function(){var aR=this.options.views;var aP;var aN;var aM;var aI;var aJ;var aO;var aQ;var aK;this.views={};this._viewsCount=0;for(aQ=0,aK=aR.length;aQ<aK;aQ++){var aL=false;aP=aR[aQ];aI=C(aP);if(aI){aO=aJ=aP.type?aP.type:aP;if(typeof aO!==ax){aJ=aP.name||aP.title;aL=true}}else{aO=aJ=aP}aN=g[aJ];if(aN&&!aL){aP.type=aN.type;aN.title=this.options.messages.views[aJ];if(aN.type==="day"){aN.messages={allDay:this.options.messages.allDay}}else{if(aN.type==="agenda"){aN.messages={event:this.options.messages.event,date:this.options.messages.date,time:this.options.messages.time}}}}aP=ab({title:aJ},aN,aI?aP:{});if(aJ){this.views[aJ]=aP;this._viewsCount++;if(!aM||aP.selected){aM=aJ}}}if(aM){this._selectedViewName=aM}},rebind:function(){this.dataSource.fetch()},_dataSource:function(){var aJ=this,aI=aJ.options,aK=aI.dataSource;aK=b(aK)?{data:aK}:aK;if(aI.timezone&&!(aK instanceof aB)){aK=ab(true,aK,{schema:{timezone:aI.timezone}})}else{if(aK instanceof aB){aI.timezone=aK.options.schema?aK.options.schema.timezone:""}}if(aJ.dataSource&&aJ._refreshHandler){aJ.dataSource.unbind(E,aJ._refreshHandler).unbind("progress",aJ._progressHandler).unbind("error",aJ._errorHandler)}else{aJ._refreshHandler=y(aJ.refresh,aJ);aJ._progressHandler=y(aJ._requestStart,aJ);aJ._errorHandler=y(aJ._error,aJ)}aJ.dataSource=r.data.SchedulerDataSource.create(aK).bind(E,aJ._refreshHandler).bind("progress",aJ._progressHandler).bind("error",aJ._errorHandler);aJ.options.dataSource=aJ.dataSource},_error:function(){this._progress(false)},_requestStart:function(){this._progress(true)},_progress:function(aI){var aJ=this.element.find(".k-scheduler-content");r.ui.progress(aJ,aI)},_resources:function(){var aK=this;var aN=aK.options.resources;for(var aI=0;aI<aN.length;aI++){var aL=aN[aI];var aM=aL.field;var aO=aL.dataSource;if(!aM||!aO){throw new Error('The "field" and "dataSource" options of the scheduler resource are mandatory.')}aK.resources.push({field:aM,name:aL.name||aM,title:aL.title||aM,dataTextField:aL.dataTextField||"text",dataValueField:aL.dataValueField||"value",dataColorField:aL.dataColorField||"color",valuePrimitive:aL.valuePrimitive!=null?aL.valuePrimitive:true,multiple:aL.multiple||false,dataSource:r.data.DataSource.create(aO)})}var aJ=ap.map(aK.resources,function(aP){return aP.dataSource.fetch()});ap.when.apply(null,aJ).then(function(){if(aK.options.autoBind){aK.view(aK._selectedViewName)}else{aK._selectView(aK._selectedViewName)}})},_initModel:function(){var aI=this;aI._model=r.observable({selectedDate:new Date(this.options.date),formattedDate:"",formattedShortDate:""});aI._model.bind("change",function(aJ){if(aJ.field==="selectedDate"){aI.view(aI._selectedViewName)}})},_wrapper:function(){var aL=this;var aJ=aL.options;var aI=aJ.height;var aK=aJ.width;aL.wrapper=aL.element.addClass("k-widget k-scheduler k-floatwrap").attr("role","grid").attr("aria-multiselectable",true);if(aL._isMobile()){aL.wrapper.addClass("k-scheduler-mobile")}if(aL._isMobilePhoneView()){aL.wrapper.addClass("k-scheduler-phone")}if(aI){aL.wrapper.height(aI)}if(aK){aL.wrapper.width(aK)}},date:function(aI){if(aI!=null&&az(aI)>=az(this.options.min)&&az(aI)<=az(this.options.max)){this._model.set("selectedDate",aI)}return az(this._model.get("selectedDate"))},_toolbar:function(){var aM=this;var aJ=aM.options;var aI=[];if(aJ.toolbar){aI=ap.isArray(aJ.toolbar)?aJ.toolbar:[aJ.toolbar]}var aK=this._isMobilePhoneView()?aq:N;var aL=ap(aK({messages:aJ.messages,pdf:ap.grep(aI,function(aN){return aN=="pdf"||aN.name=="pdf"}).length>0,ns:r.ns,views:aM.views,viewsCount:aM._viewsCount}));aM.wrapper.append(aL);aM.toolbar=aL;r.bind(aM.toolbar,aM._model);aL.on(an+aw,".k-pdf",function(aN){aN.preventDefault();aM.saveAsPDF()});aL.on(an+aw,".k-scheduler-navigation li",function(aQ){var aN=ap(this);var aO=new Date(aM.date());var aP="";aQ.preventDefault();if(aN.hasClass("k-nav-today")){aP="today";aO=new Date()}else{if(aN.hasClass("k-nav-next")){aP="next";aO=aM.view().nextDate()}else{if(aN.hasClass("k-nav-prev")){aP="previous";aO=aM.view().previousDate()}else{if(aN.hasClass("k-nav-current")&&!aM._isMobilePhoneView()){aM._showCalendar();return}}}}if(!aM.trigger("navigate",{view:aM._selectedViewName,action:aP,date:aO})){aM.date(aO)}});aL.on(an+aw,".k-scheduler-views li, .k-scheduler-refresh",function(aO){aO.preventDefault();var aN=ap(this).attr(r.attr("name"));if(!aM.trigger("navigate",{view:aN,action:"changeView",date:aM.date()})){aM.view(aN);aM.element.find(".k-state-expanded").removeClass("k-state-expanded")}});aL.on(an+aw,".k-scheduler-views li.k-current-view",function(){aM.element.find(".k-scheduler-views").toggleClass("k-state-expanded")});aL.find("li").hover(function(){ap(this).addClass("k-state-hover")},function(){ap(this).removeClass("k-state-hover")})},_showCalendar:function(){var aJ=this,aK=aJ.toolbar.find(".k-nav-current"),aI=ap('<div class="k-calendar-container"><div class="k-scheduler-calendar"/></div>');if(!aJ.popup){aJ.popup=new aj(aI,{anchor:aK,open:function(){if(!aJ.calendar){aJ.calendar=new u(this.element.find(".k-scheduler-calendar"),{change:function(){var aL=this.value();if(!aJ.trigger("navigate",{view:aJ._selectedViewName,action:"changeDate",date:aL})){aJ.date(aL);aJ.popup.close()}},min:aJ.options.min,max:aJ.options.max})}aJ.calendar.value(aJ.date())},copyAnchorStyles:false})}aJ.popup.open()},refresh:function(aK){var aJ=this;var aI=this.view();this._progress(false);this.angular("cleanup",function(){return{elements:aJ.items()}});aK=aK||{};if(!aI){return}if(aK&&aK.action==="itemchange"&&(this._editor.editable||this._preventRefresh)){return}if(this.trigger("dataBinding",{action:aK.action||"rebind",index:aK.index,items:aK.items})){return}if(!(aK&&aK.action==="resize")&&this._editor){this._editor.close()}this._data=this.dataSource.expand(aI.startDate(),aI.endDate());aI.refreshLayout();aI.render(this._data);this.trigger("dataBound")},slotByPosition:function(aI,aL){var aJ=this.view();if(!aJ._slotByPosition){return null}var aK=aJ._slotByPosition(aI,aL);if(!aK){return null}return{startDate:aK.startDate(),endDate:aK.endDate(),groupIndex:aK.groupIndex,element:aK.element,isDaySlot:aK.isDaySlot}},slotByElement:function(aI){var aJ=ap(aI).offset();return this.slotByPosition(aJ.left,aJ.top)},resourcesBySlot:function(aI){return this.view()._resourceBySlot(aI)}});var g={day:{type:"kendo.ui.DayView"},week:{type:"kendo.ui.WeekView"},workWeek:{type:"kendo.ui.WorkWeekView"},agenda:{type:"kendo.ui.AgendaView"},month:{type:"kendo.ui.MonthView"},timeline:{type:"kendo.ui.TimelineView"},timelineWeek:{type:"kendo.ui.TimelineWeekView"},timelineWorkWeek:{type:"kendo.ui.TimelineWorkWeekView"},timelineMonth:{type:"kendo.ui.TimelineMonthView"}};O.plugin(l);if(r.PDFMixin){r.PDFMixin.extend(l.prototype);var aA="k-scheduler-pdf-export";l.fn._drawPDF=function(aI){var aN=this.wrapper;var aL=aN[0].style.cssText;aN.css({width:aN.width(),height:aN.height()});aN.addClass(aA);var aJ=this;var aM=new ap.Deferred();var aK=aN.find(".k-scheduler-content").find("table").css("table-layout","auto");setTimeout(function(){aK.css("table-layout","fixed");aJ.resize(true);aJ._drawPDFShadow({},{avoidLinks:aJ.options.pdf.avoidLinks}).done(function(aP){var aO={page:aP,pageNumber:1,progress:1,totalPages:1};aI.notify(aO);aM.resolve(aO.page)}).fail(function(aO){aM.reject(aO)}).always(function(){aN[0].style.cssText=aL;aN.removeClass(aA);aJ.resize(true);aJ.resize(true)})});return aM}}var ak=j.extend({init:function(aK,aJ){var aL=this,aI=r.timezone.windows_zones;if(!aI||!r.timezone.zones_titles){throw new Error("kendo.timezones.min.js is not included.")}j.fn.init.call(aL,aK,aJ);aL.wrapper=aL.element;aL._zonesQuery=new r.data.Query(aI);aL._zoneTitleId=r.guid();aL._zoneTitlePicker();aL._zonePicker();aL._zoneTitle.bind("cascade",function(){if(!this.value()){aL._zone.wrapper.hide()}});aL._zone.bind("cascade",function(){aL._value=this.value();aL.trigger("change")});aL.value(aL.options.value)},options:{name:"TimezoneEditor",value:"",optionLabel:"No timezone"},events:["change"],_zoneTitlePicker:function(){var aJ=this,aI=ap('<input id="'+aJ._zoneTitleId+'"/>').appendTo(aJ.wrapper);aJ._zoneTitle=new r.ui.DropDownList(aI,{dataSource:r.timezone.zones_titles,dataValueField:"other_zone",dataTextField:"name",optionLabel:aJ.options.optionLabel})},_zonePicker:function(){var aJ=this,aI=ap("<input />").appendTo(this.wrapper);aJ._zone=new r.ui.DropDownList(aI,{dataValueField:"zone",dataTextField:"territory",dataSource:aJ._zonesQuery.data,cascadeFrom:aJ._zoneTitleId,dataBound:function(){aJ._value=this.value();this.wrapper.toggle(this.dataSource.view().length>1)}});aJ._zone.wrapper.hide()},destroy:function(){j.fn.destroy.call(this);r.destroy(this.wrapper)},value:function(aK){var aJ=this,aI;if(aK===x){return aJ._value}aI=aJ._zonesQuery.filter({field:"zone",operator:"eq",value:aK}).data[0];if(aI){aJ._zoneTitle.value(aI.other_zone);aJ._zone.value(aI.zone)}else{aJ._zoneTitle.select(0)}}});O.plugin(ak);var p=r.template('<option value="#=other_zone#">#=name#</option>');var am=r.template('<option value="#=zone#">#=territory#</option>');var aa=j.extend({init:function(aK,aJ){var aL=this,aI=r.timezone.windows_zones;if(!aI||!r.timezone.zones_titles){throw new Error("kendo.timezones.min.js is not included.")}j.fn.init.call(aL,aK,aJ);aL.wrapper=aL.element;aL._zonesQuery=new r.data.Query(aI);aL._zoneTitlePicker();aL._zonePicker();aL.value(aL.options.value)},options:{name:"MobileTimezoneEditor",optionLabel:"No timezone",value:""},events:["change"],_bindZones:function(aJ){var aI=aJ?this._filter(aJ):[];this._zone.html(this._options(aI,am))},_filter:function(aI){return this._zonesQuery.filter({field:"other_zone",operator:"eq",value:aI}).data},_options:function(aN,aK,aM){var aI=0;var aJ="";var aL=aN.length;if(aM){aJ+=aK({other_zone:"",name:aM})}for(;aI<aL;aI++){aJ+=aK(aN[aI])}return aJ},_zoneTitlePicker:function(){var aJ=this;var aI=aJ._options(r.timezone.zones_titles,p,aJ.options.optionLabel);aJ._zoneTitle=ap("<select>"+aI+"</select>").appendTo(aJ.wrapper).change(function(){var aL=this.value;var aK=aJ._zone;aJ._bindZones(aL);if(aL&&aK[0].children.length>1){aK.show()}else{aK.hide()}aJ._value=aK[0].value;aJ.trigger("change")})},_zonePicker:function(){var aI=this;aI._zone=ap('<select style="display:none"></select>').appendTo(this.wrapper).change(function(){aI._value=this.value;aI.trigger("change")});aI._bindZones(aI._zoneTitle.val());aI._value=aI._zone[0].value},destroy:function(){j.fn.destroy.call(this);r.destroy(this.wrapper)},value:function(aN){var aM=this;var aL=aM._zone;var aJ="";var aK="";var aI;if(aN===x){return aM._value}aI=aM._zonesQuery.filter({field:"zone",operator:"eq",value:aN}).data[0];if(aI){aK=aI.zone;aJ=aI.other_zone}aM._zoneTitle.val(aJ);aM._bindZones(aJ);aL.val(aK);aK=aL[0].value;if(aK&&aL[0].children.length>1){aL.show()}else{aL.hide()}aM._value=aK}});O.plugin(aa)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.touch",["kendo.core","kendo.userevents"],a)}(function(){var a={id:"touch",name:"Touch",category:"mobile",description:"The kendo Touch widget provides a cross-platform compatible API for handling user-initiated touch events, multi-touch gestures and event sequences (drag, swipe, etc.). ",depends:["core","userevents"]};(function(f,i){var h=window.kendo,e=h.ui.Widget,c=f.proxy,b=Math.abs,g=20;var d=e.extend({init:function(k,j){var m=this;e.fn.init.call(m,k,j);j=m.options;k=m.element;m.wrapper=k;function l(o){return function(p){m._triggerTouch(o,p)}}function n(o){return function(p){m.trigger(o,{touches:p.touches,distance:p.distance,center:p.center,event:p.event})}}m.events=new h.UserEvents(k,{filter:j.filter,surface:j.surface,minHold:j.minHold,multiTouch:j.multiTouch,allowSelection:true,fastTap:j.fastTap,press:l("touchstart"),hold:l("hold"),tap:c(m,"_tap"),gesturestart:n("gesturestart"),gesturechange:n("gesturechange"),gestureend:n("gestureend")});if(j.enableSwipe){m.events.bind("start",c(m,"_swipestart"));m.events.bind("move",c(m,"_swipemove"))}else{m.events.bind("start",c(m,"_dragstart"));m.events.bind("move",l("drag"));m.events.bind("end",l("dragend"))}h.notify(m)},events:["touchstart","dragstart","drag","dragend","tap","doubletap","hold","swipe","gesturestart","gesturechange","gestureend"],options:{name:"Touch",surface:null,global:false,fastTap:false,filter:null,multiTouch:false,enableSwipe:false,minXDelta:30,maxYDelta:20,maxDuration:1000,minHold:800,doubleTapTimeout:800},cancel:function(){this.events.cancel()},destroy:function(){this.events.destroy()},_triggerTouch:function(j,k){if(this.trigger(j,{touch:k.touch,event:k.event})){k.preventDefault()}},_tap:function(k){var j=this,m=j.lastTap,l=k.touch;if(m&&l.endTime-m.endTime<j.options.doubleTapTimeout&&h.touchDelta(l,m).distance<g){j._triggerTouch("doubletap",k);j.lastTap=null}else{j._triggerTouch("tap",k);j.lastTap=l}},_dragstart:function(j){this._triggerTouch("dragstart",j)},_swipestart:function(j){if(b(j.x.velocity)*2>=b(j.y.velocity)){j.sender.capture()}},_swipemove:function(n){var k=this,j=k.options,o=n.touch,m=n.event.timeStamp-o.startTime,l=o.x.initialDelta>0?"right":"left";if(b(o.x.initialDelta)>=j.minXDelta&&b(o.y.initialDelta)<j.maxYDelta&&m<j.maxDuration){k.trigger("swipe",{direction:l,touch:n.touch});o.cancel()}}});h.ui.plugin(d)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.gantt.list",["kendo.dom","kendo.touch","kendo.draganddrop","kendo.columnsorter","kendo.datetimepicker","kendo.editable"],a)}(function(){var a={id:"gantt.list",name:"Gantt List",category:"web",description:"The Gantt List",depends:["dom","touch","draganddrop","columnsorter","datetimepicker","editable"],hidden:true};(function(i){var p=window.kendo;var r=p.dom;var t=r.element;var g=r.text;var y=p.support.browser;var q=p.support.mobileOS;var o=p.ui;var h=o.Widget;var v=i.extend;var b=p._outerWidth;var f=p._outerHeight;var z=i.map;var e=i.isFunction;var k=y.msie&&y.version<9;var n=p.keys;var A={title:"Title",start:"Start Time",end:"End Time",percentComplete:"% Done",parentId:"Predecessor ID",id:"ID",orderId:"Order ID"};var m="string";var u=".kendoGanttList";var j="click";var s=".";var d="<table style='visibility: hidden;'><tbody><tr style='height:{0}'><td>&nbsp;</td></tr></tbody></table>";var l={wrapper:"k-treelist k-grid k-widget",header:"k-header",alt:"k-alt",rtl:"k-rtl",editCell:"k-edit-cell",group:"k-treelist-group",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",selected:"k-state-selected",icon:"k-icon",iconCollapse:"k-i-collapse",iconExpand:"k-i-expand",iconHidden:"k-i-none",iconPlaceHolder:"k-icon k-i-none",input:"k-input",link:"k-link",resizeHandle:"k-resize-handle",resizeHandleInner:"k-resize-handle-inner",dropPositions:"k-i-insert-up k-i-insert-down k-i-plus k-i-insert-middle",dropTop:"k-i-insert-up",dropBottom:"k-i-insert-down",dropAdd:"k-i-plus",dropMiddle:"k-i-insert-middle",dropDenied:"k-i-cancel",dragStatus:"k-drag-status",dragClue:"k-drag-clue",dragClueText:"k-clue-text"};function x(B){var D=[];var E=B.className;for(var C=0,F=B.level;C<F;C++){D.push(t("span",{className:E}))}return D}function c(){var B=p._activeElement();if(B&&B.nodeName.toLowerCase()!=="body"){i(B).blur()}}var w=o.GanttList=h.extend({init:function(C,B){h.fn.init.call(this,C,B);if(this.options.columns.length===0){this.options.columns.push("title")}this.dataSource=this.options.dataSource;this._columns();this._layout();this._domTrees();this._header();this._sortable();this._editable();this._selectable();this._draggable();this._resizable();this._attachEvents();this._adjustHeight();this.bind("render",function(){var D;var E;if(this.options.resizable){D=this.header.find("col");E=this.content.find("col");this.header.find("th").not(":last").each(function(F){var G=b(i(this));D.eq(F).width(G);E.eq(F).width(G)});D.last().css("width","auto");E.last().css("width","auto")}},true)},_adjustHeight:function(){this.content.height(this.element.height()-f(this.header.parent()))},destroy:function(){h.fn.destroy.call(this);if(this._reorderDraggable){this._reorderDraggable.destroy()}if(this._tableDropArea){this._tableDropArea.destroy()}if(this._contentDropArea){this._contentDropArea.destroy()}if(this._columnResizable){this._columnResizable.destroy()}if(this.touch){this.touch.destroy()}if(this.timer){clearTimeout(this.timer)}this.content.off(u);this.header.find("thead").off(u);this.header.find(s+w.link).off(u);this.header=null;this.content=null;this.levels=null;p.destroy(this.element)},options:{name:"GanttList",selectable:true,editable:true,resizable:false},_attachEvents:function(){var B=this;var C=w.styles;B.content.on(j+u,"td > span."+C.icon+":not(."+C.iconHidden+")",function(F){var E=i(this);var D=B._modelFromElement(E);D.set("expanded",!D.get("expanded"));F.stopPropagation()})},_domTrees:function(){this.headerTree=new r.Tree(this.header[0]);this.contentTree=new r.Tree(this.content[0])},_columns:function(){var C=this.options.columns;var B=function(){this.field="";this.title="";this.editable=false;this.sortable=false};this.columns=z(C,function(D){D=typeof D===m?{field:D,title:A[D]}:D;return v(new B(),D)})},_layout:function(){var D=this;var B=this.options;var C=this.element;var E=w.styles;var F=function(){var I=typeof B.rowHeight===m?B.rowHeight:B.rowHeight+"px";var H=i(p.format(d,I));var G;D.content.append(H);G=f(H.find("tr"));H.remove();return G};C.addClass(E.wrapper).append("<div class='"+E.gridHeader+"'><div class='"+E.gridHeaderWrap+"'></div></div>").append("<div class='"+E.gridContentWrap+"'></div>");this.header=C.find(s+E.gridHeaderWrap);this.content=C.find(s+E.gridContent);if(B.rowHeight){this._rowHeight=F()}},_header:function(){var E=this.headerTree;var B;var D;var C;B=t("colgroup",null,this._cols());D=t("thead",{role:"rowgroup"},[t("tr",{role:"row"},this._ths())]);C=t("table",{style:{minWidth:this.options.listWidth+"px"},role:"grid"},[B,D]);E.render([C])},_render:function(F){var B;var C;var D;var E={style:{minWidth:this.options.listWidth+"px"},tabIndex:0,role:"treegrid"};if(this._rowHeight){E.style.height=F.length*this._rowHeight+"px"}this.levels=[{field:null,value:0}];B=t("colgroup",null,this._cols());C=t("tbody",{role:"rowgroup"},this._trs(F));D=t("table",E,[B,C]);this.contentTree.render([D]);this.trigger("render")},_ths:function(){var E=this.columns;var F;var B;var C=[];for(var D=0,G=E.length;D<G;D++){F=E[D];B={"data-field":F.field,"data-title":F.title,className:w.styles.header,role:"columnheader"};C.push(t("th",B,[g(F.title)]))}if(this.options.resizable){C.push(t("th",{className:w.styles.header,role:"columnheader"}))}return C},_cols:function(){var C=this.columns;var F;var E;var D;var H=[];for(var B=0,G=C.length;B<G;B++){F=C[B];D=F.width;if(D&&parseInt(D,10)!==0){E={style:{width:typeof D===m?D:D+"px"}}}else{E=null}H.push(t("col",E,[]))}if(this.options.resizable){H.push(t("col",{style:{width:"1px"}}))}return H},_trs:function(F){var D;var J=[];var H;var I=[];var B;var E=w.styles;for(var G=0,C=F.length;G<C;G++){D=F[G];B=this._levels({idx:D.parentId,id:D.id,summary:D.summary});H={"data-uid":D.uid,"data-level":B,role:"row"};if(D.summary){H["aria-expanded"]=D.expanded}if(G%2!==0){I.push(E.alt)}if(D.summary){I.push(E.group)}if(I.length){H.className=I.join(" ")}J.push(this._tds({task:D,attr:H,level:B}));I=[]}return J},_tds:function(C){var F=[];var E=this.columns;var G;for(var D=0,B=E.length;D<B;D++){G=E[D];F.push(this._td({task:C.task,column:G,level:C.level}))}if(this.options.resizable){F.push(t("td",{role:"gridcell"}))}return t("tr",C.attr,F)},_td:function(K){var B=[];var J=this.options.resourcesField;var D=w.styles;var C=K.task;var E=K.column;var I=C.get(E.field);var G;var H;if(E.field==J){I=I||[];G=[];for(var F=0;F<I.length;F++){G.push(p.format("{0} [{1}]",I[F].get("name"),I[F].get("formatedValue")))}G=G.join(", ")}else{G=E.format?p.format(E.format,I):I}if(E.field==="title"){B=x({level:K.level,className:D.iconPlaceHolder});B.push(t("span",{className:D.icon+" "+(C.summary?C.expanded?D.iconCollapse:D.iconExpand:D.iconHidden)}));H=p.format("{0}, {1:P0}",G,C.percentComplete)}B.push(t("span",{"aria-label":H},[g(G)]));return t("td",{role:"gridcell"},B)},_levels:function(D){var G=this.levels;var I;var C=D.summary;var B=D.idx;var H=D.id;for(var E=0,F=G.length;E<F;E++){I=G[E];if(I.field==B){if(C){G.push({field:H,value:I.value+1})}return I.value}}},_sortable:function(){var E=this;var I=this.options.resourcesField;var D=this.columns;var C;var K;var J=this.header.find("th["+p.attr("field")+"]");var H;var F=function(L){if(E.dataSource.total()===0||E.editable&&E.editable.trigger("validate")){L.preventDefault()}};for(var G=0,B=J.length;G<B;G++){C=D[G];if(C.sortable&&C.field!==I){H=J.eq(G);K=H.data("kendoColumnSorter");if(K){K.destroy()}H.attr("data-"+p.ns+"field",C.field).kendoColumnSorter({dataSource:this.dataSource,change:F})}}J=null},_selectable:function(){var C=this;var B=this.options.selectable;if(B){this.content.on(j+u,"tr",function(E){var D=i(this);if(C.editable){C.editable.trigger("validate")}if(!E.ctrlKey){C.select(D)}else{C.clearSelection()}})}},select:function(D){var C=this.content.find(D);var B=w.styles.selected;if(C.length){C.siblings(s+B).removeClass(B).attr("aria-selected",false).end().addClass(B).attr("aria-selected",true);this.trigger("change");return}return this.content.find(s+B)},clearSelection:function(){var B=this.select();if(B.length){B.removeClass(w.styles.selected);this.trigger("change")}},_setDataSource:function(B){this.dataSource=B;this._sortable()},_editable:function(){var E=this;var D=this.options.editable;var G=w.styles;var F="span."+G.icon+":not("+G.iconHidden+")";var B=function(){var H=E.editable;if(H){if(H.end()){E._closeCell()}else{H.trigger("validate")}}};var C=function(I){var H=i(I.currentTarget);if(!H.hasClass(G.editCell)){c()}};if(!D||D.update===false){return}this._startEditHandler=function(I){var J=I.currentTarget?i(I.currentTarget):I;var H=E._columnFromElement(J);if(E.editable){return}if(H&&H.editable){E._editCell({cell:J,column:H})}};E.content.on("focusin"+u,function(){clearTimeout(E.timer);E.timer=null}).on("focusout"+u,function(){E.timer=setTimeout(B,1)}).on("keydown"+u,function(H){if(H.keyCode===n.ENTER){H.preventDefault()}}).on("keyup"+u,function(K){var J=K.keyCode;var H;var I;switch(J){case n.ENTER:c();B();break;case n.ESC:if(E.editable){H=E._editableContainer;I=E._modelFromElement(H);if(!E.trigger("cancel",{model:I,cell:H})){E._closeCell(true)}}break}});if(!q){E.content.on("mousedown"+u,"td",function(H){C(H)}).on("dblclick"+u,"td",function(H){if(!i(H.target).is(F)){E._startEditHandler(H)}})}else{E.touch=E.content.kendoTouch({filter:"td",touchstart:function(H){C(H.touch)},doubletap:function(H){if(!i(H.touch.initialTouch).is(F)){E._startEditHandler(H.touch)}}}).data("kendoTouch")}},_editCell:function(O){var N=this.options.resourcesField;var C=w.styles;var M=O.cell;var D=O.column;var F=this._modelFromElement(M);var J=this.dataSource._createNewModel(F.toJSON());var K=J.fields[D.field]||J[D.field];var B=K.validation;var L=p.attr("type");var E=p.attr("bind");var G=p.attr("format");var I={name:D.field,required:K.validation?K.validation.required===true:false};var H;if(D.field===N){D.editor(M,J);return}this._editableContent=M.children().detach();this._editableContainer=M;M.data("modelCopy",J);if((K.type==="date"||i.type(K)==="date")&&(!D.format||/H|m|s|F|g|u/.test(D.format))){I[E]="value:"+D.field;I[L]="date";if(D.format){I[G]=p._extractFormat(D.format)}H=function(P,Q){i('<input type="text"/>').attr(I).appendTo(P).kendoDateTimePicker({format:Q.format})}}this.editable=M.addClass(C.editCell).kendoEditable({fields:{field:D.field,format:D.format,editor:D.editor||H},model:J,clearContainer:false}).data("kendoEditable");if(B&&B.dateCompare&&e(B.dateCompare)&&B.message){i("<span "+p.attr("for")+'="'+D.field+'" class="k-invalid-msg"/>').hide().appendTo(M);M.find("[name="+D.field+"]").attr(p.attr("dateCompare-msg"),B.message)}this.editable.bind("validate",function(P){var Q=this.element.find(":kendoFocusable:first").focus();if(k){Q.focus()}P.preventDefault()});if(this.trigger("edit",{model:F,cell:M})){this._closeCell(true)}},_closeCell:function(F){var H=w.styles;var B=this._editableContainer;var C=this._modelFromElement(B);var E=this._columnFromElement(B);var G=E.field;var I=B.data("modelCopy");var D={};D[G]=I.get(G);B.empty().removeData("modelCopy").removeClass(H.editCell).append(this._editableContent);this.editable.unbind();this.editable.destroy();this.editable=null;this._editableContainer=null;this._editableContent=null;if(!F){if(G==="start"){D.end=new Date(D.start.getTime()+C.duration())}this.trigger("update",{task:C,updateInfo:D})}},_draggable:function(){var K=this;var M=null;var O=true;var B;var D=w.styles;var L=p.support.isRtl(this.element);var E="tr["+p.attr("level")+" = 0]:last";var F={};var C=this.options.editable;var H=function(){M=null;B=null;O=true;F={}};var I=function(P){var Q=P;while(Q){if(M.get("id")===Q.get("id")){O=false;break}Q=K.dataSource.taskParent(Q)}};var J=function(){var P=i(B).height();var Q=p.getOffset(B).top;v(B,{beforeLimit:Q+P*0.25,afterLimit:Q+P*0.75})};var N=function(U){if(!B){return}var P=U.location;var R=D.dropAdd;var S="add";var T=parseInt(B.attr(p.attr("level")),10);var Q;if(P<=B.beforeLimit){Q=B.prev();R=D.dropTop;S="insert-before"}else{if(P>=B.afterLimit){Q=B.next();R=D.dropBottom;S="insert-after"}}if(Q&&parseInt(Q.attr(p.attr("level")),10)===T){R=D.dropMiddle}F.className=R;F.command=S};var G=function(){return K._reorderDraggable.hint.children(s+D.dragStatus).removeClass(D.dropPositions)};if(!C||C.reorder===false||C.update===false){return}this._reorderDraggable=this.content.kendoDraggable({distance:10,holdToDrag:q,group:"listGroup",filter:"tr[data-uid]",ignore:s+D.input,hint:function(P){return i('<div class="'+D.header+" "+D.dragClue+'"/>').css({width:300,paddingLeft:P.css("paddingLeft"),paddingRight:P.css("paddingRight"),lineHeight:P.height()+"px",paddingTop:P.css("paddingTop"),paddingBottom:P.css("paddingBottom")}).append('<span class="'+D.icon+" "+D.dragStatus+'" /><span class="'+D.dragClueText+'"/>')},cursorOffset:{top:-20,left:0},container:this.content,dragstart:function(Q){var P=K.editable;if(P&&P.reorder!==false&&P.trigger("validate")){Q.preventDefault();return}M=K._modelFromElement(Q.currentTarget);this.hint.children(s+D.dragClueText).text(M.get("title"));if(L){this.hint.addClass(D.rtl)}},drag:function(P){if(O){N(P.y);G().addClass(F.className)}},dragend:function(){H()},dragcancel:function(){H()}}).data("kendoDraggable");this._tableDropArea=this.content.kendoDropTargetArea({distance:0,group:"listGroup",filter:"tr[data-uid]",dragenter:function(P){B=P.dropTarget;I(K._modelFromElement(B));J();G().toggleClass(D.dropDenied,!O)},dragleave:function(){O=true;G()},drop:function(){var R=K._modelFromElement(B);var P=R.orderId;var Q={parentId:R.parentId};if(O){switch(F.command){case"add":Q.parentId=R.id;break;case"insert-before":if(R.parentId===M.parentId&&R.orderId>M.orderId){Q.orderId=P-1}else{Q.orderId=P}break;case"insert-after":if(R.parentId===M.parentId&&R.orderId>M.orderId){Q.orderId=P}else{Q.orderId=P+1}break}K.trigger("update",{task:M,updateInfo:Q})}}}).data("kendoDropTargetArea");this._contentDropArea=this.element.kendoDropTargetArea({distance:0,group:"listGroup",filter:s+D.gridContent,drop:function(){var R=K._modelFromElement(K.content.find(E));var P=R.orderId;var Q={parentId:null,orderId:M.parentId!==null?P+1:P};K.trigger("update",{task:M,updateInfo:Q})}}).data("kendoDropTargetArea")},_resizable:function(){var C=this;var D=w.styles;var B=function(M){var F=i(M.currentTarget);var O=C.resizeHandle;var L=F.position();var I=L.left;var J=b(F);var E=F.closest("div");var G=M.clientX+i(window).scrollLeft();var K=C.options.columnResizeHandleWidth;I+=E.scrollLeft();if(!O){O=C.resizeHandle=i('<div class="'+D.resizeHandle+'"><div class="'+D.resizeHandleInner+'" /></div>')}var H=F.offset().left+J;var N=G>H-K&&G<H+K;if(!N){O.hide();return}E.append(O);O.show().css({top:L.top,left:I+J-K-1,height:f(F),width:K*3}).data("th",F)};if(!this.options.resizable){return}if(this._columnResizable){this._columnResizable.destroy()}this.header.find("thead").on("mousemove"+u,"th",B);this._columnResizable=this.header.kendoResizable({handle:s+D.resizeHandle,start:function(H){var G=i(H.currentTarget).data("th");var F="col:eq("+G.index()+")";var I=C.header.find("table");var E=C.content.find("table");C.element.addClass("k-grid-column-resizing");this.col=E.children("colgroup").find(F).add(I.find(F));this.th=G;this.startLocation=H.x.location;this.columnWidth=b(G);this.table=I.add(E);this.totalWidth=this.table.width()-b(I.find("th:last"))},resize:function(F){var E=11;var G=F.x.location-this.startLocation;if(this.columnWidth+G<E){G=E-this.columnWidth}this.table.css({minWidth:this.totalWidth+G});this.col.width(this.columnWidth+G)},resizeend:function(){C.element.removeClass("k-grid-column-resizing");var E=Math.floor(this.columnWidth);var G=Math.floor(b(this.th));var F=C.columns[this.th.index()];C.trigger("columnResize",{column:F,oldWidth:E,newWidth:G});this.table=this.col=this.th=null}}).data("kendoResizable")},_modelFromElement:function(C){var D=C.closest("tr");var B=this.dataSource.getByUid(D.attr(p.attr("uid")));return B},_columnFromElement:function(C){var E=C.closest("td");var D=E.parent();var B=D.children().index(E);return this.columns[B]}});v(true,o.GanttList,{styles:l})}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.gantt.timeline",["kendo.dom","kendo.touch","kendo.draganddrop"],a)}(function(){var a={id:"gantt.timeline",name:"Gantt Timeline",category:"web",description:"The Gantt Timeline",depends:["dom","touch","draganddrop"],hidden:true};(function(u){var d=kendo.ui.Widget;var z=kendo.dom.element;var C=kendo.dom.text;var l=kendo.dom.html;var K=u.isPlainObject;var F=kendo._outerWidth;var I=kendo._outerHeight;var i=u.extend;var G=u.proxy;var b=kendo.support.browser;var P=false;var s=kendo.keys;var x=kendo.data.Query;var H="string";var w=".kendoGanttTimeline";var B="click";var n="dblclick";var E="mousemove";var e="mouseenter";var k="mouseleave";var L="keydown";var m=".";var q=kendo.template("#=kendo.toString(start, 't')#");var o=kendo.template("#=kendo.toString(start, 'ddd M/dd')#");var c=kendo.template("#=kendo.toString(start, 'ddd M/dd')# - #=kendo.toString(kendo.date.addDays(end, -1), 'ddd M/dd')#");var A=kendo.template("#=kendo.toString(start, 'MMM')#");var v=kendo.template("#=kendo.toString(start, 'yyyy')#");var D=kendo.template('<div class="#=styles.marquee#"><div class="#=styles.marqueeColor#"></div></div>');var N=kendo.template('<div style="z-index: 100002;" class="#=styles.tooltipWrapper#"><div class="#=styles.tooltipContent#"><div>#=messages.start#: #=kendo.toString(start, format)#</div><div>#=messages.end#: #=kendo.toString(end, format)#</div></div></div>');var j=kendo.template('<div style="z-index: 100002;" class="#=styles.tooltipWrapper#" ><div class="#=styles.tooltipContent#">#=text#%</div><div class="#=styles.tooltipCallout#" style="left:13px;"></div></div>');var J=kendo.template('<div class="#=styles.taskDetails#"><strong>#=task.title#</strong><div class="#=styles.taskDetailsPercent#">#=kendo.toString(task.percentComplete, "p0")#</div><ul class="#=styles.reset#"><li>#=messages.start#: #=kendo.toString(task.start, "h:mm tt ddd, MMM d")#</li><li>#=messages.end#: #=kendo.toString(task.end, "h:mm tt ddd, MMM d")#</li></ul></div>');var y="<table style='visibility: hidden;'><tbody><tr style='height:{0}'><td>&nbsp;</td></tr></tbody></table>";var t={day:{type:"kendo.ui.GanttDayView"},week:{type:"kendo.ui.GanttWeekView"},month:{type:"kendo.ui.GanttMonthView"},year:{type:"kendo.ui.GanttYearView"}};function O(Q){delete Q.name;delete Q.prefix;delete Q.views;return Q}function M(Q){var R=[];var S=Q.workWeekStart;R.push(S);while(Q.workWeekEnd!=S){if(S>6){S-=7}else{S++}R.push(S)}return R}function p(){var Q=kendo._activeElement();if(Q&&Q.nodeName.toLowerCase()!=="body"){u(Q).blur()}}var r={alt:"k-alt",reset:"k-reset",nonWorking:"k-nonwork-hour",header:"k-header",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",tasksWrapper:"k-gantt-tables",rowsTable:"k-gantt-rows",columnsTable:"k-gantt-columns",tasksTable:"k-gantt-tasks",dependenciesWrapper:"k-gantt-dependencies",resource:"k-resource",resourceAlt:"k-resource k-alt",task:"k-task",taskSingle:"k-task-single",taskMilestone:"k-task-milestone",taskSummary:"k-task-summary",taskWrap:"k-task-wrap",taskMilestoneWrap:"k-milestone-wrap",resourcesWrap:"k-resources-wrap",taskDot:"k-task-dot",taskDotStart:"k-task-start",taskDotEnd:"k-task-end",taskDragHandle:"k-task-draghandle",taskContent:"k-task-content",taskTemplate:"k-task-template",taskActions:"k-task-actions",taskDelete:"k-task-delete",taskComplete:"k-task-complete",taskDetails:"k-task-details",taskDetailsPercent:"k-task-pct",link:"k-link",icon:"k-icon",iconDelete:"k-i-close",taskResizeHandle:"k-resize-handle",taskResizeHandleWest:"k-resize-w",taskResizeHandleEast:"k-resize-e",taskSummaryProgress:"k-task-summary-progress",taskSummaryComplete:"k-task-summary-complete",line:"k-line",lineHorizontal:"k-line-h",lineVertical:"k-line-v",arrowWest:"k-arrow-w",arrowEast:"k-arrow-e",dragHint:"k-drag-hint",dependencyHint:"k-dependency-hint",tooltipWrapper:"k-widget k-tooltip k-popup k-group k-reset",tooltipContent:"k-tooltip-content",tooltipCallout:"k-callout k-callout-s",callout:"k-callout",marquee:"k-marquee k-gantt-marquee",marqueeColor:"k-marquee-color"};var g=kendo.ui.GanttView=d.extend({init:function(R,Q){d.fn.init.call(this,R,Q);this.title=this.options.title||this.options.name;this.header=this.element.find(m+g.styles.gridHeader);this.content=this.element.find(m+g.styles.gridContent);this.contentWidth=this.content.width();this._workDays=M(this.options);this._headerTree=Q.headerTree;this._taskTree=Q.taskTree;this._taskTemplate=Q.taskTemplate?kendo.template(Q.taskTemplate,i({},kendo.Template,Q.templateSettings)):null;this._dependencyTree=Q.dependencyTree;this._taskCoordinates={};this._currentTime()},destroy:function(){d.fn.destroy.call(this);clearTimeout(this._tooltipTimeout);this.headerRow=null;this.header=null;this.content=null;this._dragHint=null;this._resizeHint=null;this._resizeTooltip=null;this._taskTooltip=null;this._percentCompleteResizeTooltip=null;this._headerTree=null;this._taskTree=null;this._dependencyTree=null},options:{showWorkHours:false,showWorkDays:false,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,hourSpan:1,slotSize:100,currentTimeMarker:{updateInterval:10000}},renderLayout:function(){this._slots=this._createSlots();this._tableWidth=this._calculateTableWidth();this.createLayout(this._layout());this._slotDimensions();this._adjustHeight();this.content.find(m+g.styles.dependenciesWrapper).width(this._tableWidth)},_adjustHeight:function(){this.content.height(this.element.height()-I(this.header))},createLayout:function(T){var U=this._headers(T);var R=this._colgroup();var Q=this._headerTree;var V=z("thead",null,U);var S=z("table",{style:{width:this._tableWidth+"px"}},[R,V]);Q.render([S]);this.headerRow=this.header.find("table:first tr").last()},_slotDimensions:function(){var T=this.headerRow[0].children;var R=this._timeSlots();var V;var U;for(var Q=0,S=T.length;Q<S;Q++){U=T[Q];V=R[Q];V.offsetLeft=U.offsetLeft;V.offsetWidth=U.offsetWidth}},render:function(R){var S=R.length;var Z=g.styles;var W;var V=this._rowsTable(S);var U=this._columnsTable(S);var Y=this._tasksTable(R);var Q=this.options.currentTimeMarker;var X=this.options.calculatedSize;var T;this._taskTree.render([V,U,Y]);W=this.content.find(m+Z.rowsTable);if(X){T=X.row*R.length;this.content.find(m+Z.tasksTable).height(T);W.height(T)}this._contentHeight=W.height();this._rowHeight=X?X.row:this._contentHeight/W.find("tr").length;this.content.find(m+Z.columnsTable).height(this._contentHeight);if(Q!==false&&Q.updateInterval!==undefined){this._renderCurrentTime()}},_rowsTable:function(R){var U=[];var V;var T=g.styles;var Q=[null,{className:T.alt}];for(var S=0;S<R;S++){V=z("tr",Q[S%2],[z("td",null,[C("\xA0")])]);U.push(V)}return this._createTable(1,U,{className:T.rowsTable})},_columnsTable:function(){var Y=[];var Z;var X=g.styles;var T=this._timeSlots();var V=T.length;var W;var Q;var U=0;var R;for(var S=0;S<V;S++){W=T[S];R={};Q=W.span;U+=Q;if(Q!==1){R.colspan=Q}if(W.isNonWorking){R.className=X.nonWorking}Y.push(z("td",R,[C("\xA0")]))}Z=z("tr",null,Y);return this._createTable(U,[Z],{className:X.columnsTable})},_tasksTable:function(ab){var Y=[];var W;var Q;var aj;var ag;var X=g.styles;var S=this._taskCoordinates={};var aa=this._calculateMilestoneWidth();var af=Math.round(aa.width);var T=this.options.resourcesField;var R=[X.resource,X.resourceAlt];var ac=this.options.calculatedSize;var U;var Z=this._calculateResourcesMargin();var ah=this._calculateTaskBorderWidth();var V;var ai=function(am){var al;var ak;al=aj.left;ak=al+aj.width;if(ag.isMilestone()){al-=af/2;ak=al+af}S[ag.id]={start:al,end:ak,rowIndex:am}};for(var ae=0,ad=ab.length;ae<ad;ae++){ag=ab[ae];aj=this._taskPosition(ag);aj.borderWidth=ah;W=z("tr",null);Q=z("td");if(ag.start<=this.end&&ag.end>=this.start){Q.children.push(this._renderTask(ab[ae],aj));if(ag[T]&&ag[T].length){if(P){U=this._tableWidth-aj.left}else{U=Math.max(aj.width||aa.clientWidth,0)+aj.left}V={width:this._tableWidth-(U+Z)+"px"};V[P?"right":"left"]=U+"px";if(ac){V.height=ac.cell+"px"}Q.children.push(z("div",{className:X.resourcesWrap,style:V},this._renderResources(ag[T],R[ae%2])))}ai(ae)}W.children.push(Q);Y.push(W)}return this._createTable(1,Y,{className:g.styles.tasksTable})},_createTable:function(W,U,T){var V=[];var Q;var R;for(var S=0;S<W;S++){V.push(z("col"))}Q=z("colgroup",null,V);R=z("tbody",null,U);if(!T.style){T.style={}}T.style.width=this._tableWidth+"px";return z("table",T,[Q,R])},_calculateTableWidth:function(){var V=this._timeSlots();var R=0;var S=0;var T;var Q;for(var U=0,W=V.length;U<W;U++){T=V[U].span;S+=T;if(T>R){R=T}}Q=Math.round(S*this.options.slotSize/R);return Q},_calculateMilestoneWidth:function(){var Q;var R=g.styles.task+" "+g.styles.taskMilestone;var S=u("<div class='"+R+"' style='visibility: hidden; position: absolute'>");var T;this.content.append(S);T=S[0].getBoundingClientRect();Q={width:T.right-T.left,clientWidth:S[0].clientWidth};S.remove();return Q},_calculateResourcesMargin:function(){var Q;var R=u("<div class='"+g.styles.resourcesWrap+"' style='visibility: hidden; position: absolute'>");this.content.append(R);Q=parseInt(R.css(P?"margin-right":"margin-left"),10);R.remove();return Q},_calculateTaskBorderWidth:function(){var T;var S=g.styles.task+" "+g.styles.taskSingle;var R=u("<div class='"+S+"' style='visibility: hidden; position: absolute'>");var Q;this.content.append(R);Q=kendo.getComputedStyles(R[0],["border-left-width"]);T=parseFloat(Q["border-left-width"],10);R.remove();return T},_renderTask:function(T,Y){var Z;var S;var U=this.options.editable;var X;var W=Y.left;var ab=g.styles;var V=ab.taskWrap;var aa=this.options.calculatedSize;var Q={};var R={className:V,style:{left:W+"px"}};if(aa){R.style.height=aa.cell+"px"}if(T.summary){S=this._renderSummary(T,Y)}else{if(T.isMilestone()){S=this._renderMilestone(T,Y);R.className+=" "+ab.taskMilestoneWrap}else{S=this._renderSingleTask(T,Y)}}Z=z("div",R,[S]);if(U&&U.dependencyCreate!==false){Z.children.push(z("div",{className:ab.taskDot+" "+ab.taskDotStart}));Z.children.push(z("div",{className:ab.taskDot+" "+ab.taskDotEnd}))}if(!T.summary&&!T.isMilestone()&&U&&U.dragPercentComplete!==false&&U.update!==false&&this._taskTemplate===null){X=Math.round(Y.width*T.percentComplete);Q[P?"right":"left"]=X+"px";Z.children.push(z("div",{className:ab.taskDragHandle,style:Q}))}return Z},_renderSingleTask:function(Q,U){var X=g.styles;var V=Math.round(U.width*Q.percentComplete);var Y=[];var S;var R=this.options.editable;if(this._taskTemplate!==null){S=l(this._taskTemplate(Q))}else{S=C(Q.title);Y.push(z("div",{className:X.taskComplete,style:{width:V+"px"}}))}var W=z("div",{className:X.taskContent},[z("div",{className:X.taskTemplate},[S])]);Y.push(W);if(R){if(R.destroy!==false){W.children.push(z("span",{className:X.taskActions},[z("a",{className:X.link+" "+X.taskDelete,href:"#"},[z("span",{className:X.icon+" "+X.iconDelete})])]))}if(R.resize!==false&&R.update!==false){W.children.push(z("span",{className:X.taskResizeHandle+" "+X.taskResizeHandleWest}));W.children.push(z("span",{className:X.taskResizeHandle+" "+X.taskResizeHandleEast}))}}var T=z("div",{className:X.task+" "+X.taskSingle,"data-uid":Q.uid,style:{width:Math.max(U.width-U.borderWidth*2,0)+"px"}},Y);return T},_renderMilestone:function(Q){var S=g.styles;var R=z("div",{className:S.task+" "+S.taskMilestone,"data-uid":Q.uid});return R},_renderSummary:function(S,Q){var U=g.styles;var R=Math.round(Q.width*S.percentComplete);var T=z("div",{className:U.task+" "+U.taskSummary,"data-uid":S.uid,style:{width:Q.width+"px"}},[z("div",{className:U.taskSummaryProgress,style:{width:R+"px"}},[z("div",{className:U.taskSummaryComplete,style:{width:Q.width+"px"}})])]);return T},_renderResources:function(V,S){var R=[];var U;for(var Q=0,T=V.length;Q<T;Q++){U=V[Q];R.push(z("span",{className:S,style:{color:U.get("color")}},[C(U.get("name"))]))}if(P){R.reverse()}return R},_taskPosition:function(S){var R=Math.round;var T=R(this._offset(P?S.end:S.start));var Q=R(this._offset(P?S.start:S.end));return{left:T,width:Q-T}},_offset:function(R){var U=this._timeSlots();var W;var Q;var T;var S=0;var V;if(!U.length){return 0}V=this._slotIndex("start",R);W=U[V];if(W.end<R){S=W.offsetWidth}else{if(W.start<=R){Q=R-W.start;T=W.end-W.start;S=Q/T*W.offsetWidth}}if(P){S=W.offsetWidth+1-S}return W.offsetLeft+S},_slotIndex:function(W,V,R){var U=this._timeSlots();var T=0;var S=U.length-1;var Q;if(R){U=[].slice.call(U).reverse()}do{Q=Math.ceil((S+T)/2);if(U[Q][W]<V){T=Q}else{if(Q===S){Q--}S=Q}}while(T!==S);if(R){T=U.length-1-T}return T},_timeByPosition:function(R,Q,S){var W=this._slotByPosition(R);if(Q){return S?W.end:W.start}var U=R-u(m+g.styles.tasksTable).offset().left;var V=W.end-W.start;var T=U-W.offsetLeft;if(P){T=W.offsetWidth-T}return new Date(W.start.getTime()+V*(T/W.offsetWidth))},_slotByPosition:function(Q){var S=Q-u(m+g.styles.tasksTable).offset().left;var R=this._slotIndex("offsetLeft",S,P);return this._timeSlots()[R]},_renderDependencies:function(U){var T=[];var Q=this._dependencyTree;for(var S=0,R=U.length;S<R;S++){T.push.apply(T,this._renderDependency(U[S]))}Q.render(T)},_renderDependency:function(R){var T=this._taskCoordinates[R.predecessorId];var Q=this._taskCoordinates[R.successorId];var V;var W;if(!T||!Q){return[]}W="_render"+["FF","FS","SF","SS"][P?3-R.type:R.type];V=this[W](T,Q);for(var S=0,U=V.length;S<U;S++){V[S].attr["data-uid"]=R.uid}return V},_renderFF:function(S,R){var Q=this._dependencyFF(S,R,false);Q[Q.length-1].children[0]=this._arrow(true);return Q},_renderSS:function(S,R){var Q=this._dependencyFF(R,S,true);Q[0].children[0]=this._arrow(false);return Q.reverse()},_renderFS:function(S,R){var Q=this._dependencyFS(S,R,false);Q[Q.length-1].children[0]=this._arrow(false);return Q},_renderSF:function(S,R){var Q=this._dependencyFS(R,S,true);Q[0].children[0]=this._arrow(true);return Q.reverse()},_dependencyFF:function(af,V,Z){var X=this;var S=[];var W=0;var ab=0;var ae=0;var ac=0;var ad=Z?"start":"end";var ah;var R=2;var aa=1;var U=this._rowHeight;var T=10;var Q=af.rowIndex*U+Math.floor(U/2)-1;var aj=V.rowIndex*U+Math.floor(U/2)-1;var Y=g.styles;var ai=function(){S.push(X._line(Y.line+" "+Y.lineHorizontal,{left:W+"px",top:ab+"px",width:ae+"px"}))};var ag=function(){S.push(X._line(Y.line+" "+Y.lineVertical,{left:W+"px",top:ab+"px",height:ac+"px"}))};W=af[ad];ab=Q;ae=T;ah=V[ad]-af[ad];if(ah>0!==Z){ae=Math.abs(ah)+T}if(Z){W-=ae;ae-=aa;ai()}else{ai();W+=ae-R}if(aj<ab){ac=ab-aj;ac+=R;ab=aj;ag()}else{ac=aj-ab;ac+=R;ag();ab+=ac-R}ae=Math.abs(W-V[ad]);if(!Z){ae-=aa;W-=ae}ai();return S},_dependencyFS:function(ag,V,Z){var X=this;var S=[];var W=0;var ad=0;var af=0;var ae=0;var U=this._rowHeight;var aa=Math.floor(U/2);var T=10;var ab=2*T;var ai=V.start-ag.end;var R=2;var ac=1;var Q=ag.rowIndex*U+Math.floor(U/2)-1;var ak=V.rowIndex*U+Math.floor(U/2)-1;var Y=g.styles;var aj=function(){S.push(X._line(Y.line+" "+Y.lineHorizontal,{left:W+"px",top:ad+"px",width:af+"px"}))};var ah=function(){S.push(X._line(Y.line+" "+Y.lineVertical,{left:W+"px",top:ad+"px",height:ae+"px"}))};W=ag.end;ad=Q;af=T;if(Z){W+=ac;if(ai>ab){af=ai-(T-R)}af-=ac}aj();W+=af-R;if(ai<=ab){ae=Z?Math.abs(ak-Q)-aa:aa;if(ak<Q){ad-=ae;ae+=R;ah()}else{ah();ad+=ae}af=ag.end-V.start+ab;if(af<T){af=T}W-=af-R;aj()}if(ak<Q){ae=ad-ak;ad=ak;ae+=R;ah()}else{ae=ak-ad;ah();ad+=ae}af=V.start-W;if(!Z){af-=ac}aj();return S},_line:function(Q,R){return z("div",{className:Q,style:R})},_arrow:function(Q){return z("span",{className:Q?g.styles.arrowWest:g.styles.arrowEast})},_colgroup:function(){var S=this._timeSlots();var U=S.length;var V=[];for(var R=0;R<U;R++){for(var Q=0,T=S[R].span;Q<T;Q++){V.push(z("col"))}}return z("colgroup",null,V)},_createDragHint:function(Q){this._dragHint=Q.clone().addClass(g.styles.dragHint).css("cursor","move");Q.parent().append(this._dragHint)},_updateDragHint:function(R){var Q=this._offset(R);this._dragHint.css({left:Q})},_removeDragHint:function(){this._dragHint.remove();this._dragHint=null},_createResizeHint:function(R){var V=g.styles;var Q=this._taskCoordinates[R.id].rowIndex*this._rowHeight;var W;var T;var S=this.options;var U=S.messages;this._resizeHint=u(D({styles:V})).css({top:0,height:this._contentHeight});this.content.append(this._resizeHint);this._resizeTooltip=u(N({styles:V,start:R.start,end:R.end,messages:U.views,format:S.resizeTooltipFormat})).css({top:0,left:0});this.content.append(this._resizeTooltip);this._resizeTooltipWidth=F(this._resizeTooltip);W=I(this._resizeTooltip);T=Q-W;if(T<0){T=Q+this._rowHeight}this._resizeTooltipTop=T},_updateResizeHint:function(Q,T,X){var S=this._offset(P?T:Q);var Y=this._offset(P?Q:T);var R=Y-S;var Z=X!==P?S:Y;var W=this._tableWidth-kendo.support.scrollbar();var V=this._resizeTooltipWidth;var ab=this.options;var U=ab.messages;var aa=u(m+g.styles.tasksTable).offset().left-u(m+g.styles.tasksWrapper).offset().left;if(P){S+=aa}this._resizeHint.css({left:S,width:R});if(this._resizeTooltip){this._resizeTooltip.remove()}Z-=Math.round(V/2);if(Z<0){Z=0}else{if(Z+V>W){Z=W-V}}if(P){Z+=aa}this._resizeTooltip=u(N({styles:g.styles,start:Q,end:T,messages:U.views,format:ab.resizeTooltipFormat})).css({top:this._resizeTooltipTop,left:Z,"min-width":V}).appendTo(this.content)},_removeResizeHint:function(){this._resizeHint.remove();this._resizeHint=null;this._resizeTooltip.remove();this._resizeTooltip=null},_updatePercentCompleteTooltip:function(V,U,W){this._removePercentCompleteTooltip();var T=this._percentCompleteResizeTooltip=u(j({styles:g.styles,text:W})).appendTo(this.element);var Q=Math.round(F(T)/2);var S=T.find(m+g.styles.callout);var R=Math.round(F(S)/2);T.css({top:V-(I(T)+R),left:U-Q});S.css("left",Q-R)},_removePercentCompleteTooltip:function(){if(this._percentCompleteResizeTooltip){this._percentCompleteResizeTooltip.remove()}this._percentCompleteResizeTooltip=null},_updateDependencyDragHint:function(S,R,Q){this._removeDependencyDragHint();if(Q){this._creteVmlDependencyDragHint(S,R)}else{this._creteDependencyDragHint(S,R)}},_creteDependencyDragHint:function(W,V){var T=g.styles;var R=V.x-W.x;var Q=V.y-W.y;var S=Math.sqrt(R*R+Q*Q);var U=Math.atan(Q/R);if(R<0){U+=Math.PI}u("<div class='"+T.line+" "+T.lineHorizontal+" "+T.dependencyHint+"'></div>").css({top:W.y,left:W.x,width:S,"transform-origin":"0% 0","-ms-transform-origin":"0% 0","-webkit-transform-origin":"0% 0",transform:"rotate("+U+"rad)","-ms-transform":"rotate("+U+"rad)","-webkit-transform":"rotate("+U+"rad)"}).appendTo(this.content)},_creteVmlDependencyDragHint:function(S,R){var Q=u("<kvml:line class='"+g.styles.dependencyHint+"' style='position:absolute; top: 0px; left: 0px;' strokecolor='black' strokeweight='2px' from='"+S.x+"px,"+S.y+"px' to='"+R.x+"px,"+R.y+"px'></kvml:line>").appendTo(this.content);Q[0].outerHTML=Q[0].outerHTML},_removeDependencyDragHint:function(){this.content.find(m+g.styles.dependencyHint).remove()},_createTaskTooltip:function(R,V,ab){var ac=g.styles;var af=this.options;var Y=this.content;var U=Y.offset();var Q=Y.width();var S=kendo.scrollLeft(Y);var ae=u(V).parents("tr").first();var X=ae.offset();var aa=af.tooltip&&af.tooltip.template?kendo.template(af.tooltip.template):J;var T=P?ab-(U.left+S+kendo.support.scrollbar()):ab-(U.left-S);var Z=X.top+I(ae)-U.top+Y.scrollTop();var ad=this._taskTooltip=u('<div style="z-index: 100002;" class="'+ac.tooltipWrapper+'" ><div class="'+ac.taskContent+'"></div></div>');var W;ad.css({left:T,top:Z}).appendTo(Y).find(m+ac.taskContent).append(aa({styles:ac,task:R,messages:af.messages.views}));if(I(ad)<X.top-U.top){ad.css("top",X.top-U.top-I(ad)+Y.scrollTop())}W=F(ad);if(W+T-S>Q){T-=W;if(T<S){T=S+Q-(W+17)}ad.css("left",T)}},_removeTaskTooltip:function(){if(this._taskTooltip){this._taskTooltip.remove()}this._taskTooltip=null},_scrollTo:function(X){var U=X.offset().left;var ac=X.width();var Y=U+ac;var ag=X.closest("tr");var S=ag.offset().top;var R=ag.height();var T=S+R;var aa=this.content;var V=aa.offset();var ae=V.top;var ad=aa.height();var af=ae+ad;var W=V.left;var Q=aa.width();var ab=W+Q;var Z=kendo.support.scrollbar();if(S<ae){aa.scrollTop(aa.scrollTop()+(S-ae))}else{if(T>af){aa.scrollTop(aa.scrollTop()+(T+Z-af))}}if(U<W&&ac>Q&&Y<ab||Y>ab&&ac<Q){aa.scrollLeft(aa.scrollLeft()+(Y+Z-ab))}else{if(Y>ab&&ac>Q&&U>W||U<W&&ac<Q){aa.scrollLeft(aa.scrollLeft()+(U-W))}}},_scrollToDate:function(Q){var T=this.start;var R=this.end;var S;if(Q>=T&&Q<R){S=this._offset(Q);if(kendo.support.isRtl(this.element)){S=this._tableWidth-S}kendo.scrollLeft(this.content,S)}},_timeSlots:function(){if(!this._slots||!this._slots.length){return[]}return this._slots[this._slots.length-1]},_headers:function(Y){var aa=[];var Q;var R;var U;var V;var Z=g.styles;for(var T=0,S=Y.length;T<S;T++){Q=Y[T];R=[];for(var X=0,W=Q.length;X<W;X++){U=Q[X];V=C(U.text);R.push(z("th",{colspan:U.span,className:Z.header+(U.isNonWorking?" "+Z.nonWorking:"")},[V]))}aa.push(z("tr",null,R))}return aa},_hours:function(Q,S){var R;var U=[];var Z=this.options;var X=Z.workDayStart.getHours();var V=Z.workDayEnd.getHours();var Y;var W;var T=Z.hourSpan;Q=new Date(Q);S=new Date(S);while(Q<S){R=new Date(Q);W=R.getHours();Y=W>=X&&W<V;R.setHours(R.getHours()+T);if(W==R.getHours()){R.setHours(R.getHours()+2*T)}if(!Z.showWorkHours||Y){U.push({start:Q,end:R,isNonWorking:!Y,span:1})}Q=R}return U},_days:function(U,Q){var S;var R=[];var T;U=new Date(U);Q=new Date(Q);while(U<Q){S=Q<kendo.date.nextDay(U)?Q:kendo.date.nextDay(U);T=this._isWorkDay(U);if(!this.options.showWorkDays||T){R.push({start:U,end:S,isNonWorking:!T,span:1})}U=S}return R},_weeks:function(W,Q){var V;var T=[];var R=this.calendarInfo().firstDay;var U;var S;W=new Date(W);Q=new Date(Q);while(W<Q){V=kendo.date.dayOfWeek(kendo.date.addDays(W,1),R,1);if(V>Q){V=Q}U=this._days(W,V);S=U.length;if(S>0){T.push({start:U[0].start,end:U[S-1].end,span:S})}W=V}return T},_months:function(W,R){var V;var Q;var T=[];var U;var S;W=new Date(W);R=new Date(R);while(W<R){V=new Date(W);Q=kendo.date.firstDayOfMonth(new Date(V.setMonth(V.getMonth()+1)));V=R<Q?R:Q;U=this._days(W,V);S=U.length;if(S>0){T.push({start:U[0].start,end:U[S-1].end,span:S})}W=V}return T},_years:function(V,R){var U;var S;var Q;var T=[];V=new Date(V);R=new Date(R);while(V<R){U=new Date(V);U=kendo.date.firstDayOfMonth(new Date(U.setMonth(12)));if(U>=R){U=R}Q=U.getMonth()||12;S=Q-V.getMonth();T.push({start:V,end:U,span:S});V=U}return T},_slotHeaders:function(U,T){var S=[];var V;for(var R=0,Q=U.length;R<Q;R++){V=U[R];S.push({text:T(V),isNonWorking:!!V.isNonWorking,span:V.span})}return S},_isWorkDay:function(S){var R=S.getDay();var U=this._workDays;for(var T=0,Q=U.length;T<Q;T++){if(U[T]===R){return true}}return false},calendarInfo:function(){return kendo.getCulture().calendars.standard},_renderCurrentTime:function(){var S=this._getCurrentTime();var Q=this._offset(S);var R=u("<div class='k-current-time'></div>");var T=g.styles;var W=u(m+T.tasksWrapper);var V=u(m+T.tasksTable);var U;if(!this.content||!this._timeSlots().length){return}this.content.find(".k-current-time").remove();U=this._timeSlots()[this._slotIndex("start",S)];if(S<U.start||S>U.end){return}if(W.length&&V.length){Q+=V.offset().left-W.offset().left}R.css({left:Q+"px",top:"0px",width:"1px",height:this._contentHeight+"px"}).appendTo(this.content)},_getCurrentTime:function(){return new Date()},_currentTime:function(){var Q=this.options.currentTimeMarker;if(Q!==false&&Q.updateInterval!==undefined){this._renderCurrentTime();this._currentTimeUpdateTimer=setInterval(G(this._renderCurrentTime,this),Q.updateInterval)}}});i(true,g,{styles:r});kendo.ui.GanttDayView=g.extend({name:"day",options:{timeHeaderTemplate:q,dayHeaderTemplate:o,resizeTooltipFormat:"h:mm tt ddd, MMM d"},range:function(Q){var R=this.options.range;this.start=kendo.date.getDate(Q.start);this.end=kendo.date.getDate(Q.end);if(kendo.date.getMilliseconds(Q.end)>0||this.end.getTime()===this.start.getTime()){this.end=kendo.date.addDays(this.end,1)}if(R&&R.start){this.start=kendo.date.getDate(R.start);this.start.setHours(R.start.getHours())}if(R&&R.end){this.end=kendo.date.getDate(R.end);this.end.setHours(R.end.getHours())}},_createSlots:function(){var W;var V;var U;var R;var T=[];W=this._days(this.start,this.end);U=[];for(var S=0,Q=W.length;S<Q;S++){V=W[S];R=this._hours(V.start,V.end);V.span=R.length;U.push.apply(U,R)}T.push(W);T.push(U);return T},_layout:function(){var R=[];var Q=this.options;R.push(this._slotHeaders(this._slots[0],kendo.template(Q.dayHeaderTemplate)));R.push(this._slotHeaders(this._slots[1],kendo.template(Q.timeHeaderTemplate)));return R}});kendo.ui.GanttWeekView=g.extend({name:"week",options:{dayHeaderTemplate:o,weekHeaderTemplate:c,resizeTooltipFormat:"h:mm tt ddd, MMM d"},range:function(S){var U=this.options.range;var Q=this.calendarInfo();var R=Q.firstDay;var V=S.end;var T;if(R===V.getDay()){V.setDate(V.getDate()+7)}this.start=kendo.date.getDate(kendo.date.dayOfWeek(S.start,R,-1));this.end=kendo.date.getDate(kendo.date.dayOfWeek(V,R,1));if(U&&U.start){this.start=kendo.date.getDate(U.start)}if(U&&U.end){T=new Date(U.end);if(kendo.date.getDate(T)<U.end){this.end=kendo.date.getDate(new Date(T.setDate(T.getDate()+1)))}else{this.end=kendo.date.getDate(T)}}},_createSlots:function(){var Q=[];Q.push(this._weeks(this.start,this.end));Q.push(this._days(this.start,this.end));return Q},_layout:function(){var R=[];var Q=this.options;R.push(this._slotHeaders(this._slots[0],kendo.template(Q.weekHeaderTemplate)));R.push(this._slotHeaders(this._slots[1],kendo.template(Q.dayHeaderTemplate)));return R}});kendo.ui.GanttMonthView=g.extend({name:"month",options:{weekHeaderTemplate:c,monthHeaderTemplate:A,resizeTooltipFormat:"dddd, MMM d, yyyy"},range:function(Q){var S=this.options.range;var R;this.start=kendo.date.firstDayOfMonth(Q.start);this.end=kendo.date.addDays(kendo.date.getDate(kendo.date.lastDayOfMonth(Q.end)),1);if(S&&S.start){this.start=kendo.date.getDate(S.start)}if(S&&S.end){R=new Date(S.end);if(kendo.date.getDate(R)<S.end){this.end=kendo.date.getDate(new Date(R.setDate(R.getDate()+1)))}else{this.end=kendo.date.getDate(R)}}},_createSlots:function(){var Q=[];Q.push(this._months(this.start,this.end));Q.push(this._weeks(this.start,this.end));return Q},_layout:function(){var R=[];var Q=this.options;R.push(this._slotHeaders(this._slots[0],kendo.template(Q.monthHeaderTemplate)));R.push(this._slotHeaders(this._slots[1],kendo.template(Q.weekHeaderTemplate)));return R}});kendo.ui.GanttYearView=g.extend({name:"year",options:{yearHeaderTemplate:v,monthHeaderTemplate:A,resizeTooltipFormat:"dddd, MMM d, yyyy"},range:function(Q){var S=this.options.range;var R;this.start=kendo.date.firstDayOfMonth(new Date(Q.start.setMonth(0)));this.end=kendo.date.firstDayOfMonth(new Date(Q.end.setMonth(12)));if(S&&S.start){this.start=kendo.date.firstDayOfMonth(S.start)}if(S&&S.end){R=kendo.date.firstDayOfMonth(S.end);this.end=kendo.date.getDate(new Date(R.setMonth(R.getMonth()+1)))}},_createSlots:function(){var R=[];var Q=this._months(this.start,this.end);u(Q).each(function(S,T){T.span=1});R.push(this._years(this.start,this.end));R.push(Q);return R},_layout:function(){var R=[];var Q=this.options;R.push(this._slotHeaders(this._slots[0],kendo.template(Q.yearHeaderTemplate)));R.push(this._slotHeaders(this._slots[1],kendo.template(Q.monthHeaderTemplate)));return R}});var f={wrapper:"k-timeline k-grid k-widget",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",tasksWrapper:"k-gantt-tables",dependenciesWrapper:"k-gantt-dependencies",task:"k-task",line:"k-line",taskResizeHandle:"k-resize-handle",taskResizeHandleWest:"k-resize-w",taskDragHandle:"k-task-draghandle",taskComplete:"k-task-complete",taskDelete:"k-task-delete",taskWrapActive:"k-task-wrap-active",taskWrap:"k-task-wrap",taskDot:"k-task-dot",taskDotStart:"k-task-start",taskDotEnd:"k-task-end",hovered:"k-state-hover",selected:"k-state-selected",origin:"k-origin"};var h=kendo.ui.GanttTimeline=d.extend({init:function(R,Q){d.fn.init.call(this,R,Q);if(!this.options.views||!this.options.views.length){this.options.views=["day","week","month"]}P=kendo.support.isRtl(R);this._wrapper();this._domTrees();this._views();this._selectable();this._draggable();this._resizable();this._percentResizeDraggable();this._createDependencyDraggable();this._attachEvents();this._tooltip()},options:{name:"GanttTimeline",messages:{views:{day:"Day",week:"Week",month:"Month",year:"Year",start:"Start",end:"End"}},snap:true,selectable:true,editable:true},destroy:function(){d.fn.destroy.call(this);clearTimeout(this._tooltipTimeout);if(this._currentTimeUpdateTimer){clearInterval(this._currentTimeUpdateTimer)}this._unbindView(this._selectedView);if(this._moveDraggable){this._moveDraggable.destroy()}if(this._resizeDraggable){this._resizeDraggable.destroy()}if(this._percentDraggable){this._percentDraggable.destroy()}if(this._dependencyDraggable){this._dependencyDraggable.destroy()}if(this.touch){this.touch.destroy()}this._headerTree=null;this._taskTree=null;this._dependencyTree=null;this.wrapper.off(w);kendo.destroy(this.wrapper)},_wrapper:function(){var S=h.styles;var R=this;var Q=this.options;var T=function(){var X=typeof Q.rowHeight===H?Q.rowHeight:Q.rowHeight+"px";var W=u(kendo.format(y,X));var U;var Y;var V=R.wrapper.find(m+S.tasksWrapper);V.append(W);U=I(W.find("tr"));Y=W.find("td").height();W.remove();return{row:U,cell:Y}};this.wrapper=this.element.addClass(S.wrapper).append("<div class='"+S.gridHeader+"'><div class='"+S.gridHeaderWrap+"'></div></div>").append("<div class='"+S.gridContentWrap+"'><div class='"+S.tasksWrapper+"'></div><div class='"+S.dependenciesWrapper+"'></div></div>");if(Q.rowHeight){this._calculatedSize=T()}},_domTrees:function(){var R=h.styles;var Q=kendo.dom.Tree;var S=this.wrapper;this._headerTree=new Q(S.find(m+R.gridHeaderWrap)[0]);this._taskTree=new Q(S.find(m+R.tasksWrapper)[0]);this._dependencyTree=new Q(S.find(m+R.dependenciesWrapper)[0])},_views:function(){var S=this.options.views;var R;var U;var T;var X;var W;this.views={};for(var V=0,Q=S.length;V<Q;V++){R=S[V];U=K(R);if(U&&R.selectable===false){continue}T=U?typeof R.type!=="string"?R.title:R.type:R;X=t[T];if(X){if(U){R.type=X.type}X.title=this.options.messages.views[T]}R=i({title:T},X,U?R:{});if(T){this.views[T]=R;if(!W||R.selected){W=T}}}if(W){this._selectedViewName=W}},view:function(Q){if(Q){this._selectView(Q);this.trigger("navigate",{view:Q,action:"changeView"})}return this._selectedView},_selectView:function(Q){if(Q&&this.views[Q]){if(this._selectedView){this._unbindView(this._selectedView)}this._selectedView=this._initializeView(Q);this._selectedViewName=Q}},_viewByIndex:function(S){var R;var Q=this.views;for(R in Q){if(!S){return R}S--}},_initializeView:function(T){var R=this.views[T];if(R){var U=R.type;if(typeof U==="string"){U=kendo.getter(R.type)(window)}if(U){var S={};i(S,this.options.range,R.range);var Q=R.date||this.options.date;R=new U(this.wrapper,O(i(true,{headerTree:this._headerTree,taskTree:this._taskTree,dependencyTree:this._dependencyTree,calculatedSize:this._calculatedSize},R,this.options,{date:Q,range:S})))}else{throw new Error("There is no such view")}}return R},_unbindView:function(Q){if(Q){Q.destroy()}},_range:function(U){var S={field:"start",dir:"asc"};var R={field:"end",dir:"desc"};if(!U||!U.length){return{start:new Date(),end:new Date()}}var T=new x(U).sort(S).toArray()[0].start||new Date();var Q=new x(U).sort(R).toArray()[0].end||new Date();return{start:new Date(T),end:new Date(Q)}},_render:function(T){var Q=this.view();var R=this._range(T);var S=Q.options.date;this._tasks=T;Q.range(R);Q.renderLayout();Q.render(T);if(S){Q._scrollToDate(S)}},_renderDependencies:function(Q){this.view()._renderDependencies(Q)},_taskByUid:function(S){var U=this._tasks;var T=U.length;var Q;for(var R=0;R<T;R++){Q=U[R];if(Q.uid===S){return Q}}},_draggable:function(){var W=this;var V;var R;var Q;var X;var U=this.options.snap;var Y=h.styles;var S=this.options.editable;var T=function(){W.view()._removeDragHint();if(V){V.css("opacity",1)}V=null;R=null;W.dragInProgress=false};if(!S||S.move===false||S.update===false){return}this._moveDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:m+Y.task,holdToDrag:kendo.support.mobileOS,ignore:m+Y.taskResizeHandle});this._moveDraggable.bind("dragstart",function(aa){var Z=W.view();V=aa.currentTarget.parent();R=W._taskByUid(aa.currentTarget.attr("data-uid"));if(W.trigger("moveStart",{task:R})){aa.preventDefault();return}Q=R.start;X=Z._timeByPosition(aa.x.location,U)-Q;Z._createDragHint(V);V.css("opacity",0.5);clearTimeout(W._tooltipTimeout);W.dragInProgress=true}).bind("drag",kendo.throttle(function(ac){if(!W.dragInProgress){return}var Z=W.view();var aa=new Date(Z._timeByPosition(ac.x.location,U)-X);var ab=aa;if(!W.trigger("move",{task:R,start:aa})){Q=aa;if(P){ab=new Date(Q.getTime()+R.duration())}Z._updateDragHint(ab)}},15)).bind("dragend",function(){W.trigger("moveEnd",{task:R,start:Q});T()}).bind("dragcancel",function(){T()}).userEvents.bind("select",function(){p()})},_resizable:function(){var X=this;var W;var R;var Q;var T;var Y;var V=this.options.snap;var Z=h.styles;var S=this.options.editable;var U=function(){X.view()._removeResizeHint();W=null;R=null;X.dragInProgress=false};if(!S||S.resize===false||S.update===false){return}this._resizeDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:m+Z.taskResizeHandle,holdToDrag:false});this._resizeDraggable.bind("dragstart",function(aa){Y=aa.currentTarget.hasClass(Z.taskResizeHandleWest);if(P){Y=!Y}W=aa.currentTarget.closest(m+Z.task);R=X._taskByUid(W.attr("data-uid"));if(X.trigger("resizeStart",{task:R})){aa.preventDefault();return}Q=R.start;T=R.end;X.view()._createResizeHint(R);clearTimeout(X._tooltipTimeout);X.dragInProgress=true}).bind("drag",kendo.throttle(function(ac){if(!X.dragInProgress){return}var aa=X.view();var ab=aa._timeByPosition(ac.x.location,V,!Y);if(Y){if(ab<T){Q=ab}else{Q=T}}else{if(ab>Q){T=ab}else{T=Q}}if(!X.trigger("resize",{task:R,start:Q,end:T})){aa._updateResizeHint(Q,T,Y)}},15)).bind("dragend",function(){X.trigger("resizeEnd",{task:R,resizeStart:Y,start:Q,end:T});U()}).bind("dragcancel",function(){U()}).userEvents.bind("select",function(){p()})},_percentResizeDraggable:function(){var V=this;var R;var Q;var aa;var Z;var Y;var ae;var W;var U;var ac;var ad=h.styles;var ab;var S=this.options.editable;var T=function(){V.view()._removePercentCompleteTooltip();Q=null;R=null;V.dragInProgress=false};var X=function(af){Q.find(m+ad.taskComplete).width(af).end().siblings(m+ad.taskDragHandle).css(P?"right":"left",af)};if(!S||S.dragPercentComplete===false||S.update===false){return}this._percentDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:m+ad.taskDragHandle,holdToDrag:false});this._percentDraggable.bind("dragstart",function(af){if(V.trigger("percentResizeStart")){af.preventDefault();return}Q=af.currentTarget.siblings(m+ad.task);R=V._taskByUid(Q.attr("data-uid"));W=R.percentComplete;aa=Q.offset();Z=this.element.offset();Y=Q.find(m+ad.taskComplete).width();ae=F(Q);clearTimeout(V._tooltipTimeout);V.dragInProgress=true}).bind("drag",kendo.throttle(function(ag){if(!V.dragInProgress){return}ab=P?-ag.x.initialDelta:ag.x.initialDelta;var af=Math.max(0,Math.min(ae,Y+ab));W=Math.round(af/ae*100);X(af);U=aa.top-Z.top;ac=aa.left+af-Z.left;if(P){ac+=ae-2*af}V.view()._updatePercentCompleteTooltip(U,ac,W)},15)).bind("dragend",function(){V.trigger("percentResizeEnd",{task:R,percentComplete:W/100});T()}).bind("dragcancel",function(){X(Y);T()}).userEvents.bind("select",function(){p()})},_createDependencyDraggable:function(){var X=this;var R;var Z=u();var Y=u();var W;var V;var S=b.msie&&b.version<9;var aa=h.styles;var T=this.options.editable;var U=function(){R.css("display","").removeClass(aa.hovered);R.parent().removeClass(aa.origin);R=null;Q(false);Y=u();Z=u();X.view()._removeDependencyDragHint();X.dragInProgress=false};var Q=function(ab){if(!Y.hasClass(aa.origin)){Y.find(m+aa.taskDot).css("display",ab?"block":"");Z.toggleClass(aa.hovered,ab)}};if(!T||T.dependencyCreate===false){return}if(S&&document.namespaces){document.namespaces.add("kvml","urn:schemas-microsoft-com:vml","#default#VML")}this._dependencyDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:m+aa.taskDot,holdToDrag:false});this._dependencyDraggable.bind("dragstart",function(ad){if(X.trigger("dependencyDragStart")){ad.preventDefault();return}R=ad.currentTarget.css("display","block").addClass(aa.hovered);R.parent().addClass(aa.origin);var ac=R.offset();var ab=X.wrapper.find(m+aa.tasksWrapper).offset();W=Math.round(ac.left-ab.left+I(R)/2);V=Math.round(ac.top-ab.top+F(R)/2);clearTimeout(X._tooltipTimeout);X.dragInProgress=true}).bind("drag",kendo.throttle(function(af){if(!X.dragInProgress){return}X.view()._removeDependencyDragHint();var ae=u(kendo.elementUnderCursor(af));var ac=X.wrapper.find(m+aa.tasksWrapper).offset();var ad=af.x.location-ac.left;var ab=af.y.location-ac.top;X.view()._updateDependencyDragHint({x:W,y:V},{x:ad,y:ab},S);Q(false);Z=ae.hasClass(aa.taskDot)?ae:u();Y=ae.closest(m+aa.taskWrap);Q(true)},15)).bind("dragend",function(){if(Z.length){var ac=R.hasClass(aa.taskDotStart);var ad=Z.hasClass(aa.taskDotStart);var af=ac?ad?3:2:ad?1:0;var ae=X._taskByUid(R.siblings(m+aa.task).attr("data-uid"));var ab=X._taskByUid(Z.siblings(m+aa.task).attr("data-uid"));if(ae!==ab){X.trigger("dependencyDragEnd",{type:af,predecessor:ae,successor:ab})}}U()}).bind("dragcancel",function(){U()}).userEvents.bind("select",function(){p()})},_selectable:function(){var R=this;var Q=h.styles;if(this.options.selectable){this.wrapper.on(B+w,m+Q.task,function(S){S.stopPropagation();if(!S.ctrlKey){R.trigger("select",{uid:u(this).attr("data-uid")})}else{R.trigger("clear")}}).on(B+w,m+Q.taskWrap,function(T){T.stopPropagation();u(this).css("z-index","0");var S=u(document.elementFromPoint(T.clientX,T.clientY));if(S.hasClass(Q.line)){S.click()}u(this).css("z-index","")}).on(B+w,m+Q.tasksWrapper,function(){if(R.selectDependency().length>0){R.clearSelection()}else{R.trigger("clear")}}).on(B+w,m+Q.line,function(S){S.stopPropagation();R.selectDependency(this)})}},select:function(S){var Q=this.wrapper.find(S);var R=h.styles;if(Q.length){this.clearSelection();Q.addClass(R.selected);if(kendo.support.mobileOS){Q.parent().addClass(R.taskWrapActive)}return}return this.wrapper.find(m+R.task+m+R.selected)},selectDependency:function(T){var R=this.wrapper.find(T);var Q;var S=h.styles;if(R.length){this.clearSelection();this.trigger("clear");Q=u(R).attr("data-uid");this.wrapper.find(m+S.line+"[data-uid='"+Q+"']").addClass(S.selected);return}return this.wrapper.find(m+S.line+m+S.selected)},clearSelection:function(){var Q=h.styles;this.wrapper.find(m+Q.selected).removeClass(Q.selected);if(kendo.support.mobileOS){this.wrapper.find(m+Q.taskWrapActive).removeClass(Q.taskWrapActive)}},_attachEvents:function(){var S=this;var R=h.styles;var Q=this.options.editable;if(Q){this._tabindex();this.wrapper.on(B+w,m+R.taskDelete,function(T){S.trigger("removeTask",{uid:u(this).closest(m+R.task).attr("data-uid")});T.stopPropagation();T.preventDefault()}).on(L+w,function(V){var U;var T=S.options.editable;if(V.keyCode===s.DELETE&&T&&T.dependencyDestroy!==false){U=S.selectDependency();if(U.length){S.trigger("removeDependency",{uid:U.attr("data-uid")});S.clearSelection()}}});if(!kendo.support.mobileOS){this.wrapper.on(n+w,m+R.task,function(T){if(S.options.editable.update!==false){S.trigger("editTask",{uid:u(this).attr("data-uid")});T.stopPropagation();T.preventDefault()}})}else{this.touch=this.wrapper.kendoTouch({filter:m+R.task,doubletap:function(T){if(S.options.editable.update!==false){S.trigger("editTask",{uid:u(T.touch.currentTarget).attr("data-uid")})}}}).data("kendoTouch")}}},_tooltip:function(){var T=this;var R=this.options.tooltip;var S=h.styles;var U;var Q=function(V){U=V.clientX};if(R&&R.visible===false){return}if(!kendo.support.mobileOS){this.wrapper.on(e+w,m+S.task,function(){var W=this;var V=T._taskByUid(u(this).attr("data-uid"));if(T.dragInProgress){return}T._tooltipTimeout=setTimeout(function(){T.view()._createTaskTooltip(V,W,U)},800);u(this).on(E,Q)}).on(k+w,m+S.task,function(){clearTimeout(T._tooltipTimeout);T.view()._removeTaskTooltip();u(this).off(E,Q)})}else{this.wrapper.on(B+w,m+S.taskDelete,function(V){V.stopPropagation();T.view()._removeTaskTooltip()}).on(k+w,m+S.task,function(W){var V=u(W.relatedTarget).parents(m+S.taskWrap,m+S.task);if(V.length===0){T.view()._removeTaskTooltip()}});if(this.touch){this.touch.bind("tap",function(Y){var W=Y.touch.target;var V=T._taskByUid(u(W).attr("data-uid"));var X=Y.touch.x.client;if(T.view()._taskTooltip){T.view()._removeTaskTooltip()}T.view()._createTaskTooltip(V,W,X)}).bind("doubletap",function(){T.view()._removeTaskTooltip()})}}}});i(true,h,{styles:f})}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.gantt",["kendo.data","kendo.popup","kendo.window","kendo.resizable","kendo.gantt.list","kendo.gantt.timeline","kendo.grid","kendo.pdf"],a)}(function(){var a={id:"gantt",name:"Gantt",category:"web",description:"The Gantt component.",depends:["data","popup","resizable","window","gantt.list","gantt.timeline","grid"]};(function(L,s){var N=window.kendo;var p="matchMedia" in window;var e=N.support.browser;var M=N.support.mobileOS;var h=N.Observable;var j=N.ui.Widget;var P=N.data.DataSource;var t=N.data.ObservableObject;var v=N.data.ObservableArray;var Q=N.data.Query;var D=L.isArray;var ag=L.inArray;var u=N.isFunction;var ab=L.proxy;var r=L.extend;var aj=L.isPlainObject;var I=L.map;var Z=N._outerWidth;var ah=N._outerHeight;var G=N.keys;var c=3;var O=".kendoGantt";var b="p0";var F="tabIndex";var V="click";var i="width";var ac="string";var ae={down:{origin:"bottom left",position:"top left"},up:{origin:"top left",position:"bottom left"}};var T="aria-activedescendant";var H="gantt_active_cell";var f="action-option-focused";var B=".";var o="Are you sure you want to delete this task?";var y="Are you sure you want to delete this dependency?";var U=N.template('<button class="#=styles.buttonToggle#" type="button"><span class="#=styles.iconToggle#"></span></button>');var W='<button class="#=styles.button# #=className#" type="button" #if (action) {#data-action="#=action#"#}#><span class="#=iconClass#"></span><span>#=text#</span></button>';var Y='<a class="#=className#" #=attr# href="\\#">#=text#</a>';var n=N.template('<li class="#=styles.currentView# #=styles.viewButtonDefault#"><a href="\\#" class="#=styles.link#">&nbps;</a></li>');var z=N.template('<ul class="#=styles.viewsWrapper#">#for(var view in views){#<li class="#=styles.viewButtonDefault# #=styles.viewButton#-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a href="\\#" class="#=styles.link#">#=views[view].title#</a></li>#}#</ul>');var ai=N.template('<div class="#=styles.popupWrapper#"><ul class="#=styles.popupList#" role="listbox">#for(var i = 0, l = actions.length; i < l; i++){#<li class="#=styles.item#" data-action="#=actions[i].data#" role="option">#=actions[i].text#</span>#}#</ul></div>');var af=function(am,ao){var al={name:ao.field};var an=ao.model.fields[ao.field].validation;if(an&&aj(an)&&an.message){al[N.attr("dateCompare-msg")]=an.message}L('<input type="text" required '+N.attr("type")+'="date" '+N.attr("role")+'="datetimepicker" '+N.attr("bind")+'="value:'+ao.field+'" '+N.attr("validate")+"='true' />").attr(al).appendTo(am);L("<span "+N.attr("for")+'="'+ao.field+'" class="k-invalid-msg"/>').hide().appendTo(am)};var g=function(al,am){L('<a href="#" class="'+am.styles.button+'">'+am.messages.assignButton+"</a>").click(am.click).appendTo(al)};var A={wrapper:"k-widget k-gantt",rowHeight:"k-gantt-rowheight",listWrapper:"k-gantt-layout k-gantt-treelist",list:"k-gantt-treelist",timelineWrapper:"k-gantt-layout k-gantt-timeline",timeline:"k-gantt-timeline",splitBarWrapper:"k-splitbar k-state-default k-splitbar-horizontal k-splitbar-draggable-horizontal k-gantt-layout",splitBar:"k-splitbar",splitBarHover:"k-splitbar-horizontal-hover",popupWrapper:"k-list-container",popupList:"k-list k-reset",resizeHandle:"k-resize-handle",icon:"k-icon",item:"k-item",line:"k-line",buttonDelete:"k-gantt-delete",buttonCancel:"k-gantt-cancel",buttonSave:"k-gantt-update",buttonToggle:"k-gantt-toggle",primary:"k-primary",hovered:"k-state-hover",selected:"k-state-selected",focused:"k-state-focused",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",popup:{form:"k-popup-edit-form",editForm:"k-gantt-edit-form",formContainer:"k-edit-form-container",resourcesFormContainer:"k-resources-form-container",message:"k-popup-message",buttonsContainer:"k-edit-buttons k-state-default",button:"k-button",editField:"k-edit-field",editLabel:"k-edit-label",resourcesField:"k-gantt-resources"},toolbar:{headerWrapper:"k-floatwrap k-header k-gantt-toolbar",footerWrapper:"k-floatwrap k-header k-gantt-toolbar",toolbar:"k-gantt-toolbar",expanded:"k-state-expanded",views:"k-gantt-views",viewsWrapper:"k-reset k-header k-gantt-views",actions:"k-gantt-actions",button:"k-button k-button-icontext",buttonToggle:"k-button k-button-icon k-gantt-toggle",iconPlus:"k-icon k-i-plus",iconPdf:"k-icon k-i-file-pdf",iconToggle:"k-icon k-i-layout-1-by-4",viewButtonDefault:"k-state-default",viewButton:"k-view",currentView:"k-current-view",link:"k-link",pdfButton:"k-gantt-pdf",appendButton:"k-gantt-create"}};function l(al){return"["+N.attr("uid")+(al?"='"+al+"']":"]")}function ak(al){delete al.name;delete al.prefix;delete al.remove;delete al.edit;delete al.add;delete al.navigate;return al}function ad(am){if(am.filter("[name=end], [name=start]").length){var ar=am.attr("name");var ao=N.widgetInstance(am,N.ui);var aq={};var al=am;var ap;var an;while(al!==window&&!ap){al=al.parent();ap=al.data("kendoEditable")}an=ap?ap.options.model:null;if(!an){return true}aq.start=an.start;aq.end=an.end;aq[ar]=ao?ao.value():N.parseDate(am.value());return aq.start<=aq.end}return true}function d(an,aq){var ap=an.parents("["+N.attr("role")+'="gantt"]');var al=[];var am=R(ap);an.attr(F,0);if(aq){am.each(function(ar,at){al[ar]=L(at).scrollTop()})}try{an[0].setActive()}catch(ao){an[0].focus()}if(aq){am.each(function(ar,at){L(at).scrollTop(al[ar])})}}function R(al){return L(al).parentsUntil("body").filter(function(an,ao){var am=N.getComputedStyles(ao,["overflow"]);return am.overflow!="visible"}).add(window)}var S;var x=h.extend({init:function(am,al){h.fn.init.call(this);this.element=am;this.options=r(true,{},this.options,al);this._popup()},options:{direction:"down",navigatable:false},_current:function(ao){var an=J.styles;var am=this.list.find(B+an.focused);var al=am[ao]();if(al.length){am.removeClass(an.focused).removeAttr("id");al.addClass(an.focused).attr("id",f);this.list.find("ul").removeAttr(T).attr(T,f)}},_popup:function(){var am=this;var an=J.styles;var al="li"+B+an.item;var aq=B+an.toolbar.appendButton;var ap=this.options.messages.actions;var ao=this.options.navigatable;this.list=L(ai({styles:an,actions:[{data:"add",text:ap.addChild},{data:"insert-before",text:ap.insertBefore},{data:"insert-after",text:ap.insertAfter}]}));this.element.append(this.list);this.popup=new N.ui.Popup(this.list,r({anchor:this.element.find(aq),open:function(){am._adjustListWidth()},animation:this.options.animation},ae[this.options.direction]));this.element.on(V+O,aq,function(au){var at=L(this);var ar=at.attr(N.attr("action"));au.preventDefault();if(ar){am.trigger("command",{type:ar})}else{am.popup.open();if(ao){am.list.find("li:first").addClass(an.focused).attr("id",f).end().find("ul").attr({TABINDEX:0,"aria-activedescendant":f}).focus()}}});this.list.find(al).hover(function(){L(this).addClass(an.hovered)},function(){L(this).removeClass(an.hovered)}).end().on(V+O,al,function(){am.trigger("command",{type:L(this).attr(N.attr("action"))});am.popup.close()});if(ao){this.popup.bind("close",function(){am.list.find(al).removeClass(an.focused).end().find("ul").attr(F,0);am.element.parents("["+N.attr("role")+'="gantt"]').find(B+an.gridContent+" > table:first").focus()});this.list.find("ul").on("keydown"+O,function(at){var ar=at.keyCode;switch(ar){case G.UP:at.preventDefault();am._current("prev");break;case G.DOWN:at.preventDefault();am._current("next");break;case G.ENTER:am.list.find(B+an.focused).click();break;case G.ESC:at.preventDefault();am.popup.close();break}})}},_adjustListWidth:function(){var ap=this.list;var aq=J.styles;var ao=ap[0].style.width;var ar=this.element.find(B+aq.toolbar.appendButton);var al=Z(ap);var an;var am;if(!ap.data(i)&&ao){return}an=window.getComputedStyle?window.getComputedStyle(ar[0],null):0;am=an?parseFloat(an.width):Z(ar);if(an&&(e.mozilla||e.msie)){am+=parseFloat(an.paddingLeft)+parseFloat(an.paddingRight)+parseFloat(an.borderLeftWidth)+parseFloat(an.borderRightWidth)}if(ap.css("box-sizing")!=="border-box"){ao=am-(Z(ap)-ap.width())}else{ao=am}if(al>ao){ao=al}ap.css({fontFamily:ar.css("font-family"),width:ao}).data(i,ao)},destroy:function(){clearTimeout(this._focusTimeout);this.popup.destroy();this.element.off(O);this.list.off(O);this.unbind()}});var X=function(am,al){return function(an){an=D(an)?{data:an}:an;var ap=an||{};var ao=ap.data;ap.data=ao;if(!(ap instanceof am)&&ap instanceof P){throw new Error("Incorrect DataSource type. Only "+al+" instances are supported")}return ap instanceof am?ap:new am(ap)}};var m=N.data.Model.define({id:"id",fields:{id:{type:"number"},predecessorId:{type:"number"},successorId:{type:"number"},type:{type:"number"}}});var q=P.extend({init:function(al){P.fn.init.call(this,r(true,{},{schema:{modelBase:m,model:m}},al))},successors:function(al){return this._dependencies("predecessorId",al)},predecessors:function(al){return this._dependencies("successorId",al)},dependencies:function(an){var am=this.predecessors(an);var al=this.successors(an);am.push.apply(am,al);return am},_dependencies:function(an,ao){var am=this.view();var al={field:an,operator:"eq",value:ao};am=new Q(am).filter(al).toArray();return am}});q.create=X(q,"GanttDependencyDataSource");var aa=N.data.Model.define({duration:function(){var al=this.end;var am=this.start;return al-am},isMilestone:function(){return this.duration()===0},_offset:function(am){var ao=["start","end"];var an;for(var al=0;al<ao.length;al++){an=new Date(this.get(ao[al]).getTime()+am);this.set(ao[al],an)}},id:"id",fields:{id:{type:"number"},parentId:{type:"number",defaultValue:null,validation:{required:true}},orderId:{type:"number",validation:{required:true}},title:{type:"string",defaultValue:"New task"},start:{type:"date",validation:{required:true}},end:{type:"date",validation:{required:true,dateCompare:ad,message:"End date should be after or equal to the start date"}},percentComplete:{type:"number",validation:{required:true,min:0,max:1,step:0.01}},summary:{type:"boolean"},expanded:{type:"boolean",defaultValue:true}}});var k=P.extend({init:function(al){P.fn.init.call(this,r(true,{},{schema:{modelBase:aa,model:aa}},al))},remove:function(al){var an=al.get("parentId");var am=this.taskAllChildren(al);this._removeItems(am);al=P.fn.remove.call(this,al);this._childRemoved(an,al.get("orderId"));return al},add:function(al){if(!al){return}al=this._toGanttTask(al);return this.insert(this.taskSiblings(al).length,al)},insert:function(am,al){if(!al){return}al=this._toGanttTask(al);al.set("orderId",am);al=P.fn.insert.call(this,am,al);this._reorderSiblings(al,this.taskSiblings(al).length-1);this._resolveSummaryFields(this.taskParent(al));return al},taskChildren:function(am){var ap=this.view();var ao={field:"parentId",operator:"eq",value:null};var al=this._sort&&this._sort.length?this._sort:{field:"orderId",dir:"asc"};var an;if(!!am){an=am.get("id");if(an===s||an===null||an===""){return[]}ao.value=an}ap=new Q(ap).filter(ao).sort(al).toArray();return ap},taskAllChildren:function(al){var an=[];var am=this;var ao=function(ap){var aq=am.taskChildren(ap);an.push.apply(an,aq);I(aq,ao)};if(!!al){ao(al)}else{an=this.view()}return an},taskSiblings:function(al){if(!al){return null}var am=this.taskParent(al);return this.taskChildren(am)},taskParent:function(al){if(!al||al.get("parentId")===null){return null}return this.get(al.parentId)},taskLevel:function(al){var an=0;var am=this.taskParent(al);while(am!==null){an+=1;am=this.taskParent(am)}return an},taskTree:function(am){var ap=[];var aq;var ar=this.taskChildren(am);for(var ao=0,al=ar.length;ao<al;ao++){aq=ar[ao];ap.push(aq);if(aq.get("expanded")){var an=this.taskTree(aq);ap.push.apply(ap,an)}}return ap},update:function(al,ao){var ap=this;var am;var an=function(aw,ax){var av=ap.taskAllChildren(aw);for(var au=0,at=av.length;au<at;au++){av[au]._offset(ax)}};var ar=function(av){var au=av.field;var at=av.sender;switch(au){case"start":ap._resolveSummaryStart(ap.taskParent(at));an(at,at.get(au).getTime()-am.getTime());break;case"end":ap._resolveSummaryEnd(ap.taskParent(at));break;case"percentComplete":ap._resolveSummaryPercentComplete(ap.taskParent(at));break;case"orderId":ap._reorderSiblings(at,am);break}};if(ao.parentId!==s){am=al.get("parentId");if(am!==ao.parentId){al.set("parentId",ao.parentId);ap._childRemoved(am,al.get("orderId"));al.set("orderId",ap.taskSiblings(al).length-1);ap._resolveSummaryFields(ap.taskParent(al))}delete ao.parentId}al.bind("change",ar);for(var aq in ao){am=al.get(aq);al.set(aq,ao[aq])}al.unbind("change",ar)},_resolveSummaryFields:function(al){if(!al){return}this._updateSummary(al);if(!this.taskChildren(al).length){return}this._resolveSummaryStart(al);this._resolveSummaryEnd(al);this._resolveSummaryPercentComplete(al)},_resolveSummaryStart:function(al){var an=this;var am=function(at){var ar=an.taskChildren(at);var aq=ar[0].start.getTime();var au;for(var ap=1,ao=ar.length;ap<ao;ap++){au=ar[ap].start.getTime();if(au<aq){aq=au}}return new Date(aq)};this._updateSummaryRecursive(al,"start",am)},_resolveSummaryEnd:function(am){var an=this;var al=function(au){var ar=an.taskChildren(au);var ao=ar[0].end.getTime();var at;for(var aq=1,ap=ar.length;aq<ap;aq++){at=ar[aq].end.getTime();if(at>ao){ao=at}}return new Date(ao)};this._updateSummaryRecursive(am,"end",al)},_resolveSummaryPercentComplete:function(am){var an=this;var al=function(aq){var ao=an.taskChildren(aq);var ap=new Q(ao).aggregate([{field:"percentComplete",aggregate:"average"}]);return ap.percentComplete.average};this._updateSummaryRecursive(am,"percentComplete",al)},_updateSummaryRecursive:function(al,ao,ap){if(!al){return}var an=ap(al);al.set(ao,an);var am=this.taskParent(al);if(am){this._updateSummaryRecursive(am,ao,ap)}},_childRemoved:function(aq,am){var ap=aq===null?null:this.get(aq);var ao=this.taskChildren(ap);for(var an=am,al=ao.length;an<al;an++){ao[an].set("orderId",an)}this._resolveSummaryFields(ap)},_reorderSiblings:function(al,an){var am=al.get("orderId");var ar=am>an;var at=ar?an:am;var ap=ar?am:an;var au=ar?at:at+1;var aq=this.taskSiblings(al);ap=Math.min(ap,aq.length-1);for(var ao=at;ao<=ap;ao++){if(aq[ao]===al){continue}aq[ao].set("orderId",au);au+=1}},_updateSummary:function(am){if(am!==null){var al=this.taskChildren(am).length;am.set("summary",al>0)}},_toGanttTask:function(al){if(!(al instanceof aa)){var am=al;al=this._createNewModel();al.accept(am)}return al}});k.create=X(k,"GanttDataSource");r(true,N.data,{GanttDataSource:k,GanttTask:aa,GanttDependencyDataSource:q,GanttDependency:m});var E={desktop:{dateRange:af,resources:g}};var C=N.Observable.extend({init:function(am,al){N.Observable.fn.init.call(this);this.element=am;this.options=r(true,{},this.options,al);this.createButton=this.options.createButton},fields:function(ar,an){var aq=this;var am=this.options;var ap=am.messages.editor;var at=am.resources;var al;var ao=function(au){au.preventDefault();at.editor(aq.container.find(B+J.styles.popup.resourcesField),an)};if(am.editable.template){al=L.map(an.fields,function(av,au){return{field:au}})}else{al=[{field:"title",title:ap.title},{field:"start",title:ap.start,editor:ar.dateRange},{field:"end",title:ap.end,editor:ar.dateRange},{field:"percentComplete",title:ap.percentComplete,format:b}];if(an.get(at.field)){al.push({field:at.field,title:ap.resources,messages:ap,editor:ar.resources,click:ao,styles:J.styles.popup})}}return al},_buildEditTemplate:function(ar,at,ay){var am=this.options.resources;var ax=this.options.editable.template;var an=r({},N.Template,this.options.templateSettings);var aq=an.paramName;var au=J.styles.popup;var ap="";if(ax){if(typeof ax===ac){ax=window.unescape(ax)}ap+=N.template(ax,an)(ar)}else{for(var ao=0,al=at.length;ao<al;ao++){var aw=at[ao];ap+='<div class="'+au.editLabel+'"><label for="'+aw.field+'">'+(aw.title||aw.field||"")+"</label></div>";if(aw.field===am.field){ap+='<div class="'+au.resourcesField+'" style="display:none"></div>'}if(!ar.editable||ar.editable(aw.field)){ay.push(aw);ap+="<div "+N.attr("container-for")+'="'+aw.field+'" class="'+au.editField+'"></div>'}else{var av="#:";if(aw.field){aw=N.expr(aw.field,aq);av+=aw+"==null?'':"+aw}else{av+="''"}av+="#";av=N.template(av,an);ap+='<div class="'+au.editField+'">'+av(ar)+"</div>"}}}return ap}});var K=C.extend({destroy:function(){this.close();this.unbind()},editTask:function(al){this.editable=this._createPopupEditor(al)},close:function(){var am=this;var al=function(){if(am.editable){am.editable.destroy();am.editable=null;am.container=null}if(am.popup){am.popup.destroy();am.popup=null}};if(this.editable&&this.container.is(":visible")){am.trigger("close",{window:am.container});this.container.data("kendoWindow").bind("deactivate",al).close()}else{al()}},showDialog:function(am){var ar=am.buttons;var ap=J.styles.popup;var ao=N.format('<div class="{0}"><div class="{1}"><p class="{2}">{3}</p><div class="{4}">',ap.form,ap.formContainer,ap.message,am.text,ap.buttonsContainer);for(var an=0,aq=ar.length;an<aq;an++){ao+=this.createButton(ar[an])}ao+="</div></div></div>";var at=this.element;if(this.popup){this.popup.destroy()}var al=this.popup=L(ao).appendTo(at).eq(0).on("click",B+ap.button,function(av){av.preventDefault();al.close();var au=L(av.currentTarget).index();ar[au].click()}).kendoWindow({modal:true,resizable:false,draggable:false,title:am.title,visible:false,deactivate:function(){this.destroy();at.focus()}}).getKendoWindow();al.center().open()},_createPopupEditor:function(an){var ar=this;var aw={};var ao=this.options.messages;var at=J.styles;var au=at.popup;var ap=N.format('<div {0}="{1}" class="{2} {3}"><div class="{4}">',N.attr("uid"),an.uid,au.form,au.editForm,au.formContainer);var aq=this.fields(E.desktop,an);var av=[];ap+=this._buildEditTemplate(an,aq,av);ap+='<div class="'+au.buttonsContainer+'">';ap+=this.createButton({name:"update",text:ao.save,className:J.styles.primary});ap+=this.createButton({name:"cancel",text:ao.cancel});if(ar.options.editable.destroy!==false){ap+=this.createButton({name:"delete",text:ao.destroy})}ap+="</div></div></div>";var al=this.container=L(ap).appendTo(this.element).eq(0).kendoWindow(r({modal:true,resizable:false,draggable:true,title:ao.editor.editorTitle,visible:false,close:function(ax){if(ax.userTriggered){if(ar.trigger("cancel",{container:al,model:an})){ax.preventDefault()}}}},aw));var am=al.kendoEditable({fields:av,model:an,clearContainer:false,validateOnBlur:true,target:ar.options.target}).data("kendoEditable");N.cycleForm(al);if(!this.trigger("edit",{container:al,model:an})){al.data("kendoWindow").center().open();al.on(V+O,B+at.buttonCancel,function(ax){ax.preventDefault();ax.stopPropagation();ar.trigger("cancel",{container:al,model:an})});al.on(V+O,B+at.buttonSave,function(aC){aC.preventDefault();aC.stopPropagation();var ax=ar.fields(E.desktop,an);var az={};var aB;for(var ay=0,aA=ax.length;ay<aA;ay++){aB=ax[ay].field;az[aB]=an.get(aB)}ar.trigger("save",{container:al,model:an,updateInfo:az})});al.on(V+O,B+at.buttonDelete,function(ax){ax.preventDefault();ax.stopPropagation();ar.trigger("remove",{container:al,model:an})})}else{ar.trigger("cancel",{container:al,model:an})}return am}});var w=j.extend({init:function(am,al){j.fn.init.call(this,am,al);this.wrapper=this.element;this.model=this.options.model;this.resourcesField=this.options.resourcesField;this.createButton=this.options.createButton;this._initContainer();this._attachHandlers()},events:["save"],open:function(){this.window.center().open()},close:function(){this.window.bind("deactivate",ab(this.destroy,this)).close()},destroy:function(){this._dettachHandlers();this.grid.destroy();this.grid=null;this.window.destroy();this.window=null;j.fn.destroy.call(this);N.destroy(this.wrapper);this.element=this.wrapper=null},_attachHandlers:function(){var an=J.styles;var al=this.grid;var am=this._cancelProxy=ab(this._cancel,this);this.container.on(V+O,B+an.buttonCancel,this._cancelProxy);this._saveProxy=ab(this._save,this);this.container.on(V+O,B+an.buttonSave,this._saveProxy);this.window.bind("close",function(ao){if(ao.userTriggered){am(ao)}});al.wrapper.on(V+O,"input[type='checkbox']",function(){var ap=L(this);var ar=L(ap).closest("tr");var ao=al.dataSource.getByUid(ar.attr(N.attr("uid")));var aq=L(ap).is(":checked")?1:"";ao.set("value",aq)})},_dettachHandlers:function(){this._cancelProxy=null;this._saveProxy=null;this.container.off(O);this.grid.wrapper.off()},_cancel:function(al){al.preventDefault();this.close()},_save:function(al){al.preventDefault();this._updateModel();if(!this.wrapper.is(B+J.styles.popup.resourcesField)){this.trigger("save",{container:this.wrapper,model:this.model})}this.close()},_initContainer:function(){var am=this;var al=J.styles.popup;var an=N.format('<div class="{0} {1}"><div class="{2} {3}"/></div>"',al.form,al.editForm,al.formContainer,al.resourcesFormContainer);an=L(an);this.container=an.find(B+al.resourcesFormContainer);this.window=an.kendoWindow({modal:true,resizable:false,draggable:true,visible:false,title:this.options.messages.resourcesEditorTitle,open:function(){am.grid.resize(true)}}).data("kendoWindow");this._resourceGrid();this._createButtons()},_resourceGrid:function(){var an=this;var am=this.options.messages;var al=L('<div id="resources-grid"/>').appendTo(this.container);this.grid=new N.ui.Grid(al,{columns:[{field:"name",title:am.resourcesHeader,template:"<label><input type='checkbox' value='#=name#'# if (value > 0 && value !== null) {#checked='checked'# } #/>#=name#</labe>"},{field:"value",title:am.unitsHeader,template:function(ao){var aq=ao.format;var ap=ao.value!==null?ao.value:"";return aq?N.toString(ap,aq):ap}}],height:280,sortable:true,editable:true,filterable:true,dataSource:{data:an.options.data,schema:{model:{id:"id",fields:{id:{from:"id"},name:{from:"name",type:"string",editable:false},value:{from:"value",type:"number",defaultValue:""},format:{from:"format",type:"string"}}}}},save:function(ap){var ao=!!ap.values.value;ap.container.parent().find("input[type='checkbox']").prop("checked",ao)}})},_createButtons:function(){var ao=this.options.buttons;var am='<div class="'+J.styles.popup.buttonsContainer+'">';for(var al=0,an=ao.length;al<an;al++){am+=this.createButton(ao[al])}am+="</div>";this.container.append(am)},_updateModel:function(){var ap=[];var ao;var an=this.grid.dataSource.data();for(var al=0,am=an.length;al<am;al++){ao=an[al].get("value");if(ao!==null&&ao>0){ap.push(an[al])}}this.model[this.resourcesField]=ap}});var J=j.extend({init:function(an,al,am){if(D(al)){al={dataSource:al}}S={append:{text:"Add Task",action:"add",className:J.styles.toolbar.appendButton,iconClass:J.styles.toolbar.iconPlus},pdf:{text:"Export to PDF",className:J.styles.toolbar.pdfButton,iconClass:J.styles.toolbar.iconPdf}};j.fn.init.call(this,an,al);if(am){this._events=am}this._wrapper();this._resources();if(!this.options.views||!this.options.views.length){this.options.views=["day","week","month"]}this._timeline();this._toolbar();this._footer();this._adjustDimensions();this._preventRefresh=true;this.view(this.timeline._selectedViewName);this._preventRefresh=false;this._dataSource();this._assignments();this._dropDowns();this._list();this._dependencies();this._resizable();this._scrollable();this._dataBind();this._attachEvents();this._createEditor();N.notify(this)},events:["dataBinding","dataBound","add","edit","remove","cancel","save","change","navigate","moveStart","move","moveEnd","resizeStart","resize","resizeEnd","columnResize"],options:{name:"Gantt",autoBind:true,navigatable:false,selectable:true,editable:true,resizable:false,columnResizeHandleWidth:c,columns:[],views:[],dataSource:{},dependencies:{},resources:{},assignments:{},taskTemplate:null,messages:{save:"Save",cancel:"Cancel",destroy:"Delete",deleteTaskConfirmation:o,deleteDependencyConfirmation:y,deleteTaskWindowTitle:"Delete task",deleteDependencyWindowTitle:"Delete dependency",views:{day:"Day",week:"Week",month:"Month",year:"Year",start:"Start",end:"End"},actions:{append:"Add Task",addChild:"Add Child",insertBefore:"Add Above",insertAfter:"Add Below",pdf:"Export to PDF"},editor:{editorTitle:"Task",resourcesEditorTitle:"Resources",title:"Title",start:"Start",end:"End",percentComplete:"Complete",resources:"Resources",assignButton:"Assign",resourcesHeader:"Resources",unitsHeader:"Units"}},showWorkHours:true,showWorkDays:true,toolbar:null,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,hourSpan:1,snap:true,height:600,listWidth:"30%",rowHeight:null},select:function(am){var al=this.list;if(!am){return al.select()}al.select(am);return},clearSelection:function(){this.list.clearSelection()},destroy:function(){j.fn.destroy.call(this);if(this.dataSource){this.dataSource.unbind("change",this._refreshHandler);this.dataSource.unbind("progress",this._progressHandler);this.dataSource.unbind("error",this._errorHandler)}if(this.dependencies){this.dependencies.unbind("change",this._dependencyRefreshHandler);this.dependencies.unbind("error",this._dependencyErrorHandler)}if(this.timeline){this.timeline.unbind();this.timeline.destroy()}if(this.list){this.list.unbind();this.list.destroy()}if(this.footerDropDown){this.footerDropDown.destroy()}if(this.headerDropDown){this.headerDropDown.destroy()}if(this._editor){this._editor.destroy()}if(this._resizeDraggable){this._resizeDraggable.destroy()}this.toolbar.off(O);if(p){this._mediaQuery.removeListener(this._mediaQueryHandler);this._mediaQuery=null}L(window).off("resize"+O,this._resizeHandler);L(this.wrapper).off(O);this.toolbar=null;this.footer=null},setOptions:function(am){var ao=N.deepExtend({},this.options,am);var an=this._events;if(!am.views){var al=this.view().name;ao.views=L.map(this.options.views,function(ap){var ar=aj(ap);var aq=ar?typeof ap.type!=="string"?ap.title:ap.type:ap;if(al===aq){if(ar){ap.selected=true}else{ap={type:aq,selected:true}}}else{if(ar){ap.selected=false}}return ap})}if(!am.dataSource){ao.dataSource=this.dataSource}if(!am.dependencies){ao.dependencies=this.dependencies}if(!am.resources){ao.resources=this.resources}if(!am.assignments){ao.assignments=this.assignments}this.destroy();this.element.empty();this.options=null;this.init(this.element,ao,an);j.fn._setEvents.call(this,ao)},_attachEvents:function(){this._resizeHandler=ab(this.resize,this,false);L(window).on("resize"+O,this._resizeHandler)},_wrapper:function(){var ap=J.styles;var ao=[ap.icon,ap.resizeHandle].join(" ");var am=this.options;var al=am.height;var an=am.width;this.wrapper=this.element.addClass(ap.wrapper).append("<div class='"+ap.listWrapper+"'><div></div></div>").append("<div class='"+ap.splitBarWrapper+"'><div class='"+ao+"'></div></div>").append("<div class='"+ap.timelineWrapper+"'><div></div></div>");this.wrapper.find(B+ap.list).width(am.listWidth);if(al){this.wrapper.height(al)}if(an){this.wrapper.width(an)}if(am.rowHeight){this.wrapper.addClass(ap.rowHeight)}},_toolbar:function(){var ap=this;var aq=J.styles;var an=B+aq.toolbar.views+" > li";var av=B+aq.toolbar.pdfButton;var al=B+aq.buttonToggle;var ar=B+aq.gridContent;var au=L(B+aq.list);var ax=L(B+aq.timeline);var aA=aq.hovered;var am=this.options.toolbar;var az=L("<div class='"+aq.toolbar.actions+"'>");var at;var aw;var ao;var ay=function(aB){if(aB.matches){au.css({display:"none","max-width":0})}else{au.css({display:"inline-block",width:"30%","max-width":"none"});ax.css("display","inline-block");ap.refresh();ax.find(ar).scrollTop(ap.scrollTop)}ap._resize()};if(!u(am)){am=typeof am===ac?am:this._actions(am);am=ab(N.template(am),this)}ao=L(U({styles:aq.toolbar}));aw=L(z({ns:N.ns,views:this.timeline.views,styles:aq.toolbar}));az.append(am({}));at=L("<div class='"+aq.toolbar.headerWrapper+"'>").append(ao).append(aw).append(az);if(aw.find("li").length>1){aw.prepend(n({styles:aq.toolbar}))}this.wrapper.prepend(at);this.toolbar=at;if(p){this._mediaQueryHandler=ab(ay,this);this._mediaQuery=window.matchMedia("(max-width: 480px)");this._mediaQuery.addListener(this._mediaQueryHandler)}at.on(V+O,an,function(aD){aD.preventDefault();var aC=ap.list;var aB=L(this).attr(N.attr("name"));var aE=aw.find(B+aq.toolbar.currentView);if(aE.is(":visible")){aE.parent().toggleClass(aq.toolbar.expanded)}if(aC.editable&&aC.editable.trigger("validate")){return}if(!ap.trigger("navigate",{view:aB})){ap.view(aB)}}).on(V+O,av,function(aB){aB.preventDefault();ap.saveAsPDF()}).on(V+O,al,function(aB){aB.preventDefault();if(au.is(":visible")){au.css({display:"none",width:"0"});ax.css({display:"inline-block",width:"100%"});ap.refresh();ax.find(ar).scrollTop(ap.scrollTop)}else{ax.css({display:"none",width:0});au.css({display:"inline-block",width:"100%","max-width":"none"}).find(ar).scrollTop(ap.scrollTop)}ap._resize()});this.wrapper.find(B+aq.toolbar.toolbar+" li").hover(function(){L(this).addClass(aA)},function(){L(this).removeClass(aA)})},_actions:function(){var al=this.options;var ao=al.editable;var aq=al.toolbar;var an="";if(!D(aq)){if(ao&&ao.create!==false){aq=["append"]}else{return an}}for(var am=0,ap=aq.length;am<ap;am++){an+=this._createButton(aq[am])}return an},_footer:function(){var am=this.options.editable;if(!am||am.create===false){return}var ap=J.styles.toolbar;var ao=this.options.messages.actions;var al=L(N.template(W)(r(true,{styles:ap},S.append,{text:ao.append})));var an=L("<div class='"+ap.actions+"'>").append(al);var aq=L("<div class='"+ap.footerWrapper+"'>").append(an);this.wrapper.append(aq);this.footer=aq},_createButton:function(aq){var ao=aq.template||W;var ap=this.options.messages.actions;var am=typeof aq===ac?aq:aq.name||aq.text;var an=S[am]?S[am].className:"k-gantt-"+(am||"").replace(/\s/g,"");var al={iconClass:"",action:"",text:am,className:an,styles:J.styles.toolbar};if(!am&&!(aj(aq)&&aq.template)){throw new Error("Custom commands should have name specified")}al=r(true,al,S[am],{text:ap[am]});if(aj(aq)){if(aq.className&&ag(al.className,aq.className.split(" "))<0){aq.className+=" "+al.className}al=r(true,al,aq)}return N.template(ao)(al)},_adjustDimensions:function(){var am=this.element;var ap=J.styles;var ar=B+ap.list;var at=B+ap.timeline;var aw=B+ap.splitBar;var av=ah(this.toolbar);var au=this.footer?ah(this.footer):0;var ao=am.height();var an=am.width();var aq=Z(am.find(aw));var al=Z(am.find(ar));am.children([ar,at,aw].join(",")).height(ao-(av+au)).end().children(at).width(an-(aq+al));if(an<al+aq){am.find(ar).width(an-aq)}},_scrollTo:function(aq){var am=this.timeline.view();var ap=this.list;var al=N.attr("uid");var at=typeof aq==="string"?aq:aq.closest("tr"+l()).attr(al);var ao;var an;var ar=function(){if(an.length!==0){ao()}};if(am.content.is(":visible")){an=am.content.find(l(at));ao=function(){am._scrollTo(an)}}else{an=ap.content.find(l(at));ao=function(){an.get(0).scrollIntoView()}}ar()},_dropDowns:function(){var ap=this;var al=B+J.styles.toolbar.actions;var aq=this.options.messages.actions;var ao=this.timeline;var am=this.options.editable;var an=function(ay){var aA=ay.type;var av;var ar=ap.dataSource;var at=ar._createNewModel();var aw=ap.dataItem(ap.select());var aB=ar.taskParent(aw);var az=ao.view()._timeSlots()[0];var ax=aA==="add"?aw:aB;var au=ap.list.editable;if(au&&au.trigger("validate")){return}at.set("title","New task");if(ax){at.set("parentId",ax.get("id"));at.set("start",ax.get("start"));at.set("end",ax.get("end"))}else{at.set("start",az.start);at.set("end",az.end)}if(aA!=="add"){av=aw.get("orderId");av=aA==="insert-before"?av:av+1}ap._createTask(at,av)};if(!am||am.create===false){return}this.footerDropDown=new x(this.footer.children(al).eq(0),{messages:{actions:aq},direction:"up",animation:{open:{effects:"slideIn:up"}},navigatable:ap.options.navigatable});this.headerDropDown=new x(this.toolbar.children(al).eq(0),{messages:{actions:aq},navigatable:ap.options.navigatable});this.footerDropDown.bind("command",an);this.headerDropDown.bind("command",an)},_list:function(){var ar=this;var au=ar.options.navigatable;var at=J.styles;var ap=this.wrapper.find(B+at.list);var ao=ap.find("> div");var av=this.wrapper.find(B+at.toolbar.actions+" > button");var aw={columns:this.options.columns||[],dataSource:this.dataSource,selectable:this.options.selectable,editable:this.options.editable,resizable:this.options.resizable,columnResizeHandleWidth:this.options.columnResizeHandleWidth,listWidth:Z(ap),resourcesField:this.resources.field,rowHeight:this.options.rowHeight};var am=aw.columns;var al;var aq=function(){if(au){ar._current(ar._cachedCurrent);d(ar.list.content.find("table"),true)}delete ar._cachedCurrent};for(var an=0;an<am.length;an++){al=am[an];if(al.field===this.resources.field&&typeof al.editor!=="function"){al.editor=ab(this._createResourceEditor,this)}}this.list=new N.ui.GanttList(ao,aw);this.list.bind("render",function(){ar._navigatable()},true).bind("edit",function(ax){ar._cachedCurrent=ax.cell;if(ar.trigger("edit",{task:ax.model,container:ax.cell})){ax.preventDefault()}}).bind("cancel",function(ax){if(ar.trigger("cancel",{task:ax.model,container:ax.cell})){ax.preventDefault()}aq()}).bind("update",function(ax){ar._updateTask(ax.task,ax.updateInfo);aq()}).bind("change",function(){ar.trigger("change");var ax=ar.list.select();if(ax.length){av.removeAttr("data-action","add");ar.timeline.select("[data-uid='"+ax.attr("data-uid")+"']")}else{av.attr("data-action","add");ar.timeline.clearSelection()}}).bind("columnResize",function(ax){ar.trigger("columnResize",{column:ax.column,oldWidth:ax.oldWidth,newWidth:ax.newWidth})})},_timeline:function(){var ao=this;var ap=J.styles;var al=ak(r(true,{resourcesField:this.resources.field},this.options));var am=this.wrapper.find(B+ap.timeline+" > div");var an=B+ap.toolbar.currentView+" > "+B+ap.toolbar.link;this.timeline=new N.ui.GanttTimeline(am,al);this.timeline.bind("navigate",function(aq){var at=aq.view.replace(/\./g,"\\.").toLowerCase();var ar=ao.toolbar.find(B+ap.toolbar.views+" > li").removeClass(ap.selected).end().find(B+ap.toolbar.viewButton+"-"+at).addClass(ap.selected).find(B+ap.toolbar.link).text();ao.toolbar.find(an).text(ar);ao.refresh()}).bind("moveStart",function(ar){var aq=ao.list.editable;if(aq&&aq.trigger("validate")){ar.preventDefault();return}if(ao.trigger("moveStart",{task:ar.task})){ar.preventDefault()}}).bind("move",function(at){var ar=at.task;var au=at.start;var aq=new Date(au.getTime()+ar.duration());if(ao.trigger("move",{task:ar,start:au,end:aq})){at.preventDefault()}}).bind("moveEnd",function(at){var ar=at.task;var au=at.start;var aq=new Date(au.getTime()+ar.duration());if(!ao.trigger("moveEnd",{task:ar,start:au,end:aq})){ao._updateTask(ao.dataSource.getByUid(ar.uid),{start:au,end:aq})}}).bind("resizeStart",function(ar){var aq=ao.list.editable;if(aq&&aq.trigger("validate")){ar.preventDefault();return}if(ao.trigger("resizeStart",{task:ar.task})){ar.preventDefault()}}).bind("resize",function(aq){if(ao.trigger("resize",{task:aq.task,start:aq.start,end:aq.end})){aq.preventDefault()}}).bind("resizeEnd",function(at){var aq=at.task;var ar={};if(at.resizeStart){ar.start=at.start}else{ar.end=at.end}if(!ao.trigger("resizeEnd",{task:aq,start:at.start,end:at.end})){ao._updateTask(ao.dataSource.getByUid(aq.uid),ar)}}).bind("percentResizeStart",function(ar){var aq=ao.list.editable;if(aq&&aq.trigger("validate")){ar.preventDefault()}}).bind("percentResizeEnd",function(aq){ao._updateTask(ao.dataSource.getByUid(aq.task.uid),{percentComplete:aq.percentComplete})}).bind("dependencyDragStart",function(ar){var aq=ao.list.editable;if(aq&&aq.trigger("validate")){ar.preventDefault()}}).bind("dependencyDragEnd",function(ar){var aq=ao.dependencies._createNewModel({type:ar.type,predecessorId:ar.predecessor.id,successorId:ar.successor.id});ao._createDependency(aq)}).bind("select",function(ar){var aq=ao.list.editable;if(aq){aq.trigger("validate")}ao.select("[data-uid='"+ar.uid+"']")}).bind("editTask",function(ar){var aq=ao.list.editable;if(aq&&aq.trigger("validate")){return}ao.editTask(ar.uid)}).bind("clear",function(){ao.clearSelection()}).bind("removeTask",function(ar){var aq=ao.list.editable;if(aq&&aq.trigger("validate")){return}ao.removeTask(ao.dataSource.getByUid(ar.uid))}).bind("removeDependency",function(ar){var aq=ao.list.editable;if(aq&&aq.trigger("validate")){return}ao.removeDependency(ao.dependencies.getByUid(ar.uid))})},_dataSource:function(){var al=this.options;var am=al.dataSource;am=D(am)?{data:am}:am;if(this.dataSource&&this._refreshHandler){this.dataSource.unbind("change",this._refreshHandler).unbind("progress",this._progressHandler).unbind("error",this._errorHandler)}else{this._refreshHandler=ab(this.refresh,this);this._progressHandler=ab(this._requestStart,this);this._errorHandler=ab(this._error,this)}this.dataSource=N.data.GanttDataSource.create(am).bind("change",this._refreshHandler).bind("progress",this._progressHandler).bind("error",this._errorHandler)},_dependencies:function(){var al=this.options.dependencies||{};var am=D(al)?{data:al}:al;if(this.dependencies&&this._dependencyRefreshHandler){this.dependencies.unbind("change",this._dependencyRefreshHandler).unbind("error",this._dependencyErrorHandler)}else{this._dependencyRefreshHandler=ab(this.refreshDependencies,this);this._dependencyErrorHandler=ab(this._error,this)}this.dependencies=N.data.GanttDependencyDataSource.create(am).bind("change",this._dependencyRefreshHandler).bind("error",this._dependencyErrorHandler)},_resources:function(){var al=this.options.resources;var am=al.dataSource||{};this.resources={field:"resources",dataTextField:"name",dataColorField:"color",dataFormatField:"format"};r(this.resources,al);this.resources.dataSource=N.data.DataSource.create(am)},_assignments:function(){var al=this.options.assignments;var am=al.dataSource||{};if(this.assignments){this.assignments.dataSource.unbind("change",this._assignmentsRefreshHandler)}else{this._assignmentsRefreshHandler=ab(this.refresh,this)}this.assignments={dataTaskIdField:"taskId",dataResourceIdField:"resourceId",dataValueField:"value"};r(this.assignments,al);this.assignments.dataSource=N.data.DataSource.create(am);this.assignments.dataSource.bind("change",this._assignmentsRefreshHandler)},_createEditor:function(){var am=this;var al=this._editor=new K(this.wrapper,r({},this.options,{target:this,resources:{field:this.resources.field,editor:ab(this._createResourceEditor,this)},createButton:ab(this._createPopupButton,this)}));al.bind("cancel",function(ao){var an=am.dataSource.getByUid(ao.model.uid);if(am.trigger("cancel",{container:ao.container,task:an})){ao.preventDefault();return}am.cancelTask()}).bind("edit",function(ao){var an=am.dataSource.getByUid(ao.model.uid);if(am.trigger("edit",{container:ao.container,task:an})){ao.preventDefault()}}).bind("save",function(ao){var an=am.dataSource.getByUid(ao.model.uid);am.saveTask(an,ao.updateInfo)}).bind("remove",function(an){am.removeTask(an.model.uid)}).bind("close",am._onDialogClose)},_onDialogClose:function(){},_createResourceEditor:function(al,an){var aq=this;var am=an instanceof t?an:an.model;var at=am.get("id");var ap=this.options.messages;var ar=aq.resources.field;var ao=this._resourceEditor=new w(al,{resourcesField:ar,data:this._wrapResourceData(at),model:am,messages:r({},ap.editor),buttons:[{name:"update",text:ap.save,className:J.styles.primary},{name:"cancel",text:ap.cancel}],createButton:ab(this._createPopupButton,this),save:function(au){aq._updateAssignments(au.model.get("id"),au.model.get(ar))}});ao.open()},_createPopupButton:function(an){var am=an.name||an.text;var al={className:J.styles.popup.button+" k-gantt-"+(am||"").replace(/\s/g,""),text:am,attr:""};if(!am&&!(aj(an)&&an.template)){throw new Error("Custom commands should have name specified")}if(aj(an)){if(an.className){an.className+=" "+al.className}al=r(true,al,an)}return N.template(Y)(al)},view:function(al){return this.timeline.view(al)},range:function(am){var ao=this.dataSource;var al=this.view();var an=this.timeline;if(am){al.options.range={start:am.start,end:am.end};an._render(ao.taskTree());an._renderDependencies(this.dependencies.view())}return{start:al.start,end:al.end}},date:function(am){var al=this.view();if(am){al.options.date=am;al._scrollToDate(am)}return al.options.date},dataItem:function(an){if(!an){return null}var am=this.list;var al=am.content.find(an);return am._modelFromElement(al)},setDataSource:function(al){this.options.dataSource=al;this._dataSource();this.list._setDataSource(this.dataSource);if(this.options.autoBind){al.fetch()}},setDependenciesDataSource:function(al){this.options.dependencies=al;this._dependencies();if(this.options.autoBind){al.fetch()}},items:function(){return this.wrapper.children(".k-task")},_updateAssignments:function(an,aq){var al=this.assignments.dataSource;var ay=this.assignments.dataTaskIdField;var aw=this.assignments.dataResourceIdField;var ax=false;var am=new Q(al.view()).filter({field:ay,operator:"eq",value:an}).toArray();var ap;var at;var az;while(am.length){ap=am[0];for(var av=0,ao=aq.length;av<ao;av++){at=aq[av];if(ap.get(aw)===at.get("id")){az=aq[av].get("value");this._updateAssignment(ap,az);aq.splice(av,1);ax=true;break}}if(!ax){this._removeAssignment(ap)}ax=false;am.shift()}for(var au=0,ar=aq.length;au<ar;au++){at=aq[au];this._createAssignment(at,an)}al.sync()},cancelTask:function(){var am=this._editor;var al=am.container;if(al){am.close()}},editTask:function(am){var al=typeof am==="string"?this.dataSource.getByUid(am):am;if(!al){return}var an=this.dataSource._createNewModel(al.toJSON());an.uid=al.uid;this.cancelTask();this._editTask(an)},_editTask:function(al){this._editor.editTask(al)},saveTask:function(am,ao){var ap=this._editor;var al=ap.container;var an=ap.editable;if(al&&an&&an.end()){this._updateTask(am,ao)}},_updateTask:function(al,am){var an=this.resources.field;if(!this.trigger("save",{task:al,values:am})){this._preventRefresh=true;this.dataSource.update(al,am);if(am[an]){this._updateAssignments(al.get("id"),am[an])}this._syncDataSource()}},_updateAssignment:function(an,al){var am=this.assignments.dataValueField;an.set(am,al)},removeTask:function(am){var an=this;var al=typeof am==="string"?this.dataSource.getByUid(am):am;if(!al){return}this._taskConfirm(function(ao){if(!ao){an._removeTask(al)}},al)},_createTask:function(al,am){if(!this.trigger("add",{task:al,dependency:null})){var an=this.dataSource;this._preventRefresh=true;if(am===s){an.add(al)}else{an.insert(am,al)}this._scrollToUid=al.uid;this._syncDataSource()}},_createDependency:function(al){if(!this.trigger("add",{task:null,dependency:al})){this._preventDependencyRefresh=true;this.dependencies.add(al);this._preventDependencyRefresh=false;this.dependencies.sync()}},_createAssignment:function(ao,at){var am=this.assignments;var aq=am.dataSource;var an=am.dataTaskIdField;var ar=am.dataResourceIdField;var al=am.dataValueField;var ap=aq._createNewModel();ap[an]=at;ap[ar]=ao.get("id");ap[al]=ao.get("value");aq.add(ap)},removeDependency:function(am){var an=this;var al=typeof am==="string"?this.dependencies.getByUid(am):am;if(!al){return}this._dependencyConfirm(function(ao){if(!ao){an._removeDependency(al)}},al)},_removeTaskDependencies:function(al,ao){this._preventDependencyRefresh=true;for(var am=0,an=ao.length;am<an;am++){this.dependencies.remove(ao[am])}this._preventDependencyRefresh=false;this.dependencies.sync()},_removeTaskAssignments:function(am){var aq=this.assignments.dataSource;var al=aq.view();var ao={field:this.assignments.dataTaskIdField,operator:"eq",value:am.get("id")};al=new Q(al).filter(ao).toArray();this._preventRefresh=true;for(var an=0,ap=al.length;an<ap;an++){aq.remove(al[an])}this._preventRefresh=false;aq.sync()},_removeTask:function(al){var am=this.dependencies.dependencies(al.id);if(!this.trigger("remove",{task:al,dependencies:am})){this._removeTaskDependencies(al,am);this._removeTaskAssignments(al);this._preventRefresh=true;if(this.dataSource.remove(al)){this._syncDataSource()}this._preventRefresh=false}},_removeDependency:function(al){if(!this.trigger("remove",{task:null,dependencies:[al]})){if(this.dependencies.remove(al)){this.dependencies.sync()}}},_removeAssignment:function(al){this.assignments.dataSource.remove(al)},_taskConfirm:function(an,al){var am=this.options.messages;this._confirm(an,{model:al,text:am.deleteTaskConfirmation,title:am.deleteTaskWindowTitle})},_dependencyConfirm:function(an,al){var am=this.options.messages;this._confirm(an,{model:al,text:am.deleteDependencyConfirmation,title:am.deleteDependencyWindowTitle})},_confirm:function(ap,al){var am=this.options.editable;var ao;var an;if(am===true||am.confirmation!==false){ao=this.options.messages;an=[{name:"delete",text:ao.destroy,className:J.styles.primary,click:function(){ap()}},{name:"cancel",text:ao.cancel,click:function(){ap(true)}}];this.showDialog(r(true,{},al,{buttons:an}))}else{ap()}},showDialog:function(al){this._editor.showDialog(al)},refresh:function(){if(this._preventRefresh||this.list.editable){return}this._progress(false);var aq=this.dataSource;var ao=aq.taskTree();var ap=this._scrollToUid;var an;var am;var al=-1;if(this.current){am=this.current.closest("tr").attr(N.attr("uid"));al=this.current.index()}if(this.trigger("dataBinding")){return}if(this.resources.dataSource.data().length!==0){this._assignResources(ao)}if(this._editor){this._editor.close()}this.clearSelection();this.list._render(ao);this.timeline._render(ao);this.timeline._renderDependencies(this.dependencies.view());if(ap){this._scrollTo(ap);this.select(l(ap))}if((ap||am)&&al>=0){an=this.list.content.find("tr"+l(ap||am)+" > td:eq("+al+")");this._current(an)}this._scrollToUid=null;this.trigger("dataBound")},refreshDependencies:function(){if(this._preventDependencyRefresh){return}if(this.trigger("dataBinding")){return}this.timeline._renderDependencies(this.dependencies.view());this.trigger("dataBound")},_assignResources:function(al){var ap=this.resources;var am=this.assignments;var au=function(){var av=am.dataSource.view();var aw={field:am.dataTaskIdField};av=new Q(av).group(aw).toArray();return av};var aq=au();var at=function(av,az){var ax=av.get("id");N.setter(ap.field)(av,new v([]));for(var aw=0,ay=aq.length;aw<ay;aw++){if(aq[aw].value===ax){az(av,aq[aw].items)}}};var an=function(aw,aB){for(var ay=0,av=aB.length;ay<av;ay++){var aD=aB[ay];var ax=ap.dataSource.get(aD.get(am.dataResourceIdField));var aC=aD.get(am.dataValueField);var aE=aD.get(am.dataResourceIdField);var aA=ax.get(ap.dataFormatField)||b;var az=N.toString(aC,aA);aw[ap.field].push(new t({id:aE,name:ax.get(ap.dataTextField),color:ax.get(ap.dataColorField),value:aC,formatedValue:az}))}};for(var ar=0,ao=al.length;ar<ao;ar++){at(al[ar],an)}},_wrapResourceData:function(am){var at=this;var av=[];var ap;var ao=this.resources.dataSource.view();var al=this.assignments.dataSource.view();var aq=new Q(al).filter({field:at.assignments.dataTaskIdField,operator:"eq",value:am}).toArray();var au=function(ax){var aw=null;new Q(aq).filter({field:at.assignments.dataResourceIdField,operator:"eq",value:ax}).select(function(ay){aw+=ay.get(at.assignments.dataValueField)});return aw};for(var ar=0,an=ao.length;ar<an;ar++){ap=ao[ar];av.push({id:ap.get("id"),name:ap.get(at.resources.dataTextField),format:ap.get(at.resources.dataFormatField)||b,value:au(ap.id)})}return av},_syncDataSource:function(){this._preventRefresh=false;this._requestStart();this.dataSource.sync()},_requestStart:function(){this._progress(true)},_error:function(){this._progress(false)},_progress:function(al){N.ui.progress(this.element,al)},_resizable:function(){var ao=this;var am=this.wrapper;var ap=J.styles;var ar=B+ap.gridContent;var aq=am.find(B+ap.list);var au=am.find(B+ap.timeline);var an;var at;var al;this._resizeDraggable=am.find(B+ap.splitBar).height(aq.height()).hover(function(){L(this).addClass(ap.splitBarHover)},function(){L(this).removeClass(ap.splitBarHover)}).end().kendoResizable({orientation:"horizontal",handle:B+ap.splitBar,start:function(){an=aq.width();at=au.width();al=au.find(ar).scrollLeft()},resize:function(av){var aw=av.x.initialDelta;if(N.support.isRtl(am)){aw*=-1}if(an+aw<0||at-aw<0){return}aq.width(an+aw);au.width(at-aw);au.find(ar).scrollLeft(al+aw);ao.timeline.view()._renderCurrentTime()}}).data("kendoResizable")},_scrollable:function(){var ap=this;var aq=J.styles;var am=B+aq.gridContent;var an=B+aq.gridHeaderWrap;var al=this.timeline.element.find(an);var ao=this.timeline.element.find(am);var at=this.list.element.find(an);var ar=this.list.element.find(am);if(M){ar.css("overflow-y","auto")}ao.on("scroll",function(){ap.scrollTop=this.scrollTop;al.scrollLeft(this.scrollLeft);ar.scrollTop(this.scrollTop)});ar.on("scroll",function(){at.scrollLeft(this.scrollLeft)}).on("DOMMouseScroll"+O+" mousewheel"+O,function(av){var au=ao.scrollTop();var aw=N.wheelDeltaY(av);if(aw){av.preventDefault();L(av.currentTarget).one("wheel"+O,false);ao.scrollTop(au+-aw)}})},_navigatable:function(){var ap=this;var ax=this.options.navigatable;var am=this.options.editable;var aA=this.list.header.find("table");var aB=this.list.content.find("table");var av=J.styles;var at=N.support.isRtl(this.wrapper);var an=this.timeline.element.find(B+av.gridContent);var aC=aA.add(aB);var ar=l();var au;var al={collapse:false,expand:true};var az=function(aD){var aE=ap.timeline.view()._timeSlots()[0].offsetWidth;an.scrollLeft(an.scrollLeft()+(aD?-aE:aE))};var ao=function(aG){var aE=ap.current.parent("tr"+l());var aD=ap.current.index();var aF=aE[aG]();if(ap.select().length!==0){ap.clearSelection()}if(aF.length!==0){ap._current(aF.children("td:eq("+aD+")"));ap._scrollTo(ap.current)}else{if(ap.current.is("td")&&aG=="prev"){d(aA)}else{if(ap.current.is("th")&&aG=="next"){d(aB)}}}};var ay=function(aE){var aD=ap.current[aE]();if(aD.length!==0){ap._current(aD);au=ap.current.index()}};var aw=function(aE){var aD=ap.dataItem(ap.current);if(aD.summary&&aD.expanded!==aE){aD.set("expanded",aE)}};var aq=function(){var aF=ap.options.editable;if(!aF||aF.destroy===false||ap.list.editable){return}var aD=ap.select();var aE=N.attr("uid");if(aD.length){ap.removeTask(aD.attr(aE))}};L(this.wrapper).on("mousedown"+O,"tr"+ar+", div"+ar+":not("+B+av.line+")",function(aG){var aF=L(aG.currentTarget);var aD=L(aG.target).is(":button,a,:input,a>.k-icon,textarea,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap");var aE;if(aG.ctrlKey){return}if(ax){if(aF.is("tr")){aE=L(aG.target).closest("td")}else{aE=ap.list.content.find("tr"+l(aF.attr(N.attr("uid")))+" > td:first")}ap._current(aE)}if((ax||am)&&!aD){ap._focusTimeout=setTimeout(function(){d(ap.list.content.find("table"),true)},2)}});if(ax!==true){aB.on("keydown"+O,function(aD){if(aD.keyCode==G.DELETE){aq()}});return}aC.on("focus"+O,function(){var aD=this===aB.get(0)?"td":"th";var aE=ap.select();var aF=ap.current||L(aE.length?aE:this).find(aD+":eq("+(au||0)+")");ap._current(aF)}).on("blur"+O,function(){ap._current();if(this==aA){L(this).attr(F,-1)}}).on("keydown"+O,function(aF){var aE=aF.keyCode;var aD;if(!ap.current){return}aD=ap.current.is("td");switch(aE){case G.RIGHT:aF.preventDefault();if(aF.altKey){az()}else{if(aF.ctrlKey){aw(at?al.collapse:al.expand)}else{ay(at?"prev":"next")}}break;case G.LEFT:aF.preventDefault();if(aF.altKey){az(true)}else{if(aF.ctrlKey){aw(at?al.expand:al.collapse)}else{ay(at?"next":"prev")}}break;case G.UP:aF.preventDefault();ao("prev");break;case G.DOWN:aF.preventDefault();ao("next");break;case G.SPACEBAR:aF.preventDefault();if(aD){ap.select(ap.current.closest("tr"))}break;case G.ENTER:aF.preventDefault();if(aD){if(ap.options.editable&&ap.options.editable.update!==false){ap._cachedCurrent=ap.current;ap.list._startEditHandler(ap.current);L(this).one("keyup",function(aG){aG.stopPropagation()})}}else{ap.current.children("a.k-link").click()}break;case G.ESC:aF.stopPropagation();break;case G.DELETE:if(aD){aq()}break;default:if(aE>=49&&aE<=57){ap.view(ap.timeline._viewByIndex(aE-49))}break}})},_current:function(al){var an=J.styles;var am;if(this.current&&this.current.length){this.current.removeClass(an.focused).removeAttr("id")}if(al&&al.length){this.current=al.addClass(an.focused).attr("id",H);am=L(N._activeElement());if(am.is("table")&&this.wrapper.find(am).length>0){am.removeAttr(T).attr(T,H)}}else{this.current=null}},_dataBind:function(){var am=this;if(am.options.autoBind){this._preventRefresh=true;this._preventDependencyRefresh=true;var al=L.map([this.dataSource,this.dependencies,this.resources.dataSource,this.assignments.dataSource],function(an){return an.fetch()});L.when.apply(null,al).done(function(){am._preventRefresh=false;am._preventDependencyRefresh=false;am.refresh()})}},_resize:function(){this._adjustDimensions();this.timeline.view()._adjustHeight();this.timeline.view()._renderCurrentTime();this.list._adjustHeight()}});if(N.PDFMixin){N.PDFMixin.extend(J.fn);J.fn._drawPDF=function(){var an=J.styles;var al="."+an.list;var ao=this.wrapper.find(al).width();var am=this.wrapper.clone();am.find(al).css("width",ao);return this._drawPDFShadow({content:am},{avoidLinks:this.options.pdf.avoidLinks})}}N.ui.plugin(J);r(true,J,{styles:A})}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.treelist",["kendo.dom","kendo.data","kendo.columnsorter","kendo.editable","kendo.window","kendo.filtermenu","kendo.selectable","kendo.resizable","kendo.treeview.draganddrop"],a)}(function(){var a={id:"treelist",name:"TreeList",category:"web",description:"The TreeList widget displays self-referencing data and offers rich support for interacting with data, sorting, filtering, and selection.",depends:["dom","data"],features:[{id:"treelist-sorting",name:"Sorting",description:"Support for column sorting",depends:["columnsorter"]},{id:"treelist-filtering",name:"Filtering",description:"Support for record filtering",depends:["filtermenu"]},{id:"treelist-editing",name:"Editing",description:"Support for record editing",depends:["editable","window"]},{id:"treelist-selection",name:"Selection",description:"Support for row selection",depends:["selectable"]},{id:"treelist-column-resize",name:"Column resizing",description:"Support for column resizing",depends:["resizable"]},{id:"treelist-dragging",name:"Drag & Drop",description:"Support for drag & drop of rows",depends:["treeview.draganddrop"]},{id:"treelist-excel-export",name:"Excel export",description:"Export data as Excel spreadsheet",depends:["excel"]},{id:"treelist-pdf-export",name:"PDF export",description:"Export data as PDF",depends:["pdf","drawing"]}]};(function(A,g){var al=kendo.data;var f=A.extend;var j=kendo.dom;var N=j.element;var X=j.text;var i=j.html;var ad=kendo._outerWidth;var aj=kendo._outerHeight;var M=kendo.ui;var w=M.DataBoundWidget;var G=al.DataSource;var k=al.ObservableArray;var I=al.Query;var ac=al.Model;var af=A.proxy;var v=A.map;var am=A.grep;var ai=A.inArray;var ao=A.isPlainObject;var Z=Array.prototype.push;var ag="string";var y="change";var C="error";var r="progress";var n=".";var F=".kendoTreeList";var R="click";var J="mousedown";var Q="edit";var S="save";var E="expand";var q="collapse";var c="remove";var ab="dataBinding";var e="dataBound";var L="cancel";var u="filterMenuInit";var h="columnHide";var d="columnShow";var U="th.k-header";var ah="columnReorder";var T="columnResize";var an="columnMenuInit";var t="columnLock";var P="columnUnlock";var x="parentId";var W="dragstart";var m="drag";var V="drop";var H="dragend";var p={wrapper:"k-treelist k-grid k-widget",header:"k-header",button:"k-button",alt:"k-alt",editCell:"k-edit-cell",group:"k-treelist-group",gridToolbar:"k-grid-toolbar",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",gridFilter:"k-grid-filter",footerTemplate:"k-footer-template",loading:"k-i-loading",refresh:"k-i-reload",retry:"k-request-retry",selected:"k-state-selected",status:"k-status",link:"k-link",withIcon:"k-with-icon",filterable:"k-filterable",icon:"k-icon",iconFilter:"k-i-filter",iconCollapse:"k-i-collapse",iconExpand:"k-i-expand",iconHidden:"k-i-none",iconPlaceHolder:"k-icon k-i-none",input:"k-input",dropPositions:"k-i-insert-up k-i-insert-down k-i-plus k-i-insert-middle",dropTop:"k-i-insert-up",dropBottom:"k-i-insert-down",dropAdd:"k-i-plus",dropMiddle:"k-i-insert-middle",dropDenied:"k-i-cancel",dragStatus:"k-drag-status",dragClue:"k-drag-clue",dragClueText:"k-clue-text"};var K={create:{imageClass:"k-i-plus",className:"k-grid-add",methodName:"addRow"},createchild:{imageClass:"k-i-plus",className:"k-grid-add",methodName:"addRow"},destroy:{imageClass:"k-i-close",className:"k-grid-delete",methodName:"removeRow"},edit:{imageClass:"k-i-edit",className:"k-grid-edit",methodName:"editRow"},update:{imageClass:"k-i-check",className:"k-primary k-grid-update",methodName:"saveRow"},canceledit:{imageClass:"k-i-cancel",className:"k-grid-cancel",methodName:"_cancelEdit"},excel:{imageClass:"k-i-file-excel",className:"k-grid-excel",methodName:"saveAsExcel"},pdf:{imageClass:"k-i-file-pdf",className:"k-grid-pdf",methodName:"saveAsPDF"}};var ak=ac.define({id:"id",parentId:x,fields:{id:{type:"number"},parentId:{type:"number",nullable:true}},init:function(ap){ac.fn.init.call(this,ap);this._loaded=false;if(!this.parentIdField){this.parentIdField=x}this.parentId=this.get(this.parentIdField)},accept:function(ap){ac.fn.accept.call(this,ap);this.parentId=this.get(this.parentIdField)},set:function(ar,aq,ap){if(ar==x&&this.parentIdField!=x){this[this.parentIdField]=aq}ac.fn.set.call(this,ar,aq,ap);if(ar==this.parentIdField){this.parentId=this.get(this.parentIdField)}},loaded:function(ap){if(ap!==g){this._loaded=ap}else{return this._loaded}},shouldSerialize:function(ap){return ac.fn.shouldSerialize.call(this,ap)&&ap!=="_loaded"&&ap!="_error"&&ap!="_edit"&&!(this.parentIdField!=="parentId"&&ap==="parentId")}});ak.parentIdField=x;ak.define=function(ar,aq){if(aq===g){aq=ar;ar=ak}var at=aq.parentId||x;aq.parentIdField=at;var ap=ac.define(ar,aq);if(at){ap.parentIdField=at}return ap};function s(ap){return function(aq){return aq[ap]}}function aa(ap){return function(aq){return !ap(aq)}}var Y=G.extend({init:function(ap){G.fn.init.call(this,f(true,{},{schema:{modelBase:ak,model:ak}},ap))},_createNewModel:function(ar){var ap={};var aq=ar instanceof ac;if(aq){ap=ar}ap=G.fn._createNewModel.call(this,ap);if(!aq){if(ar.parentId){ar[ap.parentIdField]=ar.parentId}ap.accept(ar)}return ap},_shouldWrap:function(){return true},_push:function(ap,aq){var ar=G.fn._readData.call(this,ap);if(!ar){ar=ap}this[aq](ar)},_readData:function(ap){var aq=this.data();ap=G.fn._readData.call(this,ap);this._replaceData(aq.toJSON().concat(ap),aq);if(ap instanceof k){return ap}return aq},_replaceData:function(ar,at){var ap=ar.length;for(var aq=0;aq<ap;aq++){at[aq]=ar[aq]}at.length=ap},_readAggregates:function(aq){var ap=f(this._aggregateResult,this.reader.aggregates(aq));if("" in ap){ap[this._defaultParentId()]=ap[""];delete ap[""]}return ap},remove:function(ap){var aq=this._subtree(this._childrenMap(this.data()),ap.id);this._removeItems(aq);G.fn.remove.call(this,ap)},_filterCallback:function(au){var aq,ar;var av={};var ap=[];var at=au.toArray();for(aq=0;aq<at.length;aq++){ar=at[aq];while(ar){if(!av[ar.id]){av[ar.id]=true;ap.push(ar)}if(!av[ar.parentId]){av[ar.parentId]=true;ar=this.parentNode(ar);if(ar){ap.push(ar)}}else{break}}}return new I(ap)},_subtree:function(at,av){var aq=at[av]||[];var au=this._defaultParentId();for(var ar=0,ap=aq.length;ar<ap;ar++){if(aq[ar].id!==au){aq=aq.concat(this._subtree(at,aq[ar].id))}}return aq},_childrenMap:function(ar){var at={};var ap,aq,av,au;ar=this._observeView(ar);for(ap=0;ap<ar.length;ap++){aq=ar[ap];av=aq.id;au=aq.parentId;at[av]=at[av]||[];at[au]=at[au]||[];at[au].push(aq)}return at},_calculateAggregates:function(aw,aq){aq=aq||{};var ap={};var au,av,ar;var at=aq.filter;if(at){aw=I.process(aw,{filter:at,filterCallback:af(this._filterCallback,this)}).data}var ax=this._childrenMap(aw);ap[this._defaultParentId()]=new I(this._subtree(ax,this._defaultParentId())).aggregate(aq.aggregate);for(ar=0;ar<aw.length;ar++){au=aw[ar];av=this._subtree(ax,au.id);ap[au.id]=new I(av).aggregate(aq.aggregate)}return ap},_queryProcess:function(ar,ax){ax=ax||{};ax.filterCallback=af(this._filterCallback,this);var av=this._defaultParentId();var ay=I.process(ar,ax);var ap=this._childrenMap(ay.data);var au,at,aw,aq;ar=ap[av]||[];for(at=0;at<ar.length;at++){aw=ar[at];if(aw.id===av){continue}aq=ap[aw.id];au=!!(aq&&aq.length);if(!aw.loaded()){aw.loaded(au||!aw.hasChildren)}if(aw.loaded()||aw.hasChildren!==true){aw.hasChildren=au}if(au){ar=ar.slice(0,at+1).concat(aq,ar.slice(at+1))}}ay.data=ar;return ay},_queueRequest:function(ap,aq){aq.call(this)},_modelLoaded:function(aq){var ap=this.get(aq);ap.loaded(true);ap.hasChildren=this.childNodes(ap).length>0},_modelError:function(aq,ap){this.get(aq)._error=ap},success:function(aq,ap){if(!ap||typeof ap.id=="undefined"){this._data=this._observe([])}return G.fn.success.call(this,aq,ap)},load:function(ap){var at="_query";var ar=this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates;var aq=A.Deferred().resolve().promise();if(ap.loaded()){if(ar){return aq}}else{if(ap.hasChildren){at="read"}}return this[at]({id:ap.id}).done(af(this._modelLoaded,this,ap.id)).fail(af(this._modelError,this,ap.id))},contains:function(aq,ar){var ap=aq.id;while(ar){if(ar.parentId===ap){return true}ar=this.parentNode(ar)}return false},_byParentId:function(av,ar){var ap=[];var aq=this.view();var au;if(av===ar){return[]}for(var at=0;at<aq.length;at++){au=aq.at(at);if(au.parentId==av){ap.push(au)}}return ap},_defaultParentId:function(){return this.reader.model.fn.defaults[this.reader.model.parentIdField]},childNodes:function(ap){return this._byParentId(ap.id,this._defaultParentId())},rootNodes:function(){return this._byParentId(this._defaultParentId())},parentNode:function(ap){return this.get(ap.parentId)},level:function(aq){var ap=-1;if(!(aq instanceof ak)){aq=this.get(aq)}do{aq=this.parentNode(aq);ap++}while(aq);return ap},filter:function(aq){var ap=G.fn.filter;if(aq===g){return ap.call(this,aq)}ap.call(this,aq)}});Y.create=function(ap){if(A.isArray(ap)){ap={data:ap}}else{if(ap instanceof k){ap={data:ap.toJSON()}}}return ap instanceof Y?ap:new Y(ap)};function D(){return this.style.display!=="none"}function O(ap){var au=ap.find(">tr:not(.k-filter-row)");var ar=function(){var av=A(this);return !av.hasClass("k-group-cell")&&!av.hasClass("k-hierarchy-cell")};var aq=A();if(au.length>1){aq=au.find("th").filter(ar).filter(function(){return this.rowSpan>1})}aq=aq.add(au.last().find("th").filter(ar));var at=kendo.attr("index");aq.sort(function(aw,av){aw=A(aw);av=A(av);var ay=aw.attr(at);var ax=av.attr(at);if(ay===g){ay=A(aw).index()}if(ax===g){ax=A(av).index()}ay=parseInt(ay,10);ax=parseInt(ax,10);return ay>ax?1:ay<ax?-1:0});return aq}function l(ap){var ar=[];var at=ap.className;for(var aq=0,au=ap.level;aq<au;aq++){ar.push(N("span",{className:at}))}return ar}function b(au){var ar,aq=0;for(var ap=0,at=au.length;ap<at;ap++){ar=au[ap].style.width;if(ar&&ar.indexOf("%")==-1){aq+=parseInt(ar,10)}}return aq}function ae(ar,aq){ar=ar[0];aq=aq[0];if(ar.rows.length!==aq.rows.length){var ap=ar.offsetHeight;var at=aq.offsetHeight;var av;var au;if(ap>at){av=aq.rows[aq.rows.length-1];au=ap-at}else{av=ar.rows[ar.rows.length-1];au=at-ap}av.style.height=av.offsetHeight+au+"px"}}var o=kendo.Observable.extend({init:function(aq,ap){kendo.Observable.fn.init.call(this);ap=this.options=f(true,{},this.options,ap);this.element=aq;this.bind(this.events,ap);this.model=this.options.model;this.fields=this._fields(this.options.columns);this._initContainer();this.createEditable()},events:[],_initContainer:function(){this.wrapper=this.element},createEditable:function(){var ap=this.options;this.editable=new M.Editable(this.wrapper,{fields:this.fields,target:ap.target,clearContainer:ap.clearContainer,model:this.model})},_isEditable:function(ap){return ap.field&&this.model.editable(ap.field)},_fields:function(ar){var aq=[];var ap,au,at;for(ap=0,au=ar.length;ap<au;ap++){at=ar[ap];if(this._isEditable(at)){aq.push({field:at.field,format:at.format,editor:at.editor})}}return aq},end:function(){return this.editable.end()},close:function(){this.destroy()},destroy:function(){this.editable.destroy();this.editable.element.find("["+kendo.attr("container-for")+"]").empty().end().removeAttr(kendo.attr("role"));this.model=this.wrapper=this.element=this.columns=this.editable=null}});var z=o.extend({init:function(aq,ap){o.fn.init.call(this,aq,ap);this._attachHandlers();kendo.cycleForm(this.wrapper);this.open()},events:[L,S],options:{window:{modal:true,resizable:false,draggable:true,title:"Edit",visible:false}},_initContainer:function(){var ap=this.options;var aq=[];this.wrapper=A('<div class="k-popup-edit-form"/>').attr(kendo.attr("uid"),this.model.uid).append('<div class="k-edit-form-container"/>');if(ap.template){this._appendTemplate(aq);this.fields=[]}else{this._appendFields(aq)}this._appendButtons(aq);new j.Tree(this.wrapper.children()[0]).render(aq);this.wrapper.appendTo(ap.appendTo);this.window=new M.Window(this.wrapper,ap.window)},_appendTemplate:function(aq){var ap=this.options.template;if(typeof ap===ag){ap=window.unescape(ap)}ap=kendo.template(ap)(this.model);aq.push(i(ap))},_appendFields:function(au){var ap,at,ar;var aq=this.options.columns;for(ap=0,at=aq.length;ap<at;ap++){ar=aq[ap];if(ar.command){continue}au.push(i('<div class="k-edit-label"><label for="'+ar.field+'">'+(ar.title||ar.field||"")+"</label></div>"));if(this._isEditable(ar)){au.push(i("<div "+kendo.attr("container-for")+'="'+ar.field+'" class="k-edit-field"></div>'))}else{au.push(N("div",{"class":"k-edit-field"},[this.options.fieldRenderer(ar,this.model)]))}}},_appendButtons:function(ap){ap.push(N("div",{"class":"k-edit-buttons k-state-default"},this.options.commandRenderer()))},_attachHandlers:function(){var ap=this._cancelProxy=af(this._cancel,this);this.wrapper.on(R+F,".k-grid-cancel",this._cancelProxy);this._saveProxy=af(this._save,this);this.wrapper.on(R+F,".k-grid-update",this._saveProxy);this.window.bind("close",function(aq){if(aq.userTriggered){ap(aq)}})},_dettachHandlers:function(){this._cancelProxy=null;this._saveProxy=null;this.wrapper.off(F)},_cancel:function(ap){this.trigger(L,ap)},_save:function(){this.trigger(S)},open:function(){this.window.center().open()},close:function(){this.window.bind("deactivate",af(this.destroy,this)).close()},destroy:function(){this.window.destroy();this.window=null;this._dettachHandlers();o.fn.destroy.call(this)}});var B=w.extend({init:function(aq,ap){w.fn.init.call(this,aq,ap);this._dataSource(this.options.dataSource);this._columns();this._layout();this._selectable();this._sortable();this._resizable();this._filterable();this._attachEvents();this._toolbar();this._scrollable();this._reorderable();this._columnMenu();this._minScreenSupport();this._draggable();if(this.options.autoBind){this.dataSource.fetch()}if(this._hasLockedColumns){var ar=this;this.wrapper.addClass("k-grid-lockedcolumns");this._resizeHandler=function(){ar.resize()};A(window).on("resize"+F,this._resizeHandler)}kendo.notify(this)},_draggable:function(){var ap=this.options.editable;if(!ap||!ap.move){return}this._dragging=new kendo.ui.HierarchicalDragAndDrop(this.wrapper,{$angular:this.$angular,autoScroll:true,filter:"tbody>tr",itemSelector:"tr",allowedContainers:this.wrapper,hintText:function(at){var ar=function(){return A(this).text()};var aq="<span class='k-header k-drag-separator' />";return at.children("td").map(ar).toArray().join(aq)},contains:af(function(at,aq){var ar=this.dataItem(aq);var au=this.dataItem(at);return au==ar||this.dataSource.contains(au,ar)},this),itemFromTarget:function(ar){var aq=ar.closest("tr");return{item:aq,content:aq}},dragstart:af(function(ar){this.wrapper.addClass("k-treelist-dragging");var aq=this.dataItem(ar);return this.trigger(W,{source:aq})},this),drag:af(function(aq){aq.source=this.dataItem(aq.source);this.trigger(m,aq)},this),drop:af(function(aq){aq.source=this.dataItem(aq.source);aq.destination=this.dataItem(aq.destination);this.wrapper.removeClass("k-treelist-dragging");return this.trigger(V,aq)},this),dragend:af(function(ar){var aq=this.dataItem(ar.destination);var at=this.dataItem(ar.source);at.set("parentId",aq?aq.id:null);ar.source=at;ar.destination=aq;this.trigger(H,ar)},this),reorderable:false,dropHintContainer:function(aq){return aq.children("td:eq(1)")},dropPositionFrom:function(aq){return aq.prevAll(".k-i-none").length>0?"after":"before"}})},itemFor:function(ap){if(typeof ap=="number"){ap=this.dataSource.get(ap)}return this.tbody.find("["+kendo.attr("uid")+"="+ap.uid+"]")},_scrollable:function(){if(this.options.scrollable){var aq=this.thead.closest(".k-grid-header-wrap");var ar=A(this.lockedContent).bind("DOMMouseScroll"+F+" mousewheel"+F,af(this._wheelScroll,this));this.content.bind("scroll"+F,function(){aq.scrollLeft(this.scrollLeft);ar.scrollTop(this.scrollTop)});var ap=kendo.touchScroller(this.content);if(ap&&ap.movable){this._touchScroller=ap;ap.movable.bind("change",function(at){aq.scrollLeft(-at.sender.x);if(ar){ar.scrollTop(-at.sender.y)}})}}},_wheelScroll:function(aq){if(aq.ctrlKey){return}var ar=kendo.wheelDeltaY(aq);var ap=A(aq.currentTarget);if(ar){if(ap[0].scrollHeight>ap[0].clientHeight&&(ap[0].scrollTop<ap[0].scrollHeight-ap[0].clientHeight&&ar<0||ap[0].scrollTop>0&&ar>0)){aq.preventDefault()}ap.one("wheel"+F,false);this.content.scrollTop(this.content.scrollTop()+-ar)}},_progress:function(){var ap=this.options.messages;if(!this.tbody.find("tr").length){this._showStatus(kendo.template("<span class='#= className #' /> #: messages.loading #")({className:p.icon+" "+p.loading,messages:ap}))}},_error:function(ap){if(!this.dataSource.rootNodes().length){this._render({error:ap})}},refresh:function(ap){ap=ap||{};if(ap.action=="itemchange"&&this.editor){return}if(this.trigger(ab)){return}this._cancelEditor();this._render();this._adjustHeight();this.trigger(e)},_angularFooters:function(at){var ar,av,au;var ap=this.dataSource.aggregates();var aq=this._footerItems();for(ar=0;ar<aq.length;ar++){av=aq.eq(ar);au=ap[av.attr("data-parentId")];this._angularFooter(at,av.find("td").get(),au)}},_angularFooter:function(ar,ap,at){var aq=this.columns;this.angular(ar,function(){return{elements:ap,data:v(aq,function(au){return{column:au,aggregate:at&&at[au.field]}})}})},items:function(){if(this._hasLockedColumns){return this._items(this.tbody).add(this._items(this.lockedTable))}else{return this._items(this.tbody)}},_items:function(ap){return ap.find("tr").filter(function(){return !A(this).hasClass(p.footerTemplate)})},_footerItems:function(){var ap=this.tbody;if(this._hasLockedColumns){ap=ap.add(this.lockedTable)}return ap.find("tr").filter(function(){return A(this).hasClass(p.footerTemplate)})},dataItems:function(){var ap=kendo.ui.DataBoundWidget.fn.dataItems.call(this);if(this._hasLockedColumns){var at=ap.length,ar=new Array(2*at);for(var aq=at;--aq>=0;){ar[aq]=ar[aq+at]=ap[aq]}ap=ar}return ap},_showStatus:function(ar){var ap=this.element.find(".k-status");var aq=A(this.content).add(this.lockedContent);if(!ap.length){ap=A("<div class='k-status' />").appendTo(this.element)}this._contentTree.render([]);if(this._hasLockedColumns){this._lockedContentTree.render([])}aq.hide();ap.html(ar)},_hideStatus:function(){this.element.find(".k-status").remove();A(this.content).add(this.lockedContent).show()},_adjustHeight:function(){var aq=this.element;var aw=aq.find(n+p.gridContentWrap);var av=aq.find(n+p.gridHeader);var ar=aq.find(n+p.gridToolbar);var ap;var au=kendo.support.scrollbar();aq.height(this.options.height);var at=function(az){var ay,ax;if(az[0].style.height){return true}else{ay=az.height()}az.height("auto");ax=az.height();az.height("");return ay!=ax};if(at(aq)){ap=aq.height()-aj(av)-aj(ar);aw.height(ap);if(this._hasLockedColumns){au=this.table[0].offsetWidth>this.table.parent()[0].clientWidth?au:0;this.lockedContent.height(ap-au)}}},_resize:function(){this._applyLockedContainersWidth();this._adjustHeight()},_minScreenSupport:function(){var ap=this.hideMinScreenCols();if(ap){this.minScreenResizeHandler=af(this.hideMinScreenCols,this);A(window).on("resize",this.minScreenResizeHandler)}},hideMinScreenCols:function(){var av=this.columns,au=false,at=window.innerWidth>0?window.innerWidth:screen.width;for(var aq=0;aq<av.length;aq++){var ap=av[aq];var ar=ap.minScreenWidth;if(ar!==g&&ar!==null){au=true;if(ar>at){this.hideColumn(ap)}else{this.showColumn(ap)}}}return au},destroy:function(){w.fn.destroy.call(this);var ap=this.dataSource;ap.unbind(y,this._refreshHandler);ap.unbind(C,this._errorHandler);ap.unbind(r,this._progressHandler);if(this._resizeHandler){A(window).off("resize"+F,this._resizeHandler)}if(this._dragging){this._dragging.destroy();this._dragging=null}if(this.resizable){this.resizable.destroy();this.resizable=null}if(this.reorderable){this.reorderable.destroy();this.reorderable=null}if(this._draggableInstance&&this._draggableInstance.element){this._draggableInstance.destroy();this._draggableInstance=null}if(this.minScreenResizeHandler){A(window).off("resize",this.minScreenResizeHandler)}this._destroyEditor();this.element.off(F);if(this._touchScroller){this._touchScroller.destroy()}this._autoExpandable=null;this._refreshHandler=this._errorHandler=this._progressHandler=this._dataSourceFetchProxy=null;this.thead=this.content=this.tbody=this.table=this.element=this.lockedHeader=this.lockedContent=null;this._statusTree=this._headerTree=this._contentTree=this._lockedHeaderColsTree=this._lockedContentColsTree=this._lockedHeaderTree=this._lockedContentTree=null},options:{name:"TreeList",columns:[],autoBind:true,scrollable:true,selectable:false,sortable:false,toolbar:null,height:null,columnMenu:false,messages:{noRows:"No records to display",loading:"Loading...",requestFailed:"Request failed.",retry:"Retry",commands:{edit:"Edit",update:"Update",canceledit:"Cancel",create:"Add new record",createchild:"Add child record",destroy:"Delete",excel:"Export to Excel",pdf:"Export to PDF"}},excel:{hierarchy:true},resizable:false,filterable:false,editable:false,reorderable:false},events:[y,Q,S,c,E,q,ab,e,L,W,m,V,H,u,h,d,ah,T,an,t,P],_toggle:function(aq,ar){var at=A.Deferred().resolve().promise();var ap=aq.loaded();if(aq._error){aq.expanded=false;aq._error=g}if(!ap&&aq.expanded){return at}if(typeof ar=="undefined"){ar=!aq.expanded}aq.expanded=ar;if(!ap){at=this.dataSource.load(aq).always(af(function(){this._render();this._syncLockedContentHeight()},this))}this._render();this._syncLockedContentHeight();return at},expand:function(ap){return this._toggle(this.dataItem(ap),true)},collapse:function(ap){return this._toggle(this.dataItem(ap),false)},_toggleChildren:function(at){var aq=A(at.currentTarget);var ap=this.dataItem(aq);var ar=!ap.expanded?E:q;if(!this.trigger(ar,{model:ap})){this._toggle(ap)}at.preventDefault()},_attachEvents:function(){var aq=n+p.iconCollapse+", ."+p.iconExpand+", ."+p.refresh;var ap=n+p.retry;this.element.on(J+F,aq,af(this._toggleChildren,this)).on(R+F,ap,this._dataSourceFetchProxy).on(R+F,".k-button[data-command]",af(this._commandClick,this))},_commandByName:function(at){var av=this.columns;var aw=A.isArray(this.options.toolbar)?this.options.toolbar:[];var au,ar,ap,aq;at=at.toLowerCase();if(K[at]){return K[at]}for(au=0;au<av.length;au++){ap=av[au].command;if(ap){for(ar=0;ar<ap.length;ar++){aq=ap[ar].name;if(!aq){continue}if(aq.toLowerCase()==at){return ap[ar]}}}}for(au=0;au<aw.length;au++){aq=aw[au].name;if(!aq){continue}if(aq.toLowerCase()==at){return aw[au]}}},_commandClick:function(ar){var aq=A(ar.currentTarget);var ap=aq.attr("data-command");var au=this._commandByName(ap);var at=aq.parentsUntil(this.wrapper,"tr");at=at.length?at:g;if(au){if(au.methodName){this[au.methodName](at)}else{if(au.click){au.click.call(this,ar)}}ar.preventDefault()}},_ensureExpandableColumn:function(){if(this._autoExpandable){delete this._autoExpandable.expandable}var ap=am(this.columns,aa(s("hidden")));var aq=am(ap,s("expandable"));if(this.columns.length&&!aq.length){this._autoExpandable=ap[0];ap[0].expandable=true}},_columns:function(){var ap=this.options.columns||[];this.columns=v(ap,function(ar){ar=typeof ar==="string"?{field:ar}:ar;return f({encoded:true},ar)});var aq=this._lockedColumns();if(aq.length>0){this._hasLockedColumns=true;this.columns=aq.concat(this._nonLockedColumns())}this._ensureExpandableColumn();this._columnTemplates();this._columnAttributes()},_columnTemplates:function(){var ap,at,ar;var aq=this.columns;for(ap=0,at=aq.length;ap<at;ap++){ar=aq[ap];if(ar.template){ar.template=kendo.template(ar.template)}if(ar.headerTemplate){ar.headerTemplate=kendo.template(ar.headerTemplate)}if(ar.footerTemplate){ar.footerTemplate=kendo.template(ar.footerTemplate)}}},_columnAttributes:function(){var aq,at;var ar=this.columns;function ap(au){var ax,aw,ay;if(au&&au.style){ax=au.style.split(";");au.style={};for(aw=0;aw<ax.length;aw++){ay=ax[aw].split(":");var av=A.trim(ay[0]);if(av){au.style[A.camelCase(av)]=A.trim(ay[1])}}}}for(aq=0,at=ar.length;aq<at;aq++){ap(ar[aq].attributes);ap(ar[aq].headerAttributes)}},_layout:function(){var aq=this.columns;var ap=this.element;var at="";this.wrapper=ap.addClass(p.wrapper);at="<div class='#= gridHeader #'>";if(this._hasLockedColumns){at+="<div class='k-grid-header-locked'><table role='grid'><colgroup></colgroup><thead role='rowgroup' /></table></div>"}at+="<div class='#= gridHeaderWrap #'><table role='grid'><colgroup></colgroup><thead role='rowgroup' /></table></div></div>";if(this._hasLockedColumns){at+="<div class='k-grid-content-locked'><table role='treegrid' tabindex='0'><colgroup></colgroup><tbody /></table></div>"}at+="<div class='#= gridContentWrap # k-auto-scrollable'><table role='treegrid' tabindex='0'><colgroup></colgroup><tbody /></table></div>";if(!this.options.scrollable){at="<table role='treegrid' tabindex='0'><colgroup></colgroup><thead class='#= gridHeader #' role='rowgroup' /><tbody /></table>"}if(this.options.toolbar){at="<div class='#= header # #= gridToolbar #' />"+at}ap.append(kendo.template(at)(p)+"<div class='k-status' />");this.toolbar=ap.find(n+p.gridToolbar);var av=ap.find(n+p.gridHeader).find("thead").addBack().filter("thead");this.thead=av.last();if(this.options.scrollable){var au=kendo.support.isRtl(ap);ap.find("div."+p.gridHeader).css(au?"padding-left":"padding-right",kendo.support.scrollbar())}var ar=ap.find(n+p.gridContentWrap);if(!ar.length){ar=ap}else{this.content=ar}this.table=ar.find(">table");this.tbody=this.table.find(">tbody");if(this._hasLockedColumns){this.lockedHeader=av.first().closest(".k-grid-header-locked");this.lockedContent=ap.find(".k-grid-content-locked");this.lockedTable=this.lockedContent.children()}this._initVirtualTrees();this._renderCols();this._renderHeader();this.angular("compile",function(){return{elements:av.find("th.k-header").get(),data:v(aq,function(aw){return{column:aw}})}})},_initVirtualTrees:function(){this._headerColsTree=new j.Tree(this.thead.prev()[0]);this._contentColsTree=new j.Tree(this.tbody.prev()[0]);this._headerTree=new j.Tree(this.thead[0]);this._contentTree=new j.Tree(this.tbody[0]);this._statusTree=new j.Tree(this.element.children(".k-status")[0]);if(this.lockedHeader){this._lockedHeaderColsTree=new j.Tree(this.lockedHeader.find("colgroup")[0]);this._lockedContentColsTree=new j.Tree(this.lockedTable.find(">colgroup")[0]);this._lockedHeaderTree=new j.Tree(this.lockedHeader.find("thead")[0]);this._lockedContentTree=new j.Tree(this.lockedTable.find(">tbody")[0])}},_toolbar:function(){var ap=this.options.toolbar;var ar=this.toolbar;if(!ap){return}if(A.isArray(ap)){var aq=this._buildCommands(ap);new j.Tree(ar[0]).render(aq)}else{ar.append(kendo.template(ap)({}))}this.angular("compile",function(){return{elements:ar.get()}})},_lockedColumns:function(){return am(this.columns,s("locked"))},_nonLockedColumns:function(){return am(this.columns,aa(s("locked")))},_templateColumns:function(){return am(this.columns,s("template"))},_flushCache:function(){if(this.options.$angular&&this._templateColumns().length){this._contentTree.render([]);if(this._hasLockedColumns){this._lockedContentTree.render([])}}},_render:function(ap){ap=ap||{};var ar=this.options.messages;var at=this.dataSource.rootNodes();var au=kendo.attr("uid");var aq=this.select().removeClass("k-state-selected").map(function(av,aw){return A(aw).attr(au)});this._absoluteIndex=0;this._angularItems("cleanup");this._angularFooters("cleanup");this._flushCache();if(ap.error){this._showStatus(kendo.template("#: messages.requestFailed # <button class='#= buttonClass #'>#: messages.retry #</button>")({buttonClass:[p.button,p.retry].join(" "),messages:ar}))}else{if(!at.length){this._showStatus(kendo.htmlEncode(ar.noRows))}else{this._hideStatus();this._contentTree.render(this._trs({columns:this._nonLockedColumns(),aggregates:ap.aggregates,selected:aq,data:at,visible:true,level:0}));if(this._hasLockedColumns){this._absoluteIndex=0;this._lockedContentTree.render(this._trs({columns:this._lockedColumns(),aggregates:ap.aggregates,selected:aq,data:at,visible:true,level:0}))}}}if(this._touchScroller){this._touchScroller.contentResized()}this._muteAngularRebind(function(){this._angularItems("compile");this._angularFooters("compile")});this.items().filter(function(){return A.inArray(A(this).attr(au),aq)>=0}).addClass("k-state-selected");this._adjustRowsHeight()},_adjustRowsHeight:function(){if(!this._hasLockedColumns){return}var aB=this.table;var at=this.lockedTable;var aD=aB[0].rows;var aq=aD.length;var az;var au=at[0].rows;var ar=aB.add(at);var ax=ar.length;var ay=[];var av=this.lockedHeader.find("tr");var aw=this.thead.find("tr");av.add(aw).height("auto").height(Math.max(av.height(),aw.height()));for(az=0;az<aq;az++){if(!au[az]){break}if(aD[az].style.height){aD[az].style.height=au[az].style.height=""}}for(az=0;az<aq;az++){if(!au[az]){break}var ap=aD[az].offsetHeight;var aC=au[az].offsetHeight;var aA=0;if(ap>aC){aA=ap}else{if(ap<aC){aA=aC}}ay.push(aA)}for(az=0;az<ax;az++){ar[az].style.display="none"}for(az=0;az<aq;az++){if(ay[az]){aD[az].style.height=au[az].style.height=ay[az]+1+"px"}}for(az=0;az<ax;az++){ar[az].style.display=""}},_ths:function(au){var ap=[];var at,az,ar,ay,aw,ax;for(var av=0,aq=au.length;av<aq;av++){at=au[av];ar=[];ay=[p.header];if(at.headerTemplate){az=at.headerTemplate({})}else{az=at.title||at.field||""}if(at.headerTemplate){ax=i(az)}else{ax=X(az)}if(at.sortable){ar.push(N("a",{href:"#",className:p.link},[ax]))}else{ar.push(ax)}aw={"data-field":at.field,"data-title":at.title,style:at.hidden===true?{display:"none"}:{},className:ay.join(" "),role:"columnheader"};aw=f(true,{},aw,at.headerAttributes);ap.push(N("th",aw,ar))}return ap},_cols:function(ar){var au=[];var at,ap;for(var aq=0;aq<ar.length;aq++){if(ar[aq].hidden===true){continue}at=ar[aq].width;ap={};if(at&&parseInt(at,10)!==0){ap.style={width:typeof at==="string"?at:at+"px"}}au.push(N("col",ap))}return au},_renderCols:function(){var ap=this._nonLockedColumns();this._headerColsTree.render(this._cols(ap));if(this.options.scrollable){this._contentColsTree.render(this._cols(ap))}if(this._hasLockedColumns){ap=this._lockedColumns();this._lockedHeaderColsTree.render(this._cols(ap));this._lockedContentColsTree.render(this._cols(ap))}},_renderHeader:function(){var ap=this._nonLockedColumns();this._headerTree.render([N("tr",{role:"row"},this._ths(ap))]);if(this._hasLockedColumns){ap=this._lockedColumns();this._lockedHeaderTree.render([N("tr",{role:"row"},this._ths(ap))]);this._applyLockedContainersWidth()}},_applyLockedContainersWidth:function(){if(!this._hasLockedColumns){return}var aq=b(this.lockedHeader.find(">table>colgroup>col"));var ar=this.thead.parent();var au=b(ar.find(">colgroup>col"));var ap=this.wrapper[0].clientWidth;var av=kendo.support.scrollbar();if(aq>=ap){aq=ap-3*av}this.lockedHeader.add(this.lockedContent).width(aq);ar.add(this.table).width(au);var at=ap-aq-2;this.content.width(at);ar.parent().width(at-av)},_trs:function(aD){var aw,az,aA,ax,aB,av,ar;var aC=[];var aq=aD.level;var au=aD.data;var ap=this.dataSource;var ay=ap.aggregates()||{};var at=aD.columns;for(av=0,ar=au.length;av<ar;av++){aA=[];aw=au[av];aB=aw.loaded()&&ap.childNodes(aw);ax=aB&&aB.length;az={role:"row"};az[kendo.attr("uid")]=aw.uid;if(ax){az["aria-expanded"]=!!aw.expanded}if(aD.visible){if(this._absoluteIndex%2!==0){aA.push(p.alt)}this._absoluteIndex++}else{az.style={display:"none"}}if(A.inArray(aw.uid,aD.selected)>=0){aA.push(p.selected)}if(ax){aA.push(p.group)}if(aw._edit){aA.push("k-grid-edit-row")}az.className=aA.join(" ");aC.push(this._tds({model:aw,attr:az,level:aq},at,af(this._td,this)));if(ax){aC=aC.concat(this._trs({columns:at,aggregates:ay,selected:aD.selected,visible:aD.visible&&!!aw.expanded,data:aB,level:aq+1}))}}if(this._hasFooterTemplate()){az={className:p.footerTemplate,"data-parentId":aw.parentId};if(!aD.visible){az.style={display:"none"}}aC.push(this._tds({model:ay[aw.parentId],attr:az,level:aq},at,this._footerTd))}return aC},_footerTd:function(aq){var au=[];var at=aq.column;var ar=aq.column.footerTemplate||A.noop;var av=aq.model[at.field]||{};var ap={role:"gridcell",style:at.hidden===true?{display:"none"}:{}};if(at.expandable){au=au.concat(l({level:aq.level+1,className:p.iconPlaceHolder}))}if(at.attributes){f(ap,at.attributes)}au.push(i(ar(av)||""));return N("td",ap,au)},_hasFooterTemplate:function(){return !!am(this.columns,function(ap){return ap.footerTemplate}).length},_tds:function(aq,au,aw){var at=[];var av;for(var ar=0,ap=au.length;ar<ap;ar++){av=au[ar];at.push(aw({model:aq.model,column:av,level:aq.level}))}return N("tr",aq.attr,at)},_td:function(at){var au=[];var ar=at.model;var av=at.column;var aq;var ap={role:"gridcell",style:av.hidden===true?{display:"none"}:{}};if(ar._edit&&av.field&&ar.editable(av.field)){ap[kendo.attr("container-for")]=av.field}else{if(av.expandable){au=l({level:at.level,className:p.iconPlaceHolder});aq=[p.icon];if(ar.hasChildren){aq.push(ar.expanded?p.iconCollapse:p.iconExpand)}else{aq.push(p.iconHidden)}if(ar._error){aq.push(p.refresh)}else{if(!ar.loaded()&&ar.expanded){aq.push(p.loading)}}au.push(N("span",{className:aq.join(" ")}));ap.style["white-space"]="nowrap"}if(av.attributes){f(true,ap,av.attributes)}if(av.command){if(ar._edit){au=this._buildCommands(["update","canceledit"])}else{au=this._buildCommands(av.command)}}else{au.push(this._cellContent(av,ar))}}return N("td",ap,au)},_cellContent:function(aq,ap){var ar;if(aq.template){ar=aq.template(ap)}else{if(aq.field){ar=ap.get(aq.field);if(ar!==null&&aq.format){ar=kendo.format(aq.format,ar)}}}if(ar===null||typeof ar=="undefined"){ar=""}if(aq.template||!aq.encoded){return i(ar)}else{return X(ar)}},_buildCommands:function(aq){var ar,ap=[];for(ar=0;ar<aq.length;ar++){ap.push(this._button(aq[ar]))}return ap},_button:function(at){var ap=(at.name||at).toLowerCase();var ar=this.options.messages.commands[ap];var aq=[];at=f({},K[ap],{text:ar},at);if(at.imageClass){aq.push(N("span",{className:["k-icon",at.imageClass].join(" ")}))}return N("button",{type:"button","data-command":ap,className:["k-button","k-button-icontext",at.className].join(" ")},aq.concat([X(at.text||at.name)]))},_positionResizeHandle:function(az){var aq=A(az.currentTarget);var aB=this.resizeHandle;var ax=aq.position();var au=ax.left;var av=ad(aq);var ap=aq.closest("div");var ar=az.clientX+A(window).scrollLeft();var aw=this.options.columnResizeHandleWidth||3;au+=ap.scrollLeft();if(!aB){aB=this.resizeHandle=A('<div class="k-resize-handle"><div class="k-resize-handle-inner" /></div>')}var at=aq.offset().left+av;var aA=ar>at-aw&&ar<at+aw;if(!aA){aB.hide();return}ap.append(aB);aB.show().css({top:ax.top,left:au+av-aw-1,height:aj(aq),width:aw*3}).data("th",aq);var ay=this;aB.off("dblclick"+F).on("dblclick"+F,function(){var aC=aq.index();if(A.contains(ay.thead[0],aq[0])){aC+=am(ay.columns,function(aD){return aD.locked&&!aD.hidden}).length}ay.autoFitColumn(aC)})},autoFitColumn:function(aq){var ay=this,au=ay.options,ap=ay.columns,ax,aK=kendo.support.browser,aw,aD,aA,aI=ay.lockedHeader?O(ay.lockedHeader.find(">table>thead")).filter(D).length:0,av;if(typeof aq=="number"){aq=ap[aq]}else{if(ao(aq)){aq=am(ap,function(aN){return aN===aq})[0]}else{aq=am(ap,function(aN){return aN.field===aq})[0]}}if(!aq||aq.hidden){return}ax=ai(aq,ap);aA=aq.locked;if(aA){aD=ay.lockedHeader.children("table")}else{aD=ay.thead.parent()}aw=aD.find("[data-index='"+ax+"']");var aH=aA?ay.lockedTable:ay.table,aF=ay.footer||A();if(ay.footer&&ay.lockedContent){aF=aA?ay.footer.children(".k-grid-footer-locked"):ay.footer.children(".k-grid-footer-wrap")}var aL=aF.find("table").first();if(ay.lockedHeader&&aI>=ax&&!aA){ax-=aI}for(var aG=0;aG<ap.length;aG++){if(ap[aG]===aq){break}else{if(ap[aG].hidden){ax--}}}if(au.scrollable){av=aD.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+ax+")").add(aH.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+ax+")")).add(aL.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+ax+")"))}else{av=aH.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+ax+")")}var az=aD.add(aH).add(aL);var aM=ad(aw);av.width("");az.css("table-layout","fixed");av.width("auto");az.addClass("k-autofitting");az.css("table-layout","");var aB=Math.ceil(Math.max(ad(aw),ad(aH.find("tr").eq(0).children("td:visible").eq(ax)),ad(aL.find("tr").eq(0).children("td:visible").eq(ax))));av.width(aB);aq.width=aB;if(au.scrollable){var aC=aD.find("col"),aJ,ar=0;for(var aE=0,at=aC.length;aE<at;aE+=1){aJ=aC[aE].style.width;if(aJ&&aJ.indexOf("%")==-1){ar+=parseInt(aJ,10)}else{ar=0;break}}if(ar){az.each(function(){this.style.width=ar+"px"})}}if(aK.msie&&aK.version==8){az.css("display","inline-table");setTimeout(function(){az.css("display","table")},1)}az.removeClass("k-autofitting");ay.trigger(T,{column:aq,oldWidth:aM,newWidth:aB});ay._applyLockedContainersWidth();ay._syncLockedContentHeight();ay._syncLockedHeaderHeight()},_adjustLockedHorizontalScrollBar:function(){var aq=this.table,ap=aq.parent();var ar=aq[0].offsetWidth>ap[0].clientWidth?kendo.support.scrollbar():0;this.lockedContent.height(ap.height()-ar)},_syncLockedContentHeight:function(){if(this.lockedTable){if(!this._touchScroller){this._adjustLockedHorizontalScrollBar()}this._adjustRowsHeight(this.table,this.lockedTable)}},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var ap=this.lockedHeader.children("table");var aq=this.thead.parent();this._adjustRowsHeight(ap,aq);ae(ap,aq)}},_resizable:function(){if(!this.options.resizable){return}if(this.resizable){this.resizable.destroy()}var ap=this;A(this.lockedHeader).find("thead").add(this.thead).on("mousemove"+F,"th",A.proxy(this._positionResizeHandle,this));this.resizable=new kendo.ui.Resizable(this.wrapper,{handle:".k-resize-handle",start:function(au){var at=A(au.currentTarget).data("th");var ar="col:eq("+A.inArray(at[0],at.parent().children().filter(":visible"))+")";var av,aq;ap.wrapper.addClass("k-grid-column-resizing");if(ap.lockedHeader&&A.contains(ap.lockedHeader[0],at[0])){av=ap.lockedHeader;aq=ap.lockedTable}else{av=ap.thead.parent();aq=ap.table}this.col=aq.children("colgroup").find(ar).add(av.find(ar));this.th=at;this.startLocation=au.x.location;this.columnWidth=ad(at);this.table=this.col.closest("table");this.totalWidth=this.table.width()},resize:function(ar){var aq=11;var at=ar.x.location-this.startLocation;if(this.columnWidth+at<aq){at=aq-this.columnWidth}this.table.width(this.totalWidth+at);this.col.width(this.columnWidth+at)},resizeend:function(){ap.wrapper.removeClass("k-grid-column-resizing");var at=this.th.attr("data-field");var aq=am(ap.columns,function(au){return au.field==at});var ar=Math.floor(ad(this.th));aq[0].width=ar;ap._resize();ap._adjustRowsHeight();ap.trigger(T,{column:aq,oldWidth:this.columnWidth,newWidth:ar});this.table=this.col=this.th=null}})},_sortable:function(){var ar=this.columns;var aq;var ay;var ax=A(this.lockedHeader).add(this.thead).find("th");var aw,av,ap;var au=kendo.attr("field");var at=this.options.sortable;if(!at){return}for(av=0,ap=ax.length;av<ap;av++){aq=ar[av];if(aq.sortable!==false&&!aq.command&&aq.field){aw=ax.eq(av);ay=aw.data("kendoColumnSorter");if(ay){ay.destroy()}aw.attr(au,aq.field).kendoColumnSorter(f({},at,aq.sortable,{dataSource:this.dataSource}))}}},_filterable:function(){var ar=A(this.lockedHeader).add(this.thead).find("th");var av=this.options.filterable;var aq,au,at,ap,aw;if(!av||this.options.columnMenu){return}var ax=af(function(ay){this.trigger(u,{field:ay.field,container:ay.container})},this);for(aq=0,au=ar.length;aq<au;aq++){at=this.columns[aq];ap=ar.eq(aq);aw=ap.data("kendoFilterMenu");if(aw){aw.destroy()}if(at.command||at.filterable===false){continue}ap.kendoFilterMenu(f(true,{},av,at.filterable,{dataSource:this.dataSource,init:ax}))}},_change:function(){this.trigger(y)},_selectable:function(){var aq=this.options.selectable;var at;var ar=this.table;var ap;if(aq){aq=kendo.ui.Selectable.parseOptions(aq);if(this._hasLockedColumns){ar=ar.add(this.lockedTable);ap=aq.multiple&&aq.cell}at=">tbody>tr:not(.k-footer-template)";if(aq.cell){at=at+">td"}this.selectable=new kendo.ui.Selectable(ar,{filter:at,aria:true,multiple:aq.multiple,change:af(this._change,this),useAllItems:ap,continuousItems:af(this._continuousItems,this,at,aq.cell),relatedTarget:!aq.cell&&this._hasLockedColumns?af(this._selectableTarget,this):g})}},_continuousItems:function(au,ar){if(!this.lockedContent){return}var ax=A(au,this.lockedTable);var aw=A(au,this.table);var at=ar?this._lockedColumns().length:1;var av=ar?this.columns.length-at:1;var aq=[];for(var ap=0;ap<ax.length;ap+=at){Z.apply(aq,ax.slice(ap,ap+at));Z.apply(aq,aw.splice(0,av))}return aq},_selectableTarget:function(ar){var au;var aq=A();for(var ap=0,at=ar.length;ap<at;ap++){au=this._relatedRow(ar[ap]);if(ai(au[0],ar)<0){aq=aq.add(au)}}return aq},_relatedRow:function(at){var aq=this.lockedTable;at=A(at);if(!aq){return at}var ar=at.closest(this.table.add(this.lockedTable));var ap=ar.find(">tbody>tr").index(at);ar=ar[0]===this.table[0]?aq:this.table;return ar.find(">tbody>tr").eq(ap)},select:function(aq){var ap=this.selectable;if(!ap){return A()}if(typeof aq!=="undefined"){if(!ap.options.multiple){ap.clear();aq=aq.first()}if(this._hasLockedColumns){aq=aq.add(A.map(aq,af(this._relatedRow,this)))}}return ap.value(aq)},clearSelection:function(){var ap=this.select();if(ap.length){this.selectable.clear();this.trigger(y)}},_dataSource:function(aq){var ap=this.dataSource;if(ap){ap.unbind(y,this._refreshHandler);ap.unbind(C,this._errorHandler);ap.unbind(r,this._progressHandler)}this._refreshHandler=af(this.refresh,this);this._errorHandler=af(this._error,this);this._progressHandler=af(this._progress,this);ap=this.dataSource=Y.create(aq);ap.bind(y,this._refreshHandler);ap.bind(C,this._errorHandler);ap.bind(r,this._progressHandler);this._dataSourceFetchProxy=af(function(){this.dataSource.fetch()},this)},setDataSource:function(ap){this._dataSource(ap);this._sortable();this._filterable();this._contentTree.render([]);if(this.options.autoBind){this.dataSource.fetch()}},dataItem:function(aq){if(aq instanceof ak){return aq}var ar=A(aq).closest("tr");var ap=this.dataSource.getByUid(ar.attr(kendo.attr("uid")));return ap},editRow:function(aq){var ap;if(typeof aq===ag){aq=this.tbody.find(aq)}ap=this.dataItem(aq);if(!ap){return}if(this._editMode()!="popup"){ap._edit=true}this._cancelEditor();this._render();this._createEditor(ap);this.trigger(Q,{container:this.editor.wrapper,model:ap})},_cancelEdit:function(ap){ap=f(ap,{container:this.editor.wrapper,model:this.editor.model});if(this.trigger(L,ap)){return}this.cancelRow()},cancelRow:function(){this._cancelEditor();this._render()},saveRow:function(){var aq=this.editor;var ap;if(!aq){return}ap={model:aq.model,container:aq.wrapper};if(aq.end()&&!this.trigger(S,ap)){this.dataSource.sync()}},addRow:function(at){var ar=this.editor;var aq=0;var ap={};if(ar&&!ar.end()){return}if(at){if(!(at instanceof ak)){at=this.dataItem(at)}ap[at.parentIdField]=at.id;aq=this.dataSource.indexOf(at)+1;this.expand(at).then(af(this._insertAt,this,ap,aq));return}this._insertAt(ap,aq)},_insertAt:function(aq,ap){aq=this.dataSource.insert(ap,aq);var ar=this.itemFor(aq);this.editRow(ar)},removeRow:function(ar){var aq=this.dataItem(ar);var ap={model:aq,row:ar};if(aq&&!this.trigger(c,ap)){this.dataSource.remove(aq);this.dataSource.sync()}},_cancelEditor:function(){var ap;var aq=this.editor;if(aq){ap=aq.model;this._destroyEditor();this.dataSource.cancelChanges(ap);ap._edit=false}},_destroyEditor:function(){if(!this.editor){return}this.editor.close();this.editor=null},_createEditor:function(aq){var at=this.itemFor(aq);at=at.add(this._relatedRow(at));var ar=this._editMode();var ap={columns:this.columns,model:aq,target:this,clearContainer:false,template:this.options.editable.template};if(ar=="inline"){this.editor=new o(at,ap)}else{f(ap,{window:this.options.editable.window,commandRenderer:af(function(){return this._buildCommands(["update","canceledit"])},this),fieldRenderer:this._cellContent,save:af(this.saveRow,this),cancel:af(this._cancelEdit,this),appendTo:this.wrapper});this.editor=new z(at,ap)}},_editMode:function(){var aq="inline",ap=this.options.editable;if(ap!==true){if(typeof ap=="string"){aq=ap}else{aq=ap.mode||aq}}return aq.toLowerCase()},hideColumn:function(ap){this._toggleColumnVisibility(ap,true)},showColumn:function(ap){this._toggleColumnVisibility(ap,false)},_toggleColumnVisibility:function(ap,aq){ap=this._findColumn(ap);if(!ap||ap.hidden===aq){return}ap.hidden=aq;this._ensureExpandableColumn();this._renderCols();this._renderHeader();this._render();this._adjustTablesWidth();this.trigger(aq?h:d,{column:ap});if(!aq&&!ap.width){this.table.add(this.thead.closest("table")).width("")}},_findColumn:function(ap){if(typeof ap=="number"){ap=this.columns[ap]}else{if(ao(ap)){ap=am(this.columns,function(aq){return aq===ap})[0]}else{ap=am(this.columns,function(aq){return aq.field===ap})[0]}}return ap},_adjustTablesWidth:function(){var ap,at;var au=this.thead.prev().children();var ar,aq=0;for(ap=0,at=au.length;ap<at;ap++){ar=au[ap].style.width;if(ar&&ar.indexOf("%")==-1){aq+=parseInt(ar,10)}else{aq=0;break}}if(aq){this.table.add(this.thead.closest("table")).width(aq)}},_reorderable:function(){if(!this.options.reorderable){return}var ar=this.options.scrollable===true;var ap=(ar?".k-grid-header:first ":"table:first>.k-grid-header ")+U;var aq=this;this._draggableInstance=new M.Draggable(this.wrapper,{group:kendo.guid(),filter:ap,hint:function(at){return A('<div class="k-header k-drag-clue" />').css({width:at.width(),paddingLeft:at.css("paddingLeft"),paddingRight:at.css("paddingRight"),lineHeight:at.height()+"px",paddingTop:at.css("paddingTop"),paddingBottom:at.css("paddingBottom")}).html(at.attr(kendo.attr("title"))||at.attr(kendo.attr("field"))||at.text()).prepend('<span class="k-icon k-drag-status k-i-cancel" />')}});this.reorderable=new M.Reorderable(this.wrapper,{draggable:this._draggableInstance,dragOverContainers:af(this._allowDragOverContainers,this),inSameContainer:function(at){return A(at.source).parent()[0]===A(at.target).parent()[0]},change:function(aw){var at=aw.newIndex;var ax=aw.oldIndex;var av=aw.position==="before";var au=aq.columns[ax];aq.trigger(ah,{newIndex:at,oldIndex:ax,column:au});aq.reorderColumn(at,au,av)}})},_allowDragOverContainers:function(ap){return this.columns[ap].lockable!==false},reorderColumn:function(av,at,az){var ar;var au=this.columns;var ax=ai(at,au);var ay=au[av];var aq=!!ay.locked;var aA=this._nonLockedColumns().length;if(ax===av){return}if(aq&&!at.locked&&aA==1){return}if(!aq&&at.locked&&au.length-aA==1){return}if(az===g){az=av<ax}ar=!!at.locked;ar=ar!=aq;at.locked=aq;au.splice(az?av:av+1,0,at);au.splice(ax<av?ax:ax+1,1);this._renderCols();var ap=A(this.lockedHeader).add(this.thead).find("th");ap.eq(ax)[az?"insertBefore":"insertAfter"](ap.eq(av));var aw=this._headerTree.children[0].children;if(this._hasLockedColumns){aw=this._lockedHeaderTree.children[0].children.concat(aw)}aw.splice(az?av:av+1,0,aw[ax]);aw.splice(ax<av?ax:ax+1,1);if(this._hasLockedColumns){this._lockedHeaderTree.children[0].children=aw.splice(0,this._lockedColumns().length);this._headerTree.children[0].children=aw}this._applyLockedContainersWidth();this.refresh();if(!ar){return}if(aq){this.trigger(t,{column:at})}else{this.trigger(P,{column:at})}},lockColumn:function(ar){var aq=this.columns;if(typeof ar=="number"){ar=aq[ar]}else{ar=am(aq,function(at){return at.field===ar})[0]}if(!ar||ar.hidden){return}var ap=this._lockedColumns().length-1;this.reorderColumn(ap,ar,false)},unlockColumn:function(ar){var aq=this.columns;if(typeof ar=="number"){ar=aq[ar]}else{ar=am(aq,function(at){return at.field===ar})[0]}if(!ar||ar.hidden){return}var ap=this._lockedColumns().length;this.reorderColumn(ap,ar,true)},_columnMenu:function(){var aq=A(this.lockedHeader).add(this.thead).find("th");var ax=this.columns;var aB=this.options;var av=aB.columnMenu;var aw,at,au,az,ap;var aA=af(this._columnMenuInit,this);var ar=this._lockedColumns().length;if(!av){return}if(typeof av=="boolean"){av={}}for(var ay=0;ay<aq.length;ay++){aw=ax[ay];if(!aw.field){continue}at=aq.eq(ay).data("kendoColumnMenu");if(at){at.destroy()}az=false;if(aw.sortable!==false&&av.sortable!==false&&aB.sortable!==false){az=f({},aB.sortable,{compare:(aw.sortable||{}).compare})}ap=false;if(aB.filterable&&aw.filterable!==false&&av.filterable!==false){ap=f({pane:this.pane},aw.filterable,aB.filterable)}au={dataSource:this.dataSource,values:aw.values,columns:av.columns,sortable:az,filterable:ap,messages:av.messages,owner:this,closeCallback:A.noop,init:aA,pane:this.pane,lockedColumns:aw.lockable!==false&&ar>0};if(aB.$angular){au.$angular=aB.$angular}aq.eq(ay).kendoColumnMenu(au)}},_columnMenuInit:function(ap){this.trigger(an,{field:ap.field,container:ap.container})}});if(kendo.ExcelMixin){kendo.ExcelMixin.extend(B.prototype)}if(kendo.PDFMixin){kendo.PDFMixin.extend(B.prototype);B.fn._drawPDF=function(ap){var aq=new A.Deferred();this._drawPDFShadow({width:this.wrapper.width()},{avoidLinks:this.options.pdf.avoidLinks}).done(function(at){var ar={page:at,pageNumber:1,progress:1,totalPages:1};ap.notify(ar);aq.resolve(ar.page)}).fail(function(ar){aq.reject(ar)});return aq}}f(true,kendo.data,{TreeListDataSource:Y,TreeListModel:ak});f(true,kendo.ui,{TreeList:B});M.plugin(B)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("util/main",["kendo.core"],a)}(function(){(function(){var e=window.kendo,c=e.deepExtend;function i(l){return l*l}var b=Date.now;if(!b){b=function(){return new Date().getTime()}}function d(l){if(typeof l!=="string"){l+="px"}return l}function g(o){var l=[];if(o){var n=e.toHyphens(o).split("-");for(var m=0;m<n.length;m++){l.push("k-pos-"+n[m])}}return l.join(" ")}function a(p){var m={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1000:"m"};var l=[1000,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1];var o="";while(p>0){if(p<l[0]){l.shift()}else{o+=m[l[0]];p-=l[0]}}return o}function k(o){o=o.toLowerCase();var q={i:1,v:5,x:10,l:50,c:100,d:500,m:1000};var p=0,n=0;for(var m=0;m<o.length;++m){var l=q[o.charAt(m)];if(!l){return null}p+=l;if(l>n){p-=2*n}n=l}return p}function f(m){var l=Object.create(null);return function(){var o="";for(var n=arguments.length;--n>=0;){o+=":"+arguments[n]}return o in l?l[o]:l[o]=m.apply(this,arguments)}}function j(l){return h.test(l)}c(e,{util:{now:b,renderPos:g,renderSize:d,sqr:i,romanToArabic:k,arabicToRoman:a,memoize:f,isUnicodeLetter:j}});var h=new RegExp("[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]")}());return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("util/parse-xml",["kendo.core","util/main"],a)}(function(){var o=String.fromCharCode;var s={amp:38,lt:60,gt:62,quot:34,apos:39,nbsp:160};function k(B){var z=[];for(var A=0;A<B.length;++A){z.push(B.charCodeAt(A))}return z}function w(z,A){if(A>65535){A-=65536;z.push(A>>>10&1023|55296,56320|A&1023)}else{z.push(A)}}var c=k("<![CDATA[");var x=k("]]>");var t=k("-->");var r=k("!--");var j=k("/>");var g=k("</");var l=k("?>");var i=k("?");var q=k("<");var h=k(">");var e=k(";");var f=k("=");var v=k("&");var n=k('"');var y=k("'");var d=k("#");var u=k("x");var b=k("X");var a={};function p(W,V){var H=0;var G=[];var X={is:function(aa){var ac=G.length,ab=aa.length;while(--ac>=0&&--ab>=0){if(G[ac].$tag!=aa[ab]&&aa[ab]!="*"){return false}}return ab<0?G[G.length-1]:null},exit:function(){throw a},stack:G};function C(aa){var ab=W[H++];if(!(ab&240^240)){w(aa,(ab&3)<<18|(W[H++]&63)<<12|(W[H++]&63)<<6|W[H++]&63)}else{if(!(ab&224^224)){w(aa,(ab&15)<<12|(W[H++]&63)<<6|W[H++]&63)}else{if(!(ab&192^192)){w(aa,(ab&31)<<6|W[H++]&63)}else{aa.push(ab)}}}}function E(aa){throw new Error(aa+", at "+H)}function L(ab){var aa=[];while(H<W.length&&ab(W[H])){aa.push(W[H++])}return aa}function U(aa){return o.apply(0,L(aa))}function Z(){L(F)}function J(aa){var ac=H;for(var ab=0;ab<aa.length;++ab){if(W[H++]!=aa[ab]){H=ac;return false}}return aa}function O(aa){if(!J(aa)){E("Expecting "+aa.join(", "))}}function F(aa){return aa==9||aa==10||aa==13||aa==32}function Q(aa){return aa>=48&&aa<=57}function R(aa){return aa>=48&&aa<=57||(aa|=32)>=97&&aa<=102}function Y(aa){return aa==58||aa==95||(aa|=32)>=97&&aa<=122}function z(aa){return aa==45||Q(aa)||Y(aa)}function B(){var aa=[];while(H<W.length){if(J(t)){return S("comment",o.apply(0,aa))}C(aa)}}function I(){var ab,aa;if(J(i)){N()}else{if(J(r)){B()}else{ab=K();aa=A(ab);G.push(aa);if(J(j)){S("enter",ab,aa,true)}else{O(h);S("enter",ab,aa);P(ab);if(ab!=K()){E("Bad closing tag")}S("leave",ab,aa);Z();O(h)}G.pop()}}}function P(ab){var aa=[];while(H<W.length){if(J(g)){return aa.length&&S("text",o.apply(0,aa))}else{if(J(c)){while(H<W.length&&!J(x)){C(aa)}}else{if(J(q)){if(aa.length){S("text",o.apply(0,aa))}I();aa=[]}else{if(J(v)){D(aa)}else{C(aa)}}}}}E("Unclosed tag "+ab)}function K(){if(!Y(W[H])){E("Expecting XML name")}return U(z)}function M(){var ab=J(n)||J(y);if(!ab){E("Expecting string")}var aa=[];while(H<W.length){if(J(ab)){return o.apply(0,aa)}else{if(J(v)){D(aa)}else{C(aa)}}}E("Unfinished string")}function D(aa){var ac;if(J(d)){if(J(u)||J(b)){ac=parseInt(U(R),16)}else{ac=parseInt(U(Q),10)}if(isNaN(ac)){E("Bad numeric entity")}}else{var ab=K();ac=s[ab];if(ac===undefined){E("Unknown entity "+ab)}}w(aa,ac);O(e)}function N(){S("decl",K(),A());O(l)}function A(aa){var ac={$tag:aa};while(H<W.length){Z();var ab=W[H];if(ab==63||ab==62||ab==47){break}ac[K()]=(O(f),M())}return ac}function S(ae,ac,ab,aa){var ad=V&&V[ae];if(ad){ad.call(X,ac,ab,aa)}}var T=[];C(T);if(T[0]!=65279){H=0}while(H<W.length){Z();O(q);I();Z()}}kendo.util.parseXML=function m(){try{return p.apply(this,arguments)}catch(z){if(z!==a){throw z}}}},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/commands",["kendo.core","kendo.binder","kendo.window","kendo.list","kendo.tabstrip"],a)}(function(){(function(h){if(h.support.browser.msie&&h.support.browser.version<9){return}var e=h.jQuery;var b=h.spreadsheet.Command=h.Class.extend({init:function(k){this.options=k;this._workbook=k.workbook;this._property=k&&k.property;this._state={}},range:function(k){if(k!==undefined){this._setRange(k)}return this._range},_setRange:function(k){this._range=k},redo:function(){this.exec()},undo:function(){this.setState(this._state)},getState:function(){this._state=this.range().getState(this._property)},setState:function(k){this.range().setState(k)},_forEachCell:function(m){var k=this.range();var l=k._ref;l.forEach(function(n){k.sheet().forEach(n.toRangeRef(),m.bind(this))}.bind(this))}});var j=b.extend({init:function(k){b.fn.init.call(this,k);this._target=k.target;this._value=k.value},exec:function(){this.getState();this.setState(this._value)}});h.spreadsheet.ColumnWidthCommand=j.extend({getState:function(){this._state=this.range().sheet().columnWidth(this._target)},setState:function(k){this.range().sheet().columnWidth(this._target,k)}});h.spreadsheet.RowHeightCommand=j.extend({getState:function(){this._state=this.range().sheet().rowHeight(this._target)},setState:function(k){this.range().sheet().rowHeight(this._target,k)}});h.spreadsheet.HyperlinkCommand=b.extend({init:function(k){b.fn.init.call(this,k);this._link=k.link},exec:function(){var k=this.range();this._prevLink=k.link();this._prevUnderline=k.underline();k.link(this._link);k.underline(true);if(k.value()==null){this._hasSetValue=true;k.value(this._link)}},undo:function(){var k=this.range();k.link(this._prevLink);k.underline(this._prevUnderline);if(this._hasSetValue){k.value(null)}}});h.spreadsheet.GridLinesChangeCommand=j.extend({getState:function(){this._state=this._range.sheet().showGridLines()},setState:function(k){this._range.sheet().showGridLines(k)}});var g=h.spreadsheet.PropertyChangeCommand=b.extend({_setRange:function(k){b.prototype._setRange.call(this,k.skipHiddenCells())},init:function(k){b.fn.init.call(this,k);this._value=k.value},exec:function(){var k=this.range();if(k.enable()){this.getState();if(this.options.property==="format"){this._workbook.trigger("changeFormat",{range:k})}k[this._property](this._value)}}});h.spreadsheet.ClearContentCommand=b.extend({exec:function(){this.getState();this.range().clearContent()}});h.spreadsheet.EditCommand=g.extend({init:function(k){k.property=k.property||"input";g.fn.init.call(this,k)},rejectState:function(k){this.undo();return{title:k.title,body:k.message,reason:"error",type:"validationError"}},getState:function(){this._state=this.range().getState()},exec:function(){var l=this.range();if(!l.enable()){return{reason:"error",type:"rangeDisabled"}}var n=this._value;this.getState();if(this._property=="value"){l.value(n);return}try{l.link(null);if(n===""){l.value(null)}else{l.input(n);if(/\n/.test(l.value())){l.wrap(true)}}l._adjustRowHeight();var k=l._getValidationState();if(k){return this.rejectState(k)}}catch(m){if(m instanceof h.spreadsheet.calc.ParseError){return{title:"Error in formula",body:m+"",reason:"error"}}else{throw m}}}});h.spreadsheet.TextWrapCommand=g.extend({init:function(k){k.property="wrap";g.fn.init.call(this,k);this._value=k.value},getState:function(){var k={};this.range().forEachRow(function(l){var m=l.topLeft().row;k[m]=l.sheet().rowHeight(m)});this._state=this.range().getState(this._property);this._rowHeight=k},undo:function(){var k=this.range().sheet();var l=this._rowHeight;this.range().setState(this._state);for(var m in l){k.rowHeight(m,l[m])}}});h.spreadsheet.AdjustDecimalsCommand=b.extend({init:function(k){this._decimals=k.value;k.property="format";b.fn.init.call(this,k)},exec:function(){var m=this.range().sheet();var k=this._decimals;var l=h.spreadsheet.formatting;this.getState();m.batch(function(){this.range().forEachCell(function(q,o,n){var p=n.format;if(p||k>0){p=l.adjustDecimals(p||"#",k);m.range(q,o).format(p)}})}.bind(this))}});h.spreadsheet.BorderChangeCommand=b.extend({init:function(k){k.property="border";b.fn.init.call(this,k);this._type=k.border;this._style=k.style},exec:function(){this.getState();this[this._type](this._style)},noBorders:function(){var k=this.range();k.sheet().batch(function(){k.borderLeft(null).borderTop(null).borderRight(null).borderBottom(null)}.bind(this),{})},allBorders:function(l){var k=this.range();k.sheet().batch(function(){k.borderLeft(l).borderTop(l).borderRight(l).borderBottom(l)}.bind(this),{})},leftBorder:function(k){this.range().leftColumn().borderLeft(k)},rightBorder:function(k){this.range().rightColumn().borderRight(k)},topBorder:function(k){this.range().topRow().borderTop(k)},bottomBorder:function(k){this.range().bottomRow().borderBottom(k)},outsideBorders:function(l){var k=this.range();k.sheet().batch(function(){k.leftColumn().borderLeft(l);k.topRow().borderTop(l);k.rightColumn().borderRight(l);k.bottomRow().borderBottom(l)}.bind(this),{})},insideBorders:function(k){this.range().sheet().batch(function(){this.allBorders(k);this.outsideBorders(null)}.bind(this),{})},insideHorizontalBorders:function(l){var k=this.range();k.sheet().batch(function(){k.borderBottom(l);k.bottomRow().borderBottom(null)}.bind(this),{})},insideVerticalBorders:function(l){var k=this.range();k.sheet().batch(function(){k.borderRight(l);k.rightColumn().borderRight(null)}.bind(this),{})}});h.spreadsheet.MergeCellCommand=b.extend({init:function(k){b.fn.init.call(this,k);this._type=k.value},exec:function(){this.getState();this[this._type]()},activate:function(k){this.range().sheet().activeCell(k)},getState:function(){this._state=this.range().getState()},undo:function(){if(this._type!=="unmerge"){this.range().unmerge();this.activate(this.range().topLeft())}this.range().setState(this._state)},cells:function(){var k=this.range();var l=k._ref;k.merge();this.activate(l)},horizontally:function(){var k=this.range().topRow()._ref;this.range().forEachRow(function(l){l.merge()});this.activate(k)},vertically:function(){var k=this.range().leftColumn()._ref;this.range().forEachColumn(function(l){l.merge()});this.activate(k)},unmerge:function(){var k=this.range();var l=k._ref.topLeft;k.unmerge();this.activate(l)}});h.spreadsheet.FreezePanesCommand=b.extend({init:function(k){b.fn.init.call(this,k);this._type=k.value},exec:function(){this.getState();this._topLeft=this.range().topLeft();this[this._type]()},getState:function(){this._state=this.range().sheet().getState()},undo:function(){this.range().sheet().setState(this._state)},panes:function(){var l=this._topLeft;var k=this.range().sheet();k.frozenColumns(l.col).frozenRows(l.row)},rows:function(){var l=this._topLeft;var k=this.range().sheet();k.frozenRows(l.row)},columns:function(){var l=this._topLeft;var k=this.range().sheet();k.frozenColumns(l.col)},unfreeze:function(){var k=this.range().sheet();k.frozenRows(0).frozenColumns(0)}});h.spreadsheet.PasteCommand=b.extend({init:function(k){b.fn.init.call(this,k);this._clipboard=k.workbook.clipboard();this._event=k.event},getState:function(){this._range=this._workbook.activeSheet().range(this._clipboard.pasteRef());this._state=this._range.getState()},exec:function(){this.getState();this._clipboard.parse();var k=this._clipboard.canPaste();if(!k.canPaste){if(k.menuInvoked){return{reason:"error",type:"useKeyboard"}}if(k.pasteOnMerged){return{reason:"error",type:"modifyMerged"}}if(k.overflow){return{reason:"error",type:"overflow"}}if(k.pasteOnDisabled){this._event.preventDefault();return{reason:"error",type:"cannotModifyDisabled"}}return{reason:"error"}}var l=this._workbook.activeSheet().selection();var m=this._workbook.trigger("paste",{range:l});if(m){this._event.preventDefault()}else{this._clipboard.paste();l._adjustRowHeight()}}});h.spreadsheet.AdjustRowHeightCommand=b.extend({exec:function(){var l=this.options;var m=this._workbook.activeSheet();var k=l.range||m.range(l.rowIndex);k._adjustRowHeight()}});h.spreadsheet.ToolbarPasteCommand=b.extend({exec:function(){if(h.support.clipboard.paste){this._workbook._view.clipboard.focus().select();document.execCommand("paste")}else{return{reason:"error",type:"useKeyboard"}}}});h.spreadsheet.CopyCommand=b.extend({init:function(k){b.fn.init.call(this,k);this._clipboard=k.workbook.clipboard();this._event=k.event},undo:e.noop,exec:function(){var k=this._clipboard.canCopy();this._clipboard.menuInvoked=true;if(!k.canCopy){if(k.menuInvoked){return{reason:"error",type:"useKeyboard"}}else{if(k.multiSelection){return{reason:"error",type:"unsupportedSelection"}}}return}var l=this._workbook.activeSheet().selection();var m=this._workbook.trigger("copy",{range:l});if(m){this._event.preventDefault()}else{this._clipboard.copy()}}});function d(l){var k=document.createElement("textarea");e(k).addClass("k-spreadsheet-clipboard").val(l).appendTo(document.body).focus().select();document.execCommand("copy");e(k).remove()}h.spreadsheet.ToolbarCopyCommand=b.extend({init:function(k){b.fn.init.call(this,k);this._clipboard=k.workbook.clipboard()},undo:e.noop,exec:function(){if(h.support.clipboard.copy){var k=this._workbook._view.clipboard;d(k.html());k.trigger("copy")}else{return{reason:"error",type:"useKeyboard"}}}});h.spreadsheet.CutCommand=b.extend({init:function(k){b.fn.init.call(this,k);this._clipboard=k.workbook.clipboard();this._event=k.event},exec:function(){if(!(this.range().enable()&&this._clipboard.canCopy())){this._event.preventDefault();return{reason:"error",type:"cannotModifyDisabled"}}this.getState();var k=this._workbook.activeSheet().selection();var l=this._workbook.trigger("cut",{range:k});if(l){this._event.preventDefault();return}this._clipboard.cut()}});h.spreadsheet.AutoFillCommand=b.extend({init:function(k){b.fn.init.call(this,k)},origin:function(k){this._origin=k},exec:function(){var k=this.range();if(!k.enable()){return{reason:"error",type:"rangeDisabled"}}this.getState();try{k.fillFrom(this._origin)}catch(l){if(l instanceof h.spreadsheet.Range.FillError){return{reason:"error",type:l.code}}throw l}}});h.spreadsheet.ToolbarCutCommand=b.extend({init:function(k){b.fn.init.call(this,k);this._clipboard=k.workbook.clipboard()},exec:function(){if(h.support.clipboard.copy){var k=this._workbook._view.clipboard;d(k.html());k.trigger("cut")}else{return{reason:"error",type:"useKeyboard"}}}});h.spreadsheet.FilterCommand=b.extend({undo:function(){this.range().filter(this._state)},exec:function(){var k=this.range();this._state=k.hasFilter();k.filter(!this._state)}});h.spreadsheet.SortCommand=b.extend({undo:function(){var k=this.range().sheet();k.setState(this._state)},exec:function(){var k=this.range();var n=k.sheet();var m=n.activeCell();var l=this.options.sheet?m.topLeft.col:this.options.column||0;var o=this.options.value==="asc"?true:false;this._state=n.getState();if(this.options.sheet){k=this.expandRange()}var p=k.cantSort();if(p){return{reason:"error",type:p.code}}k.sort({column:l,ascending:o})},expandRange:function(){var k=this.range().sheet();return new h.spreadsheet.Range(k._sheetRef,k)}});var c=h.spreadsheet.ApplyFilterCommand=b.extend({column:function(){return this.options.column||0},undo:function(){var k=this.range().sheet();k.clearFilter(this.column());if(this._state.length){this.range().filter(this._state)}},getState:function(){var k=this.range().sheet();var l=k.filter();if(l){this._state=l.columns.filter(function(m){return m.index==this.column()}.bind(this))}},exec:function(){var k=this.range();var m=this.column();var o=k.sheet().filter();var l;var p;var n=false;if(this.options.valueFilter){p={column:m,filter:new h.spreadsheet.ValueFilter(this.options.valueFilter)}}else{if(this.options.customFilter){p={column:m,filter:new h.spreadsheet.CustomFilter(this.options.customFilter)}}}this.getState();if(o&&o.ref.eq(k._ref)&&o.columns.length){o.columns.forEach(function(q){if(q.index===m){n=true}});l=o.columns.map(function(q){return q.index===m?p:{column:q.index,filter:q.filter}});if(!n){l.push(p)}}else{l=p}k.filter(l)}});h.spreadsheet.ClearFilterCommand=c.extend({exec:function(){var k=this.range();var l=this.column();this.getState();k.clearFilter(l)}});h.spreadsheet.HideLineCommand=b.extend({init:function(k){b.fn.init.call(this,k);this.axis=k.axis},undo:function(){var k=this.range().sheet();k.setAxisState(this._state)},exec:function(){var k=this.range().sheet();this._state=k.getAxisState();if(this.axis=="row"){k.axisManager().hideSelectedRows()}else{k.axisManager().hideSelectedColumns()}}});h.spreadsheet.UnHideLineCommand=h.spreadsheet.HideLineCommand.extend({exec:function(){var k=this.range().sheet();this._state=k.getAxisState();if(this.axis=="row"){k.axisManager().unhideSelectedRows()}else{k.axisManager().unhideSelectedColumns()}}});var i=h.spreadsheet.DeleteCommand=b.extend({undo:function(){var k=this.range().sheet();k.setState(this._state)}});h.spreadsheet.DeleteRowCommand=i.extend({exec:function(){var k=this.range().sheet();this._state=k.getState();k.axisManager().deleteSelectedRows()}});h.spreadsheet.DeleteColumnCommand=i.extend({exec:function(){var k=this.range().sheet();this._state=k.getState();k.axisManager().deleteSelectedColumns()}});var a=b.extend({init:function(k){b.fn.init.call(this,k);this._value=k.value},undo:function(){var k=this.range().sheet();k.setState(this._state)}});h.spreadsheet.AddColumnCommand=a.extend({exec:function(){var l=this.range().sheet();var k=l.axisManager().preventAddColumn();if(k){return k}this._state=l.getState();if(this._value==="left"){l.axisManager().addColumnLeft()}else{l.axisManager().addColumnRight()}}});h.spreadsheet.AddRowCommand=a.extend({exec:function(){var l=this.range().sheet();var k=l.axisManager().preventAddRow();if(k){return k}this._state=l.getState();if(this._value==="above"){l.axisManager().addRowAbove()}else{l.axisManager().addRowBelow()}}});h.spreadsheet.EditValidationCommand=b.extend({init:function(k){b.fn.init.call(this,k);this._value=k.value},exec:function(){this.range().validation(this._value)}});h.spreadsheet.OpenCommand=b.extend({cannotUndo:true,exec:function(){var l=this.options.file;if(l.name.match(/.xlsx$/i)===null){return{reason:"error",type:"openUnsupported"}}var k=this.options.workbook;k.fromFile(this.options.file).then(function(){var m=k.excelImportErrors;if(m&&m.length){k._view.openDialog("importError",{errors:m})}})}});h.spreadsheet.SaveAsCommand=b.extend({exec:function(){var k=this.options.name+this.options.extension;if(this.options.extension===".xlsx"){this.options.workbook.saveAsExcel({fileName:k})}else{if(this.options.extension===".pdf"){this.options.workbook.saveAsPDF(e.extend(this.options.pdf,{workbook:this.options.workbook,fileName:k}))}}}});var f=b.extend({init:function(k){b.fn.init.call(this,k);this._name=k.name;this._value=k.value},getState:function(){this._state=this._workbook.nameDefinition(this._name)},setState:function(){this._workbook.nameDefinition(this._name,this._state);this._workbook.trigger("change",{recalc:true})}});h.spreadsheet.DefineNameCommand=f.extend({exec:function(){this.getState();try{this._workbook.defineName(this._name,this._value);this._workbook.trigger("change",{recalc:true})}catch(k){return{title:"Error",body:k+"",reason:"error"}}}});h.spreadsheet.DeleteNameCommand=f.extend({exec:function(){this.getState();this._workbook.undefineName(this._name);this._workbook.trigger("change",{recalc:true})}})}(kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/formulabar",["kendo.core"],a)}(function(){(function(d){if(d.support.browser.msie&&d.support.browser.version<9){return}var b=d.jQuery;var c={wrapper:"k-spreadsheet-formula-bar"};var a=d.ui.Widget.extend({init:function(f,e){d.ui.Widget.call(this,f,e);f=this.element.addClass(a.classNames.wrapper);this.formulaInput=new d.spreadsheet.FormulaInput(b("<div/>").appendTo(f))},destroy:function(){if(this.formulaInput){this.formulaInput.destroy()}this.formulaInput=null}});d.spreadsheet.FormulaBar=a;b.extend(true,a,{classNames:c})}(window.kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/formulainput",["kendo.core"],a)}(function(){(function(h,g){if(h.support.browser.msie&&h.support.browser.version<9){return}var e=h.jQuery;var k=h.ui.Widget;var l=".kendoFormulaInput";var o=h.keys;var b={wrapper:"k-spreadsheet-formula-input",listWrapper:"k-spreadsheet-formula-list"};var p=["font-family","font-size","font-stretch","font-style","font-weight","letter-spacing","text-transform","line-height"];var j={27:"esc",37:"left",39:"right",35:"end",36:"home",32:"spacebar"};var m=/(^_|[^a-z0-9]$)/i;var n=k.extend({init:function(s,r){k.call(this,s,r);s=this.element;s.addClass(n.classNames.wrapper).attr("contenteditable",true).attr("spellcheck",false).css("white-space","pre");if(this.options.autoScale){s.on("input",this.scale.bind(this))}this._highlightedRefs=[];this._staticTokens=[];this._formulaSource();this._formulaList();this._popup();this._tooltip();s.on("keydown",this._keydown.bind(this)).on("keyup",this._keyup.bind(this)).on("blur",this._blur.bind(this)).on("input click",this._input.bind(this)).on("focus",this._focus.bind(this)).on("paste",this._paste.bind(this))},options:{name:"FormulaInput",autoScale:false,filterOperator:"startswith",scalePadding:30,minLength:1},events:["keyup","focus"],enable:function(r){if(r===undefined){return this.element.attr("contenteditable")==="true"}if(r){this.element.attr("contenteditable",r)}else{this.element.removeAttr("contenteditable")}this.element.toggleClass("k-state-disabled",!r)},getPos:function(){var w=this.element[0];var u=g.getSelection();var s=v(u.focusNode,u.focusOffset);var r=v(u.anchorNode,u.anchorOffset);if(s!=null&&r!=null){if(s>r){var t=s;s=r;r=t}return{begin:s,end:r,collapsed:s==r}}function v(z,A){try{(function x(C){if(C===z){throw A}else{if(C.nodeType==1){for(var B=C.firstChild;B;B=B.nextSibling){x(B)}}else{if(C.nodeType==3){A+=C.nodeValue.length}}}}(w))}catch(y){return y}}},setPos:function(v,s){var w=this.element[0];v=y(w,v);if(s!=null){s=y(w,s)}else{s=v}if(v&&s){var t=document.createRange();t.setStart(v.node,v.pos);t.setEnd(s.node,s.pos);var x=g.getSelection();var r=x.getRangeAt(0);if(u(t,r)){x.removeAllRanges();x.addRange(t)}}function u(A,z){return A.startOffset!=z.startOffset||A.endOffset!=z.endOffset||A.startContainer!=z.endContainer||A.endContainer!=z.endContainer}function y(B,C){try{(function z(F){if(F.nodeType==3){var D=F.nodeValue.length;if(D>=C){throw F}C-=D}else{if(F.nodeType==1){for(var E=F.firstChild;E;E=E.nextSibling){z(E)}}}}(B))}catch(A){return{node:A,pos:C}}}},end:function(){this.setPos(this.length())},home:function(){this.setPos(0)},select:function(){this.setPos(0,this.length())},length:function(){return this.value().length},_formulaSource:function(){var r=[];var t;for(var s in h.spreadsheet.calc.runtime.FUNCS){if(!m.test(s)){t=s.toUpperCase();r.push({value:t,text:t})}}this.formulaSource=new h.data.DataSource({data:r})},_formulaList:function(){this.list=new h.ui.StaticList(e("<ul />").addClass(n.classNames.listWrapper).insertAfter(this.element),{autoBind:false,selectable:true,change:this._formulaListChange.bind(this),dataSource:this.formulaSource,dataValueField:"value",template:"#:data.value#"});this.list.element.on("mousedown",function(r){r.preventDefault()})},_formulaListChange:function(){var u=this._tokenContext();if(!u||this._mute){return}var s=u.token;var t=this.list.value()[0];var r={replace:true,token:s,end:s.end};if(!u.nextToken||u.nextToken.value!="("){t+="("}this._replaceAt(r,t);this.popup.close()},_popup:function(){this.popup=new h.ui.Popup(this.list.element,{anchor:this.element})},_blur:function(){this.popup.close();clearTimeout(this._focusId);this.trigger("blur")},_isFormula:function(){return/^=/.test(this.value())},_keydown:function(s){var r=s.keyCode;if(j[r]){this.popup.close();this._navigated=true}else{if(this._move(r)){this._navigated=true;s.preventDefault()}}this._keyDownTimeout=setTimeout(this._syntaxHighlight.bind(this))},_keyup:function(){var r=this.popup;var s;if(this._isFormula()&&!this._navigated){s=((this._tokenContext()||{}).token||{}).value;this.filter(s);if(!s||!this.formulaSource.view().length){r.close()}else{r[r.visible()?"position":"open"]();this.list.focusFirst()}}this._navigated=false;this._syntaxHighlight();this.trigger("keyup")},_input:function(){this._syntaxHighlight()},_focus:function(){this._focusTimeout=setTimeout(this._syntaxHighlight.bind(this));this.trigger("focus")},_paste:function(r){r.preventDefault();var u=this.getPos();var t;if(h.support.browser.msie){t=g.clipboardData.getData("Text")}else{t=r.originalEvent.clipboardData.getData("text/plain")}var s=this.value();s=s.substr(0,u.begin)+t+s.substr(u.end);this.value(s);this.setPos(u.begin+t.length);this.scale()},_move:function(s){var t=this.list;var r=this.popup;if(r.visible()){if(s===o.DOWN){t.focusNext();if(!t.focus()){t.focusFirst()}return true}if(s===o.UP){t.focusPrev();if(!t.focus()){t.focusLast()}return true}if(s===o.ENTER){t.select(t.focus());r.close();return true}if(s===o.TAB){t.select(t.focus());r.close();return true}if(s===o.PAGEUP){t.focusFirst();return true}if(s===o.PAGEDOWN){t.focusLast();return true}}return s===o.ENTER||s===o.TAB},_tokenContext:function(){var r=this.getPos();var u=this.value();if(!u||!r||!r.collapsed){return null}var v=h.spreadsheet.calc.tokenize(u,this.row(),this.col());var s;for(var t=0;t<v.length;++t){s=v[t];if(f(s,r)&&/^(?:str|sym|func)$/.test(s.type)){return{token:s,nextToken:v[t+1]}}}return null},_sync:function(){if(this._editorToSync&&this.isActive()){this._editorToSync.value(this.value())}},_textContainer:function(){var r=h.getComputedStyles(this.element[0],p);r.position="absolute";r.visibility="hidden";r.whiteSpace="pre";r.top=-3333;r.left=-3333;this._span=e("<span style='white-space: pre'/>").css(r).insertAfter(this.element)},_tooltip:function(){this._cellTooltip=e('<div class="k-widget k-tooltip" style="position:absolute; display:none">A1</div>').insertAfter(this.element)},tooltip:function(r){this._cellTooltip.text(r)},toggleTooltip:function(r){this._cellTooltip.toggle(r)},isActive:function(){return this.element[0]===h._activeElement()},filter:function(r){if(!r||r.length<this.options.minLength){return}this._mute=true;this.list.select(-1);this._mute=false;this.formulaSource.filter({field:this.list.options.dataValueField,operator:this.options.filterOperator,value:r})},hide:function(){this.enable(false);this.element.hide();this._cellTooltip.hide()},show:function(){this.enable(true);this.element.show()},row:function(){if(this.activeCell){return this.activeCell.row}},col:function(){if(this.activeCell){return this.activeCell.col}},position:function(r){if(!r){return}this.show();this.element.css({top:r.top+1+"px",left:r.left+1+"px"});this._cellTooltip.css({top:r.top-this._cellTooltip.height()-10+"px",left:r.left})},resize:function(r){if(!r){return}this.element.css({width:r.width-1,height:r.height-1})},canInsertRef:function(t){var s=this._canInsertRef(t);var u=s&&s.token;var r;if(u){for(r=0;r<this._staticTokens.length;r++){if(q(u,this._staticTokens[r])){return null}}}return s},_canInsertRef:function(s){if(this.popup.visible()){return null}var r=s;var x=this.getPos();var w,z;if(x&&this._isFormula()){if(x.begin===0){return null}w=h.spreadsheet.calc.tokenize(this.value(),this.row(),this.col());for(var t=0;t<w.length;++t){z=w[t];if(f(z,x)){return v(z)}if(u(z)){return y(w[t-1],z)}}return y(z,null)}return null;function u(A){return A.begin>x.begin}function v(A){if(A){if(/^(?:num|str|bool|sym|ref)$/.test(A.type)){return{replace:true,token:A,end:A.end}}if(/^(?:op|punc|startexp)$/.test(A.type)){if(A.end==x.end){return y(A,w[t+1])}return y(w[t-1],A)}}}function y(B,A){if(B==null){return null}if(A==null){if(/^(?:op|startexp)$/.test(B.type)||a(B.value)){return{token:B,end:x.end}}return null}if(r){if(B.type=="op"&&/^(?:punc|op)$/.test(A.type)){return{token:B,end:x.end}}}else{if(B.type=="startexp"){return{token:B,end:x.end}}if(/^(?:ref|op|punc)$/.test(B.type)){return{token:B,end:x.end}}if(/^(?:punc|op)$/.test(B.type)){return/^[,;({]$/.test(B.value)?{token:B,end:x.end}:null}}return false}},refAtPoint:function(s){var r=this._canInsertRef();if(r){this._replaceAt(r,s.simplify().toString())}},_replaceAt:function(s,w){var v=this.value();var t=s.token;var u=v.substr(s.end);v=v.substr(0,s.replace?t.begin:s.end)+w;var r=v.length;v+=u;this._value(v);this.setPos(r);this.scale();this._syntaxHighlight();this._sync()},syncWith:function(t){var s=this;var r="input"+l;var v=s._sync.bind(s),u;if(h.support.browser.msie){r="keydown"+l;u=function(){setTimeout(v)}}s._editorToSync=t;s.element.off(r).on(r,u||v)},scale:function(){var s=this.element;var t,r;if(!this._span){this._textContainer()}this._span.html(s.html());t=this._span.width()+this.options.scalePadding;r=this._span.height();if(t>s.width()){s.width(t)}if(r>s.height()){s.height(r)}},_value:function(r){this.element.text(r)},value:function(s){if(s===undefined){var r=this.element[0].innerText;return r.replace(/\n$/,"")}this._value(s);this._syntaxHighlight()},highlightedRefs:function(){return this._highlightedRefs.slice()},_syntaxHighlight:function(){var y=this.getPos();var u=this.value();var x=h.spreadsheet.Pane.classNames.series;var s=[];var w=0;var t=[];var v=[];var r;if(y&&!y.collapsed){return}if(!/^=/.test(u)){if(this._staticTokens.length||this._highlightedRefs.length){this._staticTokens=[];this._highlightedRefs=[];this.element.text(u)}if(this.popup){this.popup.close()}return}else{v=h.spreadsheet.calc.tokenize(u,this.row(),this.col());v.forEach(function(z){z.active=false;z.cls=["k-syntax-"+z.type];if(z.type=="ref"){z.colorClass=x[w++%x.length];z.cls.push(z.colorClass);s.push(z)}if(y&&z.type=="punc"){if(a(z.value)){t.unshift(z)}else{if(c(z.value)){var A=t.shift();if(A){if(i(z.value,A.value)){if(f(z,y)||f(A,y)){z.cls.push("k-syntax-paren-match");A.cls.push("k-syntax-paren-match")}}else{z.cls.push("k-syntax-error");A.cls.push("k-syntax-error")}}else{z.cls.push("k-syntax-error")}}}}if(y&&f(z,y)){z.cls.push("k-syntax-at-point");z.active=true;r=z}if(z.type=="func"&&!d(z.value)&&(!y||!f(z,y))){z.cls.push("k-syntax-error")}});v.reverse().forEach(function(A){var B=A.begin,z=A.end;var C=h.htmlEncode(u.substring(B,z));u=u.substr(0,B)+"<span class='"+A.cls.join(" ")+"'>"+C+"</span>"+u.substr(z)});this.element.html(u)}if(y){this.setPos(y.begin,y.end)}if(r&&/^(?:startexp|op|punc)$/.test(r.type)){this._setStaticTokens(v)}this._highlightedRefs=s},_setStaticTokens:function(t){var r,s;this._staticTokens=[];for(r=0;r<t.length;r++){s=t[r];if(/^(?:num|str|bool|sym|ref)$/.test(s.type)){this._staticTokens.push(s)}}},destroy:function(){this._editorToSync=null;this.element.off(l);clearTimeout(this._focusTimeout);clearTimeout(this._keyDownTimeout);this._cellTooltip=null;this._span=null;this.popup.destroy();this.popup=null;k.fn.destroy.call(this)},insertNewline:function(){var s=this.value();var t=this.getPos();var r=t.end==s.length;s=s.substr(0,t.begin)+(r?"\n\n":"\n"+s.substr(t.end));this.value(s);this.setPos(t.begin+1)}});function a(r){return r=="("||r=="["||r=="{"}function c(r){return r==")"||r=="]"||r=="}"}function i(s,r){return r=="("?s==")":r=="["?s=="]":r=="{"?s=="}":false}function f(s,r){return s.begin<=r.begin&&s.end>=r.end}function d(r){return h.spreadsheet.calc.runtime.FUNCS[r.toLowerCase()]}function q(s,r){if(!s||!r){return false}if(s.type=="ref"&&r.type=="ref"){return s.ref.eq(r.ref)}else{return s.value===r.value}}h.spreadsheet.FormulaInput=n;e.extend(true,n,{classNames:b})}(kendo,window))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/eventlistener",["kendo.core"],a)}(function(){(function(g){if(g.support.browser.msie&&g.support.browser.version<9){return}var e=g.jQuery;var a={8:"backspace",9:"tab",13:"enter",27:"esc",37:"left",38:"up",39:"right",40:"down",35:"end",36:"home",32:"spacebar",33:"pageup",34:"pagedown",46:"delete",113:":edit"};var d=navigator.platform.toUpperCase().indexOf("MAC")>=0;var b=function(h){if(h>47&&h<58||h>64&&h<91||h>95&&h<112||h>185&&h<193||h>218&&h<223){return true}return false};var c=function(i){var j=i.keyCode;var h=a[j];if(!h&&b(j)){h=":alphanum"}if(!h&&i.key&&i.key.length==1){h=":alphanum"}return h};var f=g.Class.extend({init:function(k,i,h){this._handlers={};this.target=k;this._observer=i||window;this.keyDownProxy=this.keyDown.bind(this);this.mouseProxy=this.mouse.bind(this);this.threshold=5;this._pressLocation=null;k.on("keydown",this.keyDownProxy);k.on("contextmenu mousedown cut copy paste scroll wheel click dblclick focus",this.mouseProxy);e(document.documentElement).on("mousemove mouseup",this.mouseProxy);if(h){for(var j in h){this.on(j,h[j])}}},keyDown:function(h){this.handleEvent(h,c(h.originalEvent))},mouse:function(k){var m;if(k.which){m=k.which==3}else{if(k.button){m=k.button==2}}var j=k.type;if(j==="mousedown"){if(m){j="rightmousedown"}else{this._pressLocation={x:k.pageX,y:k.pageY}}}if(j==="mouseup"){if(!m){this._pressLocation=null}}if(j==="mousemove"&&this._pressLocation){var i=this._pressLocation.x-k.pageX;var h=this._pressLocation.y-k.pageY;var l=Math.sqrt(i*i+h*h);if(l>this.threshold){j="mousedrag"}}this.handleEvent(k,j)},handleEvent:function(l,i){var h="";l.mod=d?l.metaKey:l.ctrlKey&&!l.altKey;if(l.altKey){h+="alt+"}if(l.shiftKey){h+="shift+"}if(l.ctrlKey){h+="ctrl+"}h+=i;var k=this._handlers["*+"+i];if(k){k.call(this._observer,l,h)}var j=this._handlers[h];if(j){j.call(this._observer,l,h)}},on:function(i,j){var h=this._handlers;if(typeof j==="string"){j=this._observer[j]}if(typeof i==="string"){i=i.split(",")}i.forEach(function(k){h[k]=j})},destroy:function(){this.target.off("keydown",this.keyDownProxy);this.target.off("keydown",this.mouseProxy);e(document.documentElement).off("mousemove mouseup",this.mouseProxy)}});g.spreadsheet.EventListener=f}(window.kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/rangelist",["kendo.core"],a)}(function(){(function(j){if(j.support.browser.msie&&j.support.browser.version<9){return}var m=j.Class.extend({init:function p(w,u,v,t){this.level=w;this.value=u;this.left=v;this.right=t}});var f=new function g(){this.left=this;this.right=this;this.level=0}();function c(t){return t}function d(u){if(u.left.level===u.level){var t=u;u=u.left;t.left=u.right;u.right=t}return u}function l(u){if(u.right.right.level===u.level){var t=u;u=u.right;t.right=u.left;u.left=t;u.level+=1}return u}function a(t,u){if(t===f){return new m(1,u,f,f)}else{if(t.value.start-u.start>0){t.left=a(t.left,u)}else{t.right=a(t.right,u)}}return l(d(t))}function s(u,v){if(u===f){return u}var w=u.value.start-v.start;if(w===0){if(u.left!==f&&u.right!==f){var t=u.left;while(t.right!==f){t=t.right}u.value=t.value;u.left=s(u.left,u.value)}else{if(u.left===f){u=u.right}else{u=u.left}}}else{if(w>0){u.left=s(u.left,v)}else{u.right=s(u.right,v)}}if(u.left.level<u.level-1||u.right.level<u.level-1){u.level-=1;if(u.right.level>u.level){u.right.level=u.level}u=d(u);u.right=d(u.right);u.right.right=d(u.right.right);u=l(u);u.right=l(u.right)}return u}var o=j.Class.extend({init:function q(v,t,u){this.start=v;this.end=t;this.value=u},intersects:function(t){return t.start<=this.end&&t.end>=this.start}});var i=j.Class.extend({init:function(){this.root=f},insert:function(t){this.root=a(this.root,t)},remove:function(t){this.root=s(this.root,t)},findrange:function(u){var t=this.root;while(t!=f){if(u<t.value.start){t=t.left}else{if(u>t.value.end){t=t.right}else{return t.value}}}return null},values:function(){var t=[];b(this.root,t);return t},intersecting:function(v,u){var t=[];e(this.root,new o(v,u),t);return t},map:function(u){var t=new i();r(t,this.root,u);return t},clone:function(){return this.map(c)},first:function(){var t=this.root;while(t.left!=f){t=t.left}return t},last:function(){var t=this.root;while(t.right!=f){t=t.right}return t}});function b(u,t){if(u===f){return}b(u.left,t);t.push(u.value);b(u.right,t)}function e(v,u,t){if(v===f){return}var w=v.value;if(u.start<w.start){e(v.left,u,t)}if(w.intersects(u)){t.push(w)}if(u.end>w.end){e(v.right,u,t)}}function r(t,u,v){if(u===f){return}r(t,u.left,v);t.insert(v(u.value));r(t,u.right,v)}var n=j.Class.extend({init:function(v,t,u){if(t===undefined){this.tree=v}else{this.tree=new i();this.tree.insert(new o(v,t,u))}},values:function(){return this.tree.values()},map:function(t){return new n(this.tree.map(t))},intersecting:function(u,t){return this.tree.intersecting(u,t)},first:function(){return this.tree.first().value},last:function(){return this.tree.last().value},insert:function(v,t,u){return this.tree.insert(new o(v,t,u))},value:function(v,x,C){if(C===undefined){if(x===undefined){x=v}return this.intersecting(v,x)[0].value}var u=this.tree.intersecting(v-1,x+1);if(u.length){var E=u[0],y=u[u.length-1];if(E.end<v){if(E.value===C){v=E.start}else{u.shift()}}if(y.start>x){if(y.value===C){x=y.end}else{u.pop()}}for(var z=0,w=u.length;z<w;z++){var A=u[z];var B=A.value;var D=A.start;var t=A.end;this.tree.remove(A);if(D<v){if(B!==C){this.insert(D,v-1,B)}else{v=D}}if(t>x){if(B!==C){this.insert(x+1,t,B)}else{x=t}}}}this.insert(v,x,C)},expandedValues:function(y,w){var v=this.intersecting(y,w);var u=[];var t=0;for(var x=y;x<=w;x++){if(v[t].end<x){t++}u.push({index:x-y,value:v[t].value})}return u},sortedIndices:function(y,u,v,x){var t=this.expandedValues(y,u);var w=function(A,z){if(A.value===z.value){return A.index-z.index}return v(A.value,z.value)};if(x){w=function(B,A){var z=x[B.index];var C=x[A.index];if(z.value===C.value){return v(B.value,A.value)}return B.index-A.index}}t.sort(w);return t},sort:function(y,u,x){if(this.intersecting(y,u).length===1){return}var v=this.expandedValues(y,u);for(var w=0,t=x.length;w<t;w++){this.value(w+y,w+y,v[x[w].index].value)}},copy:function(v,A,z){var B=this.intersecting(v,A);var u=z;var w;for(var x=0,y=B.length;x<y;x++){var C=B[x].start;if(C<v){C=v}var t=B[x].end;if(t>A){t=A}w=u+(t-C);this.value(u,w,B[x].value);u=++w}},iterator:function(u,t){return new k(u,t,this.intersecting(u,t))},getState:function(){return this.tree.clone()},setState:function(t){this.tree=t}});var k=j.Class.extend({init:function(v,u,t){this.start=v;this.end=u;this.index=0;this.ranges=t},unique:function(){return this.ranges.map(function(t){return t.value})},at:function(t){while(this.ranges[this.index].end<t){this.index++}return this.ranges[this.index].value},forEach:function(u){for(var t=this.start;t<=this.end;t++){u(this.at(t),t)}this.index=0}});var h=n.extend({init:function(v,t,u){this.tree=new i();this.range=new o(v,t,u)},intersecting:function(z,w){var v=this.tree.intersecting(z,w);var u=[];var x;if(!v.length){return[this.range]}for(var y=0,t=v.length;y<t;y++){x=v[y];if(x.start>z){u.push(new o(z,x.start-1,this.range.value))}u.push(x);z=x.end+1}if(x.end<w){u.push(new o(x.end+1,w,this.range.value))}return u},insert:function(v,t,u){if(u!==this.range.value){this.tree.insert(new o(v,t,u))}},lastRangeStart:function(){var t=this.tree.root;if(t===f){return this.range.start}while(t.right!==f){t=t.right}return t.value.end+1}});j.spreadsheet.RangeTree=i;j.spreadsheet.RangeList=n;j.spreadsheet.SparseRangeList=h;j.spreadsheet.ValueRange=o}(kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/propertybag",["kendo.core"],a)}(function(){(function(f){if(f.support.browser.msie&&f.support.browser.version<9){return}var b=f.jQuery;var e=f.Class.extend({init:function(g){this.list=g},get:function(g){return this.parse(this.list.value(g,g))},set:function(i,g,h){if(h===undefined){h=g;g=i}this.list.value(i,g,h)},parse:function(g){return g},copy:function(i,g,h){this.list.copy(i,g,h)},iterator:function(h,g){return this.list.iterator(h,g)}});var d=e.extend({set:function(i,g,h){this.list.value(i,g,JSON.stringify(h))},parse:function(g){return JSON.parse(g)}});var c=e.extend({init:function(h,g,i){e.prototype.init.call(this,h);this.validations=i;this.formats=g},set:function(i,g,h){if(h instanceof Date){h=f.spreadsheet.dateToNumber(h);this.formats.value(i,g,a(f.culture().calendar.patterns.d))}this.list.value(i,g,h)}});function a(g){return g.replace(/M/g,"m").replace(/'/g,'"').replace(/tt/,"am/pm")}f.spreadsheet.PropertyBag=f.Class.extend({specs:[{property:c,name:"value",value:null,sortable:true,serializable:true,depends:"format"},{property:e,name:"format",value:null,sortable:true,serializable:true},{property:e,name:"formula",value:null,sortable:true,serializable:true},{property:e,name:"background",value:null,sortable:true,serializable:true},{property:d,name:"borderBottom",value:null,sortable:false,serializable:true},{property:d,name:"borderRight",value:null,sortable:false,serializable:true},{property:d,name:"borderLeft",value:null,sortable:false,serializable:true},{property:d,name:"borderTop",value:null,sortable:false,serializable:true},{property:e,name:"color",value:null,sortable:true,serializable:true},{property:e,name:"fontFamily",value:null,sortable:true,serializable:true},{property:e,name:"underline",value:null,sortable:true,serializable:true},{property:e,name:"fontSize",value:null,sortable:true,serializable:true},{property:e,name:"italic",value:null,sortable:true,serializable:true},{property:e,name:"bold",value:null,sortable:true,serializable:true},{property:e,name:"textAlign",value:null,sortable:true,serializable:true},{property:e,name:"verticalAlign",value:null,sortable:true,serializable:true},{property:e,name:"wrap",value:null,sortable:true,serializable:true},{property:e,name:"validation",value:null,sortable:false,serializable:true},{property:e,name:"enable",value:null,sortable:false,serializable:true},{property:e,name:"link",value:null,sortable:false,serializable:true},{property:e,name:"editor",value:null,sortable:false,serializable:true}],init:function(g,h){h=h||{};this.properties={};this.lists={};this.specs.forEach(function(i){var j=h[i.name]!==undefined?h[i.name]:i.value;this.lists[i.name]=new f.spreadsheet.SparseRangeList(0,g,j)},this);this.specs.forEach(function(i){this.properties[i.name]=new i.property(this.lists[i.name],this.lists[i.depends])},this)},getState:function(){var g={};this.specs.forEach(function(h){g[h.name]=this.lists[h.name].getState()},this);return g},setState:function(g){this.specs.forEach(function(h){this.lists[h.name].setState(g[h.name])},this)},get:function(h,g){if(g===undefined){return this.lists[h]}return this.properties[h].get(g)},set:function(h,j,g,i){this.properties[h].set(j,g,i)},fromJSON:function(i,j){for(var h=0;h<this.specs.length;h++){var g=this.specs[h];if(g.serializable){if(j[g.name]!==undefined){this.set(g.name,i,i,j[g.name],false)}}}},copy:function(h,g,i){this.specs.forEach(function(j){this.properties[j.name].copy(h,g,i)},this)},iterator:function(h,i,g){return this.properties[h].iterator(i,g)},sortable:function(){return this.specs.filter(function(g){return g.sortable}).map(function(g){return this.lists[g.name]},this)},iterators:function(i,g){var h=this.specs.filter(function(j){return j.serializable});return h.map(function(j){var k=this.iterator(j.name,i,g);return{name:j.name,value:j.value,at:function(l){return j.property.fn.parse(k.at(l))}}},this)},forEach:function(g,j,p){var h=this.iterators(g,j);for(var m=g;m<=j;m++){var o={};for(var k=0;k<h.length;k++){var l=h[k];var n=l.at(m);if(n!==l.value){o[l.name]=n}}p(o)}},forEachProperty:function(h){for(var g in this.properties){h(this.properties[g])}}});f.spreadsheet.ALL_PROPERTIES=b.map(f.spreadsheet.PropertyBag.prototype.specs,function(g){return g.name})}(window.kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/references",["kendo.core"],a)}(function(){if(kendo.support.browser.msie&&kendo.support.browser.version<9){return}var c=kendo.spreadsheet;var a=kendo.Class;function d(m){var n=Math.floor(m/26)-1;return(n>=0?d(n):"")+String.fromCharCode(65+m%26)}function i(m){if(/^[a-z0-9_]*$/i.test(m)){return m}return"'"+m.replace(/\x27/g,"\\'")+"'"}function l(o,q,n,m){var p="";++q;if(!isFinite(q)){q=""}else{if(m!=null&&!(m&2)){q="$"+q}}if(!isFinite(n)){n=""}else{p=d(n);if(m!=null&&!(m&1)){p="$"+p}}if(o){return i(o)+"!"+p+q}else{return p+q}}var e=a.extend({type:"ref",sheet:"",clone:function(){return this},hasSheet:function(){return this._hasSheet},simplify:function(){return this},setSheet:function(n,m){this.sheet=n;if(m!=null){this._hasSheet=m}return this},absolute:function(){return this},relative:function(){return this},adjust:function(){return this},toString:function(){return this.relative(0,0,3,3).print(0,0)},forEach:function(n,m){n.call(m,this)},map:function(n,m){return n.call(m,this)},intersects:function(m){return this.intersect(m)!==f},isCell:function(){return false},toRow:function(){return this},toColumn:function(){return this},first:function(){return this},lastRange:function(){return this},size:function(){return 1},rangeAt:function(){return this},nextRangeIndex:function(){return 0},previousRangeIndex:function(){return 0},eq:function(n){var p=this;var o=n;if(p===f||o===f){return p===o}if(o instanceof b||o instanceof j&&!(p instanceof b)){p=n;o=this}if(p instanceof b){o=o.simplify();return o instanceof b&&p.row==o.row&&p.col==o.col&&p.sheet==o.sheet}else{if(p instanceof j){if(o instanceof j){return o.topLeft.eq(p.topLeft)&&o.bottomRight.eq(p.bottomRight)}if(o instanceof g){return o.single()&&p.eq(o.refs[0])}}else{if(p instanceof g&&o instanceof g){var s=p.refs;var r=o.refs;if(s.length!=r.length){return false}for(var q=0,m=s.length;q<m;q++){if(!s[q].eq(r[q])){return false}}return true}}}return p===o},concat:function(m){return new g([this,m])},replaceAt:function(m,n){return n},forEachColumnIndex:function(m){this.forEachAxisIndex("col",m)},forEachRowIndex:function(m){this.forEachAxisIndex("row",m)},forEachAxisIndex:function(n,p){var m=[];var o=n==="row"?"forEachRow":"forEachColumn";this[o](function(r){var q=r.first()[n];if(m.indexOf(q)===-1){m.push(q)}});m.sort(function(r,q){return r>q?1:r<q?-1:0}).forEach(p)},valid:function(){return false},renameSheet:function(n,m){if(this.sheet&&this.sheet.toLowerCase()==n.toLowerCase()){this.sheet=m;return true}}});e.display=l;var f=new (e.extend({init:function k(){},print:function(){return"#NULL!"},eq:function(m){return m===this},forEach:function(){}}))();var h=e.extend({ref:"name",init:function h(m){this.name=m},clone:function(){return new h(this.name).setSheet(this.sheet,this.hasSheet())},print:function(){var m=i(this.name);if(this.hasSheet()){m=i(this.sheet)+"!"+m}return m}});var b=e.extend({ref:"cell",init:function b(o,n,m){this.row=o;this.col=n;this.rel=m||0},clone:function(){return new b(this.row,this.col,this.rel).setSheet(this.sheet,this.hasSheet())},intersect:function(m){if(m instanceof b){if(this.eq(m)){return this}else{return f}}return m.intersect(this)},print:function(o,s,r){var p=this.col,t=this.row,n=this.rel,m;if(o==null&&n){var q=this.hasSheet()?i(this.sheet)+"!":"";if(isFinite(p)){p=n&1?"C["+p+"]":"C"+(p+1)}else{p=""}if(isFinite(t)){t=n&2?"R["+t+"]":"R"+(t+1)}else{t=""}return q+t+p}else{m=this.absolute(o,s);if(r){t=m.row%1048576;p=m.col%16384;if(t<0){t+=1048576}if(p<0){p+=16384}return l(this._hasSheet&&this.sheet,t,p,n)}return m.valid()?l(this._hasSheet&&this.sheet,m.row,m.col,n):"#REF!"}},absolute:function(n,o){var m=this.clone();if(m.rel&3===0){return m}if(m.rel&1){m.col=(m.col+o)%16384}if(m.rel&2){m.row=(m.row+n)%1048576}m.rel=0;return m},toRangeRef:function(){return new j(this,this)},relative:function(o,q,m){if(m==null){m=this.rel}var p=m&2?this.row-o:this.row;var n=m&1?this.col-q:this.col;return new b(p,n,m).setSheet(this.sheet,this.hasSheet())},height:function(){return 1},width:function(){return 1},toString:function(){return l(null,this.row,this.col,3)},isCell:function(){return true},leftColumn:function(){return this},rightColumn:function(){return this},topRow:function(){return this},bottomRow:function(){return this},forEachRow:function(m){m(this.toRangeRef())},forEachColumn:function(m){m(this.toRangeRef())},adjust:function(r,n,m,p,q,t,s){var o=this.absolute(r,n);if(q){if(o.row>=t){if(s<0&&o.row<t-s){return f}o.row+=s}}else{if(o.col>=t){if(s<0&&o.col<t-s){return f}o.col+=s}}if(m!=null&&p!=null){o=o.relative(m,p,this.rel)}return o},valid:function(){if(this.rel){throw new Error("valid() called on relative reference")}var m=this.col,n=this.row;return !(isFinite(m)&&m<0||isFinite(n)&&n<0)}});var j=e.extend({ref:"range",init:function j(m,n){if(m._hasSheet&&n._hasSheet&&m.sheet.toLowerCase()!=n.sheet.toLowerCase()){this.endSheet=n.sheet}this.topLeft=new b(m.row,m.col,m.rel);this.bottomRight=new b(n.row,n.col,n.rel);this.normalize()},clone:function(){return new j(this.topLeft.clone(),this.bottomRight.clone()).setSheet(this.sheet,this.hasSheet())},_containsRange:function(m){return this._containsCell(m.topLeft)&&this._containsCell(m.bottomRight)},_containsCell:function(m){return m.sheet==this.sheet&&m.row>=this.topLeft.row&&m.col>=this.topLeft.col&&m.row<=this.bottomRight.row&&m.col<=this.bottomRight.col},contains:function(n){if(n instanceof Array){var m=this;return n.some(function(o){return m.contains(o)})}if(n instanceof b){return this._containsCell(n)}if(n instanceof j){return this._containsRange(n)}return false},_intersectRange:function(q){if(this.sheet!=q.sheet){return f}var u=this.topLeft.col;var s=this.topLeft.row;var t=this.bottomRight.col;var p=this.bottomRight.row;var n=q.topLeft.col;var r=q.topLeft.row;var o=q.bottomRight.col;var m=q.bottomRight.row;if(u<=o&&n<=t&&s<=m&&r<=p){return new j(new b(Math.max(s,r),Math.max(u,n)),new b(Math.min(p,m),Math.min(t,o))).setSheet(this.sheet,this.hasSheet())}else{return f}},intersect:function(m){if(m instanceof b){return this._containsCell(m)?m:f}if(m instanceof j){return this._intersectRange(m).simplify()}if(m instanceof g){return m.intersect(this)}return f},simplify:function(){if(this.isCell()){return new b(this.topLeft.row,this.topLeft.col,this.topLeft.rel).setSheet(this.sheet,this.hasSheet())}return this},normalize:function(){var v=this.topLeft,t=this.bottomRight;var o=v.row,s=v.col,n=t.row,q=t.col;var x=v.rel&2,p=v.rel&1;var w=t.rel&2,m=t.rel&1;var r,u=false;if(o>n){u=true;r=o;o=n;n=r;r=x;x=w;w=r}if(s>q){u=true;r=s;s=q;q=r;r=p;p=m;m=r}if(u){this.topLeft=new b(o,s,p|x);this.bottomRight=new b(n,q,m|w)}return this},print:function(m,p,o){if(o||this.absolute(m,p).valid()){var n=this.topLeft.print(m,p,o)+":"+this.bottomRight.print(m,p,o);if(this.hasSheet()){n=i(this.sheet)+(this.endSheet?":"+i(this.endSheet):"")+"!"+n}return n}return"#REF!"},absolute:function(m,n){return new j(this.topLeft.absolute(m,n),this.bottomRight.absolute(m,n)).setSheet(this.sheet,this.hasSheet())},relative:function(m,p,n,o){if(o==null){o=n}return new j(this.topLeft.relative(m,p,n),this.bottomRight.relative(m,p,o)).setSheet(this.sheet,this.hasSheet())},height:function(){if(this.topLeft.rel!=this.bottomRight.rel){throw new Error("Mixed relative/absolute references")}return this.bottomRight.row-this.topLeft.row+1},width:function(){if(this.topLeft.rel!=this.bottomRight.rel){throw new Error("Mixed relative/absolute references")}return this.bottomRight.col-this.topLeft.col+1},collapse:function(){return this.topLeft.toRangeRef()},leftColumn:function(){return new j(this.topLeft,new b(this.bottomRight.row,this.topLeft.col))},rightColumn:function(){return new j(new b(this.topLeft.row,this.bottomRight.col),this.bottomRight)},topRow:function(){return new j(this.topLeft,new b(this.topLeft.row,this.bottomRight.col))},bottomRow:function(){return new j(new b(this.bottomRight.row,this.topLeft.col),this.bottomRight)},toRangeRef:function(){return this},toRow:function(m){m+=Math.max(0,this.topLeft.row);return new j(new b(m,this.topLeft.col),new b(m,this.bottomRight.col)).setSheet(this.sheet,this.hasSheet())},toColumn:function(m){m+=Math.max(0,this.topLeft.col);return new j(new b(this.topLeft.row,m),new b(this.bottomRight.row,m)).setSheet(this.sheet,this.hasSheet())},toCell:function(n,m){n+=Math.max(0,this.topLeft.row);m+=Math.max(0,this.topLeft.col);return new b(n,m,0).setSheet(this.sheet,this.hasSheet())},forEachRow:function(r){var n=this.topLeft.row;var m=this.bottomRight.row;var q=this.topLeft.col;var p=this.bottomRight.col;for(var o=n;o<=m;o++){r(new j(new b(o,q),new b(o,p)))}},forEachColumn:function(r){var n=this.topLeft.row;var m=this.bottomRight.row;var q=this.topLeft.col;var p=this.bottomRight.col;for(var o=q;o<=p;o++){r(new j(new b(n,o),new b(m,o)))}},intersecting:function(m){return m.filter(function(n){return n.toRangeRef().intersects(this)},this)},union:function(p,t){var o=this.intersecting(p);var n=this.topLeft.row;var r=this.topLeft.col;var m=this.bottomRight.row;var q=this.bottomRight.col;var s=false;o.forEach(function(v){v=v.toRangeRef();if(v.topLeft.row<n){s=true;n=v.topLeft.row}if(v.topLeft.col<r){s=true;r=v.topLeft.col}if(v.bottomRight.row>m){s=true;m=v.bottomRight.row}if(v.bottomRight.col>q){s=true;q=v.bottomRight.col}if(t){t(v)}});var u=new j(new b(n,r),new b(m,q));if(s){return u.union(p,t)}else{return u}},resize:function(p){var m=Math.max.bind(Math,0);function o(t){return t||0}var s=this.topLeft.row+o(p.top);var r=this.topLeft.col+o(p.left);var n=this.bottomRight.row+o(p.bottom);var q=this.bottomRight.col+o(p.right);if(r<0&&q<0||s<0&&n<0){return f}else{if(s<=n&&r<=q){return new j(new b(m(s),m(r)),new b(m(n),m(q)))}else{return f}}},move:function(m,n){return new j(new b(this.topLeft.row+m,this.topLeft.col+n),new b(this.bottomRight.row+m,this.bottomRight.col+n))},first:function(){return this.topLeft},isCell:function(){return !this.endSheet&&this.topLeft.eq(this.bottomRight)},toString:function(){return this.topLeft+":"+this.bottomRight},adjust:function(u,n,p,s,r,m,q){var t=this.topLeft.adjust(u,n,p,s,r,m,q);var o=this.bottomRight.adjust(u,n,p,s,r,m,q);if(t===f&&o===f){return f}if(t===f){t=this.topLeft.absolute(u,n);if(r){t.row=m}else{t.col=m}if(p!=null&&s!=null){t=t.relative(p,s,this.topLeft.rel)}}else{if(o===f){o=this.bottomRight.absolute(u,n);if(r){o.row=m-1}else{o.col=m-1}if(p!=null&&s!=null){o=o.relative(p,s,this.bottomRight.rel)}}}return new j(t,o).setSheet(this.sheet,this.hasSheet()).simplify()},valid:function(){return this.topLeft.valid()&&this.bottomRight.valid()}});var g=e.extend({init:function g(m){this.refs=m;this.length=m.length},clone:function(){return new g(this.refs.slice())},intersect:function(p){var n=[];for(var o=0;o<this.length;++o){var m=p.intersect(this.refs[o]);if(m!==f){n.push(m)}}if(n.length>0){return new g(n).simplify()}return f},simplify:function(){var m=new g(this.refs.reduce(function(n,o){o=o.simplify();if(o!==f){n.push(o)}return n},[]));if(m.empty()){return f}if(m.single()){return m.refs[0]}return m},absolute:function(m,n){return new g(this.refs.map(function(o){return o.absolute(m,n)}))},forEach:function(n,m){this.refs.forEach(n,m)},toRangeRef:function(){return this.refs[0].toRangeRef()},contains:function(m){return this.refs.some(function(n){return n.contains(m)})},map:function(n,m){return new g(this.refs.map(n,m))},first:function(){return this.refs[0].first()},lastRange:function(){return this.refs[this.length-1]},size:function(){return this.length},single:function(){return this.length==1},empty:function(){return this.length===0},isCell:function(){return this.single()&&this.refs[0].isCell()},rangeAt:function(m){return this.refs[m]},nextRangeIndex:function(m){if(m===this.length-1){return 0}else{return m+1}},previousRangeIndex:function(m){if(m===0){return this.length-1}else{return m-1}},concat:function(m){return new g(this.refs.concat([m]))},print:function(o,m,n){return this.refs.map(function(p){return p.print(o,m,n)}).join(",")},replaceAt:function(n,o){var m=this.refs.slice();m.splice(n,1,o);return new g(m)},leftColumn:function(){return this.map(function(m){return m.leftColumn()})},rightColumn:function(){return this.map(function(m){return m.rightColumn()})},topRow:function(){return this.map(function(m){return m.topRow()})},bottomRow:function(){return this.map(function(m){return m.bottomRow()})},forEachRow:function(m){this.forEach(function(n){n.forEachRow(m)})},forEachColumn:function(m){this.forEach(function(n){n.forEachColumn(m)})},adjust:function(q,n,m,o,p,s,r){return this.map(function(t){return t.adjust(q,n,m,o,p,s,r)}).simplify()},toString:function(){return this.refs.map(function(m){return m.toString()}).join(", ")},valid:function(){for(var m=this.refs.length;--m>=0;){if(this.refs[m].valid()){return false}}return true},renameSheet:function(n,m){this.refs.forEach(function(o){o.renameSheet(n,m)})}});c.NULLREF=f;c.SHEETREF=new j(new b(0,0),new b(Infinity,Infinity));c.FIRSTREF=new b(0,0);c.Ref=e;c.NameRef=h;c.CellRef=b;c.RangeRef=j;c.UnionRef=g;c.SHEETREF.print=function(){return"#SHEET"}},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/autofillcalculator",["kendo.core"],a)}(function(){(function(c){if(c.support.browser.msie&&c.support.browser.version<9){return}var a=c.spreadsheet.RangeRef;var d=c.spreadsheet.CellRef;var b=c.Class.extend({init:function(e){this._grid=e},rectIsVertical:function(j,g,f,i){var h=this._grid.rectangle(j.toRangeRef());var e=this._grid.rectangle(g.toRangeRef());return Math.abs(e[i]-h[i])>Math.abs(h[f]-e[f])},autoFillDest:function(m,p){var n=m.topLeft;var k=m.bottomRight;var f;var h=p.row>=n.row;var j=p.col>=n.col;if(h){f=j?4:3}else{f=j?2:1}var o,i,q,e;if(f===4){o=n;i=k;e=p.row>i.row||p.col>i.col;if(e){p=new d(Math.max(p.row,i.row),Math.max(p.col,i.col))}if(this.rectIsVertical(i,p,"right","bottom")){q=new d(p.row,i.col)}else{q=new d(i.row,p.col)}}else{if(f===3){var l=new d(n.col,k.row);if(p.row>k.row&&this.rectIsVertical(l,p,"left","bottom")){o=n;q=new d(p.row,k.col)}else{o=k;q=new d(n.row,p.col)}}else{if(f===2){var g=new d(n.row,k.col);if(p.col>k.col&&!this.rectIsVertical(g,p,"right","top")){o=n;q=new d(k.row,p.col)}else{o=k;q=new d(p.row,n.col)}}else{o=k;if(this.rectIsVertical(n,p,"left","top")){q=new d(p.row,n.col)}else{q=new d(n.row,p.col)}}}}return this._grid.normalize(new a(o,q))}});c.spreadsheet.AutoFillCalculator=b}(kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/navigator",["kendo.core","spreadsheet/autofillcalculator"],a)}(function(){(function(d){if(d.support.browser.msie&&d.support.browser.version<9){return}var b=d.spreadsheet.RangeRef;var e=d.spreadsheet.CellRef;var c=d.Class.extend({init:function(i,g,f,h){this.rangeGetter=f;this.prevLeft=function(k){var l=h(this.range(k));var j=this.range(g.prevVisible(l.topLeft[i]));return h(j).topLeft[i]};this.nextRight=function(k){var l=h(this.range(k));var j=this.range(g.nextVisible(l.bottomRight[i]));return h(j).bottomRight[i]};this.nextLeft=function(k){var j=h(this.range(k));return g.nextVisible(j.bottomRight[i])};this.prevRight=function(k){var j=h(this.range(k));return g.prevVisible(j.topLeft[i])}},boundary:function(g,f){this.top=g;this.bottom=f},range:function(f){return this.rangeGetter(f,this.top,this.bottom)}});var a=d.Class.extend({init:function(f){this._sheet=f;this.columns=this._sheet._grid._columns;this.autoFillCalculator=new d.spreadsheet.AutoFillCalculator(f._grid);this.colEdge=new c("col",this._sheet._grid._columns,this.columnRange.bind(this),this.union.bind(this));this.rowEdge=new c("row",this._sheet._grid._rows,this.rowRange.bind(this),this.union.bind(this))},height:function(f){this._viewPortHeight=f},union:function(f){return this._sheet.unionWithMerged(f)},columnRange:function(g,f,h){return this._sheet._ref(f,g,h-f,1)},rowRange:function(g,f,h){return this._sheet._ref(g,f,1,h-f)},selectionIncludesMergedCells:function(){return this._sheet.select().contains(this._sheet._mergedCells)},setSelectionValue:function(g){var f=this._sheet.selection();setTimeout(function(){f.value(g())})},selectAll:function(){this._sheet.select(this._sheet._sheetRef)},select:function(g,h,f){g=this.refForMode(g,h);if(f){g=this._sheet.select().concat(g)}this._sheet.select(g)},refForMode:function(g,h){var f=this._sheet._grid;switch(h){case"range":g=f.normalize(g);break;case"row":g=f.rowRef(g.row);break;case"column":g=f.colRef(g.col);break;case"sheet":g=this._sheet._sheetRef;break}return g},startSelection:function(i,j,f,h){if(j=="autofill"){this._sheet.startAutoFill()}else{if(h&&j=="range"){var g=new b(this._sheet.activeCell().first(),i);this._sheet.select(g,false,false);this._sheet.startSelection()}else{this._sheet.startSelection();this.select(i,j,f)}}},completeSelection:function(){this._sheet.completeSelection()},selectForContextMenu:function(g,h){var f=this._sheet;if(!f.select().contains(this.refForMode(g,h))){this.select(g,h)}},modifySelection:function(i){var o=this.determineDirection(i);var l=this._sheet;var h=this._viewPortHeight;var r=l._grid._rows;var f=l._grid._columns;var m=l.currentOriginalSelectionRange();var p=l.select().toRangeRef();var g=l.activeCell();var q=m.topLeft.clone();var k=m.bottomRight.clone();var j;this.colEdge.boundary(p.topLeft.row,p.bottomRight.row);this.rowEdge.boundary(p.topLeft.col,p.bottomRight.col);switch(o){case"expand-left":q.col=this.colEdge.prevLeft(q.col);j=q;break;case"shrink-right":q.col=this.colEdge.nextLeft(q.col);j=q;break;case"expand-right":k.col=this.colEdge.nextRight(k.col);j=k;break;case"shrink-left":k.col=this.colEdge.prevRight(k.col);j=k;break;case"expand-up":q.row=this.rowEdge.prevLeft(q.row);j=q;break;case"shrink-down":q.row=this.rowEdge.nextLeft(q.row);j=q;break;case"expand-down":k.row=this.rowEdge.nextRight(k.row);j=k;break;case"shrink-up":k.row=this.rowEdge.prevRight(k.row);j=k;break;case"expand-page-up":q.row=r.prevPage(q.row,h);break;case"shrink-page-up":k.row=r.prevPage(k.row,h);break;case"expand-page-down":k.row=r.nextPage(k.row,h);break;case"shrink-page-down":q.row=r.nextPage(q.row,h);break;case"first-col":q.col=f.firstVisible();k.col=g.bottomRight.col;j=q;break;case"last-col":k.col=f.lastVisible();q.col=g.topLeft.col;j=k;break;case"first-row":q.row=r.firstVisible();k.row=g.bottomRight.row;j=q;break;case"last-row":k.row=r.lastVisible();q.row=g.topLeft.row;j=k;break;case"last":k.row=r.lastVisible();k.col=f.lastVisible();q=g.topLeft;j=k;break;case"first":q.row=r.firstVisible();q.col=f.firstVisible();k=g.bottomRight;j=q;break}var n=new b(q,k);if(!this.union(n).intersects(g)){this.modifySelection(o.replace("shrink","expand"));return}if(j){l.focus(j)}this.updateCurrentSelectionRange(n)},moveActiveCell:function(k){var j=this._sheet;var h=j.activeCell();var l=h.topLeft;var i=h.bottomRight;var m=j.originalActiveCell();var o=j._grid._rows;var g=j._grid._columns;var n=m.row;var f=m.col;switch(k){case"left":f=g.prevVisible(l.col);break;case"up":n=o.prevVisible(l.row);break;case"right":f=g.nextVisible(i.col);break;case"down":n=o.nextVisible(i.row);break;case"first-col":f=g.firstVisible();break;case"last-col":f=g.lastVisible();break;case"first-row":n=o.firstVisible();break;case"last-row":n=o.lastVisible();break;case"last":n=o.lastVisible();f=g.lastVisible();break;case"first":n=o.firstVisible();f=g.firstVisible();break;case"next-page":n=o.nextPage(i.row,this._viewPortHeight);break;case"prev-page":n=o.prevPage(i.row,this._viewPortHeight);break}j.select(new e(n,f))},navigateInSelection:function(o){var n=this._sheet;var j=n.activeCell();var r=j.topLeft;var s=n.originalActiveCell();var u=n._grid._rows;var h=n._grid._columns;var t=s.row;var g=s.col;var p=n.currentNavigationRange();var f=p.topLeft;var i=p.bottomRight;var k=false;var q=r.col;var m=r.row;while(!k){var l=new e(t,g);switch(o){case"next":if(i.eq(l)){p=n.nextNavigationRange();t=p.topLeft.row;g=p.topLeft.col}else{g=h.nextVisible(q,true);if(g>i.col){g=f.col;t=u.nextVisible(t,true)}}break;case"previous":if(f.eq(l)){p=n.previousNavigationRange();t=p.bottomRight.row;g=p.bottomRight.col}else{g=h.prevVisible(q,true);if(g<f.col){g=i.col;t=u.prevVisible(t,true)}}break;case"lower":if(i.eq(l)){p=n.nextNavigationRange();t=p.topLeft.row;g=p.topLeft.col}else{t=u.nextVisible(m,true);if(t>i.row){t=f.row;g=h.nextVisible(g,true)}}break;case"upper":if(f.eq(l)){p=n.previousNavigationRange();t=p.bottomRight.row;g=p.bottomRight.col}else{t=u.prevVisible(m,true);if(t<f.row){t=i.row;g=h.prevVisible(g,true)}}break;default:throw new Error("Unknown entry navigation: "+o)}k=!this.shouldSkip(t,g);q=g;m=t}if(n.singleCellSelection()){n.select(new e(t,g))}else{n.activeCell(new e(t,g))}},extendSelection:function(i,j){var h=this._sheet;var g=h._grid;if(j==="autofill"){this.resizeAutoFill(i);return}if(j==="range"){i=g.normalize(i)}else{if(j==="row"){i=g.rowRef(i.row).bottomRight}else{if(j==="column"){i=g.colRef(i.col).bottomRight}}}var f=h.originalActiveCell().toRangeRef();this.updateCurrentSelectionRange(new b(f.topLeft,i))},shouldSkip:function(i,f){var g=new e(i,f);var h=false;this._sheet.forEachMergedCell(function(j){if(j.intersects(g)&&!j.collapse().eq(g)){h=true}});return h},resizeAutoFill:function(f){var i=this._sheet;var m=i.select();var o=i._autoFillOrigin;var n=this.autoFillCalculator.autoFillDest(m,f);var k=this.punch(m,n);var g,l,p;if(!k){var h=i.range(n)._previewFillFrom(i.range(o));if(h){l=h.direction;var j=h.props;if(l===0||l==1){p=j[j.length-1];g=p[p.length-1].value}else{if(l===2){p=j[0];g=p[p.length-1].value}else{if(l===3){p=j[j.length-1];g=p[0].value}}}}}i.updateAutoFill(n,k,g,l)},determineDirection:function(k){var i=this._sheet.currentSelectionRange();var f=this._sheet.activeCell();var l=f.topLeft.col==i.topLeft.col;var h=f.bottomRight.col==i.bottomRight.col;var j=f.topLeft.row==i.topLeft.row;var g=f.bottomRight.row==i.bottomRight.row;switch(k){case"left":k=h?"expand-left":"shrink-left";break;case"right":k=l?"expand-right":"shrink-right";break;case"up":k=g?"expand-up":"shrink-up";break;case"down":k=j?"expand-down":"shrink-down";break;case"prev-page":k=g?"expand-page-up":"shrink-page-up";break;case"next-page":k=j?"expand-page-down":"shrink-page-down";break}return k},updateCurrentSelectionRange:function(g){var f=this._sheet;f.select(f.originalSelect().replaceAt(f.selectionRangeIndex(),g),false)},punch:function(g,i){var h;if(i.topLeft.eq(g.topLeft)){if(i.bottomRight.row<g.bottomRight.row){var j=this.rowEdge.nextRight(i.bottomRight.row);h=new b(new e(j,g.topLeft.col),g.bottomRight)}else{if(i.bottomRight.col<g.bottomRight.col){var f=this.colEdge.nextRight(i.bottomRight.col);h=new b(new e(g.topLeft.row,f),g.bottomRight)}}}return h}});d.spreadsheet.SheetNavigator=a}(kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/axismanager",["kendo.core"],a)}(function(){(function(b){if(b.support.browser.msie&&b.support.browser.version<9){return}var a=b.Class.extend({init:function(c){this._sheet=c},forEachSelectedColumn:function(d){var c=this._sheet;c.batch(function(){c.select().forEachColumnIndex(function(e,f){d(c,e,f)})},{layout:true,recalc:true})},forEachSelectedRow:function(d){var c=this._sheet;c.batch(function(){c.select().forEachRowIndex(function(e,f){d(c,e,f)})},{layout:true,recalc:true})},includesHiddenColumns:function(c){return this._sheet._grid._columns.includesHidden(c.topLeft.col,c.bottomRight.col)},includesHiddenRows:function(c){return this._sheet._grid._rows.includesHidden(c.topLeft.row,c.bottomRight.row)},selectionIncludesHiddenColumns:function(){return this.includesHiddenColumns(this._sheet.select())},selectionIncludesHiddenRows:function(){return this.includesHiddenRows(this._sheet.select())},deleteSelectedColumns:function(){this.forEachSelectedColumn(function(e,c,d){e.deleteColumn(c-d)})},deleteSelectedRows:function(){this.forEachSelectedRow(function(e,c,d){e.deleteRow(c-d)})},hideSelectedColumns:function(){this.forEachSelectedColumn(function(k,j){k.hideColumn(j)});var f=this._sheet;var g=f.select().toRangeRef();var i=g.topLeft.col;var e=g.bottomRight.col;var h=null;while(true){var c=e<f._columns._count;var d=i>=0;if(!d&&!c){break}if(c&&!f.isHiddenColumn(e)){h=e;break}if(d&&!f.isHiddenColumn(i)){h=i;break}i--;e++}if(h!==null){g=new b.spreadsheet.RangeRef(new b.spreadsheet.CellRef(0,h),new b.spreadsheet.CellRef(f._rows._count-1,h));f.range(g).select()}},hideSelectedRows:function(){this.forEachSelectedRow(function(k,j){k.hideRow(j)});var d=this._sheet;var e=d.select().toRangeRef();var i=e.topLeft.row;var c=e.bottomRight.row;var g=null;while(true){var h=c<d._rows._count;var f=i>=0;if(!f&&!h){break}if(h&&!d.isHiddenRow(c)){g=c;break}if(f&&!d.isHiddenRow(i)){g=i;break}i--;c++}if(g!==null){e=new b.spreadsheet.RangeRef(new b.spreadsheet.CellRef(g,0),new b.spreadsheet.CellRef(g,d._columns._count-1));d.range(e).select()}},unhideSelectedColumns:function(){this.forEachSelectedColumn(function(d,c){d.unhideColumn(c)})},unhideSelectedRows:function(){this.forEachSelectedRow(function(d,c){d.unhideRow(c)})},addColumnLeft:function(){this.forEachSelectedColumn(function(e,c,d){e.insertColumn(c-d)})},addColumnRight:function(){this.forEachSelectedColumn(function(e,c,d){e.insertColumn(c+(d+1))})},preventAddRow:function(){var d=this._sheet.select().toRangeRef();var c=d.height();return this._sheet.preventInsertRow(0,c)},preventAddColumn:function(){return this._sheet.preventInsertColumn()},addRowAbove:function(){this.forEachSelectedRow(function(e,c,d){e.insertRow(c-d)})},addRowBelow:function(){this.forEachSelectedRow(function(e,c,d){e.insertRow(c+(d+1))})}});b.spreadsheet.AxisManager=a}(kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/clipboard",["kendo.core"],a)}(function(){(function(h){if(h.support.browser.msie&&h.support.browser.version<9){return}var f=h.jQuery;var a=h.spreadsheet.CellRef;var g=h.Class.extend({init:function(l){this._content={};this._externalContent={};this._internalContent={};this.workbook=l;this.origin=h.spreadsheet.NULLREF;this.iframe=document.createElement("iframe");this.iframe.className="k-spreadsheet-clipboard-paste";this.menuInvoked=true;this._uid=h.guid();document.body.appendChild(this.iframe)},destroy:function(){document.body.removeChild(this.iframe)},canCopy:function(){var l={canCopy:true};var m=this.workbook.activeSheet().select();if(m===h.spreadsheet.NULLREF){l.canCopy=false}if(m instanceof h.spreadsheet.UnionRef){l.canCopy=false;l.multiSelection=true}if(this.menuInvoked){l.canCopy=false;l.menuInvoked=true}return l},canPaste:function(){var n=this.workbook.activeSheet();var o=this.pasteRef();var m=n.range(o);var l={canPaste:true,pasteOnMerged:false,pasteOnDisabled:false};if(!m.enable()){l.canPaste=false;l.pasteOnDisabled=true}if(!o.eq(n.unionWithMerged(o))){l.canPaste=false;l.pasteOnMerged=true}if(this.menuInvoked){l.canPaste=false;l.menuInvoked=true}if(o.bottomRight.row>=n._rows._count||o.bottomRight.col>=n._columns._count){l.canPaste=false;l.overflow=true}return l},intersectsMerged:function(){var l=this.workbook.activeSheet();this.parse();this.origin=this._content.origRef;var m=this.pasteRef();return !m.eq(l.unionWithMerged(m))},copy:function(){var l=this.workbook.activeSheet();this.origin=l.select();this._internalContent=l.selection().getState();delete this._externalContent.html;delete this._externalContent.plain},cut:function(){var l=this.workbook.activeSheet();this.copy();l.range(l.select()).clear()},pasteRef:function(){var m=this.workbook.activeSheet();var l=m.activeCell().first();var o=this.origin.first();var n=o.row-l.row;var p=o.col-l.col;return this.origin.relative(n,p,3)},paste:function(){var l=this.workbook.activeSheet();var m=this.pasteRef();l.range(m).setState(this._content,this);l.triggerChange({recalc:true,ref:m})},external:function(l){if(l&&(l.html||l.plain)){this._externalContent=l}else{return this._externalContent}},isExternal:function(){return !this._isInternal()},parse:function(){var n=e();if(this._isInternal()){n=this._internalContent}else{var m=this._externalContent;if(m.html){var o=this.iframe.contentWindow.document;o.open();o.write(m.html);o.close();var l=f(o).find("table:first");if(l.length){n=j(l)}else{n=i(m.plain)}}else{n=i(m.plain)}this.origin=n.origRef}this._content=n},_isInternal:function(){if(this._externalContent.html===undefined){return true}var m=f("<div/>").html(this._externalContent.html).find("table.kendo-clipboard-"+this._uid).length?true:false;var l=f("<div/>").html(this._externalContent.plain).find("table.kendo-clipboard-"+this._uid).length?true:false;return m||l}});h.spreadsheet.Clipboard=g;function e(){var l=new a(0,0,0);return{ref:l,mergedCells:[],data:[],foreign:true,origRef:l.toRangeRef()}}function d(p,q,l,o){var n=p.data||(p.data=[]);if(!n[q]){n[q]=[]}n[q][l]=o;var m=p.origRef.bottomRight;m.row=Math.max(m.row,q);m.col=Math.max(m.col,l)}function c(l){return l.replace(/^-(?:ms|moz|webkit)-/,"")}function k(l){var m={};["borderBottom","borderRight","borderLeft","borderTop"].forEach(function(n){m[n]=l[n+"Style"]=="none"?null:{size:1,color:l[n+"Color"]}});return m}function b(l){var m=window.getComputedStyle(l[0]);var p=l[0].innerText;var o=k(m);var n={value:p===""?null:p,borderBottom:o.borderBottom,borderRight:o.borderRight,borderLeft:o.borderLeft,borderTop:o.borderTop,fontSize:parseInt(m["font-size"],10)};if(m["background-color"]!=="rgb(0, 0, 0)"&&m["background-color"]!=="rgba(0, 0, 0, 0)"){n.background=m["background-color"]}if(m.color!=="rgb(0, 0, 0)"&&m.color!=="rgba(0, 0, 0, 0)"){n.color=m.color}if(m["text-decoration"]=="underline"){n.underline=true}if(m["font-style"]=="italic"){n.italic=true}if(m["font-weight"]=="bold"){n.bold=true}if(c(m["text-align"])!=="right"){n.textAlign=c(m["text-align"])}if(m["vertical-align"]!=="middle"){n.verticalAlign=m["vertical-align"]}if(m["word-wrap"]!=="normal"){n.wrap=true}return n}function j(l){var m=e();l.find(">tr, >tbody>tr").each(function(o,n){f(n).find(">td, >th").each(function(w,r){var s=parseInt(f(r).attr("rowspan"),10)-1||0;var p=parseInt(f(r).attr("colspan"),10)-1||0;var q="<td/>";var y;if(s){var t=o+s;for(var u=o;u<=t;u++){var x=l.find("tr").eq(u);if(u>o){q="<td class='rowspan'></td>";if(w===0){x.find("td").eq(w).after(q)}else{var v=Math.min(x.find("td").length,w);x.find("td").eq(v-1).after(q)}}if(p){for(y=w;y<p+w;y++){q="<td class='rowspan colspan'></td>";x.find("td").eq(y).after(q)}}}}else{if(p){for(y=w;y<p+w;y++){q="<td class='colspan'></td>";f(n).find("td").eq(y).after(q)}}}})});l.find(">tr, >tbody>tr").each(function(o,n){f(n).find(">td, >th").each(function(q,v){var t=parseInt(f(v).attr("rowspan"),10)-1||0;var u=parseInt(f(v).attr("colspan"),10)-1||0;d(m,o,q,b(f(v)));if(t||u){var s=String.fromCharCode(65+q);var r=String.fromCharCode(65+q+u);var p=s+(o+1)+":"+r+(o+1+t);m.mergedCells.push(p)}})});return m}function i(p){var o=e();if(p.indexOf("\t")===-1&&p.indexOf("\n")==-1){d(o,0,0,{value:p})}else{var n=p.split("\n");for(var l=0;l<n.length;l++){var q=n[l].split("\t");for(var m=0;m<q.length;m++){d(o,l,m,{value:q[m]})}}}return o}}(kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/range",["kendo.core","util/text-metrics"],a)}(function(){(function(j){if(j.support.browser.msie&&j.support.browser.version<9){return}var e=j.jQuery;var f=j.spreadsheet.UnionRef;var b=j.spreadsheet.CellRef;var l=j.spreadsheet.RangeRef;var m=["color","fontFamily","underline","italic","bold","textAlign","verticalAlign","background","format","link","editor"];var k={borderTop:{complement:"borderBottom",direction:{top:-1,bottom:-1}},borderLeft:{complement:"borderRight",direction:{left:-1,right:-1}},borderRight:{complement:"borderLeft",direction:{left:1,right:1}},borderBottom:{complement:"borderTop",direction:{top:1,bottom:1}}};var d=j.Class.extend({init:function(o,n){this._sheet=n;this._ref=o},clone:function(){return new d(this._ref.clone(),this._sheet)},skipHiddenCells:function(){var q=[];var p=this,r=p._sheet;var n=r.isHiddenRow.bind(r);var o=r.isHiddenColumn.bind(r);p._ref.forEach(function s(x){if(x instanceof f){x.forEach(s)}else{x=p._normalize(x.toRangeRef());var t=x.topLeft,w=x.bottomRight;var y=i(t.row,w.row,n);var z=i(t.col,w.col,o);for(var v=0;v<y.length;++v){for(var u=0;u<z.length;++u){q.push(new l(new b(y[v].begin,z[u].begin),new b(y[v].end,z[u].end)))}}}});return r.range(q.length>1?new f(q):q[0])},_normalize:function(n){return this._sheet._grid.normalize(n)},_set:function(o,r,q){var n=this;var p=n._sheet;n._ref.forEach(function(s){p._set(s.toRangeRef(),o,r)});if(!q){p.triggerChange({recalc:o=="formula"||o=="value"||o=="validation",value:r,range:n,ref:n._ref})}return n},_get:function(n){return this._sheet._get(this._ref.toRangeRef(),n)},_property:function(n,o){if(o===undefined){return this._get(n)}else{return this._set(n,o)}},value:function(n){if(n!==undefined){this._set("formula",null,true)}return this._property("value",n)},resize:function(o){var n=this._resizedRef(o);return new d(n,this._sheet)},_resizedRef:function(n){return this._ref.map(function(o){return o.toRangeRef().resize(n)})},_border:function(q,p){var n;var s=k[q].complement;var r=k[q].direction;var o=this._sheet;o.batch(function(){n=this._property(q,p);if(p!==undefined){this._resizedRef(r).forEach(function(t){if(t!==j.spreadsheet.NULLREF){new d(t,o)._property(s,null)}})}}.bind(this),{});return n},_collapsedBorder:function(o){var n=this._property(o);var q=k[o].complement;var p=k[o].direction;this._resizedRef(p).forEach(function(s){if(!n&&s!==j.spreadsheet.NULLREF){var r=new d(s,this._sheet);n=r._property(q)}}.bind(this));return n},borderTop:function(n){return this._border("borderTop",n)},borderRight:function(n){return this._border("borderRight",n)},borderBottom:function(n){return this._border("borderBottom",n)},borderLeft:function(n){return this._border("borderLeft",n)},collapsedBorderTop:function(){return this._collapsedBorder("borderTop")},collapsedBorderRight:function(){return this._collapsedBorder("borderRight")},collapsedBorderBottom:function(){return this._collapsedBorder("borderBottom")},collapsedBorderLeft:function(){return this._collapsedBorder("borderLeft")},input:function(t){var r=this._get("format"),n;if(t!==undefined){var o=this._ref.toRangeRef().topLeft;n=j.spreadsheet.calc.parse(this._sheet.name(),o.row,o.col,t);this._sheet.batch(function(){var w=null;if(n.type=="exp"){w=j.spreadsheet.calc.compile(n)}else{if(r!="@"){var v=r&&j.spreadsheet.formatting.type(n.value,r);if(n.type=="date"&&v!="date"){this.format(n.format||a(j.culture().calendar.patterns.d))}else{if(n.type=="percent"&&v!="percent"){this.format(n.value*100==(n.value*100|0)?"0%":"0.00%")}else{if(n.format&&!r){this.format(n.format)}}}}else{if(n.type!="string"){n.value=t}}}this.formula(w);if(!w){this.value(n.value)}}.bind(this),{recalc:true,value:t,ref:this._ref,editorChange:this._sheet.isInEditMode()});return this}else{t=this._get("value");var u=this._get("formula");var q=r&&!u&&j.spreadsheet.formatting.type(t,r);if(u){t="="+u}else{OUT:{if(r&&q=="date"){var s=j.spreadsheet.formatting.text(t,r);n=j.spreadsheet.calc.parse(null,null,null,s);if(typeof n.value=="number"){var p=j.spreadsheet.formatting.text(n.value,r);if(s==p){t=s;break OUT}}}if(q==="date"){t=j.toString(j.spreadsheet.numberToDate(t),j.culture().calendar.patterns.d)}else{if(q==="percent"){t=t*100+"%"}else{if(typeof t=="string"&&(/^[=']/.test(t)||/^(?:true|false)$/i.test(t)||h(t))){t="'"+t}}}}}return t}},enable:function(n){if(n===undefined){n=true;this._sheet.forEach(this._ref.toRangeRef(),function(o,p,q){if(q.enable===false){n=false}});return n}return this._property("enable",n)},formula:function(o){if(o===undefined){var n=this._get("formula");return n?""+n:null}return this._property("formula",o)},validation:function(o){if(o===undefined){var n=this._get("validation");return n?n.toJSON():null}return this._property("validation",o)},_getValidationState:function(){var s=this._ref.toRangeRef();var u=s.topLeft.row;var q=s.topLeft.col;var p=s.bottomRight.row;var t=s.bottomRight.col;var r,n;for(r=q;r<=t;r++){for(n=u;n<=p;n++){var o=this._sheet._validation(n,r);if(o&&o.type==="reject"&&o.value===false){return o}}}return false},merge:function(){this._ref=this._sheet._merge(this._ref);return this},unmerge:function(){var n=this._sheet._mergedCells;this._ref.forEach(function(o){o.toRangeRef().intersecting(n).forEach(function(p){n.splice(n.indexOf(p),1)})});this._sheet.triggerChange({});return this},select:function(){this._sheet.select(this._ref);return this},values:function(v){if(this._ref instanceof f){throw new Error("Unsupported for multiple ranges.")}if(this._ref===j.spreadsheet.NULLREF){if(v!==undefined){throw new Error("Unsupported for NULLREF.")}else{return[]}}var n=this._ref.toRangeRef();var q=n.topLeft.row;var u=n.topLeft.col;var p=n.bottomRight.row;var r=n.bottomRight.col;var x,s;if(v===undefined){v=new Array(n.height());for(var o=0;o<v.length;o++){v[o]=new Array(n.width())}for(x=u;x<=r;x++){for(s=q;s<=p;s++){v[s-q][x-u]=this._sheet._value(s,x)}}return v}else{this._sheet._set(n,"formula",null);for(x=u;x<=r;x++){for(s=q;s<=p;s++){var w=v[s-q];if(w){var t=w[x-u];if(t!==undefined){this._sheet._value(s,x,t)}}}}this._sheet.triggerChange({recalc:true,ref:n});return this}},_properties:function(t){if(this._ref instanceof f){throw new Error("Unsupported for multiple ranges.")}if(this._ref===j.spreadsheet.NULLREF){if(t!==undefined){throw new Error("Unsupported for NULLREF.")}else{return[]}}var n=this._ref.toRangeRef();var s=n.topLeft.row;var w=n.topLeft.col;var p=n.bottomRight.row;var u=n.bottomRight.col;var y,v;var r=this._sheet;if(t===undefined){t=new Array(n.height());r.forEach(n,function(C,A,B){C-=s;A-=w;var z=t[C]||(t[C]=[]);z[A]=B});return t}else{var o;n=n.clone();var q=function(z){var A=o[z];n.topLeft.row=n.bottomRight.row=v;n.topLeft.col=n.bottomRight.col=y;if(z=="value"){r._set(n,"formula",null)}r._set(n,z,A)};for(y=w;y<=u;y++){for(v=s;v<=p;v++){var x=t[v-s];if(x){o=x[y-w];if(o){Object.keys(o).forEach(q)}}}}r.triggerChange({recalc:true,ref:this._ref});return this}},clear:function(o){var n=!o||!Object.keys(o).length;var p=this._sheet;var q={recalc:n||o&&o.contentsOnly===true,ref:this._ref};p.batch(function(){if(q.recalc){this.formula(null)}if(n){this.validation(null)}if(n||o&&o.formatOnly===true){m.forEach(function(r){this[r](null)}.bind(this));this.unmerge()}}.bind(this),q);return this},clearContent:function(){return this.clear({contentsOnly:true})},clearFormat:function(){return this.clear({formatOnly:true})},isSortable:function(){return !this.cantSort()},cantSort:function(){if(this._ref instanceof f){return{code:"cantSortMultipleSelection",message:"Unsupported for multiple ranges."}}if(this._ref===j.spreadsheet.NULLREF){return{code:"cantSortNullRef",message:"Unsupported for NULLREF."}}var t=this._sheet._getMergedCells(this._ref.toRangeRef());var s=t.primary;var o=t.secondary;var r=null,n=null;var p={};try{this._sheet.forEach(this,function(w,v){var x=new b(w,v).print();var u=s[x];if(u){if(r===null){r=u.width();n=u.height()}else{if(!(r==u.width()&&n==u.height())){throw p}}}else{if(!o[x]&&t.hasMerged){throw p}}})}catch(q){if(q!==p){throw q}return{code:"cantSortMixedCells",message:"Unsupported for range containing cells of different shapes."}}return false},sort:function(n){var o=this.cantSort();if(o){throw new Error(o.message)}if(n===undefined){n={column:0}}n=n instanceof Array?n:[n];this._sheet._sortBy(this._ref.toRangeRef(),n.map(function(p,q){if(typeof p==="number"){p={column:p}}return{index:p.column===undefined?q:p.column,ascending:p.ascending===undefined?true:p.ascending}}));return this},isFilterable:function(){return !(this._ref instanceof f)},filter:function(n){if(this._ref instanceof f){throw new Error("Unsupported for multiple ranges.")}if(n===false){this.clearFilters()}else{n=n===true?[]:n instanceof Array?n:[n];this._sheet._filterBy(this._ref.toRangeRef(),n.map(function(o,p){return{index:o.column===undefined?p:o.column,filter:o.filter}}))}return this},clearFilter:function(n){this._sheet.clearFilter(n)},clearFilters:function(){var p=this._sheet.filter();var n=[];if(p){for(var o=0;o<p.columns.length;o++){n.push(o)}this._sheet.batch(function(){this.clearFilter(n);this._filter=null},{layout:true,filter:true})}},hasFilter:function(){var n=this._sheet.filter();return !!n},leftColumn:function(){return new d(this._ref.leftColumn(),this._sheet)},rightColumn:function(){return new d(this._ref.rightColumn(),this._sheet)},topRow:function(){return new d(this._ref.topRow(),this._sheet)},bottomRow:function(){return new d(this._ref.bottomRow(),this._sheet)},column:function(n){return new d(this._ref.toColumn(n),this._sheet)},row:function(n){return new d(this._ref.toRow(n),this._sheet)},forEachRow:function(n){this._ref.forEachRow(function(o){n(new d(o,this._sheet))}.bind(this))},forEachColumn:function(n){this._ref.forEachColumn(function(o){n(new d(o,this._sheet))}.bind(this))},sheet:function(){return this._sheet},topLeft:function(){return this._ref.toRangeRef().topLeft},intersectingMerged:function(){var n=this._sheet;var o=[];n._mergedCells.forEach(function(p){if(p.intersects(this._ref)){o.push(p.toString())}}.bind(this));return o},getState:function(n){var p=this._ref.first();var r={ref:p,data:[],origRef:this._ref};var o;if(!n){o=j.spreadsheet.ALL_PROPERTIES;r.mergedCells=this.intersectingMerged()}else{if(n==="input"){o=["value","formula"]}else{if(n==="border"){o=["borderLeft","borderTop","borderRight","borderBottom"]}else{o=[n]}}}var q=r.data;this.forEachCell(function(x,u,s){var v={};var w=x-p.row;var t=u-p.col;if(!q[w]){q[w]=[]}q[w][t]=v;o.forEach(function(y){v[y]=typeof s[y]=="undefined"?null:s[y]})});return r},setState:function(r,q){var o=this._sheet;var n=this._ref.first();var p=r.ref.row-n.row;var s=r.ref.col-n.col;o.batch(function(){if(r.mergedCells){this.unmerge()}var t=n.row;r.data.forEach(function(v,w){if(q&&!q.isExternal()&&o.isHiddenRow(r.ref.row+w)){return}var u=n.col;v.forEach(function(B,x){if(q&&!q.isExternal()&&o.isHiddenColumn(r.ref.col+x)){return}var y=q?o.range(t,u):o.range(n.row+w,n.col+x);if(y.enable()){for(var A in B){if(A!="value"){if(!(q&&A=="enable")){y._set(A,B[A])}}}if(!B.formula){if(q&&q.isExternal()){try{if(B.value==null){y._set("value",null)}else{y.input(B.value)}}catch(z){y._set("value",B.value)}}else{y._set("value",B.value)}}}u++});t++});if(r.mergedCells){r.mergedCells.forEach(function(u){u=o._ref(u).relative(p,s,3);o.range(u).merge()},this)}}.bind(this),{recalc:true})},_adjustRowHeight:function(){var o=this._sheet;var p=this.getState();var q=[];for(var n=0;n<p.mergedCells.length;n++){q.push(o.range(p.mergedCells[n]))}this.forEachRow(function(s){if(s.topLeft().row>=s.sheet()._rows._count){return}var r=s.sheet().rowHeight(s.topLeft().row);s.forEachCell(function(z,w,u){var v=o.range(z,w);var t=0;for(var x=0;x<q.length;x++){if(v._ref.intersects(q[x]._ref)){t+=u.width;break}}var y=Math.max(o.columnWidth(w),t);r=Math.max(r,j.spreadsheet.util.getTextHeight(u.value,y,u.fontSize,u.wrap))});o.rowHeight(s.topLeft().row,Math.max(o.rowHeight(s.topLeft().row),r))})},forEachCell:function(n){this._ref.forEach(function(o){this._sheet.forEach(o.toRangeRef(),n.bind(this))}.bind(this))},hasValue:function(){var p={};var o=this._sheet._defaultCellStyle;try{this.forEachCell(function(u,r,q){for(var s in q){var t=q[s];if(t!==undefined&&t!==o[s]){throw p}}})}catch(n){if(n===p){return true}else{throw n}}return false},wrap:function(n){if(n===undefined){return !!this._property("wrap")}this.forEachRow(function(o){var p=o.sheet().rowHeight(o.topLeft().row);o.forEachCell(function(t,r,q){var s=this._sheet.columnWidth(r);if(q.value!==null&&q.value!==undefined){p=Math.max(p,j.spreadsheet.util.getTextHeight(q.value,s,q.fontSize,true))}});o.sheet().rowHeight(o.topLeft().row,p)}.bind(this));this._property("wrap",n);return this},fontSize:function(n){if(n===undefined){return this._property("fontSize")}this.forEachRow(function(o){var p=o.sheet().rowHeight(o.topLeft().row);o.forEachCell(function(t,r,q){var s=this._sheet.columnWidth(r);if(q.value!==null&&q.value!==undefined){p=Math.max(p,j.spreadsheet.util.getTextHeight(q.value,s,n,q.wrap))}});o.sheet().rowHeight(o.topLeft().row,p)}.bind(this));this._property("fontSize",n);return this},draw:function(n,o){this._sheet.draw(this,n,o)}});function i(q,o,n){while(q<=o&&n(q)){q++}if(q>o){return[]}for(var p=q+1;p<=o;++p){if(n(p)){return[{begin:q,end:p-1}].concat(i(p+1,o,n))}}return[{begin:q,end:o}]}e.each(m,function(n,o){d.prototype[o]=function(p){return this._property(o,p)}});function a(n){return n.replace(/M/g,"m").replace(/'/g,'"').replace(/tt/,"am/pm")}function h(n){return !/^=/.test(n)&&/number|percent/.test(j.spreadsheet.calc.parse(null,0,0,n).type)}var g=e('<div style="position: absolute !important; top: -4000px !important; height: auto !important;padding: 1px !important; margin: 0 !important; border: 1px solid black !important;line-height: normal !important; visibility: hidden !important;white-space: pre-wrap; word-break: break-all;" />')[0];function c(r,o,q,n){var p={baselineMarkerSize:0,width:n===true?o+"px":"auto","font-size":(q||12)+"px","word-break":n===true?"break-all":"normal","white-space":n===true?"pre-wrap":"pre"};return j.util.measureText(r,p,g).height}j.spreadsheet.util={getTextHeight:c};j.spreadsheet.Range=d}(window.kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/runtime",["spreadsheet/references"],a)}(function(){if(kendo.support.browser.msie&&kendo.support.browser.version<9){return}var h={};var j=kendo.spreadsheet;j.calc=h;var M=h.runtime={};var c=kendo.Class;var y=j.Ref;var B=j.CellRef;var m=j.RangeRef;var u=j.UnionRef;var C=j.NULLREF;function K(S){if(S instanceof K){return S}this.code=S}K.prototype.toString=function(){return"#"+this.code+(this.code=="NAME"?"?":"!")};var P=c.extend({init:function P(V,U,S,T){this.callback=V;this.formula=U;this.ss=S;this.parent=T},resolve:function(T){var S=this;if(T instanceof y){S.resolveCells([T],function(){S._resolve(T)})}else{S._resolve(T)}},error:function(S){return new K(S)},_resolve:function(T){if(T===undefined){T=null}else{if(Array.isArray(T)){T=this.asMatrix(T)}else{T=I(T)}}var S=this.formula;S.value=T;if(this.ss.onFormula(S)&&this.callback){this.callback.call(S,T)}},resolveCells:function(Z,X){var U=this,Y=[];(function W(ac){for(var ad=0;ad<ac.length;++ad){var ab=ac[ad];if(ab instanceof y){aa(U.getRefCells(ab))}if(Array.isArray(ab)){W(ab)}}}(Z));if(!Y.length){return X.call(U)}for(var T=Y.length,V=0;V<Y.length;++V){S(Y[V])}function S(ab){ab.exec(U.ss,function(){if(!--T){X.call(U)}},U)}function aa(ac){for(var ad=0;ad<ac.length;++ad){var ab=ac[ad];if(ab.formula){Y.push(ab.formula)}}return true}},cellValues:function(S,V){var T=[];for(var U=0;U<S.length;++U){var W=S[U];if(W instanceof y){W=this.getRefData(W);T=T.concat(W)}else{if(Array.isArray(W)){T=T.concat(this.cellValues(W))}else{if(W instanceof g){T=T.concat(this.cellValues(W.data))}else{T.push(W)}}}}if(V){return V.apply(this,T)}return T},fetchName:function(T,W){var U=this.formula;var V=this.ss.nameValue(T,U.sheet,U.row,U.col);if(V instanceof n){V=V.clone(U.sheet,U.row,U.col,true);var S=new j.ValidationFormulaContext(this.ss.workbook);V.exec(S,W,this)}else{if(V instanceof y){V=V.absolute(U.row,U.col);if(!V.sheet){V.sheet=U.sheet}}W(V==null?new K("NAME"):V)}},force:function(S){if(S instanceof y){return this.getRefData(S)}return S},func:function(V,U,S){V=V.toLowerCase();var T=R[V];if(T){return T.call(this,U,S)}U(new K("NAME"))},bool:function(S){if(S instanceof y){S=this.getRefData(S)}if(typeof S=="string"){return S.toLowerCase()=="true"}if(typeof S=="number"){return S!==0}if(typeof S=="boolean"){return S}return S!=null},asMatrix:function(V){if(V instanceof g){return V}var U=this;if(V instanceof m){var T=V.topLeft;var Y=T.row,X=T.col;var W=U.getRefCells(V);var S=new g(U);if(isFinite(V.width())){S.width=V.width()}if(isFinite(V.height())){S.height=V.height()}if(!isFinite(Y)){Y=0}if(!isFinite(X)){X=0}W.forEach(function(aa){S.set(aa.row-Y,aa.col-X,aa.value)});return S}if(Array.isArray(V)&&V.length>0){var S=new g(U),Z=0;V.forEach(function(aa){var ab=0;var ac=1;aa.forEach(function(ae){var ad=ae instanceof m;if(ae instanceof y&&!ad){ae=U.getRefData(ae)}if(ad||Array.isArray(ae)){ae=U.asMatrix(ae)}if(ae instanceof g){ae.each(function(af,ag,ah){S.set(Z+ag,ab+ah,af)});ac=Math.max(ac,ae.height);ab+=ae.width}else{S.set(Z,ab++,ae)}});Z+=ac});return S}},getRefCells:function(S,U){var T=this.formula;return this.ss.getRefCells(S,U,T.sheet,T.row,T.col)},getRefData:function(S){var T=this.formula;return this.ss.getData(S,T.sheet,T.row,T.col)},workbook:function(){return this.ss.workbook}});var g=c.extend({init:function g(S){this.context=S;this.height=0;this.width=0;this.data=[]},clone:function(){var S=new g(this.context);S.height=this.height;S.width=this.width;S.data=this.data.map(function(T){return T.slice()});return S},get:function(V,T){var S=this.data[V];var U=S?S[T]:null;return U instanceof y?this.context.getRefData(U):U},set:function(V,T,U){var S=this.data[V];if(S==null){S=this.data[V]=[]}S[T]=U;if(V>=this.height){this.height=V+1}if(T>=this.width){this.width=T+1}},each:function(U,S){for(var W=0;W<this.height;++W){for(var T=0;T<this.width;++T){var V=this.get(W,T);if(S||V!=null){V=U.call(this.context,V,W,T);if(V!==undefined){return V}}}}},map:function(U,T){var S=new g(this.context);this.each(function(W,X,V){S.set(X,V,U.call(this,W,X,V))},T);return S},eachRow:function(S){for(var U=0;U<this.height;++U){var T=S.call(this.context,U);if(T!==undefined){return T}}},eachCol:function(T){for(var S=0;S<this.width;++S){var U=T.call(this.context,S);if(U!==undefined){return U}}},mapRow:function(T){var S=new g(this.context);this.eachRow(function(U){S.set(U,0,T.call(this.context,U))});return S},mapCol:function(T){var S=new g(this.context);this.eachCol(function(U){S.set(0,U,T.call(this.context,U))});return S},toString:function(){return JSON.stringify(this.data)},transpose:function(){var S=new g(this.context);this.each(function(U,V,T){S.set(T,V,U)});return S},unit:function(W){this.width=this.height=W;var S=this.data=new Array(W);for(var U=W;--U>=0;){var V=S[U]=new Array(W);for(var T=W;--T>=0;){V[T]=U==T?1:0}}return this},multiply:function(X){var Y=this,T=new g(Y.context);for(var Z=0;Z<Y.height;++Z){for(var S=0;S<X.width;++S){var aa=0;for(var U=0;U<Y.width;++U){var W=Y.get(Z,U);var V=X.get(U,S);if(typeof W!="number"||typeof V!="number"){throw new K("VALUE")}aa+=W*V}T.set(Z,S,aa)}}return T},adds:function(W,aa){var X=this,U=new g(X.context);var T=aa?-1:1;for(var Z=0;Z<X.height;++Z){for(var S=0;S<X.width;++S){var Y=X.get(Z,S),V=W.get(Z,S);U.set(Z,S,Y+T*V)}}return U},determinant:function(){var T=this.clone().data;var Z=T.length;var Y=1,X,S,W,U;for(X=0;X<Z;X++){for(S=X;S<Z&&!T[S][X];S++){}if(S==Z){return 0}if(S!=X){Y=-Y;for(U=X;U<Z;U++){var V=T[X][U];T[X][U]=T[S][U];T[S][U]=V}}for(W=X+1;W<Z;W++){for(U=X+1;U<Z;U++){T[W][U]-=T[X][U]*T[W][X]/T[X][X]}}Y*=T[X][X]}return Y},inverse:function(){var S=this.width;var T=this.augment(new g(this.context).unit(S));var aa=T.data;var X;for(var V=0;V<S;++V){var U=F(V,S,function(ab){return aa[ab][V]});if(!aa[U][V]){return null}if(V!=U){X=aa[V];aa[V]=aa[U];aa[U]=X}for(var Y=V+1;Y<S;++Y){for(var W=V+1;W<2*S;++W){aa[Y][W]-=aa[V][W]*aa[Y][V]/aa[V][V]}aa[Y][V]=0}}for(var Y=0;Y<S;++Y){for(var Z=aa[Y][Y],W=0;W<2*S;++W){aa[Y][W]/=Z}}for(var V=S;--V>=0;){for(var Y=V;--Y>=0;){if(aa[Y][V]){for(var W=2*S;--W>=S;){aa[Y][W]-=aa[V][W]*aa[Y][V]}}}}return T.slice(0,S,S,S)},augment:function(S){var T=this.clone(),U=T.width;S.each(function(X,W,V){T.set(W,V+U,X)});return T},slice:function(Y,V,T,X){var S=new g(this.context);for(var W=0;W<T;++W){for(var U=0;U<X;++U){S.set(W,U,this.get(Y+W,V+U))}}return S}});function F(V,T,W){var S=W(V),X=V;while(++V<T){var U=W(V);if(U>S){S=U;X=V}}return X}var n=c.extend({init:function n(S,V,W,U,X,T){this.refs=S;this.handler=V;this.print=W;this.absrefs=null;this.sheet=U;this.row=X;this.col=T;this.onReady=[];this.pending=false},clone:function(W,X,U,T){var V=W.toLowerCase();var S=this.refs;if(T||V!=this.sheet.toLowerCase()){S=S.map(function(Y){if(!Y.hasSheet()&&(!Y.sheet||Y.sheet.toLowerCase()!=V)){Y=Y.clone().setSheet(W)}return Y})}return new n(S,this.handler,this.print,W,X,U)},resolve:function(S){this.pending=false;this.onReady.forEach(function(T){T(S)})},exec:function(U,X,T){if("value" in this){if(X){X(this.value)}}else{if(X){this.onReady.push(X)}var S=new P(this.resolve,this,U,T);var W=0;while(T){if(T.formula===this){this.pending=false;S.resolve(new K("CIRCULAR"));return}T=T.parent;++W}if(this.pending){return}this.pending=true;var V=function(){if(!this.absrefs){this.absrefs=this.refs.map(function(Y){return Y.absolute(this.row,this.col)},this)}this.handler.call(S)}.bind(this);if(W<20){V()}else{setTimeout(V,0)}}},reset:function(){this.onReady=[];this.pending=false;delete this.value},renameSheet:function(T,S){T=T.toLowerCase();this.absrefs=null;if(this.sheet.toLowerCase()==T){this.sheet=S}this.refs.forEach(function(U){U.renameSheet(T,S)})},adjust:function(ab,V,T,Y){ab=ab.toLowerCase();var aa=this.row;var S=this.col;var Z=this.sheet.toLowerCase();var U=false;if(Z==ab){if(V=="row"&&aa>=T){this.row+=Y;U=true}if(V=="col"&&S>=T){this.col+=Y;U=true}}var W=this.row;var X=this.col;this.absrefs=null;this.refs=this.refs.map(function(ac){if(ac===C){return ac}if(ac.sheet.toLowerCase()!=ab){if(U){if(V=="row"&&aa>=T){ac=ac.relative(Y,0)}if(V=="col"&&S>=T){ac=ac.relative(0,Y)}}return ac}return ac.adjust(aa,S,W,X,V=="row",T,Y)},this)},toString:function(){return this.print(this.row,this.col)}});var R=Object.create(null);R["if"]=function(X,T){var S=this;var W=T[0],V=T[1],U=T[2];this.resolveCells([W],function(){var Y=S.asMatrix(W);if(Y){V(function(Z){U(function(aa){var ac=S.asMatrix(Z);var ab=S.asMatrix(aa);X(Y.map(function(af,ae,ad){if(af instanceof K){return af}else{if(S.bool(af)){return ac?ac.get(ae,ad):Z}else{return ab?ab.get(ae,ad):aa}}}))})})}else{W=this.force(W);if(W instanceof K){X(W)}else{if(S.bool(W)){V(X)}else{U(X)}}}})};R["\u8801"]=function(S){S((1+Math.sqrt(5))/2)};function N(ac,ad){var ab="function arrayArgs(args) { var xargs = [], width = 0, height = 0, arrays = [], i = 0; ";var ag="function resolve(args, callback) { var toResolve = [], i = 0; ";var S,ah,V="'use strict'; function check(args) { var stack = [], tmp, xargs = [], i = 0, m, err = 'VALUE'; ",W=false;var af=false,aa=false;V+=ad.map(Y).join("");V+="if (i < args.length) return new CalcError('N/A'); ";V+="return xargs; } ";ab+="return { args: xargs, width: width, height: height, arrays: arrays }; } ";var Z;if(W){ag+="this.resolveCells(toResolve, callback); } ";Z=new Function("CalcError","round",V+ag+ab+" return { resolve: resolve, check: check, arrayArgs: arrayArgs };")}else{Z=new Function("CalcError","round",V+" return { check: check };")}Z=Z(K,O);if(!aa){delete Z.arrayArgs}return Z;function Y(ai){S=ai[0];var al="{ ";if(Array.isArray(S)){ab+="while (i < args.length) { ";ag+="while (i < args.length) { ";al+="xargs.push(tmp = []); stack.push(xargs); xargs = tmp; ";al+="while (i < args.length) { ";al+=ai.map(Y).join("");al+="} ";al+="xargs = stack.pop(); ";ag+="} ";ab+="} "}else{if(S=="+"){ab+="while (i < args.length) { ";ag+="while (i < args.length) { ";al+="if (i >= args.length) return new CalcError('N/A'); ";al+="xargs.push(tmp = []); stack.push(xargs); xargs = tmp; ";al+="do { ";al+=ai.slice(1).map(Y).join("");al+="} while (i < args.length); ";al+="xargs = stack.pop(); ";ag+="} ";ab+="} "}else{if(S=="?"){al+="if (!("+ae(ai[1])+")) return new CalcError(err); "}else{var aj=ai[1];if(Array.isArray(aj)&&/^#?collect/.test(aj[0])){var am=aj[2];T();al+="try {var $"+S+" = this.cellValues(args.slice(i";if(am){al+=", i + "+am}al+=")).filter(function($"+S+"){ ";if(aj[0]=="collect"){al+="if ($"+S+" instanceof CalcError) throw $"+S+"; "}al+="return "+ae(aj[1])+"; }, this); ";if(am){al+="i += "+am+"; "}else{al+="i = args.length; "}al+="xargs.push($"+S+")} catch(ex) { if (ex instanceof CalcError) return ex; throw ex; } ";ag+="toResolve.push(args.slice(i)); "}else{if(aj=="rest"){al+="xargs.push(args.slice(i)); i = args.length; "}else{if(af=/^\*/.test(S)){aa=true;S=S.substr(1)}al+="var $"+S+" = args[i++]; ";var ak=false;if(/!$/.test(aj)){aj=aj.substr(0,aj.length-1);ak=true}else{al+="if ($"+S+" instanceof CalcError) return $"+S+"; "}al+=U(aj,ak)+"xargs.push($"+S+"); "}}}}}al+="} ";return al}function T(){if(ah){return"$"+S+""}W=true;ah=true;ag+="toResolve.push(args[i++]); ";return"($"+S+" = this.force($"+S+"))"}function X(ai){return"("+(ai?"(typeof "+T()+" == 'number' ? ($"+S+" = round($"+S+"), true) : false) || ":"(typeof "+T()+" == 'number') || ")+"(typeof $"+S+" == 'boolean') || (typeof $"+S+" == 'string' && !/^(?:=|true|false)/i.test($"+S+") ? (tmp = kendo.spreadsheet.calc.parse(0, 0, 0, $"+S+"), /^date|number|percent$/.test(tmp.type) ? ($"+S+" = +tmp.value, true) : false) : false))"}function U(aj,ak){ah=false;var ai="if (!("+ae(aj)+")) { ";if(ah&&!ak){ai+=" if ($"+S+" instanceof CalcError) return $"+S+"; "}ai+="return new CalcError(err); } ";if(!ah){ag+="i++; "}if(af){ab+="var $"+S+" = this.asMatrix(args[i]); if ($"+S+") { xargs.push($"+S+"); width = Math.max(width, $"+S+".width); height = Math.max(height, $"+S+".height); arrays.push(true) } else { xargs.push(args[i]); arrays.push(false); } i++; "}else{ab+="xargs.push(args[i++]); arrays.push(false); "}return ai}function ae(ai){if(Array.isArray(ai)){if(ai[0]=="or"){return"("+ai.slice(1).map(ae).join(") || (")+")"}if(ai[0]=="and"){return"("+ai.slice(1).map(ae).join(") && (")+")"}if(ai[0]=="values"){return"("+ai.slice(1).map(function(ak){return T()+" === "+ak}).join(") || (")+")"}if(ai[0]=="null"){return"("+ae("null")+" ? (($"+S+" = "+ai[1]+"), true) : false)"}if(ai[0]=="between"||ai[0]=="[between]"){return"("+T()+" >= "+ai[1]+" && $"+S+" <= "+ai[2]+" ? true : ((err = 'NUM'), false))"}if(ai[0]=="(between)"){return"("+T()+" > "+ai[1]+" && $"+S+" < "+ai[2]+" ? true : ((err = 'NUM'), false))"}if(ai[0]=="(between]"){return"("+T()+" > "+ai[1]+" && $"+S+" <= "+ai[2]+" ? true : ((err = 'NUM'), false))"}if(ai[0]=="[between)"){return"("+T()+" >= "+ai[1]+" && $"+S+" < "+ai[2]+" ? true : ((err = 'NUM'), false))"}if(ai[0]=="assert"){var aj=ai[2]||"N/A";return"(("+ai[1]+") ? true : (err = "+JSON.stringify(aj)+", false))"}if(ai[0]=="not"){return"!("+ae(ai[1])+")"}throw new Error("Unknown array type condition: "+ai[0])}if(ai=="number"||ai=="datetime"){return X(true)}if(ai=="integer"||ai=="date"){return"("+X()+" && (($"+S+" |= 0), true))"}if(ai=="divisor"){return"("+X(true)+" && ($"+S+" == 0 ? ((err = 'DIV/0'), false) : true))"}if(ai=="number+"){return"("+X(true)+" && ($"+S+" >= 0 ? true : ((err = 'NUM'), false)))"}if(ai=="integer+"){return"("+X()+" && (($"+S+" |= 0) >= 0 ? true : ((err = 'NUM'), false)))"}if(ai=="number++"){return"("+X(true)+" && ($"+S+" > 0 ? true : ((err = 'NUM'), false)))"}if(ai=="integer++"){return"("+X()+" && (($"+S+" |= 0) > 0 ? true : ((err = 'NUM'), false)))"}if(ai=="string"){return"((typeof "+T()+" == 'string' || typeof $"+S+" == 'boolean' || typeof $"+S+" == 'number') ? ($"+S+" += '', true) : ($"+S+" === undefined ? (($"+S+" = ''), true) : false))"}if(ai=="boolean"){return"(typeof "+T()+" == 'boolean')"}if(ai=="logical"){return"(typeof "+T()+" == 'boolean' || (typeof $"+S+" == 'number' ? ($"+S+" = !!$"+S+", true) : false))"}if(ai=="matrix"){T();return"((m = this.asMatrix($"+S+")) ? ($"+S+" = m) : false)"}if(ai=="#matrix"){return"((m = this.asMatrix($"+S+")) ? ($"+S+" = m) : false)"}if(ai=="ref"){return"($"+S+" instanceof kendo.spreadsheet.Ref)"}if(ai=="area"){return"($"+S+" instanceof kendo.spreadsheet.CellRef || $"+S+" instanceof kendo.spreadsheet.RangeRef)"}if(ai=="cell"){return"($"+S+" instanceof kendo.spreadsheet.CellRef)"}if(ai=="null"){return"("+T()+" == null)"}if(ai=="anyvalue"){return"("+T()+" != null && i <= args.length)"}if(ai=="forced"){return"("+T()+", i <= args.length)"}if(ai=="anything"){return"(i <= args.length)"}if(ai=="blank"){return"("+T()+" == null || $"+S+" === '')"}throw new Error("Can't check for type: "+ai)}}function O(U){var T=Math.floor(U);var S=U-T;return T+Math.round(S*1000000000000000)/1000000000000000}function I(S){if(typeof S=="number"){return O(S)}else{return S}}function k(V,U,S){if(S instanceof K){return S}try{return U.apply(V,S)}catch(T){if(T instanceof K){return T}else{throw T}}}function d(T,U,S,V){return function(Y,W){function X(){if(V){var ab=V.call(this,W);W=ab.args;if(ab.width>0&&ab.height>0){var aa=new g(this);for(var af=0;af<ab.height;++af){for(var ac=0;ac<ab.width;++ac){var ae=[];for(var ad=0;ad<W.length;++ad){if(ab.arrays[ad]){var Z=W[ad];ae[ad]=Z.get(af%Z.height,ac%Z.width)}else{ae[ad]=W[ad]}}ae=S.call(this,ae);aa.set(af,ac,k(this,T,ae))}}return Y(aa)}}var ae=S.call(this,W);Y(k(this,T,ae))}if(U){U.call(this,W,X)}else{X.call(this)}}}function l(T,U,S,V){return function(Y,W){function X(){if(V){var af=V.call(this,W);W=af.args;if(af.width>0&&af.height>0){var ah=new g(this);var ae=af.width*af.height;var ad=function(aj,ai){return function(ak){ah.set(aj,ai,ak);--ae;if(ae===0){return Y(ah)}}};for(var ag=0;ag<af.height&&ae>0;++ag){for(var aa=0;aa<af.width&&ae>0;++aa){var Z=[];for(var ac=0;ac<W.length;++ac){if(af.arrays[ac]){var ab=W[ac];Z[ac]=ab.get(ag%ab.height,aa%ab.width)}else{Z[ac]=W[ac]}}Z=S.call(this,Z);if(Z instanceof K){ah.set(ag,aa,Z);--ae;if(ae===0){return Y(ah)}}else{Z.unshift(ad(ag,aa));T.apply(this,Z)}}}return}}var af=S.call(this,W);if(af instanceof K){Y(af)}else{af.unshift(Y);T.apply(this,af)}}if(U){U.call(this,W,X)}else{X.call(this)}}}function Q(S,T){S=S.toLowerCase();R[S]=T;return{args:function(U,V){var W=N(S,U);if(V){if(W.arrayArgs){console.log(W.arrayArgs.toString())}if(W.resolve){console.log(W.resolve.toString())}if(W.check){console.log(W.check.toString())}}var X=R[S]=d(T,W.resolve,W.check,W.arrayArgs);X.kendoSpreadsheetArgs=U;return this},argsAsync:function(U,V){var W=N(S,U);if(V){if(W.arrayArgs){console.log(W.arrayArgs.toString())}if(W.resolve){console.log(W.resolve.toString())}if(W.check){console.log(W.check.toString())}}var X=R[S]=l(T,W.resolve,W.check,W.arrayArgs);X.kendoSpreadsheetArgs=U;return this}}}function x(U,S,T){S++;return(1461*(U+4800+((S-14)/12|0))/4|0)+(367*(S-2-12*((S-14)/12|0))/12|0)-(3*((U+4900+((S-14)/12|0))/100|0)/4|0)+T-32075}function a(U){var T,Z,V,W,S,X,Y;T=U+68569;Z=4*T/146097|0;T=T-((146097*Z+3)/4|0);W=4000*(T+1)/1461001|0;T=T-(1461*W/4|0)+31;V=80*T/2447|0;X=T-(2447*V/80|0);T=V/11|0;S=V+2-12*T;Y=100*(Z-49)+W+T;S--;return{year:Y,month:S,date:X,day:(U+1)%7,ord:r[w(Y)][S]+X}}var p=x(1900,0,-1);var t=[31,28,31,30,31,30,31,31,30,31,30,31];var r=[[0,31,59,90,120,151,181,212,243,273,304,334],[0,31,60,91,121,152,182,213,244,274,305,335]];function w(S){if(S%4){return 0}if(S%100){return 1}if(S%400){return 0}return 1}function v(S){return w(S)?366:365}function i(S,T){return w(S)&&T==1?29:t[T]}function J(S){return a((S|0)+p)}function E(T,U,S){return x(T,U,S)-p}var q=60*1000;var b=60*q;var L=24*b;function H(V){var U=V-(V|0);if(U<0){U++}var T=Math.round(L*U);var S=Math.floor(T/b);T-=S*b;var W=Math.floor(T/q);T-=W*q;var X=Math.floor(T/1000);T-=X*1000;return{hours:S,minutes:W,seconds:X,milliseconds:T}}function f(S){var U=J(S),T=H(S);return new Date(U.year,U.month,U.date,T.hours,T.minutes,T.seconds,T.milliseconds)}function z(U,V,T,S){return(U+(V+(T+S/1000)/60)/60)/24}function o(S){var T=z(S.getHours(),S.getMinutes(),S.getSeconds(),S.getMilliseconds());S=E(S.getFullYear(),S.getMonth(),S.getDate());if(S<0){return S-1+T}else{return S+T}}function e(S){return kendo.parseDate(S)||kendo.parseDate(S,["MMMM dd yyyy","MMMM dd yy","MMM dd yyyy","MMM dd yy","dd MMMM yyyy","dd MMMM yy","dd MMM yyyy","dd MMM yy","MMMM dd, yyyy","MMMM dd, yy","MMM dd, yyyy","MMM dd, yy","MMMM dd","MMM dd","MMMM yyyy","MMM yyyy","dd MMMM","dd MMM"])}M.CalcError=K;M.Formula=n;M.Matrix=g;M.packDate=E;M.unpackDate=J;M.packTime=z;M.unpackTime=H;M.serialToDate=f;M.dateToSerial=o;M.daysInMonth=i;M.isLeapYear=w;M.daysInYear=v;M.parseDate=e;j.dateToNumber=o;j.numberToDate=f;j.defineFunction=Q;j.CalcError=K;M.defineFunction=Q;M.defineAlias=function(T,S){var U=R[S];if(!U){throw new Error("Function "+S+" is not yet defined")}if(!U.kendoSpreadsheetAliases){U.kendoSpreadsheetAliases=[S]}U.kendoSpreadsheetAliases.push(T);R[T]=U};M.FUNCS=R;var s=["or","number",["null",0]];var G=[["*a",s],["*b",s]];var A=[["*a",["or","anyvalue",["null",0]]],["*b",["or","anyvalue",["null",0]]]];Q("binary+",function(T,S){return T+S}).args(G);Q("binary-",function(T,S){return T-S}).args(G);Q("binary*",function(T,S){return T*S}).args(G);Q("binary/",function(T,S){return T/S}).args([["*a",s],["*b","divisor"]]);Q("binary^",function(T,S){return Math.pow(T,S)}).args(G);Q("binary&",function(T,S){if(T==null){T=""}if(S==null){S=""}return""+T+S}).args([["*a",["or","number","string","boolean","null"]],["*b",["or","number","string","boolean","null"]]]);Q("binary=",function(T,S){return T===S}).args(A);Q("binary<>",function(T,S){return T!==S}).args(A);Q("binary<",D(function(T,S){return T<S})).args(A);Q("binary<=",D(function(T,S){return T<=S})).args(A);Q("binary>",D(function(T,S){return T>S})).args(A);Q("binary>=",D(function(T,S){return T>=S})).args(A);Q("unary+",function(S){return S}).args([["*a",s]]);Q("unary-",function(S){return -S}).args([["*a",s]]);Q("unary%",function(S){return S/100}).args([["*a",s]]);Q("binary:",function(T,S){return new m(T,S).setSheet(T.sheet||this.formula.sheet,T.hasSheet())}).args([["a","cell"],["b","cell"]]);Q("binary,",function(T,S){return new u([T,S])}).args([["a","ref"],["b","ref"]]);Q("binary ",function(T,S){return T.intersect(S)}).args([["a","ref"],["b","ref"]]);Q("not",function(S){return !this.bool(S)}).args([["*a",["or","anyvalue",["null",0]]]]);Q("isblank",function(S){if(S instanceof B){S=this.getRefData(S);return S==null}return false}).args([["*value","anything!"]]);Q("iserror",function(S){return S instanceof K}).args([["*value","forced!"]]);Q("iserr",function(S){return S instanceof K&&S.code!="N/A"}).args([["*value","forced!"]]);Q("isna",function(S){return S instanceof K&&S.code=="N/A"}).args([["*value","forced!"]]);Q("islogical",function(S){return typeof S=="boolean"}).args([["*value","forced!"]]);Q("isnontext",function(S){return typeof S!="string"}).args([["*value","forced!"]]);Q("istext",function(S){return typeof S=="string"}).args([["*value","forced!"]]);Q("isnumber",function(S){return typeof S=="number"}).args([["*value","forced!"]]);Q("isref",function(S){return S instanceof B||S instanceof m}).args([["*value","anything!"]]);R[",getname"]=function(T,S){this.fetchName(S[0],T)};function D(S){return function(U,T){if(typeof U=="string"&&typeof T!="string"){T=T==null?"":T+""}if(typeof U!="string"&&typeof T=="string"){U=U==null?"":U+""}if(typeof U=="number"&&T==null){T=0}if(typeof T=="number"&&U==null){U=0}if(typeof U=="string"&&typeof T=="string"){U=U.toLowerCase();T=T.toLowerCase()}if(typeof T==typeof U){return S(U,T)}else{return new K("VALUE")}}}},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/validation",["spreadsheet/runtime"],a)}(function(){var h=kendo.jQuery;if(kendo.support.browser.msie&&kendo.support.browser.version<9){return}var e=kendo.spreadsheet;var g={};e.validation=g;var f=e.calc;var b=kendo.Class;var a="_matrix({0})";var i='DATEVALUE("{0}")';f.runtime.defineFunction("_matrix",function(j){if(typeof j=="string"){j=this.asMatrix([j.split(/\s*,\s*/)])}return j}).args([["m",["or","matrix","string"]]]);function c(m,q,k,j){var l;var n;var p;var o;if(typeof j==="string"){j=JSON.parse(j)}if(j.from){if(j.dataType==="list"&&!j.fromIsListValue){j.from=kendo.format(a,j.from);j.fromIsListValue=true}if(j.dataType==="date"){p=f.runtime.parseDate(j.from);if(p){j.from=kendo.format(i,j.from);j.fromIsDateValue=true}}j.from=f.compile(f.parseFormula(m,q,k,j.from))}if(j.to){if(j.dataType==="date"){o=f.runtime.parseDate(j.to);if(o){j.to=kendo.format(i,j.to);j.toIsDateValue=true}}j.to=f.compile(f.parseFormula(m,q,k,j.to))}if(j.dataType=="custom"){n=g.validationComparers.custom}else{if(j.dataType=="list"){n=g.validationComparers.list}else{n=g.validationComparers[j.comparerType]}}if(!n){throw kendo.format("'{0}' comparer is not implemented.",j.comparerType)}l=function(t){var r=this.to&&this.to_value?this.to_value:undefined;if(t===null||t===""){if(this.allowNulls){this.value=true}else{this.value=false}}else{if(this.dataType=="custom"){this.value=n(t,this.from_value,r)}else{if(this.dataType=="list"){var s=this._getListData();this.value=n(t,s,r)}else{this.value=n(t,this.from_value,r)}}}return this.value};return new kendo.spreadsheet.validation.Validation(h.extend(j,{handler:l,sheet:m,row:q,col:k}))}var d=b.extend({init:function d(j){this.handler=j.handler;this.from=j.from;this.to=j.to;this.dataType=j.dataType;this.comparerType=j.comparerType;this.type=j.type?j.type:"warning";this.allowNulls=j.allowNulls?true:false;this.fromIsDateValue=j.fromIsDateValue?true:false;this.toIsDateValue=j.toIsDateValue?true:false;this.showButton=j.showButton;this.fromIsListValue=j.fromIsListValue?true:false;this.sheet=j.sheet;this.row=j.row;this.col=j.col;if(j.tooltipMessageTemplate){this.tooltipMessageTemplate=j.tooltipMessageTemplate}if(j.tooltipTitleTemplate){this.tooltipTitleTemplate=j.tooltipTitleTemplate}if(j.messageTemplate){this.messageTemplate=j.messageTemplate}if(j.titleTemplate){this.titleTemplate=j.titleTemplate}},_formatMessages:function(o){var q=this.from?this.from_value:"";var p=this.to?this.to_value:"";var l=this.from?this.from.toString():"";var n=this.to?this.to.toString():"";var k=this.dataType;var m=this.type;var j=this.comparerType;return kendo.format(o,q,p,l,n,k,m,j)},_setMessages:function(){this.title="";this.message="";if(this.tooltipTitleTemplate){this.tooltipTitle=this._formatMessages(this.tooltipTitleTemplate)}if(this.tooltipMessageTemplate){this.tooltipMessage=this._formatMessages(this.tooltipMessageTemplate)}if(this.titleTemplate){this.title=this._formatMessages(this.titleTemplate)}if(this.messageTemplate){this.message=this._formatMessages(this.messageTemplate)}},_getListData:function(){if(!this.from_value||!this.from_value.data){return[]}var j=this.from_value.data;var k;var n;var l=[];for(k=0;k<j.length;k++){var m=j[k];if(m){for(n=0;n<m.length;n++){l.push(m[n])}}}return l},clone:function(l,m,k){var j=this._getOptions();if(j.from){j.from=j.from.clone(l,m,k)}if(j.to){j.to=j.to.clone(l,m,k)}return new d(h.extend(j,{handler:this.handler},{sheet:l,row:m,col:k}))},exec:function(n,k,j,p){var m=this;function l(q){if(q instanceof kendo.spreadsheet.Ref){q=n.getData(q);if(Array.isArray(q)){q=q[0]}}return q}var o=function(q){m.from_value=l(q);m.value=m.handler.call(m,k,j);m._setMessages();if(p){p(m.value)}};if(m.to){m.to.exec(n,function(q){m.to_value=l(q);m.from.exec(n,o)})}else{m.from.exec(n,o)}},reset:function(){if(this.from){this.from.reset()}if(this.to){this.to.reset()}delete this.value},adjust:function(m,j,o,n){if(this.from){this.from.adjust(m,j,o,n)}if(this.to){this.to.adjust(m,j,o,n)}if(this.sheet.toLowerCase()==m.toLowerCase()){var k=this.row;var l=this.col;switch(j){case"row":if(k>=o){this.row+=n}break;case"col":if(l>=o){this.col+=n}break}}},toJSON:function(){var j=this._getOptions();if(j.from){j.from=j.from.toString();if(j.dataType==="list"){j.from=j.from.replace(/^_matrix\((.*)\)$/i,"$1");delete j.fromIsListValue}if(j.dataType==="date"){if(this.fromIsDateValue){j.from=j.from.replace(/^DATEVALUE\("(.*)"\)$/i,"$1");delete j.fromIsDateValue}}}if(j.to){j.to=j.to.toString();if(j.dataType==="date"){if(this.toIsDateValue){j.to=j.to.replace(/^DATEVALUE\("(.*)"\)$/i,"$1");delete j.toIsDateValue}}}return j},_getOptions:function(){return{from:this.from,to:this.to,dataType:this.dataType,type:this.type,comparerType:this.comparerType,row:this.row,col:this.col,sheet:this.sheet,allowNulls:this.allowNulls,fromIsListValue:this.fromIsListValue,fromIsDateValue:this.fromIsDateValue,toIsDateValue:this.toIsDateValue,tooltipMessageTemplate:this.tooltipMessageTemplate,tooltipTitleTemplate:this.tooltipTitleTemplate,messageTemplate:this.messageTemplate,titleTemplate:this.titleTemplate,showButton:this.showButton}}});g.compile=c;g.validationComparers={greaterThan:function(k,j){return k>j},lessThan:function(k,j){return k<j},between:function(l,k,j){return l>=k&&l<=j},equalTo:function(k,j){return k==j},notEqualTo:function(k,j){return k!=j},greaterThanOrEqualTo:function(k,j){return k>=j},lessThanOrEqualTo:function(k,j){return k<=j},notBetween:function(l,k,j){return l<k||l>j},custom:function(k,j){return j},list:function(k,j){return j.indexOf(k)>-1}};g.Validation=d},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/sheet",["kendo.core","kendo.color","spreadsheet/runtime","spreadsheet/validation","spreadsheet/references"],a)}(function(){(function(d){if(d.support.browser.msie&&d.support.browser.version<9){return}var a=d.spreadsheet.RangeRef;var f=d.spreadsheet.CellRef;var c=d.spreadsheet.Range;var b=d.Class.extend({init:function(g){this._sheet=g;this.selection=d.spreadsheet.FIRSTREF.toRangeRef();this.originalSelection=d.spreadsheet.FIRSTREF.toRangeRef();this._activeCell=d.spreadsheet.FIRSTREF.toRangeRef();this.originalActiveCell=d.spreadsheet.FIRSTREF},currentSelectionRange:function(){return this.selection.rangeAt(this.selectionRangeIndex).toRangeRef()},currentOriginalNavigationRange:function(){return this.originalSelection.rangeAt(this.selectionRangeIndex).toRangeRef()},currentNavigationRange:function(){if(this.singleCellSelection()){return this._sheet._sheetRef}else{return this.selection.rangeAt(this.selectionRangeIndex).toRangeRef()}},nextNavigationRange:function(){if(!this.singleCellSelection()){this.selectionRangeIndex=this.selection.nextRangeIndex(this.selectionRangeIndex)}return this.currentNavigationRange()},previousNavigationRange:function(){if(!this.singleCellSelection()){this.selectionRangeIndex=this.selection.previousRangeIndex(this.selectionRangeIndex)}return this.currentNavigationRange()},activeCell:function(g){if(g){this.originalActiveCell=g.first();this._activeCell=this._sheet.unionWithMerged(g.toRangeRef());this._sheet.focus(g);this._sheet.triggerChange({activeCell:true,selection:true})}return this._activeCell},select:function(i,h,g){if(i){if(i.eq(this.originalSelection)){return}this._sheet.triggerSelect(new c(i,this._sheet));this.originalSelection=i;this.selection=h;if(g!==false){if(i.isCell()){this.activeCell(i)}else{this.activeCell(this.selection.lastRange().first())}this.selectionRangeIndex=this.selection.size()-1}else{this._sheet.triggerChange({selection:true})}}return this.selection},singleCellSelection:function(){return this._activeCell.eq(this.selection)}});var e=d.Observable.extend({init:function(){d.Observable.prototype.init.call(this);this._reinit.apply(this,arguments)},events:["commandRequest","afterInsertRow","afterDeleteRow","insertRow","insertColumn","deleteRow","deleteColumn","hideRow","hideColumn","unhideRow","unhideColumn","select"],_reinit:function(i,n,l,m,h,j,g){var k=i*n-1;g=g||{};this._defaultCellStyle={background:g.background,color:g.color,fontFamily:g.fontFamily,fontSize:g.fontSize,italic:g.italic,bold:g.bold,underline:g.underline,wrap:g.wrap};this._rows=new d.spreadsheet.Axis(i,l);this._columns=new d.spreadsheet.Axis(n,m);this._mergedCells=[];this._frozenRows=0;this._frozenColumns=0;this._suspendChanges=false;this._filter=null;this._showGridLines=true;this._gridLinesColor=null;this._grid=new d.spreadsheet.Grid(this._rows,this._columns,i,n,h,j);this._sheetRef=this._grid.normalize(d.spreadsheet.SHEETREF);this._properties=new d.spreadsheet.PropertyBag(k,this._defaultCellStyle);this._sorter=new d.spreadsheet.Sorter(this._grid,this._properties.sortable());this._viewSelection=new b(this);this._editSelection=new b(this);this._formulaSelections=[]},_selectionState:function(){return this._inEdit?this._editSelection:this._viewSelection},navigator:function(){if(!this._navigator){this._navigator=new d.spreadsheet.SheetNavigator(this)}return this._navigator},axisManager:function(){if(!this._axisManager){this._axisManager=new d.spreadsheet.AxisManager(this)}return this._axisManager},_name:function(g){if(!g){return this._sheetName}this._sheetName=g;return this},name:function(){return this._name()},_property:function(g,h,i){if(h===undefined){return g()}else{g(h);return this.triggerChange(i)}},_field:function(g,h,i){if(h===undefined){return this[g]}else{this[g]=h;return this.triggerChange(i)}},suspendChanges:function(g){if(g===undefined){return this._suspendChanges}this._suspendChanges=g;return this},triggerChange:function(g){if(!this._suspendChanges){this.trigger("change",g)}return this},triggerSelect:function(g){this.trigger("select",{range:g})},setDataSource:function(h,g){if(this.dataSourceBinder){this.dataSourceBinder.destroy()}this.dataSourceBinder=new d.spreadsheet.SheetDataSourceBinder({dataSource:h,sheet:this,columns:g});this.dataSource=this.dataSourceBinder.dataSource},hideColumn:function(g){if(this.trigger("hideColumn",{index:g})){return}return this._property(this._columns.hide.bind(this._columns),g,{layout:true})},unhideColumn:function(g){if(this.trigger("unhideColumn",{index:g})){return}return this._property(this._columns.unhide.bind(this._columns),g,{layout:true})},isHiddenColumn:function(g){return this._grid._columns.hidden(g)},_copyRange:function(o,k){var g=this._grid;var n=g.rowCount;var j=g.normalize(o.topLeft);var i=g.normalize(o.bottomRight);var l=j.col*n+j.row;var m=i.col*n+i.row;var h=k.col*n+k.row;this._properties.copy(l,m,h)},_adjustReferences:function(g,m,l,k){this._mergedCells=k.reduce(function(n,o){o=o.adjust(null,null,null,null,g=="row",m,l);if(o instanceof a){n.push(o)}return n},[]);if(this._workbook){var j=this._name();this._workbook._sheets.forEach(function(n){n._forFormulas(function(o){o.adjust(j,g,m,l)});n._forValidations(function(o){o.adjust(j,g,m,l)})});this._workbook.adjustNames(j,g=="row",m,l)}var i=this.select();i=i.adjust(null,null,null,null,g=="row",m,l);if(i!==d.spreadsheet.NULLREF){this.select(i)}var h=g=="col"?this._columns:this._rows;h.adjust(m,l)},_forFormulas:function(j){var h=this._properties;var g=h.get("formula").values();var i=g.length;g.forEach(function(l,k){j.call(this,l.value,k,i)},this)},_forValidations:function(h){var g=this._properties;g.get("validation").values().forEach(function(i){h.call(this,i.value)},this)},preventInsertRow:function(j,i){if(this.selectedHeaders().allRows){return{reason:"error",type:"insertRowWhenColumnIsSelected"}}i=i||1;var h=this._grid;var g=this.range(h.rowCount-i,0,i,h.columnCount);if(g.hasValue()){return{reason:"error",type:"shiftingNonblankCells"}}return false},preventInsertColumn:function(){if(this.selectedHeaders().allCols){return{reason:"error",type:"insertColumnWhenRowIsSelected"}}return false},insertRow:function(h){var g=this.preventInsertRow(h);if(g){throw new Error("Shifting nonblank cells off the worksheet is not supported!")}if(this.trigger("insertRow",{index:h})){return}this.batch(function(){var j=this._grid;var o=j.columnCount;var p=j.rowCount;var m=this.frozenRows();if(h<m){this.frozenRows(m+1)}var i=this._mergedCells.slice();for(var r=0;r<o;r++){var l=new a(new f(h,r),new f(h,r));var q=j.normalize(l.topLeft);var n=j.normalize(l.bottomRight);var k=new a(new f(q.row,q.col),new f(p-2,n.col));this._copyRange(k,new f(q.row+1,q.col));new c(l,this).clear()}this._adjustReferences("row",h,1,i)},{recalc:true,layout:true,insertRow:{index:h},ref:new a(new f(h,0),new f(Infinity,Infinity))});this.trigger("afterInsertRow",{index:h});return this},isEnabledRow:function(h){var g=new a(new f(h,0),new f(h,this._grid.columnCount));return new c(g,this).enable()},deleteRow:function(g){if(!this.isEnabledRow(g)){return this}if(this.trigger("deleteRow",{index:g})){return}this.batch(function(){var i=this._grid;var o=i.columnCount;var m=this.frozenRows();if(g<m){this.frozenRows(m-1)}var h=this._mergedCells.slice();for(var q=0;q<o;q++){var l=new a(new f(g,q),new f(g,q));new c(l,this).clear();var p=i.normalize(l.topLeft);var n=i.normalize(l.bottomRight);var j=new a(new f(p.row+1,p.col),new f(Infinity,n.col));this._copyRange(j,p);var k=i.normalize(j.bottomRight);new c(new a(k,k),this).clear()}this._adjustReferences("row",g,-1,h)},{recalc:true,layout:true,deleteRow:{index:g},ref:new a(new f(g,0),new f(Infinity,Infinity))});this.trigger("afterDeleteRow",{index:g});return this},insertColumn:function(g){if(this.trigger("insertColumn",{index:g})){return}this.batch(function(){var j=this._grid;var n=j.columnCount;var h=this.frozenColumns();if(g<h){this.frozenColumns(h+1)}var i=this._mergedCells.slice();for(var p=n;p>=g;p--){var l=new a(new f(0,p),new f(Infinity,p));new c(l,this).clear();if(p==g){break}var o=j.normalize(l.topLeft);var m=j.normalize(l.bottomRight);var k=new a(new f(o.row,o.col-1),new f(m.row,m.col-1));this._copyRange(k,o)}this._adjustReferences("col",g,1,i)},{recalc:true,layout:true,insertColumn:{index:g},ref:new a(new f(0,g),new f(Infinity,Infinity))});return this},isEnabledColumn:function(g){var h=new a(new f(0,g),new f(Infinity,g));return new c(h,this).enable()},deleteColumn:function(g){if(!this.isEnabledColumn(g)){return this}if(this.trigger("deleteColumn",{index:g})){return}this.batch(function(){var j=this._grid;var n=j.columnCount;var h=this.frozenColumns();if(g<h){this.frozenColumns(h-1)}var i=this._mergedCells.slice();for(var p=g;p<n;p++){var l=new a(new f(0,p),new f(Infinity,p));new c(l,this).clear();if(p==n-1){break}var o=j.normalize(l.topLeft);var m=j.normalize(l.bottomRight);var k=new a(new f(o.row,o.col+1),new f(m.row,m.col+1));this._copyRange(k,o)}this._adjustReferences("col",g,-1,i)},{recalc:true,layout:true,deleteColumn:{index:g},ref:new a(new f(0,g),new f(Infinity,Infinity))});return this},hideRow:function(g){if(this.trigger("hideRow",{index:g})){return}return this._property(this._rows.hide.bind(this._rows),g,{layout:true})},unhideRow:function(g){if(this.trigger("unhideRow",{index:g})){return}return this._property(this._rows.unhide.bind(this._rows),g,{layout:true})},isHiddenRow:function(g){return this._grid._rows.hidden(g)},columnWidth:function(h,g){return this._property(this._columns.value.bind(this._columns,h,h),g,{layout:true})},rowHeight:function(h,g){return this._property(this._rows.value.bind(this._rows,h,h),g,{layout:true})},frozenRows:function(g){return this._field("_frozenRows",g,{layout:true})},frozenColumns:function(g){return this._field("_frozenColumns",g,{layout:true})},showGridLines:function(g){return this._field("_showGridLines",g,{layout:true})},gridLinesColor:function(g){return this._field("_gridLinesColor",g,{layout:true})},_ref:function(k,h,j,g){var i=null;if(k instanceof d.spreadsheet.Ref){return k}if(k instanceof d.spreadsheet.Range){return k._ref.toRangeRef()}if(typeof k==="string"){i=d.spreadsheet.calc.parseReference(k)}else{if(!j){j=1}if(!g){g=1}i=new a(new f(k,h),new f(k+j-1,h+g-1))}return i},range:function(j,h,i,g){return new c(this._ref(j,h,i,g),this)},_getMergedCells:function(h){var i=this._grid;var j={};var g={};var k=false;this.forEachMergedCell(h,function(m){var l=m.topLeft;i.forEach(m,function(n){if(l.eq(n)){j[n.print()]=m;k=true}else{if(h.contains(n)){g[n.print()]=l;k=true}}})});return{primary:j,secondary:g,hasMerged:k}},forEachMergedCell:function(g,i){var h=false;if(typeof i==="undefined"){i=g;h=true}this._mergedCells.forEach(function(j){if(h||j.intersects(g)){i(j)}})},forEachFilterHeader:function(h,k){var i=false;if(typeof k==="undefined"){k=h;i=true}if(this._filter){var g=[];this._filter.ref.forEachColumn(function(l){if(i||l.intersects(h)){g.push(l.topLeft)}});this._mergedCells.forEach(function(l){g=g.map(function(m){if(l.intersects(m)){return l}return m})});g.reduce(function j(l,m){if(l.indexOf(m)<0){l.push(m)}return l},[]).forEach(k)}},forEach:function(g,n){if(!(g instanceof a)){g=this._ref(g)}var m=this._grid.normalize(g.topLeft);var h=this._grid.normalize(g.bottomRight);function j(p){n(k++,o,p)}for(var o=m.col;o<=h.col;o++){var k=m.row;var l=this._grid.index(k,o);var i=this._grid.index(h.row,o);this._properties.forEach(l,i,j)}},startResizing:function(g){this._initialPosition=g;this._resizeInProgress=true},startAutoFill:function(){this._autoFillInProgress=true;var g=this.select();this._autoFillOrigin=g;this._autoFillDest=g;this.triggerChange({selection:true})},updateAutoFill:function(g,h,j,i){this._autoFillDest=g;this._autoFillPunch=h;this._autoFillHint=j;this._autoFillDirection=i;this.triggerChange({selection:true})},autoFillRef:function(){return this._autoFillDest},autoFillPunch:function(){return this._autoFillPunch},autoFillInProgress:function(){return this._autoFillInProgress},resizingInProgress:function(){return this._resizeInProgress},completeResizing:function(){if(this._resizeInProgress){this._resizeInProgress=false;var h=this.resizeHintPosition();if(this._initialPosition&&h){var g=this.resizeHandlePosition();if(g.col!==-Infinity){this.trigger("commandRequest",{command:"ColumnWidthCommand",options:{target:g.col,value:this.columnWidth(g.col)-(this._initialPosition.x-h.x)}})}else{this.trigger("commandRequest",{command:"RowHeightCommand",options:{target:g.row,value:this.rowHeight(g.row)-(this._initialPosition.y-h.y)}})}}else{this.trigger("change",{resize:true})}}},resizeHandlePosition:function(){return this._resizeHandlePosition},resizeHintPosition:function(g){if(g!==undefined){this._resizeHintPosition=g;this.trigger("change",{resize:true})}return this._resizeHintPosition},removeResizeHandle:function(){if(this._resizeHandlePosition){this._resizeHintPosition=undefined;this._resizeHandlePosition=undefined;this._initialPosition=undefined;this.trigger("change",{resize:true})}},positionResizeHandle:function(g){this._resizeHandlePosition=g;this.trigger("change",{resize:true})},startSelection:function(){this._selectionInProgress=true},completeSelection:function(){if(this._selectionInProgress){this._selectionInProgress=false;this._resizeHintPosition=undefined;this.trigger("change",{selection:true})}if(this._autoFillInProgress){this._autoFillInProgress=false;var h=this._autoFillDest;var g=this._autoFillOrigin;if(this._autoFillPunch){this.trigger("commandRequest",{command:"ClearContentCommand",options:{operatingRange:this.range(this._autoFillPunch)}})}else{if(!h.eq(g)){this.trigger("commandRequest",{command:"AutoFillCommand",options:{operatingRange:this.range(h),origin:this.range(g)}})}else{this.triggerChange({selection:true})}}this._autoFillDest=null;this._autoFillPunch=null;this._autoFillOrigin=null;this.select(h)}},selectionInProgress:function(){return this._selectionInProgress},select:function(j,g){var h=this._selectionState();var i;if(j){j=this._ref(j);j=this._grid.normalize(j);i=this._grid.isAxis(j)?j:this.unionWithMerged(j)}return h.select(j,i,g)},originalSelect:function(){return this._selectionState().originalSelection},currentSelectionRange:function(){return this._selectionState().currentSelectionRange()},currentOriginalSelectionRange:function(){return this._selectionState().currentOriginalNavigationRange()},currentNavigationRange:function(){return this._selectionState().currentNavigationRange()},nextNavigationRange:function(){return this._selectionState().nextNavigationRange()},previousNavigationRange:function(){return this._selectionState().previousNavigationRange()},selectionRangeIndex:function(){return this._selectionState().selectionRangeIndex},activeCell:function(g){return this._selectionState().activeCell(g)},originalActiveCell:function(){return this._selectionState().originalActiveCell},singleCellSelection:function(){return this._selectionState().singleCellSelection()},unionWithMerged:function(g){var h=this._mergedCells;return g.map(function(i){return i.toRangeRef().union(h)})},trim:function(i){var g=[];var h=this._grid;this._properties.forEachProperty(function(j){g.push(h.trim(i,j.list))});return this.unionWithMerged(i.topLeft.toRangeRef().union(g))},focus:function(h){if(h){this._focus=h.toRangeRef()}else{var g=this._focus;this._focus=null;return g}},activeCellSelection:function(){return new c(this._grid.normalize(this.activeCell()),this)},selection:function(){return new c(this._grid.normalize(this._selectionState().selection),this)},selectedHeaders:function(){var h=this.select();var k={};var l={};var j=false;var i=false;var m=this._grid.rowCount-1;var g=this._grid.columnCount-1;h.forEach(function(t){var q;var o="partial";var u="partial";t=t.toRangeRef();var p=t.bottomRight;var r=t.topLeft;var s=r.col<=0&&p.col>=g;var n=r.row<=0&&p.row>=m;if(n){i=true;u="full"}if(s){j=true;o="full"}if(!n){for(q=r.row;q<=p.row;q++){if(k[q]!=="full"){k[q]=o}}}if(!s){for(q=r.col;q<=p.col;q++){if(l[q]!=="full"){l[q]=u}}}});return{rows:k,cols:l,allRows:i,allCols:j,all:i&&j}},isInEditMode:function(g){if(g===undefined){return this._inEdit}this._inEdit=g;if(g){this._editSelection.selection=this._viewSelection.selection.clone();this._editSelection.originalSelection=this._viewSelection.originalSelection.clone();this._editSelection._activeCell=this._viewSelection._activeCell.clone();this._editSelection.originalActiveCell=this._viewSelection.originalActiveCell.clone()}},_setFormulaSelections:function(g){this._formulaSelections=(g||[]).slice();this.triggerChange({selection:true})},_viewActiveCell:function(){return this._viewSelection._activeCell.toRangeRef()},toJSON:function(){var h={};var n=this._rows.toJSON("height",h);var m=this._columns.toJSON("width",{});var i=this._viewSelection;var k=[];var g=this._defaultCellStyle||{};function j(o){Object.keys(g).forEach(function(p){if(o[p]===g[p]){delete o[p]}})}this.forEach(d.spreadsheet.SHEETREF,function(r,q,p){j(p);if(Object.keys(p).length===0){return}if(p.link){k.push({ref:d.spreadsheet.Ref.display(null,r,q),target:p.link})}var o=h[r];if(o===undefined){o=n.length;n.push({index:r});h[r]=o}r=n[o];p.index=q;if(r.cells===undefined){r.cells=[]}if(p.formula){p.formula=p.formula.toString()}if(p.validation){p.validation=p.validation.toJSON()}if(p.color){p.color=d.parseColor(p.color).toCss()}if(p.background){p.background=d.parseColor(p.background).toCss()}if(p.borderTop&&p.borderTop.color){p.borderTop.color=d.parseColor(p.borderTop.color).toCss()}if(p.borderBottom&&p.borderBottom.color){p.borderBottom.color=d.parseColor(p.borderBottom.color).toCss()}if(p.borderRight&&p.borderRight.color){p.borderRight.color=d.parseColor(p.borderRight.color).toCss()}if(p.borderLeft&&p.borderLeft.color){p.borderLeft.color=d.parseColor(p.borderLeft.color).toCss()}r.cells.push(p)});var l={name:this._name(),rows:n,columns:m,selection:i.selection.toString(),activeCell:i.activeCell().toString(),frozenRows:this.frozenRows(),frozenColumns:this.frozenColumns(),showGridLines:this.showGridLines(),gridLinesColor:this.gridLinesColor(),mergedCells:this._mergedCells.map(function(o){return o.toString()}),hyperlinks:k,defaultCellStyle:g};if(this._sort){l.sort={ref:this._sort.ref.toString(),columns:this._sort.columns.map(function(o){return{index:o.index,ascending:o.ascending}})}}if(this._filter){l.filter={ref:this._filter.ref.toString(),columns:this._filter.columns.map(function(p){var o=p.filter.toJSON();o.index=p.index;return o})}}return l},fromJSON:function(g){this.batch(function(){if(g.name!==undefined){this._name(g.name)}if(g.frozenColumns!==undefined){this.frozenColumns(g.frozenColumns)}if(g.frozenRows!==undefined){this.frozenRows(g.frozenRows)}if(g.columns!==undefined){this._columns.fromJSON("width",g.columns)}if(g.rows!==undefined){this._rows.fromJSON("height",g.rows);for(var m=0;m<g.rows.length;m++){var o=g.rows[m];var l=o.index;if(l===undefined){l=m}if(o.cells){for(var p=0;p<o.cells.length;p++){var n=o.cells[p];var k=n.index;if(k===undefined){k=p}if(n.formula){n.formula=this._compileFormula(l,k,n.formula)}if(n.validation){n.validation=this._compileValidation(l,k,n.validation)}this._properties.fromJSON(this._grid.index(l,k),n)}}}}if(g.selection){this._viewSelection.selection=this._viewSelection.originalSelection=this._ref(g.selection)}if(g.activeCell){var i=this._ref(g.activeCell);this._viewSelection._activeCell=i.toRangeRef();this._viewSelection.originalActiveCell=i}if(g.mergedCells){g.mergedCells.forEach(function(q){this.range(q).merge()},this)}if(g.sort){this._sort={ref:this._ref(g.sort.ref),columns:g.sort.columns.slice(0)}}if(g.filter){var h=g.filter.ref;var j=g.filter.columns===undefined?[]:g.filter.columns;if(!h){d.logToConsole("Dropping filter for sheet '"+g.name+"' due to missing ref")}else{this._filter={ref:this._ref(h),columns:j.map(function(q){return{index:q.index,filter:d.spreadsheet.Filter.create(q)}})};this._refreshFilter()}}if(g.showGridLines!==undefined){this._showGridLines=g.showGridLines}this._gridLinesColor=g.gridLinesColor});this._rows._refresh();this._columns._refresh()},formula:function(g){return this._properties.get("formula",this._grid.cellRefIndex(g))},validation:function(g){return this._properties.get("validation",this._grid.cellRefIndex(g))},resetFormulas:function(){this._forFormulas(function(g){g.reset()})},resetValidations:function(){this._forValidations(function(g){g.reset()})},recalc:function(j,n){var g=this._properties.get("formula").values();var l=g.length,m=0,h=0;if(!l&&n){return n()}function k(){m--;if(h==l&&!m){n()}}while(h<l){m++;g[h++].value.exec(j,n?k:null)}},revalidate:function(h){var g=this;this._forValidations(function(j){var i=new f(j.row,j.col);var k=new a(i,i);j.exec(h,g._get(k,"value"),g._get(k,"format"))})},_value:function(j,h,i){var g=this._grid.index(j,h);if(i!==undefined){this._properties.set("value",g,g,i)}else{return this._properties.get("value",g)}},_validation:function(i,h){var g=this._grid.index(i,h);return this._properties.get("validation",g)},_compileValidation:function(i,h,g){if(g instanceof d.spreadsheet.validation.Validation){return g.clone(this._name(),i,h)}if(g.from!=null){g.from=(g.from+"").replace(/^=/,"")}if(g.to!=null){g.to=(g.to+"").replace(/^=/,"")}return d.spreadsheet.validation.compile(this._name(),i,h,g)},_compileFormula:function(i,g,h){h=h.replace(/^=/,"");h=d.spreadsheet.calc.parseFormula(this._name(),i,g,h);return d.spreadsheet.calc.compile(h)},_copyValuesInRange:function(m,i,k,l){var o,g,h;for(o=m.col;o<=i.col;o++){g=this._grid.index(m.row,o);h=this._grid.index(i.row,o);for(var j=g,n=m.row;j<=h;++j,++n){k=k.clone(this._name(),n,o);this._properties.set(l,j,j,k)}}return k},_set:function(l,h,m){var k=this._grid.normalize(l.topLeft);var j=this._grid.normalize(l.bottomRight);var i,n,g;if(m&&h=="formula"){if(typeof m=="string"){m=this._compileFormula(k.row,k.col,m)}m=this._copyValuesInRange(k,j,m,"formula")}else{if(m&&h=="validation"){m=this._compileValidation(k.row,k.col,m);m=this._copyValuesInRange(k,j,m,"validation")}else{for(i=k.col;i<=j.col;i++){n=this._grid.index(k.row,i);g=this._grid.index(j.row,i);this._properties.set(h,n,g,m);if(h=="formula"){this._properties.set("value",n,g,null)}}}}},_get:function(j,h){var i=this._grid.normalize(j.topLeft);var g=this._grid.index(i.row,i.col);return this._properties.get(h,g)},batch:function(i,h){var g=this.suspendChanges();this.suspendChanges(true);i.call(this);return this.suspendChanges(g).triggerChange(h||{recalc:true})},_sortBy:function(h,g){var i=null;g.forEach(function(j){i=this._sorter.sortBy(h,j.index,this._properties.get("value"),j.ascending,i)},this);this._sort={ref:h,columns:g};this._refreshFilter();this.triggerChange({recalc:true})},_refreshFilter:function(){if(this._filter){this._filterBy(this._filter.ref,this._filter.columns)}},_filterBy:function(h,g){this.batch(function(){for(var i=h.topLeft.row;i<=h.bottomRight.row;i++){if(this._rows.hidden(i)){this._rows.unhide(i)}}g.forEach(function(n){var k=h.resize({top:1}).toColumn(n.index);var l=[];if(k===d.spreadsheet.NULLREF){return}this.forEach(k,function(r,q,p){p.row=r;l.push(p)});n.filter.prepare(l);for(var m=0;m<l.length;m++){var j=l[m];var o=n.filter.value(j);if(n.filter.matches(o)===false){this.hideRow(j.row)}}},this);this._filter={ref:h,columns:g}},{layout:true,filter:true})},filterColumn:function(g){var h=this.filter().ref;return g.toRangeRef().topLeft.col-h.topLeft.col},filter:function(){return this._filter},clearFilter:function(g){this._clearFilter(g instanceof Array?g:[g])},_clearFilter:function(g){if(this._filter){this.batch(function(){this._filter.columns=this._filter.columns.filter(function(h){return g.indexOf(h.index)<0});this._refreshFilter()},{layout:true,filter:true})}},getAxisState:function(){return{rows:this._rows.getState(),columns:this._columns.getState()}},setAxisState:function(g){this._rows.setState(g.rows);this._columns.setState(g.columns);this.triggerChange({layout:true})},getState:function(){return{rows:this._rows.getState(),columns:this._columns.getState(),mergedCells:this._mergedCells.map(function(g){return g.clone()}),properties:this._properties.getState()}},setState:function(g){this._rows.setState(g.rows);this._columns.setState(g.columns);this._mergedCells=g.mergedCells;this._properties.setState(g.properties);this.triggerChange(d.spreadsheet.ALL_REASONS)},_merge:function(h){var i=this._mergedCells;var g=this;var j;this.batch(function(){j=h.map(function(p){if(p instanceof d.spreadsheet.CellRef){return p}var l=p.toRangeRef().union(i,function(t){i.splice(i.indexOf(t),1)});var m=new c(l,g);var s=m._get("formula");var q=m.value();var r=m.format();var n=m.background();m.value(null);m.format(null);m.background(null);var o=new c(l.collapse(),g);if(s){o._set("formula",s)}else{o.value(q)}o.format(r);o.background(n);i.push(l);return l});var k=g._viewSelection;k.selection=g.unionWithMerged(k.originalSelection);k._activeCell=g.unionWithMerged(k.originalActiveCell)},{activeCell:true,selection:true});return j}});d.spreadsheet.Sheet=e}(kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/sheetsbar",["kendo.core","kendo.sortable"],a)}(function(){(function(f){if(f.support.browser.msie&&f.support.browser.version<9){return}var d=f.jQuery;var e=f._outerWidth;var g=".";var b=" ";var c={sheetsBarWrapper:"k-widget k-header",sheetsBarSheetsWrapper:"k-tabstrip k-floatwrap k-tabstrip-bottom",sheetsBarActive:"k-spreadsheet-sheets-bar-active",sheetsBarInactive:"k-spreadsheet-sheets-bar-inactive",sheetsBarAdd:"k-spreadsheet-sheets-bar-add",sheetsBarRemove:"k-spreadsheet-sheets-remove",sheetsBarItems:"k-spreadsheet-sheets-items",sheetsBarEditor:"k-spreadsheet-sheets-editor",sheetsBarScrollable:"k-tabstrip-scrollable",sheetsBarNext:"k-tabstrip-next",sheetsBarPrev:"k-tabstrip-prev",sheetsBarKItem:"k-item k-state-default",sheetsBarKActive:"k-state-active k-state-tab-on-top",sheetsBarKTextbox:"k-textbox",sheetsBarKLink:"k-link",sheetsBarKIcon:"k-icon",sheetsBarKFontIcon:"k-icon",sheetsBarKButton:"k-button k-button-icon",sheetsBarKButtonBare:"k-button-bare",sheetsBarKArrowW:"k-i-arrow-60-left",sheetsBarKArrowE:"k-i-arrow-60-right",sheetsBarKReset:"k-reset k-tabstrip-items",sheetsBarKIconX:"k-i-close",sheetsBarKSprite:"k-sprite",sheetsBarKIconPlus:"k-i-plus",sheetsBarHintWrapper:"k-widget k-tabstrip k-tabstrip-bottom k-spreadsheet-sheets-items-hint",sheetsBarKResetItems:"k-reset k-tabstrip-items"};var a=f.ui.Widget.extend({init:function(i,h){var j=a.classNames;f.ui.Widget.call(this,i,h);i=this.element;i.addClass(j.sheetsBarWrapper);this._openDialog=h.openDialog;this._tree=new f.dom.Tree(i[0]);this._tree.render([this._addButton(),this._createSheetsWrapper([])]);this._toggleScrollEvents(true);this._createSortable();this._sortable.bind("start",this._onSheetReorderStart.bind(this));this._sortable.bind("end",this._onSheetReorderEnd.bind(this));i.on("click",g+j.sheetsBarRemove,this._onSheetRemove.bind(this));i.on("click","li",this._onSheetSelect.bind(this));i.on("dblclick","li"+g+j.sheetsBarActive,this._createEditor.bind(this));i.on("click",g+j.sheetsBarAdd,this._onAddSelect.bind(this))},options:{name:"SheetsBar",scrollable:{distance:200}},events:["select","reorder","rename"],_createEditor:function(){if(this._editor){return}this._renderSheets(this._sheets,this._selectedIndex,true);this._editor=this.element.find(f.format("input{0}{1}",g,a.classNames.sheetsBarEditor)).focus().on("keydown",this._onEditorKeydown.bind(this)).on("blur",this._onEditorBlur.bind(this))},_destroyEditor:function(i){var h=i?null:this._editor.val();this._editor.off();this._editor=null;this._renderSheets(this._sheets,this._selectedIndex,false);this._onSheetRename(h)},renderSheets:function(i,h){if(!i||h<0){return}this._renderSheets(i,h,false)},_renderSheets:function(n,l,k){var p=this;var v;var i;var h=a.classNames;p._isRtl=f.support.isRtl(p.element);p._sheets=n;p._selectedIndex=l;p._renderHtml(k,true);if(!p._scrollableAllowed()){return}var j=p._sheetsWrapper();var o=j.children(g+h.sheetsBarPrev);var q=j.children(g+h.sheetsBarNext);var m=2;var t=p.element.find(g+h.sheetsBarAdd);var s=e(t)+t.position().left+m;var r=e(o)+m;var w=p._sheetsGroup();o.css({left:s});j.addClass(h.sheetsBarScrollable+b+h.sheetsBarSheetsWrapper);w.css({marginLeft:s});v=j[0].offsetWidth;i=w[0].scrollWidth;if(i+s>v){var u=Math.ceil(f.parseFloat(q.css("right")));if(!p._scrollableModeActive){p._nowScrollingSheets=false;p._scrollableModeActive=true}w.css({marginLeft:r+s,marginRight:e(q)+u+m})}else{if(p._scrollableModeActive&&i<=v){p._scrollableModeActive=false;w.css({marginLeft:s,marginRight:""})}else{w.css({marginLeft:s})}}p._toggleScrollButtons()},_toggleScrollButtons:function(h){var l=this;var i=l._sheetsGroup();var n=l._sheetsWrapper();var m=i.scrollLeft();var k=n.find(g+a.classNames.sheetsBarPrev);var j=n.find(g+a.classNames.sheetsBarNext);if(h===false){k.toggle(false);j.toggle(false)}else{k.toggle(l._isRtl?m<i[0].scrollWidth-i[0].offsetWidth-1:m!==0);j.toggle(l._isRtl?m!==0:m<i[0].scrollWidth-i[0].offsetWidth-1)}},_toggleScrollEvents:function(h){var k=this;var n=a.classNames;var j=k.options;var i;var l;var m=k._sheetsWrapper();i=m.children(g+n.sheetsBarPrev);l=m.children(g+n.sheetsBarNext);if(h){i.on("mousedown",function(){k._nowScrollingSheets=true;k._scrollSheetsByDelta(j.scrollable.distance*(k._isRtl?1:-1))});l.on("mousedown",function(){k._nowScrollingSheets=true;k._scrollSheetsByDelta(j.scrollable.distance*(k._isRtl?-1:1))});i.add(l).on("mouseup",function(){k._nowScrollingSheets=false})}else{i.off();l.off()}},_renderHtml:function(j,r){var s;var i=[];var l=f.dom;var m=l.element;var n=this._sheets;var k=this._selectedIndex;var h=a.classNames;for(s=0;s<n.length;s++){var q=n[s];var p=s===k;var o={className:h.sheetsBarKItem+b};var t=[];if(p){o.className+=h.sheetsBarKActive+b+h.sheetsBarActive}else{o.className+=h.sheetsBarInactive}if(p&&j){t.push(m("input",{type:"text",value:q.name(),className:h.sheetsBarKTextbox+b+h.sheetsBarEditor,maxlength:50},[]))}else{t.push(m("span",{className:h.sheetsBarKLink,title:q.name()},[l.text(q.name())]));if(n.length>1){var u=m("span",{className:h.sheetsBarKIcon+b+h.sheetsBarKFontIcon+b+h.sheetsBarKIconX},[]);t.push(m("span",{className:h.sheetsBarKLink+b+h.sheetsBarRemove},[u]))}}i.push(m("li",o,t))}this._tree.render([this._addButton(),this._createSheetsWrapper(i,r)])},_createSheetsWrapper:function(h,l){var j=f.dom.element;var m=a.classNames;var k=[j("ul",{className:m.sheetsBarKReset},h)];l=true;if(l){var i=m.sheetsBarKButton+b+m.sheetsBarKButtonBare+b;k.push(j("span",{className:i+m.sheetsBarPrev},[j("span",{className:m.sheetsBarKIcon+b+m.sheetsBarKArrowW},[])]));k.push(j("span",{className:i+m.sheetsBarNext},[j("span",{className:m.sheetsBarKIcon+b+m.sheetsBarKArrowE},[])]))}return j("div",{className:m.sheetsBarItems},k)},_createSortable:function(){var h=a.classNames;this._sortable=new f.ui.Sortable(this.element,{filter:f.format("ul li.{0},ul li.{1}",h.sheetsBarActive,h.sheetsBarInactive),container:g+h.sheetsBarItems,axis:"x",animation:false,ignore:"input",end:function(){if(this.draggable.hint){this.draggable.hint.remove()}},hint:function(i){var j=d(i).clone();return j.wrap("<div class='"+h.sheetsBarHintWrapper+"'><ul class='"+h.sheetsBarKResetItems+"'></ul></div>").closest("div")}})},_onEditorKeydown:function(h){if(this._editor){if(h.which===13){this._destroyEditor()}if(h.which===27){this._destroyEditor(true)}}},_onEditorBlur:function(){if(this._editor){this._destroyEditor()}},_onSheetReorderEnd:function(h){h.preventDefault();this.trigger("reorder",{oldIndex:h.oldIndex,newIndex:h.newIndex})},_onSheetReorderStart:function(h){if(this._editor){h.preventDefault()}},_onSheetRemove:function(i){var h=d(i.target).closest("li").text();if(this._editor){this._destroyEditor()}var j=function(k){var l=k.sender;if(l.isConfirmed()){this.trigger("remove",{name:h,confirmation:true})}}.bind(this);this._openDialog("confirmation",{close:j})},_onSheetSelect:function(i){var h=d(i.target).text();if(d(i.target).is(g+a.classNames.sheetsBarEditor)||!h){i.preventDefault();return}if(this._editor){this._destroyEditor()}this._scrollSheetsToItem(d(i.target).closest("li"));this.trigger("select",{name:h,isAddButton:false})},_onSheetRename:function(h){if(this._sheets[this._selectedIndex].name()===h||h===null){return}this.trigger("rename",{name:h,sheetIndex:this._selectedIndex})},_onAddSelect:function(){this.trigger("select",{isAddButton:true})},_addButton:function(){var h=f.dom.element;var i=a.classNames;return h("a",{className:i.sheetsBarAdd+b+i.sheetsBarKButton},[h("span",{className:i.sheetsBarKIcon+b+i.sheetsBarKFontIcon+b+i.sheetsBarKIconPlus},[])])},destroy:function(){this._sortable.destroy()},_scrollableAllowed:function(){var h=this.options;return h.scrollable&&!isNaN(h.scrollable.distance)},_scrollSheetsToItem:function(o){var k=this;if(!k._scrollableModeActive){return}var p=k._sheetsGroup();var h=p.scrollLeft();var l=e(o);var n=k._isRtl?o.position().left:o.position().left-p.children().first().position().left;var j=p[0].offsetWidth;var m=Math.ceil(parseFloat(p.css("padding-left")));var i;if(k._isRtl){if(n<0){i=h+n-(j-h)-m}else{if(n+l>j){i=h+n-l+m*2}}}else{if(h+j<n+l){i=n+l-j+m*2}else{if(h>n){i=n-m}}}p.finish().animate({scrollLeft:i},"fast","linear",function(){k._toggleScrollButtons()})},_sheetsGroup:function(){return this._sheetsWrapper().children("ul")},_sheetsWrapper:function(){return this.element.find(g+a.classNames.sheetsBarItems)},_scrollSheetsByDelta:function(k){var j=this;var i=j._sheetsGroup();var h=i.scrollLeft();i.finish().animate({scrollLeft:h+k},"fast","linear",function(){if(j._nowScrollingSheets){j._scrollSheetsByDelta(k)}else{j._toggleScrollButtons()}})}});f.spreadsheet.SheetsBar=a;d.extend(true,a,{classNames:c})}(window.kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/calc",["spreadsheet/runtime"],a)}(function(){if(kendo.support.browser.msie&&kendo.support.browser.version<9){return}var b=kendo.util;var i=kendo.spreadsheet;var r=i.Ref;var A=i.RangeRef;var k=i.CellRef;var v=i.NameRef;var H=i.calc;var y=H.runtime;var C=Object.create(null);var f=kendo.Class.extend({init:function f(J,K){this.message=J;this.pos=K},toString:function(){return this.message}});(function(J){J.forEach(function(K,L){K.forEach(function(M){C[M]=J.length-L})})}([[":"],[" "],[","],["%"],["^"],["*","/"],["+","-"],["&"],["=","<",">","<=",">=","<>"]]));var l={type:"bool",value:true};var w={type:"bool",value:false};function n(L){L=L.toUpperCase();for(var J=0,K=0;K<L.length;++K){J=J*26+L.charCodeAt(K)-64}return J-1}function p(J){return parseInt(J,10)-1}function x(M,O){if(M.toLowerCase()=="#sheet"){return i.SHEETREF}OUT:{var J;if(J=/^(\$)?([a-z]+)(\$)?(\d+)$/i.exec(M)){var Q=p(J[4]),L=n(J[2]);if(Q<1048576&&L<16384){return new k(p(J[4]),n(J[2]))}break OUT}var P=g(M,{});var K=[];while(true){var N=P.next();if(N instanceof k){N.rel=0}else{if(N instanceof A){N.topLeft.rel=0;N.bottomRight.rel=0}else{break OUT}}K.push(N);if(P.eof()){break}if(!P.is("op",",")){break OUT}P.next()}return K.length==1?K[0]:new i.UnionRef(K)}if(!O){throw new Error("Cannot parse reference: "+M)}}function F(U,Z,K,W){var V=[];W=g(W,{row:Z,col:K});var S=W.is;return{type:"exp",ast:J(true),refs:V,sheet:U,row:Z,col:K};function M(aa){aa.index=V.length;V.push(aa);return aa}function Y(ab,ad,ac){if(S(ab,ad)){return W.next()}else{var aa=W.peek();if(aa){W.croak("Expected "+ab+" \xAB"+ad+"\xBB but found "+aa.type+" \xAB"+aa.value+"\xBB")}else{if(!ac){W.croak("Expected "+ab+" \xAB"+ad+"\xBB")}}}}function J(aa){return R(X(N(aa)),0,aa)}function Q(aa){if(aa.upper=="TRUE"||aa.upper=="FALSE"){return aa.upper=="TRUE"?l:w}return M(new v(aa.value))}function P(){var ab=W.next();ab=ab.value;Y("punc","(");var aa=[];while(1){if(S("punc",")")){break}if(S("op",",")){aa.push({type:"null"});W.next();continue}aa.push(J(false));if(W.eof()||S("punc",")")){break}Y("op",",")}Y("punc",")",true);return{type:"func",func:ab,args:aa}}function T(aa){if(!aa.hasSheet()){aa.setSheet(U)}return M(aa)}function N(aa){var ab;if(S("ref")){ab=T(W.next())}else{if(S("func")){ab=P()}else{if(S("punc","(")){W.next();ab=J(true);Y("punc",")",true)}else{if(S("punc","{")){W.next();ab=L();Y("punc","}",true)}else{if(S("num")||S("str")||S("error")){ab=W.next()}else{if(S("sym")){ab=Q(W.next())}else{if(S("op","+")||S("op","-")){ab={type:"prefix",op:W.next().value,exp:N(aa)}}else{if(!W.peek()){W.croak("Incomplete expression")}else{if(S("punc","[")){W.croak("External reference not supported")}else{W.croak("Parse error")}}}}}}}}}return O(ab)}function L(){var ac=[],aa=[ac],ab=true;while(!W.eof()&&!S("punc","}")){if(ab){ab=false}else{if(S("punc",";")){aa.push(ac=[]);W.next()}else{Y("op",",")}}ac.push(J(false))}return{type:"matrix",value:aa}}function X(aa){if(S("punc","(")||S("ref")||S("num")||S("func")){return{type:"binary",op:" ",left:aa,right:J(false)}}else{return aa}}function O(aa){if(S("op","%")){W.next();return O({type:"postfix",op:"%",exp:aa})}else{return aa}}function R(af,ac,ae){var aa=S("op");if(aa&&(ae||aa.value!=",")){var ab=C[aa.value];if(ab>ac){W.next();var ad=R(N(ae),ab,ae);return R({type:"binary",op:aa.value,left:af,right:ad},ac,ae)}}return af}}function d(K,M){var L=F(null,0,0,K);if(!(L.ast instanceof v)){throw new f("Invalid name: "+K)}L=L.ast;if(!(M instanceof r)){var J=F(L.sheet,0,0,M);if(J.ast instanceof r){M=J.ast}else{if(/^(?:str|num|bool|error)$/.test(J.ast.type)){M=J.ast.value}else{M=s(J)}}}return{name:L,value:M}}function u(L){return D("function(row, col, mod){return("+J(L.ast,L,0)+")}");function J(P,O,M){switch(P.type){case"num":case"bool":return JSON.stringify(P.value);case"error":return JSON.stringify("#"+P.value);case"str":return JSON.stringify(JSON.stringify(P.value));case"ref":return"this.refs["+P.index+"].print(row, col, mod)";case"prefix":return N(function(){return JSON.stringify(P.op)+" + "+J(P.exp,P,C[P.op])});case"postfix":return N(function(){return J(P.exp,P,C[P.op])+" + "+JSON.stringify(P.op)});case"binary":return N(function(){var R=K(J(P.left,P,C[P.op]),P.left instanceof v&&P.op==":");var Q=K(J(P.right,P,C[P.op]),P.right instanceof v&&P.op==":");return R+" + "+JSON.stringify(P.op)+" + "+Q});case"func":return JSON.stringify(P.func+"(")+" + "+(P.args.length>0?P.args.map(function(Q){return J(Q,P,0)}).join(" + ', ' + "):"''")+" + ')'";case"matrix":return"'{ ' + "+P.value.map(function(Q){return Q.map(function(R){return J(R,P,0)}).join(" + ', ' + ")}).join(" + '; ' + ")+"+ ' }'";case"null":return"''"}throw new Error("Cannot make printer for node "+P.type);function N(R){var S=P.op;var Q=C[S]<M||!M&&S==","||O.type=="prefix"&&M==C[S]&&O.op=="-"||O.type=="binary"&&M==C[S]&&P===O.right;return K(R(),Q)}}function K(N,M){return M?"'(' + "+N+" + ')'":N}}function t(J,O){var Y=0;return Q(J,O);function Q(ab,aa){switch(ab.type){case"ref":return V(ab,aa);case"num":case"str":case"null":case"error":case"bool":return Z(ab,aa);case"prefix":case"postfix":return P(ab,aa);case"binary":return T(ab,aa);case"func":return R(ab,aa);case"lambda":return U(ab,aa);case"matrix":return K(ab.value,aa,true)}throw new Error("Cannot CPS "+ab.type)}function V(ab,aa){return ab.ref=="name"?X(ab,aa):Z(ab,aa)}function Z(ab,aa){return aa(ab)}function X(ab,aa){return{type:"func",func:",getname",args:[W(aa),ab]}}function P(ab,aa){return Q({type:"func",func:"unary"+ab.op,args:[ab.exp]},aa)}function T(ab,aa){return Q({type:"func",func:"binary"+ab.op,args:[ab.left,ab.right]},aa)}function N(ad,ac,ab,aa){return Q(ad,function(ah){var ag=W(aa);var af=M("T");var ae=M("E");return{type:"func",func:"if",args:[ag,ah,{type:"lambda",vars:[af],body:Q(ac||l,function(ai){return{type:"call",func:{type:"var",name:af},args:[ai]}})},{type:"lambda",vars:[ae],body:Q(ab||w,function(ai){return{type:"call",func:{type:"var",name:ae},args:[ai]}})}]}})}function L(ab,aa){if(ab.length===0){return Z(l,aa)}return Q({type:"func",func:"IF",args:[ab[0],{type:"func",func:"AND",args:ab.slice(1)},w]},aa)}function S(ab,aa){if(ab.length===0){return Z(w,aa)}return Q({type:"func",func:"IF",args:[ab[0],l,{type:"func",func:"OR",args:ab.slice(1)}]},aa)}function R(ac,ab){switch(ac.func.toLowerCase()){case"if":return N(ac.args[0],ac.args[1],ac.args[2],ab);case"and":return L(ac.args,ab);case"or":return S(ac.args,ab);case"true":return ab(l);case"false":return ab(w)}return function aa(ad,ae){if(ae==ac.args.length){return{type:"func",func:ac.func,args:ad}}else{return Q(ac.args[ae],function(af){return aa(ad.concat([af]),ae+1)})}}([W(ab)],0)}function U(ad,ac){var ab=M("K");var aa=Q(ad.body,function(ae){return{type:"call",func:{type:"var",value:ab},args:[ae]}});return ac({type:"lambda",vars:[ab].concat(ad.vars),body:aa})}function K(ad,ac,ae){var ab=[];return function aa(af){if(af==ad.length){return ac({type:"matrix",value:ab})}else{return(ae?K:Q)(ad[af],function(ag){ab[af]=ag;return aa(af+1)})}}(0)}function W(ab){var aa=M("R");return{type:"lambda",vars:[aa],body:ab({type:"var",name:aa})}}function M(aa){if(!aa){aa=""}aa="_"+aa;return aa+ ++Y}}var D=function(J){return function(K){var L=J[K];if(!L){L=J[K]=new Function("'use strict';return("+K+")")()}return L}}(Object.create(null));var G=Object.create(null);function s(O){var L=u(O);var N=L.call(O);var P=G[N];if(P){return P.clone(O.sheet,O.row,O.col)}var K=M(t(O.ast,function(Q){return{type:"return",value:Q}}));K=["function(){","var context = this, refs = context.formula.absrefs",K,"}"].join(";\n");P=new y.Formula(O.refs,D(K),L,O.sheet,O.row,O.col);G[N]=P;return P;function M(R){var Q=R.type;if(Q=="num"){return R.value+""}else{if(Q=="str"){return JSON.stringify(R.value)}else{if(Q=="error"){return"context.error("+JSON.stringify(R.value)+")"}else{if(Q=="return"){return"context.resolve("+M(R.value)+")"}else{if(Q=="func"){return"context.func("+JSON.stringify(R.func)+", "+M(R.args[0])+", "+J(R.args.slice(1))+")"}else{if(Q=="call"){return M(R.func)+"("+R.args.map(M).join(", ")+")"}else{if(Q=="ref"){return"refs["+R.index+"]"}else{if(Q=="bool"){return""+R.value}else{if(Q=="if"){return"(context.bool("+M(R.co)+") ? "+M(R.th)+" : "+M(R.el)+")"}else{if(Q=="lambda"){return"(function("+R.vars.join(", ")+"){ return("+M(R.body)+") })"}else{if(Q=="var"){return R.name}else{if(Q=="matrix"){return J(R.value)}else{if(Q=="null"){return"null"}else{throw new Error("Cannot compile expression "+Q)}}}}}}}}}}}}}}function J(Q){return"[ "+Q.map(M).join(", ")+" ]"}}function I(J){return J}function g(S,M){S=o(B(S),M);var L=S.ahead;var X=S.skip;var R=null;var V=M.row!=null&&M.col!=null?function(ac){if(ac.rel&1){ac.col-=M.col}if(ac.rel&2){ac.row-=M.row}return ac}:I;var J=M.forEditor?function(ac,ae,ad){ac.begin=ae.begin;ac.end=ad.end;return ac}:I;return{peek:W,next:U,croak:S.croak,eof:S.eof,is:P};function P(ad,ae){var ac=W();return ac!=null&&(ad==null||ac.type===ad)&&(ae==null||ac.value===ae)?ac:null}function W(){if(R==null){R=ab()}return R}function U(){if(R!=null){var ac=R;R=null;return ac}return ab()}function ab(){var ac;var ad=S.peek();if(ad){if(ad.type=="sym"||ad.type=="rc"||ad.type=="num"){ac=L(8,Z)||L(6,O)||L(6,N)||L(4,Q)||L(4,Y)||L(2,aa)||L(2,T)}if(!ac){ac=S.next()}}return ac}function K(af,ae){if(af.type=="rc"){if(af.rel&&!M.forEditor&&(M.row==null||M.col==null)){S.croak("Cannot read relative cell in RC notation")}return new k(af.row,af.col,af.rel)}if(af.type=="num"){if(af.value<=1048577){return V(new k(p(af.value),ae?-Infinity:+Infinity,2))}else{return null}}var ah=af.value;var ad=/^(\$)?([a-z]+)(\$)?(\d+)$/i.exec(ah);if(ad){var ai=p(ad[4]),ag=n(ad[2]);if(ai<=1048576&&ag<=16383){return V(new k(p(ad[4]),n(ad[2]),(ad[1]?0:1)|(ad[3]?0:2)))}else{return null}}var ac=ah.charAt(0)=="$";if(ac){ah=ah.substr(1)}if(/^\d+$/.test(ah)){var ai=p(ah);if(ai<=1048576){return V(new k(p(ah),ae?-Infinity:+Infinity,ac?0:2))}}else{var ag=n(ah);if(ag<=16383){return V(new k(ae?-Infinity:+Infinity,n(ah),ac?0:1))}}}function Z(aj,ai,ah,ag,af,ae,ad,ac){if(aj.type=="sym"&&ai.type=="op"&&ai.value==":"&&ah.type=="sym"&&ag.type=="punc"&&ag.value=="!"&&(af.type=="sym"||af.type=="rc"||af.type=="num"&&af.value==af.value|0)&&ae.type=="op"&&ae.value==":"&&(ad.type=="sym"||ad.type=="rc"||ad.type=="num"&&ad.value==ad.value|0)&&ad.type==af.type&&!(ac.type=="punc"&&ac.value=="("&&!ad.space)){var al=K(af,true),ak=K(ad,false);if(al&&ak){X(7);return J(new A(al.setSheet(aj.value,true),ak.setSheet(ah.value,true)).setSheet(aj.value,true),aj,ad)}}}function O(ad,ac,aj,ai,ah,ag){if(ad.type=="sym"&&ac.type=="op"&&ac.value==":"&&aj.type=="sym"&&ai.type=="punc"&&ai.value=="!"&&(ah.type=="sym"||ah.type=="rc"||ah.type=="num"&&ah.value==ah.value|0)&&!(ag.type=="punc"&&ag.value=="("&&!ah.space)){var ae=K(ah);if(ae){X(5);var af=ae.clone();return J(new A(ae.setSheet(ad.value,true),af.setSheet(aj.value,true)).setSheet(ad.value,true),ad,ah)}}}function N(ad,ac,aj,ai,ah,ag){if(ad.type=="sym"&&ac.type=="punc"&&ac.value=="!"&&(aj.type=="sym"||aj.type=="rc"||aj.type=="num"&&aj.value==aj.value|0)&&ai.type=="op"&&ai.value==":"&&(ah.type=="sym"||ah.type=="rc"||ah.type=="num"&&ah.value==ah.value|0)&&!(ag.type=="punc"&&ag.value=="("&&!ah.space)){var ae=K(aj,true),af=K(ah,false);if(ae&&af){X(5);return J(new A(ae,af).setSheet(ad.value,true),ad,ah)}}}function Q(ae,ad,ag,af){if(ae.type=="sym"&&ad.type=="punc"&&ad.value=="!"&&(ag.type=="sym"||ag.type=="rc"||ag.type=="num"&&ag.value==ag.value|0)&&!(af.type=="punc"&&af.value=="("&&!ag.space)){X(3);var ac=K(ag);if(!ac||!isFinite(ac.row)){ac=new v(ag.value)}return J(ac.setSheet(ae.value,true),ae,ag)}}function Y(ad,ac,ah,ag){if((ad.type=="sym"||ad.type=="rc"||ad.type=="num"&&ad.value==ad.value|0)&&(ac.type=="op"&&ac.value==":")&&(ah.type=="sym"||ah.type=="rc"||ah.type=="num"&&ah.value==ah.value|0)&&!(ag.type=="punc"&&ag.value=="("&&!ah.space)){var ae=K(ad,true),af=K(ah,false);if(ae&&af){X(3);return J(new A(ae,af),ad,ah)}}}function aa(ae,ad){if((ae.type=="sym"||ae.type=="rc")&&!(ad.type=="punc"&&ad.value=="("&&!ae.space)){var ac=K(ae);if(ac&&isFinite(ac.row)&&isFinite(ac.col)){X(1);return J(ac,ae,ae)}}}function T(ad,ac){if(ad.type=="sym"&&ac.type=="punc"&&ac.value=="("&&!ad.space){ad.type="func";X(1);return ad}}}function j(J){return" \t\n\xA0\u200B".indexOf(J)>=0}function o(U,M){var V=[],R=0;var W=U.readWhile;return{next:X,peek:Y,eof:T,croak:U.croak,ahead:J,skip:Z};function aa(ah){return/[0-9]/i.test(ah)}function S(ah){return/[a-z$_]/i.test(ah)||b.isUnicodeLetter(ah)}function ag(ah){return S(ah)||aa(ah)||ah=="."}function Q(ah){return ah in C}function ac(ah){return"!;(){}[]".indexOf(ah)>=0}function N(){var ah=false;var ai=W(function(aj){if(aj=="."){if(ah){return false}ah=true;return true}return aa(aj)});return{type:"num",value:parseFloat(ai)}}function ab(ai,ah){return{type:"sym",value:ai,upper:ai.toUpperCase(),space:j(U.peek()),quote:ah}}function P(ai,ah,ak){if(!ai&&!ah&&!ak){return null}if(!ai&&!ak||ai&&ak){var aj=ah?parseInt(ah,10):0;return ai?aj:aj-1}}function ae(){var ah=U.lookingAt(/^R(\[)?(-?[0-9]+)?(\])?C(\[)?(-?[0-9]+)?(\])?/i);if(ah){var aj=P(ah[1],ah[2],ah[3]);var ai=P(ah[4],ah[5],ah[6]);if(aj!=null&&ai!=null){U.skip(ah);return{type:"rc",row:aj,col:ai,rel:(ah[4]||!(ah[4]||ah[5]||ah[6])?1:0)|(ah[1]||!(ah[1]||ah[2]||ah[3])?2:0)}}}return ab(W(ag))}function L(){U.next();return{type:"str",value:U.readEscaped('"')}}function O(){U.next();return ab(U.readEscaped("'"),true)}function K(){return{type:"op",value:W(function(ah,ai){return ai+ah in C})}}function af(){return{type:"punc",value:U.next()}}function ad(){if(U.eof()){return null}var ai=U.peek(),ah;if(ai=='"'){return L()}if(ai=="'"){return O()}if(aa(ai)||ai=="."){return N()}if(S(ai)){return ae()}if(Q(ai)){return K()}if(ac(ai)){return af()}if(ah=U.lookingAt(/^#([a-z\/]+)[?!]?/i)){U.skip(ah);return{type:"error",value:ah[1]}}if(!M.forEditor){U.croak("Can't handle character: "+ai)}return{type:"error",value:U.next()}}function Y(){while(V.length<=R){W(j);var ai=U.pos();var ah=ad();if(M.forEditor&&ah){ah.begin=ai;ah.end=U.pos()}V.push(ah)}return V[R]}function X(){var ah=Y();if(ah){R++}return ah}function J(ak,ai){var aj=R,ah=[];while(ak-->0){ah.push(X()||q)}R=aj;return ai.apply(ah,ah)}function Z(ah){R+=ah}function T(){return Y()==null}}var q={type:"eof"};function B(R){var Q=0,W=1,K=0;return{next:N,peek:V,eof:U,croak:L,readWhile:O,readEscaped:J,lookingAt:P,skip:T,forward:M,pos:S};function S(){return Q}function N(){var X=R.charAt(Q++);if(X=="\n"){W++;K=0}else{K++}return X}function V(){return R.charAt(Q)}function U(){return V()===""}function L(X){throw new f(X+" (input: "+R+")",Q)}function T(Y){if(typeof Y=="string"){if(R.substr(Q,Y.length)!=Y){L("Expected "+Y)}M(Y.length)}else{if(Y instanceof RegExp){var X=Y.exec(R.substr(Q));if(X){M(X[0].length);return X}}else{M(Y[0].length)}}}function M(X){while(X-->0){N()}}function J(X){var Z=false,aa="";while(!U()){var Y=N();if(Z){aa+=Y;Z=false}else{if(Y=="\\"){Z=true}else{if(Y==X){break}else{aa+=Y}}}}return aa}function O(X){var Y="";while(!U()&&X(V(),Y)){Y+=N()}return Y}function P(X){return X.exec(R.substr(Q))}}var h=[];var c=H.registerFormatParser=function(J){h.push(J)};H.parse=function(N,Q,J,P){if(P instanceof Date){return{type:"date",value:y.dateToSerial(P)}}if(typeof P=="number"){return{type:"number",value:P}}if(typeof P=="boolean"){return{type:"boolean",value:P}}P+="";if(/^'/.test(P)){return{type:"string",value:P.substr(1)}}if(/^[0-9.]+%$/.test(P)){var O=P.substr(0,P.length-1);var M=parseFloat(O);if(!isNaN(M)&&M==O){return{type:"percent",value:M/100}}}if(/^=/.test(P)){P=P.substr(1);if(/\S/.test(P)){return F(N,Q,J,P)}else{return{type:"string",value:"="+P}}}for(var L=0;L<h.length;++L){var R=h[L](P);if(R){return R}}if(P.toLowerCase()=="true"){return{type:"boolean",value:true}}if(P.toLowerCase()=="false"){return{type:"boolean",value:false}}var K=y.parseDate(P);if(K){return{type:"date",value:y.dateToSerial(K)}}var M=parseFloat(P);if(!isNaN(M)&&P.length>0&&M==P){return{type:"number",value:M}}return{type:"string",value:P}};function a(K,O,L){var N=[];K=g(K,{forEditor:true,row:O,col:L});while(!K.eof()){N.push(M())}var J=N[0];if(J.type=="op"&&J.value=="="){J.type="startexp"}return N;function M(){var P=K.next();if(P.type=="sym"){if(P.upper=="TRUE"){P.type="bool";P.value=true}else{if(P.upper=="FALSE"){P.type="bool";P.value=false}}}else{if(P.type=="ref"){P={type:"ref",ref:O!=null&&L!=null?P.absolute(O,L):P,begin:P.begin,end:P.end}}}return P}}function e(K,N,L){N=N||0;L=L||0;K=g(K,{row:N,col:L});var J=[];while(!K.eof()){var M=K.next();if(M.type!="ref"){throw new f("Expecting a reference but got: "+JSON.stringify(M))}J.push(M.absolute(N,L))}return J}H.parseNameDefinition=d;H.parseFormula=F;H.parseReference=x;H.compile=s;H.parseSqref=e;H.InputStream=B;H.ParseError=f;H.tokenize=a;c(function(K){var J;if(J=/^(\d+):(\d+)$/.exec(K)){var N=parseInt(J[1],10);var O=parseInt(J[2],10);return{type:"date",format:"hh:mm",value:y.packTime(N,O,0,0)}}if(J=/^(\d+):(\d+)(\.\d+)$/.exec(K)){var O=parseInt(J[1],10);var M=parseInt(J[2],10);var L=parseFloat(J[3])*1000;return{type:"date",format:"mm:ss.00",value:y.packTime(0,O,M,L)}}if(J=/^(\d+):(\d+):(\d+)$/.exec(K)){var N=parseInt(J[1],10);var O=parseInt(J[2],10);var M=parseInt(J[3],10);return{type:"date",format:"hh:mm:ss",value:y.packTime(N,O,M,0)}}if(J=/^(\d+):(\d+):(\d+)(\.\d+)$/.exec(K)){var N=parseInt(J[1],10);var O=parseInt(J[2],10);var M=parseInt(J[3],10);var L=parseFloat(J[4])*1000;return{type:"date",format:"hh:mm:ss.00",value:y.packTime(N,O,M,L)}}});c(function(S){var N,L;var O=kendo.culture();var W=O.numberFormat[","];var J=O.numberFormat["."];var R=O.numberFormat.currency.symbol;var M=E(W,J);var Q=new RegExp("^\\s*\\"+R+"\\s*");var K=1;var U="";var V="";var P=false;S=B(S.replace(/^\s+|\s+$/g,""));if(S.skip(/^-\s*/)){K=-1}if(N=S.skip(Q)){P=true;U+='"'+N[0]+'"'}if(S.skip(/^-\s*/)){if(K<0){return null}K=-1}if(!(L=S.skip(M))){return null}U+="#";if(N=S.skip(Q)){if(P){return null}P=true;V='"'+N[0]+'"'}if(!S.eof()){return null}if(L[2]||P){U+=",#"}if(L[3]){U+="."+m("0",L[3].length-1)}var T=L[0].replace(new RegExp("\\"+W,"g"),"").replace(new RegExp("\\"+J,"g"),".");U+=V;if(P){U+=";-"+U}return{type:"number",format:U,value:K*parseFloat(T)}});var z={};function E(J,K){var M=J+K;var L=z[M];if(!L){L="^(\\d+(COM\\d{3})*(DOT\\d+)?)";L=L.replace(/DOT/g,"\\"+K).replace(/COM/g,"\\"+J);L=new RegExp(L);z[M]=L}return L}function m(L,J){var K="";while(J-->0){K+=L}return K}},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/excel-reader",["kendo.core","kendo.color","util/parse-xml","spreadsheet/calc"],a)}(function(){if(kendo.support.browser.msie&&kendo.support.browser.version<9){return}var K=kendo.jQuery;var T=kendo.util.parseXML;var O=kendo.spreadsheet.calc.parseReference;var s={greaterThanOrEqual:"greaterThanOrEqualTo",lessThanOrEqual:"lessThanOrEqualTo"};var c=null;function h(aj,ah,ai){var ag=new FileReader();ag.onload=function(al){var ak=new JSZip(al.target.result);ae(ak,ah,ai)};ag.readAsArrayBuffer(aj)}var Y=["sheetData","row","c"];var P=["cols","col"];var x=["definedNames","definedName"];var i=["sheetData","row","c","f"];var Z=["mergeCells","mergeCell"];var a=["sheetViews","sheetView","pane"];var aa=["sheetData","row"];var ac=["sheetViews","sheetView","selection"];var y=["sheets","sheet"];var N=["sheetData","row","c","is"];var W=["t"];var S=["si"];var ab=["sheetData","row","c","v"];var r=["bookViews","workbookView"];var H=["sheetViews","sheetView"];var X=["hyperlinks","hyperlink"];var V=["dataValidations","dataValidation"];var n=["dataValidations","dataValidation","formula1"];var m=["dataValidations","dataValidation","formula2"];function R(ag){if(!/^\//.test(ag)){ag="xl/"+ag}else{ag=ag.substr(1)}return ag}function ae(ai,ap,ah){c=ap.excelImportErrors=[];var an=t(ai);var al=u(ai,"_rels/workbook.xml");var ak=Q(ai,al.byType.theme[0]);var ao=I(ai,ak);var am=[];var ag=0;v(ai,"xl/workbook.xml",{enter:function(aq,at){if(this.is(y)){var av=at["r:id"];var au=al.byId[av];var ar=at.name;var aw=g(ai,au);am.push({workbook:ap,zip:ai,strings:an,styles:ao,file:au,options:{name:ar,rows:Math.max(ap.options.rows||0,aw.rows),columns:Math.max(ap.options.columns||0,aw.cols),columnWidth:aw.columnWidth,rowHeight:aw.rowHeight}})}else{if(this.is(r)){if(at.activeTab){ag=L(at.activeTab)}}}},text:function(av){var at=this.is(x);if(at&&!(b(at["function"])||b(at.vbProcedure))){var aq=at.localSheetId;var au=null;if(aq!=null){au=am[aq].options.name}var ar=at.name;if(au){ar="'"+au.replace(/\'/g,"\\'")+"'!"+ar}k(au,null,function(){ap.defineName(ar,av,b(at.hidden))},"reading user-defined name: "+ar)}}});var aj=new K.Deferred();aj.progress(function(aq){if(ah){ah.notify(aq)}}).then(function(){var aq=ap.sheets();l(aq);ap.activeSheet(aq[ag]);if(ah){ah.resolve()}});J(am,ap,aj)}function J(ah,ag,ai){var ak=new K.Deferred().resolve();for(var aj=0;aj<ah.length;aj++){(function(am,al){ak=ak.then(function(){var ao=ag.insertSheet(am.options);ao.suspendChanges(true);var ap=U(ao,am);var an={sheet:ao,progress:al/(ah.length-1)};ap.then(function(){ai.notify(an)});return ap})}(ah[aj],aj))}ak.then(function(){ai.resolve()})}function U(ai,ag){var ah=new K.Deferred();setTimeout(function(){z(ag.zip,ag.file,ai,ag.strings,ag.styles);ah.resolve()},0);return ah}function l(ah){for(var ag=0;ag<ah.length;ag++){ah[ag].suspendChanges(false).triggerChange({recalc:true})}}function g(ah,ag){var ai={rows:0,cols:0};v(ah,R(ag),{enter:function(aj,ak){if(aj=="dimension"){var al=O(ak.ref);if(al.bottomRight){ai.cols=al.bottomRight.col+1;ai.rows=al.bottomRight.row+1}}else{if(aj==="sheetFormatPr"){if(ak.defaultColWidth){ai.columnWidth=w(parseFloat(ak.defaultColWidth))}if(ak.defaultRowHeight){ai.rowHeight=j(parseFloat(ak.defaultRowHeight))}}else{if(this.is(aa)){this.exit()}}}}});return ai}function w(ah){var ag=7;var ai=(256*ah+Math.floor(128/ag))/256;return Math.floor(ai)*ag}function j(ag){return ag*1.5625}function z(aB,aD,al,am,aq){var ap,aj,ay,ah,ag;var av=al._columns._count;var au=null;var az=aD.replace(/worksheets\//,"worksheets/_rels/");var ao=u(aB,az);var ax,aw;var ai;var aC;var aA;var an;var ak;var at;var ar=[];c=al._workbook.excelImportErrors;v(aB,R(aD),{enter:function(aQ,aL){var aG;if(this.is(Y)){ay=null;ah=null;ag=null;ap=aL.r;if(ap==null){ap=O(au);ap.col++;ap=ap.toString()}au=ap;aj=aL.t;var aJ=aL.s;if(aJ!=null){ad(al,ap,aq,aJ)}}else{if(this.is(Z)){al.range(aL.ref).merge()}else{if(this.is(P)){var aE=L(aL.min)-1;var aK=Math.min(av,L(aL.max))-1;var aF;if(aL.width){aF=w(parseFloat(aL.width));if(aF!==0){al._columns.values.value(aE,aK,aF)}}if(aL.hidden==="1"||aF===0){for(var aP=aE;aP<=aK;aP++){al.hideColumn(aP)}}if(aL.style!=null){ad(al,new kendo.spreadsheet.RangeRef(new kendo.spreadsheet.CellRef(-Infinity,aE),new kendo.spreadsheet.CellRef(+Infinity,aK)),aq,aL.style)}}else{if(this.is(aa)){var aO=L(aL.r)-1;var aM;if(aL.ht){aM=j(parseFloat(aL.ht));if(aM!==0){al._rows.values.value(aO,aO,aM)}}if(aL.hidden==="1"||aM===0){al.hideRow(aO)}}else{if(this.is(ac)){if(aL.activeCell){var aN=O(aL.activeCell);al.select(aN,true)}}else{if(this.is(a)){if(aL.state=="frozen"){if(aL.xSplit){al.frozenColumns(L(aL.xSplit))}if(aL.ySplit){al.frozenRows(L(aL.ySplit))}}}else{if(this.is(H)){al.showGridLines(b(aL.showGridLines,true))}else{if(this.is(X)){var aH=aL["r:id"];var aI=ao.byId[aH];if(aI){al.range(aL.ref).link(aI)}}else{if(this.is(["autoFilter"])){ai=aL.ref}else{if(ai){if(this.is(["filterColumn"])){aC=parseInt(aL.colId,10)}else{if(this.is(["customFilters"])){aA=b(aL.and)?"and":"or";an=[]}else{if(this.is(["customFilter"])){aG=G(aL.operator,aL.val);if(aG){an.push({operator:aG.operator,value:aG.value})}}else{if(this.is(["dynamicFilter"])){ar.push({column:aC,filter:new kendo.spreadsheet.DynamicFilter({type:f(aL.type)})})}else{if(this.is(["top10"])){ar.push({column:aC,filter:new kendo.spreadsheet.TopFilter({value:p(aL.val),type:function(aR,aS){return aR&&aS?"topPercent":aS?"topNumber":aR?"bottomPercent":"bottomNumber"}(b(aL.percent),b(aL.top))})})}else{if(this.is(["filters"])){ak=b(aL.blank);at=[]}else{if(this.is(["filter"])){at.push(p(aL.val))}}}}}}}}}}}}}}}}}},leave:function(aE,aH){if(this.is(Y)){if(ah!=null){var aF=k(al,ag||ap,function(){al.range(ag||ap).formula(ah)},"parsing formula");if(aF){al.range(ag||ap).value(ah).background("#ffaaaa")}}else{if(ay!=null){var aG=al.range(ap);if(!aG._get("formula")){if(!aj||aj=="n"){ay=parseFloat(ay)}else{if(aj=="s"){ay=am[L(ay)]}else{if(aj=="b"){ay=ay==="1"}else{if(aj=="d"){ay=kendo.parseDate(ay)}}}}if(ay!=null){aG.value(ay)}}}}}else{if(this.is(V)){(function(){var aJ=kendo.spreadsheet.calc.parseSqref(aH.sqref);var aK=aH.type.toLowerCase();var aI=aH.operator;if(/^(?:whole|decimal)$/.test(aK)){aK="number"}else{if(aK=="list"){aI="list"}}if(!aI&&/^(?:number|date)$/.test(aK)){aI="between"}aJ.forEach(function(aL){k(al,aL,function(){al.range(aL).validation({type:b(aH.showErrorMessage,true)?"reject":"warning",from:ax,to:aw,dataType:aK,comparerType:s[aI]||aI,allowNulls:b(aH.allowBlank),showButton:b(aH.showDropDown)||aK=="date"||aK=="list",messageTemplate:aH.error,titleTemplate:aH.errorTitle})},"parsing validation")})}())}else{if(aE=="cols"){al._columns._refresh()}else{if(aE=="sheetData"){al._rows._refresh()}else{if(aE=="autoFilter"){al.range(ai).filter(ar);ai=null}else{if(ai){if(aE=="customFilters"){ar.push({column:aC,filter:new kendo.spreadsheet.CustomFilter({logic:aA,criteria:an})})}else{if(aE=="filters"){ar.push({column:aC,filter:new kendo.spreadsheet.ValueFilter({values:at,blanks:ak})})}}}}}}}}},text:function(aF){var aE;if(this.is(ab)||this.is(N)){ay=aF}else{if(aE=this.is(i)){ah=aF;if(aE.t=="shared"){ag=aE.ref}}else{if(this.is(n)){ax=aF}else{if(this.is(m)){aw=aF}}}}}})}function G(ai,ah){var ag={equal:"eq",notEqual:"ne",greaterThan:"gt",greaterThanOrEqual:"gte",lessThan:"lt",lessThanOrEqual:"lte"}[ai];ah=p(ah);if(ag&&typeof ah=="number"){return{operator:ag,value:ah}}if((ai=="notEqual"||!ai)&&typeof ah=="string"){return{operator:ai?"doesnotmatch":"matches",value:ah}}}function f(ag){return{Q1:"quarter1",Q2:"quarter2",Q3:"quarter3",Q4:"quarter4",M1:"january",M2:"february",M3:"march",M4:"april",M5:"may",M6:"june",M7:"july",M8:"august",M9:"september",M10:"october",M11:"november",M12:"december"}[ag.toUpperCase()]||ag}function p(ah){var ag=parseFloat(ah);if(!isNaN(ag)&&ag==ah){return ag}return ah}function k(ai,al,ak,ah){try{ak();return false}catch(ag){var aj={context:ah,error:String(ag)};if(ai){aj.sheet=ai.name()}if(al){aj.location=String(al)}c.push(aj);return true}}var D={none:0,thin:1,medium:2,dashed:1,dotted:1,thick:3,"double":3,hair:1,mediumDashed:2,dashDot:1,mediumDashDot:2,dashDotDot:1,mediumDashDotDot:2,slantDashDot:1};var B={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"mm-dd-yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@"};function ad(am,ai,at,ap){var ak=am.range(ai);var ar=at.inlineStyles[ap],ah,aq;if(ar.xfId){ah=at.namedStyles[ar.xfId]}if(an("applyBorder","borderId")){ag(at.borders[aq])}if(an("applyFont","fontId")){ao(at.fonts[aq])}if(an("applyAlignment","textAlign")){ak.textAlign(aq)}if(an("applyAlignment","verticalAlign")){ak.verticalAlign(aq)}if(an("applyAlignment","wrapText")){ak._property("wrap",aq)}if(an("applyFill","fillId")){aj(at.fills[aq])}if(an("applyNumberFormat","numFmtId")){al(at.numFmts[aq]||B[aq])}function al(au){var av=typeof au=="string"?au:au.formatCode;if(av!=null&&!/^general$/i.test(av)){av=av.replace(/^\[\$-[0-9]+\]/,"");ak.format(av)}}function aj(au){if(au.type=="solid"){ak.background(au.color)}}function ao(au){ak.fontFamily(au.name);ak._property("fontSize",au.size);if(au.bold){ak.bold(true)}if(au.italic){ak.italic(true)}}function ag(au){function av(ay,aA){var ax=au[ay];if(!ax){return}var az=D[ax.style];if(az===0){return}var aw=ax.color;if(aw==null){aw="#000"}ak._property(aA,{size:az,color:aw})}av("left","borderLeft");av("top","borderTop");av("right","borderRight");av("bottom","borderBottom")}function an(av,aw){var au=ar[av];if(au!=null&&!au){return false}aq=ar[aw];if(ah&&aq==null){au=ah[av];if(au!=null&&!au){return false}aq=ah[aw]}return aq!=null}}function v(ai,ah,aj){var ag=ai.files[ah];if(ag){T(ag.asUint8Array(),aj)}}function t(ah){var ag=[];var ai=null;v(ah,"xl/sharedStrings.xml",{leave:function(){if(this.is(S)){ag.push(ai);ai=null}},text:function(aj){if(this.is(W)){if(ai==null){ai=""}ai+=aj}}});return ag}function u(ah,ag){var ai={byId:{},byType:{theme:[]}};v(ah,R(ag)+".rels",{enter:function(ak,al){if(ak=="Relationship"){ai.byId[al.Id]=al.Target;var am=al.Type.match(/\w+$/)[0];var aj=ai.byType[am]||[];aj.push(al.Target);ai.byType[am]=aj}}});return ai}var M=["borders","border"];var F=["fills","fill"];var e=["fonts","font"];var C=["cellXfs","xf"];var A=["cellStyleXfs","xf"];var o=["numFmts","numFmt"];var q=[af("FF000000"),af("FFFFFFFF"),af("FFFF0000"),af("FF00FF00"),af("FF0000FF"),af("FFFFFF00"),af("FFFF00FF"),af("FF00FFFF"),af("FF000000"),af("FFFFFFFF"),af("FFFF0000"),af("FF00FF00"),af("FF0000FF"),af("FFFFFF00"),af("FFFF00FF"),af("FF00FFFF"),af("FF800000"),af("FF008000"),af("FF000080"),af("FF808000"),af("FF800080"),af("FF008080"),af("FFC0C0C0"),af("FF808080"),af("FF9999FF"),af("FF993366"),af("FFFFFFCC"),af("FFCCFFFF"),af("FF660066"),af("FFFF8080"),af("FF0066CC"),af("FFCCCCFF"),af("FF000080"),af("FFFF00FF"),af("FFFFFF00"),af("FF00FFFF"),af("FF800080"),af("FF800000"),af("FF008080"),af("FF0000FF"),af("FF00CCFF"),af("FFCCFFFF"),af("FFCCFFCC"),af("FFFFFF99"),af("FF99CCFF"),af("FFFF99CC"),af("FFCC99FF"),af("FFFFCC99"),af("FF3366FF"),af("FF33CCCC"),af("FF99CC00"),af("FFFFCC00"),af("FFFF9900"),af("FFFF6600"),af("FF666699"),af("FF969696"),af("FF003366"),af("FF339966"),af("FF003300"),af("FF333300"),af("FF993300"),af("FF993366"),af("FF333399"),af("FF333333"),af("FF000000"),af("FFFFFFFF")];function I(ag,aj){var ao={fonts:[],numFmts:{},fills:[],borders:[],namedStyles:[],inlineStyles:[]};var ah=null;var an=null;var ai=null;var ak=null;v(ag,"xl/styles.xml",{enter:function(ap,ar,aq){if(this.is(o)){ao.numFmts[ar.numFmtId]=ar}else{if(this.is(e)){ao.fonts.push(ah={})}else{if(ah){if(ap=="sz"){ah.size=parseFloat(ar.val)}else{if(ap=="name"){ah.name=ar.val}else{if(ap=="b"){ah.bold=b(ar.val,true)}else{if(ap=="i"){ah.italic=b(ar.val,true)}}}}}else{if(this.is(F)){ao.fills.push(an={})}else{if(an){if(ap=="patternFill"){an.type=ar.patternType}else{if(ap=="fgColor"&&an.type==="solid"){an.color=am(ar)}else{if(ap=="bgColor"&&an.type!=="solid"){an.color=am(ar)}}}}else{if(this.is(M)){ao.borders.push(ai={})}else{if(ai){if(/^(?:left|top|right|bottom)$/.test(ap)&&ar.style){ai[ap]={style:ar.style}}if(ap=="color"){var at=this.stack[this.stack.length-2].$tag;ai[at].color=am(ar)}}else{if(this.is(A)){ak=al(ar);ao.namedStyles.push(ak);if(aq){ak=null}}else{if(this.is(C)){ak=al(ar);ao.inlineStyles.push(ak);if(aq){ak=null}}else{if(ak){if(ap=="alignment"){if(/^(?:left|center|right|justify)$/.test(ar.horizontal)){ak.textAlign=ar.horizontal}if(/^(?:top|center|bottom)$/.test(ar.vertical)){ak.verticalAlign=ar.vertical}if(ar.wrapText!=null){ak.wrapText=b(ar.wrapText)}}}}}}}}}}}}},leave:function(ap){if(this.is(e)){ah=null}else{if(this.is(F)){an=null}else{if(this.is(M)){ai=null}else{if(ap=="xf"){ak=null}}}}}});function al(ap){var ar={borderId:L(ap.borderId),fillId:L(ap.fillId),fontId:L(ap.fontId),numFmtId:L(ap.numFmtId),pivotButton:b(ap.pivotButton),quotePrefix:b(ap.quotePrefix),xfId:L(ap.xfId)};aq("applyAlignment");aq("applyBorder");aq("applyFill");aq("applyFont");aq("applyNumberFormat");aq("applyProtection");function aq(at){if(ap[at]!=null){ar[at]=b(ap[at])}}return ar}function am(aq){if(aq.rgb){return af(aq.rgb)}else{if(aq.indexed){return q[L(aq.indexed)]}else{if(aq.theme){var ar=aj.colorScheme[L(aq.theme)];if(!ar){return q[0]}var ap=kendo.parseColor(ar);if(aq.tint){ap=ap.toHSL();var at=parseFloat(aq.tint);if(at<0){ap.l=ap.l*(1+at)}else{ap.l=ap.l*(1-at)+(100-100*(1-at))}}return ap.toCssRgba()}}}}return ao}var E=["a:clrScheme","*","a:srgbClr"];var d=["a:clrScheme","*","a:sysClr"];function Q(aj,ag){var ah=[];var al={colorScheme:ah};var ai=R(ag);if(aj.files[ai]){v(aj,ai,{enter:function(am,an){if(this.is(d)){ah.push(af(an.val=="window"?"FFFFFFFF":"FF000000"))}else{if(this.is(E)){ah.push(af("FF"+an.val))}}}});if(ah.length>3){ak(ah,0,1);ak(ah,2,3)}}function ak(an,ao,am){var ap=an[ao];an[ao]=an[am];an[am]=ap}return al}function L(ag){return ag==null?null:parseInt(ag,10)}function b(ah,ag){if(ah==null){return ag}return ah=="true"||ah===true||ah==1}function af(ah){var ag=/^([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(ah);return"rgba("+parseInt(ag[2],16)+", "+parseInt(ag[3],16)+", "+parseInt(ag[4],16)+", "+parseInt(ag[1],16)/255+")"}kendo.spreadsheet.readExcel=h;kendo.spreadsheet._readSheet=z;kendo.spreadsheet._readStrings=t;kendo.spreadsheet._readStyles=I;kendo.spreadsheet._readTheme=Q;kendo.spreadsheet._readWorkbook=ae},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/workbook",["kendo.core","spreadsheet/runtime","spreadsheet/references","spreadsheet/excel-reader"],a)}(function(){(function(g){if(g.support.browser.msie&&g.support.browser.version<9){return}var e=g.jQuery;var f=g.spreadsheet.calc.runtime.Formula;var c=g.spreadsheet.Ref;var d=g.spreadsheet.CalcError;var b=g.Observable.extend({init:function(i,h){g.Observable.fn.init.call(this);this.options=i;this._view=h;this._sheets=[];this._sheetsSearchCache={};this._sheet=this.insertSheet({rows:this.options.rows,columns:this.options.columns,rowHeight:this.options.rowHeight,columnWidth:this.options.columnWidth,headerHeight:this.options.headerHeight,headerWidth:this.options.headerWidth,dataSource:this.options.dataSource});this.undoRedoStack=new g.util.UndoRedoStack();this.undoRedoStack.bind(["undo","redo"],this._onUndoRedo.bind(this));this._context=new g.spreadsheet.FormulaContext(this);this._validationContext=new g.spreadsheet.ValidationFormulaContext(this);this._names=Object.create(null);this.fromJSON(this.options)},clipboard:function(){if(!this._clipboard){this._clipboard=new g.spreadsheet.Clipboard(this)}return this._clipboard},destroy:function(){this.unbind();if(this._clipboard){this._clipboard.destroy()}},events:["cut","copy","paste","change","excelImport","excelExport","insertSheet","removeSheet","selectSheet","renameSheet","insertRow","insertColumn","deleteRow","deleteColumn","hideRow","hideColumn","unhideRow","unhideColumn","select","changeFormat"],_sheetChange:function(h){this.trigger("change",h)},_sheetInsertRow:function(h){if(this.trigger("insertRow",{sheet:h.sender,index:h.index})){h.preventDefault()}},_sheetInsertColumn:function(h){if(this.trigger("insertColumn",{sheet:h.sender,index:h.index})){h.preventDefault()}},_sheetDeleteRow:function(h){if(this.trigger("deleteRow",{sheet:h.sender,index:h.index})){h.preventDefault()}},_sheetDeleteColumn:function(h){if(this.trigger("deleteColumn",{sheet:h.sender,index:h.index})){h.preventDefault()}},_sheetHideRow:function(h){if(this.trigger("hideRow",{sheet:h.sender,index:h.index})){h.preventDefault()}},_sheetHideColumn:function(h){if(this.trigger("hideColumn",{sheet:h.sender,index:h.index})){h.preventDefault()}},_sheetUnhideRow:function(h){if(this.trigger("unhideRow",{sheet:h.sender,index:h.index})){h.preventDefault()}},_sheetUnhideColumn:function(h){if(this.trigger("unhideColumn",{sheet:h.sender,index:h.index})){h.preventDefault()}},_sheetSelect:function(h){this.trigger("select",h)},_sheetCommandRequest:function(h){this.trigger("commandRequest",h)},_inputForRef:function(h){return new g.spreadsheet.Range(h,this._sheet).input()},_onUndoRedo:function(h){h.command.range().select()},execute:function(i){var k=e.extend({workbook:this},i.options);var l=new g.spreadsheet[i.command](k);var j=this.activeSheet();if(k.origin){l.origin(k.origin)}if(k.operatingRange){l.range(k.operatingRange)}else{if(k.editActiveCell){l.range(j.activeCellSelection())}else{l.range(j.selection())}}var h=l.exec();if(!h||h.reason!=="error"){if(l.cannotUndo){this.undoRedoStack.clear()}else{this.undoRedoStack.push(l)}}return h},resetFormulas:function(){this._sheets.forEach(function(h){h.resetFormulas()})},resetValidations:function(){this._sheets.forEach(function(h){h.resetValidations()})},refresh:function(h){if(h.recalc){this.resetFormulas();this.resetValidations();this._sheet.recalc(this._context);this._sheet.revalidate(this._validationContext)}},activeSheet:function(h){if(h===undefined){return this._sheet}if(!this.sheetByName(h.name())){return}this._sheet=h;h.triggerChange(g.spreadsheet.ALL_REASONS)},moveSheetToIndex:function(h,k){var i=this.sheetIndex(h);var j=this._sheets;if(i===-1){return}this._sheetsSearchCache={};j.splice(k,0,j.splice(i,1)[0]);this.trigger("change",{sheetSelection:true})},insertSheet:function(j){j=j||{};var m=this;var i=typeof j.index==="number"?j.index:m._sheets.length;var l;var n=m._sheets;var h=function(p){p=p?p:1;var o="Sheet"+p;if(!m.sheetByName(o)){return o}return h(p+1)};if(j.name&&m.sheetByName(j.name)){return}this._sheetsSearchCache={};l=j.name||h();var k=new g.spreadsheet.Sheet(j.rows||this.options.rows,j.columns||this.options.columns,j.rowHeight||this.options.rowHeight,j.columnWidth||this.options.columnWidth,j.headerHeight||this.options.headerHeight,j.headerWidth||this.options.headerWidth,j.defaultCellStyle||this.options.defaultCellStyle);k._workbook=this;k._name(l);this._bindSheetEvents(k);n.splice(i,0,k);if(j.data){k.fromJSON(j.data)}if(j.dataSource){k.setDataSource(j.dataSource)}this.trigger("change",{sheetSelection:true});return k},_bindSheetEvents:function(h){h.bind("change",this._sheetChange.bind(this));h.bind("insertRow",this._sheetInsertRow.bind(this));h.bind("insertColumn",this._sheetInsertColumn.bind(this));h.bind("deleteRow",this._sheetDeleteRow.bind(this));h.bind("deleteColumn",this._sheetDeleteColumn.bind(this));h.bind("hideRow",this._sheetHideRow.bind(this));h.bind("hideColumn",this._sheetHideColumn.bind(this));h.bind("unhideRow",this._sheetUnhideRow.bind(this));h.bind("unhideColumn",this._sheetUnhideColumn.bind(this));h.bind("select",this._sheetSelect.bind(this));h.bind("commandRequest",this._sheetCommandRequest.bind(this))},sheets:function(){return this._sheets.slice()},sheetByName:function(h){return this._sheets[this.sheetIndex(h)]},sheetByIndex:function(h){return this._sheets[h]},sheetIndex:function(j){var l=this._sheets;var k=(typeof j=="string"?j:j.name()).toLowerCase();var h=this._sheetsSearchCache[k];if(h>=0){return h}for(h=0;h<l.length;h++){var i=l[h].name().toLowerCase();this._sheetsSearchCache[i]=h;if(i===k){return h}}return -1},renameSheet:function(j,h){var i=j.name().toLowerCase();if(!h||i===h.toLowerCase()||this.sheetByName(h)){return}j=this.sheetByName(i);if(!j){return}this._sheetsSearchCache={};if(this.trigger("renameSheet",{sheet:j,newSheetName:h})){return}this._sheets.forEach(function(k){k._forFormulas(function(l){l.renameSheet(i,h)})});this.forEachName(function(l,k){if(l.nameref.renameSheet(i,h)){this.undefineName(k);l.name=l.nameref.print();this.nameDefinition(l.name,l)}if(l.value instanceof c||l.value instanceof f){l.value.renameSheet(i,h)}}.bind(this));j._name(h);this.trigger("change",{sheetSelection:true});return j},removeSheet:function(j){var l=this;var m=l._sheets;var i=j.name();var h=l.sheetIndex(j);if(m.length===1){return}if(this.trigger("removeSheet",{sheet:j})){return}this._sheetsSearchCache={};if(h>-1){j.unbind();m.splice(h,1);if(l.activeSheet().name()===i){var k=m[h===m.length?h-1:h];l.activeSheet(k)}else{this.trigger("change",{recalc:true,sheetSelection:true})}}},_clearSheets:function(){for(var h=0;h<this._sheets.length;h++){this._sheets[h].unbind()}this._sheets=[];this._sheetsSearchCache={};this._names={}},fromJSON:function(k){if(k.sheets){this._clearSheets();for(var h=0;h<k.sheets.length;h++){var l=k.sheets[h];var i=a(l,this.options);var j=this.insertSheet({rows:i.rowCount,columns:i.columnCount,rowHeight:i.rowHeight,columnWidth:i.columnWidth,headerHeight:i.headerHeight,headerWidth:i.headerWidth,data:l});if(l.dataSource){j.setDataSource(l.dataSource)}}}if(k.activeSheet){this.activeSheet(this.sheetByName(k.activeSheet))}else{this.activeSheet(this._sheets[0])}if(k.names){k.names.forEach(function(m){this.defineName(m.name,m.value,m.hidden)},this)}},toJSON:function(){this.resetFormulas();this.resetValidations();var h=Object.keys(this._names).map(function(i){var j=this._names[i];var k=j.value;if(k instanceof c||k instanceof f){k=k.print(0,0,true)}else{if(k instanceof d){k=k+""}else{k=JSON.stringify(k)}}return{value:k,hidden:j.hidden,name:j.name,sheet:j.nameref.sheet,localName:j.nameref.name}},this);return{activeSheet:this.activeSheet().name(),sheets:this._sheets.map(function(i){i.recalc(this._context);i.revalidate(this._validationContext);return i.toJSON()},this),names:h,columnWidth:this.options.columnWidth,rowHeight:this.options.rowHeight}},fromFile:function(j){var h=new e.Deferred();var k=h.promise();var i={file:j,promise:k};if(j&&!this.trigger("excelImport",i)){this._clearSheets();g.spreadsheet.readExcel(j,this,h)}else{h.reject()}return k},saveAsExcel:function(i){i=e.extend({},this.options.excel,i);var j=this.toJSON();if(!this.trigger("excelExport",{workbook:j})){var h=new g.ooxml.Workbook(j);g.saveAs({dataURI:h.toDataURL(),fileName:j.fileName||i.fileName,proxyURL:i.proxyURL,forceProxy:i.forceProxy})}},draw:function(i,l){if(typeof i=="function"&&!l){l=i;i={}}var k=[],j=this._sheets;(function h(m){if(m<j.length){j[m].draw(g.spreadsheet.SHEETREF,i,function(o){k.push(o);h(m+1)})}else{var n=k[0];for(m=1;m<k.length;++m){n.children=n.children.concat(k[m].children)}l(n)}}(0))},nameForRef:function(j,i){if(i===undefined){i=j.sheet}i=i.toLowerCase();var m=j+"";for(var h in this._names){var k=this._names[h];var l=k.value;if(l instanceof c){if(!l.sheet||l.sheet&&i==l.sheet.toLowerCase()){if(l+""==m){return k}}}}return{name:m}},defineName:function(i,k,j){var h=g.spreadsheet.calc.parseNameDefinition(i,k);i=h.name.print();this._names[i.toLowerCase()]={value:h.value,hidden:j,name:i,nameref:h.name}},undefineName:function(h){delete this._names[h.toLowerCase()]},nameValue:function(h){h=h.toLowerCase();if(h in this._names){return this._names[h].value}return null},nameDefinition:function(h,i){h=h.toLowerCase();if(arguments.length>1){if(i===undefined){delete this._names[h]}else{this._names[h]=i}}return this._names[h]},forEachName:function(h){Object.keys(this._names).forEach(function(i){h(this._names[i],i)},this)},adjustNames:function(h,i,k,j){h=h.toLowerCase();Object.keys(this._names).forEach(function(m){var n=this._names[m];var l=n.value;if(l instanceof c&&l.sheet.toLowerCase()==h){n.value=l.adjust(null,null,null,null,i,k,j)}else{if(l instanceof f){l.adjust(h,i?"row":"col",k,j)}}},this)},options:{}});function a(o,x){function n(j,i,y){return j!==undefined?j:i!==undefined?i:y}var r=n(o.rowCount,x.rows,200),q=n(o.columnCount,x.columns,50),h=n(o.rowHeight,x.rowHeight,20),k=n(o.columnWidth,x.columnWidth,64),p=n(o.headerHeight,x.headerHeight,20),u=n(o.headerWidth,x.headerWidth,32);if(o.rows!==undefined){for(var m=0;m<o.rows.length;++m){var w=o.rows[m];var s=n(w.index,m);if(s>=r){r=s+1}if(w.cells){for(var l=0;l<w.cells.length;++l){var t=w.cells[l];var v=n(t.index,l);if(v>=q){q=v+1}}}}}return{rowCount:r,columnCount:q,rowHeight:h,columnWidth:k,headerHeight:p,headerWidth:u}}g.spreadsheet.Workbook=b;if(g.PDFMixin){g.PDFMixin.extend(b.prototype);b.prototype.saveAsPDF=function(j){var i=new e.Deferred();var k=i.promise();var h={promise:k};if(this.trigger("pdfExport",h)){return}this._drawPDF(j,i).then(function(l){return g.drawing.exportPDF(l)}).done(function(l){g.saveAs({dataURI:l,fileName:j.fileName,proxyURL:j.proxyURL,forceProxy:j.forceProxy,proxyTarget:j.proxyTarget});i.resolve()}).fail(function(l){i.reject(l)});return k};b.prototype._drawPDF=function(i){var h=new e.Deferred();var j=function(k){h.resolve(k)};switch(i.area){case"workbook":i.workbook.draw(i,j);break;case"sheet":i.workbook.activeSheet().draw(i,j);break;case"selection":i.workbook.activeSheet().selection().draw(i,j);break}return h.promise()}}}(kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/formulacontext",["kendo.core"],a)}(function(){if(kendo.support.browser.msie&&kendo.support.browser.version<9){return}var a=kendo.spreadsheet;var h=a.CellRef;var c=a.RangeRef;var f=a.UnionRef;var e=a.NameRef;var b=a.Ref;var d=kendo.Class.extend({init:function(i){this.workbook=i},getRefCells:function(q,t,y,v,u){var m,j,x,z;if(q instanceof h){m=this.workbook.sheetByName(q.sheet);if(!m||!q.valid()){return[{value:new kendo.spreadsheet.calc.runtime.CalcError("REF")}]}j=m.formula(q);x=m.range(q.row,q.col).value();if(j!=null||x!=null){return[{formula:j,value:x,row:q.row,col:q.col,sheet:q.sheet,hidden:t?m.columnWidth(q.col)===0||m.rowHeight(q.row)===0:false}]}else{return[]}}if(q instanceof c){z=this.workbook.sheetIndex(q.sheet);var p=[],w=z;if(q.endSheet){w=this.workbook.sheetIndex(q.endSheet);if(z>w){var C=z;z=w;w=C}}if(z<0||w<0||!q.valid()){return[{value:new kendo.spreadsheet.calc.runtime.CalcError("REF")}]}while(z<=w){m=this.workbook.sheetByIndex(z++);var l=m._grid.normalize(q.topLeft);var E=m._grid.normalize(q.bottomRight);var A=m._grid.cellRefIndex(l);var B=m._grid.cellRefIndex(E);var k=m._properties.iterator("value",A,B);for(var o=l.col;o<=E.col;++o){for(var s=l.row;s<=E.row;++s){var r=m._grid.index(s,o);j=m._properties.get("formula",r);x=k.at(r);if(j!=null||x!=null){p.push({formula:j,value:x,row:s,col:o,sheet:m.name(),hidden:t?m.columnWidth(o)===0||m.rowHeight(s)===0:false})}}}}return p}if(q instanceof f){var D=[];for(z=0;z<q.refs.length;++z){D=D.concat(this.getRefCells(q.refs[z],t,y,v,u))}return D}if(q instanceof e){var F=this.nameValue(q,y,v,u);if(F instanceof b){return this.getRefCells(F,t,y,v,u)}return[{value:F==null?new kendo.spreadsheet.calc.runtime.CalcError("NAME"):F}]}return[]},nameValue:function(l,j,i,k){var m;if(l.hasSheet()){m=this.workbook.nameValue(l.print())}else{l=l.clone().setSheet(j,true);m=this.workbook.nameValue(l.print());if(m==null){m=this.workbook.nameValue(l.name)}}if(m instanceof b){m=m.absolute(i,k)}return m},getData:function(l,j,i,k){var n=l instanceof h;if(l instanceof e){n=this.workbook.nameValue(l.name) instanceof h}var m=this.getRefCells(l,false,j,i,k).map(function(o){var p=o.value;if(p instanceof kendo.spreadsheet.calc.runtime.Formula){p=p.value}return p});return n?m[0]:m},onFormula:function(l){var j=this.workbook.sheetByName(l.sheet);var n=l.row,i=l.col,k=l.value;var m=j.formula({row:n,col:i});if(m!==l){return false}if(k instanceof b){k=this.getData(k,l.sheet,n,i);if(Array.isArray(k)){k=k[0]}if(k===undefined){k=null}}if(k instanceof kendo.spreadsheet.calc.runtime.Matrix){k.each(function(p,o,q){j._value(n+o,i+q,p)})}else{j._value(n,i,k)}clearTimeout(j._formulaContextRefresh);j._formulaContextRefresh=setTimeout(function(){j.batch(function(){},{layout:true})},50);return true}});var g=d.extend({onFormula:function(){return true}});a.FormulaContext=d;a.ValidationFormulaContext=g},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/controller",["kendo.core"],a)}(function(){(function(m){if(m.support.browser.msie&&m.support.browser.version<9){return}var f=m.jQuery;var i=/:alphanum$/;var a={up:"up",down:"down",left:"left",right:"right",home:"first-col","ctrl+left":"first-col",end:"last-col","ctrl+right":"last-col","ctrl+up":"first-row","ctrl+down":"last-row","ctrl+home":"first","ctrl+end":"last",pageup:"prev-page",pagedown:"next-page"};var k={tab:"next","shift+tab":"previous",enter:"lower","shift+enter":"upper","delete":"clearContents",backspace:"clearContents","shift+:alphanum":"edit",":alphanum":"edit","ctrl+:alphanum":"ctrl","alt+ctrl+:alphanum":"edit",":edit":"edit"};var d={wheel:"onWheel","*+mousedown":"onMouseDown",contextmenu:"onContextMenu","*+mousedrag":"onMouseDrag","*+mouseup":"onMouseUp","*+dblclick":"onDblClick",mousemove:"onMouseMove"};var l={"*+pageup":"onPageUp","*+pagedown":"onPageDown",mouseup:"onMouseUp","*+cut":"onCut","*+paste":"onPaste","*+copy":"onCopy"};var e={esc:"onEditorEsc",enter:"onEditorBlur","alt+enter":"insertNewline","shift+enter":"onEditorBlur",tab:"onEditorBlur","shift+tab":"onEditorBlur"};var b=f.extend({focus:"onEditorBarFocus"},e);var n=f.extend({focus:"onEditorCellFocus"},e);var g={cell:"range",rowheader:"row",columnheader:"column",topcorner:"sheet",autofill:"autofill"};function h(t){return t.map(function(u){return'[data-action="'+u+'"]'}).join(",")}var j=h(["cut","copy","paste","insert-left","insert-right","insert-above","insert-below"]);var o=h(["unhide-row","unhide-column"]);var q=[];var p=[];var c=[];for(var s in a){q.push(s);p.push("shift+"+s)}for(s in k){c.push(s)}l[q]="onAction";l[p]="onShiftAction";l[c]="onEntryAction";n[q]="onEditorAction";n[p]="onEditorShiftAction";var r=m.Class.extend({init:function(u,t){this.view=u;this.workbook(t);this.container=f(u.container);this.clipboardElement=f(u.clipboard);this.cellContextMenu=u.cellContextMenu;this.rowHeaderContextMenu=u.rowHeaderContextMenu;this.colHeaderContextMenu=u.colHeaderContextMenu;this.scroller=u.scroller;this.tabstrip=u.tabstrip;this.sheetsbar=u.sheetsbar;u.nameEditor.bind("enter",this.onNameEditorEnter.bind(this));u.nameEditor.bind("cancel",this.onNameEditorCancel.bind(this));u.nameEditor.bind("select",this.onNameEditorSelect.bind(this));u.nameEditor.bind("delete",this.onNameEditorDelete.bind(this));this.editor=u.editor;this.editor.bind("change",this.onEditorChange.bind(this));this.editor.bind("activate",this.onEditorActivate.bind(this));this.editor.bind("deactivate",this.onEditorDeactivate.bind(this));this.editor.bind("update",this.onEditorUpdate.bind(this));f(u.scroller).on("scroll",this.onScroll.bind(this));this.listener=new m.spreadsheet.EventListener(this.container,this,d);this._enableEditorEvents();if(this.sheetsbar){this.sheetsbar.bind("select",this.onSheetBarSelect.bind(this));this.sheetsbar.bind("reorder",this.onSheetBarReorder.bind(this));this.sheetsbar.bind("rename",this.onSheetBarRename.bind(this));this.sheetsbar.bind("remove",this.onSheetBarRemove.bind(this))}this.cellContextMenu.bind("select",this.onContextMenuSelect.bind(this));this.rowHeaderContextMenu.bind("select",this.onContextMenuSelect.bind(this));this.colHeaderContextMenu.bind("select",this.onContextMenuSelect.bind(this));this.cellContextMenu.element.add(this.rowHeaderContextMenu.element).add(this.colHeaderContextMenu.element).on("contextmenu",false);if(this.tabstrip){this.tabstrip.bind("action",this.onCommandRequest.bind(this));this.tabstrip.bind("dialog",this.onDialogRequest.bind(this))}},_enableEditorEvents:function(t){if(t===undefined||t){this.keyListener=new m.spreadsheet.EventListener(this.clipboardElement,this,l);this.barKeyListener=new m.spreadsheet.EventListener(this.editor.barElement(),this,b);this.inputKeyListener=new m.spreadsheet.EventListener(this.editor.cellElement(),this,n)}else{this.keyListener.destroy();this.barKeyListener.destroy();this.inputKeyListener.destroy()}},_execute:function(u){var t=this._workbook.execute(u);if(u.command==="EditCommand"&&!t){this._workbook.trigger("change",{editorClose:true})}if(t){this._preventNavigation=true;if(t.reason==="error"){this.view.showError(t,function(){this.activateEditor();this.editor.value(this._lastEditorValue);this.editor._value=this._workbook._inputForRef(this._workbook.activeSheet()._viewActiveCell());this.editor.select()}.bind(this))}else{this.view.openDialog(t.reason)}}return t},_activeTooltip:function(){return this._workbook.activeSheet().activeCell().simplify().toString()},onContextMenuSelect:function(u){var t=f(u.item).data("action");var v;switch(t){case"cut":v={command:"ToolbarCutCommand",options:{workbook:this._workbook}};break;case"copy":v={command:"ToolbarCopyCommand",options:{workbook:this._workbook}};break;case"paste":v={command:"ToolbarPasteCommand",options:{workbook:this._workbook}};break;case"unmerge":v={command:"MergeCellCommand",options:{value:"unmerge"}};break;case"merge":this.view.openDialog("merge");break;case"hide-row":v={command:"HideLineCommand",options:{axis:"row"}};break;case"hide-column":v={command:"HideLineCommand",options:{axis:"column"}};break;case"unhide-row":v={command:"UnHideLineCommand",options:{axis:"row"}};break;case"unhide-column":v={command:"UnHideLineCommand",options:{axis:"column"}};break;case"delete-row":v={command:"DeleteRowCommand"};break;case"delete-column":v={command:"DeleteColumnCommand"};break}if(v){this._execute(v)}},onSheetBarRemove:function(u){var t=this._workbook.sheetByName(u.name);if(!t){return}this._workbook.removeSheet(t)},destroy:function(){this.listener.destroy();this._enableEditorEvents(false);this.keyListener.destroy();this.inputKeyListener.destroy()},onSheetBarSelect:function(v){var u;var t=this._workbook;if(v.isAddButton){if(this._workbook.trigger("insertSheet")){return}u=t.insertSheet()}else{u=t.sheetByName(v.name)}if(t.activeSheet().name()!==u.name()){if(this._workbook.trigger("selectSheet",{sheet:u})){return}t.activeSheet(u)}},onSheetBarReorder:function(u){var t=this._workbook.sheetByIndex(u.oldIndex);this._workbook.moveSheetToIndex(t,u.newIndex);this._workbook.activeSheet(t)},onSheetBarRename:function(u){var t=this._workbook.sheetByIndex(u.sheetIndex);if(this._workbook.sheetByName(u.name)){this.view.showError({reason:"error",type:"duplicateSheetName"});return}this._workbook.renameSheet(t,u.name);this.clipboardElement.focus()},sheet:function(t){this.navigator=t.navigator();this.axisManager=t.axisManager()},workbook:function(t){this._workbook=t;this.clipboard=t.clipboard();t.bind("commandRequest",this.onCommandRequest.bind(this))},refresh:function(){var v=this.editor;var t=this._workbook;var u=t.activeSheet();this._viewPortHeight=this.view.scroller.clientHeight;this.navigator.height(this._viewPortHeight);if(!v.isActive()&&!this.isEditorDisabled){v.enable(u.selection().enable()!==false);v.value(t._inputForRef(u.activeCell()))}var w=u.selection()._ref.simplify();var x=this._workbook.nameForRef(w,u.name());this.view.nameEditor.value(x.name)},onScroll:function(){this.view.render()},onWheel:function(v){var u=v.originalEvent.deltaX;var t=v.originalEvent.deltaY;if(v.originalEvent.deltaMode===1){u*=10;t*=10}this.scrollWith(u,t);v.preventDefault()},onAction:function(t,u){this.navigator.moveActiveCell(a[u]);t.preventDefault()},onPageUp:function(){this.scrollDown(-this._viewPortHeight)},onPageDown:function(){this.scrollDown(this._viewPortHeight)},onEntryAction:function(w,x){if(w.mod){var t=true;var u=String.fromCharCode(w.keyCode);switch(u){case"A":this.navigator.selectAll();break;case"Y":this._workbook.undoRedoStack.redo();break;case"Z":this._workbook.undoRedoStack.undo();break;default:t=false;break}if(t){w.preventDefault()}}else{var v=this._workbook.activeSheet().selection().enable()===false;if(x=="delete"||x=="backspace"){if(!v){this._execute({command:"ClearContentCommand"})}w.preventDefault()}else{if(i.test(x)||x===":edit"){if(v){w.preventDefault();return}if(x!==":edit"){this.editor.value("")}this.activateEditor()}else{this.navigator.navigateInSelection(k[x]);w.preventDefault()}}}},onShiftAction:function(t,u){this.navigator.modifySelection(a[u.replace("shift+","")],this.appendSelection);t.preventDefault()},onMouseMove:function(v){var u=this._workbook.activeSheet();if(u.resizingInProgress()||u.selectionInProgress()){return}var t=this.objectAt(v);if(t.type==="columnresizehandle"||t.type==="rowresizehandle"){u.positionResizeHandle(t.ref)}else{u.removeResizeHandle()}},onMouseDown:function(v){var t=this.objectAt(v);if(t.pane){this.originFrame=t.pane}if(t.type==="editor"){this.onEditorEsc();this.openCustomEditor();v.preventDefault();return}if(this.editor.canInsertRef(false)&&t.ref){this._workbook.activeSheet()._setFormulaSelections(this.editor.highlightedRefs());this.navigator.startSelection(t.ref,this._selectionMode,this.appendSelection,v.shiftKey);v.preventDefault();return}else{this._preventNavigation=false;this.editor.deactivate();if(this._preventNavigation){return}}var u=this._workbook.activeSheet();if(t.type==="columnresizehandle"||t.type==="rowresizehandle"){u.startResizing({x:t.x,y:t.y});v.preventDefault();return}if(t.type==="filtericon"){this.openFilterMenu(v);v.preventDefault();return}this._selectionMode=g[t.type];this.appendSelection=v.mod;this.navigator.startSelection(t.ref,this._selectionMode,this.appendSelection,v.shiftKey)},onContextMenu:function(x){var v=this._workbook.activeSheet();if(v.resizingInProgress()){return}x.preventDefault();this.cellContextMenu.close();this.colHeaderContextMenu.close();this.rowHeaderContextMenu.close();var z;var u=this.objectAt(x);if(u.type==="columnresizehandle"||u.type==="rowresizehandle"){return}this.navigator.selectForContextMenu(u.ref,g[u.type]);var t=this.navigator._sheet.select() instanceof m.spreadsheet.UnionRef;var y=false;var w=false;if(u.type=="columnheader"){z=this.colHeaderContextMenu;y=!t&&this.axisManager.selectionIncludesHiddenColumns()}else{if(u.type=="rowheader"){z=this.rowHeaderContextMenu;y=!t&&this.axisManager.selectionIncludesHiddenRows()}else{z=this.cellContextMenu;w=this.navigator.selectionIncludesMergedCells()}}z.element.find(j).toggle(!t);z.element.find(o).toggle(y);z.element.find("[data-action=unmerge]").toggle(w);setTimeout(function(){z.open(x.pageX,x.pageY)})},prevent:function(t){t.preventDefault()},constrainResize:function(u,w){var t=this._workbook.activeSheet();var v=t.resizeHandlePosition();return !v||u==="outside"||u==="topcorner"||w.col<v.col||w.row<v.row},onMouseDrag:function(w){if(this._selectionMode==="sheet"){return}var t={clientX:w.clientX,clientY:w.clientY};var u=this.objectAt(t);var v=this._workbook.activeSheet();if(v.resizingInProgress()){if(!this.constrainResize(u.type,u.ref)){v.resizeHintPosition({x:u.x,y:u.y})}return}if(u.type==="outside"){this.startAutoScroll(u);return}if(this.originFrame===u.pane){this.selectToLocation(t)}else{var x=this.originFrame._grid;if(u.x>x.right){this.scrollLeft()}if(u.y>x.bottom){this.scrollTop()}if(u.y<x.top||u.x<x.left){this.startAutoScroll(u,t)}else{this.selectToLocation(t)}}w.preventDefault()},onMouseUp:function(x){var u=this._workbook.activeSheet();u.completeResizing();this.navigator.completeSelection();this.stopAutoScroll();var w=this.editor.activeEditor();if(!w){return}var v=x.target;while(v){if(v===w.element[0]){return}v=v.parentNode}var t=this.objectAt(x);if(t&&t.ref&&w.canInsertRef(false)){w.refAtPoint(u.selection()._ref);u._setFormulaSelections(w.highlightedRefs())}},onDblClick:function(v){var t=this.objectAt(v);var u=this._workbook.activeSheet().selection().enable()===false;if(t.type!=="cell"||u){return}this.editor.activate({range:this._workbook.activeSheet()._viewActiveCell(),rect:this.view.activeCellRectangle(),tooltip:this._activeTooltip()}).focus();this.onEditorUpdate()},onCut:function(u){if(u){var t=this.clipboardElement.find("table.kendo-clipboard-"+this.clipboard._uid).detach();this.clipboardElement.append(t.clone(false));setTimeout(function(){this.clipboardElement.empty().append(t)}.bind(this))}this._execute({command:"CutCommand",options:{workbook:this.view._workbook,event:u.originalEvent||u}})},clipBoardValue:function(){return this.clipboardElement.html()},onPaste:function(y){var v="";var u="";this.clipboard.menuInvoked=y===undefined;if(y){if(y.originalEvent.clipboardData&&y.originalEvent.clipboardData.getData){y.preventDefault();var x=false;var t=false;if(window.DOMStringList&&y.originalEvent.clipboardData.types instanceof window.DOMStringList){x=y.originalEvent.clipboardData.types.contains("text/html");t=y.originalEvent.clipboardData.types.contains("text/plain")}else{x=/text\/html/.test(y.originalEvent.clipboardData.types);t=/text\/plain/.test(y.originalEvent.clipboardData.types)}if(x){v=y.originalEvent.clipboardData.getData("text/html")}if(t){u=y.originalEvent.clipboardData.getData("text/plain").trim()}}else{var w=this.clipboardElement.find("table.kendo-clipboard-"+this.clipboard._uid).detach();this.clipboardElement.empty();setTimeout(function(){var A=this.clipboardElement.html();var z=window.clipboardData.getData("Text").trim();if(!A&&!z){return}this.clipboard.external({html:A,plain:z});this.clipboardElement.empty().append(w);this._execute({command:"PasteCommand",options:{workbook:this.view._workbook,event:y.originalEvent||y}});this.clipboard.menuInvoked=true}.bind(this));return}}else{if(m.support.browser.msie){this.clipboardElement.focus().select();document.execCommand("paste");return}else{this.clipboard.menuInvoked=true}}if(!v&&!u){return}this.clipboard.external({html:v,plain:u});this._execute({command:"PasteCommand",options:{workbook:this.view._workbook,event:y.originalEvent||y}})},onCopy:function(t){this.clipboard.menuInvoked=t===undefined;this._execute({command:"CopyCommand",options:{workbook:this.view._workbook,event:t.originalEvent||t}})},scrollTop:function(){this.scroller.scrollTop=0},scrollLeft:function(){this.scroller.scrollLeft=0},scrollDown:function(t){this.scroller.scrollTop+=t},scrollRight:function(t){this.scroller.scrollLeft+=t},scrollWith:function(t,u){this.scroller.scrollTop+=u;this.scroller.scrollLeft+=t},objectAt:function(t){var u=this.container[0].getBoundingClientRect();return this.view.objectAt(t.clientX-u.left,t.clientY-u.top)},selectToLocation:function(t){var u=this.objectAt(t);if(u.pane){this.extendSelection(u);this.lastKnownCellLocation=t;this.originFrame=u.pane}this.stopAutoScroll()},extendSelection:function(t){this.navigator.extendSelection(t.ref,this._selectionMode,this.appendSelection)},autoScroll:function(){var u=this._autoScrollTarget.x;var B=this._autoScrollTarget.y;var v=this.originFrame._grid;var t=this.view.scroller;var w=8;var A=t.scrollLeft;var z=t.scrollTop;if(u<v.left){this.scrollRight(-w)}if(u>v.right){this.scrollRight(w)}if(B<v.top){this.scrollDown(-w)}if(B>v.bottom){this.scrollDown(w)}if(z===t.scrollTop&&A===t.scrollLeft){this.selectToLocation(this.finalLocation)}else{this.extendSelection(this.objectAt(this.lastKnownCellLocation))}},startAutoScroll:function(u,t){if(!this._scrollInterval){this._scrollInterval=setInterval(this.autoScroll.bind(this),50)}this.finalLocation=t||this.lastKnownCellLocation;this._autoScrollTarget=u},stopAutoScroll:function(){clearInterval(this._scrollInterval);this._scrollInterval=null},openCustomEditor:function(){this.view.openCustomEditor()},openFilterMenu:function(w){var t=this.objectAt(w);var u=this._workbook.activeSheet();var v=u.filterColumn(t.ref);var x=this.view.createFilterMenu(v);x.bind("action",this.onCommandRequest.bind(this));x.bind("action",x.close.bind(x));x.openFor(w.target)},onEditorChange:function(t){this._workbook.activeSheet().isInEditMode(false);this._lastEditorValue=t.value;this._execute({command:"EditCommand",options:{editActiveCell:true,value:t.value}})},onEditorActivate:function(){var t=this._workbook;var u=t.activeSheet();u._setFormulaSelections(this.editor.highlightedRefs());u.isInEditMode(true)},onEditorDeactivate:function(){var t=this._workbook.activeSheet();t.isInEditMode(false);t._setFormulaSelections([])},onEditorUpdate:function(){this._workbook.activeSheet()._setFormulaSelections(this.editor.highlightedRefs())},onEditorBarFocus:function(){var t=this._workbook.activeSheet().selection().enable()===false;if(t){return}this.editor.activate({range:this._workbook.activeSheet()._viewActiveCell(),rect:this.view.activeCellRectangle(),tooltip:this._activeTooltip()})},onEditorCellFocus:function(){this.editor.scale()},onEditorEsc:function(){this.resetEditorValue();this.editor.deactivate();this.clipboardElement.focus()},insertNewline:function(t){t.preventDefault();this.editor.insertNewline()},onEditorBlur:function(t,u){if(this.editor.isFiltered()){return}this._preventNavigation=false;this.editor.deactivate();if(!this._preventNavigation){this.clipboardElement.focus();this.navigator.navigateInSelection(k[u])}},onEditorAction:function(v,w){var u=this.editor;var t=this._workbook.activeSheet();if(u.canInsertRef(true)){this.navigator.moveActiveCell(a[w]);u.activeEditor().refAtPoint(t.selection()._ref);t._setFormulaSelections(u.highlightedRefs());v.preventDefault()}},onEditorShiftAction:function(v,w){var u=this.editor;var t=this._workbook.activeSheet();if(u.canInsertRef(true)){this.navigator.modifySelection(a[w.replace("shift+","")],this.appendSelection);u.activeEditor().refAtPoint(t.selection()._ref);t._setFormulaSelections(u.highlightedRefs());v.preventDefault()}},resetEditorValue:function(){this.editor.value(this._workbook._inputForRef(this._workbook.activeSheet()._viewActiveCell()))},activateEditor:function(){this.editor.activate({range:this._workbook.activeSheet()._viewActiveCell(),rect:this.view.activeCellRectangle(),tooltip:this._activeTooltip()}).focus()},deactivateEditor:function(){this.view.editor.deactivate()},onCommandRequest:function(t){if(t.command){this._execute(t)}else{this._workbook.undoRedoStack[t.action]()}},onDialogRequest:function(u){var t={pdfExport:this._workbook.options.pdf,excelExport:this._workbook.options.excel};if(u.options){f.extend(true,u.options,t)}else{u.options=t}this.view.openDialog(u.name,u.options)},onNameEditorEnter:function(){var x;var t=this._workbook;var w=t.activeSheet();var u=this.view.nameEditor.value();x=m.spreadsheet.calc.parseReference(u,true)||t.nameValue(u);if(x instanceof m.spreadsheet.Ref){if(x.sheet&&x.sheet.toLowerCase()!=w.name().toLowerCase()){var v=t.sheetByName(x.sheet);if(v){t.activeSheet(v);w=v}}w.range(x).select();return}x=w.selection()._ref.clone().simplify().setSheet(w.name(),true);this._execute({command:"DefineNameCommand",options:{name:u,value:x}});this.clipboardElement.focus()},onNameEditorCancel:function(){this.clipboardElement.focus()},onNameEditorSelect:function(y){var u=y.name;var t=this._workbook;var w=t.activeSheet();var x=t.nameValue(u);if(x instanceof m.spreadsheet.Ref){if(x.sheet&&x.sheet.toLowerCase()!=w.name().toLowerCase()){var v=t.sheetByName(x.sheet);if(v){t.activeSheet(v);w=v}}w.range(x).select();return}this.clipboardElement.focus()},onNameEditorDelete:function(t){this._execute({command:"DeleteNameCommand",options:{name:t.name}});this.clipboardElement.focus()}});m.spreadsheet.Controller=r}(window.kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/view",["kendo.core","kendo.menu","spreadsheet/sheetsbar"],a)}(function(){(function(k){if(k.support.browser.msie&&k.support.browser.version<9){return}var f=k.jQuery;var h=k.spreadsheet.CellRef;var n=".";var e=7;var r={view:"k-spreadsheet-view",fixedContainer:"k-spreadsheet-fixed-container",editContainer:"k-spreadsheet-edit-container",scroller:"k-spreadsheet-scroller",viewSize:"k-spreadsheet-view-size",clipboard:"k-spreadsheet-clipboard",cellEditor:"k-spreadsheet-cell-editor",barEditor:"k-spreadsheet-editor",topCorner:"k-spreadsheet-top-corner",filterHeadersWrapper:"k-filter-wrapper",filterRange:"k-filter-range",filterButton:"k-spreadsheet-filter",filterButtonActive:"k-state-active",horizontalResize:"k-horizontal-resize",verticalResize:"k-vertical-resize",icon:"k-icon",iconFilterDefault:"k-i-arrow-60-down",sheetsBar:"k-spreadsheet-sheets-bar",sheetsBarActive:"k-spreadsheet-sheets-bar-active",sheetsBarInactive:"k-spreadsheet-sheets-bar-inactive",cellContextMenu:"k-spreadsheet-cell-context-menu",rowHeaderContextMenu:"k-spreadsheet-row-header-context-menu",colHeaderContextMenu:"k-spreadsheet-col-header-context-menu"};k.spreadsheet.messages.view={errors:{openUnsupported:"Unsupported format. Please select an .xlsx file.",shiftingNonblankCells:"Cannot insert cells due to data loss possibility. Select another insert location or delete the data from the end of your worksheet.",insertColumnWhenRowIsSelected:"Cannot insert column when all columns are selected.",insertRowWhenColumnIsSelected:"Cannot insert row when all rows are selected.",filterRangeContainingMerges:"Cannot create a filter within a range containing merges",sortRangeContainingMerges:"Cannot sort a range containing merges",cantSortMultipleSelection:"Cannot sort multiple selection",cantSortNullRef:"Cannot sort empty selection",cantSortMixedCells:"Cannot sort range containing cells of mixed shapes",validationError:"The value that you entered violates the validation rules set on the cell.",cannotModifyDisabled:"Cannot modify disabled cells."},tabs:{home:"Home",insert:"Insert",data:"Data"}};function b(x){var y=window.getSelection();y.removeAllRanges();var w=document.createRange();w.selectNodeContents(x);y.addRange(w)}function v(x,y){var w=x.trs[y].children;return w[w.length-2]}function t(x,y){var z=x.trs[y-1];var w=x.trs[y].children.length-1;if(z&&w>=0){return z.children[w]}}function d(w){return["solid",(w.size||1)+"px",w.color||"#000"].join(" ")}function g(w){if(!/:\/\//.test(w)){w="http://"+w}return w}function c(K,y,x,N,C,H){function F(T){var U=y.link;if(!U){if(typeof y.value=="object"){U=y.value.link}}if(U){var S={textDecoration:"none"};if(y.color){S.color=y.color}if(y.underline){S.textDecoration="underline"}return k.dom.element("a",{href:g(U),style:S,target:"_blank"},T?[T]:[])}return T}if(!x&&!k.spreadsheet.draw.shouldDrawCell(y)){return}var A=y.left;var J=y.top;var M=y.width+1;var L=y.height+1;var O={};var P=y.background;var D=null;if(P){D=P;if(H){D=k.parseColor(D).toHSV();D.v*=0.9;D=D.toCssRgba()}D=d({color:D})}if(P){O.backgroundColor=P}if(y.color){O.color=y.color}if(y.fontFamily){O.fontFamily=y.fontFamily}if(y.underline){O.textDecoration="underline"}if(y.italic){O.fontStyle="italic"}if(y.textAlign){O.textAlign=y.textAlign}if(y.bold){O.fontWeight="bold"}if(y.fontSize){O.fontSize=y.fontSize+"px"}if(y.wrap===true){O.whiteSpace="pre-wrap";O.overflowWrap="break-word";O.wordWrap="break-word"}if(y.borderLeft){O.borderLeft=d(y.borderLeft);if(C){C[y.left]=true}}else{if(D&&C&&!C[y.left]){O.borderLeft=D}else{A++;M--}}if(y.borderTop){O.borderTop=d(y.borderTop);if(N){N[y.top]=true}}else{if(D&&N&&!N[y.top]){O.borderTop=D}else{J++;L--}}if(y.borderRight){O.borderRight=d(y.borderRight);if(C){C[y.right]=true}}else{if(D&&C&&!C[y.right]){O.borderRight=D}else{M--}}if(y.borderBottom){O.borderBottom=d(y.borderBottom);if(N){N[y.bottom]=true}}else{if(D&&N&&!N[y.bottom]){O.borderBottom=D}else{L--}}O.left=A+"px";O.top=J+"px";O.width=M+"px";O.height=L+"px";var R=y.value,z=typeof R;if(y.format&&R!=null){R=k.spreadsheet.formatting.format(R,y.format);if(R.__dataType){z=R.__dataType}}else{if(R!==null&&R!==undefined){R=k.dom.text(R)}}if(!O.textAlign){switch(z){case"number":case"date":case"percent":O.textAlign="right";break;case"boolean":O.textAlign="center";break}}var Q=[j.cell];if(x){Q.push(x)}if(y.enable===false){Q.push("k-state-disabled")}if(y.merged){Q.push("k-spreadsheet-merged-cell")}var w=y.verticalAlign||"bottom";if(w&&R){R=k.dom.element("div",{className:"k-vertical-align-"+w},[F(R)])}else{R=F(R)}var B=R?[R]:[];var E={style:O};var G=y.validation;if(G&&!G.value){B.push(k.dom.element("span",{className:"k-dirty"}));Q.push("k-dirty-cell");E.title=G.message}E.className=Q.join(" ");var I=k.dom.element("div",E,B);K.push(I);return I}function u(E,F,D){var w={};if(D.background){w.backgroundColor=D.background}if(D.color){w.color=D.color}if(D.fontFamily){w.fontFamily=D.fontFamily}if(D.underline){w.textDecoration="underline"}if(D.italic){w.fontStyle="italic"}if(D.textAlign){w.textAlign=D.textAlign}if(D.verticalAlign){w.verticalAlign=D.verticalAlign==="center"?"middle":D.verticalAlign}if(D.bold){w.fontWeight="bold"}if(D.fontSize){w.fontSize=D.fontSize+"px"}if(D.wrap===true){w.whiteSpace="pre-wrap";w.wordBreak="break-all"}if(D.borderRight){w.borderRight=d(D.borderRight)}else{if(D.background){w.borderRightColor=D.background}}if(D.borderBottom){w.borderBottom=d(D.borderBottom)}else{if(D.background){w.borderBottomColor=D.background}}var z=D.value,B=typeof z;if(D.format&&z!=null){z=k.spreadsheet.formatting.format(z,D.format);if(z.__dataType){B=z.__dataType}}if(!w.textAlign){switch(B){case"number":case"date":case"percent":w.textAlign="right";break;case"boolean":w.textAlign="center";break}}var A=null;if(D.enable===false){A="k-state-disabled"}var x=E.addCell(F,z,w,A,D.validation);var y,C;if(D.borderLeft){C=v(E,F);y=d(D.borderLeft);if(C&&y){C.attr.style.borderRight=y}}else{if(D.background){w.borderLeftColor=D.background}}if(D.borderTop){C=t(E,F);y=d(D.borderTop);if(C&&y){C.attr.style.borderBottom=y}}else{if(D.background){w.borderTopColor=D.background}}return x}var i=k.Class.extend({init:function(){this.cols=[];this.trs=[];this._height=0;this._width=0},addColumn:function(x){this._width+=x;var w=k.dom.element("col",{style:{width:x+"px"}});w.visible=x>0;this.cols.push(w)},addRow:function(x){var w=null;w={style:{height:x+"px"}};this._height+=x;var y=k.dom.element("tr",w);y.visible=x>0;this.trs.push(y)},addCell:function(D,B,A,z,w){if(B===null||B===undefined){B=""}if(!(B instanceof k.dom.Node)){B=k.dom.text(B)}var y=[B];var x={style:A};if(w&&!w.value){y.push(k.dom.element("span",{className:"k-dirty"}));z=(z||"")+(z?" ":"")+"k-dirty-cell";x.title=w.message}if(z){x.className=z}var C=k.dom.element("td",x,y);this.trs[D].children.push(C);return C},toDomTree:function(w,B,z){this.trs=this.trs.filter(function(x){return x.visible});var A=0;this.cols=this.cols.filter(function(x,y){if(!x.visible){this.trs.forEach(function(C){C.children.splice(y-A,1)});A++}return x.visible},this);return k.dom.element("table",{style:{left:w+"px",top:B+"px",height:this._height+"px",width:this._width+"px"},className:z},[k.dom.element("colgroup",null,this.cols),k.dom.element("tbody",null,this.trs)])}});var q='<ul class="#=classNames.cellContextMenu#"><li data-action=cut>Cut</li><li data-action=copy>Copy</li><li data-action=paste>Paste</li><li class="k-separator"></li><li data-action=merge>Merge</li><li data-action=unmerge>Unmerge</li></ul>';var a='<ul class="#=classNames.rowHeaderContextMenu#"><li data-action=cut>Cut</li><li data-action=copy>Copy</li><li data-action=paste>Paste</li><li class="k-separator"></li><li data-action="delete-row">Delete</li><li data-action="hide-row">Hide</li><li data-action="unhide-row">Unhide</li></ul>';var p='<ul class="#=classNames.colHeaderContextMenu#"><li data-action=cut>Cut</li><li data-action=copy>Copy</li><li data-action=paste>Paste</li><li class="k-separator"></li><li data-action="delete-column">Delete</li><li data-action="hide-column">Hide</li><li data-action="unhide-column">Unhide</li></ul>';k.spreadsheet.ContextMenu=k.ui.ContextMenu;var m=k.template('<div class="#=classNames.view#"><div class="#=classNames.fixedContainer#"></div><div class="#=classNames.scroller#"><div class="#=classNames.viewSize#"></div></div><div tabindex="0" class="#=classNames.clipboard#" contenteditable=true></div><div class="#=classNames.cellEditor#"></div></div><div class="#=classNames.sheetsBar#"></div>'+q+a+p);function l(y,x,w){return y>=x&&y<=w}var o=k.Class.extend({init:function(y,x){var z=o.classNames;this.element=y;this.options=f.extend(true,{messages:k.spreadsheet.messages.view},this.options,x);this._chrome();this._dialogs=[];y.append(m({classNames:z}));this._formulaInput();this.wrapper=y.find(n+z.view);this.container=y.find(n+z.fixedContainer)[0];this.scroller=y.find(n+z.scroller)[0];this.clipboard=y.find(n+z.clipboard);this.viewSize=f(this.scroller.firstChild);this.tree=new k.dom.Tree(this.container);this.clipboardContents=new k.dom.Tree(this.clipboard[0]);this.editor=new k.spreadsheet.SheetEditor(this);this._sheetsbar();var w={target:y,animation:false,showOn:"never"};this.cellContextMenu=new k.spreadsheet.ContextMenu(y.find(n+z.cellContextMenu),w);this.colHeaderContextMenu=new k.spreadsheet.ContextMenu(y.find(n+z.colHeaderContextMenu),w);this.rowHeaderContextMenu=new k.spreadsheet.ContextMenu(y.find(n+z.rowHeaderContextMenu),w);var A=k.support.scrollbar();f(this.container).css({width:this.wrapper[0].clientWidth-A,height:this.wrapper[0].clientHeight-A})},enableClipboard:function(w){this.isClipboardDeactivated=!w;if(w){this.clipboard.attr("contenteditable",w)}else{this.clipboard.removeAttr("contenteditable")}},_resize:function(){var y=k._outerHeight;var x=this.tabstrip?y(this.tabstrip.element):0;var w=this.formulaBar?y(this.formulaBar.element):0;var z=this.sheetsbar?y(this.sheetsbar.element):0;this.wrapper.height(this.element.height()-(x+w+z));if(this.tabstrip){this.tabstrip.quickAccessAdjust()}},_chrome:function(){var y=f("<div class='k-spreadsheet-action-bar' />").prependTo(this.element);var x=f("<div class='k-spreadsheet-name-editor' />").appendTo(y);this.nameEditor=new k.spreadsheet.NameEditor(x);var w=f("<div />").appendTo(y);this.formulaBar=new k.spreadsheet.FormulaBar(w);if(this.options.toolbar){this._tabstrip()}},_formulaInput:function(){var w=this.element.find(n+o.classNames.cellEditor);this.formulaInput=new k.spreadsheet.FormulaInput(w,{autoScale:true})},_sheetsbar:function(){if(this.options.sheetsbar){var w=f.extend(true,{openDialog:this.openDialog.bind(this)},this.options.sheetsbar);this.sheetsbar=new k.spreadsheet.SheetsBar(this.element.find(n+o.classNames.sheetsBar),w)}},_tabstrip:function(){var z=this.options.messages.tabs;var x=f.extend(true,{home:true,insert:true,data:true},this.options.toolbar);var y=[];if(this.tabstrip){this.tabstrip.destroy();this.element.children(".k-tabstrip").remove()}for(var w in x){if(x[w]===true||x[w] instanceof Array){y.push({id:w,text:z[w],content:""})}}this.tabstrip=new k.spreadsheet.TabStrip(f("<div />").prependTo(this.element),{animation:false,dataTextField:"text",dataContentField:"content",dataSource:y,toolbarOptions:x,view:this});this.tabstrip.select(0)},_executeCommand:function(w){this._sheet.trigger("commandRequest",w)},workbook:function(w){this._workbook=w;this.nameEditor._workbook=w},sheet:function(w){this._sheet=w},activeCellRectangle:function(){return this.cellRectangle(this._sheet._viewActiveCell())},_rectangle:function(x,w){return x._grid.boundingRectangle(w.toRangeRef())},isColumnResizer:function(w,C,B){var A=this._rectangle(C,B);w-=this._sheet._grid._headerWidth;var y=e/2;var z=A.right-this.scroller.scrollLeft;return z-y<=w&&w<=z+y},isRowResizer:function(C,B,A){var z=this._rectangle(B,A);C-=this._sheet._grid._headerHeight;var w=e/2;var x=z.bottom-this.scroller.scrollTop;return x-w<=C&&C<=x+w},isFilterIcon:function(z,F,E,A){var C=E._grid;var B=C.rows.frozen?0:this.scroller.scrollTop;var D=C.columns.frozen?0:this.scroller.scrollLeft;z-=this._sheet._grid._headerWidth-D;F-=this._sheet._grid._headerHeight-B;var w=false;this._sheet.forEachFilterHeader(A,function(y){if(!w){var x=this._rectangle(E,y);w=E.filterIconRect(x).intersects(z,F)}}.bind(this));return w},isAutoFill:function(w,C,B){var A=this._sheet.select();if(A.size>1){return false}w-=this._sheet._grid._headerWidth;C-=this._sheet._grid._headerHeight;if(!B._grid.columns.frozen){w+=this.scroller.scrollLeft}if(!B._grid.rows.frozen){C+=this.scroller.scrollTop}var z=this._rectangle(B,A);return Math.abs(z.right-w)<8&&Math.abs(z.bottom-C)<8},isEditButton:function(w,B){var z=this._sheet.activeCellCustomEditor();if(z){var A=this.activeCellRectangle();if(w>A.right&&w<=A.right+20&&B>=A.top&&B<=A.bottom){return true}}},objectAt:function(G,F){var w=this._sheet._grid;var C,A;if(G<0||F<0||G>this.scroller.clientWidth||F>this.scroller.clientHeight){C={type:"outside"}}else{if(G<w._headerWidth&&F<w._headerHeight){C={type:"topcorner"}}else{A=this.paneAt(G,F);if(!A){C={type:"outside"}}else{var H=A._grid.rows.index(F,this.scroller.scrollTop);var B=A._grid.columns.index(G,this.scroller.scrollLeft);var E="cell";var z=new h(H,B);var D=this._sheet.selectionInProgress();if(this.isAutoFill(G,F,A)){E="autofill"}else{if(this.isFilterIcon(G,F,A,z)){E="filtericon"}else{if(!D&&G<w._headerWidth){z=new h(H,-Infinity);E=this.isRowResizer(F,A,z)?"rowresizehandle":"rowheader"}else{if(!D&&F<w._headerHeight){z=new h(-Infinity,B);E=this.isColumnResizer(G,A,z)?"columnresizehandle":"columnheader"}else{if(this.isEditButton(G,F)){E="editor"}}}}}C={type:E,ref:z}}}}C.pane=A;C.x=G;C.y=F;return C},paneAt:function(w,A){return this.panes.filter(function z(y){var x=y._grid;return l(A,x.top,x.bottom)&&l(w,x.left,x.right)})[0]},containingPane:function(w){return this.panes.filter(function(x){if(x._grid.contains(w)){return true}return false})[0]},cellRectangle:function(w){var y=this.containingPane(w)._grid;var x=this._sheet._grid.rectangle(w);return x.offset(y.headerWidth-(y.columns.frozen?0:this.scroller.scrollLeft),y.headerHeight-(y.rows.frozen?0:this.scroller.scrollTop))},refresh:function(y){var x=this._sheet;if(this.tabstrip){this.tabstrip.refreshTools(x.range(x.activeCell()))}if(y.sheetSelection&&this.sheetsbar){this.sheetsbar.renderSheets(this._workbook.sheets(),this._workbook.sheetIndex(this._sheet))}this._resize();this.viewSize[0].style.height=x._grid.totalHeight()+"px";this.viewSize[0].style.width=x._grid.totalWidth()+"px";if(y.layout){var z=x.frozenColumns();var w=x.frozenRows();this.panes=[this._pane(w,z)];if(z>0){this.panes.push(this._pane(w,0,null,z))}if(w>0){this.panes.push(this._pane(0,z,w,null))}if(w>0&&z>0){this.panes.push(this._pane(0,0,w,z))}}if(y.filter){this._destroyFilterMenu()}if(y.activeCell){this._focus=x.activeCell().toRangeRef()}},createFilterMenu:function(A){if(this._filterMenu&&this._filterMenu.options.column==A){return this._filterMenu}this._destroyFilterMenu();var z=this._sheet;var B=z.filter().ref;var w=new k.spreadsheet.Range(B,z);var y=f("<div />").appendTo(this.element);var x={column:A,range:w};var C=new k.spreadsheet.FilterMenu(y,x);this._filterMenu=C;return C},selectClipBoardContents:function(){if(!this.isClipboardDeactivated){this.clipboard.focus();b(this.clipboard[0])}},scrollIntoView:function(x){var z=false;var B=this.containingPane(x)._grid;var y=B.scrollBoundaries(x);var w=this.scroller;var A=B.rows.frozen?0:w.scrollTop;var C=B.columns.frozen?0:w.scrollLeft;if(y.top<A){z=true;w.scrollTop=y.scrollTop}if(y.bottom>A){z=true;w.scrollTop=y.scrollBottom}if(y.left<C){z=true;w.scrollLeft=y.scrollLeft}if(y.right>C){z=true;w.scrollLeft=y.scrollRight}return z},_destroyDialog:function(){this._dialogs.pop()},openCustomEditor:function(){var y=this;var w=y._sheet.activeCell().first();var z=y._sheet.activeCellCustomEditor();var x=y._sheet.range(w);z.edit({range:x,rect:y.activeCellRectangle(),view:this,validation:this._sheet.validation(w),callback:function(A,B){y._executeCommand({command:"EditCommand",options:{operatingRange:x,property:B?"input":"value",value:A}})}})},openDialog:function(y,x){var A=k.spreadsheet.dialogs.create(y,x);if(A){A.bind("action",this._executeCommand.bind(this));A.bind("deactivate",this._destroyDialog.bind(this));this._dialogs.push(A);var z=this._sheet;var B=z.activeCell();var w=new k.spreadsheet.Range(B,z);A.open(w);return A}},showError:function(x,A){var B=this.options.messages.errors;var z=function(D){var C=D.sender.dialog().element;C.find(".k-button:first").focus();C.find(".k-button, input").on("keydown",function(E){if(E.keyCode==k.keys.ESC){D.sender.close()}})};var w=function(C){var D=C.sender;this.selectClipBoardContents();if(D._retry&&A){A()}}.bind(this);if(k.spreadsheet.dialogs.registered(x.type)){var y={close:w};if(x.type==="validationError"){y=f.extend(y,{title:x.title||"Error",text:x.body?x.body:B[x.type],activate:z})}this.openDialog(x.type,y)}else{this.openDialog("message",{title:x.title||"Error",text:x.body?x.body:B[x.type],activate:z,close:w})}},destroy:function(){this._dialogs.forEach(function(w){w.destroy()});this.cellContextMenu.destroy();this.rowHeaderContextMenu.destroy();this.colHeaderContextMenu.destroy();if(this.tabstrip){this.tabstrip.destroy()}this._destroyFilterMenu()},_destroyFilterMenu:function(){if(this._filterMenu){this._filterMenu.destroy();this._filterMenu=undefined;this._filterMenuColumn=undefined}},render:function(){if(!this.element.is(":visible")){return}var A=this._sheet;var D=A.focus();if(D&&this.scrollIntoView(D)){return}var x=!A.resizingInProgress()?"none":A.resizeHandlePosition().col===-Infinity?"column":"row";this.wrapper.toggleClass(r.editContainer,this.editor.isActive()).toggleClass(r.horizontalResize,x=="row").toggleClass(r.verticalResize,x=="column");var w=A._grid;var y=this.scroller.scrollTop;var z=this.scroller.scrollLeft;if(y<0){y=0}if(z<0){z=0}var E=this.panes.map(function(F){return F.render(z,y)},this);var B=[];B=Array.prototype.concat.apply(B,E);var C=k.dom.element("div",{style:{width:w._headerWidth+"px",height:w._headerHeight+"px"},className:o.classNames.topCorner});B.push(C);if(A.resizeHandlePosition()&&A.resizeHintPosition()){B.push(this.renderResizeHint())}this.tree.render(B);if(this.editor.isActive()){this.editor.toggleTooltip(this.activeCellRectangle())}else{if(!A.selectionInProgress()&&!A.resizingInProgress()&&!A.isInEditMode()){this.renderClipboardContents()}}},renderResizeHint:function(){var x=this._sheet;var z=x.resizeHandlePosition();var w=z.col!==-Infinity;var y;if(w){y={height:this.scroller.clientHeight+"px",width:e+"px",left:x.resizeHintPosition().x+"px",top:"0px"}}else{y={height:e+"px",width:this.scroller.clientWidth+"px",top:x.resizeHintPosition().y+"px",left:"0px"}}var A=s.classNames;return k.dom.element("div",{className:A.resizeHint+(!w?" "+A.resizeHintVertical:""),style:y},[k.dom.element("div",{className:A.resizeHintHandle}),k.dom.element("div",{className:A.resizeHintMarker})])},renderClipboardContents:function(){var B=this._sheet;var w=B._grid;var D=B.select().toRangeRef();var z=this._workbook.clipboard().canCopy();if(z.canCopy===false&&z.multiSelection){this.clipboardContents.render([]);this.selectClipBoardContents();return}D=B.trim(D);var E=new i();var x=w.rangeDimensions(D);x.rows.forEach(function(F){E.addRow(F)});x.columns.forEach(function(F){E.addColumn(F)});var A=B._getMergedCells(D);var C=A.primary;var y=A.secondary;B.forEach(D,function(J,H,F){var G=new h(J,H).print();if(!y[G]){var K=u(E,J-D.topLeft.row,F);var I=C[G];if(I){K.attr.colspan=I.width();K.attr.rowspan=I.height()}}});this.clipboardContents.render([E.toDomTree(0,0,"kendo-clipboard-"+this._workbook.clipboard()._uid)]);this.selectClipBoardContents()},_pane:function(z,x,w,y){var A=new s(this._sheet,this._sheet._grid.pane({row:z,column:x,rowCount:w,columnCount:y}));A.refresh(this.scroller.clientWidth,this.scroller.clientHeight);return A}});var j={cell:"k-spreadsheet-cell",vaxis:"k-spreadsheet-vaxis",haxis:"k-spreadsheet-haxis",rowHeader:"k-spreadsheet-row-header",columnHeader:"k-spreadsheet-column-header",pane:"k-spreadsheet-pane",data:"k-spreadsheet-data",mergedCell:"k-spreadsheet-merged-cell",mergedCellsWrapper:"k-merged-cells-wrapper",activeCell:"k-spreadsheet-active-cell",selection:"k-spreadsheet-selection",selectionWrapper:"k-selection-wrapper",autoFillWrapper:"k-auto-fill-wrapper",single:"k-single",top:"k-top",right:"k-right",bottom:"k-bottom",left:"k-left",resizeHandle:"k-resize-handle",columnResizeHandle:"k-column-resize-handle",rowResizeHandle:"k-row-resize-handle",resizeHint:"k-resize-hint",resizeHintHandle:"k-resize-hint-handle",resizeHintMarker:"k-resize-hint-marker",resizeHintVertical:"k-resize-hint-vertical",selectionHighlight:"k-spreadsheet-selection-highlight",series:["k-series-a","k-series-b","k-series-c","k-series-d","k-series-e","k-series-f"]};var s=k.Class.extend({init:function(x,w){this._sheet=x;this._grid=w},refresh:function(x,w){this._grid.refresh(x,w)},isVisible:function(y,x,w){return this._grid.view(y,x).ref.intersects(w)},render:function(D,y){var w=s.classNames;var F=this._sheet;var x=this._grid;var G=x.view(D,y);this._currentView=G;this._currentRect=this._rectangle(G.ref);this._selectedHeaders=F.selectedHeaders();var z=[];z.push(this.renderData());z.push(this.renderSelection());z.push(this.renderAutoFill());z.push(this.renderEditorSelection());z.push(this.renderFilterHeaders());if(x.hasRowHeader){var E=k.dom.element("div",{className:w.rowHeader,style:{width:x.headerWidth+"px",top:G.rowOffset+"px"}});z.push(E);F.forEach(G.ref.leftColumn(),function(K){if(!F.isHiddenRow(K)){var J=K+1,I=F.rowHeight(K);E.children.push(k.dom.element("div",{className:this.headerClassName(K,"row"),style:{width:x.headerWidth+"px",height:I+"px"}},[k.dom.element("div",{className:"k-vertical-align-center"},[k.dom.text(J+"")])]))}}.bind(this))}if(x.hasColumnHeader){var C=k.dom.element("div",{className:w.columnHeader,style:{top:"0px",left:G.columnOffset+"px",width:this._currentRect.width+"px",height:x.headerHeight+"px"}});z.push(C);var B=0;F.forEach(G.ref.topRow(),function(L,I){if(!F.isHiddenColumn(I)){var K=k.spreadsheet.Ref.display(null,Infinity,I),J=F.columnWidth(I);C.children.push(k.dom.element("div",{className:this.headerClassName(I,"col"),style:{position:"absolute",left:B+"px",width:J+"px",height:x.headerHeight+"px"}},[k.dom.element("div",{className:"k-vertical-align-center"},[k.dom.text(K+"")])]));B+=J}}.bind(this))}if(F.resizeHandlePosition()&&(x.hasColumnHeader||x.hasRowHeader)){var A=F._grid.normalize(F.resizeHandlePosition());if(G.ref.intersects(A)){if(!F.resizeHintPosition()){z.push(this.renderResizeHandle())}}}var H=[w.pane];if(x.hasColumnHeader){H.push(w.top)}if(x.hasRowHeader){H.push(w.left)}return k.dom.element("div",{style:x.style,className:H.join(" ")},z)},headerClassName:function(w,A){var z=this._selectedHeaders;var B;var y;if(A==="row"){B=z.rows[w];y=z.allRows}else{B=z.cols[w];y=z.allCols}var x=B||(z.all?"full":y?"partial":"none");if(x){x="k-selection-"+x}return x},renderData:function(){var A=this._sheet;var C=this._currentView;var E=k.dom.element("div",{className:s.classNames.data,style:{position:"relative",left:C.columnOffset+"px",top:C.rowOffset+"px"}});var B=this._currentRect;var x=k.spreadsheet.draw.doLayout(A,C.ref,{forScreen:true}),w;var y=A._showGridLines;if(y){w=null;x.xCoords.forEach(function(F){if(F!==w){w=F;E.children.push(k.dom.element("div",{className:j.vaxis,style:{left:F+"px",height:B.height+"px",borderColor:A.gridLinesColor()}}))}});w=null;x.yCoords.forEach(function(F){if(F!==w){w=F;E.children.push(k.dom.element("div",{className:j.haxis,style:{top:F+"px",width:B.width+"px",borderColor:A.gridLinesColor()}}))}})}var D={},z={};x.cells.forEach(function(F){var H=z[F.col]||(z[F.col]={});var G=D[F.row]||(D[F.row]={});c(E.children,F,null,H,G,y)});return E},renderResizeHandle:function(){var x=this._sheet;var z=x.resizeHandlePosition();var w=this._rectangle(z);var A=[s.classNames.resizeHandle];var y;if(z.col!==-Infinity){y={height:this._grid.headerHeight+"px",width:e+"px",left:w.right-e/2+"px",top:"0px"};A.push(r.horizontalResize)}else{y={height:e+"px",width:this._grid.headerWidth+"px",top:w.bottom-e/2+"px",left:"0px"};A.push(r.verticalResize)}return k.dom.element("div",{className:A.join(" "),style:y})},filterIconRect:function(y){var w=16;var x=3;return new k.spreadsheet.Rectangle(y.right-w-x,y.top+x,w,w)},renderFilterHeaders:function(){var x=this._sheet;var w=[];var B=o.classNames;var z=x.filter();function y(C){return k.dom.element("span",{className:B.icon+" "+C})}function A(I,C,E){var H={left:C.left+"px",top:C.top+"px"};var D=z&&z.columns.some(function(J){return J.index===E});var G=I.filterButton;if(D){G+=" "+I.filterButtonActive}var F=k.dom.element("span",{className:G,style:H},[y(I.iconFilterDefault)]);return F}if(z){this._addDiv(w,z.ref,B.filterRange)}x.forEachFilterHeader(this._currentView.ref,function(G){var F=this._rectangle(G);var C=this.filterIconRect(F);var E=this._sheet.filterColumn(G);var D=A(B,C,E);w.push(D)}.bind(this));return k.dom.element("div",{className:B.filterHeadersWrapper},w)},renderEditorSelection:function(){var y=s.classNames;var w=this._sheet;var x=[];w._formulaSelections.forEach(function(z){var A=z.ref;if(A===k.spreadsheet.NULLREF){return}this._addDiv(x,A,y.selectionHighlight+" "+z.colorClass)}.bind(this));return k.dom.element("div",{className:y.selectionWrapper},x)},renderSelection:function(){var D=s.classNames;var B=[];var z=[D.activeCell];var w=[D.selection];var y=this._sheet;var x=y.activeCell().toRangeRef();var C=this._activeFormulaColor();var A=y.select();z=z.concat(C,this._directionClasses(x));w=w.concat(C);if(y.singleCellSelection()){z.push(D.single)}if(A.size()===1){w.push("k-single-selection")}if(this._sheet.autoFillPunch()){w.push("k-dim-auto-fill-handle")}A.forEach(function(E){if(E!==k.spreadsheet.NULLREF){this._addDiv(B,E,w.join(" "))}}.bind(this));this._addTable(B,x,z.join(" "));return k.dom.element("div",{className:D.selectionWrapper},B)},renderAutoFill:function(){var z=[];if(this._sheet.autoFillInProgress()){var x=this._sheet.autoFillRef();var B=this._sheet.autoFillPunch();var C=this._sheet._autoFillDirection;this._addDiv(z,x,"k-auto-fill");if(B){this._addDiv(z,B,"k-auto-fill-punch")}else{if(C!==undefined){var A,w;switch(C){case 0:A=x.bottomRight;w="k-auto-fill-br-hint";break;case 1:A=x.bottomRight;w="k-auto-fill-br-hint";break;case 2:A=new h(x.topLeft.row,x.bottomRight.col);w="k-auto-fill-tr-hint";break;case 3:A=new h(x.bottomRight.row,x.topLeft.col);w="k-auto-fill-bl-hint";break}var D=k.dom.element("span",{className:"k-tooltip"},[k.dom.text(this._sheet._autoFillHint)]);var y=this._addDiv(z,A,w);if(y){y.children.push(D)}}}}return k.dom.element("div",{className:s.classNames.autoFillWrapper},z)},_addDiv:function(z,y,x){var w=this._currentView,A;if(w.ref.intersects(y)){A=this._rectangle(y).resize(1,1).toDiv(x);z.push(A)}return A},_addTable:function(D,C,B){var y=this;var A=y._sheet;var w=y._currentView;if(w.ref.intersects(C)){var z=y._rectangle(C);var x=y._sheet.activeCellCustomEditor();A.forEach(C.collapse(),function(H,F,E){E.left=z.left;E.top=z.top;E.width=z.width;E.height=z.height;c(D,E,B,null,null,true);if(x){var G=k.dom.element("div",{className:"k-button k-spreadsheet-editor-button",style:{left:E.left+E.width+"px",top:E.top+"px",height:E.height+"px"}});if(x.icon){G.children.push(k.dom.element("span",{className:"k-icon "+x.icon}))}D.push(G)}})}},_activeFormulaColor:function(){var x;var w=[];if(this._sheet.isInEditMode()){x=this._sheet._formulaSelections.filter(function(y){return y.active&&y.type=="ref"})[0];if(x){w.push(x.colorClass)}}return w},_directionClasses:function(w){var y=[];var z=s.classNames;var x=this._currentView.ref;if(!w.move(0,-1).intersects(x)){y.push(z.left)}if(!w.move(-1,0).intersects(x)){y.push(z.top)}if(!w.move(0,1).intersects(x)){y.push(z.right)}if(!w.move(1,0).intersects(x)){y.push(z.bottom)}return y},_rectangle:function(w){return this._grid.boundingRectangle(w.toRangeRef()).offset(-this._currentView.mergedCellLeft,-this._currentView.mergedCellTop)}});k.spreadsheet.View=o;k.spreadsheet.Pane=s;k.spreadsheet.drawCell=c;f.extend(true,o,{classNames:r});f.extend(true,s,{classNames:j})}(window.kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/customeditors",["kendo.core","kendo.popup","kendo.calendar","kendo.listview","spreadsheet/sheet"],a)}(function(){(function(c){if(c.support.browser.msie&&c.support.browser.version<9){return}var a={};var b=c.spreadsheet.registerEditor=function(d,e){a[d]=e};c.spreadsheet.Sheet.prototype.activeCellCustomEditor=function(){var d=this.activeCell().first();if(this.range(d).enable()){var g=this.validation(d);var e=this._properties.get("editor",this._grid.cellRefIndex(d));var f;if(e!=null){f=a[e]}else{if(g&&g.showButton){e="_validation_"+g.dataType;f=a[e]}}if(typeof f=="function"){f=a[e]=f()}return f}};b("_validation_date",function(){var g,h,d;function f(){if(!h){h=$("<div>").kendoCalendar();d=$("<div>").kendoPopup();h.appendTo(d);h=h.getKendoCalendar();d=d.getKendoPopup();h.bind("change",function(){d.close();var i=h.value();if(!g.range.format()){g.range.format("yyyy-mm-dd")}g.callback(c.spreadsheet.dateToNumber(i))})}d.setOptions({anchor:g.view.element.find(".k-spreadsheet-editor-button")})}function e(){f();var j=g.range.value();if(j!=null){h.value(c.spreadsheet.numberToDate(j))}else{h.value(null)}var l=g.validation;if(l){var k=c.ui.Calendar.fn.options.min;var i=c.ui.Calendar.fn.options.max;if(/^(?:greaterThan|between)/.test(l.comparerType)){k=c.spreadsheet.numberToDate(l.from.value)}if(l.comparerType=="between"){i=c.spreadsheet.numberToDate(l.to.value)}if(l.comparerType=="lessThan"){i=c.spreadsheet.numberToDate(l.from.value)}h.setOptions({disableDates:function(m){var o=l.from?l.from.value|0:0;var n=l.to?l.to.value|0:0;m=c.spreadsheet.dateToNumber(m)|0;return !c.spreadsheet.validation.validationComparers[l.comparerType](m,o,n)},min:k,max:i})}else{h.setOptions({disableDates:null,min:null,max:null})}d.open()}return{edit:function(i){g=i;e()},icon:"k-i-calendar"}});b("_validation_list",function(){var g,h,d;function f(){if(!h){h=$("<ul class='k-list k-reset'/>").kendoStaticList({template:"#:value#",selectable:true,autoBind:false});d=$("<div>").kendoPopup();h.appendTo(d);d=d.getKendoPopup();h=h.getKendoStaticList();h.bind("change",function(){d.close();var i=h.value()[0];if(i){g.callback(i.value)}})}d.setOptions({anchor:g.view.element.find(".k-spreadsheet-editor-button")})}function e(){f();var i=g.validation.from.value;var j=[];if(i){i.each(function(l){j.push({value:l})})}var k=new c.data.DataSource({data:j});h.setDataSource(k);k.read();d.open()}return{edit:function(i){g=i;e()},icon:"k-i-arrow-60-down"}})}(window.kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/grid",["kendo.core","spreadsheet/references"],a)}(function(){(function(f){if(f.support.browser.msie&&f.support.browser.version<9){return}var g=f.spreadsheet.CellRef;var b=f.spreadsheet.RangeRef;var e=f.spreadsheet.UnionRef;var c=f.Class.extend({init:function(k,j,i,h){this.left=k;this.width=i;this.right=k+i;this.top=j;this.height=h;this.bottom=j+h},offset:function(i,h){return new c(this.left+i,this.top+h,this.width,this.height)},resize:function(i,h){return new c(this.left,this.top,this.width+i,this.height+h)},intersects:function(h,i){return this.left<h&&h<this.left+this.width&&this.top<i&&i<this.top+this.height},toDiv:function(h){return f.dom.element("div",{className:h,style:{width:this.width+"px",height:this.height+"px",top:this.top+"px",left:this.left+"px"}})}});var a=f.Class.extend({init:function(l,k,i,m,h,j){this.rowCount=i;this.columnCount=m;this._columns=k;this._rows=l;this._headerHeight=h;this._headerWidth=j},isAxis:function(j){j=j.toRangeRef();var i=j.topLeft;var h=j.bottomRight;return i.row===0&&h.row===this.rowCount-1||i.col===0&&h.col===this.columnCount-1},width:function(i,h){return this._columns.sum(i,h)},height:function(i,h){return this._rows.sum(i,h)},totalHeight:function(){return this._rows.total+this._headerHeight},totalWidth:function(){return this._columns.total+this._headerWidth},index:function(i,h){return h*this.rowCount+i},cellRef:function(h){return new g(h%this.rowCount,h/this.rowCount>>0)},rowRef:function(h){return new b(new g(h,0),new g(h,this.columnCount-1))},colRef:function(h){return new b(new g(0,h),new g(this.rowCount-1,h))},cellRefIndex:function(h){return this.index(h.row,h.col)},normalize:function(h){if(h instanceof b){return new b(this.normalize(h.topLeft),this.normalize(h.bottomRight)).setSheet(h.sheet,h.hasSheet())}if(h instanceof e){return h.map(function(i){return this.normalize(i)},this)}if(h instanceof g){h=h.clone();h.col=Math.max(0,Math.min(this.columnCount-1,h.col));h.row=Math.max(0,Math.min(this.rowCount-1,h.row))}return h},rectangle:function(j){var i=this.normalize(j.topLeft);var h=this.normalize(j.bottomRight);return new c(this.width(0,i.col-1),this.height(0,i.row-1),this.width(i.col,h.col),this.height(i.row,h.row))},pane:function(h){return new d(new f.spreadsheet.PaneAxis(this._rows,h.row,h.rowCount,this._headerHeight),new f.spreadsheet.PaneAxis(this._columns,h.column,h.columnCount,this._headerWidth),this)},rangeDimensions:function(h){return{rows:this._rows.values.iterator(h.topLeft.row,h.bottomRight.row),columns:this._columns.values.iterator(h.topLeft.col,h.bottomRight.col)}},forEach:function(l,m){var k=this.normalize(l.topLeft);var j=this.normalize(l.bottomRight);for(var i=k.col;i<=j.col;i++){for(var h=k.row;h<=j.row;h++){m(new g(h,i))}}},trim:function(i,p){var q=i.topLeft;var k=i.bottomRight;var l=q.row;var m=q.col;for(var r=q.col;r<=k.col;r++){var h=this.index(q.row,r);var j=this.index(k.row,r);var o=p.tree.intersecting(h,j);if(o.length){var n=this.cellRef(o[o.length-1].end);l=Math.max(l,n.row);m=r}}return new b(i.topLeft,new g(Math.min(l,i.bottomRight.row),m))}});var d=f.Class.extend({init:function(j,i,h){this.rows=j;this.columns=i;this._grid=h;this.headerHeight=j.headerSize;this.headerWidth=i.headerSize;this.hasRowHeader=i.hasHeader;this.hasColumnHeader=j.hasHeader},refresh:function(j,i){this.columns.viewSize(j);this.rows.viewSize(i);var h=this.columns.paneSegment();var k=this.rows.paneSegment();this.left=h.offset;this.top=k.offset;this.right=h.offset+h.length;this.bottom=k.offset+k.length;this.style={top:k.offset+"px",left:h.offset+"px",height:k.length+"px",width:h.length+"px"}},view:function(k,j){var i=this.rows.visible(j);var h=this.columns.visible(k);return{rows:i,columns:h,rowOffset:i.offset,columnOffset:h.offset,mergedCellLeft:h.start,mergedCellTop:i.start,ref:new b(new g(i.values.start,h.values.start),new g(i.values.end,h.values.end))}},contains:function(h){return this.rows.contains(h.topLeft.row,h.bottomRight.row)&&this.columns.contains(h.topLeft.col,h.bottomRight.col)},index:function(i,h){return this._grid.index(i,h)},boundingRectangle:function(h){return this._grid.rectangle(h)},cellRefIndex:function(h){return this._grid.cellRefIndex(h)},scrollBoundaries:function(i){var h=this.boundingRectangle(i);var j={top:Math.max(0,h.top-this.top+(this.hasColumnHeader?0:this.headerHeight)),left:Math.max(0,h.left-this.left+(this.hasRowHeader?0:this.headerWidth)),right:h.right-this.columns._viewSize+this.headerWidth,bottom:h.bottom-this.rows._viewSize+this.headerHeight};var l=this.columns.defaultValue/2;var k=this.rows.defaultValue/2;j.scrollTop=j.top-k;j.scrollBottom=j.bottom+k;j.scrollLeft=j.left-l;j.scrollRight=j.right+l;return j}});f.spreadsheet.Grid=a;f.spreadsheet.PaneGrid=d;f.spreadsheet.Rectangle=c}(kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/axis",["kendo.core"],a)}(function(){(function(c){if(c.support.browser.msie&&c.support.browser.version<9){return}var a=c.Class.extend({init:function(d,e){this._value=e;this._count=d;this.values=new c.spreadsheet.RangeList(0,d-1,e);this._hidden=new c.spreadsheet.RangeList(0,d-1,0);this.scrollBarSize=c.support.scrollbar();this._refresh()},adjust:function(e,d){if(d<0){this.values.copy(e-d,this._count-1,e);this._hidden.copy(e-d,this._count-1,e)}else{this.values.copy(e,this._count,e+d);this._hidden.copy(e,this._count,e+d);this.values.value(e,e+d-1,this._value);this._hidden.value(e,e+d-1,0)}this._refresh()},toJSON:function(k,f){var g=[];var h=this.values.iterator(0,this._count-1);for(var e=0;e<this._count;e++){var j=h.at(e);if(j===this._value){continue}var d=f[e];if(d===undefined){d=g.length;var i={index:e};i[k]=j;g.push(i);f[e]=d}}return g},fromJSON:function(h,e){for(var d=0;d<e.length;d++){var g=e[d][h];var f=e[d].index;if(f===undefined){f=d}this.value(f,f,g)}},hide:function(d){if(!this.hidden(d)){var e=this.value(d,d);this._hidden.value(d,d,e);this.value(d,d,0)}},hidden:function(d){return this._hidden.value(d,d)!==0},includesHidden:function(e,d){return this._hidden.intersecting(e,d).length>1},nextVisible:function(f,g){var d=this._count-1;if(f===d){return g?f+1:f}f+=1;var e=this._hidden.intersecting(f,f)[0];if(e.value!==0){if(e.end===d){return f-1}else{return e.end+1}}else{return f}},nextPage:function(e,d){return this.index(this.sum(0,e-1)+d)},prevPage:function(e,d){return this.index(this.sum(0,e)-d)},firstVisible:function(){var d=this._hidden.first();if(d.value===0){return 0}else{return d.end+1}},lastVisible:function(){var d=this._hidden.last();if(d.value===0){return this._count-1}else{return d.start-1}},prevVisible:function(e,f){if(e===0){return f?-1:0}e-=1;var d=this._hidden.intersecting(e,e)[0];if(d.value!==0){if(d.start===0){return e+1}else{return d.start-1}}else{return e}},unhide:function(d){if(this.hidden(d)){var e=this._hidden.value(d,d);this._hidden.value(d,d,0);this.value(d,d,e)}},value:function(f,d,e){if(e!==undefined){this.values.value(f,d,e);this._refresh()}else{return this.values.iterator(f,d).at(0)}},sum:function(h,e){var f=this.values.iterator(h,e);var g=0;for(var d=h;d<=e;d++){g+=f.at(d)}return g},visible:function(e,f){var n=null;var j=null;var i=false;if(f>=this.total+this.scrollBarSize){i=true}var d=this._pixelValues.intersecting(e,f);n=d[0];j=d[d.length-1];if(!n){return{values:this.values.iterator(0,0),offset:0}}var k=e-n.start;var m=(k/n.value.value>>0)+n.value.start;var g=k-(m-n.value.start)*n.value.value;var l=f-j.start;var h=(l/j.value.value>>0)+j.value.start;if(h>j.value.end){h=j.value.end}if(i){g+=j.value.value-(l-(h-j.value.start)*j.value.value)}g=Math.min(-g,0);return{values:this.values.iterator(m,h),offset:g}},index:function(f){var d=0;var e=this.values.iterator(0,this._count-1);var g=e.at(0);while(g<f&&d<this._count-1){g+=e.at(++d)}return d},_refresh:function(){var d=0;this._pixelValues=this.values.map(function(f){var g=d;d+=(f.end-f.start+1)*f.value;var e=d-1;return new c.spreadsheet.ValueRange(g,e,f)});this.total=d},getState:function(){return{values:this.values.getState(),hidden:this._hidden.getState()}},setState:function(d){this.values.setState(d.values);this._hidden.setState(d.hidden);this._refresh()}});var b=c.Class.extend({init:function(e,g,f,d){this._axis=e;this._start=g;this._count=f;this.hasHeader=g===0;this.headerSize=d;this.defaultValue=e._value;this.frozen=f>0},viewSize:function(d){this._viewSize=d},sum:function(e,d){return this._axis.sum(e,d-1)},start:function(){return this.sum(0,this._start)},size:function(){return this.sum(this._start,this._start+this._count)},index:function(d,e){return this._axis.index(d+(this.frozen?0:e)-this.headerSize)},paneSegment:function(){var e=this.start();var d;if(!this.hasHeader){e+=this.headerSize}if(this.frozen){d=this.size();if(this.hasHeader){d+=this.headerSize}else{d-=this.headerSize}}else{d=this._viewSize-e}return{offset:e,length:d}},visible:function(f){var g=this.start();var e;if(this.frozen){e=this.size();if(!this.hasHeader){e-=this.headerSize}}else{e=this._viewSize-g-this.headerSize;g+=f}var d=this._axis.visible(g,g+e-1);if(this.frozen){d.offset=0}d.start=g;if(this.hasHeader){d.offset+=this.headerSize;d.start-=this.headerSize}return d},contains:function(e,d){if(this.frozen){if(e>this._start+this._count){return false}if(d<this._start){return false}return true}else{return d>=this._start}}});c.spreadsheet.Axis=a;c.spreadsheet.PaneAxis=b}(kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/filter",["kendo.core","kendo.data"],a)}(function(){(function(f){if(f.support.browser.msie&&f.support.browser.version<9){return}var a=f.spreadsheet.Filter=f.Class.extend({prepare:function(){},value:function(k){return k.value},matches:function(){throw new Error("The 'matches' method is not implemented.")},toJSON:function(){throw new Error("The 'toJSON' method is not implemented.")}});a.create=function(k){var m=k.filter;if(!m){throw new Error("Filter type not specified.")}var l=f.spreadsheet[m.charAt(0).toUpperCase()+m.substring(1)+"Filter"];if(!l){throw new Error("Filter type not recognized.")}return new l(k)};f.spreadsheet.ValueFilter=a.extend({_values:[],_dates:[],_blanks:false,init:function j(k){if(k.values!==undefined){this._values=k.values}if(k.blanks!==undefined){this._blanks=k.blanks}if(k.dates!==undefined){this._dates=k.dates}},value:function(k){var m=k.value;if(this._dates.length>0&&k.format&&typeof m==="number"){var l=f.spreadsheet.formatting.type(m,k.format);if(l==="date"){m=f.spreadsheet.numberToDate(m)}}return m},matches:function(k){if(k===null||k===undefined){return this._blanks}if(k instanceof Date){return this._dates.some(function(l){return l.year===k.getFullYear()&&(l.month===undefined||l.month===k.getMonth())&&(l.day===undefined||l.day===k.getDate())&&(l.hours===undefined||l.hours===k.getHours())&&(l.minutes===undefined||l.minutes===k.getMinutes())&&(l.seconds===undefined||l.seconds===k.getSeconds())})}return this._values.indexOf(k)>=0},toJSON:function(){return{filter:"value",blanks:this._blanks,values:this._values.slice(0)}}});f.spreadsheet.CustomFilter=a.extend({_logic:"and",init:function g(k){if(k.logic!==undefined){this._logic=k.logic}if(k.criteria===undefined){throw new Error("Must specify criteria.")}this._criteria=k.criteria;var l=f.data.Query.filterExpr({logic:this._logic,filters:this._criteria}).expression;this._matches=new Function("d","return "+l)},matches:function(k){if(k===null){return false}return this._matches(k)},value:function(k){var m=k.value;var l=this._criteria[0].value;var n=l instanceof Date?"date":typeof l;var o=typeof m;if(k.format){o=f.spreadsheet.formatting.type(m,k.format)}if(o!=n){if(n=="string"){if(k.format){m=f.spreadsheet.formatting.text(m,k.format)}m=m+""}}else{if(o=="date"){m=f.spreadsheet.numberToDate(m)}}return m},toJSON:function(){return{filter:"custom",logic:this._logic,criteria:this._criteria}}});f.spreadsheet.TopFilter=a.extend({init:function c(k){this._type=k.type;this._value=k.value;this._values=[]},prepare:function(l){var k=l.map(this.value).sort().filter(function(o,n,p){return n===0||o!==p[n-1]});if(this._type==="topNumber"||this._type=="topPercent"){k.sort(function(n,o){return o-n})}else{k.sort(function(n,o){return n-o})}var m=this._value;if(this._type==="topPercent"||this._type==="bottomPercent"){m=k.length*m/100>>0}this._values=k.slice(0,m)},matches:function(k){return this._values.indexOf(k)>=0},toJSON:function(){return{filter:"top",type:this._type,value:this._value}}});f.spreadsheet.DynamicFilter=a.extend({init:function d(k){this._type=k.type;this._predicate=this[k.type];if(typeof this._predicate!=="function"){throw new Error("DynamicFilter type '"+k.type+"' not recognized.")}},value:function(k){var m=k.value;if(k.format){var l=f.spreadsheet.formatting.type(m,k.format);if(l==="date"){m=f.spreadsheet.numberToDate(m)}}return m},prepare:function(k){var m=0;var n=0;for(var l=0;l<k.length;l++){var o=this.value(k[l]);if(typeof o==="number"){m+=o;n++}}if(n>0){this._average=m/n}else{this._average=0}},matches:function(k){return this._predicate(k)},aboveAverage:function(k){if(k instanceof Date){k=f.spreadsheet.dateToNumber(k)}if(typeof k!=="number"){return false}return k>this._average},belowAverage:function(k){if(k instanceof Date){k=f.spreadsheet.dateToNumber(k)}if(typeof k!=="number"){return false}return k<this._average},tomorrow:function(l){if(l instanceof Date){var k=f.date.addDays(f.date.today(),1);return f.date.getDate(l).getTime()===k.getTime()}return false},today:function(k){if(k instanceof Date){return f.date.isToday(k)}return false},yesterday:function(l){if(l instanceof Date){var k=f.date.addDays(f.date.today(),-1);return f.date.getDate(l).getTime()===k.getTime()}return false},nextWeek:function(k){return i(f.date.addDays(f.date.today(),7),k)},thisWeek:function(k){return i(f.date.today(),k)},lastWeek:function(k){return i(f.date.addDays(f.date.today(),-7),k)},nextMonth:function(k){return h(k,1)},thisMonth:function(k){return h(k,0)},lastMonth:function(k){return h(k,-1)},nextQuarter:function(l){if(l instanceof Date){var k=f.date.today();var m=b(l)-b(k);return m===1&&k.getFullYear()===l.getFullYear()||m==-3&&k.getFullYear()+1===l.getFullYear()}return false},thisQuarter:function(l){if(l instanceof Date){var k=f.date.today();var m=b(l)-b(k);return m===0&&k.getFullYear()===l.getFullYear()}return false},lastQuarter:function(l){if(l instanceof Date){var k=f.date.today();var m=b(k)-b(l);return m===1&&k.getFullYear()===l.getFullYear()||m==-3&&k.getFullYear()-1===l.getFullYear()}return false},nextYear:function(k){return e(k,1)},thisYear:function(k){return e(k,0)},lastYear:function(k){return e(k,-1)},yearToDate:function(l){if(l instanceof Date){var k=f.date.today();return l.getFullYear()===k.getFullYear()&&l<=k}return false},toJSON:function(){return{filter:"dynamic",type:this._type}}});[1,2,3,4].forEach(function(k){f.spreadsheet.DynamicFilter.prototype["quarter"+k]=function(l){if(l instanceof Date){return b(l)===k}return false}});f.cultures["en-US"].calendar.months.names.forEach(function(l,k){f.spreadsheet.DynamicFilter.prototype[l.toLowerCase()]=function(m){if(m instanceof Date){return m.getMonth()===k}return false}});function b(k){var l=k.getMonth()+1;if(l>=1&&l<=3){return 1}else{if(l>=4&&l<=6){return 2}else{if(l>=7&&l<=9){return 3}else{return 4}}}}function e(l,m){if(l instanceof Date){var k=f.date.today();k.setFullYear(k.getFullYear()+m);return k.getFullYear()===l.getFullYear()}return false}function h(l,m){if(l instanceof Date){var k=f.date.firstDayOfMonth(f.date.today());k.setMonth(k.getMonth()+m,1);return k.getTime()===f.date.firstDayOfMonth(l).getTime()}return false}function i(l,k){if(k instanceof Date){var n=f.date.dayOfWeek(f.date.getDate(l),1);var m=f.date.dayOfWeek(f.date.getDate(k),1);return n.getTime()===m.getTime()}return false}}(kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/sorter",["kendo.core"],a)}(function(){(function(b){if(b.support.browser.msie&&b.support.browser.version<9){return}var a=b.Class.extend({init:function(d,c){this._grid=d;this._lists=c},indices:function(c,f,e,g){var d=a.ascendingComparer;if(e===false){d=a.descendingComparer}return f.sortedIndices(this._grid.cellRefIndex(c.topLeft),this._grid.cellRefIndex(c.bottomRight),d,g)},sortBy:function(d,f,i,g,k){var e=this.indices(d.toColumn(f),i,g,k);for(var l=d.topLeft.col;l<=d.bottomRight.col;l++){var c=this._grid.index(d.topLeft.row,l);var h=this._grid.index(d.bottomRight.row,l);for(var j=0;j<this._lists.length;j++){if(c<this._lists[j].lastRangeStart()){this._lists[j].sort(c,h,e)}}}return e}});a.ascendingComparer=function(d,c){if(d===null&&c===null){return 0}if(d===null){return 1}if(c===null){return -1}var f=typeof d;var e=typeof c;if(f==="number"){if(e==="number"){return d-c}else{return -1}}if(f==="string"){switch(e){case"number":return 1;case"string":return d.localeCompare(c);default:return -1}}if(f==="boolean"){switch(e){case"number":return 1;case"string":return 1;case"boolean":return d-c;default:return -1}}if(d instanceof b.spreadsheet.calc.runtime.CalcError){if(c instanceof b.spreadsheet.calc.runtime.CalcError){return 0}else{return 1}}throw new Error("Cannot compare "+d+" and "+c)};a.descendingComparer=function(d,c){if(d===null&&c===null){return 0}if(d===null){return 1}if(c===null){return -1}return a.ascendingComparer(c,d)};b.spreadsheet.Sorter=a}(kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/numformat",["spreadsheet/calc","kendo.dom"],a)}(function(){if(kendo.support.browser.msie&&kendo.support.browser.version<9){return}var h=kendo.spreadsheet.calc;var g=kendo.dom;var a=/^\[(black|green|white|blue|magenta|yellow|cyan|red)\]/i;var c=/^\[(<=|>=|<>|<|>|=)(-?[0-9.]+)\]/;function d(w){w=h.InputStream(w);var y=[],u=false,t;while(!w.eof()){var v=q();y.push(v);if(v.cond){u=true}}if(!u){if(y.length==1){y[0].cond="num"}else{if(y.length==2){y[0].cond={op:">=",value:0};y[1].cond={op:"<",value:0}}else{if(y.length>=3){y[0].cond={op:">",value:0};y[1].cond={op:"<",value:0};y[2].cond={op:"=",value:0};if(y.length>3){y[3].cond="text";y=y.slice(0,4)}}}}}return y;function r(){var A=w.skip(a);if(A){return A[1].toLowerCase()}}function z(){var A=w.skip(c);if(A){var B=parseFloat(A[2]);if(!isNaN(B)){return{op:A[1],value:B}}}}function s(){var C=[],A,B=null;while(!w.eof()&&(A=p())){if(A.type=="date"){if(B&&/^(el)?time$/.test(B.type)&&B.part=="h"&&A.part=="m"&&A.format<3){A.type="time"}}else{if(/^(el)?time$/.test(A.type)&&A.part=="s"){if(B&&B.type=="date"&&B.part=="m"&&B.format<3){B.type="time"}}}if(!/^(?:str|space|fill)$/.test(A.type)){B=A}C.push(A)}return C}function x(B){if(B.type!="date"||B.part=="m"&&B.format<3){var A=w.skip(/^\.(0+)/);if(A){B.fraction=A[1].length;if(B.type=="date"){B.type="time"}}}return B}function p(){var B,A;if(A=w.skip(/^([#0?]+)(?:,([#0?]+))+/)){return{type:"digit",sep:true,format:A[1]+A[2],decimal:t}}if(A=w.skip(/^[#0?]+/)){return{type:"digit",sep:false,format:A[0],decimal:t}}if(A=w.skip(/^(e)([+-])/i)){return{type:"exp",ch:A[1],sign:A[2]}}if(A=w.skip(/^(d{1,4}|m{1,5}|yyyy|yy)/i)){A=A[1].toLowerCase();return x({type:"date",part:A.charAt(0),format:A.length})}if(A=w.skip(/^(hh?|ss?)/i)){A=A[1].toLowerCase();return x({type:"time",part:A.charAt(0),format:A.length})}if(A=w.skip(/^\[(hh?|mm?|ss?)\]/i)){A=A[1].toLowerCase();return x({type:"eltime",part:A.charAt(0),format:A.length})}if(A=w.skip(/^(am\/pm|a\/p)/i)){A=A[1].split("/");return{type:"ampm",am:A[0],pm:A[1]}}switch(B=w.next()){case";":return null;case"\\":return{type:"str",value:w.next()};case'"':return{type:"str",value:w.readEscaped(B)};case"@":return{type:"text"};case"_":return{type:"space",value:w.next()};case"*":return{type:"fill",value:w.next()};case".":if(w.lookingAt(/^\s*[#0?]/)){t=true;return{type:"dec"}}return{type:"str",value:"."};case"%":return{type:"percent"};case",":return{type:"comma"}}return{type:"str",value:B}}function q(){t=false;var A=r(),B=z();if(!A&&B){A=r()}return{color:A,cond:B,body:s()}}}function b(s){return s.map(r).join(";");function r(u){var t="";if(u.color){t+="["+u.color+"]"}if(u.cond){if(!(u.cond=="text"||u.cond=="num")){t+="["+u.cond.op+u.cond.value+"]"}}t+=u.body.map(q).join("");return t}function p(t,u){if(u.fraction){t+="."+e("",u.fraction,"0")}return t}function q(t){if(t.type=="digit"){if(t.sep){return t.format.charAt(0)+","+t.format.substr(1)}else{return t.format}}else{if(t.type=="exp"){return t.ch+t.sign}else{if(t.type=="date"||t.type=="time"){return p(e("",t.format,t.part),t)}else{if(t.type=="eltime"){return p("["+e("",t.format,t.part)+"]",t)}else{if(t.type=="ampm"){return t.am+"/"+t.pm}else{if(t.type=="str"){return JSON.stringify(t.value)}else{if(t.type=="text"){return"@"}else{if(t.type=="space"){return"_"+t.value}else{if(t.type=="fill"){return"*"+t.value}else{if(t.type=="dec"){return"."}else{if(t.type=="percent"){return"%"}else{if(t.type=="comma"){return","}}}}}}}}}}}}}}function m(q,p){q.forEach(function(w){var x=p;if(w.cond=="text"){return}var r=w.body,v=false,u=r.length;while(x!==0&&--u>=0){var s=r[u];if(s.type=="digit"){if(s.decimal){v=true;if(x>0){s.format+=e("",x,"0")}else{if(x<0){var t=s.format.length;s.format=s.format.substr(0,t+x);x+=t-s.format.length}}if(s.format.length===0){r.splice(u,1);while(--u>=0){s=r[u];if(s.type=="digit"&&s.decimal){++u;break}if(s.type=="dec"){r.splice(u,1);break}}}}if(x>0){break}}}if(!v&&x>0){r.splice(u+1,0,{type:"dec"},{type:"digit",sep:false,decimal:true,format:e("",x,"0")})}})}function j(q){var p=0;return{next:function(){return q[p++]},eof:function(){return p>=q.length},ahead:function(t,r){if(p+t<=q.length){var s=r.apply(null,q.slice(p,p+t));if(s){p+=t}return s}},restart:function(){p=0}}}function i(C){var A=j(C.body);var B=false;var D=false;var s=false;var E=0;var u=0;var p="";var y=false;var w=0;var t=[],x=[];var r=C.cond;var q="";if(r=="text"){q="if (typeof value == 'string' || value instanceof kendo.spreadsheet.CalcError) { "}else{if(r=="num"){q="if (typeof value == 'number') { "}else{if(r){var v=r.op=="="?"==":r.op;q="if (typeof value == 'number' && value "+v+" "+r.value+") { ";p+="value = Math.abs(value); "}}}if(C.color){p+="result.color = "+JSON.stringify(C.color)+"; "}function z(H,G){if(H.type=="digit"&&G.type=="comma"||H.type=="comma"&&H.hidden&&G.type=="comma"){G.hidden=true;u++}}while(!A.eof()){A.ahead(2,z);var F=A.next();if(F.type=="percent"){E++}else{if(F.type=="digit"){if(F.decimal){w+=F.format.length;x.push(F.format)}else{t.push(F.format);if(F.sep){y=true}}}else{if(F.type=="time"){D=true}else{if(F.type=="date"){B=true}else{if(F.type=="ampm"){s=D=true}}}}}}if(E>0){p+="value *= "+Math.pow(100,E)+"; "}if(u>0){p+="value /= "+Math.pow(1000,u)+"; "}if(t.length){p+="var intPart = runtime.formatInt(culture, value, "+JSON.stringify(t)+", "+w+", "+y+"); "}if(x.length){p+="var decPart = runtime.formatDec(value, "+JSON.stringify(x)+", "+w+"); "}if(t.length||x.length){p+="type = 'number'; "}if(B){p+="var date = runtime.unpackDate(value); "}if(D){p+="var time = runtime.unpackTime(value); "}if(B||D){p+="type = 'date'; "}if(E>0||u>0||t.length||x.length||B||D){if(!q){q="if (typeof value == 'number') { "}}A.restart();while(!A.eof()){var F=A.next();if(F.type=="dec"){p+="output += culture.numberFormat['.']; "}else{if(F.type=="comma"&&!F.hidden){p+="output += ','; "}else{if(F.type=="percent"){p+="type = 'percent'; ";p+="output += culture.numberFormat.percent.symbol; "}else{if(F.type=="str"){p+="output += "+JSON.stringify(F.value)+"; "}else{if(F.type=="text"){p+="type = 'text'; ";p+="output += value; "}else{if(F.type=="space"){p+="if (output) result.body.push(output); ";p+="output = ''; ";p+="result.body.push({ type: 'space', value: "+JSON.stringify(F.value)+" }); "}else{if(F.type=="fill"){p+="output += runtime.fill("+JSON.stringify(F.value)+"); "}else{if(F.type=="digit"){p+="output += "+(F.decimal?"decPart":"intPart")+".shift(); "}else{if(F.type=="date"){p+="output += runtime.date(culture, date, "+JSON.stringify(F.part)+", "+F.format+"); "}else{if(F.type=="time"){p+="output += runtime.time(time, "+JSON.stringify(F.part)+", "+F.format+", "+s+", "+F.fraction+"); "}else{if(F.type=="eltime"){p+="output += runtime.eltime(value, "+JSON.stringify(F.part)+", "+F.format+", "+F.fraction+"); "}else{if(F.type=="ampm"){p+="output += time.hours < 12 ? "+JSON.stringify(F.am)+" : "+JSON.stringify(F.pm)+"; "}}}}}}}}}}}}}p+="if (output) result.body.push(output); ";p+="result.type = type; ";p+="return result; ";if(q){p=q+p+"}"}return p}var k=Object.create(null);var l=i({cond:"text",body:[{type:"text"}]});function o(s){var r=k[s];if(!r){var p=d(s);var q=p.map(i);q.push(l);q=q.join("\n");q="'use strict'; return function(value, culture){ if (!culture) culture = kendo.culture(); var output = '', type = null, result = { body: [] }; "+q+"; return result; };";r=k[s]=new Function("runtime",q)(f)}return r}var f={unpackDate:h.runtime.unpackDate,unpackTime:h.runtime.unpackTime,date:function(p,s,q,r){switch(q){case"d":switch(r){case 1:return s.date;case 2:return e(s.date,2,"0");case 3:return p.calendars.standard.days.namesAbbr[s.day];case 4:return p.calendars.standard.days.names[s.day]}break;case"m":switch(r){case 1:return s.month+1;case 2:return e(s.month+1,2,"0");case 3:return p.calendars.standard.months.namesAbbr[s.month];case 4:return p.calendars.standard.months.names[s.month];case 5:return p.calendars.standard.months.names[s.month].charAt(0)}break;case"y":switch(r){case 2:return s.year%100;case 4:return s.year}break}return"##"},time:function(s,r,v,q,w){var p,u;switch(r){case"h":p=e(q?s.hours%12||12:s.hours,v,"0");if(w){u=(s.minutes+(s.seconds+s.milliseconds/1000)/60)/60}break;case"m":p=e(s.minutes,v,"0");if(w){u=(s.seconds+s.milliseconds/1000)/60}break;case"s":p=e(s.seconds,v,"0");if(w){u=s.milliseconds/1000}break}if(u){p+=u.toFixed(w).replace(/^0+/,"")}return p},eltime:function(t,q,s,u){var p,r;switch(q){case"h":p=t*24;break;case"m":p=t*24*60;break;case"s":p=t*24*60*60;break}if(u){r=p-(p|0)}p=e(p|0,s,"0");if(r){p+=r.toFixed(u).replace(/^0+/,"")}return p},fill:function(p){return p},formatInt:function(r,y,t,v,B){y=y.toFixed(v).replace(/\..*$/,"");if(v>0){if(y==="0"){y=""}else{if(y==="-0"){y="-"}}}var q=y.length-1;var C=[];var u=0,w;function A(D){if(B&&u&&u%3===0&&/^[0-9]$/.test(D)){w=r.numberFormat[","]+w}w=D+w;u++}for(var s=t.length;--s>=0;){var x=t[s];w="";for(var p=x.length;--p>=0;){var z=x.charAt(p);if(q<0){if(z=="0"){A("0")}else{if(z=="?"){A(" ")}}}else{A(y.charAt(q--))}}if(s===0){while(q>=0){A(y.charAt(q--))}}C.unshift(w)}return C},formatDec:function(x,r,t){x=x.toFixed(t);var v=x.indexOf(".");if(v>=0){x=x.substr(v+1).replace(/0+$/,"")}else{x=""}var q=0;var z=[];for(var s=0;s<r.length;++s){var w=r[s];var u="";for(var p=0;p<w.length;++p){var y=w.charAt(p);if(q<x.length){u+=x.charAt(q++)}else{if(y=="0"){u+="0"}else{if(y=="?"){u+=" "}}}}z.push(u)}return z}};function e(r,q,p){r+="";while(r.length<q){r=p+r}return r}function n(s){var p=s.body;var t="";for(var q=0;q<p.length;++q){var r=p[q];if(typeof r=="string"){t+=r}else{if(r.type=="space"){t+=" "}}}return t}kendo.spreadsheet.formatting={compile:o,parse:d,format:function(v,w,q){var u=o(w)(v,q);var t=g.element("span");t.__dataType=u.type;var p=u.body;if(u.color){t.attr.style={color:u.color}}for(var r=0;r<p.length;++r){var s=p[r];if(typeof s=="string"){t.children.push(g.text(s))}else{if(s.type=="space"){t.children.push(g.element("span",{style:{visibility:"hidden"}},[g.text(s.value)]))}}}return t},text:function(r,s,p){var q=o(s)(r,p);return n(q)},textAndColor:function(r,s,p){var q=o(s)(r,p);return{text:n(q),color:q.color,type:q.type}},type:function(p,q){return o(q)(p).type},adjustDecimals:function(r,q){var p=d(r);m(p,q);return b(p)}}},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/runtime.functions",["spreadsheet/runtime","util/main"],a)}(function(){if(kendo.support.browser.msie&&kendo.support.browser.version<9){return}var p=kendo.util;var l=kendo.spreadsheet;var f=l.calc;var u=f.runtime;var U=u.defineFunction;var r=u.defineAlias;var P=u.CalcError;var o=l.RangeRef;var G=l.CellRef;var s=l.UnionRef;var d=u.Matrix;var C=l.Ref;var g=u.daysInMonth;var H=u.packDate;var O=u.unpackDate;var t=u.daysInYear;["abs","cos","sin","acos","asin","tan","atan","exp","sqrt"].forEach(function(W){U(W,Math[W]).args([["*n","number"]])});U("ln",Math.log).args([["*n","number"]]);U("log",function(W,X){return Math.log(W)/Math.log(X)}).args([["*num","number++"],["*base",["or","number++",["null",10]]],["?",["assert","$base != 1","DIV/0"]]]);U("log10",function(W){return Math.log(W)/Math.log(10)}).args([["*num","number++"]]);U("pi",function(){return Math.PI}).args([]);U("sqrtpi",function(W){return Math.sqrt(W*Math.PI)}).args([["*num","number+"]]);U("degrees",function(W){return 180*W/Math.PI%360}).args([["*radians","number"]]);U("radians",function(W){return Math.PI*W/180}).args([["*degrees","number"]]);function k(W){return(Math.exp(W)+Math.exp(-W))/2}U("cosh",k).args([["*num","number"]]);U("acosh",function(W){return Math.log(W+Math.sqrt(W-1)*Math.sqrt(W+1))}).args([["*num","number"],["?",["assert","$num >= 1"]]]);function c(W){return(Math.exp(W)-Math.exp(-W))/2}U("sinh",c).args([["*num","number"]]);U("asinh",function(W){return Math.log(W+Math.sqrt(W*W+1))}).args([["*num","number"]]);U("sec",function(W){return 1/Math.cos(W)}).args([["*num","number"]]);U("sech",function(W){return 1/k(W)}).args([["*num","number"]]);U("csc",function(W){return 1/Math.sin(W)}).args([["*num","number"]]);U("csch",function(W){return 1/c(W)}).args([["*num","number"]]);U("atan2",function(W,X){return Math.atan(X/W)}).args([["*x","divisor"],["*y","number"]]);function w(W){return c(W)/k(W)}U("tanh",w).args([["*num","number"]]);U("atanh",function(W){return Math.log(Math.sqrt(1-W*W)/(1-W))}).args([["*num",["and","number",["(between)",-1,1]]]]);U("cot",function(W){return 1/Math.tan(W)}).args([["*num","divisor"]]);U("coth",function(W){return 1/w(W)}).args([["*num","divisor"]]);U("acot",function(W){return Math.PI/2-Math.atan(W)}).args([["*num","number"]]);U("acoth",function(W){return Math.log((W+1)/(W-1))/2}).args([["*num","number"],["?",["or",["assert","$num < -1"],["assert","$num > 1"]]]]);U("power",function(X,W){return Math.pow(X,W)}).args([["*a","number"],["*b","number"]]);U("mod",function(X,W){return X%W}).args([["*a","number"],["*b","divisor"]]);U("quotient",function(X,W){return Math.floor(X/W)}).args([["*a","number"],["*b","divisor"]]);U("ceiling",function(W,X){return X?X*Math.ceil(W/X):0}).args([["*number","number"],["*significance","number"],["?",["assert","$significance >= 0 || $number < 0"]]]);U("ceiling.precise",function(W,X){X=Math.abs(X);return X?X*Math.ceil(W/X):0}).args([["*number","number"],["*significance",["or","number",["null",1]]]]);r("iso.ceiling","ceiling.precise");U("ceiling.math",function(W,X,Y){if(!X||!W){return 0}if(W<0&&(!Y&&X<0||Y&&X>0)){X=-X}return X?X*Math.ceil(W/X):0}).args([["*number","number"],["*significance",["or","number",["null","$number < 0 ? -1 : 1"]]],["*mode",["or","logical",["null",0]]]]);U("floor",function(W,X){return X?X*Math.floor(W/X):0}).args([["*number","number"],["*significance","number"],["?",["assert","$significance >= 0 || $number < 0"]]]);U("floor.precise",function(W,X){X=Math.abs(X);return X?X*Math.floor(W/X):0}).args([["*number","number"],["*significance",["or","number",["null",1]]]]);U("floor.math",function(W,X,Y){if(!X||!W){return 0}if(W<0&&(!Y&&X<0||Y&&X>0)){X=-X}return X?X*Math.floor(W/X):0}).args([["*number","number"],["*significance",["or","number",["null","$number < 0 ? -1 : 1"]]],["*mode",["or","logical",["null",0]]]]);U("int",Math.floor).args([["*number","number"]]);U("mround",function(W,X){return X?X*Math.round(W/X):0}).args([["*number","number"],["*multiple","number"]]);U("round",function(X,Y){var W=X<0?-1:1;if(W<0){X=-X}Y=Math.pow(10,Y);X*=Y;X=Math.round(X);return W*X/Y}).args([["*number","number"],["*digits","number"]]);U("roundup",function(W,X){X=Math.pow(10,X);W*=X;W=W<0?Math.floor(W):Math.ceil(W);return W/X}).args([["*number","number"],["*digits","number"]]);U("rounddown",function(W,X){X=Math.pow(10,X);W*=X;W=W<0?Math.ceil(W):Math.floor(W);return W/X}).args([["*number","number"],["*digits","number"]]);U("even",function(W){var X=W<0?Math.floor(W):Math.ceil(W);return X%2?X+(X<0?-1:1):X}).args([["*number","number"]]);U("odd",function(W){var X=W<0?Math.floor(W):Math.ceil(W);return X%2?X:X+(X<0?-1:1)}).args([["*number","number"]]);U("sign",function(W){return W<0?-1:W>0?1:0}).args([["*number","number"]]);function L(X,W){while(W){var Y=X%W;X=W;W=Y}return X}function b(X,W){return Math.abs(X*W)/L(X,W)}U("gcd",function(X){var W=X[0];for(var Y=1;Y<X.length;++Y){W=L(W,X[Y])}return W}).args([["numbers",["collect","number"]]]);U("lcm",function(X){var W=X[0];for(var Y=1;Y<X.length;++Y){W=b(W,X[Y])}return W}).args([["numbers",["collect","number"]]]);U("sum",function(W){return W.reduce(function(Y,X){return Y+X},0)}).args([["numbers",["collect","number"]]]);U("product",function(W){return W.reduce(function(X,Y){return X*Y},1)}).args([["numbers",["collect","number"]]]);U("sumproduct",function(Y,X){var W=0;Y.each(function(ac,ad,aa){if(typeof ac=="number"){for(var ab=0;ab<X.length;++ab){var Z=X[ab].get(ad,aa);if(typeof Z!="number"){return}ac*=Z}W+=ac}});return W}).args([["a1","matrix"],["+",["a2",["and","matrix",["assert","$a2.width == $a1.width"],["assert","$a2.height == $a1.height"]]]]]);U("sumsq",function(W){return W.reduce(function(Y,X){return Y+X*X},0)}).args([["numbers",["collect","number"]]]);U("sumx2my2",function(X,W){var Y=0;X.each(function(Z,ab,aa){var ac=W.get(ab,aa);if(typeof Z=="number"&&typeof ac=="number"){Y+=Z*Z-ac*ac}});return Y}).args([["a","matrix"],["b",["and","matrix",["assert","$b.width == $a.width"],["assert","$b.height == $a.height"]]]]);U("sumx2py2",function(X,W){var Y=0;X.each(function(Z,ab,aa){var ac=W.get(ab,aa);if(typeof Z=="number"&&typeof ac=="number"){Y+=Z*Z+ac*ac}});return Y}).args([["a","matrix"],["b",["and","matrix",["assert","$b.width == $a.width"],["assert","$b.height == $a.height"]]]]);U("sumxmy2",function(X,W){var Y=0;X.each(function(Z,ab,aa){var ac=W.get(ab,aa);if(typeof Z=="number"&&typeof ac=="number"){Y+=(Z-ac)*(Z-ac)}});return Y}).args([["a","matrix"],["b",["and","matrix",["assert","$b.width == $a.width"],["assert","$b.height == $a.height"]]]]);U("seriessum",function(X,aa,W,Y){var Z=0;Y.each(function(ab){if(typeof ab!="number"){throw new P("VALUE")}Z+=ab*Math.pow(X,aa);aa+=W});return Z}).args([["x","number"],["y","number"],["m","number"],["a","matrix"]]);U("min",function(W){return Math.min.apply(Math,W)}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length > 0","N/A"]]]);U("max",function(W){return Math.max.apply(Math,W)}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length > 0","N/A"]]]);U("counta",function(W){return W.length}).args([["values",["#collect","anyvalue"]]]);U("count",function(W){return W.length}).args([["numbers",["#collect","number"]]]);U("countunique",function(X){var Y=0,W=[];X.forEach(function(Z){if(W.indexOf(Z)<0){Y++;W.push(Z)}});return Y}).args([["values",["#collect","anyvalue"]]]);U("countblank",function(X){var Y=0;function Z(aa){if(aa==null||aa===""){Y++}}function W(ab){for(var ac=0;ac<ab.length;++ac){var aa=ab[ac];if(aa instanceof d){aa.each(Z,true)}else{Z(aa)}}}W(X);return Y}).args([["+",["args",["or","matrix","anyvalue"]]]]);U("iseven",function(W){return W%2===0}).args([["*number","number"]]);U("isodd",function(W){return W%2!==0}).args([["*number","number"]]);U("n",function(W){if(typeof W=="boolean"){return W?1:0}if(typeof W=="number"){return W}return 0}).args([["*value","anyvalue"]]);U("na",function(){return new P("N/A")}).args([]);function S(Y,aa){var ad=[],Z=0,W=Y[0];while(Z<Y.length){ad.push({matrix:Y[Z++],pred:x(Y[Z++])})}ROW:for(var ac=0;ac<W.height;++ac){COL:for(var X=0;X<W.width;++X){for(Z=0;Z<ad.length;++Z){var ab=ad[Z].matrix.get(ac,X);if(!ad[Z].pred(ab==null||ab===""?0:ab)){continue COL}}aa(ac,X)}}}var N=[["m1","matrix"],["c1","anyvalue"],[["m2","matrix"],["c2","anyvalue"]]];U("countifs",function(W,Y,X){var Z=0;X.unshift(W,Y);S(X,function(){Z++});return Z}).args(N);var z=[["range","matrix"]].concat(N);U("sumifs",function(W,Y,aa,X){X.unshift(W,a,Y,aa);var Z=0;S(X,function(ad,ab){var ac=W.get(ad,ab);if(ac){Z+=ac}});return Z}).args(z);U("averageifs",function(W,Y,aa,X){X.unshift(W,a,Y,aa);var Z=0,ab=0;S(X,function(ae,ac){var ad=W.get(ae,ac);if(ad==null||ad===""){ad=0}Z+=ad;ab++});return ab?Z/ab:new P("DIV/0")}).args(z);U("countif",function(W,Y){Y=x(Y);var X=0;W.each(function(Z){if(Y(Z)){X++}});return X}).args([["range","matrix"],["*criteria","anyvalue"]]);var T=[["range","matrix"],["*criteria","anyvalue"],["sumRange",["or",["and","matrix",["assert","$sumRange.width == $range.width"],["assert","$sumRange.height == $range.height"]],["null","$range"]]]];U("sumif",function(X,Z,W){var Y=0;Z=x(Z);X.each(function(ad,ac,ab){if(Z(ad)){var aa=W.get(ac,ab);if(a(aa)){Y+=aa||0}}});return Y}).args(T);U("averageif",function(X,aa,W){var Y=0,Z=0;aa=x(aa);X.each(function(ae,ad,ac){if(aa(ae)){var ab=W.get(ad,ac);if(a(ab)){Y+=ab||0;Z++}}});return Z?Y/Z:new P("DIV/0")}).args(T);(function(W){W("large",function(X,Y){return X.sort(V)[Y]});W("small",function(X,Y){return X.sort(D)[Y]})}(function(W,X){U(W,function(Z,ab){var Y=[];var aa=Z.each(function(ac){if(ac instanceof P){return ac}if(typeof ac=="number"){Y.push(ac)}});if(aa){return aa}if(ab>Y.length){return new P("NUM")}return X(Y,ab-1)}).args([["array","matrix"],["*nth","number++"]])}));function m(W){return W.reduce(function(Y,X){return Y+X},0)/W.length}function K(W,Y,X){if(X==null){X=m(W)}return W.reduce(function(aa,Z){return aa+Math.pow(Z-X,2)},0)/Y}function A(W,X){return Math.sqrt(K(W,X))}U("stdev.s",function(W){return A(W,W.length-1)}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length >= 2","NUM"]]]);U("stdev.p",function(W){return A(W,W.length)}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length >= 2","NUM"]]]);U("var.s",function(W){return K(W,W.length-1)}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length >= 2","NUM"]]]);U("var.p",function(W){return K(W,W.length)}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length >= 2","NUM"]]]);U("median",function(W){var X=W.length;W.sort(D);if(X%2){return W[X>>1]}return(W[X>>1]+W[X>>1+1])/2}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length > 0","N/A"]]]);U("mode.sngl",function(X){X.sort(D);var aa=null,Z=0,W=1,ab=null;for(var Y=0;Y<X.length;++Y){var ac=X[Y];if(ac!=aa){Z=1;aa=ac}else{Z++}if(Z>W){W=Z;ab=ac}}return ab==null?new P("N/A"):ab}).args([["numbers",["collect","number"]]]);U("mode.mult",function(Y){var Z=Object.create(null),X=2,aa=[];Y.forEach(function(ab){var ac=Z[ab]||0;Z[ab]=++ac;if(ac==X){aa.push(ab)}else{if(ac>X){X=ac;aa=[ab]}}});var W=new d(this);aa.forEach(function(ab,ac){W.set(ac,0,ab)});return W}).args([["numbers",["collect","number"]]]);U("geomean",function(W){var Y=W.length;var X=W.reduce(function(aa,Z){if(Z<0){throw new P("NUM")}return aa*Z},1);return Math.pow(X,1/Y)}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length > 0","NUM"]]]);U("harmean",function(W){var Y=W.length;var X=W.reduce(function(aa,Z){if(!Z){throw new P("DIV/0")}return aa+1/Z},0);return Y/X}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length > 0","NUM"]]]);U("trimmean",function(W,aa){var ab=W.length;W.sort(D);var X=Math.floor(ab*aa);if(X%2){--X}X/=2;var Z=0;for(var Y=X;Y<ab-X;++Y){Z+=W[Y]}return Z/(ab-X*2)}).args([["numbers",["collect","number",1]],["percent",["and","number",["[between)",0,1]]],["?",["assert","$numbers.length > 0","NUM"]]]);U("frequency",function(ab,aa){ab.sort(D);aa.sort(D);var Z=-Infinity;var X=0;function Y(ac){var ad=0;while(X<ab.length&&ab[X]>Z&&ab[X]<=ac){++ad;++X}return ad}var W=new d(this);aa.forEach(function(ad,ac){var ae=Y(ad);Z=ad;W.set(ac,0,ae)});W.set(W.height,0,ab.length-X);return W}).args([["data",["collect","number",1]],["bins",["collect","number",1]]]);U("rank.eq",function(Y,W,X){W.sort(X?D:V);var Z=W.indexOf(Y);return Z<0?new P("N/A"):Z+1}).args([["value","number"],["numbers",["collect","number"]],["order",["or","logical",["null",false]]]]);r("rank","rank.eq");U("rank.avg",function(Z,W,Y){W.sort(Y?D:V);var aa=W.indexOf(Z);if(aa<0){return new P("N/A")}for(var X=aa;W[X]==Z;++X){}return(aa+X+1)/2}).args([["value","number"],["numbers",["collect","number"]],["order",["or","logical",["null",false]]]]);U("kurt",function(W){var ab=W.length;var Z=m(W);var X=K(W,ab-1,Z);var aa=Math.sqrt(X);var Y=W.reduce(function(ad,ac){return ad+Math.pow((ac-Z)/aa,4)},0);return ab*(ab+1)/((ab-1)*(ab-2)*(ab-3))*Y-3*Math.pow(ab-1,2)/((ab-2)*(ab-3))}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length >= 4","NUM"]]]);function q(aa,Y,X){var W=0,Z=0,ad=null,ab=null,ac=false;aa.forEach(function(ae){if(ae<Y){W++;ad=ad==null?ae:Math.max(ad,ae)}else{if(ae>Y){Z++;ab=ab==null?ae:Math.min(ab,ae)}else{ac=true}}});if(!W&&!Z){return new P("N/A")}if(ac){if(X){return(W+1)/(aa.length+1)}return W/(W+Z)}return((ab-Y)*q(aa,ad,X)+(Y-ad)*q(aa,ab,X))/(ab-ad)}var F=[["array",["collect","number",1]],["x","number"],["significance",["or",["null",3],"integer++"]],["?",["assert","$array.length > 0","NUM"]]];U("percentrank.inc",function(Y,W,X){var Z=q(Y,W,0);Z=Z.toFixed(X+1);return parseFloat(Z.substr(0,Z.length-1))}).args(F);U("percentrank.exc",function(Y,W,X){var Z=q(Y,W,1);Z=Z.toFixed(X+1);return parseFloat(Z.substr(0,Z.length-1))}).args(F);r("percentrank","percentrank.inc");function J(W,ad,ac){var Y=0;var aa=m(W);var Z=m(ad);var ab=W.length;for(var X=0;X<ab;++X){Y+=(W[X]-aa)*(ad[X]-Z)}return Y/ac}U("covariance.p",function(W,X){return J(W,X,W.length)}).args([["array1",["collect","number",1]],["array2",["collect","number",1]],["?",["assert","$array1.length == $array2.length","N/A"]],["?",["assert","$array1.length > 0","DIV/0"]]]);U("covariance.s",function(W,X){return J(W,X,W.length-1)}).args([["array1",["collect","number",1]],["array2",["collect","number",1]],["?",["assert","$array1.length == $array2.length","N/A"]],["?",["assert","$array1.length > 1","DIV/0"]]]);r("covar","covariance.p");var e=p.memoize(function(Y){for(var X=2,W=1;X<=Y;++X){W*=X}return W});U("fact",e).args([["*n","integer+"]]);U("factdouble",function(Y){for(var X=2+(Y&1),W=1;X<=Y;X+=2){W*=X}return W}).args([["*n","integer+"]]);U("multinomial",function(W){var Y=1,X=0;W.forEach(function(Z){if(Z<0){throw new P("NUM")}X+=Z;Y*=e(Z)});return e(X)/Y}).args([["numbers",["collect","number"]]]);var M=p.memoize(function(ab,X){for(var W=X+1,aa=1,Z=1,Y=1;aa<=ab-X;++W,++aa){Z*=W;Y*=aa}return Z/Y});U("combin",M).args([["*n","integer++"],["*k",["and","integer",["[between]",0,"$n"]]]]);U("combina",function(X,W){return M(X+W-1,X-1)}).args([["*n","integer++"],["*k",["and","integer",["[between]",1,"$n"]]]]);U("average",function(W){var X=W.reduce(function(Z,Y){return Z+Y},0);return X/W.length}).args([["numbers",["collect",["and","number",["not","boolean"]]]],["?",["assert","$numbers.length > 0","DIV/0"]]]);U("averagea",function(W){var X=0,Y=0;W.forEach(function(Z){if(typeof Z!="string"){X+=Z}++Y});return Y?X/Y:new P("DIV/0")}).args([["values",["collect","anyvalue"]]]);function i(W,Z){W.sort(D);var aa=W.length;var X=Z|0,Y=Z-X;if(X===0){return W[0]}if(X>=aa){return W[aa-1]}--X;return W[X]+Y*(W[X+1]-W[X])}function y(W,X){var Y=X*(W.length-1)+1;return i(W,Y)}function I(W,X){var Y=X*(W.length+1);return i(W,Y)}U("percentile.inc",y).args([["numbers",["collect","number",1]],["p",["and","number",["[between]",0,1]]]]);U("percentile.exc",I).args([["numbers",["collect","number",1]],["p",["and","number",["(between)",0,1]]]]);U("quartile.inc",function(W,X){return y(W,X/4)}).args([["numbers",["collect","number",1]],["quarter",["values",0,1,2,3,4]]]);U("quartile.exc",function(W,X){return I(W,X/4)}).args([["numbers",["collect","number",1]],["quarter",["values",0,1,2,3,4]]]);r("quartile","quartile.inc");r("percentile","percentile.inc");var Q=["AVERAGE","COUNT","COUNTA","MAX","MIN","PRODUCT","STDEV.S","STDEV.P","SUM","VAR.S","VAR.P","MEDIAN","MODE.SNGL","LARGE","SMALL","PERCENTILE.INC","QUARTILE.INC","PERCENTILE.EXC","QUARTILE.EXC"];function j(X,Z,Y){var W=[];var ad=1;var ab=2;var aa=4;(function ac(ae){if(ae instanceof C){X.getRefCells(ae,true).forEach(function(ag){var ah=ag.value;if(Y&ad&&ag.hidden){return}if(ag.formula){var ai=ag.formula.print(ag.row,ag.col);if(/^\s*(?:aggregate|subtotal)\s*\(/i.test(ai)){if(!(Y&aa)){return}}if("value" in ag.formula){ah=ag.formula.value}}if(Y&ab&&ah instanceof P){return}if(typeof ah=="number"||ah instanceof P){W.push(ah)}})}else{if(Array.isArray(ae)){for(var af=0;af<ae.length;++af){ac(ae[af])}}else{if(ae instanceof d){ae.each(ac)}else{if(typeof ae=="number"){W.push(ae)}else{if(ae instanceof P&&!(Y&ab)){W.push(ae)}}}}}}(Z));return W}U("aggregate",function(aa,Z,Y,X){var W=this;W.resolveCells(X,function(){var ac;if(Z>12){ac=j(W,X[0],Y);var ab=X[1];if(ab instanceof G){ab=W.getRefData(ab)}if(typeof ab!="number"){return aa(new P("VALUE"))}}else{ac=j(W,X,Y)}W.func(Q[Z-1],aa,ac)})}).argsAsync([["funcId",["values",1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]],["options",["or",["null",0],["values",0,1,2,3,4,5,6,7]]],["args","rest"]]);U("subtotal",function(ab,aa){var X=this;var W=aa>100;if(W){aa-=100}var Y=[];for(var Z=2;Z<arguments.length;++Z){Y.push(arguments[Z])}X.resolveCells(Y,function(){var ac=j(X,Y,W?1:0);X.func(Q[aa-1],ab,ac)})}).argsAsync([["funcId",["values",1,2,3,4,5,6,7,8,9,10,11,101,102,103,104,105,106,107,108,109,110,111]],["+",["ref",["or","ref","#matrix"]]]]);U("avedev",function(W){var X=W.reduce(function(Z,Y){return Z+Y},0)/W.length;return W.reduce(function(Z,Y){return Z+Math.abs(Y-X)},0)/W.length}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length >= 2","NUM"]]]);function R(X,ab,aa,W){if(!W){return M(ab,X)*Math.pow(aa,X)*Math.pow(1-aa,ab-X)}else{var Z=0;for(var Y=0;Y<=X;++Y){Z+=M(ab,Y)*Math.pow(aa,Y)*Math.pow(1-aa,ab-Y)}return Z}}U("binom.dist",R).args([["successes","integer+"],["trials",["and","integer",["assert","$trials >= $successes"]]],["probability",["and","number",["[between]",0,1]]],["cumulative","logical"]]);r("binomdist","binom.dist");U("binom.inv",function(Z,Y,X){for(var W=0;W<=Z;++W){if(R(W,Z,Y,true)>=X){return W}}return new P("N/A")}).args([["trials","integer+"],["probability",["and","number",["[between]",0,1]]],["alpha",["and","number",["[between]",0,1]]]]);r("critbinom","binom.inv");U("binom.dist.range",function(ab,aa,Z,X){var Y=0;for(var W=Z;W<=X;++W){Y+=M(ab,W)*Math.pow(aa,W)*Math.pow(1-aa,ab-W)}return Y}).args([["trials","integer+"],["probability",["and","number",["[between]",0,1]]],["successes_min",["and","integer",["[between]",0,"$trials"]]],["successes_max",["or",["and","integer",["[between]","$successes_min","$trials"]],["null","$successes_min"]]]]);U("negbinom.dist",function(X,Y,aa,W){if(W){var Z=0;while(X>=0){Z+=M(X+Y-1,X)*Math.pow(aa,Y)*Math.pow(1-aa,X);X--}return Z}return M(X+Y-1,X)*Math.pow(aa,Y)*Math.pow(1-aa,X)}).args([["number_f","integer+"],["number_s","integer+"],["probability_s",["and","number",["[between]",0,1]]],["cumulative","logical"]]);r("negbinomdist","negbinom.dist");U("address",function(ab,Z,X,Y,aa){var W=new G(ab-1,Z-1,X-1);if(aa){W.setSheet(aa,true)}return Y?W.print(0,0):W.print()}).args([["row","integer++"],["col","integer++"],["abs",["or",["null",1],["values",1,2,3,4]]],["a1",["or",["null",true],"logical"]],["sheet",["or","null","string"]]]);U("areas",function(Y){var X=0;(function W(Z){if(Z instanceof G||Z instanceof o){X++}else{if(Z instanceof s){Z.refs.forEach(W)}}}(Y));return X}).args([["ref","ref"]]);U("choose",function(X,W){if(X>W.length){return new P("N/A")}else{return W[X-1]}}).args([["*index","integer"],["+",["value","anything"]]]);U("column",function(W){if(!W){return this.formula.col+1}if(W instanceof G){return W.col+1}return this.asMatrix(W).mapCol(function(X){return X+W.topLeft.col+1})}).args([["ref",["or","area","null"]]]);U("columns",function(W){return W instanceof C?W.width():W.width}).args([["ref",["or","area","#matrix"]]]);U("formulatext",function(X){var W=this.getRefCells(X)[0];if(!W.formula){return new P("N/A")}return W.formula.print(W.row,W.col)}).args([["ref","ref"]]);U("hlookup",function(Y,W,aa,X){var Z=null;W.eachCol(function(ab){var ac=W.get(0,ab);if(X){if(ac>Y){return true}Z=ab}else{if(ac===Y){Z=ab;return true}}});if(Z==null){return new P("N/A")}return W.get(aa-1,Z)}).args([["value","anyvalue"],["range","matrix"],["row","integer++"],["approx",["or","logical",["null",true]]]]);U("index",function(ab,W,ae,X,ac){var ad=this;if(W instanceof s){W=W.refs[ac-1]}if(!ae&&!X||!W){return ab(new P("N/A"))}if(W instanceof G){W=W.toRangeRef()}if(W instanceof o){if(ae&&X){if(X>W.width()||ae>W.height()){return ab(new P("REF"))}var aa=W.toCell(ae-1,X-1);ad.resolveCells([aa],function(){ab(ad.getRefData(aa))});return}if(!ae){var Z=W.toColumn(X-1);ad.resolveCells([Z],function(){ab(ad.asMatrix(Z))});return}if(!X){var Y=W.toRow(ae-1);ad.resolveCells([Y],function(){ab(ad.asMatrix(Y))});return}}else{if(W instanceof d){if(W.width>1&&W.height>1){if(ae&&X){return ab(W.get(ae-1,X-1))}if(!ae){return ab(W.mapRow(function(af){return W.get(af,X-1)}))}if(!X){return ab(W.mapCol(function(af){return W.get(ae-1,af)}))}}if(W.width==1){return ab(W.get(ae-1,0))}if(W.height==1){return ab(W.get(0,X-1))}}else{ab(new P("REF"))}}}).argsAsync([["range",["or","ref","matrix"]],["row",["or","integer+","null"]],["col",["or","integer+","null"]],["areanum",["or","integer++",["null",1]]]]);U("indirect",function(W){try{var Y=this.formula;var Z=f.parseFormula(Y.sheet,Y.row,Y.col,W);if(!(Z.ast instanceof C)){throw 1}return Z.ast.absolute(Y.row,Y.col)}catch(X){return new P("REF")}}).args([["thing","string"]]);U("match",function(aa,W,Y){var X=1,Z;if(Y===0){Z=x(aa)}else{if(Y===-1){Z=x("<="+aa)}else{if(Y===1){Z=x(">="+aa)}}}if(W.each(function(ab){if(ab!=null&&Z(ab)){if(Y!==0&&aa!=ab){--X}return true}X++},true)&&X>0){return X}else{return new P("N/A")}}).args([["value","anyvalue"],["range","matrix"],["type",["or",["values",-1,0,1],["null",1]]]]);U("offset",function(Z,aa,ab,W,Y){var X=(Z instanceof G?Z:Z.topLeft).clone();X.row+=aa;X.col+=ab;if(X.row<0||X.col<0){return new P("VALUE")}if(W>1||Y>1){return new o(X,new G(X.row+W-1,X.col+Y-1)).setSheet(Z.sheet,Z.hasSheet())}return X}).args([["ref","area"],["*rows","integer"],["*cols","integer"],["*height",["or","integer++",["null","$ref.height()"]]],["*width",["or","integer++",["null","$ref.width()"]]]]);U("row",function(W){if(!W){return this.formula.row+1}if(W instanceof G){return W.row+1}return this.asMatrix(W).mapRow(function(X){return X+W.topLeft.row+1})}).args([["ref",["or","area","null"]]]);U("rows",function(W){return W instanceof C?W.height():W.height}).args([["ref",["or","area","#matrix"]]]);U("vlookup",function(aa,W,X,Z){var Y=null;if(typeof aa!="number"){Z=false}if(typeof aa=="string"){aa=aa.toLowerCase()}W.eachRow(function(ac){var ab=W.get(ac,0);if(Z){if(ab>aa){return true}Y=ac}else{if(typeof ab=="string"){ab=ab.toLowerCase()}if(ab===aa){Y=ac;return true}}});if(Y==null){return new P("N/A")}return W.get(Y,X-1)}).args([["value","anyvalue"],["range","matrix"],["col","integer++"],["approx",["or","logical",["null",true]]]]);U("date",function(X,Y,W){return H(X,Y-1,W)}).args([["*year","integer"],["*month","integer"],["*date","integer"]]);U("day",function(W){return O(W).date}).args([["*date","date"]]);U("month",function(W){return O(W).month+1}).args([["*date","date"]]);U("year",function(W){return O(W).year}).args([["*date","date"]]);U("weekday",function(W){return O(W).day+1}).args([["*date","date"]]);U("weeknum",function(W,X){var Y=H(O(W).year,0,1);var aa=O(Y);var Z;if(X==21){Z=3-(aa.day+6)%7;if(Z<0){Z+=7}Y+=Z;aa.date+=Z;aa.day=4;X=1}else{if(X==1){X=0}else{if(X==2){X=1}else{X=(X-10)%7}}}Z=aa.day-X;if(Z<0){Z+=7}Y-=Z;return Math.ceil((W+1-Y)/7)}).args([["*date","date"],["*type",["or",["null",1],["values",1,2,11,12,13,14,15,16,17,21]]]]);function n(W){var X=O(H(W,0,1));if(X.day==4||X.day==3&&u.isLeapYear(W)){return 53}return 52}U("isoweeknum",function h(W){var Y=O(W);var Z=Y.day||7;var X=Math.floor((Y.ord-Z+10)/7);if(X<1){return n(Y.year-1)}else{if(X==53&&X>n(Y.year)){return 1}}return X}).args([["*date","date"]]);U("now",function(){return u.dateToSerial(new Date())}).args([]);U("today",function(){return u.dateToSerial(new Date())|0}).args([]);U("time",function(X,Y,W){return u.packTime(X,Y,W,0)}).args([["*hours","integer"],["*minutes","integer"],["*seconds","integer"]]);U("hour",function(W){return u.unpackTime(W).hours}).args([["*time","datetime"]]);U("minute",function(W){return u.unpackTime(W).minutes}).args([["*time","datetime"]]);U("second",function(W){return u.unpackTime(W).seconds}).args([["*time","datetime"]]);U("edate",function(Y,X){var Z=O(Y);var W=Z.month+X;var aa=Z.year+Math.floor(W/12);W%=12;if(W<0){W+=12}Z=Math.min(Z.date,g(aa,W));return H(aa,W,Z)}).args([["*start_date","date"],["*months","integer"]]);U("eomonth",function(Y,X){var Z=O(Y);var W=Z.month+X;var aa=Z.year+Math.floor(W/12);W%=12;if(W<0){W+=12}Z=g(aa,W);return H(aa,W,Z)}).args([["*start_date","date"],["*months","integer"]]);U("workday",function(W,aa,X){var Y=aa>0?1:-1;aa=Math.abs(aa);var Z=O(W).day;while(aa>0){W+=Y;Z=(Z+Y)%7;if(Z>0&&Z<6&&X.indexOf(W)<0){--aa}}return W}).args([["start_date","date"],["days","integer"],["holidays",["collect","date"]]]);U("networkdays",function(X,W,Z){if(X>W){var Y=X;X=W;W=Y}var aa=0;var ab=O(X).day;while(X<=W){if(ab>0&&ab<6&&Z.indexOf(X)<0){aa++}X++;ab=(ab+1)%7}return aa}).args([["start_date","date"],["end_date","date"],["holidays",["collect","date"]]]);U("days",function(X,W){return W-X}).args([["*start_date","date"],["*end_date","date"]]);function B(aa,W,Z){var Y=O(aa);var X=O(W);if(Z){if(Y.date==31){Y.date=30}if(X.date==31){X.date=30}}else{if(Y.month==1&&X.month==1&&Y.date==g(Y.year,1)&&X.date==g(X.year,1)){X.date=30}if(Y.date==g(Y.year,Y.month)){Y.date=30;if(X.date==31){X.date=30}}else{if(Y.date==30&&X.date==31){X.date=30}}}return 360*(X.year-Y.year)+30*(X.month-Y.month)+(X.date-Y.date)}u._days_360=B;U("days360",B).args([["*start_date","date"],["*end_date","date"],["*method",["or","logical",["null",false]]]]);U("yearfrac",function(Y,W,X){switch(X){case 0:return B(Y,W,false)/360;case 1:return(W-Y)/t(O(Y).year);case 2:return(W-Y)/360;case 3:return(W-Y)/365;case 4:return B(Y,W,true)/360}}).args([["*start_date","date"],["*end_date","date"],["*method",["or",["null",0],["values",0,1,2,3,4]]]]);U("datevalue",function(X){var W=u.parseDate(X);if(W){return u.dateToSerial(W)}return new P("VALUE")}).args([["*text","string"]]);U("timevalue",function(ab){var W=ab.toLowerCase().match(/(\d+):(\d+)(:(\d+)(\.(\d+))?)?\s*(am?|pm?)?/);if(W){var Z=parseFloat(W[1]);var aa=parseFloat(W[2]);var Y=W[3]?parseFloat(W[4]):0;var X=W[7];if(X&&(Z>12||Z<1)){return new P("VALUE")}if(/^p/.test(X)){Z+=12}return u.packTime(Z,aa,Y,0)}return new P("VALUE")}).args([["*text","string"]]);U("mdeterm",function(W){var X=W.each(function(Y){if(typeof Y!="number"){return new P("VALUE")}},true);return X||W.determinant()}).args([["m",["and","matrix",["assert","$m.width == $m.height"]]]]);U("transpose",function(W){return W.transpose()}).args([["range","matrix"]]);U("mmult",function(X,W){return X.multiply(W)}).args([["a","matrix"],["b",["and","matrix",["assert","$b.height == $a.width"]]]]);U("munit",function(W){return new d(this).unit(W)}).args([["n","integer+"]]);U("minverse",function(W){var X=W.each(function(Y){if(typeof Y!="number"){return new P("VALUE")}},true);return X||W.inverse()||new P("VALUE")}).args([["m",["and","matrix",["assert","$m.width == $m.height"]]]]);U("rand",function(){return Math.random()}).args([]);U("randbetween",function(X,W){return X+Math.floor((W-X+1)*Math.random())}).args([["min","integer"],["max",["and","integer",["assert","$max >= $min"]]]]);U("true",function(){return true}).args([]);U("false",function(){return true}).args([]);U("roman",function(W){return p.arabicToRoman(W).toUpperCase()}).args([["*number","integer"]]);U("arabic",function(X){var W=p.romanToArabic(X);return W==null?new P("VALUE"):W}).args([["*roman","string"]]);U("base",function(Y,X,W){var Z=Y.toString(X).toUpperCase();while(Z.length<W){Z="0"+Z}return Z}).args([["*number","integer"],["*radix",["and","integer",["[between]",2,36]]],["*minLen",["or","integer+",["null",0]]]]);U("decimal",function(aa,X){aa=aa.toUpperCase();var Z=0;for(var W=0;W<aa.length;++W){var Y=aa.charCodeAt(W);if(Y>=48&&Y<=57){Y-=48}else{if(Y>=65&&Y<55+X){Y-=55}else{return new P("VALUE")}}Z=Z*X+Y}return Z}).args([["*text","string"],["*radix",["and","integer",["[between]",2,36]]]]);U("char",function(W){return String.fromCharCode(W)}).args([["*code","integer+"]]);var v=/[\0-\x1F\x7F-\x9F\xAD\u0378\u0379\u037F-\u0383\u038B\u038D\u03A2\u0528-\u0530\u0557\u0558\u0560\u0588\u058B-\u058E\u0590\u05C8-\u05CF\u05EB-\u05EF\u05F5-\u0605\u061C\u061D\u06DD\u070E\u070F\u074B\u074C\u07B2-\u07BF\u07FB-\u07FF\u082E\u082F\u083F\u085C\u085D\u085F-\u089F\u08A1\u08AD-\u08E3\u08FF\u0978\u0980\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09FC-\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF2-\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B55\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B78-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BFB-\u0C00\u0C04\u0C0D\u0C11\u0C29\u0C34\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5A-\u0C5F\u0C64\u0C65\u0C70-\u0C77\u0C80\u0C81\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0D01\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D45\u0D49\u0D4F-\u0D56\u0D58-\u0D5F\u0D64\u0D65\u0D76-\u0D78\u0D80\u0D81\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DF1\u0DF5-\u0E00\u0E3B-\u0E3E\u0E5C-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EBA\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F48\u0F6D-\u0F70\u0F98\u0FBD\u0FCD\u0FDB-\u0FFF\u10C6\u10C8-\u10CC\u10CE\u10CF\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u137D-\u137F\u139A-\u139F\u13F5-\u13FF\u169D-\u169F\u16F1-\u16FF\u170D\u1715-\u171F\u1737-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17DE\u17DF\u17EA-\u17EF\u17FA-\u17FF\u180F\u181A-\u181F\u1878-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191D-\u191F\u192C-\u192F\u193C-\u193F\u1941-\u1943\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19DD\u1A1C\u1A1D\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1A9F\u1AAE-\u1AFF\u1B4C-\u1B4F\u1B7D-\u1B7F\u1BF4-\u1BFB\u1C38-\u1C3A\u1C4A-\u1C4C\u1C80-\u1CBF\u1CC8-\u1CCF\u1CF7-\u1CFF\u1DE7-\u1DFB\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FC5\u1FD4\u1FD5\u1FDC\u1FF0\u1FF1\u1FF5\u1FFF\u200B-\u200F\u202A-\u202E\u2060-\u206F\u2072\u2073\u208F\u209D-\u209F\u20BB-\u20CF\u20F1-\u20FF\u218A-\u218F\u23F4-\u23FF\u2427-\u243F\u244B-\u245F\u2700\u2B4D-\u2B4F\u2B5A-\u2BFF\u2C2F\u2C5F\u2CF4-\u2CF8\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D71-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E3C-\u2E7F\u2E9A\u2EF4-\u2EFF\u2FD6-\u2FEF\u2FFC-\u2FFF\u3040\u3097\u3098\u3100-\u3104\u312E-\u3130\u318F\u31BB-\u31BF\u31E4-\u31EF\u321F\u32FF\u4DB6-\u4DBF\u9FCD-\u9FFF\uA48D-\uA48F\uA4C7-\uA4CF\uA62C-\uA63F\uA698-\uA69E\uA6F8-\uA6FF\uA78F\uA794-\uA79F\uA7AB-\uA7F7\uA82C-\uA82F\uA83A-\uA83F\uA878-\uA87F\uA8C5-\uA8CD\uA8DA-\uA8DF\uA8FC-\uA8FF\uA954-\uA95E\uA97D-\uA97F\uA9CE\uA9DA-\uA9DD\uA9E0-\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A\uAA5B\uAA7C-\uAA7F\uAAC3-\uAADA\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F-\uABBF\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBC2-\uFBD2\uFD40-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFE\uFDFF\uFE1A-\uFE1F\uFE27-\uFE2F\uFE53\uFE67\uFE6C-\uFE6F\uFE75\uFEFD-\uFF00\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFDF\uFFE7\uFFEF-\uFFFB\uFFFE\uFFFF]/g;U("clean",function(W){return W.replace(v,"")}).args([["*text","string"]]);U("code",function(W){return W.charAt(0)}).args([["*text","string"]]);r("unichar","char");r("unicode","code");U("concatenate",function(X){var W="";for(var Y=0;Y<X.length;++Y){W+=X[Y]}return W}).args([["+",["*text","string"]]]);U("dollar",function(X,W){var Y="$#,##0.DECIMALS;($#,##0.DECIMALS)";var Z="";while(W-->0){Z+="0"}Y=Y.replace(/DECIMALS/g,Z);return l.formatting.text(X,Y)}).args([["*number","number"],["*decimals",["or","integer++",["null",2]]]]);U("exact",function(X,W){return X===W}).args([["*text1","string"],["*text2","string"]]);U("find",function(X,W,Z){var Y=W.indexOf(X,Z-1);return Y<0?new P("VALUE"):Y+1}).args([["*substring","string"],["*string","string"],["*start",["or","integer++",["null",1]]]]);U("fixed",function(Y,X,W){var Z=W?"0.DECIMALS":"#,##0.DECIMALS";var aa="";while(X-->0){aa+="0"}Z=Z.replace(/DECIMALS/g,aa);return l.formatting.text(Y,Z)}).args([["*number","number"],["*decimals",["or","integer++",["null",2]]],["*noCommas",["or","boolean",["null",false]]]]);U("left",function(X,W){return X.substr(0,W)}).args([["*text","string"],["*length",["or","integer+",["null",1]]]]);U("right",function(X,W){return X.substr(-W)}).args([["*text","string"],["*length",["or","integer+",["null",1]]]]);U("len",function(W){return W.length}).args([["*text","string"]]);U("lower",function(W){return W.toLowerCase()}).args([["*text","string"]]);U("upper",function(W){return W.toUpperCase()}).args([["*text","string"]]);U("ltrim",function(W){return W.replace(/^\s+/,"")}).args([["*text","string"]]);U("rtrim",function(W){return W.replace(/\s+$/,"")}).args([["*text","string"]]);U("trim",function(W){return W.replace(/^\s+|\s+$/,"")}).args([["*text","string"]]);U("mid",function(X,Y,W){return X.substr(Y-1,W)}).args([["*text","string"],["*start","integer++"],["*length","integer+"]]);U("proper",function(W){return W.toLowerCase().replace(/\b./g,function(X){return X.toUpperCase()})}).args([["*text","string"]]);U("replace",function(Y,Z,W,X){return Y.substr(0,--Z)+X+Y.substr(Z+W)}).args([["*text","string"],["*start","integer++"],["*length","integer+"],["*newText","string"]]);U("rept",function(Y,X){var W="";while(X-->0){W+=Y}return W}).args([["*text","string"],["*number","integer+"]]);U("search",function(X,W,Z){var Y=W.toLowerCase().indexOf(X.toLowerCase(),Z-1);return Y<0?new P("VALUE"):Y+1}).args([["*substring","string"],["*string","string"],["*start",["or","integer++",["null",1]]]]);U("substitute",function(aa,W,Z,Y){if(W===Z){return aa}var ab=-1;function X(){aa=aa.substring(0,ab)+Z+aa.substring(ab+W.length)}while((ab=aa.indexOf(W,ab+1))>=0){if(Y==null){X()}else{if(--Y===0){X();break}}}return aa}).args([["*text","string"],["*oldText","string"],["*newText","string"],["*nth",["or","integer++","null"]]]);U("t",function(W){return typeof W=="string"?W:""}).args([["*value","anyvalue"]]);U("text",function(W,X){return l.formatting.text(W,X)}).args([["*value","anyvalue"],["*format","string"]]);U("value",function(W){if(typeof W=="number"){return W}if(typeof W=="boolean"){return +W}W=(W+"").replace(/[$\u9227\ufffd,]/g,"");W=parseFloat(W);return isNaN(W)?new P("VALUE"):W}).args([["*value","anyvalue"]]);function E(W,X){this.link=W;this.text=X}E.prototype.toString=function(){return this.text};U("hyperlink",function(W,X){return new E(W,X)}).args([["*link","string"],["*text",["or","string",["null","$link"]]]]);U("iferror",function(X,W){return X instanceof P?W:X}).args([["*value","forced!"],["*value_if_error","anyvalue!"]]);var x=function(){var Z=Object.create(null);function ae(ah,af){if(typeof af=="string"){var ag=parseFloat(af);if(!isNaN(ag)&&ag==af){af=ag}}return function(aj){var ai=af;if(typeof aj=="string"&&typeof ai=="string"){aj=aj.toLowerCase();ai=ai.toLowerCase()}return ah(aj,ai)}}function X(af){var ag,ah;if(typeof af=="string"){af=af.toLowerCase()}if(/^[0-9.]+%$/.test(af)){ah=af.substr(0,af.length-1);ag=parseFloat(ah);if(!isNaN(ag)&&ag==ah){af=ag/100}}else{if(/^[0-9.]+$/.test(af)){ag=parseFloat(af);if(!isNaN(ag)&&ag==af){af=ag}}}return af}function ad(ag,af){return X(ag)<X(af)}function ab(ag,af){return X(ag)<=X(af)}function aa(ag,af){return X(ag)>X(af)}function Y(ag,af){return X(ag)>=X(af)}function ac(ag,af){return !W(ag,af)}function W(ag,af){if(af instanceof RegExp){return af.test(ag)}if(typeof ag=="string"||typeof af=="string"){ag=String(ag);af=String(af)}return X(ag)==X(af)}return function(ag){if(typeof ag=="function"){return ag}var af;if(af=/^=(.*)$/.exec(ag)){return ae(W,af[1])}if(af=/^<>(.*)$/.exec(ag)){return ae(ac,af[1])}if(af=/^<=(.*)$/.exec(ag)){return ae(ab,af[1])}if(af=/^<(.*)$/.exec(ag)){return ae(ad,af[1])}if(af=/^>=(.*)$/.exec(ag)){return ae(Y,af[1])}if(af=/^>(.*)$/.exec(ag)){return ae(aa,af[1])}if(/[?*]/.exec(ag)){var ah=Z[ag];if(!ah){ah=ag.replace(/(~\?|~\*|[\]({\+\.\|\^\$\\})\[]|[?*])/g,function(ai){switch(ai){case"~?":return"\\?";case"~*":return"\\*";case"?":return".";case"*":return".*";default:return"\\"+ai}});ah=Z[ag]=new RegExp("^"+ah+"$","i")}return ae(W,ah)}return ae(W,ag)}}();function a(W){return typeof W=="number"||typeof W=="boolean"||W==null||W===""}function D(X,W){return X===W?0:X<W?-1:1}function V(X,W){return X===W?0:X<W?1:-1}},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/runtime.functions.2",["spreadsheet/runtime"],a)}(function(){if(kendo.support.browser.msie&&kendo.support.browser.version<9){return}var H=kendo.spreadsheet;var Y=H.calc;var az=Y.runtime;var aQ=az.defineFunction;var am=az.CalcError;var ak=az.packDate;var bd=az.unpackDate;var ax=az.isLeapYear;var aS=az.daysInMonth;var be=az._days_360;aQ("ERF",function(bg,bf){if(bf==null){return q(bg)}return q(bf)-q(bg)}).args([["lower_limit","number"],["upper_limit",["or","number","null"]]]);aQ("ERFC",Z).args([["x","number"]]);aQ("GAMMALN",t).args([["x","number++"]]);aQ("GAMMA",f).args([["x","number"]]);aQ("GAMMA.DIST",ba).args([["x","number+"],["alpha","number++"],["beta","number++"],["cumulative","logical"]]);aQ("GAMMA.INV",aF).args([["p",["and","number",["[between]",0,1]]],["alpha","number++"],["beta","number++"]]);aQ("NORM.S.DIST",al).args([["z","number"],["cumulative","logical"]]);aQ("NORM.S.INV",b).args([["p",["and","number",["[between]",0,1]]]]);aQ("NORM.DIST",V).args([["x","number"],["mean","number"],["stddev","number++"],["cumulative","logical"]]);aQ("NORM.INV",ap).args([["p",["and","number",["[between]",0,1]]],["mean","number"],["stddev","number++"]]);aQ("BETADIST",aW).args([["x","number"],["alpha","number++"],["beta","number++"],["A",["or","number",["null",0]]],["B",["or","number",["null",1]]],["?",["assert","$x >= $A","NUM"]],["?",["assert","$x <= $B","NUM"]],["?",["assert","$A < $B","NUM"]]]);aQ("BETA.DIST",a1).args([["x","number"],["alpha","number++"],["beta","number++"],["cumulative","logical"],["A",["or","number",["null",0]]],["B",["or","number",["null",1]]],["?",["assert","$x >= $A","NUM"]],["?",["assert","$x <= $B","NUM"]],["?",["assert","$A < $B","NUM"]]]);aQ("BETA.INV",O).args([["p",["and","number",["[between]",0,1]]],["alpha","number++"],["beta","number++"],["A",["or","number",["null",0]]],["B",["or","number",["null",1]]]]);aQ("CHISQ.DIST",aK).args([["x","number+"],["deg_freedom","integer++"],["cumulative","logical"]]);aQ("CHISQ.DIST.RT",u).args([["x","number+"],["deg_freedom","integer++"]]);aQ("CHISQ.INV",K).args([["p",["and","number",["[between]",0,1]]],["deg_freedom","integer++"]]);aQ("CHISQ.INV.RT",i).args([["p",["and","number",["[between]",0,1]]],["deg_freedom","integer++"]]);aQ("CHISQ.TEST",function(bg,bf){return aY(bg.data,bf.data)}).args([["actual_range","matrix"],["expected_range","matrix"],["?",["assert","$actual_range.width == $expected_range.width"]],["?",["assert","$actual_range.height == $expected_range.height"]]]);aQ("EXPON.DIST",bc).args([["x","number+"],["lambda","number++"],["cumulative","logical"]]);aQ("POISSON.DIST",J).args([["x","integer+"],["mean","number+"],["cumulative","logical"]]);aQ("F.DIST",aP).args([["x","number+"],["deg_freedom1","integer++"],["deg_freedom2","integer++"],["cumulative","logical"]]);aQ("F.DIST.RT",h).args([["x","number+"],["deg_freedom1","integer++"],["deg_freedom2","integer++"]]);aQ("F.INV",g).args([["p",["and","number",["[between]",0,1]]],["deg_freedom1","integer++"],["deg_freedom2","integer++"]]);aQ("F.INV.RT",aT).args([["p",["and","number",["[between]",0,1]]],["deg_freedom1","integer++"],["deg_freedom2","integer++"]]);aQ("F.TEST",M).args([["array1",["collect","number",1]],["array2",["collect","number",1]],["?",["assert","$array1.length >= 2","DIV/0"]],["?",["assert","$array2.length >= 2","DIV/0"]]]);aQ("FISHER",aR).args([["x",["and","number",["(between)",-1,1]]]]);aQ("FISHERINV",av).args([["y","number"]]);aQ("T.DIST",A).args([["x","number"],["deg_freedom","integer++"],["cumulative","logical"]]);aQ("T.DIST.RT",ao).args([["x","number"],["deg_freedom","integer++"]]);aQ("T.DIST.2T",d).args([["x","number+"],["deg_freedom","integer++"]]);aQ("T.INV",k).args([["p",["and","number",["(between]",0,1]]],["deg_freedom","integer++"]]);aQ("T.INV.2T",z).args([["p",["and","number",["(between]",0,1]]],["deg_freedom","integer++"]]);aQ("T.TEST",ac).args([["array1",["collect","number",1]],["array2",["collect","number",1]],["tails",["and","integer",["values",1,2]]],["type",["and","integer",["values",1,2,3]]],["?",["assert","$type != 1 || $array1.length == $array2.length","N/A"]],["?",["assert","$array1.length >= 2","DIV/0"]],["?",["assert","$array2.length >= 2","DIV/0"]]]);aQ("CONFIDENCE.T",a).args([["alpha",["and","number",["(between)",0,1]]],["standard_dev","number++"],["size",["and","integer++",["assert","$size != 1","DIV/0"]]]]);aQ("CONFIDENCE.NORM",E).args([["alpha",["and","number",["(between)",0,1]]],["standard_dev","number++"],["size",["and","integer++"]]]);aQ("GAUSS",v).args([["z","number"]]);aQ("PHI",e).args([["x","number"]]);aQ("LOGNORM.DIST",C).args([["x","number++"],["mean","number"],["standard_dev","number++"],["cumulative","logical"]]);aQ("LOGNORM.INV",l).args([["probability",["and","number",["(between)",0,1]]],["mean","number"],["standard_dev","number++"]]);aQ("PROB",aL).args([["x_range",["collect","number",1]],["prob_range",["collect","number",1]],["lower_limit","number"],["upper_limit",["or","number",["null","$lower_limit"]]],["?",["assert","$prob_range.length == $x_range.length","N/A"]]]);aQ("SLOPE",a5).args([["known_y",["collect","number",1]],["known_x",["collect","number",1]],["?",["assert","$known_x.length == $known_y.length","N/A"]],["?",["assert","$known_x.length > 0 && $known_y.length > 0","N/A"]]]);aQ("INTERCEPT",aB).args([["known_y",["collect","number",1]],["known_x",["collect","number",1]],["?",["assert","$known_x.length == $known_y.length","N/A"]],["?",["assert","$known_x.length > 0 && $known_y.length > 0","N/A"]]]);aQ("PEARSON",F).args([["array1",["collect","number",1]],["array2",["collect","number",1]],["?",["assert","$array2.length == $array1.length","N/A"]],["?",["assert","$array2.length > 0 && $array1.length > 0","N/A"]]]);aQ("RSQ",r).args([["known_y",["collect","number",1]],["known_x",["collect","number",1]],["?",["assert","$known_x.length == $known_y.length","N/A"]],["?",["assert","$known_x.length > 0 && $known_y.length > 0","N/A"]],["?",["assert","$known_x.length != 1 && $known_y.length != 1","N/A"]]]);aQ("STEYX",aZ).args([["known_y",["collect","number",1]],["known_x",["collect","number",1]],["?",["assert","$known_x.length == $known_y.length","N/A"]],["?",["assert","$known_x.length >= 3 && $known_y.length >= 3","DIV/0"]]]);aQ("FORECAST",aH).args([["x","number"],["known_y",["collect","number",1]],["known_x",["collect","number",1]],["?",["assert","$known_x.length == $known_y.length","N/A"]],["?",["assert","$known_x.length > 0 && $known_y.length > 0","N/A"]]]);aQ("LINEST",W).args([["known_y","matrix"],["known_x",["or","matrix","null"]],["const",["or","logical",["null",true]]],["stats",["or","logical",["null",false]]]]);aQ("LOGEST",s).args([["known_y","matrix"],["known_x",["or","matrix","null"]],["const",["or","logical",["null",true]]],["stats",["or","logical",["null",false]]]]);aQ("TREND",af).args([["known_y","matrix"],["known_x",["or","matrix","null"]],["new_x",["or","matrix","null"]],["const",["or","logical",["null",true]]]]);aQ("GROWTH",I).args([["known_y","matrix"],["known_x",["or","matrix","null"]],["new_x",["or","matrix","null"]],["const",["or","logical",["null",true]]]]);aQ("FV",x).args([["rate","number"],["nper","number"],["pmt",["or","number",["null",0]]],["pv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]],["?",["assert","$pmt || $pv"]]]);aQ("PV",ae).args([["rate","number"],["nper","number"],["pmt",["or","number",["null",0]]],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]],["?",["assert","$pmt || $fv"]]]);aQ("PMT",ab).args([["rate","number"],["nper","number"],["pmt","number"],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]]]);aQ("NPER",aV).args([["rate","number"],["pmt","number"],["pv","number"],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]]]);aQ("RATE",m).args([["nper","number"],["pmt",["or","number",["null",0]]],["pv","number"],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]],["guess",["or","number++",["null",0.01]]],["?",["assert","$pmt || $fv"]]]);aQ("IPMT",T).args([["rate","number"],["per","number++"],["nper","number++"],["pv","number"],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]],["?",["assert","$per >= 1 && $per <= $nper"]]]);aQ("PPMT",ar).args([["rate","number"],["per","number++"],["nper","number++"],["pv","number"],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]],["?",["assert","$per >= 1 && $per <= $nper"]]]);aQ("CUMPRINC",aU).args([["rate","number++"],["nper","number++"],["pv","number++"],["start_period","number++"],["end_period","number++"],["type",["or",["values",0,1],["null",0]]],["?",["assert","$end_period >= $start_period","NUM"]]]);aQ("CUMIPMT",G).args([["rate","number++"],["nper","number++"],["pv","number++"],["start_period","number++"],["end_period","number++"],["type",["or",["values",0,1],["null",0]]],["?",["assert","$end_period >= $start_period","NUM"]]]);aQ("NPV",n).args([["rate","number"],["values",["collect","number"]],["?",["assert","$values.length > 0","N/A"]]]);aQ("IRR",a7).args([["values",["collect","number",1]],["guess",["or","number",["null",0.1]]]]);aQ("EFFECT",bb).args([["nominal_rate","number++"],["npery","integer++"]]);aQ("NOMINAL",L).args([["effect_rate","number++"],["npery","integer++"]]);aQ("XNPV",Q).args([["rate","number"],["values",["collect","number",1]],["dates",["collect","date",1]],["?",["assert","$values.length == $dates.length","NUM"]]]);aQ("XIRR",D).args([["values",["collect","number",1]],["dates",["collect","date",1]],["guess",["or","number",["null",0.1]]],["?",["assert","$values.length == $dates.length","NUM"]]]);aQ("ISPMT",a6).args([["rate","number"],["per","number++"],["nper","number++"],["pv","number"],["?",["assert","$per >= 1 && $per <= $nper"]]]);aQ("DB",an).args([["cost","number"],["salvage","number"],["life","number++"],["period","number++"],["month",["or","number",["null",12]]]]);aQ("DDB",U).args([["cost","number"],["salvage","number"],["life","number++"],["period","number++"],["factor",["or","number",["null",2]]]]);aQ("SLN",at).args([["cost","number"],["salvage","number"],["life","number++"]]);aQ("SYD",ai).args([["cost","number"],["salvage","number"],["life","number++"],["per","number++"]]);aQ("VDB",aX).args([["cost","number+"],["salvage","number+"],["life","number++"],["start_period","number+"],["end_period","number+"],["factor",["or","number+",["null",2]]],["no_switch",["or","logical",["null",false]]],["?",["assert","$end_period >= $start_period","NUM"]]]);var j=[["settlement","date"],["maturity","date"],["frequency",["and","integer",["values",1,2,4]]],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]];aQ("COUPDAYBS",ah).args(j);aQ("COUPDAYS",w).args(j);aQ("COUPDAYSNC",a0).args(j);aQ("COUPPCD",aD).args(j);aQ("COUPNCD",aJ).args(j);aQ("COUPNUM",aN).args(j);aQ("ACCRINTM",aI).args([["issue","date"],["settlement","date"],["rate","number++"],["par",["or",["null",1000],"number++"]],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$issue < $settlement","NUM"]]]);aQ("ACCRINT",c).args([["issue","date"],["first_interest","date"],["settlement","date"],["rate","number++"],["par",["or",["null",1000],"number++"]],["frequency",["and","integer",["values",1,2,4]]],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["calc_method",["or","logical",["null",true]]],["?",["assert","$issue < $settlement","NUM"]]]);aQ("DISC",au).args([["settlement","date"],["maturity","date"],["pr","number++"],["redemption","number++"],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]]);aQ("INTRATE",N).args([["settlement","date"],["maturity","date"],["investment","number++"],["redemption","number++"],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]]);aQ("RECEIVED",p).args([["settlement","date"],["maturity","date"],["investment","number++"],["discount","number++"],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]]);aQ("PRICE",aa).args([["settlement","date"],["maturity","date"],["rate","number++"],["yld","number++"],["redemption","number++"],["frequency",["and","integer",["values",1,2,4]]],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]]);aQ("PRICEDISC",aO).args([["settlement","date"],["maturity","date"],["discount","number++"],["redemption","number++"],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]]);var aE=300,P=2.2204e-16,aC=1e-30,ay=Math.abs;function q(bg){if(ay(bg)>=3.3){return 1-Z(bg)}var bh=bg>0?1:-1;if(bh==-1){bg=-bg}var bf=0,bi=1;for(var bj=1;bj<100;bj++){bf+=bi;bi*=2*bg*bg/(2*bj+1)}return bh*2/Math.sqrt(Math.PI)*bg*Math.exp(-bg*bg)*bf}function Z(bf){if(ay(bf)<3.3){return 1-q(bf)}var bh=1;if(bf<0){bh=-1;bf=-bf}var bg=bf;for(var bi=8;bi>=1;bi-=0.5){bg=bf+bi/bg}bg=1/(bf+bg);return bh==1?Math.exp(-bf*bf)/Math.sqrt(Math.PI)*bg:2-Math.exp(-bf*bf)/Math.sqrt(Math.PI)*bg}function t(bf){var bj=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,0.001208650973866179,-0.000005395239384953];var bk=bf,bi=bf+5.5,bg=bj[0];bi-=(bf+0.5)*Math.log(bi);for(var bh=1;bh<=6;bh++){bk+=1;bg+=bj[bh]/bk}return -bi+Math.log(Math.sqrt(2*Math.PI)*bg/bf)}function f(bf){if(bf>0){return Math.exp(t(bf))}var bg=Math.PI,bh=-bf;return -bg/(bh*f(bh)*Math.sin(bg*bh))}function aG(bg,bf){return t(bg)+t(bf)-t(bg+bf)}function ag(bg,bf){return Math.exp(aG(bg,bf))}function aq(bg,bf){return bf<bg+1?aw(bg,bf):1-X(bg,bf)}function aw(bh,bf){var bk=1/bh,bi=bk,bj=bh;var bg=t(bh),bl;for(bl=1;bl<=aE;bl++){bj++;bi*=bf/bj;bk+=bi;if(ay(bi)<ay(bk)*P){break}}return bk*Math.exp(-bf+bh*Math.log(bf)-bg)}function X(bn,bo){var bi=aC,bm=bi,bl=0,bk=1,bg=bo+1-bn;var bf=t(bn);for(var bh=1;bh<=aE;bh++){bl=bg+bk*bl;if(ay(bl)<aC){bl=aC}bm=bg+bk/bm;if(ay(bm)<aC){bm=aC}bl=1/bl;var bp=bm*bl;bi*=bp;if(ay(bp-1)<P){break}bg+=2;bk=-bh*(bh-bn)}return bi*Math.exp(-bo-bf+bn*Math.log(bo))}function ba(bh,bi,bg,bf){if(!bf){return Math.pow(bh/bg,bi-1)*Math.exp(-bh/bg)/(bg*f(bi))}return aq(bi,bh/bg)}function aF(bg,bl,bk){if(bg===0){return 0}if(bg==1){return Infinity}var bh=0,bj=10,bm=0,bn=bl*bk;if(bn>1){bj*=bn}for(var bi=0;bi<aE;bi++){bm=0.5*(bh+bj);var bf=ba(bm,bl,bk,true);if(ay(bg-bf)<1e-16){break}if(bf>bg){bj=bm}else{bh=bm}}return bm}function al(bg,bf){if(!bf){return Math.exp(-bg*bg/2)/Math.sqrt(2*Math.PI)}return 0.5+0.5*q(bg/Math.sqrt(2))}function b(bh){var bn=[-39.69683028665376,220.9460984245205,-275.9285104469687,138.357751867269,-30.66479806614716,2.506628277459239],bm=[-54.47609879822406,161.5858368580409,-155.6989798598866,66.80131188771972,-13.28068155288572],bl=[-0.007784894002430293,-0.3223964580411365,-2.400758277161838,-2.549732539343734,4.374664141464968,2.938163982698783],bk=[0.007784695709041462,0.3224671290700398,2.445134137142996,3.754408661907416];var bi=0.02425,bj=1-bi;var bg,bf;if(bh<bi){bg=Math.sqrt(-2*Math.log(bh));return(((((bl[0]*bg+bl[1])*bg+bl[2])*bg+bl[3])*bg+bl[4])*bg+bl[5])/((((bk[0]*bg+bk[1])*bg+bk[2])*bg+bk[3])*bg+1)}if(bj<bh){bg=Math.sqrt(-2*Math.log(1-bh));return -(((((bl[0]*bg+bl[1])*bg+bl[2])*bg+bl[3])*bg+bl[4])*bg+bl[5])/((((bk[0]*bg+bk[1])*bg+bk[2])*bg+bk[3])*bg+1)}bg=bh-0.5;bf=bg*bg;return(((((bn[0]*bf+bn[1])*bf+bn[2])*bf+bn[3])*bf+bn[4])*bf+bn[5])*bg/(((((bm[0]*bf+bm[1])*bf+bm[2])*bf+bm[3])*bf+bm[4])*bf+1)}function V(bh,bg,bi,bf){if(!bf){return Math.exp(-(bh-bg)*(bh-bg)/(2*bi*bi))/(bi*Math.sqrt(2*Math.PI))}return al((bh-bg)/bi,true)}function ap(bh,bf,bg){return bf+bg*b(bh)}function aA(bg,bh,bf){return Math.exp((bh-1)*Math.log(bg)+(bf-1)*Math.log(1-bg)-aG(bh,bf))}function o(bg,bh,bf){var bi=Math.exp(bh*Math.log(bg)+bf*Math.log(1-bg)-aG(bh,bf));return bg<(bh+1)/(bh+bf+2)?bi*y(bh,bf,bg)/bh:1-bi*y(bf,bh,1-bg)/bf}function y(bn,bm,bo){var bh,bq;var bf,bl,bk,bp,bi,bj,bg,br;bj=bn+bm;br=bn+1;bg=bn-1;bl=1;bk=1-bj*bo/br;if(ay(bk)<aC){bk=aC}bk=1/bk;bi=bk;for(bh=1;bh<=aE;bh++){bq=2*bh;bf=bh*(bm-bh)*bo/((bg+bq)*(bn+bq));bk=1+bf*bk;if(ay(bk)<aC){bk=aC}bl=1+bf/bl;if(ay(bl)<aC){bl=aC}bk=1/bk;bi*=bk*bl;bf=-(bn+bh)*(bj+bh)*bo/((bn+bq)*(br+bq));bk=1+bf*bk;if(ay(bk)<aC){bk=aC}bl=1+bf/bl;if(ay(bl)<aC){bl=aC}bk=1/bk;bp=bk*bl;bi*=bp;if(ay(bp-1)<P){break}}return bi}function B(bl,bi,bh){var bg=0,bm=1,bf=0;for(var bj=0;bj<aE;bj++){bf=0.5*(bg+bm);var bk=o(bf,bi,bh);if(ay(bl-bk)<P){break}if(bk>bl){bm=bf}else{bg=bf}}return bf}function aW(bh,bi,bg,bf,bj){return o((bh-bf)/(bj-bf),bi,bg)}function a1(bh,bi,bg,bj,bf,bk){if(bj){return o((bh-bf)/(bk-bf),bi,bg)}return aA((bh-bf)/(bk-bf),bi,bg)/(bk-bf)}function O(bi,bh,bg,bf,bj){return bf+(bj-bf)*B(bi,bh,bg)}function aK(bf,bh,bg){return ba(bf,bh/2,2,bg)}function u(bf,bg){return 1-aK(bf,bg,true)}function K(bf,bg){return aF(bf,bg/2,2)}function i(bf,bg){return K(1-bf,bg)}function aY(bg,bm){var bo=bg.length,bj=bg[0].length;var bk=0,bi,bh;for(bi=0;bi<bo;bi++){for(bh=0;bh<bj;bh++){var bl=bm[bi][bh];var bn=bg[bi][bh]-bl;bn*=bn;bk+=bn/bl}}var bf=(bo-1)*(bj-1);return u(bk,bf)}function bc(bf,bg,bh){if(bh){return 1-Math.exp(-bg*bf)}return bg*Math.exp(-bg*bf)}function J(bg,bf,bj){if(bj){return 1-aK(2*bf,2*(bg+1),true)}var bi=0;for(var bh=2;bh<=bg;bh++){bi+=Math.log(bh)}return Math.exp(bg*Math.log(bf)-bf-bi)}function aP(bf,bj,bi,bh){if(bh){return o(bj*bf/(bi+bj*bf),bj/2,bi/2)}var bg=bj/bi;bj/=2;bi/=2;return bg/ag(bj,bi)*Math.pow(bg*bf,bj-1)/Math.pow(1+bg*bf,bj+bi)}function h(bf,bh,bg){return 1-aP(bf,bh,bg,true)}function aT(bf,bh,bg){return bg/bh*(1/O(bf,bg/2,bh/2,0,1)-1)}function g(bf,bh,bg){return bg/bh*(1/O(1-bf,bg/2,bh/2,0,1)-1)}function S(bf){var bh=0,bi=bf.length;for(var bg=0;bg<bi;bg++){bh+=bf[bg]}return bh/bi}function a4(bg,bf){var bh=0,bk=bg.length;for(var bi=0;bi<bk;bi++){var bj=bg[bi]-bf;bh+=bj*bj}return bh/(bk-1)}function M(bi,bh){var bk=bi.length-1,bj=bh.length-1;var bg=a4(bi,S(bi)),bf=a4(bh,S(bh));if(!bg||!bf){throw new am("DIV/0")}return 2*aP(bg/bf,bk,bj,true)}function aR(bf){return 0.5*Math.log((1+bf)/(1-bf))}function av(bf){var bg=Math.exp(2*bf);return(bg-1)/(bg+1)}function A(bf,bh,bg){if(bg){return 1-0.5*o(bh/(bf*bf+bh),bh/2,0.5)}return 1/(Math.sqrt(bh)*ag(0.5,bh/2))*Math.pow(1+bf*bf/bh,-(bh+1)/2)}function ao(bf,bg){return 1-A(bf,bg,true)}function d(bf,bg){if(bf<0){bf=-bf}return 2*ao(bf,bg)}function k(bg,bh){var bf=B(2*Math.min(bg,1-bg),bh/2,0.5);bf=Math.sqrt(bh*(1-bf)/bf);return bg>0.5?bf:-bf}function z(bf,bg){return k(1-bf/2,bg)}function ac(bs,br,bk,bj){var bn=bs.length,bl=br.length;var bq,bw;if(bj==1){var bx=0,bA=0;for(var bu=0;bu<bn;bu++){var by=bs[bu]-br[bu];bx+=by;bA+=by*by}var bz=bx/bn;bq=bz/Math.sqrt((bA-bx*bz)/(bn*(bn-1)));return bk==1?ao(bq,bn-1):d(bq,bn-1)}var bg=S(bs),bf=S(br),bi=a4(bs,bg),bh=a4(br,bf);if(bj==3){var bv=bi/bn,bt=bh/bl,bp=bv+bt;var bo=bv/bp,bm=bt/bp;bw=1/(bo*bo/(bn-1)+bm*bm/(bl-1));bq=ay(bg-bf)/Math.sqrt(bp);return bk==1?ao(bq,bw):d(bq,bw)}else{bw=bn+bl-2;bq=ay(bg-bf)*Math.sqrt(bw*bn*bl/((bn+bl)*((bn-1)*bi+(bl-1)*bh)));return bk==1?ao(bq,bw):d(bq,bw)}}function a(bg,bh,bf){return -k(bg/2,bf-1)*bh/Math.sqrt(bf)}function E(bg,bh,bf){return -b(bg/2)*bh/Math.sqrt(bf)}function v(bf){return al(bf,true)-0.5}function e(bf){return al(bf)}function C(bh,bg,bj,bf){if(bf){return 0.5+0.5*q((Math.log(bh)-bg)/(bj*Math.sqrt(2)))}var bi=Math.log(bh)-bg;return Math.exp(-bi*bi/(2*bj*bj))/(bh*bj*Math.sqrt(2*Math.PI))}function l(bh,bf,bg){return Math.exp(ap(bh,bf,bg))}function aL(bf,bm,bh,bj){var bg=bf.length;var bn=0,bi;for(bi=0;bi<bg;bi++){if(bm[bi]<=0||bm[bi]>1){throw new am("NUM")}bn+=bm[bi]}if(bn!=1){throw new am("NUM")}var bk=0;for(bi=0;bi<bg;bi++){var bl=bf[bi];if(bl>=bh&&bl<=bj){bk+=bm[bi]}}return bk}function a5(bj,bf){var bm=S(bf),bl=S(bj),bk=0,bi=0;for(var bh=0,bg=bj.length;bh<bg;bh++){var bn=bf[bh]-bm;bk+=bn*(bj[bh]-bl);bi+=bn*bn}return bk/bi}function aB(bj,bf){var bm=S(bf),bl=S(bj);var bk=0,bi=0;for(var bh=0,bg=bj.length;bh<bg;bh++){var bn=bf[bh]-bm;bk+=bn*(bj[bh]-bl);bi+=bn*bn}return bl-bk*bm/bi}function F(bf,bk){var bo=S(bf),bm=S(bk);var bp=0,bn=0,bl=0;for(var bh=0,bg=bf.length;bh<bg;bh++){var bj=bf[bh]-bo,bi=bk[bh]-bm;bp+=bj*bi;bn+=bj*bj;bl+=bi*bi}return bp/Math.sqrt(bn*bl)}function r(bf,bg){var bh=F(bf,bg);return bh*bh}function aZ(bk,bf){var bg=bf.length;var bo=S(bf),bm=S(bk);var bp=0,bn=0,bl=0;for(var bh=0;bh<bg;bh++){var bj=bf[bh]-bo,bi=bk[bh]-bm;bp+=bi*bi;bn+=bj*bi;bl+=bj*bj}return Math.sqrt((bp-bn*bn/bl)/(bg-2))}function aH(bn,bm,bf){var bq=S(bf),bo=S(bm);var br=0,bp=0;for(var bh=0,bg=bf.length;bh<bg;bh++){var bj=bf[bh]-bq,bi=bm[bh]-bo;br+=bj*bi;bp+=bj*bj}if(bp===0){throw new am("N/A")}var bk=br/bp,bl=bo-bk*bq;return bl+bk*bn}function aj(bf){var bi=bf.height,bh=0;for(var bg=0;bg<bi;bg++){bh+=bf.data[bg][0]}return bh/bi}function ad(bg,bh){var bk=bg.height,bj=0;for(var bi=0;bi<bk;bi++){var bf=bg.data[bi][0]-bh;bj+=bf*bf}return bj}function W(bh,bi,bg,bz){var bw=0;if(!bi){bi=bh.map(function(){return ++bw})}if(bg){bi=bi.clone();bi.eachRow(function(bC){bi.data[bC].unshift(1)});++bi.width}var bn=bi.transpose();var bt=bn.multiply(bi).inverse().multiply(bn).multiply(bh);var bs=[];for(bw=bt.height-1;bw>=0;bw--){bs.push(bt.data[bw][0])}if(!bg){bs.push(0)}if(!bz){return this.asMatrix([bs])}var bj=bi.multiply(bt);var bu=bh.adds(bj,true);var bv=!bg?0:aj(bj);var bx=ad(bj,bv);var bA=!bg?0:aj(bu);var bk=ad(bu,bA);var bm=[];bm.push(bx,bk);var by=bx/(bx+bk);var bB=bh.height-bi.width;var bp=Math.sqrt(bk/bB);var bq=[];bq.push(by,bp);var bl=!bg?by/bi.width/((1-by)/bB):bx/(bi.width-1)/(bk/bB);var bo=[];bo.push(bl,bB);var bf=bn.multiply(bi).inverse();var br=[];for(bw=bf.height-1;bw>=0;bw--){br.push(Math.sqrt(bf.data[bw][bw]*bk/bB))}return this.asMatrix([bs,br,bq,bo,bm])}function s(bh,bi,bg,bf){return W.call(this,bh.map(Math.log),bi,bg,bf).map(Math.exp)}function af(bj,bl,bf,bi){var bh=0;if(!bl){bl=bj.map(function(){return ++bh})}if(bi){bl=bl.clone();bl.eachRow(function(bm){bl.data[bm].unshift(1)});++bl.width}var bg=bl.transpose();var bk=bg.multiply(bl).inverse().multiply(bg).multiply(bj);if(!bf){bf=bl}else{if(bi){bf=bf.clone();bf.eachRow(function(bm){bf.data[bm].unshift(1)});++bf.width}}return bf.multiply(bk)}function I(bh,bi,bg,bf){return af.call(this,bh.map(Math.log),bi,bg,bf).map(Math.exp)}function a8(bf,bh,bo,bq){var bk=bo||20,bj=bq||1e-7;var bl=bh;for(var bg=1;bg<=bk;bg++){var bn=bf(bl),bi=bn[0],bm=bn[1];var bp=bi/bm;bl-=bp;if(Math.abs(bp)<bj){return bl}}return new am("NUM")}function x(bk,bf,bj,bl,bi){var bh=Math.pow(1+bk,bf);var bg=bk?(bh-1)/bk:bf;return -(bl*bh+bj*bg*(1+bk*bi))}function ae(bj,bf,bi,bk,bh){if(!bj){return -bk-bi*bf}var bg=Math.pow(1+bj,bf);return -(bk+bi*(bg-1)/bj*(1+bj*bh))/bg}function ab(bi,bf,bj,bk,bh){if(!bi){return -(bk+bj)/bf}var bg=Math.pow(1+bi,bf);return -bi*(bk+bj*bg)/((1+bi*bh)*(bg-1))}function aV(bi,bh,bj,bk,bg){if(!bi){return -(bk+bj)/bh}var bf=bh*(1+bi*bg);return Math.log((bf-bk*bi)/(bf+bj*bi))/Math.log(1+bi)}function m(bf,bh,bi,bk,bg,bl){function bj(bm){var bn=Math.pow(1+bm,bf-1),bo=bn*(1+bm);return[bi*bo+bh*(1/bm+bg)*(bo-1)+bk,bf*bi*bn+bh*(-(bo-1)/(bm*bm)+(1/bm+bg)*bf*bn)]}return a8(bj,bl)}function T(bj,bg,bf,bk,bl,bi){if(bi==1&&bg==1){return 0}var bh=ab(bj,bf,bk,bl,bi);var bm=x(bj,bg-1,bh,bk,bi)*bj;return bi?bm/(1+bj):bm}function ar(bj,bg,bf,bk,bl,bi){var bh=ab(bj,bf,bk,bl,bi);return bh-T(bj,bg,bf,bk,bl,bi)}function aU(bl,bk,bq,bf,bi,bn){if(bn==1){bf--;bi--}var bp=Math.pow(1+bl,bk),bm=Math.pow(1+bl,bf-1),bh=Math.pow(1+bl,bi);var bg=bl*bq*bp/(bp-1);var bj=bm*bq-(bm-1)/bl*bg;var bo=bh*bq-(bh-1)/bl*bg;return bo-bj}function G(bj,bg,bk,bm,bf,bi){var bl=0;for(var bh=bm;bh<=bf;bh++){bl+=T(bj,bh,bg,bk,0,bi)}return bl}function n(bg,bj){var bh=0;for(var bf=0,bi=bj.length;bf<bi;bf++){bh+=bj[bf]*Math.pow(1+bg,-bf-1)}return bh}function a7(bh,bg){function bf(bi){var bl=0,bj=0;for(var bk=0,bm=bh.length;bk<bm;bk++){bl+=bh[bk]*Math.pow(1+bi,-bk-1);bj+=-bk*bh[bk]*Math.pow(1+bi,-bk-2)}return[bl,bj]}return a8(bf,bg)}function bb(bf,bg){return Math.pow(1+bf/bg,bg)-1}function L(bg,bf){return bf*(Math.pow(bg+1,1/bf)-1)}function Q(bh,bf,bj){var bi=0;for(var bg=0,bk=bf.length;bg<bk;bg++){bi+=bf[bg]*Math.pow(1+bh,(bj[0]-bj[bg])/365)}return bi}function D(bf,bh,bi){function bg(bj){var bm=bf[0],bk=0;for(var bl=1,bo=bf.length;bl<bo;bl++){var bn=(bh[0]-bh[bl])/365;bm+=bf[bl]*Math.pow(1+bj,bn);bk+=bn*bf[bl]*Math.pow(1+bj,bn-1)}return[bm,bk]}return a8(bg,bi)}function a6(bi,bg,bf,bj){var bh=-bj*bi;return bh*(1-bg/bf)}function an(bm,bk,bi,bl,bj){var bh=1-Math.pow(bk/bm,1/bi);bh=Math.floor(bh*1000+0.5)/1000;var bf=bm*bh*bj/12;if(bl==1){return bf}for(var bg=1;bg<bi;bg++){if(bg==bl-1){return(bm-bf)*bh}bf+=(bm-bf)*bh}return(bm-bf)*bh*(12-bj)/12}function U(bm,bk,bi,bl,bf){var bh=bf/bi;var bg=-bm*(Math.pow(1-bh,bl-1)-1);var bj=(bm-bg)*bh;bj=Math.min(bj,Math.max(0,bm-bg-bk));return bj}function at(bh,bg,bf){return(bh-bg)/bf}function ai(bi,bh,bg,bf){return(bi-bh)*(bg-bf+1)*2/(bg*(bg+1))}function aX(bk,br,bt,bh,bm,bq,bf){var bu=bq>=bt?1:bq/bt;function bv(bx,bA){var bz,bw,by;if(bu==1){bw=bA==1?bx:0}else{bw=bx*Math.pow(1-bu,bA-1)}by=bx*Math.pow(1-bu,bA);bz=by<br?bw-br:bw-by;return bz<0?0:bz}function bj(bx,bw,bD){var by=bx-br;var bF=Math.ceil(bD);var bz,bE=0,bC=0,bG=false;for(var bB=1;bB<=bF;bB++){if(!bG){var bA=bv(bx,bB);bE=by/(bw-bB+1);if(bE>bA){bz=bE;bG=true}else{bz=bA;by-=bA}}else{bz=bE}if(bB==bF){bz*=bD+1-bF}bC+=bz}return bC}var bn=Math.floor(bh),bs=Math.ceil(bm);var bp=0;if(bf){for(var bo=bn+1;bo<=bs;bo++){var bl=bv(bk,bo);if(bo==bn+1){bl*=Math.min(bm,bn+1)-bh}else{if(bo==bs){bl*=bm+1-bs}}bp+=bl}}else{var bg=bt;if(bh!=Math.floor(bh)){if(bq>1){if(bh>=bt/2){var bi=bh-bt/2;bh=bt/2;bm-=bi;bg+=1}}}bk-=bj(bk,bg,bh);bp=bj(bk,bt-bh,bm-bh)}return bp}function a9(bh,bg){var bi=bd(bh);var bf=bi.month+bg;var bj=bi.year+Math.floor(bf/12);bf%=12;if(bf<0){bf+=12}bi=Math.min(bi.date,aS(bj,bf));return ak(bj,bf,bi)}function a3(bh,bg,bf){if(bf==1||bf==2||bf==3){return bg-bh}return be(bh,bg,bf)}function a2(bm,bf,bh){var bl=bd(bm),bi=bd(bf);var bn=bi.year-bl.year;if(bn>0){bn=(bn-1)*bh}var bj,bk,bg=12/bh;do{bn++;bj=a9(bf,-bn*bg)}while(bm<bj);bn--;bk=a9(bf,-bn*bg);return[bj,bk]}function R(bj,bm,bg){var bl=bd(bm),bh=bd(bj);var bn=bl.year-bh.year;if(bn>0){bn=(bn-1)*bg}var bi=bj,bk,bf=12/bg;while(bm>bi){bk=bi;bn++;bi=a9(bj,bn*bf)}return[bk,bi]}function ah(bh,bf,bj,bi){var bg=a2(bh,bf,bj)[0];return a3(bg,bh,bi)}function w(bf,bg,bj,bi){if(bi==1){var bh=a2(bf,bg,bj);return a3(bh[0],bh[1],1)}if(bi==3){return 365/bj}return 360/bj}function a0(bf,bh,bj,bi){var bg=a2(bf,bh,bj)[1];return a3(bf,bg,bi)}function aD(bf,bg,bh){return a2(bf,bg,bh)[0]}function aJ(bf,bg,bh){return a2(bf,bg,bh)[1]}function aN(bg,bj,bk){var bi=bd(bg),bh=bd(bj);var bf=12*(bh.year-bi.year)+bh.month-bi.month;return 1+(bf*bk/12|0)}function aM(bf,bg){if(bg==3){return 365}if(bg==1){return ax(bf)?366:365}return 360}function aI(bf,bj,bi,bh,bk){var bg=aM(bd(bj).year,bk);return bi*bh*a3(bf,bj,bk)/bg}function c(bi,bk,bl,bw,bp,bj,bu,bf){var bm=0,bv=bp*bw/bj;var bs,bq,br,bg,bt,bo;var bn=bu%2===0?360:365;function bh(by,bx){return(bx-by)*bj/bn|0}if(bl<=bk){bs=a2(bl,bk,bj);bq=bs[0];br=bs[1];if(bq<=bi){return bv*a3(bi,bl,bu)/a3(bq,br,bu)}bs=a2(bi,bq,bj);bg=bs[0];bt=bs[1];bo=bh(bt,bl);return bv*(bo+a3(bi,bt,bu)/a3(bg,bt,bu)+(bl<br?a3(bq,bl,bu)/a3(bq,br,bu):0))}else{bs=R(bk,bl,bj);bq=bs[0];br=bs[1];bo=bh(bk,bl);if(br==bl){bm=bv*bo}else{bm=bv*(bo+a3(bq,bl,bu)/a3(bq,br,bu))}if(!bf){return bm}bs=a2(bi,bk,bj);bq=bs[0];br=bs[1];bo=bh(bi,bk);bm+=bv*(bo+a3(bi,br,bu)/a3(bq,br,bu));return bm}}function au(bf,bi,bk,bg,bj){var bh=bj%2===0?360:ax(bd(bf).year)?366:365;return(bg-bk)/bg*bh/a3(bf,bi,bj)}function N(bf,bi,bk,bg,bj){var bh=bj%2===0?360:ax(bd(bf).year)?366:365;return(bg-bk)/bk*bh/a3(bf,bi,bj)}function p(bf,bh,bj,bk,bi){var bg=bi%2===0?360:ax(bd(bf).year)?366:365;return bj/(1-bk*a3(bf,bh,bi)/bg)}function aa(bu,bs,bp,bl,bi,bh,br){var bo=1+((bs-bu)*bh/(br%2===0?360:365)|0);var bv=a2(bu,bs,bh),bk=bv[0],bn=bv[1];var bg=a3(bk,bu,br),bj=a3(bu,bn,br),bq=a3(bk,bn,br);var bt=100*bp/bh,bm=bl/bh,bf=bj/bq;if(bo==1){return(bi+bt)/(1+bf*bm)-bg/bq*bt}return bi/Math.pow(1+bm,bo-1+bf)+bt*Math.pow(1+bm,1-bo-bf)*(Math.pow(1+bm,bo)-1)/bm-bg/bq*bt}function aO(bg,bj,bl,bh,bk){var bi=a3(bg,bj,bk),bf=aM(bd(bj).year,bk);return bh-bl*bh*bi/bf}},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/borderpalette",["kendo.core","kendo.colorpicker","kendo.popup"],a)}(function(){(function(g){if(g.support.browser.msie&&g.support.browser.version<9){return}var f=g.jQuery;var b=["allBorders","insideBorders","insideHorizontalBorders","insideVerticalBorders","outsideBorders","leftBorder","topBorder","rightBorder","bottomBorder","noBorders"];var d=g.spreadsheet.messages.borderPalette={allBorders:"All borders",insideBorders:"Inside borders",insideHorizontalBorders:"Inside horizontal borders",insideVerticalBorders:"Inside vertical borders",outsideBorders:"Outside borders",leftBorder:"Left border",topBorder:"Top border",rightBorder:"Right border",bottomBorder:"Bottom border",noBorders:"No border",reset:"Reset color",customColor:"Custom color...",apply:"Apply",cancel:"Cancel"};function a(h){return function(i){i.preventDefault();return h.apply(this,arguments)}}var c=g.ui.Widget.extend({init:function(i,h){g.ui.Widget.call(this,i,h);this.element=i;this.color=h.color;this._resetButton();this._colorPalette();this._customColorPalette();this._customColorButton();this.resetButton.on("click",a(this.resetColor.bind(this)));this.customColorButton.on("click",a(this.customColor.bind(this)))},options:{name:"ColorChooser"},events:["change"],destroy:function(){g.unbind(this.dialog.element.find(".k-action-buttons"));this.dialog.destroy();this.colorPalette.destroy();this.resetButton.off("click");this.customColorButton.off("click")},value:function(h){if(h!==undefined){this.color=h;this.customColorButton.find(".k-icon").css("background-color",this.color);this.colorPalette.value(null);this.flatColorPicker.value(this.color)}else{return this.color}},_change:function(h){this.color=h;this.trigger("change",{value:h})},_colorPalette:function(){var h=f("<div />",{"class":"k-spreadsheet-color-palette"});var i=this.colorPalette=f("<div />").kendoColorPalette({palette:["#ffffff","#000000","#d6ecff","#4e5b6f","#7fd13b","#ea157a","#feb80a","#00addc","#738ac8","#1ab39f","#f2f2f2","#7f7f7f","#a7d6ff","#d9dde4","#e5f5d7","#fad0e4","#fef0cd","#c5f2ff","#e2e7f4","#c9f7f1","#d8d8d8","#595959","#60b5ff","#b3bcca","#cbecb0","#f6a1c9","#fee29c","#8be6ff","#c7d0e9","#94efe3","#bfbfbf","#3f3f3f","#007dea","#8d9baf","#b2e389","#f272af","#fed46b","#51d9ff","#aab8de","#5fe7d5","#a5a5a5","#262626","#003e75","#3a4453","#5ea226","#af0f5b","#c58c00","#0081a5","#425ea9","#138677","#7f7f7f","#0c0c0c","#00192e","#272d37","#3f6c19","#750a3d","#835d00","#00566e","#2c3f71","#0c594f"],value:this.color,change:function(j){this.customColorButton.find(".k-icon").css("background-color","transparent");this.flatColorPicker.value(null);this._change(j.value)}.bind(this)}).data("kendoColorPalette");h.append(i.wrapper).appendTo(this.element)},_customColorPalette:function(){var k=f("<div />",{"class":"k-spreadsheet-window",html:"<div></div><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: apply'>"+d.apply+"</button><button class='k-button' data-bind='click: close'>"+d.cancel+"</button></div>"});var j=this.dialog=k.appendTo(document.body).kendoWindow({animation:false,scrollable:false,resizable:false,maximizable:false,modal:true,visible:false,width:268,open:function(){this.center()}}).data("kendoWindow");j.one("activate",function(){this.element.find("[data-role=flatcolorpicker]").data("kendoFlatColorPicker")._hueSlider.resize()});var i=this.flatColorPicker=j.element.children().first().kendoFlatColorPicker().data("kendoFlatColorPicker");var h=g.observable({apply:function(){this.customColorButton.find(".k-icon").css("background-color",i.value());this.colorPalette.value(null);this._change(i.value());j.close()}.bind(this),close:function(){i.value(null);j.close()}});g.bind(j.element.find(".k-action-buttons"),h)},_resetButton:function(){this.resetButton=f("<a class='k-button k-reset-color' href='#'><span class='k-icon k-i-reset-color'></span>"+d.reset+"</a>").appendTo(this.element)},_customColorButton:function(){this.customColorButton=f("<a class='k-button k-custom-color' href='#'><span class='k-icon'></span>"+d.customColor+"</a>").appendTo(this.element)},resetColor:function(){this.colorPalette.value(null);this.flatColorPicker.value(null);this._change(null)},customColor:function(){this.dialog.open()}});var e=g.ui.Widget.extend({init:function(i,h){g.ui.Widget.call(this,i,h);this.element=i;this.color="#000";this.element.addClass("k-spreadsheet-border-palette");this._borderTypePalette();this._borderColorPalette();this.element.on("click",".k-spreadsheet-border-type-palette .k-button",a(this._click.bind(this)))},options:{name:"BorderPalette"},events:["change"],destroy:function(){this.colorChooser.destroy();this.element.off("click")},_borderTypePalette:function(){var j=d;var i=b.map(function(k){return'<a title="'+j[k]+'" href="#" data-border-type="'+k+'" class="k-button k-button-icon"><span class="k-icon k-i-'+g.toHyphens(k)+'"></span></a>'}).join("");var h=f("<div />",{"class":"k-spreadsheet-border-type-palette",html:i});h.appendTo(this.element)},_borderColorPalette:function(){var h=f("<div />",{"class":"k-spreadsheet-border-color-palette"});h.appendTo(this.element);this.colorChooser=new c(h,{color:this.color,change:this._colorChange.bind(this)})},_click:function(h){this.type=f(h.currentTarget).data("borderType");this.trigger("change",{type:this.type,color:this.color})},_colorChange:function(h){this.color=h.value;if(this.type){this.trigger("change",{type:this.type,color:this.color})}}});g.spreadsheet.ColorChooser=c;g.spreadsheet.BorderPalette=e}(window.kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/toolbar",["kendo.toolbar","kendo.colorpicker","kendo.combobox","kendo.dropdownlist","kendo.popup","spreadsheet/borderpalette"],a)}(function(){(function(z){if(z.support.browser.msie&&z.support.browser.version<9){return}var y=z.jQuery;var I=z.ui.ToolBar;var t=z.spreadsheet.messages.toolbar={addColumnLeft:"Add column left",addColumnRight:"Add column right",addRowAbove:"Add row above",addRowBelow:"Add row below",alignment:"Alignment",alignmentButtons:{justtifyLeft:"Align left",justifyCenter:"Center",justifyRight:"Align right",justifyFull:"Justify",alignTop:"Align top",alignMiddle:"Align middle",alignBottom:"Align bottom"},backgroundColor:"Background",bold:"Bold",borders:"Borders",colorPicker:{reset:"Reset color",customColor:"Custom color..."},copy:"Copy",cut:"Cut",deleteColumn:"Delete column",deleteRow:"Delete row",filter:"Filter",fontFamily:"Font",fontSize:"Font size",format:"Custom format...",formatTypes:{automatic:"Automatic",number:"Number",percent:"Percent",financial:"Financial",currency:"Currency",date:"Date",time:"Time",dateTime:"Date time",duration:"Duration",moreFormats:"More formats..."},formatDecreaseDecimal:"Decrease decimal",formatIncreaseDecimal:"Increase decimal",freeze:"Freeze panes",freezeButtons:{freezePanes:"Freeze panes",freezeRows:"Freeze rows",freezeColumns:"Freeze columns",unfreeze:"Unfreeze panes"},italic:"Italic",merge:"Merge cells",mergeButtons:{mergeCells:"Merge all",mergeHorizontally:"Merge horizontally",mergeVertically:"Merge vertically",unmerge:"Unmerge"},open:"Open...",paste:"Paste",quickAccess:{redo:"Redo",undo:"Undo"},exportAs:"Export...",toggleGridlines:"Toggle gridlines",sortAsc:"Sort ascending",sortDesc:"Sort descending",sortButtons:{sortSheetAsc:"Sort sheet A to Z",sortSheetDesc:"Sort sheet Z to A",sortRangeAsc:"Sort range A to Z",sortRangeDesc:"Sort range Z to A"},textColor:"Text Color",textWrap:"Wrap text",underline:"Underline",validation:"Data validation...",hyperlink:"Link"};var c={home:["open","exportAs",["cut","copy","paste"],["bold","italic","underline"],"hyperlink","backgroundColor","textColor","borders","fontSize","fontFamily","alignment","textWrap",["formatDecreaseDecimal","formatIncreaseDecimal"],"format","merge","freeze","filter","toggleGridlines"],insert:[["addColumnLeft","addColumnRight","addRowBelow","addRowAbove"],["deleteColumn","deleteRow"]],data:["sort","filter","validation"]};var j={open:{type:"open",overflow:"never",iconClass:"file-excel"},exportAs:{type:"exportAsDialog",dialogName:"exportAs",overflow:"never",text:"",iconClass:"file-excel"},bold:{type:"button",command:"PropertyChangeCommand",property:"bold",value:true,iconClass:"bold",togglable:true},italic:{type:"button",command:"PropertyChangeCommand",property:"italic",value:true,iconClass:"italic",togglable:true},underline:{type:"button",command:"PropertyChangeCommand",property:"underline",value:true,iconClass:"underline",togglable:true},formatDecreaseDecimal:{type:"button",command:"AdjustDecimalsCommand",value:-1,iconClass:"decimal-decrease"},formatIncreaseDecimal:{type:"button",command:"AdjustDecimalsCommand",value:+1,iconClass:"decimal-increase"},textWrap:{type:"button",command:"TextWrapCommand",property:"wrap",value:true,iconClass:"text-wrap",togglable:true},cut:{type:"button",command:"ToolbarCutCommand",iconClass:"cut"},copy:{type:"button",command:"ToolbarCopyCommand",iconClass:"copy"},paste:{type:"button",command:"ToolbarPasteCommand",iconClass:"paste"},separator:{type:"separator"},alignment:{type:"alignment",iconClass:"align-left"},backgroundColor:{type:"colorPicker",property:"background",iconClass:"paint"},textColor:{type:"colorPicker",property:"color",iconClass:"foreground-color"},fontFamily:{type:"fontFamily",property:"fontFamily",iconClass:"font-family"},fontSize:{type:"fontSize",property:"fontSize",iconClass:"font-size"},format:{type:"format",property:"format",iconClass:"custom-format"},filter:{type:"filter",property:"hasFilter",iconClass:"filter"},merge:{type:"merge",iconClass:"cells-merge"},freeze:{type:"freeze",iconClass:"pane-freeze"},borders:{type:"borders",iconClass:"borders-all"},formatCells:{type:"dialog",dialogName:"formatCells",overflow:"never"},hyperlink:{type:"dialog",dialogName:"hyperlink",iconClass:"link-horizontal",overflow:"never",text:""},toggleGridlines:{type:"button",command:"GridLinesChangeCommand",property:"gridLines",value:true,iconClass:"border-no",togglable:true},addColumnLeft:{type:"button",command:"AddColumnCommand",value:"left",iconClass:"table-column-insert-left"},addColumnRight:{type:"button",command:"AddColumnCommand",value:"right",iconClass:"table-column-insert-right"},addRowBelow:{type:"button",command:"AddRowCommand",value:"below",iconClass:"table-row-insert-below"},addRowAbove:{type:"button",command:"AddRowCommand",value:"above",iconClass:"table-row-insert-above"},deleteColumn:{type:"button",command:"DeleteColumnCommand",iconClass:"table-column-delete"},deleteRow:{type:"button",command:"DeleteRowCommand",iconClass:"table-row-delete"},sort:{type:"sort",iconClass:"sort-desc"},validation:{type:"dialog",dialogName:"validation",iconClass:"exception",overflow:"never"}};var k=I.extend({init:function(M,L){L.items=this._expandTools(L.tools||k.prototype.options.tools[L.toolbarName]);I.fn.init.call(this,M,L);var K=this._click.bind(this);this.element.addClass("k-spreadsheet-toolbar");this._addSeparators(this.element);this.bind({click:K,toggle:K})},_addSeparators:function(L){var K=L.children(".k-widget, a.k-button, .k-button-group");K.before("<span class='k-separator' />")},_expandTools:function(K){function L(Q){var N=y.isPlainObject(Q)?Q:j[Q]||{};var P="k-icon k-i-"+N.iconClass;var O=N.type;var R={button:{showText:"overflow"},colorPicker:{toolIcon:P,spriteCssClass:P},borders:{spriteCssClass:P},alignment:{spriteCssClass:P},merge:{spriteCssClass:P},freeze:{spriteCssClass:P}};var M=y.extend({name:N.name||Q,text:t[N.name||Q],icon:N.iconClass,attributes:{title:t[N.name||Q]}},R[O],N);if(O=="splitButton"){M.menuButtons=M.menuButtons.map(L)}M.attributes["data-tool"]=Q;if(N.property){M.attributes["data-property"]=N.property}return M}return K.reduce(function(N,M){if(y.isArray(M)){N.push({type:"buttonGroup",buttons:M.map(L)})}else{N.push(L.call(this,M))}return N},[])},_click:function(O){var N=O.target.attr("data-tool");var L=j[N]||{};var M=L.command;if(!M){return}var K={command:M,options:{property:L.property||null,value:L.value||null}};if(typeof K.options.value==="boolean"){K.options.value=O.checked?true:null}this.action(K)},events:["click","toggle","open","close","overflowOpen","overflowClose","action","dialog"],options:{name:"SpreadsheetToolBar",resizable:true,tools:c},action:function(K){this.trigger("action",K)},dialog:function(K){this.trigger("dialog",K)},refresh:function(L){var O=L;var P=this._tools();function K(U,X){var W=U.toolbar;var Y=U.overflow;var V=W&&W.options.togglable||Y&&Y.options.togglable;if(!V){return}var T=false;if(typeof X==="boolean"){T=X}else{if(typeof X==="string"){T=W.options.value===X}}W.toggle(T);if(Y){Y.toggle(T)}}function M(T,V){var U=T.toolbar;var W=T.overflow;if(U&&U.update){U.update(V)}if(W&&W.update){W.update(V)}}for(var N=0;N<P.length;N++){var S=P[N].property;var Q=P[N].tool;var R=z.isFunction(O[S])?O[S]():O;if(S=="gridLines"){R=O.sheet().showGridLines()}if(Q.type==="button"){K(Q,R)}else{M(Q,R)}}},_tools:function(){return this.element.find("[data-property]").toArray().map(function(K){K=y(K);return{property:K.attr("data-property"),tool:this._getItem(K)}}.bind(this))},destroy:function(){this.element.find("[data-command],.k-button").each(function(){var L=y(this);var K=L.data("instance");if(K&&K.destroy){K.destroy()}});I.fn.destroy.call(this)}});z.spreadsheet.ToolBar=k;var p=z.toolbar.Item.extend({init:function(L,M){var K=y("<select />").kendoDropDownList({height:"auto"}).data("kendoDropDownList");this.dropDownList=K;this.element=K.wrapper;this.options=L;this.toolbar=M;this.attributes();this.addUidAttr();this.addOverflowAttr();K.bind("open",this._open.bind(this));K.bind("change",this._change.bind(this));this.element.width(L.width).attr({"data-command":"PropertyChangeCommand","data-property":L.property})},_open:function(){var M=this.dropDownList;var K=M.list;var L;K.css({whiteSpace:"nowrap",width:"auto"});L=K.width();if(L){L+=20}else{L=M._listWidth}K.css("width",L+z.support.scrollbar());M._listWidth=L},_change:function(O){var K=O.sender;var N=K.value();var L=K.dataItem();var M=L?L.popup:undefined;if(M){this.toolbar.dialog({name:M})}else{this.toolbar.action({command:"PropertyChangeCommand",options:{property:this.options.property,value:N=="null"?null:N}})}},value:function(K){if(K!==undefined){this.dropDownList.value(K)}else{return this.dropDownList.value()}}});var d=z.toolbar.Item.extend({init:function(K,L){this.element=y("<a href='#' class='k-button k-button-icon'><span class='"+K.spriteCssClass+"'></span><span class='k-icon k-i-arrow-60-down'></span></a>");this.element.on("click touchend",this.open.bind(this)).attr("data-command",K.command);this.options=K;this.toolbar=L;this.attributes();this.addUidAttr();this.addOverflowAttr();this._popup()},destroy:function(){this.popup.destroy()},open:function(K){K.preventDefault();this.popup.toggle()},_popup:function(){var K=this.element;this.popup=y("<div class='k-spreadsheet-popup' />").appendTo(K).kendoPopup({anchor:K}).data("kendoPopup")}});z.toolbar.registerComponent("dialog",z.toolbar.ToolBarButton.extend({init:function(K,L){z.toolbar.ToolBarButton.fn.init.call(this,K,L);this._dialogName=K.dialogName;this.element.bind("click touchend",this.open.bind(this)).data("instance",this)},open:function(){this.toolbar.dialog({name:this._dialogName})}}));z.toolbar.registerComponent("exportAsDialog",z.toolbar.Item.extend({init:function(K,L){this._dialogName=K.dialogName;this.toolbar=L;this.element=y("<button class='k-button k-button-icon' title='"+K.attributes.title+"'><span class='k-icon k-i-file-excel' /></button>").data("instance",this);this.element.bind("click",this.open.bind(this)).data("instance",this)},open:function(){this.toolbar.dialog({name:this._dialogName})}}));var l=z.toolbar.OverflowButton.extend({init:function(L,M){z.toolbar.OverflowButton.fn.init.call(this,L,M);this.element.on("click touchend",this._click.bind(this));this.message=this.options.text;var K=this.element.data("button");this.element.data(this.options.type,K)},_click:y.noop});var H=d.extend({init:function(K,L){d.fn.init.call(this,K,L);this.popup.element.addClass("k-spreadsheet-colorpicker");this.colorChooser=new z.spreadsheet.ColorChooser(this.popup.element,{change:this._colorChange.bind(this)});this.element.attr({"data-property":K.property});this.element.data({type:"colorPicker",colorPicker:this,instance:this})},destroy:function(){this.colorChooser.destroy();d.fn.destroy.call(this)},update:function(K){this.value(K)},value:function(K){this.colorChooser.value(K)},_colorChange:function(K){this.toolbar.action({command:"PropertyChangeCommand",options:{property:this.options.property,value:K.sender.value()}});this.popup.close()}});var w=l.extend({init:function(K,L){K.iconName="text";l.fn.init.call(this,K,L)},_click:function(){this.toolbar.dialog({name:"colorPicker",options:{title:this.options.property,property:this.options.property}})}});z.toolbar.registerComponent("colorPicker",H,w);var J=[8,9,10,11,12,13,14,16,18,20,22,24,26,28,36,48,72];var g=12;var E=z.toolbar.Item.extend({init:function(K,L){var M=y("<input />").kendoComboBox({change:this._valueChange.bind(this),clearButton:false,dataSource:K.fontSizes||J,value:g}).data("kendoComboBox");this.comboBox=M;this.element=M.wrapper;this.options=K;this.toolbar=L;this.attributes();this.addUidAttr();this.addOverflowAttr();this.element.width(K.width).attr({"data-command":"PropertyChangeCommand","data-property":K.property});this.element.data({type:"fontSize",fontSize:this})},_valueChange:function(K){this.toolbar.action({command:"PropertyChangeCommand",options:{property:this.options.property,value:z.parseInt(K.sender.value())}})},update:function(K){this.value(z.parseInt(K)||g)},value:function(K){if(K!==undefined){this.comboBox.value(K)}else{return this.comboBox.value()}}});var u=l.extend({_click:function(){this.toolbar.dialog({name:"fontSize",options:{sizes:J,defaultSize:g}})},update:function(K){this._value=K||g;this.element.find(".k-text").text(this.message+" ("+this._value+") ...")}});z.toolbar.registerComponent("fontSize",E,u);var r=["Arial","Courier New","Georgia","Times New Roman","Trebuchet MS","Verdana"];var o="Arial";var s=p.extend({init:function(K,L){p.fn.init.call(this,K,L);var M=this.dropDownList;M.setDataSource(K.fontFamilies||r);M.value(o);this.element.data({type:"fontFamily",fontFamily:this})},update:function(K){this.value(K||o)}});var B=l.extend({_click:function(){this.toolbar.dialog({name:"fontFamily",options:{fonts:r,defaultFont:o}})},update:function(K){this._value=K||o;this.element.find(".k-text").text(this.message+" ("+this._value+") ...")}});z.toolbar.registerComponent("fontFamily",s,B);var h=z.spreadsheet.formats={automatic:null,number:"#,0.00",percent:"0.00%",financial:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',currency:"$#,##0.00;[Red]$#,##0.00",date:"m/d/yyyy",time:"h:mm:ss AM/PM",dateTime:"m/d/yyyy h:mm",duration:"[h]:mm:ss"};var b=p.extend({_revertTitle:function(K){K.sender.value("");K.sender.wrapper.width("auto")},init:function(K,M){p.fn.init.call(this,K,M);var N=this.dropDownList;var L="<span class='k-icon k-i-"+K.iconClass+"' style='line-height: 1em; width: 1.35em;'></span>";N.bind("change",this._revertTitle.bind(this));N.bind("dataBound",this._revertTitle.bind(this));N.setOptions({dataValueField:"format",dataTextField:"name",dataValuePrimitive:true,valueTemplate:L,template:"# if (data.sample) { #<span class='k-spreadsheet-sample'>#: data.sample #</span># } ##: data.name #"});N.text(L);N.setDataSource([{format:h.automatic,name:t.formatTypes.automatic},{format:h.number,name:t.formatTypes.number,sample:"1,499.99"},{format:h.percent,name:t.formatTypes.percent,sample:"14.50%"},{format:h.financial,name:t.formatTypes.financial,sample:"(1,000.12)"},{format:h.currency,name:t.formatTypes.currency,sample:"$1,499.99"},{format:h.date,name:t.formatTypes.date,sample:"4/21/2012"},{format:h.time,name:t.formatTypes.time,sample:"5:49:00 PM"},{format:h.dateTime,name:t.formatTypes.dateTime,sample:"4/21/2012 5:49:00"},{format:h.duration,name:t.formatTypes.duration,sample:"168:05:00"},{popup:"formatCells",name:t.formatTypes.moreFormats}]);this.element.data({type:"format",format:this})}});var a=l.extend({_click:function(){this.toolbar.dialog({name:"formatCells"})}});z.toolbar.registerComponent("format",b,a);var A=d.extend({init:function(K,L){d.fn.init.call(this,K,L);this._borderPalette();this.element.data({type:"borders",instance:this})},destroy:function(){this.borderPalette.destroy();d.fn.destroy.call(this)},_borderPalette:function(){var K=y("<div />").appendTo(this.popup.element);this.borderPalette=new z.spreadsheet.BorderPalette(K,{change:this._action.bind(this)})},_action:function(K){this.toolbar.action({command:"BorderChangeCommand",options:{border:K.type,style:{size:1,color:K.color}}})}});var q=l.extend({_click:function(){this.toolbar.dialog({name:"borders"})}});z.toolbar.registerComponent("borders",A,q);var G=d.extend({init:function(K,L){d.fn.init.call(this,K,L);this.element.attr({"data-property":"alignment"});this._commandPalette();this.popup.element.on("click",".k-button",function(M){this._action(y(M.currentTarget))}.bind(this));this.element.data({type:"alignment",alignment:this,instance:this})},buttons:[{property:"textAlign",value:"left",iconClass:"align-left",text:t.alignmentButtons.justtifyLeft},{property:"textAlign",value:"center",iconClass:"align-center",text:t.alignmentButtons.justifyCenter},{property:"textAlign",value:"right",iconClass:"align-right",text:t.alignmentButtons.justifyRight},{property:"textAlign",value:"justify",iconClass:"align-justify",text:t.alignmentButtons.justifyFull},{property:"verticalAlign",value:"top",iconClass:"align-top",text:t.alignmentButtons.alignTop},{property:"verticalAlign",value:"center",iconClass:"align-middle",text:t.alignmentButtons.alignMiddle},{property:"verticalAlign",value:"bottom",iconClass:"align-bottom",text:t.alignmentButtons.alignBottom}],destroy:function(){this.popup.element.off();d.fn.destroy.call(this)},update:function(K){var L=K.textAlign();var N=K.verticalAlign();var M=this.popup.element;M.find(".k-button").removeClass("k-state-active");if(L){M.find("[data-property=textAlign][data-value="+L+"]").addClass("k-state-active")}if(N){M.find("[data-property=verticalAlign][data-value="+N+"]").addClass("k-state-active")}},_commandPalette:function(){var L=this.buttons;var K=y("<div />").appendTo(this.popup.element);L.forEach(function(N,M){var O="<a title='"+N.text+"' data-property='"+N.property+"' data-value='"+N.value+"' class='k-button k-button-icon'><span class='k-icon k-i-"+N.iconClass+"'></span></a>";if(M!==0&&L[M-1].property!==N.property){K.append(y("<span class='k-separator' />"))}K.append(O)})},_action:function(K){var M=K.attr("data-property");var L=K.attr("data-value");this.toolbar.action({command:"PropertyChangeCommand",options:{property:M,value:L}})}});var e=l.extend({_click:function(){this.toolbar.dialog({name:"alignment"})}});z.toolbar.registerComponent("alignment",G,e);var C=d.extend({init:function(K,L){d.fn.init.call(this,K,L);this._commandPalette();this.popup.element.on("click",".k-button",function(M){this._action(y(M.currentTarget))}.bind(this));this.element.data({type:"merge",merge:this,instance:this})},buttons:[{value:"cells",iconClass:"cells-merge",text:t.mergeButtons.mergeCells},{value:"horizontally",iconClass:"cells-merge-horizontally",text:t.mergeButtons.mergeHorizontally},{value:"vertically",iconClass:"cells-merge-vertically",text:t.mergeButtons.mergeVertically},{value:"unmerge",iconClass:"table-unmerge",text:t.mergeButtons.unmerge}],destroy:function(){this.popup.element.off();d.fn.destroy.call(this)},_commandPalette:function(){var K=y("<div />").appendTo(this.popup.element);this.buttons.forEach(function(L){var M="<a title='"+L.text+"' data-value='"+L.value+"' class='k-button k-button-icontext'><span class='k-icon k-i-"+L.iconClass+"'></span>"+L.text+"</a>";K.append(M)})},_action:function(K){var L=K.attr("data-value");this.toolbar.action({command:"MergeCellCommand",options:{value:L}})}});var m=l.extend({_click:function(){this.toolbar.dialog({name:"merge"})}});z.toolbar.registerComponent("merge",C,m);var F=d.extend({init:function(K,L){d.fn.init.call(this,K,L);this._commandPalette();this.popup.element.on("click",".k-button",function(M){this._action(y(M.currentTarget))}.bind(this));this.element.data({type:"freeze",freeze:this,instance:this})},buttons:[{value:"panes",iconClass:"pane-freeze",text:t.freezeButtons.freezePanes},{value:"rows",iconClass:"row-freeze",text:t.freezeButtons.freezeRows},{value:"columns",iconClass:"column-freeze",text:t.freezeButtons.freezeColumns},{value:"unfreeze",iconClass:"table-unmerge",text:t.freezeButtons.unfreeze}],destroy:function(){this.popup.element.off();d.fn.destroy.call(this)},_commandPalette:function(){var K=y("<div />").appendTo(this.popup.element);this.buttons.forEach(function(L){var M="<a title='"+L.text+"' data-value='"+L.value+"' class='k-button k-button-icontext'><span class='k-icon k-i-"+L.iconClass+"'></span>"+L.text+"</a>";K.append(M)})},_action:function(K){var L=K.attr("data-value");this.toolbar.action({command:"FreezePanesCommand",options:{value:L}})}});var i=l.extend({_click:function(){this.toolbar.dialog({name:"freeze"})}});z.toolbar.registerComponent("freeze",F,i);var D=p.extend({_revertTitle:function(K){K.sender.value("");K.sender.wrapper.width("auto")},init:function(K,L){p.fn.init.call(this,K,L);var M=this.dropDownList;M.bind("change",this._revertTitle.bind(this));M.bind("dataBound",this._revertTitle.bind(this));M.setOptions({valueTemplate:"<span class='k-icon k-i-"+K.iconClass+"' style='line-height: 1em; width: 1.35em;'></span>",template:"<span class='k-icon k-i-#= iconClass #' style='line-height: 1em; width: 1.35em;'></span>#=text#",dataTextField:"text",dataValueField:"value"});M.setDataSource([{value:"asc",sheet:false,text:t.sortButtons.sortRangeAsc,iconClass:"sort-asc"},{value:"desc",sheet:false,text:t.sortButtons.sortRangeDesc,iconClass:"sort-desc"}]);M.select(0);this.element.data({type:"sort",sort:this})},_change:function(M){var K=M.sender;var L=K.dataItem();if(L){this.toolbar.action({command:"SortCommand",options:{value:L.value,sheet:L.sheet}})}},value:y.noop});var x=l.extend({_click:function(){this.toolbar.dialog({name:"sort"})}});z.toolbar.registerComponent("sort",D,x);var f=z.toolbar.ToolBarButton.extend({init:function(K,L){K.showText="overflow";z.toolbar.ToolBarButton.fn.init.call(this,K,L);this.element.on("click",this._click.bind(this));this.element.data({type:"filter",filter:this})},_click:function(){this.toolbar.action({command:"FilterCommand"})},update:function(K){this.toggle(K)}});var v=l.extend({init:function(K,L){l.fn.init.call(this,K,L);this.element.data({type:"filter",filter:this})},_click:function(){this.toolbar.action({command:"FilterCommand"})},update:function(K){this.toggle(K)}});z.toolbar.registerComponent("filter",f,v);var n=z.toolbar.Item.extend({init:function(K,L){this.toolbar=L;this.element=y("<div class='k-button k-upload-button k-button-icon'><span class='k-icon k-i-folder-open' /></div>").data("instance",this);this._title=K.attributes.title;this._reset()},_reset:function(){this.element.remove("input");y("<input type='file' autocomplete='off' accept='.xlsx'/>").attr("title",this._title).one("change",this._change.bind(this)).appendTo(this.element)},_change:function(K){this.toolbar.action({command:"OpenCommand",options:{file:K.target.files[0]}});this._reset()}});z.toolbar.registerComponent("open",n);z.spreadsheet.TabStrip=z.ui.TabStrip.extend({init:function(M,K){z.ui.TabStrip.fn.init.call(this,M,K);M.addClass("k-spreadsheet-tabstrip");this._quickAccessButtons();this.toolbars={};var L=K.dataSource;this.contentElements.each(function(N,O){this._toolbar(y(O),L[N].id,K.toolbarOptions[L[N].id])}.bind(this));this.one("activate",function(){this.toolbars[this.options.dataSource[0].id].resize()})},events:z.ui.TabStrip.fn.events.concat(["action","dialog"]),destroy:function(){this.quickAccessToolBar.off("click");z.ui.TabStrip.fn.destroy.call(this);for(var K in this.toolbars){this.toolbars[K].destroy()}},action:function(K){this.trigger("action",K)},dialog:function(K){this.trigger("dialog",K)},refreshTools:function(K){var M=this.toolbars;for(var L in M){if(M.hasOwnProperty(L)){M[L].refresh(K)}}},_quickAccessButtons:function(){var K=[{title:t.quickAccess.undo,iconClass:"undo",action:"undo"},{title:t.quickAccess.redo,iconClass:"redo",action:"redo"}];var L=z.template("<a href='\\#' title='#= title #' data-action='#= action #' class='k-button k-button-icon'><span class='k-icon k-i-#=iconClass#'></span></a>");this.quickAccessToolBar=y("<div />",{"class":"k-spreadsheet-quick-access-toolbar",html:z.render(L,K)}).insertBefore(this.wrapper);this.quickAccessToolBar.on("click",".k-button",function(N){N.preventDefault();var M=y(N.currentTarget).attr("data-action");this.action({action:M})}.bind(this));this.quickAccessAdjust()},quickAccessAdjust:function(){this.tabGroup.css("padding-left",z._outerWidth(this.quickAccessToolBar))},_toolbar:function(K,M,O){var N;var L;if(this.toolbars[M]){this.toolbars[M].destroy();K.children(".k-toolbar").remove()}if(O){N=K.html("<div />").children("div");L={tools:typeof O==="boolean"?undefined:O,toolbarName:M,action:this.action.bind(this),dialog:this.dialog.bind(this)};this.toolbars[M]=new z.spreadsheet.ToolBar(N,L)}}})}(window.kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/dialogs",["kendo.core","kendo.binder","kendo.validator"],a)}(function(){(function(r){if(r.support.browser.msie&&r.support.browser.version<9){return}var c=r.jQuery;var b=r.data.ObservableObject;var A=r.spreadsheet.messages.dialogs={apply:"Apply",save:"Save",cancel:"Cancel",remove:"Remove",retry:"Retry",revert:"Revert",okText:"OK",formatCellsDialog:{title:"Format",categories:{number:"Number",currency:"Currency",date:"Date"}},fontFamilyDialog:{title:"Font"},fontSizeDialog:{title:"Font size"},bordersDialog:{title:"Borders"},alignmentDialog:{title:"Alignment",buttons:{justtifyLeft:"Align left",justifyCenter:"Center",justifyRight:"Align right",justifyFull:"Justify",alignTop:"Align top",alignMiddle:"Align middle",alignBottom:"Align bottom"}},mergeDialog:{title:"Merge cells",buttons:{mergeCells:"Merge all",mergeHorizontally:"Merge horizontally",mergeVertically:"Merge vertically",unmerge:"Unmerge"}},freezeDialog:{title:"Freeze panes",buttons:{freezePanes:"Freeze panes",freezeRows:"Freeze rows",freezeColumns:"Freeze columns",unfreeze:"Unfreeze panes"}},confirmationDialog:{text:"Are you sure you want to remove this sheet?",title:"Sheet remove"},validationDialog:{title:"Data Validation",hintMessage:"Please enter a valid {0} value {1}.",hintTitle:"Validation {0}",criteria:{any:"Any value",number:"Number",text:"Text",date:"Date",custom:"Custom Formula",list:"List"},comparers:{greaterThan:"greater than",lessThan:"less than",between:"between",notBetween:"not between",equalTo:"equal to",notEqualTo:"not equal to",greaterThanOrEqualTo:"greater than or equal to",lessThanOrEqualTo:"less than or equal to"},comparerMessages:{greaterThan:"greater than {0}",lessThan:"less than {0}",between:"between {0} and {1}",notBetween:"not between {0} and {1}",equalTo:"equal to {0}",notEqualTo:"not equal to {0}",greaterThanOrEqualTo:"greater than or equal to {0}",lessThanOrEqualTo:"less than or equal to {0}",custom:"that satisfies the formula: {0}"},labels:{criteria:"Criteria",comparer:"Comparer",min:"Min",max:"Max",value:"Value",start:"Start",end:"End",onInvalidData:"On invalid data",rejectInput:"Reject input",showWarning:"Show warning",showHint:"Show hint",hintTitle:"Hint title",hintMessage:"Hint message",ignoreBlank:"Ignore blank",showListButton:"Display button to show list",showCalendarButton:"Display button to show calendar"},placeholders:{typeTitle:"Type title",typeMessage:"Type message"}},exportAsDialog:{title:"Export...",labels:{scale:"Scale",fit:"Fit to page",fileName:"File name",saveAsType:"Save as type",exportArea:"Export",paperSize:"Paper size",margins:"Margins",orientation:"Orientation",print:"Print",guidelines:"Guidelines",center:"Center",horizontally:"Horizontally",vertically:"Vertically"}},modifyMergedDialog:{errorMessage:"Cannot change part of a merged cell."},rangeDisabledDialog:{errorMessage:"Destination range contains disabled cells."},incompatibleRangesDialog:{errorMessage:"Incompatible ranges"},noFillDirectionDialog:{errorMessage:"Cannot determine fill direction"},duplicateSheetNameDialog:{errorMessage:"Duplicate sheet name"},overflowDialog:{errorMessage:"Cannot paste, because the copy area and the paste area are not the same size and shape."},useKeyboardDialog:{title:"Copying and pasting",errorMessage:"These actions cannot be invoked through the menu. Please use the keyboard shortcuts instead:",labels:{forCopy:"for copy",forCut:"for cut",forPaste:"for paste"}},unsupportedSelectionDialog:{errorMessage:"That action cannot be performed on multiple selection."},linkDialog:{title:"Hyperlink",labels:{text:"Text",url:"Address",removeLink:"Remove link"}}};var f={};r.spreadsheet.dialogs={register:function(D,E){f[D]=E},registered:function(D){return !!f[D]},create:function(E,D){var F=f[E];if(F){return new F(D)}}};var y=r.spreadsheet.SpreadsheetDialog=r.Observable.extend({init:function(D){r.Observable.fn.init.call(this,D);this.options=c.extend(true,{},this.options,D);this.bind(this.events,D)},events:["close","activate"],options:{autoFocus:true},dialog:function(){if(!this._dialog){this._dialog=c("<div class='k-spreadsheet-window k-action-window' />").addClass(this.options.className||"").append(r.template(this.options.template)({messages:r.spreadsheet.messages.dialogs||A,errors:this.options.errors})).appendTo(document.body).kendoWindow({autoFocus:this.options.autoFocus,scrollable:false,resizable:false,modal:true,visible:false,width:this.options.width||320,title:this.options.title,open:function(){this.center()},close:this._onDialogClose.bind(this),activate:this._onDialogActivate.bind(this),deactivate:this._onDialogDeactivate.bind(this)}).data("kendoWindow")}return this._dialog},_onDialogClose:function(){this.trigger("close",{action:this._action})},_onDialogActivate:function(){this.trigger("activate")},_onDialogDeactivate:function(){this.trigger("deactivate");this.destroy()},destroy:function(){if(this._dialog){this._dialog.destroy();this._dialog=null}},open:function(){this.dialog().open()},apply:function(){this.close()},close:function(){this._action="close";this.dialog().close()}});function i(D,E){return r.spreadsheet.formatting.text(D,E)}var C=r.spreadsheet.FormatCellsViewModel=b.extend({init:function(D){b.fn.init.call(this,D);this.useCategory(this.category)},useCategory:function(F){var E=F&&F.type||"number";var D=E=="currency";this.category=F;this.set("showCurrencyFilter",D&&this.currencies.length>1);if(!D){this.set("formats",this.allFormats[E+"Formats"])}else{this.currency(this.currencies[0])}this.useFirstFormat()},useFirstFormat:function(){if(this.formats.length){this.set("format",this.formats[0].value)}},currency:function(E){if(E!==undefined){this._currency=E;var F=E.value;var D=[{currency:F,decimals:true},{currency:F,decimals:true,iso:true},{currency:F,decimals:false}];D=D.map(function(G){G=C.convert.currency(G);return{value:G,name:i(1000,G)}});this.set("formats",D);this.useFirstFormat()}return this._currency||this.currencies[0]},categoryFilter:function(D){if(D!==undefined){this.useCategory(D)}return this.category},preview:function(){var E=this.get("format");var D=this.value||0;if(E&&E.length){return i(D,E)}else{return D}}});C.convert={currency:function(D){function E(H,I){return new Array(I+1).join(H)}var G=D.currency;var F=G.pattern[1];if(D.decimals){F=F.replace(/n/g,"n"+G["."]+E("0",G.decimals))}if(D.iso){F='"'+G.abbr+'" '+F.replace(/\s*\$\s*/g,"")}else{F=F.replace(/\$/g,G.symbol)}F=F.replace(/n/g,"?");return F},date:function(D){if(/T|Z/.test(D)){return""}return D.toLowerCase().replace(/tt/g,"AM/PM").replace(/'/g,'"')}};function t(G,H){var D=[];var E=[];for(var F=0;F<H.length;F++){if(c.inArray(H[F][G],E)==-1){D.push(H[F]);E.push(H[F][G])}}return D}var p=y.extend({init:function(E){var F=r.spreadsheet.messages.dialogs.formatCellsDialog||A;var D={title:F.title,categories:[{type:"number",name:F.categories.number},{type:"currency",name:F.categories.currency},{type:"date",name:F.categories.date}]};y.fn.init.call(this,c.extend(D,E));this._generateFormats()},options:{className:"k-spreadsheet-format-cells",template:"<div class='k-root-tabs' data-role='tabstrip' data-text-field='name' data-bind='source: categories, value: categoryFilter' data-animation='false' /><div class='k-spreadsheet-preview' data-bind='text: preview' /><script type='text/x-kendo-template' id='format-item-template'>\\#: data.name \\#<\/script><select data-role='dropdownlist' class='k-format-filter' data-text-field='description' data-value-field='value.name' data-bind='visible: showCurrencyFilter, value: currency, source: currencies' /><ul data-role='staticlist' tabindex='0' class='k-list k-reset' data-template='format-item-template' data-value-primitive='true' data-value-field='value' data-bind='source: formats, value: format' /><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: apply'>#: messages.apply #</button><button class='k-button' data-bind='click: close'>#: messages.cancel #</button></div>"},_generateFormats:function(){var D=this.options;if(!D.currencies){D.currencies=p.currenciesFrom(r.cultures)}if(!D.numberFormats){D.numberFormats=[{value:"#.00%",name:"100.00%"},{value:"#%",name:"100%"},{value:"#.00",name:"1024.00"},{value:"#,###.00",name:"1,024.00"}]}if(!D.dateFormats){var E=r.cultures.current.calendars.standard.patterns;D.dateFormats=t("value",c.map(E,function(F){F=C.convert.date(F);if(!F){return}return{value:F,name:i(34567.7678,F)}}))}},open:function(F){var G=this.options;var I=F.value();var E=G.categories.slice(0);var H;this.viewModel=new C({currencies:G.currencies.slice(0),allFormats:{numberFormats:G.numberFormats.slice(0),dateFormats:G.dateFormats.slice(0)},categories:E,format:F.format(),category:I instanceof Date?E[2]:E[0],apply:this.apply.bind(this),close:this.close.bind(this),value:I});y.fn.open.call(this);H=this.dialog().element;r.bind(H,this.viewModel);var D=H.find("select.k-format-filter").data("kendoDropDownList");if(G.currencies.length>10){D.setOptions({filter:"contains"})}H.find(r.roleSelector("staticlist")).parent().addClass("k-list-wrapper")},apply:function(){var D=this.viewModel.format;y.fn.apply.call(this);this.trigger("action",{command:"PropertyChangeCommand",options:{property:"format",value:D}})}});p.currenciesFrom=function(D){return t("description",c.map(D,function(F,G){if(!/-/.test(G)){return}var E=F.numberFormat.currency;var H=r.format("{0} ({1}, {2})",E.name,E.abbr,E.symbol);return{description:H,value:E}}))};r.spreadsheet.dialogs.register("formatCells",p);r.spreadsheet.dialogs.FormatCellsDialog=p;var k=y.extend({options:{className:"k-spreadsheet-message",title:"",messageId:"",text:"",template:"<div class='k-spreadsheet-message-content' data-bind='text: text' /><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: close'>#= messages.okText #</button></div>"},open:function(){y.fn.open.call(this);var D=this.options;var E=D.text;if(D.messageId){E=r.getter(D.messageId,true)(r.spreadsheet.messages.dialogs)}r.bind(this.dialog().element,{text:E,close:this.close.bind(this)})}});r.spreadsheet.dialogs.register("message",k);var x=y.extend({init:function(E){var F=r.spreadsheet.messages.dialogs.confirmationDialog||A;var D={title:F.title,text:F.text};y.fn.init.call(this,c.extend(D,E))},options:{className:"k-spreadsheet-message",messageId:"",template:"<div class='k-spreadsheet-message-content' data-bind='text: text' /><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: confirm'>#= messages.okText #</button><button class='k-button' data-bind='click: cancel'>#= messages.cancel #</button></div>"},open:function(){y.fn.open.call(this);var D=this.options;var E=D.text;if(D.messageId){E=r.getter(D.messageId,true)(r.spreadsheet.messages.dialogs)}r.bind(this.dialog().element,{text:E,confirm:this.confirm.bind(this),cancel:this.close.bind(this)})},isConfirmed:function(){return this._confirmed},confirm:function(){this._confirmed=true;this.close()}});r.spreadsheet.dialogs.register("confirmation",x);var u=y.extend({options:{className:"k-spreadsheet-message",title:"",messageId:"",text:"",template:"<div class='k-spreadsheet-message-content' data-bind='text: text' /><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: retry'>#= messages.retry #</button><button class='k-button' data-bind='click: cancel'>#= messages.cancel #</button></div>"},open:function(){y.fn.open.call(this);var D=this.options;var E=D.text;if(D.messageId){E=r.getter(D.messageId,true)(r.spreadsheet.messages.dialogs)}r.bind(this.dialog().element,{text:E,retry:this.retry.bind(this),cancel:this.close.bind(this)})},retry:function(){this._retry=true;this.close()}});r.spreadsheet.dialogs.register("validationError",u);var j=y.extend({init:function(D){var E=r.spreadsheet.messages.dialogs.fontFamilyDialog||A;y.fn.init.call(this,c.extend({title:E.title},D));this._list()},options:{template:"<ul class='k-list k-reset'></ul>"},_list:function(){var D=this.dialog().element.find("ul");var F=this.options.fonts;var E=this.options.defaultFont;this.list=new r.ui.StaticList(D,{dataSource:new r.data.DataSource({data:F}),template:"#: data #",value:E,change:this.apply.bind(this)});this.list.dataSource.fetch()},apply:function(D){y.fn.apply.call(this);this.trigger("action",{command:"PropertyChangeCommand",options:{property:"fontFamily",value:D.sender.value()[0]}})}});r.spreadsheet.dialogs.register("fontFamily",j);var o=y.extend({init:function(D){var E=r.spreadsheet.messages.dialogs.fontSizeDialog||A;y.fn.init.call(this,c.extend({title:E.title},D));this._list()},options:{template:"<ul class='k-list k-reset'></ul>"},_list:function(){var D=this.dialog().element.find("ul");var E=this.options.sizes;var F=this.options.defaultSize;this.list=new r.ui.StaticList(D,{dataSource:new r.data.DataSource({data:E}),template:"#: data #",value:F,change:this.apply.bind(this)});this.list.dataSource.fetch()},apply:function(D){y.fn.apply.call(this);this.trigger("action",{command:"PropertyChangeCommand",options:{property:"fontSize",value:r.parseInt(D.sender.value()[0])}})}});r.spreadsheet.dialogs.register("fontSize",o);var e=y.extend({init:function(D){var E=r.spreadsheet.messages.dialogs.bordersDialog||A;y.fn.init.call(this,c.extend({title:E.title},D));this.element=this.dialog().element;this._borderPalette();this.viewModel=r.observable({apply:this.apply.bind(this),close:this.close.bind(this)});r.bind(this.element.find(".k-action-buttons"),this.viewModel)},options:{width:177,template:"<div></div><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: apply'>#: messages.apply #</button><button class='k-button' data-bind='click: close'>#: messages.cancel #</button></div>"},apply:function(){y.fn.apply.call(this);var D=this.value();this.trigger("action",{command:"BorderChangeCommand",options:{border:D.type,style:{size:1,color:D.color}}})},_borderPalette:function(){var D=this.dialog().element.find("div:first");this.borderPalette=new r.spreadsheet.BorderPalette(D,{change:this.value.bind(this)})},value:function(D){if(D===undefined){return this._state}else{this._state=D}}});r.spreadsheet.dialogs.register("borders",e);var B=y.extend({init:function(D){y.fn.init.call(this,D);this.element=this.dialog().element;this.property=D.property;this.options.title=D.title;this.viewModel=r.observable({apply:this.apply.bind(this),close:this.close.bind(this)});r.bind(this.element.find(".k-action-buttons"),this.viewModel)},options:{template:"<div></div><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: apply'>#: messages.apply #</button><button class='k-button' data-bind='click: close'>#: messages.cancel #</button></div>"},apply:function(){y.fn.apply.call(this);this.trigger("action",{command:"PropertyChangeCommand",options:{property:this.property,value:this.value()}})},value:function(D){if(D===undefined){return this._value}else{this._value=D.value}}});var n=B.extend({init:function(D){D.width=177;B.fn.init.call(this,D);this._colorPalette()},_colorPalette:function(){var D=this.dialog().element.find("div:first");this.colorPalette=D.kendoColorPalette({palette:["#ffffff","#000000","#d6ecff","#4e5b6f","#7fd13b","#ea157a","#feb80a","#00addc","#738ac8","#1ab39f","#f2f2f2","#7f7f7f","#a7d6ff","#d9dde4","#e5f5d7","#fad0e4","#fef0cd","#c5f2ff","#e2e7f4","#c9f7f1","#d8d8d8","#595959","#60b5ff","#b3bcca","#cbecb0","#f6a1c9","#fee29c","#8be6ff","#c7d0e9","#94efe3","#bfbfbf","#3f3f3f","#007dea","#8d9baf","#b2e389","#f272af","#fed46b","#51d9ff","#aab8de","#5fe7d5","#a5a5a5","#262626","#003e75","#3a4453","#5ea226","#af0f5b","#c58c00","#0081a5","#425ea9","#138677","#7f7f7f","#0c0c0c","#00192e","#272d37","#3f6c19","#750a3d","#835d00","#00566e","#2c3f71","#0c594f"],change:this.value.bind(this)}).data("kendoColorPalette")}});r.spreadsheet.dialogs.register("colorPicker",n);var m=B.extend({init:function(D){D.width=268;B.fn.init.call(this,D);this.dialog().setOptions({animation:false});this.dialog().one("activate",this._colorPicker.bind(this))},_colorPicker:function(){var D=this.dialog().element.find("div:first");this.colorPicker=D.kendoFlatColorPicker({change:this.value.bind(this)}).data("kendoFlatColorPicker")}});r.spreadsheet.dialogs.register("customColor",m);var d=y.extend({init:function(E){var F=r.spreadsheet.messages.dialogs.alignmentDialog||A;var D={title:F.title,buttons:[{property:"textAlign",value:"left",iconClass:"align-left",text:F.buttons.justtifyLeft},{property:"textAlign",value:"center",iconClass:"align-center",text:F.buttons.justifyCenter},{property:"textAlign",value:"right",iconClass:"align-right",text:F.buttons.justifyRight},{property:"textAlign",value:"justify",iconClass:"align-justify",text:F.buttons.justifyFull},{property:"verticalAlign",value:"top",iconClass:"align-top",text:F.buttons.alignTop},{property:"verticalAlign",value:"center",iconClass:"align-middle",text:F.buttons.alignMiddle},{property:"verticalAlign",value:"bottom",iconClass:"align-bottom",text:F.buttons.alignBottom}]};y.fn.init.call(this,c.extend(D,E));this._list()},options:{template:"<ul class='k-list k-reset'></ul>"},_list:function(){var D=this.dialog().element.find("ul");this.list=new r.ui.StaticList(D,{dataSource:new r.data.DataSource({data:this.options.buttons}),template:"<a title='#=text#' data-property='#=property#' data-value='#=value#'><span class='k-icon k-i-#=iconClass#'></span>#=text#</a>",change:this.apply.bind(this)});this.list.dataSource.fetch()},apply:function(E){var D=E.sender.value()[0];y.fn.apply.call(this);this.trigger("action",{command:"PropertyChangeCommand",options:{property:D.property,value:D.value}})}});r.spreadsheet.dialogs.register("alignment",d);var h=y.extend({init:function(E){var F=r.spreadsheet.messages.dialogs.mergeDialog||A;var D={title:F.title,buttons:[{value:"cells",iconClass:"cells-merge",text:F.buttons.mergeCells},{value:"horizontally",iconClass:"cells-merge-horizontally",text:F.buttons.mergeHorizontally},{value:"vertically",iconClass:"cells-merge-vertically",text:F.buttons.mergeVertically},{value:"unmerge",iconClass:"table-unmerge",text:F.buttons.unmerge}]};y.fn.init.call(this,c.extend(D,E));this._list()},options:{template:"<ul class='k-list k-reset'></ul>"},_list:function(){var D=this.dialog().element.find("ul");this.list=new r.ui.StaticList(D,{dataSource:new r.data.DataSource({data:this.options.buttons}),template:"<a title='#=text#' data-value='#=value#'><span class='k-icon k-icon k-i-#=iconClass#'></span>#=text#</a>",change:this.apply.bind(this)});this.list.dataSource.fetch()},apply:function(E){var D=E.sender.value()[0];y.fn.apply.call(this);this.trigger("action",{command:"MergeCellCommand",options:{value:D.value}})}});r.spreadsheet.dialogs.register("merge",h);var q=y.extend({init:function(E){var F=r.spreadsheet.messages.dialogs.freezeDialog||A;var D={title:F.title,buttons:[{value:"panes",iconClass:"pane-freeze",text:F.buttons.freezePanes},{value:"rows",iconClass:"row-freeze",text:F.buttons.freezeRows},{value:"columns",iconClass:"column-freeze",text:F.buttons.freezeColumns},{value:"unfreeze",iconClass:"table-unmerge",text:F.buttons.unfreeze}]};y.fn.init.call(this,c.extend(D,E));this._list()},options:{template:"<ul class='k-list k-reset'></ul>"},_list:function(){var D=this.dialog().element.find("ul");this.list=new r.ui.StaticList(D,{dataSource:new r.data.DataSource({data:this.options.buttons}),template:"<a title='#=text#' data-value='#=value#'><span class='k-icon k-icon k-i-#=iconClass#'></span>#=text#</a>",change:this.apply.bind(this)});this.list.dataSource.fetch()},apply:function(E){var D=E.sender.value()[0];y.fn.apply.call(this);this.trigger("action",{command:"FreezePanesCommand",options:{value:D.value}})}});r.spreadsheet.dialogs.register("freeze",q);var z=r.spreadsheet.ValidationCellsViewModel=b.extend({init:function(D){b.fn.init.call(this,D);this.bind("change",function(E){if(E.field==="criterion"){this.reset();if(this.criterion==="custom"||this.criterion==="list"){this.setHintMessageTemplate()}}if(E.field==="comparer"){this.setHintMessageTemplate()}if((E.field=="hintMessage"||E.field=="hintTitle")&&!this._mute){this.shouldBuild=false}if((E.field=="from"||E.field=="to"||E.field=="hintMessageTemplate"||E.field=="type")&&this.shouldBuild){this.buildMessages()}}.bind(this));this.reset()},buildMessages:function(){this._mute=true;this.set("hintTitle",this.hintTitleTemplate?r.format(this.hintTitleTemplate,this.type):"");this.set("hintMessage",this.hintMessageTemplate?r.format(this.hintMessageTemplate,this.from,this.to):"");this._mute=false},reset:function(){this.setComparers();this.set("comparer",this.comparers[0].type);this.set("from",null);this.set("to",null);this.set("useCustomMessages",false);this.shouldBuild=true;this.hintTitleTemplate=this.defaultHintTitle;this.buildMessages()},setComparers:function(){var G=this.defaultComparers;var F=[];if(this.criterion==="text"){var E=["equalTo","notEqualTo"];for(var D=0;D<G.length;D++){if(E[0]==G[D].type){F.push(G[D]);E.shift()}}}else{F=G.slice()}this.set("comparers",F)},setHintMessageTemplate:function(){if(this.criterion!=="custom"&&this.criterion!=="list"){this.set("hintMessageTemplate",r.format(this.defaultHintMessage,this.criterion,this.comparerMessages[this.comparer]))}else{this.set("hintMessageTemplate","");this.set("hintMessage","")}},isAny:function(){return this.get("criterion")==="any"},isNumber:function(){return this.get("criterion")==="number"},showToForNumber:function(){return this.showTo()&&this.isNumber()},showToForDate:function(){return this.showTo()&&this.isDate()},isText:function(){return this.get("criterion")==="text"},isDate:function(){return this.get("criterion")==="date"},isList:function(){return this.get("criterion")==="list"},isCustom:function(){return this.get("criterion")==="custom"},showRemove:function(){return this.get("hasValidation")},showTo:function(){return this.get("comparer")=="between"||this.get("comparer")=="notBetween"},update:function(D){this.set("hasValidation",!!D);if(D){this.fromValidationObject(D)}},fromValidationObject:function(D){this.set("criterion",D.dataType);this.set("comparer",D.comparerType);this.set("from",D.from);this.set("to",D.to);this.set("type",D.type);this.set("ignoreBlank",D.allowNulls);this.set("showButton",D.showButton);if(D.messageTemplate||D.titleTemplate){this.hintMessageTemplate=D.messageTemplate;this.hintMessage=D.messageTemplate;this.hintTitleTemplate=D.titleTemplate;this.hintTitle=D.titleTemplate;this.useCustomMessages=true;this.buildMessages()}else{this.useCustomMessages=false}},toValidationObject:function(){if(this.criterion==="any"){return null}var D={type:this.type,dataType:this.criterion,comparerType:this.comparer,from:this.from,to:this.to,allowNulls:this.ignoreBlank,showButton:this.showButton};if(this.useCustomMessages){D.messageTemplate=this.shouldBuild?this.hintMessageTemplate:this.hintMessage;D.titleTemplate=this.hintTitle}return D}});var a=y.extend({init:function(E){var F=r.spreadsheet.messages.dialogs.validationDialog||A;var D={title:F.title,hintMessage:F.hintMessage,hintTitle:F.hintTitle,criteria:[{type:"any",name:F.criteria.any},{type:"number",name:F.criteria.number},{type:"text",name:F.criteria.text},{type:"date",name:F.criteria.date},{type:"custom",name:F.criteria.custom},{type:"list",name:F.criteria.list}],comparers:[{type:"greaterThan",name:F.comparers.greaterThan},{type:"lessThan",name:F.comparers.lessThan},{type:"between",name:F.comparers.between},{type:"notBetween",name:F.comparers.notBetween},{type:"equalTo",name:F.comparers.equalTo},{type:"notEqualTo",name:F.comparers.notEqualTo},{type:"greaterThanOrEqualTo",name:F.comparers.greaterThanOrEqualTo},{type:"lessThanOrEqualTo",name:F.comparers.lessThanOrEqualTo}],comparerMessages:F.comparerMessages};y.fn.init.call(this,c.extend(D,E))},options:{width:450,criterion:"any",type:"reject",ignoreBlank:true,showButton:true,useCustomMessages:false,errorTemplate:'<div class="k-widget k-tooltip k-tooltip-validation" style="margin:0.5em"><span class="k-icon k-i-warning"> </span>#= message #<div class="k-callout k-callout-n"></div></div>',template:'<div class="k-edit-form-container"><div class="k-edit-label"><label>#: messages.validationDialog.labels.criteria #:</label></div><div class="k-edit-field"><select data-role="dropdownlist" data-text-field="name" data-value-field="type" data-bind="value: criterion, source: criteria" /></div><div data-bind="visible: isNumber"><div class="k-edit-label"><label>#: messages.validationDialog.labels.comparer #:</label></div><div class="k-edit-field"><select data-role="dropdownlist" data-text-field="name" data-value-field="type" data-bind="value: comparer, source: comparers" /></div><div class="k-edit-label"><label>#: messages.validationDialog.labels.min #:</label></div><div class="k-edit-field"><input name="#: messages.validationDialog.labels.min #" placeholder="e.g. 10" class="k-textbox" data-bind="value: from, enabled: isNumber" required="required" /></div><div data-bind="visible: showTo"><div class="k-edit-label"><label>#: messages.validationDialog.labels.max #:</label></div><div class="k-edit-field"><input name="#: messages.validationDialog.labels.max #" placeholder="e.g. 100" class="k-textbox" data-bind="value: to, enabled: showToForNumber" required="required" /></div></div></div><div data-bind="visible: isText"><div class="k-edit-label"><label>#: messages.validationDialog.labels.comparer #:</label></div><div class="k-edit-field"><select data-role="dropdownlist" data-text-field="name" data-value-field="type" data-bind="value: comparer, source: comparers" /></div><div class="k-edit-label"><label>#: messages.validationDialog.labels.value #:</label></div><div class="k-edit-field"><input name="#: messages.validationDialog.labels.value #" class="k-textbox" data-bind="value: from, enabled: isText" required="required" /></div></div><div data-bind="visible: isDate"><div class="k-edit-label"><label>#: messages.validationDialog.labels.comparer #:</label></div><div class="k-edit-field"><select data-role="dropdownlist" data-text-field="name" data-value-field="type" data-bind="value: comparer, source: comparers" /></div><div class="k-edit-label"><label>#: messages.validationDialog.labels.start #:</label></div><div class="k-edit-field"><input name="#: messages.validationDialog.labels.start #" class="k-textbox" data-bind="value: from, enabled: isDate" required="required" /></div><div data-bind="visible: showTo"><div class="k-edit-label"><label>#: messages.validationDialog.labels.end #:</label></div><div class="k-edit-field"><input name="#: messages.validationDialog.labels.end #" class="k-textbox" data-bind="value: to, enabled: showToForDate" required="required" /></div></div></div><div data-bind="visible: isCustom"><div class="k-edit-label"><label>#: messages.validationDialog.labels.value #:</label></div><div class="k-edit-field"><input name="#: messages.validationDialog.labels.value #" class="k-textbox" data-bind="value: from, enabled: isCustom" required="required" /></div></div><div data-bind="visible: isList"><div class="k-edit-label"><label>#: messages.validationDialog.labels.value #:</label></div><div class="k-edit-field"><input name="#: messages.validationDialog.labels.value #" class="k-textbox" data-bind="value: from, enabled: isList" required="required" /></div></div><div data-bind="visible: isList"><div class="k-edit-field"><input type="checkbox" name="showButton" id="showButton" class="k-checkbox" data-bind="checked: showButton"/><label for="showButton" class="k-checkbox-label"> #: messages.validationDialog.labels.showListButton #</label></div></div><div data-bind="visible: isDate"><div class="k-edit-field"><input type="checkbox" name="showButton" id="showButton" class="k-checkbox" data-bind="checked: showButton"/><label for="showButton" class="k-checkbox-label"> #: messages.validationDialog.labels.showCalendarButton #</label></div></div><div data-bind="invisible: isAny"><div class="k-edit-field"><input type="checkbox" name="ignoreBlank" id="ignoreBlank" class="k-checkbox" data-bind="checked: ignoreBlank"/><label for="ignoreBlank" class="k-checkbox-label"> #: messages.validationDialog.labels.ignoreBlank #</label></div></div><div data-bind="invisible: isAny"><div class="k-action-buttons"></div><div class="k-edit-label"><label>#: messages.validationDialog.labels.onInvalidData #:</label></div><div class="k-edit-field"><input type="radio" id="validationTypeReject" name="validationType" value="reject" data-bind="checked: type" class="k-radio" /><label for="validationTypeReject" class="k-radio-label">#: messages.validationDialog.labels.rejectInput #</label> <input type="radio" id="validationTypeWarning" name="validationType" value="warning" data-bind="checked: type" class="k-radio" /><label for="validationTypeWarning" class="k-radio-label">#: messages.validationDialog.labels.showWarning #</label></div></div><div data-bind="invisible: isAny" class="hint-wrapper"><div class="k-edit-field"><input type="checkbox" name="useCustomMessages" id="useCustomMessages" class="k-checkbox" data-bind="checked: useCustomMessages" /><label class="k-checkbox-label" for="useCustomMessages"> #: messages.validationDialog.labels.showHint #</label></div><div data-bind="visible: useCustomMessages"><div class="k-edit-label"><label>#: messages.validationDialog.labels.hintTitle #:</label></div><div class="k-edit-field"><input class="k-textbox" placeholder="#: messages.validationDialog.placeholders.typeTitle #" data-bind="value: hintTitle" /></div><div class="k-edit-label"><label>#: messages.validationDialog.labels.hintMessage #:</label></div><div class="k-edit-field"><input class="k-textbox" placeholder="#: messages.validationDialog.placeholders.typeMessage #" data-bind="value: hintMessage" /></div></div></div><div class="k-action-buttons"><button class="k-button" data-bind="visible: showRemove, click: remove">#: messages.remove #</button><button class="k-button k-primary" data-bind="click: apply">#: messages.apply #</button><button class="k-button" data-bind="click: close">#: messages.cancel #</button></div></div>'},open:function(D){var E=this.options;var F;this.viewModel=new z({type:E.type,defaultHintMessage:E.hintMessage,defaultHintTitle:E.hintTitle,defaultComparers:E.comparers.slice(0),comparerMessages:E.comparerMessages,criteria:E.criteria.slice(0),criterion:E.criterion,ignoreBlank:E.ignoreBlank,showButton:E.showButton,apply:this.apply.bind(this),close:this.close.bind(this),remove:this.remove.bind(this)});this.viewModel.update(D.validation());y.fn.open.call(this);F=this.dialog().element;if(this.validatable){this.validatable.destroy()}r.bind(F,this.viewModel);this.validatable=new r.ui.Validator(F.find(".k-edit-form-container"),{validateOnBlur:false,errorTemplate:this.options.errorTemplate||undefined})},apply:function(){if(this.validatable.validate()){y.fn.apply.call(this);this.trigger("action",{command:"EditValidationCommand",options:{value:this.viewModel.toValidationObject()}})}},remove:function(){this.viewModel.set("criterion","any");this.apply()}});r.spreadsheet.dialogs.register("validation",a);r.spreadsheet.dialogs.ValidationDialog=a;var s=y.extend({init:function(D){var F=r.spreadsheet.messages.dialogs.exportAsDialog||A;y.fn.init.call(this,c.extend({title:F.title},D));this.viewModel=r.observable({title:this.options.title,name:this.options.name,extension:this.options.extension,fileFormats:this.options.fileFormats,excel:D.excelExport,pdf:{proxyURL:D.pdfExport.proxyURL,forceProxy:D.pdfExport.forceProxy,title:D.pdfExport.title,author:D.pdfExport.author,subject:D.pdfExport.subject,keywords:D.pdfExport.keywords,creator:D.pdfExport.creator,date:D.pdfExport.date,fitWidth:this.options.pdf.fitWidth,area:this.options.pdf.area,areas:this.options.pdf.areas,paperSize:this.options.pdf.paperSize,paperSizes:this.options.pdf.paperSizes,margin:this.options.pdf.margin,margins:this.options.pdf.margins,landscape:this.options.pdf.landscape,guidelines:this.options.pdf.guidelines,hCenter:this.options.pdf.hCenter,vCenter:this.options.pdf.vCenter},apply:this.apply.bind(this),close:this.close.bind(this)});var E=this.dialog();this.viewModel.bind("change",function(G){if(G.field==="extension"){this.set("showPdfOptions",this.extension===".pdf"?true:false);E.center()}});r.bind(E.element,this.viewModel)},options:{name:"Workbook",extension:".xlsx",fileFormats:[{description:"Excel Workbook (.xlsx)",extension:".xlsx"},{description:"Portable Document Format(.pdf)",extension:".pdf"}],pdf:{fitWidth:true,area:"workbook",areas:[{area:"workbook",text:"Entire Workbook"},{area:"sheet",text:"Active Sheet"},{area:"selection",text:"Selection"}],paperSize:"a4",paperSizes:[{value:"a2",text:"A2 (420 mm \xD7 594 mm)     "},{value:"a3",text:"A3 (297 mm x 420 mm)     "},{value:"a4",text:"A4 (210 mm x 297 mm)     "},{value:"a5",text:"A5 (148 mm x 210 mm)     "},{value:"b3",text:"B3 (353 mm \xD7 500 mm)     "},{value:"b4",text:"B4 (250 mm x 353 mm)     "},{value:"b5",text:"B5 (176 mm x 250 mm)     "},{value:"folio",text:'Folio (8.5" x 13")       '},{value:"legal",text:'Legal (8.5" x 14")       '},{value:"letter",text:'Letter (8.5" x 11")      '},{value:"tabloid",text:'Tabloid (11" x 17")      '},{value:"executive",text:'Executive (7.25" x 10.5")'}],margin:{bottom:"0.75in",left:"0.7in",right:"0.7in",top:"0.75in"},margins:[{value:{bottom:"0.75in",left:"0.7in",right:"0.7in",top:"0.75in"},text:"Normal"},{value:{bottom:"0.75in",left:"0.25in",right:"0.25in",top:"0.75in"},text:"Narrow"},{value:{bottom:"1in",left:"1in",right:"1in",top:"1in"},text:"Wide"}],landscape:true,guidelines:true,hCenter:true,vCenter:true},width:520,template:"<div class='k-edit-label'><label>#: messages.exportAsDialog.labels.fileName #:</label></div><div class='k-edit-field'><input class='k-textbox' data-bind='value: name' /></div><div ><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.saveAsType #:</label></div><div class='k-edit-field'><select data-role='dropdownlist' class='k-file-format' data-text-field='description' data-value-field='extension' data-bind='value: extension, source: fileFormats' /></div></div><div class='export-config' data-bind='visible: showPdfOptions'><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.exportArea #:</label></div><div class='k-edit-field'><select data-role='dropdownlist' class='k-file-format' data-text-field='text' data-value-field='area' data-bind='value: pdf.area, source: pdf.areas' /></div><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.paperSize#:</label></div><div class='k-edit-field'><select data-role='dropdownlist' class='k-file-format' data-text-field='text' data-value-field='value' data-bind='value: pdf.paperSize, source: pdf.paperSizes' /></div><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.margins #:</label></div><div class='k-edit-field'><select data-role='dropdownlist' class='k-file-format' data-value-primitive='true'data-text-field='text' data-value-field='value' data-bind='value: pdf.margin, source: pdf.margins' /></div><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.orientation #:</label></div><div class='k-edit-field'><input type='radio' id='k-orientation-portrait' name='orientation' data-type='boolean' data-bind='checked: pdf.landscape' value='false' /><label class='k-orientation-label k-orientation-portrait-label' for='k-orientation-portrait'></label><input type='radio' id='k-orientation-landscape' name='orientation' data-type='boolean' data-bind='checked: pdf.landscape' value='true' /><label class='k-orientation-label k-orientation-landscape-label' for='k-orientation-landscape'></label></div><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.print #:</label></div><div class='k-edit-field'><input class='k-checkbox' id='guidelines' type='checkbox' data-bind='checked: pdf.guidelines'/><label class='k-checkbox-label' for='guidelines'>#: messages.exportAsDialog.labels.guidelines#</label></div><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.scale #:</label></div><div class='k-edit-field'><input class='k-checkbox' id='fitWidth' type='checkbox' data-bind='checked: pdf.fitWidth'/><label class='k-checkbox-label' for='fitWidth'>#: messages.exportAsDialog.labels.fit #</label></div><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.center #:</label></div><div class='k-edit-field'><input class='k-checkbox' id='hCenter' type='checkbox' data-bind='checked: pdf.hCenter'/><label class='k-checkbox-label' for='hCenter'>#: messages.exportAsDialog.labels.horizontally #</label><input class='k-checkbox' id='vCenter' type='checkbox' data-bind='checked: pdf.vCenter'/><label class='k-checkbox-label' for='vCenter'>#: messages.exportAsDialog.labels.vertically #</label></div><div class='k-page-orientation' data-bind='css: {k-page-landscape: pdf.landscape}'><div class='k-margins-horizontal'></div><div class='k-margins-vertical'></div></div></div><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: apply'>#: messages.save #</button><button class='k-button' data-bind='click: close'>#: messages.cancel #</button></div>"},apply:function(){y.fn.apply.call(this);this.trigger("action",{command:"SaveAsCommand",options:this.viewModel})}});r.spreadsheet.dialogs.register("exportAs",s);function g(E,D){r.spreadsheet.dialogs.register(E,k.extend({options:{messageId:D}}))}g("modifyMerged","modifyMergedDialog.errorMessage");g("rangeDisabled","rangeDisabledDialog.errorMessage");g("overflow","overflowDialog.errorMessage");g("unsupportedSelection","unsupportedSelectionDialog.errorMessage");g("incompatibleRanges","incompatibleRangesDialog.errorMessage");g("noFillDirection","noFillDirectionDialog.errorMessage");g("duplicateSheetName","duplicateSheetNameDialog.errorMessage");var v=k.extend({options:{width:640,title:"Errors in import",template:"<div class='k-spreadsheet-message-content k-spreadsheet-import-errors'><div class='k--header-message'>We encountered #= errors.length # errors while reading this file.  Please be aware that some formulas might be missing, or contain invalid results.</div><div class='k--errors'><table><thead><tr><th>Context</th><th>Error message</th></tr></thead># for (var i = 0; i < errors.length; ++i) { ## var err = errors[i]; #<tr><td>#: err.context #</td><td>#: err.error #</td></tr># } #</table></div></div><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: close'>#: messages.okText #</button></div>"}});r.spreadsheet.dialogs.register("importError",v);var w=k.extend({init:function(D){var E=r.spreadsheet.messages.dialogs.useKeyboardDialog||A;y.fn.init.call(this,c.extend({title:E.title},D))},options:{template:"#: messages.useKeyboardDialog.errorMessage #<div>Ctrl+C #: messages.useKeyboardDialog.labels.forCopy #</div><div>Ctrl+X #: messages.useKeyboardDialog.labels.forCut #</div><div>Ctrl+V #: messages.useKeyboardDialog.labels.forPaste #</div><div class=\"k-action-buttons\"><button class='k-button k-primary' data-bind='click: close'>#= messages.okText #</button></div>"}});r.spreadsheet.dialogs.register("useKeyboard",w);var l=y.extend({options:{template:"<div class='k-edit-label'><label>#: messages.linkDialog.labels.url #:</label></div><div class='k-edit-field'><input class='k-textbox' data-bind='value: url' /></div><div class='k-action-buttons'>"+("<button style='float: left' class='k-button' data-bind='click: remove'>#= messages.linkDialog.labels.removeLink #</button><button class='k-button k-primary' data-bind='click: apply'>#= messages.okText #</button><button class='k-button' data-bind='click: cancel'>#= messages.cancel #</button>")+"</div>",title:A.linkDialog.title,autoFocus:false},open:function(E){var D=this;y.fn.open.apply(D,arguments);var G=D.dialog().element;var F=r.observable({url:E.link(),apply:function(){if(!/\S/.test(F.url)){F.url=null}D.trigger("action",{command:"HyperlinkCommand",options:{link:F.url}});D.close()},remove:function(){F.url=null;F.apply()},cancel:D.close.bind(D)});r.bind(G,F);G.find("input").focus().on("keydown",function(H){if(H.keyCode==13){F.url=c(this).val();H.stopPropagation();H.preventDefault();F.apply()}else{if(H.keyCode==27){H.stopPropagation();H.preventDefault();F.cancel()}}})}});r.spreadsheet.dialogs.register("hyperlink",l)}(window.kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/sheetbinder",["kendo.core","kendo.data","spreadsheet/sheet"],a)}(function(){(function(c){if(c.support.browser.msie&&c.support.browser.version<9){return}var a=function(d){return d};var b=c.Class.extend({init:function(d){this.options=$.extend({},this.options,d);this.columns=this._normalizeColumns(this.options.columns);this._sheet();this._dataSource();this._header();this._boundRowsCount=0;this.dataSource.fetch()},_sheet:function(){this.sheet=this.options.sheet;this._sheetChangeHandler=this._sheetChange.bind(this);this._sheetDeleteRowHandler=this._sheetDeleteRow.bind(this);this._sheetInsertRowHandler=this._sheetInsertRow.bind(this);this.sheet.bind("change",this._sheetChangeHandler).bind("afterDeleteRow",this._sheetDeleteRowHandler).bind("afterInsertRow",this._sheetInsertRowHandler)},_sheetInsertRow:function(d){if(d.index!==undefined){this.dataSource.insert(Math.max(d.index-1,0),{})}},_sheetDeleteRow:function(f){if(f.index!==undefined){var g=this.dataSource;var d=g.view()[f.index-1];if(d){g.remove(d)}}},_header:function(){this.sheet.batch(function(){this.columns.forEach(function(e,d){this.sheet.range(0,d).value(e.title)}.bind(this))}.bind(this))},_sheetChange:function(j){if(j.insertRow||j.deleteRow){return}if(j.recalc&&j.ref){var l=this.dataSource;var i=l.view();var g=this.columns;var d;if(l.reader.model){d=l.reader.model.fields}if(!g.length&&i.length){g=Object.keys(i[0].toJSON())}var h=g.map(function(e){var m=e.field;if(m&&d&&d[m]&&d[m].type=="date"){return c.spreadsheet.numberToDate}return a});this._skipRebind=true;var k=this.sheet._grid.normalize(j.ref);var f=this.sheet.range(k).values();k.forEach(function(p){p=p.toRangeRef();var m;var q=0;for(var e=p.topLeft.row;e<=p.bottomRight.row;e++){m=i[e-1];if(!m){m=l.insert(e-1,{});i=l.view()}var n=0;for(var o=p.topLeft.col;o<=p.bottomRight.col&&o<g.length;o++){m.set(g[o].field,h[o](f[q][n++]))}q++}});this._boundRowsCount=l.view().length;this._skipRebind=false}},_normalizeColumns:function(d){return d.map(function(e){var f=e.field||e;return{field:f,title:e.title||f}})},_dataSource:function(){var d=this.options;var e=d.dataSource;e=Array.isArray(e)?{data:e}:e;if(this.dataSource&&this._changeHandler){this.dataSource.unbind("change",this._changeHandler)}else{this._changeHandler=this._change.bind(this)}this.dataSource=c.data.DataSource.create(e).bind("change",this._changeHandler)},_change:function(){if(this._skipRebind){return}var f=this.dataSource.view();var d=this.columns;if(!d.length&&f.length){this.columns=d=this._normalizeColumns(Object.keys(f[0].toJSON()));this._header()}var e=d.map(function(g){return c.getter(g.field)});this.sheet.batch(function(){var i=Math.max(f.length,this._boundRowsCount);for(var g=0;g<i;g++){for(var h=0;h<e.length;h++){var j=f[g]?e[h](f[g]):null;this.sheet.range(g+1,h).value(j)}}}.bind(this));this._boundRowsCount=f.length},destroy:function(){this.dataSource.unbind("change",this._changeHandler);this.sheet.unbind("change",this._sheetChangeHandler).unbind("deleteRow",this._sheetDeleteRowHandler).unbind("insertRow",this._sheetInsertRowHandler)},options:{columns:[]}});c.spreadsheet.SheetDataSourceBinder=b}(kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/filtermenu",["kendo.core","kendo.popup","kendo.treeview","kendo.numerictextbox","kendo.datepicker","kendo.datetimepicker"],a)}(function(){(function(g){if(g.support.browser.msie&&g.support.browser.version<9){return}var e=g.jQuery;var i=g.ui.Widget;var a={details:"k-details",button:"k-button",detailsSummary:"k-details-summary",detailsContent:"k-details-content",icon:"k-icon",iconCollapse:"k-i-arrow-45-down-right",iconExpand:"k-i-arrow-60-right",iconSearch:"k-i-zoom",textbox:"k-textbox",wrapper:"k-spreadsheet-filter-menu",filterByCondition:"k-spreadsheet-condition-filter",filterByValue:"k-spreadsheet-value-filter",valuesTreeViewWrapper:"k-spreadsheet-value-treeview-wrapper",actionButtons:"k-action-buttons"};var j=i.extend({init:function(q,p){i.fn.init.call(this,q,p);this.element.addClass(d.classNames.details);this._summary=this.element.find("."+d.classNames.detailsSummary).on("click",this._toggle.bind(this));var o=p.expanded?d.classNames.iconCollapse:d.classNames.iconExpand;this._icon=e("<span />",{"class":d.classNames.icon+" "+o}).prependTo(this._summary);this._container=g.wrap(this._summary.next(),true);if(!p.expanded){this._container.hide()}},options:{name:"Details"},events:["toggle"],visible:function(){return this.options.expanded},toggle:function(o){var p=g.fx(this._container).expand("vertical");p.stop()[o?"reverse":"play"]();this._icon.toggleClass(d.classNames.iconExpand,o).toggleClass(d.classNames.iconCollapse,!o);this.options.expanded=!o},_toggle:function(){var o=this.visible();this.toggle(o);this.trigger("toggle",{show:o})}});var n=g.spreadsheet.messages.filterMenu={sortAscending:"Sort range A to Z",sortDescending:"Sort range Z to A",filterByValue:"Filter by value",filterByCondition:"Filter by condition",apply:"Apply",search:"Search",addToCurrent:"Add to current selection",clear:"Clear",blanks:"(Blanks)",operatorNone:"None",and:"AND",or:"OR",operators:{string:{contains:"Text contains",doesnotcontain:"Text does not contain",startswith:"Text starts with",endswith:"Text ends with",matches:"Text matches",doesnotmatch:"Text does not match"},date:{eq:"Date is",neq:"Date is not",lt:"Date is before",gt:"Date is after"},number:{eq:"Is equal to",neq:"Is not equal to",gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"}}};g.data.binders.spreadsheetFilterValue=g.data.Binder.extend({init:function(p,q,o){g.data.Binder.fn.init.call(this,p,q,o);this._change=e.proxy(this.change,this);e(this.element).on("change",this._change)},refresh:function(){var o=this,p=o.bindings.spreadsheetFilterValue.get();e(o.element).val(p instanceof Date?"":p)},change:function(){var o=this.element.value;this.bindings.spreadsheetFilterValue.set(o)}});g.data.binders.widget.spreadsheetFilterValue=g.data.Binder.extend({init:function(p,q,o){g.data.Binder.fn.init.call(this,p.element[0],q,o);this.widget=p;this._change=e.proxy(this.change,this);this.widget.first("change",this._change)},refresh:function(){var q=this.bindings.spreadsheetFilterValue,p=q.get(),o=e(this.widget.element).data("filterType");if(o==="date"&&p instanceof Date||o==="number"&&!isNaN(p)){this.widget.value(p)}else{this.widget.value(null)}},change:function(){var o=this.widget.value(),p=this.bindings.spreadsheetFilterValue;p.set(o)}});var m={filterByValue:"<div class='"+a.detailsSummary+"'>#= messages.filterByValue #</div><div class='"+a.detailsContent+"'><div class='k-textbox k-space-right'><input placeholder='#= messages.search #' data-#=ns#bind='events: { input: filterValues }' /><span class='k-icon k-i-zoom' /></div><div data-#=ns#bind='visible: hasActiveSearch'><input class='k-checkbox' type='checkbox' data-#=ns#bind='checked: appendToSearch' id='_#=guid#' /><label class='k-checkbox-label' for='_#=guid#'>#= messages.addToCurrent #</label></div><div class='"+a.valuesTreeViewWrapper+"'><div data-#=ns#role='treeview' data-#=ns#checkboxes='{ checkChildren: true }' data-#=ns#bind='source: valuesDataSource, events: { check: valuesChange, select: valueSelect }' /></div></div>",filterByCondition:"<div class='"+a.detailsSummary+"'>#= messages.filterByCondition #</div><div class='"+a.detailsContent+'\'><div><select data-#=ns#role="dropdownlist"data-#=ns#bind="value: operator, source: operators, events: { change: operatorChange } "data-value-primitive="false"data-option-label="#=messages.operatorNone#"data-height="auto"data-text-field="text"data-value-field="unique"></select></div><div data-#=ns#bind="visible: isString"><input data-filter-type="string" data-#=ns#bind="spreadsheetFilterValue: customFilter.criteria[0].value" class="k-textbox" /></div><div data-#=ns#bind="visible: isNumber"><input data-filter-type="number" data-#=ns#role="numerictextbox" data-#=ns#bind="spreadsheetFilterValue: customFilter.criteria[0].value" /></div><div data-#=ns#bind="visible: isDate"><input data-filter-type="date" data-#=ns#role="datepicker" data-#=ns#bind="spreadsheetFilterValue: customFilter.criteria[0].value" /></div></div>',menuItem:"<li data-command='#=command#' data-dir='#=dir#'><span class='k-icon k-i-#=iconClass#'></span>#=text#</li>",actionButtons:"<button data-#=ns#bind='click: apply' class='k-button k-primary'>#=messages.apply#</button><button data-#=ns#bind='click: clear' class='k-button'>#=messages.clear#</button>"};function b(p){var r={};var o=[];for(var q=0;q<p.length;q++){if(!r[p[q].value]){r[p[q].value]=p[q];o.push(p[q])}else{if(!r[p[q].value].checked&&p[q].checked){r[p[q].value].checked=true}}}return o}function c(o,s){var p=false;var q=o instanceof g.data.HierarchicalDataSource&&o.data();for(var r=0;r<q.length;r++){var v=q[r];var u=v.text.toString().toLowerCase();var w=s===true||s===""||u.indexOf(s)>=0;var t=c(v.children,w||s);p=p||t||w;v.hidden=!w&&!t;v.checked=!v.hidden}if(q){o.filter({field:"hidden",operator:"neq",value:true})}return p}function f(r){var q=r instanceof g.data.HierarchicalDataSource&&r.data();for(var o=0;o<q.length;o++){var p=q[o];p.checked=false;if(p.hasChildren){f(p.children)}}}var h=g.spreadsheet.FilterMenuViewModel=g.data.ObservableObject.extend({valuesChange:function(t){var v=t?t.sender.dataSource:this.valuesDataSource;var p=function(w){return w.checked};var s=function(w){return w.dataType==="date"?g.spreadsheet.dateToNumber(w.value):w.value};var u=function(x,w,y){return y.lastIndexOf(x)===w};var r=v.data();var o=r[0].children.data().toJSON();var q=o.filter(function(w){return w.dataType==="blank"});q=q.length?q[0].checked:false;o=o.filter(p).map(s);if(this.appendToSearch&&this.valueFilter&&this.valueFilter.values.length){o=o.concat(this.valueFilter.values.toJSON()).sort().filter(u)}this.set("valueFilter",{values:o,blanks:q})},valueSelect:function(p){p.preventDefault();var o=p.sender.dataItem(p.node);o.set("checked",!o.checked)},hasActiveSearch:false,appendToSearch:false,filterValues:function(p){var o=typeof p=="string"?p:e(p.target).val().toLowerCase();var q=this.valuesDataSource;this.set("hasActiveSearch",!!o);f(q);c(q,o)},reset:function(){this.set("customFilter",{logic:"and",criteria:[{operator:null,value:null}]});this.set("valueFilter",{values:[]})},operatorChange:function(p){var o=p.sender.dataItem();this.set("operatorType",o.type);this.set("customFilter.criteria[0].operator",o.value)},isNone:function(){return this.get("operatorType")===undefined},isString:function(){return this.get("operatorType")==="string"},isNumber:function(){return this.get("operatorType")==="number"},isDate:function(){return this.get("operatorType")==="date"}});function l(p){var s=n.operators;var o=[];for(var r in p){if(!p.hasOwnProperty(r)){continue}for(var q in p[r]){if(!p[r].hasOwnProperty(q)){continue}o.push({text:s[r][q],value:q,unique:r+"_"+q,type:r})}}return o}var k=g.spreadsheet.FilterMenuController={valuesTree:function(o,p){return[{text:"All",expanded:true,checked:true,items:this.values(o.resize({top:1}),p)}]},values:function(p,s){var o=[];var t=n;var r=p.column(s);var q=p.sheet();r.forEachCell(function(z,w,u){if(q.isHiddenRow(z)){return}var x=u.value;var v=u.dataType;var y=u.text;if(x===undefined){v="blank"}else{if(u.format){v=g.spreadsheet.formatting.type(x,u.format)}else{v=typeof x}}if(x!==null&&u.format){y=g.spreadsheet.formatting.text(x,u.format)}else{y=v=="blank"?t.blanks:x}if(v==="percent"){v="number"}if(v==="date"){x=g.spreadsheet.numberToDate(x)}o.push({dataType:v,value:x,text:y,checked:true})});o=b(o);o.sort(function(v,u){if(v.dataType===u.dataType){return 0}if(v.dataType==="blank"||u.dataType==="blank"){return v.dataType==="blank"?-1:1}if(v.dataType==="number"||u.dataType==="number"){return v.dataType==="number"?-1:1}if(v.dataType==="date"||u.dataType==="date"){return v.dataType==="date"?-1:1}return 0});return o},filterType:function(o,s){var p=o.sheet();var r=this.filterForColumn(s,p);var q;r=r&&r.filter.toJSON();if(r&&r.filter=="custom"){var t=r.criteria[0].value;if(t instanceof Date){q="date"}else{if(typeof t=="string"){q="string"}else{if(typeof t=="number"){q="number"}}}}if(!q){var u=this.values(o.row(1),s)[0];q=u&&u.dataType;if(q=="blank"){q=null}}return q},filterForColumn:function(q,p){var o=p.filter();var r;if(o){r=o.columns.filter(function(s){return s.index===q})[0]}return r},filter:function(t,r){var p=this.filterForColumn(t,r);if(!p){return}var q=p.filter.toJSON();var s=q.filter;delete q.filter;var o={type:s,options:q};var u=q.criteria;if(u&&u.length){o.operator=u[0].operator}return o}};var d=i.extend({init:function(p,o){i.call(this,p,o);this.element.addClass(d.classNames.wrapper);this.viewModel=new h({active:"value",operator:null,operators:l(this.options.operators),clear:this.clear.bind(this),apply:this.apply.bind(this)});this._filterInit();this._popup();this._sort();this._filterByCondition();this._filterByValue();this._actionButtons()},options:{name:"FilterMenu",column:0,range:null,operators:{string:{contains:"Text contains",doesnotcontain:"Text does not contain",startswith:"Text starts with",endswith:"Text ends with",matches:"Text matches",doesnotmatch:"Text does not match"},date:{eq:"Date is",neq:"Date is not",lt:"Date is before",gt:"Date is after"},number:{eq:"Is equal to",neq:"Is not equal to",gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"}}},events:["action"],destroy:function(){i.fn.destroy.call(this);this.menu.destroy();this.valuesTreeView.destroy();this.popup.destroy()},openFor:function(o){this.popup.setOptions({anchor:o});this.popup.open()},close:function(){this.popup.close()},clear:function(){this.action({command:"ClearFilterCommand",options:{column:this.options.column}});this.viewModel.reset();this.close()},apply:function(){this._active();var o={operatingRange:this.options.range,column:this.options.column};var q;var p;if(this.viewModel.active==="value"){this.viewModel.valuesChange({sender:this.valuesTreeView});q=this.viewModel.valueFilter.toJSON();if(q.blanks||q.values&&q.values.length){o.valueFilter=q}}else{if(this.viewModel.active==="custom"){p=this.viewModel.customFilter.toJSON();if(p.criteria.length&&p.criteria[0].value!==null){o.customFilter=p}}}if(o.valueFilter||o.customFilter){this.action({command:"ApplyFilterCommand",options:o})}},action:function(o){this.trigger("action",e.extend({},o))},_filterInit:function(){var q=this.options.column;var o=this.options.range;var p=o.sheet();var s=k.filter(q,p);if(s){var r=k.filterType(o,q);this.viewModel.set("active",s.type);this.viewModel.set(s.type+"Filter",s.options);if(s.type=="custom"){this.viewModel.set("operator",r+"_"+s.operator);this.viewModel.set("operatorType",r)}}else{this.viewModel.reset()}},_popup:function(){this.popup=this.element.kendoPopup({copyAnchorStyles:false}).data("kendoPopup")},_sort:function(){var q=g.template(d.templates.menuItem);var r=n;var o=[{command:"sort",dir:"asc",text:r.sortAscending,iconClass:"sort-asc"},{command:"sort",dir:"desc",text:r.sortDescending,iconClass:"sort-desc"}];var p=e("<ul />",{html:g.render(q,o)}).appendTo(this.element);this.menu=p.kendoMenu({orientation:"vertical",select:function(v){var u=e(v.item).data("dir");var s=this.options.range.resize({top:1});var t={value:u,sheet:false,operatingRange:s,column:this.options.column};if(s.isSortable()){this.action({command:"SortCommand",options:t})}else{this.close()}}.bind(this)}).data("kendoMenu")},_appendTemplate:function(s,r,q,p){var o=g.template(s);var t=e("<div class='"+r+"'/>").html(o({messages:n,guid:g.guid(),ns:g.ns}));this.element.append(t);if(q){q=new j(t,{expanded:p,toggle:this._detailToggle.bind(this)})}g.bind(t,this.viewModel);return t},_detailToggle:function(o){this.element.find("[data-role=details]").not(o.sender.element).data("kendoDetails").toggle(!o.show)},_filterByCondition:function(){var o=this.viewModel.active==="custom";this._appendTemplate(d.templates.filterByCondition,d.classNames.filterByCondition,true,o)},_filterByValue:function(){var p=this.viewModel.active==="value";var q=this._appendTemplate(d.templates.filterByValue,d.classNames.filterByValue,true,p);this.valuesTreeView=q.find("[data-role=treeview]").data("kendoTreeView");var o=k.valuesTree(this.options.range,this.options.column);this.viewModel.set("valuesDataSource",new g.data.HierarchicalDataSource({data:o}))},_actionButtons:function(){this._appendTemplate(d.templates.actionButtons,d.classNames.actionButtons,false)},_active:function(){var o=this.element.find("[data-role=details]").filter(function(p,q){return e(q).data("kendoDetails").visible()});if(o.hasClass(d.classNames.filterByValue)){this.viewModel.set("active","value")}else{if(o.hasClass(d.classNames.filterByCondition)){this.viewModel.set("active","custom")}}}});g.spreadsheet.FilterMenu=d;e.extend(true,d,{classNames:a,templates:m})}(window.kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/editor",["kendo.core"],a)}(function(){(function(c){if(c.support.browser.msie&&c.support.browser.version<9){return}var a=c.Observable.extend({init:function(d){c.Observable.fn.init.call(this);this.view=d;this.formulaBar=d.formulaBar;this._active=false;this.barInput=d.formulaBar.formulaInput;this.cellInput=d.formulaInput;this.barInput.syncWith(this.cellInput);this.cellInput.syncWith(this.barInput);this.barInput.bind("keyup",this._triggerUpdate.bind(this));this.cellInput.bind("keyup",this._triggerUpdate.bind(this));this.barInput.bind("blur",this._blur.bind(this));this.cellInput.bind("blur",this._blur.bind(this))},events:["activate","deactivate","change","update"],_blur:function(){this.deactivate()},_triggerUpdate:function(){this.trigger("update",{value:this.value()})},activeEditor:function(){var d=null;var e=c._activeElement();if(this.barElement()[0]===e){d=this.barInput}else{if(this.cellElement()[0]===e){d=this.cellInput}}return d},activate:function(d){this._active=true;this._rect=d.rect;this.cellInput.position(d.rect);this.cellInput.resize(d.rect);this.cellInput.tooltip(d.tooltip);this.cellInput.activeCell=this.barInput.activeCell=d.range.topLeft;this.trigger("activate");return this},deactivate:function(){var d=this.cellInput;if(!this._active){return}if(d.value()!=this._value){this.trigger("change",{value:d.value()})}this._active=false;this._rect=null;d.hide();this.trigger("deactivate")},enable:function(d){this.barInput.enable(d);this.cellInput.enable(d)},barElement:function(){return this.barInput.element},cellElement:function(){return this.cellInput.element},focus:function(d){d=d||"cell";if(d==="cell"){this.cellInput.element.focus();this.cellInput.end()}else{this.barInput.element.focus()}},isActive:function(){return this._active},isFiltered:function(){return this.barInput.popup.visible()||this.cellInput.popup.visible()},canInsertRef:function(d){var e=this.activeEditor();return e&&e.canInsertRef(d)},highlightedRefs:function(){var e=this.activeEditor();var d=[];if(e){d=e.highlightedRefs()}return d},scale:function(){this.cellInput.scale()},toggleTooltip:function(d){this.cellInput.toggleTooltip(b(this._rect,d))},value:function(d){if(d===undefined){return this.barInput.value()}if(d===null){d=""}this._value=d;this.barInput.value(d);this.cellInput.value(d)},insertNewline:function(){this.activeEditor().insertNewline();this.scale()},select:function(){this.activeEditor().select()}});function b(e,d){return e&&(e.top!==d.top||e.left!==d.left)}c.spreadsheet.SheetEditor=a}(kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/autofill",["spreadsheet/runtime","spreadsheet/range"],a)}(function(){if(kendo.support.browser.msie&&kendo.support.browser.version<9){return}var d=kendo.spreadsheet;var e=d.Range;var h=d.calc.runtime;var f=h.Formula;var b="incompatibleRanges";var o="noFillDirection";var k=e.FillError=function(q){this.code=q};e.prototype._previewFillFrom=function(w,F){var r=this,t=r._sheet;if(typeof w=="string"){w=t.range(w)}var u=w._ref.toRangeRef();var v=r._ref.toRangeRef();if(u.intersects(v)){if(u.eq(v)){return null}v=v.clone();if(u.topLeft.eq(v.topLeft)){if(u.width()==v.width()){v.topLeft.row+=u.height();F=0}else{if(u.height()==v.height()){v.topLeft.col+=u.width();F=1}else{throw new k(b)}}}else{if(u.bottomRight.eq(v.bottomRight)){if(u.width()==v.width()){v.bottomRight.row-=u.height();F=2}else{if(u.height()==v.height()){v.bottomRight.col-=u.width();F=3}else{throw new k(b)}}}else{throw new k(b)}}return t.range(v)._previewFillFrom(w,F)}if(F==null){if(u.topLeft.col==v.topLeft.col){F=u.topLeft.row<v.topLeft.row?0:2}else{if(u.topLeft.row==v.topLeft.row){F=u.topLeft.col<v.topLeft.col?1:3}else{throw new k(o)}}}var E=F&1;var I=F&2;if(E&&u.height()!=v.height()||!E&&u.width()!=v.width()){throw new k(b)}var H=w._properties(),z;if(!E){H=j(H);z=v.height()}else{z=v.width()}var A=new Array(H.length);for(var C=0;C<H.length;++C){var x=H[C];var D=i(x);var G=A[C]=new Array(z);for(var B=0;B<z;++B){var y=I?-B-1:x.length+B;var q=I?x.length-B%x.length-1:B%x.length;G[I?z-B-1:B]=D(y,q)}}if(!E){A=j(A)}return{props:A,direction:F,dest:r}};e.prototype.fillFrom=function(r,s){var q=this._previewFillFrom(r,s);q.dest._properties(q.props);return q.dest};function c(q){var u=q.length;var z=(u+1)/2,x=q.reduce(function(C,B){return C+B},0)/u;var A=0,y=0;for(var r=0;r<u;r++){var t=r+1-z,s=q[r]-x;A+=t*s;y+=t*t}if(!y){return function(B){return q[B%q.length]}}var v=A/y,w=x-v*z;return function(B){return w+v*(B+1)}}function i(s){function t(v){var x=v[1]-v[0];for(var w=2;w<v.length;++w){if(v[w]-v[w-1]!=x){return null}}return x}function q(v){return v.map(function(w){return w.number})}var r=[];var u=s.map(function(v){return v.formula||v.value});a(u,function(v,w,z,A){var y,C;if(z=="number"){C=q(A);if(C.length==1&&(v>0||w<u.length||g(C[0],s[v].format)=="date")){C.push(C[0]+1)}y=c(C)}else{if(z=="string"||z=="formula"||z=="boolean"){y=function(F,E){return u[E]}}else{if(Array.isArray(z)){if(A.length==1){y=function(E){return z[(A[0].number+E)%z.length]}}else{var B=t(q(A));if(B==null){y=function(E){return A[E%A.length].value}}else{y=function(F){var E=A[0].number+B*F;return z[E%z.length]}}}}else{if(z!="null"){C=q(A);if(C.length==1){C.push(C[0]+1)}C=c(C);y=function(F,E){return u[E].replace(/^(.*\D)\d+/,"$1"+C(F,E))}}else{y=function(){return null}}}}}var D={f:y,begin:v,end:w,len:w-v};for(var x=v;x<w;++x){r[x]=D}});return function(B,v){var x=r[v];var A=B/u.length|0;var y=B%u.length;var C=A*x.len+y-x.begin;var z=x.f(C,v);var w=n(s[v]);delete w.enable;if(z instanceof f){w.formula=z}else{w.value=z}return w}}function g(q,r){if(r!=null){return d.formatting.type(q,r)}}function n(q){var r={};Object.keys(q||{}).forEach(function(s){r[s]=q[s]});return r}function a(v,u){var t=null,w=0,q=[],s;for(var r=0;r<v.length;++r){s=m(v[r]);q.push(s);if(t!=null&&s.type!==t.type){u(w,r,t.type,q.slice(w,r));w=r}t=s}u(w,r,t.type,q.slice(w,r))}function m(s){if(typeof s=="number"){return{type:"number",number:s}}if(typeof s=="string"){var r=l(s);if(r){return r}var q=/^(.*\D)(\d+)/.exec(s);if(q){s=s.replace(/^(.*\D)\d+/,"$1-######");return{type:s,match:q,number:parseFloat(q[2])}}return{type:"string"}}if(typeof s=="boolean"){return{type:"boolean"}}if(s==null){return{type:"null"}}if(s instanceof f){return{type:"formula"}}window.console.error(s);throw new Error("Cannot fill data")}function p(){var q=kendo.culture();return[q.calendars.standard.days.namesAbbr,q.calendars.standard.days.names,q.calendars.standard.months.namesAbbr,q.calendars.standard.months.names]}function l(w){var t=w.toLowerCase();var q=p();for(var u=0;u<q.length;++u){var r=q[u];for(var s=r.length;--s>=0;){var v=r[s].toLowerCase();if(v==t){return{type:r,number:s,value:w}}}}}function j(r){var q=r.length,w=r[0].length;var v=[];for(var u=0;u<w;++u){v[u]=[];for(var s=0;s<q;++s){v[u][s]=r[s][u]}}return v}},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/nameeditor",["kendo.core"],a)}(function(){(function(d){if(d.support.browser.msie&&d.support.browser.version<9){return}var c=d.jQuery;var b={input:"k-spreadsheet-name-editor",list:"k-spreadsheet-name-list"};var a=d.ui.Widget.extend({init:function(f,e){d.ui.Widget.call(this,f,e);f.addClass(b.input);var g=new d.data.DataSource({transport:{read:function(h){var i=[];this._workbook.forEachName(function(j){if(!j.hidden&&j.value instanceof d.spreadsheet.Ref){i.push({name:j.name})}});h.success(i)}.bind(this),cache:false}});this.combo=c("<input />").appendTo(f).kendoComboBox({clearButton:false,dataTextField:"name",dataValueField:"name",template:"#:data.name#<a class='k-button-delete' href='\\#'><span class='k-icon k-i-close'></span></a>",dataSource:g,autoBind:false,ignoreCase:true,change:this._on_listChange.bind(this),noDataTemplate:"<div></div>",open:function(){g.read()}}).getKendoComboBox();this.combo.input.on("keydown",this._on_keyDown.bind(this)).on("focus",this._on_focus.bind(this));this.combo.popup.element.addClass("k-spreadsheet-names-popup").on("mousemove",function(h){h.stopPropagation()}).on("click",".k-button-delete",function(i){i.preventDefault();i.stopPropagation();var h=c(i.target).closest(".k-item");h=this.combo.dataItem(h);this._deleteItem(h.name)}.bind(this))},value:function(e){if(e===undefined){return this.combo.value()}else{this.combo.value(e)}},_deleteItem:function(e){this.trigger("delete",{name:e})},_on_keyDown:function(e){switch(e.keyCode){case 27:this.combo.value(this._prevValue);this.trigger("cancel");break;case 13:this.trigger("enter");break}},_on_focus:function(){this._prevValue=this.combo.value()},_on_listChange:function(){var e=this.combo.value();if(e){this.trigger("select",{name:e})}}});d.spreadsheet.NameEditor=a}(window.kendo))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("spreadsheet/print",["kendo.pdf","spreadsheet/sheet","spreadsheet/range","spreadsheet/references","spreadsheet/numformat","util/text-metrics"],a)}(function(){if(kendo.support.browser.msie&&kendo.support.browser.version<9){return}var g=kendo.spreadsheet;var i=g.CellRef;var q=kendo.drawing;var a=g.formatting;var r=kendo.geometry;var h=0.8;function o(w,v){var x=0;var u=[];var s=0.2*v;var t=v;w.forEach(function(y){if(v&&x+y>t){if(t-x<s){x=v*Math.ceil(x/v)}t+=v*Math.ceil(y/v)}u.push(x);x+=y});u.push(x);return u}function c(y,x,I){var F=[];var A=[];var G=[];var s=y._getMergedCells(x);var B=-1,E=-1;y.forEach(x,function(R,L,Q){var S=R-x.topLeft.row;var K=L-x.topLeft.col;var P=y.rowHeight(R);var N=y.columnWidth(L);if(!K){A.push(P)}if(!S){G.push(N)}if(y.isHiddenColumn(L)||y.isHiddenRow(R)||!P||!N){return}var O=I.forScreen||b(Q);if(!(I.emptyCells||O)){return}var J=new i(R,L).print();if(s.secondary[J]){return}if(O){B=Math.max(B,S);E=Math.max(E,K)}else{Q.empty=true}var M=s.primary[J];if(M){delete s.primary[J];Q.merged=true;Q.rowspan=M.height();Q.colspan=M.width();if(I.forScreen){Q.width=y._columns.sum(M.topLeft.col,M.bottomRight.col);Q.height=y._rows.sum(M.topLeft.row,M.bottomRight.row)}}else{Q.rowspan=1;Q.colspan=1}Q.row=S;Q.col=K;F.push(Q)});A=A.slice(0,B+1);G=G.slice(0,E+1);var D=I.pageWidth;var u=I.pageHeight;var C=1;if(I.fitWidth){var t=G.reduce(d,0);if(t>D){C=D/t;D/=C;u/=C}}var v=o(A,u||0);var H=o(G,D||0);var w=0;var z=0;F=F.filter(function(J){if(J.empty&&(J.row>B||J.col>E)){return false}J.left=H[J.col];J.top=v[J.row];if(J.merged){if(!I.forScreen){J.right=j(H,J.col+J.colspan);J.bottom=j(v,J.row+J.rowspan);J.width=J.right-J.left;J.height=J.bottom-J.top}else{J.right=J.left+J.width;J.bottom=J.top+J.height}}else{J.width=G[J.col];J.height=A[J.row];J.bottom=J.top+J.height;J.right=J.left+J.width}w=Math.max(w,J.right);z=Math.max(z,J.bottom);return true});Object.keys(s.primary).forEach(function(K){var J=s.primary[K];y.forEach(J.topLeft.toRangeRef(),function(P,N,L){var M=P-x.topLeft.row;var O=N-x.topLeft.col;L.merged=true;L.colspan=J.height();L.rowspan=J.width();if(M<0){L.top=-y._rows.sum(P,P-M-1)}else{L.top=v[M]}if(O<0){L.left=-y._columns.sum(N,N-O-1)}else{L.left=H[O]}L.height=y._rows.sum(J.topLeft.row,J.bottomRight.row);L.width=y._columns.sum(J.topLeft.col,J.bottomRight.col);if(L.height>0&&L.width>0){L.right=L.left+L.width;L.bottom=L.top+L.height;F.push(L)}})});return{width:w,height:z,cells:F.sort(f),scale:C,xCoords:H,yCoords:v}}function d(t,s){return t+s}function j(s,t){return t<s.length?s[t]:s[s.length-1]}function b(s){return s.value!=null||s.merged||s.background!=null||s.borderTop!=null||s.borderRight!=null||s.borderBottom!=null||s.borderLeft!=null||s.validation!=null&&!s.validation.value}function f(t,s){if(t.top<s.top){return -1}else{if(t.top==s.top){if(t.left<s.left){return -1}else{if(t.left==s.left){return 0}else{return 1}}}else{return 1}}}function p(x,A,B){var s=Math.ceil(x.width/B.pageWidth);var v=Math.ceil(x.height/B.pageHeight);var z=B.pageWidth/x.scale;var t=B.pageHeight/x.scale;for(var w=0;w<s;++w){for(var u=0;u<v;++u){y(u,w)}}function y(O,E){var F=E*z;var M=F+z;var K=O*t;var C=K+t;var D=0,P=0;var N=x.cells.filter(function(Q){if(Q.right<=F||Q.left>=M||Q.bottom<=K||Q.top>=C){return false}D=Math.max(Q.bottom,D);P=Math.max(Q.right,P);return true});if(N.length>0){var J=new q.Group();A.append(J);J.clip(q.Path.fromRect(new r.Rect([0,0],[B.pageWidth,B.pageHeight])));var H=new q.Group();J.append(H);var L=r.Matrix.scale(x.scale,x.scale).multiplyCopy(r.Matrix.translate(-F,-K));if(B.hCenter||B.vCenter){L=L.multiplyCopy(r.Matrix.translate(B.hCenter?(M-P)/2:0,B.vCenter?(C-D)/2:0))}H.transform(L);if(B.guidelines){var G=null;x.xCoords.forEach(function(Q){Q=Math.min(Q,P);if(Q!==G&&Q>=F&&Q<=M){G=Q;H.append(new q.Path().moveTo(Q,K).lineTo(Q,D).close().stroke("#999",h))}});var G=null;x.yCoords.forEach(function(Q){Q=Math.min(Q,D);if(Q!==G&&Q>=K&&Q<=C){G=Q;H.append(new q.Path().moveTo(F,Q).lineTo(P,Q).close().stroke("#999",h))}})}var I=new q.Group();N.forEach(function(Q){e(Q,H,I,B)});H.append(I)}}}function e(B,x,y,C){var v=new q.Group();x.append(v);var A=new r.Rect([B.left,B.top],[B.width,B.height]);if(B.background||B.merged){var s=A;if(C.guidelines){s=A.clone();s.origin.x+=h/2;s.origin.y+=h/2;s.size.width-=h;s.size.height-=h}v.append(new q.Rect(s).fill(B.background||"#fff").stroke(null))}if(B.borderLeft){y.append(new q.Path().moveTo(B.left,B.top).lineTo(B.left,B.bottom).close().stroke(B.borderLeft.color,B.borderLeft.size))}if(B.borderTop){y.append(new q.Path().moveTo(B.left,B.top).lineTo(B.right,B.top).close().stroke(B.borderTop.color,B.borderTop.size))}if(B.borderRight){y.append(new q.Path().moveTo(B.right,B.top).lineTo(B.right,B.bottom).close().stroke(B.borderRight.color,B.borderRight.size))}if(B.borderBottom){y.append(new q.Path().moveTo(B.left,B.bottom).lineTo(B.right,B.bottom).close().stroke(B.borderBottom.color,B.borderBottom.size))}var t=B.value;if(t!=null){var z=typeof t=="number"?"number":null;var u=new q.Group();u.clip(q.Path.fromRect(A));v.append(u);var w;if(B.format){w=a.textAndColor(t,B.format);t=w.text;if(w.type){z=w.type}}else{t+=""}if(!B.textAlign){switch(z){case"number":case"date":case"percent":B.textAlign="right";break;case"boolean":B.textAlign="center";break}}n(t,w&&w.color||B.color||"#000",B,u)}}var l;function n(x,t,s,v){if(!l){l=document.createElement("div");l.style.position="absolute";l.style.left="-10000px";l.style.top="-10000px";l.style.overflow="hidden";l.style.boxSizing="border-box";l.style.padding="2px 4px";l.style.lineHeight="normal";document.body.appendChild(l)}l.style.color=t;l.style.font=m(s);l.style.width=s.width+"px";l.style.textAlign=s.textAlign||"left";l.style.textDecoration=s.underline?"underline":"none";if(s.wrap){l.style.whiteSpace="pre-wrap";l.style.overflowWrap=l.style.wordWrap="break-word"}else{l.style.whiteSpace="pre";l.style.overflowWrap=l.style.wordWrap="normal"}if(l.firstChild){l.removeChild(l.firstChild)}l.appendChild(document.createTextNode(x));var w=0;switch(s.verticalAlign){case"center":w=s.height-l.offsetHeight>>1;break;case undefined:case null:case"bottom":w=s.height-l.offsetHeight;break}if(w<0){w=0}var u=kendo.drawing.drawDOM.drawText(l);u.transform(r.Matrix.translate(10000+s.left,10000+s.top+w));v.append(u)}function m(s){var t=[];if(s.italic){t.push("italic")}if(s.bold){t.push("bold")}t.push((s.fontSize||12)+"px");t.push(s.fontFamily||"Arial");return t.join(" ")}function k(w,u,A,z){if(A==null&&z==null){z=u;A={};u=g.SHEETREF}if(z==null){z=A;if(u instanceof g.Range||u instanceof g.Ref||typeof u=="string"){A={}}else{A=u;u=g.SHEETREF}}A=kendo.jQuery.extend({paperSize:"A4",landscape:true,margin:"1cm",guidelines:true,emptyCells:true,fitWidth:false,center:false},A);var y=new q.Group();var s=kendo.pdf.getPaperOptions(A);y.options.set("pdf",{author:A.author,creator:A.creator,date:A.date,keywords:A.keywords,margin:s.margin,multiPage:true,paperSize:s.paperSize,subject:A.subject,title:A.title});var x=s.paperSize[0];var t=s.paperSize[1];if(s.margin){x-=s.margin.left+s.margin.right;t-=s.margin.top+s.margin.bottom}A.pageWidth=x;A.pageHeight=t;var v=c(w,w._ref(u),A);p(v,y,A);z(y)}g.Sheet.prototype.draw=function(s,t,v){var u=this;if(u._workbook){u.recalc(u._workbook._context,function(){k(u,s,t,v)})}else{k(u,s,t,v)}};g.draw={doLayout:c,drawLayout:p,shouldDrawCell:b}},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.spreadsheet",["util/undoredostack","util/text-metrics","util/parse-xml","kendo.excel","kendo.progressbar","kendo.pdf","spreadsheet/commands","spreadsheet/formulabar","spreadsheet/formulainput","spreadsheet/eventlistener","spreadsheet/rangelist","spreadsheet/propertybag","spreadsheet/references","spreadsheet/navigator","spreadsheet/axismanager","spreadsheet/clipboard","spreadsheet/range","spreadsheet/sheet","spreadsheet/sheetsbar","spreadsheet/excel-reader","spreadsheet/workbook","spreadsheet/formulacontext","spreadsheet/controller","spreadsheet/view","spreadsheet/customeditors","spreadsheet/grid","spreadsheet/axis","spreadsheet/filter","spreadsheet/sorter","spreadsheet/runtime","spreadsheet/calc","spreadsheet/numformat","spreadsheet/runtime.functions","spreadsheet/runtime.functions.2","spreadsheet/toolbar","spreadsheet/dialogs","spreadsheet/sheetbinder","spreadsheet/filtermenu","spreadsheet/editor","spreadsheet/autofill","spreadsheet/nameeditor","spreadsheet/print"],a)}(function(){var a={id:"spreadsheet",name:"Spreadsheet",category:"web",description:"Spreadsheet component",depends:["core","binder","colorpicker","combobox","data","dom","dropdownlist","menu","ooxml","popup","sortable","tabstrip","toolbar","treeview","window","validator","excel","pdf","drawing"]};(function(i,d){if(i.support.browser.msie&&i.support.browser.version<9){return}var h=i.jQuery;var l=i.ui.Widget;var j=i.spreadsheet.Workbook;var g=i.spreadsheet.Controller;var c=i.spreadsheet.View;var e=".kendoSpreadsheet";var k={recalc:true,selection:true,activeCell:true,layout:true,sheetSelection:true,resize:true,editorChange:false,editorClose:false};var b={wrapper:"k-widget k-spreadsheet"};var f=i.ui.Widget.extend({init:function(n,m){l.fn.init.call(this,n,m);this.element.addClass(f.classNames.wrapper);this._view=new c(this.element,{messages:this.options.messages.view,toolbar:this.options.toolbar,sheetsbar:this.options.sheetsbar});this._workbook=new j(this.options,this._view);this._controller=new g(this._view,this._workbook);this._autoRefresh=true;this._bindWorkbookEvents();this._view.workbook(this._workbook);this.refresh();this._resizeHandler=function(){this.resize()}.bind(this);h(window).on("resize"+e,this._resizeHandler)},_resize:function(){this.refresh({layout:true})},_workbookChange:function(n){if(this._autoRefresh){this.refresh(n)}if(n.recalc&&n.ref){var m=n.range||new i.spreadsheet.Range(n.ref,this.activeSheet());this.trigger("change",{range:m})}},_workbookCut:function(m){this.trigger("cut",m)},_workbookCopy:function(m){this.trigger("copy",m)},_workbookPaste:function(m){this.trigger("paste",m)},activeSheet:function(m){return this._workbook.activeSheet(m)},moveSheetToIndex:function(n,m){return this._workbook.moveSheetToIndex(n,m)},insertSheet:function(m){return this._workbook.insertSheet(m)},sheets:function(){return this._workbook.sheets()},removeSheet:function(m){return this._workbook.removeSheet(m)},sheetByName:function(m){return this._workbook.sheetByName(m)},sheetIndex:function(m){return this._workbook.sheetIndex(m)},sheetByIndex:function(m){return this._workbook.sheetByIndex(m)},renameSheet:function(n,m){return this._workbook.renameSheet(n,m)},refresh:function(m){if(!m){m=k}if(!m.editorClose){this._view.sheet(this._workbook.activeSheet());this._controller.sheet(this._workbook.activeSheet());this._workbook.refresh(m)}if(!m.editorChange){this._view.refresh(m);this._controller.refresh();this._view.render();this.trigger("render")}return this},openDialog:function(n,m){return this._view.openDialog(n,m)},autoRefresh:function(m){if(m!==d){this._autoRefresh=m;if(m===true){this.refresh()}return this}return this._autoRefresh},toJSON:function(){return this._workbook.toJSON()},fromJSON:function(m){if(m.sheets){this._workbook.destroy();this._workbook=new j(h.extend({},this.options,m));this._bindWorkbookEvents();this._view.workbook(this._workbook);this._controller.workbook(this._workbook);this.activeSheet(this.activeSheet())}else{this.refresh()}},fromFile:function(m,n){return this._workbook.fromFile(m,n)},saveAsPDF:function(m){this._workbook.saveAsPDF(h.extend({},this.options.pdf,m,{workbook:this._workbook}))},saveAsExcel:function(m){this._workbook.saveAsExcel(m)},draw:function(m,n){this._workbook.draw(m,n)},_workbookExcelExport:function(m){if(this.trigger("excelExport",m)){m.preventDefault()}},_workbookExcelImport:function(m){if(this.trigger("excelImport",m)){m.preventDefault()}else{this._initProgress(m.promise)}},_initProgress:function(m){var o=h("<div class='k-loading-mask' style='width: 100%; height: 100%; top: 0;'><div class='k-loading-color'/></div>").appendTo(this.element);var n=h("<div class='k-loading-progress'>").appendTo(o).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar");m.progress(function(p){n.value(p.progress)}).always(function(){i.destroy(o);o.remove()})},_workbookPdfExport:function(m){if(this.trigger("pdfExport",m)){m.preventDefault()}},_workbookInsertSheet:function(m){if(this.trigger("insertSheet",m)){m.preventDefault()}},_workbookRemoveSheet:function(m){if(this.trigger("removeSheet",m)){m.preventDefault()}},_workbookSelectSheet:function(m){if(this.trigger("selectSheet",m)){m.preventDefault()}},_workbookRenameSheet:function(m){if(this.trigger("renameSheet",m)){m.preventDefault()}},_workbookInsertRow:function(m){if(this.trigger("insertRow",m)){m.preventDefault()}},_workbookInsertColumn:function(m){if(this.trigger("insertColumn",m)){m.preventDefault()}},_workbookDeleteRow:function(m){if(this.trigger("deleteRow",m)){m.preventDefault()}},_workbookDeleteColumn:function(m){if(this.trigger("deleteColumn",m)){m.preventDefault()}},_workbookHideRow:function(m){if(this.trigger("hideRow",m)){m.preventDefault()}},_workbookHideColumn:function(m){if(this.trigger("hideColumn",m)){m.preventDefault()}},_workbookUnhideRow:function(m){if(this.trigger("unhideRow",m)){m.preventDefault()}},_workbookUnhideColumn:function(m){if(this.trigger("unhideColumn",m)){m.preventDefault()}},_workbookSelect:function(m){this.trigger("select",m)},_workbookChangeFormat:function(m){this.trigger("changeFormat",m)},_bindWorkbookEvents:function(){this._workbook.bind("cut",this._workbookCut.bind(this));this._workbook.bind("copy",this._workbookCopy.bind(this));this._workbook.bind("paste",this._workbookPaste.bind(this));this._workbook.bind("change",this._workbookChange.bind(this));this._workbook.bind("excelExport",this._workbookExcelExport.bind(this));this._workbook.bind("excelImport",this._workbookExcelImport.bind(this));this._workbook.bind("pdfExport",this._workbookPdfExport.bind(this));this._workbook.bind("insertSheet",this._workbookInsertSheet.bind(this));this._workbook.bind("removeSheet",this._workbookRemoveSheet.bind(this));this._workbook.bind("selectSheet",this._workbookSelectSheet.bind(this));this._workbook.bind("renameSheet",this._workbookRenameSheet.bind(this));this._workbook.bind("insertRow",this._workbookInsertRow.bind(this));this._workbook.bind("insertColumn",this._workbookInsertColumn.bind(this));this._workbook.bind("deleteRow",this._workbookDeleteRow.bind(this));this._workbook.bind("deleteColumn",this._workbookDeleteColumn.bind(this));this._workbook.bind("hideRow",this._workbookHideRow.bind(this));this._workbook.bind("hideColumn",this._workbookHideColumn.bind(this));this._workbook.bind("unhideRow",this._workbookUnhideRow.bind(this));this._workbook.bind("unhideColumn",this._workbookUnhideColumn.bind(this));this._workbook.bind("select",this._workbookSelect.bind(this));this._workbook.bind("changeFormat",this._workbookChangeFormat.bind(this))},destroy:function(){i.ui.Widget.fn.destroy.call(this);this._workbook.destroy();this._controller.destroy();this._view.destroy();if(this._resizeHandler){h(window).off("resize"+e,this._resizeHandler)}},options:{name:"Spreadsheet",toolbar:true,sheetsbar:true,rows:200,columns:50,rowHeight:20,columnWidth:64,headerHeight:20,headerWidth:32,excel:{proxyURL:"",fileName:"Workbook.xlsx"},messages:{},pdf:{area:"workbook",fileName:"Workbook.pdf",proxyURL:"",paperSize:"a4",landscape:true,margin:null,title:null,author:null,subject:null,keywords:null,creator:"Kendo UI PDF Generator v."+i.version,date:null},defaultCellStyle:{fontFamily:"Arial",fontSize:"12"}},defineName:function(m,o,n){return this._workbook.defineName(m,o,n)},undefineName:function(m){return this._workbook.undefineName(m)},nameValue:function(m){return this._workbook.nameValue(m)},forEachName:function(m){return this._workbook.forEachName(m)},cellContextMenu:function(){return this._view.cellContextMenu},rowHeaderContextMenu:function(){return this._view.rowHeaderContextMenu},colHeaderContextMenu:function(){return this._view.colHeaderContextMenu},events:["cut","copy","paste","pdfExport","excelExport","excelImport","change","render","removeSheet","selectSheet","renameSheet","insertRow","insertColumn","deleteRow","insertSheet","deleteColumn","hideRow","hideColumn","unhideRow","unhideColumn","select","changeFormat"]});i.spreadsheet.ALL_REASONS=k;i.ui.plugin(f);h.extend(true,f,{classNames:b})}(window.kendo));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.pivot.configurator",["kendo.dom"],a)}(function(){var a={id:"pivot.configurator",name:"PivotConfigurator",category:"web",depends:["dropdownlist","treeview","pivot.fieldmenu"],hidden:true};(function(g,c){var l=window.kendo,m=l.ui,n=m.Widget,o=".kendoPivotConfigurator",j="mouseenter"+o+" mouseleave"+o,f=l.template('<p class="k-reset"><span class="k-icon #=icon#"></span>${name}</p><div class="k-list-container k-reset"/>');function e(t){var s;var q=0;var r=t.length;for(;q<r;q++){if(t[q].type==2){s=true;break}}if(s){t.splice(q+1,0,{caption:"KPIs",defaultHierarchy:"[KPIs]",name:"KPIs",uniqueName:"[KPIs]"})}}function p(q){return{name:q.uniqueName,type:q.type}}function i(s){for(var q=0,r=s.length;q<r;q++){s[q].uniqueName=s[q].name;s[q].type="kpi"}return s}function k(q){var r=g(q).closest(".k-pivot-setting");if(r.length){return r.data("kendoPivotSettingTarget")}return null}var b=n.extend({init:function(r,q){n.fn.init.call(this,r,q);this.element.addClass("k-widget k-fieldselector k-alt k-edit-form-container");this._dataSource();this._layout();this.refresh();l.notify(this)},events:[],options:{name:"PivotConfigurator",filterable:false,sortable:false,messages:{measures:"Drop Data Fields Here",columns:"Drop Column Fields Here",rows:"Drop Rows Fields Here",measuresLabel:"Measures",columnsLabel:"Columns",rowsLabel:"Rows",fieldsLabel:"Fields"}},_dataSource:function(){var q=this;if(q.dataSource&&q._refreshHandler){q.dataSource.unbind("change",q._refreshHandler).unbind("error",q._errorHandler).unbind("progress",q._progressHandler)}else{q._errorHandler=g.proxy(q._error,q);q._refreshHandler=g.proxy(q.refresh,q);q._progressHandler=g.proxy(q._requestStart,q)}q.dataSource=l.data.PivotDataSource.create(q.options.dataSource);q.dataSource.bind("change",q._refreshHandler).bind("error",q._errorHandler).bind("progress",q._progressHandler)},setDataSource:function(q){this.options.dataSource=q;this._dataSource();if(this.measures){this.measures.setDataSource(q)}if(this.rows){this.rows.setDataSource(q)}if(this.columns){this.columns.setDataSource(q)}this.refresh()},_treeViewDataSource:function(){var q=this;return l.data.HierarchicalDataSource.create({schema:{model:{id:"uniqueName",hasChildren:function(r){return !("hierarchyUniqueName" in r)&&!("aggregator" in r)}}},transport:{read:function(r){var u;var s;var t;if(g.isEmptyObject(r.data)){u=q.dataSource.schemaDimensions();u.done(function(v){if(!q.dataSource.cubeBuilder){e(v)}r.success(v)}).fail(r.error)}else{s=q.treeView.dataSource.get(r.data.uniqueName);if(s.uniqueName==="[KPIs]"){t=true;u=q.dataSource.schemaKPIs();u.done(function(v){r.success(i(v))}).fail(r.error)}else{if(s.type=="kpi"){t=true;r.success(h(s))}}if(!t){if(s.type==2){u=q.dataSource.schemaMeasures()}else{if(s.dimensionUniqueName){u=q.dataSource.schemaLevels(r.data.uniqueName)}else{u=q.dataSource.schemaHierarchies(r.data.uniqueName)}}u.done(r.success).fail(r.error)}}}}})},_progress:function(q){l.ui.progress(this.element,q)},_error:function(){this._progress(false)},_requestStart:function(){this._progress(true)},_layout:function(){this.form=g('<div class="k-columns k-state-default k-floatwrap"/>').appendTo(this.element);this._fields();this._targets()},_fields:function(){var q=g('<div class="k-state-default"><p class="k-reset"><span class="k-icon k-i-group"></span>'+this.options.messages.fieldsLabel+"</p></div>").appendTo(this.form);var r='# if (item.type == 2 || item.uniqueName == "[KPIs]") { #<span class="k-icon k-i-#= (item.type == 2 ? "sum" : "kpi") #"></span># } else if (item.type && item.type !== "kpi") { #<span class="k-icon k-i-arrows-dimensions"></span># } ##: item.caption || item.name #';this.treeView=g("<div/>").appendTo(q).kendoTreeView({template:r,dataTextField:"caption",dragAndDrop:true,autoBind:false,dataSource:this._treeViewDataSource(),dragstart:function(t){var s=this.dataItem(t.sourceNode);if(!s.hasChildren&&!s.aggregator&&!s.measure||s.type==2||s.uniqueName==="[KPIs]"){t.preventDefault()}},drag:function(u){var s="k-i-cancel";var t=k(u.dropTarget);if(t&&t.validate(this.dataItem(u.sourceNode))){s="k-i-plus"}u.setStatusClass(s)},drop:function(y){y.preventDefault();var u=k(y.dropTarget);var w=this.dataItem(y.sourceNode);var s,v,x;var t;if(u&&u.validate(w)){t=w.defaultHierarchy||w.uniqueName;if(w.type==="kpi"){x=h(w);v=x.length;t=[];for(s=0;s<v;s++){t.push(p(x[s]))}}else{if(w.kpi){t=[p(w)]}}u.add(t)}}}).data("kendoTreeView")},_createTarget:function(s,q){var t='<li class="k-item k-header" data-'+l.ns+'name="${data.name}">${data.name}';var u=q.sortable;var r="";if(u){r+="#if (data.sortIcon) {#";r+='<span class="k-icon ${data.sortIcon}-sm"></span>';r+="#}#"}if(q.filterable||u){r+='<span class="k-icon k-i-more-vertical k-setting-fieldmenu"></span>'}r+='<span class="k-icon k-i-close k-setting-delete"></span>';t+='<span class="k-field-actions">'+r+"</span></li>";return new l.ui.PivotSettingTarget(s,g.extend({dataSource:this.dataSource,hint:function(v){var w=g('<div class="k-fieldselector"><ul class="k-list k-reset"></ul></div>');w.find(".k-list").append(v.clone());return w},template:t,emptyTemplate:'<li class="k-item k-empty">${data}</li>'},q))},_targets:function(){var s=g('<div class="k-state-default"/>').appendTo(this.form);var r=g(f({name:this.options.messages.columnsLabel,icon:"k-i-columns"})).appendTo(s);var u=g('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(r.last());var x=g(f({name:this.options.messages.rowsLabel,icon:"k-i-rows"})).appendTo(s);var v=g('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(x.last());var q=g(f({name:this.options.messages.measuresLabel,icon:"k-i-sum"})).appendTo(s);var w=g('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(q.last());var t=this.options;this.columns=this._createTarget(u,{filterable:t.filterable,sortable:t.sortable,connectWith:v,messages:{empty:t.messages.columns,fieldMenu:t.messages.fieldMenu}});this.rows=this._createTarget(v,{filterable:t.filterable,sortable:t.sortable,setting:"rows",connectWith:u,messages:{empty:this.options.messages.rows,fieldMenu:this.options.messages.fieldMenu}});this.measures=this._createTarget(w,{setting:"measures",messages:{empty:t.messages.measures}});u.add(v).add(w).on(j,".k-item:not(.k-empty)",this._toggleHover)},_toggleHover:function(q){g(q.currentTarget).toggleClass("k-state-hover",q.type==="mouseenter")},_resize:function(){var t=this.element;var r=this.options.height;var s,q;var u=l._outerHeight;if(!r){return}t.height(r);if(t.is(":visible")){q=t.children(".k-columns").children("div.k-state-default");r=t.innerHeight();s=(u(t)-r)/2;r=r-(u(q,true)-q.height())-s;q.height(r)}},refresh:function(){var q=this.dataSource;if(q.cubeBuilder||this._cube!==q.cube()||this._catalog!==q.catalog()){this.treeView.dataSource.fetch()}this._catalog=this.dataSource.catalog();this._cube=this.dataSource.cube();this._resize();this._progress(false)},destroy:function(){n.fn.destroy.call(this);this.dataSource.unbind("change",this._refreshHandler);this.form.find(".k-list").off(o);this.rows.destroy();this.columns.destroy();this.measures.destroy();this.treeView.destroy();this.element=null;this._refreshHandler=null}});function d(q,s,r){return{hierarchyUniqueName:q,uniqueName:s,caption:s,measure:s,name:s,type:r,kpi:true}}function h(r){var q=r.name;return[d(q,r.value,"value"),d(q,r.goal,"goal"),d(q,r.status,"status"),d(q,r.trend,"trend")]}m.plugin(b)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.angular",["kendo.core"],a)}(function(){var a={id:"angular",name:"AngularJS Directives",category:"framework",description:"Adds Kendo UI for AngularJS directives",depends:["core"],defer:true};(function(x,s,l){if(!s||!s.injector){return}var e=s.module("kendo.directives",[]),z=s.injector(["ng"]),L=z.get("$parse"),y=z.get("$timeout"),v,M=z.get("$log");function d(P){var O=y;try{y=function(Q){return Q()};return P()}finally{y=O}}var w;var G=function(){var O={TreeList:"TreeListDataSource",TreeView:"HierarchicalDataSource",Scheduler:"SchedulerDataSource",PivotGrid:"PivotDataSource",PivotConfigurator:"PivotDataSource",PanelBar:"HierarchicalDataSource",Menu:"$PLAIN",ContextMenu:"$PLAIN"};var P=function(R,Q){if(Q=="$PLAIN"){return R}return kendo.data[Q].create(R)};return function(S,Q,W,U){var R=O[W]||"DataSource";var V=S.$eval(U);var T=P(V,R);S.$watch(U,function(Z){var Y=n(Q);if(Y&&typeof Y.setDataSource=="function"){if(Z!==V){var X=P(Z,R);Y.setDataSource(X);V=Z}}});return T}}();var c={kDataSource:true,kOptions:true,kRebind:true,kNgModel:true,kNgDelay:true};var u={name:true,title:true,style:true};function H(Q,R,ad,U,X,O){if(!(R instanceof jQuery)){throw new Error("The Kendo UI directives require jQuery to be available before AngularJS. Please include jquery before angular in the document.")}var T=ad.kNgDelay,Z=Q.$eval(T);O=O||[];var aa=O[0],W=O[1];var V=x(R)[U];if(!V){window.console.error("Could not find: "+U);return null}var Y=A(Q,R,ad,U,V);var S=Y.options;if(Y.unresolved.length){var ac=[];for(var af=0,ag=Y.unresolved.length;af<ag;af++){var ai=Y.unresolved[af];var ab=x.Deferred(function(aj){var ak=Q.$watch(ai.path,function(al){if(al!==l){ak();aj.resolve()}})}).promise();ac.push(ab)}x.when.apply(null,ac).then(ah);return}if(T&&!Z){var ae=Q.$root||Q;var P=function(){var aj=Q.$watch(T,function(ak){if(ak!==l){aj();R.removeAttr(ad.$attr.kNgDelay);T=null;y(ah)}})};if(/^\$(digest|apply)$/.test(ae.$$phase)){P()}else{Q.$apply(P)}return}else{return ah()}function ah(){var ak;if(ad.kRebind){ak=x(x(R)[0].cloneNode(true))}S=A(Q,R,ad,U,V).options;if(R.is("select")){(function(aq){if(aq.length>0){var ar=x(aq[0]);if(!/\S/.test(ar.text())&&/^\?/.test(ar.val())){ar.remove()}}}(R[0].options))}var ao=V.call(R,w=S).data(U);D(ao,Q,ad,U,X);Q.$emit("kendoWidgetCreated",ao);var ap=K(Q,ao);if(ad.kRebind){I(ao,Q,R,ak,ad.kRebind,ap,ad)}if(ad.kNgDisabled){var an=ad.kNgDisabled;var am=Q.$eval(an);if(am){ao.enable(!am)}N(ao,Q,R,an)}if(ad.kNgReadonly){var al=ad.kNgReadonly;var aj=Q.$eval(al);if(aj){ao.readonly(aj)}t(ao,Q,R,al)}if(ad.kNgModel){F(ao,Q,ad.kNgModel)}if(aa){B(ao,Q,R,aa,W)}if(ao){r(ao,R)}return ao}}function A(aa,S,Z,T,Y){var R=T.replace(/^kendo/,"");var V=[];var U=Z.kOptions||Z.options;var X=aa.$eval(U);if(U&&X===l){V.push({option:"options",path:U})}var ab=s.extend({},Z.defaultOptions,X);function W(ac,ae){var ad=s.copy(aa.$eval(ae));if(ad===l){V.push({option:ac,path:ae})}else{ab[ac]=ad}}var P=Y.widget.prototype.options;var Q=Y.widget.prototype.events;x.each(Z,function(af,ah){if(af==="source"||af==="kDataSource"||af==="kScopeField"||af==="scopeField"){return}var ac="data"+af.charAt(0).toUpperCase()+af.slice(1);if(af.indexOf("on")===0){var ae=af.replace(/^on./,function(ai){return ai.charAt(2).toLowerCase()});if(Q.indexOf(ae)>-1){ab[ae]=ah}}if(P.hasOwnProperty(ac)){W(ac,ah)}else{if(P.hasOwnProperty(af)&&!u[af]){W(af,ah)}else{if(!c[af]){var ad=af.match(/^k(On)?([A-Z].*)/);if(ad){var ag=ad[2].charAt(0).toLowerCase()+ad[2].slice(1);if(ad[1]&&af!="kOnLabel"){ab[ag]=ah}else{if(af=="kOnLabel"){ag="onLabel"}W(ag,ah)}}}}}});var O=Z.kDataSource||Z.source;if(O){ab.dataSource=G(aa,S,R,O)}ab.$angular=[aa];return{options:ab,unresolved:V}}function N(R,Q,P,O){if(kendo.ui.PanelBar&&R instanceof kendo.ui.PanelBar||kendo.ui.Menu&&R instanceof kendo.ui.Menu){M.warn("k-ng-disabled specified on a widget that does not have the enable() method: "+R.options.name);return}Q.$watch(O,function(T,S){if(T!=S){R.enable(!T)}})}function t(R,Q,P,O){if(typeof R.readonly!="function"){M.warn("k-ng-readonly specified on a widget that does not have the readonly() method: "+R.options.name);return}Q.$watch(O,function(T,S){if(T!=S){R.readonly(T)}})}function D(S,Q,P,R,O){if(P[O]){var T=L(P[O]).assign;if(T){T(Q,S)}else{throw new Error(O+" attribute used but expression in it is not assignable: "+P[R])}}}function i(O){if(/checkbox|radio/i.test(O.attr("type"))){return O.prop("checked")}return O.val()}var m=/^(input|select|textarea)$/i;function k(O){return m.test(O[0].tagName)}function B(S,X,R,Q,P){if(!S.value){return}var V;var W=false;if(k(R)){V=function(){return i(R)}}else{V=function(){return S.value()}}var U=function(){var Y=Q.$viewValue;if(Y===l){Y=Q.$modelValue}if(Y===l){Y=null}W=true;setTimeout(function(){W=false;if(S){var Z=X[S.element.attr("k-ng-model")];if(Z){Y=Z}if(S.options.autoBind===false&&!S.listView.bound()){if(Y){S.value(Y)}}else{S.value(Y)}}},0)};Q.$render=U;setTimeout(function(){if(Q.$render!==U){Q.$render=U;Q.$render()}});if(k(R)){R.on("change",function(){W=true})}var T=function(Y){return function(){var Z;if(W){return}if(Y&&P){Z=P.$pristine}Q.$setViewValue(V());if(Y){Q.$setPristine();if(Z){P.$setPristine()}}C(X)}};S.first("change",T(false));S.first("spin",T(false));if(!(kendo.ui.AutoComplete&&S instanceof kendo.ui.AutoComplete)){S.first("dataBound",T(true))}var O=V();if(!isNaN(Q.$viewValue)&&O!=Q.$viewValue){if(!Q.$isEmpty(Q.$viewValue)){S.value(Q.$viewValue)}else{if(O!=null&&O!==""&&O!=Q.$viewValue){Q.$setViewValue(O)}}}Q.$setPristine()}function F(V,Z,aa){if(typeof V.value!="function"){M.warn("k-ng-model specified on a widget that does not have the value() method: "+V.options.name);return}var P=x(V.element).parents("form");var R=kendo.getter(P.attr("name"),true)(Z);var X=L(aa);var T=X.assign;var Y=false;var U=kendo.ui.MultiSelect&&V instanceof kendo.ui.MultiSelect;var Q=function(ab){return ab&&U?ab.length:0};var O=Q(X(Z));V.$angular_setLogicValue(X(Z));var S=function(ac,ab){if(ac===l){ac=null}if(Y||ac==ab&&Q(ac)==O){return}O=Q(ac);V.$angular_setLogicValue(ac)};if(U){Z.$watchCollection(aa,S)}else{Z.$watch(aa,S)}var W=function(){Y=true;if(R&&R.$pristine){R.$setDirty()}C(Z,function(){T(Z,V.$angular_getLogicValue());O=Q(X(Z))});Y=false};V.first("change",W);V.first("spin",W)}function K(O,Q){var P=O.$on("$destroy",function(){P();if(Q){kendo.destroy(Q.element);Q=null}});return P}function r(T,O){if(!(window.MutationObserver&&T.wrapper)){return}var Q=[].slice.call(x(O)[0].classList);var S=new MutationObserver(function(U){P();if(!T){return}U.forEach(function(X){var V=x(T.wrapper)[0];switch(X.attributeName){case"class":var W=[].slice.call(X.target.classList);W.forEach(function(Y){if(Q.indexOf(Y)<0){V.classList.add(Y);if(kendo.ui.ComboBox&&T instanceof kendo.ui.ComboBox){T.input[0].classList.add(Y)}}});Q.forEach(function(Y){if(W.indexOf(Y)<0){V.classList.remove(Y);if(kendo.ui.ComboBox&&T instanceof kendo.ui.ComboBox){T.input[0].classList.remove(Y)}}});Q=W;break;case"disabled":if(typeof T.enable=="function"&&!T.element.attr("readonly")){T.enable(!x(X.target).attr("disabled"))}break;case"readonly":if(typeof T.readonly=="function"&&!T.element.attr("disabled")){T.readonly(!!x(X.target).attr("readonly"))}break}});R()});function P(){S.disconnect()}function R(){S.observe(x(O)[0],{attributes:true})}R();T.first("destroy",P)}function I(V,T,S,O,P,U,Q){var R=T.$watch(P,function(ac,Y){if(!V._muteRebind&&ac!==Y){R();if(Q._cleanUp){Q._cleanUp()}var Z=h[V.options.name];if(Z){Z.forEach(function(ae){var ad=T.$eval(Q["k"+ae]);if(ad){O.append(x(ad).attr(kendo.toHyphens("k"+ae),""))}})}var ab=x(V.wrapper)[0];var X=x(V.element)[0];var W=V.options.name==="Upload";if(W){S=x(X)}var aa=S.injector().get("$compile");V._destroy();if(U){U()}V=null;if(X){if(ab){ab.parentNode.replaceChild(X,ab)}x(S).replaceWith(O)}aa(O)(T)}},true);C(T)}function g(O,P){return function(R,Q){return O.call(P,R,Q)}}function j(O,P){this[O]=kendo.stringify(P)}e.factory("directiveFactory",["$compile",function(Q){var P;var R=false;v=Q;var O=function(T,S){return{restrict:"AC",require:["?ngModel","^?form"],scope:false,controller:["$scope","$attrs","$element",function(V,U){this.template=g(j,U);U._cleanUp=g(function(){this.template=null;U._cleanUp=null},this)}],link:function(Y,X,W,aa){var V=x(X);var U=T.replace(/([A-Z])/g,"-$1");V.attr(U,V.attr("data-"+U));V[0].removeAttribute("data-"+U);var Z=H(Y,X,W,T,S,aa);if(!Z){return}if(P){clearTimeout(P)}P=setTimeout(function(){Y.$emit("kendoRendered");if(!R){R=true;x("form").each(function(){var ab=x(this).controller("form");if(ab){ab.$setPristine()}})}})}}};return{create:O}}]);var q={Editor:"textarea",NumericTextBox:"input",DatePicker:"input",DateTimePicker:"input",TimePicker:"input",AutoComplete:"input",ColorPicker:"input",MaskedTextBox:"input",MultiSelect:"input",Upload:"input",Validator:"form",Button:"button",MobileButton:"a",MobileBackButton:"a",MobileDetailButton:"a",ListView:"ul",MobileListView:"ul",PanelBar:"ul",TreeView:"ul",Menu:"ul",ContextMenu:"ul",ActionSheet:"ul"};var b=["MobileView","MobileDrawer","MobileLayout","MobileSplitView","MobilePane","MobileModalView"];var J=["MobileApplication","MobileView","MobileModalView","MobileLayout","MobileActionSheet","MobileDrawer","MobileSplitView","MobilePane","MobileScrollView","MobilePopOver"];s.forEach(["MobileNavBar","MobileButton","MobileBackButton","MobileDetailButton","MobileTabStrip","MobileScrollView","MobileScroller"],function(O){J.push(O);O="kendo"+O;e.directive(O,function(){return{restrict:"A",link:function(R,Q,P){H(R,Q,P,O,O)}}})});function E(R,Q){function S(X,W){e.directive(X,["directiveFactory",function(Y){return Y.create(W,X)}])}var T=Q?"Mobile":"";T+=R.fn.options.name;var U=T;var P="kendo"+T.charAt(0)+T.substr(1).toLowerCase();T="kendo"+T;var O=T.replace(/([A-Z])/g,"-$1");if(b.indexOf(T.replace("kendo",""))==-1){var V=T===P?[T]:[T,P];s.forEach(V,function(W){e.directive(W,function(){return{restrict:"E",replace:true,template:function(Z,Y){var X=q[U]||"div";var aa=Y.kScopeField||Y.scopeField;return"<"+X+" "+O+(aa?'="'+aa+'"':"")+">"+Z.html()+"</"+X+">"}}})})}if(J.indexOf(T.replace("kendo",""))>-1){return}S(T,T);if(P!=T){S(P,T)}}function n(O){O=x(O);return kendo.widgetInstance(O,kendo.ui)||kendo.widgetInstance(O,kendo.mobile.ui)||kendo.widgetInstance(O,kendo.dataviz.ui)}function C(Q,R){var O=Q.$root||Q;var P=/^\$(digest|apply)$/.test(O.$$phase);if(R){if(P){R()}else{O.$apply(R)}}else{if(!P){O.$digest()}}}function p(P,O){P.$destroy();if(O){x(O).removeData("$scope").removeData("$$kendoScope").removeData("$isolateScope").removeData("$isolateScopeNoTemplate").removeClass("ng-scope")}}var f=[];function o(P,R,S){if(x.isArray(P)){return s.forEach(P,function(U){o(U,R,S)})}if(typeof P=="string"){var Q=P.split(".");var O=kendo;while(O&&Q.length>0){O=O[Q.shift()]}if(!O){f.push([P,R,S]);return false}P=O.prototype}var T=P[R];P[R]=function(){var U=this,V=arguments;return S.apply({self:U,next:function(){return T.apply(U,arguments.length>0?arguments:V)}},V)};return true}kendo.onWidgetRegistered(function(O){f=x.grep(f,function(P){return !o.apply(null,P)});E(O.widget,O.prefix=="Mobile")});o(["ui.Widget","mobile.ui.Widget"],"angular",function(R,O){var P=this.self;if(R=="init"){if(!O&&w){O=w}w=null;if(O&&O.$angular){P.$angular_scope=O.$angular[0];P.$angular_init(P.element,O)}return}var Q=P.$angular_scope;if(Q){d(function(){var S=O(),V=S.elements,U=S.data;if(V.length>0){switch(R){case"cleanup":s.forEach(V,function(X){var Y=x(X).data("$$kendoScope");if(Y&&Y!==Q&&Y.$$kendoScope){p(Y,X)}});break;case"compile":var W=P.element.injector();var T=W?W.get("$compile"):v;s.forEach(V,function(Y,X){var Z;if(S.scopeFrom){Z=S.scopeFrom}else{var aa=U&&U[X];if(aa!==l){Z=x.extend(Q.$new(),aa);Z.$$kendoScope=true}else{Z=Q}}x(Y).data("$$kendoScope",Z);T(Y)(Z)});C(Q);break}}})}});o("ui.Widget","$angular_getLogicValue",function(){return this.self.value()});o("ui.Widget","$angular_setLogicValue",function(O){this.self.value(O)});o("ui.Select","$angular_getLogicValue",function(){var P=this.self.dataItem(),O=this.self.options.dataValueField;if(P){if(this.self.options.valuePrimitive){if(!!O){return P[O]}else{return P}}else{return P.toJSON()}}else{return null}});o("ui.Select","$angular_setLogicValue",function(S){var O=this.self;var Q=O.options;var P=Q.dataValueField;var R=Q.text||"";if(S===l){S=""}if(P&&!Q.valuePrimitive&&S){R=S[Q.dataTextField]||"";S=S[P||Q.dataTextField]}if(O.options.autoBind===false&&!O.listView.bound()){if(!R&&S&&Q.valuePrimitive){O.value(S)}else{O._preselect(S,R)}}else{O.value(S)}});o("ui.MultiSelect","$angular_getLogicValue",function(){var P=this.self.dataItems().slice(0);var O=this.self.options.dataValueField;if(O&&this.self.options.valuePrimitive){P=x.map(P,function(Q){return Q[O]})}return P});o("ui.MultiSelect","$angular_setLogicValue",function(S){if(S==null){S=[]}var O=this.self;var Q=O.options;var P=Q.dataValueField;var R=S;if(P&&!Q.valuePrimitive){S=x.map(S,function(T){return T[P]})}if(Q.autoBind===false&&!Q.valuePrimitive&&!O.listView.bound()){O._preselect(R,S)}else{O.value(S)}});o("ui.AutoComplete","$angular_getLogicValue",function(){var X=this.self.options;var V=this.self.value().split(X.separator);var P=X.valuePrimitive;var S=this.self.listView.selectedDataItems();var U=[];for(var T=0,Q=S.length;T<Q;T++){var W=S[T];var O=X.dataTextField?W[X.dataTextField]:W;for(var R=0;R<V.length;R++){if(O===V[R]){if(P){U.push(O)}else{U.push(W.toJSON())}break}}}return U});o("ui.AutoComplete","$angular_setLogicValue",function(P){if(P==null){P=[]}var O=this.self,Q=O.options.dataTextField;if(Q&&!O.options.valuePrimitive){if(P.length!==l){P=x.map(P,function(R){return R[Q]})}else{P=P[Q]}}O.value(P)});o("ui.Widget","$angular_init",function(R,P){var O=this.self;if(P&&!x.isArray(P)){var T=O.$angular_scope;for(var Q=O.events.length;--Q>=0;){var U=O.events[Q];var S=P[U];if(S&&typeof S=="string"){P[U]=O.$angular_makeEventHandler(U,T,S)}}}});o("ui.Widget","$angular_makeEventHandler",function(Q,P,O){O=L(O);return function(R){C(P,function(){O(P,{kendoEvent:R})})}});o(["ui.Grid","ui.ListView","ui.TreeView","ui.PanelBar"],"$angular_makeEventHandler",function(Q,P,O){if(Q!="change"){return this.next()}O=L(O);return function(Z){var X=Z.sender;var ac=X.options;var aa,ad,T={kendoEvent:Z},S,Y,U,W;if(s.isString(ac.selectable)){aa=ac.selectable.indexOf("cell")!==-1;ad=ac.selectable.indexOf("multiple")!==-1}S=T.selected=this.select();Y=T.data=[];U=T.columns=[];for(var V=0;V<S.length;V++){var ab=aa?S[V].parentNode:S[V];var R=X.dataItem(ab);if(aa){if(s.element.inArray(R,Y)<0){Y.push(R)}W=s.element(S[V]).index();if(s.element.inArray(W,U)<0){U.push(W)}}else{Y.push(R)}}if(!ad){T.dataItem=T.data=Y[0];T.angularDataItem=kendo.proxyModelSetters(T.dataItem);T.selected=S[0]}C(P,function(){O(P,T)})}});o("ui.Grid","$angular_init",function(P,O){this.next();if(O.columns){var Q=x.extend({},kendo.Template,O.templateSettings);s.forEach(O.columns,function(R){if(R.field&&!R.template&&!R.format&&!R.values&&(R.encoded===l||R.encoded)){R.template="<span ng-bind='"+kendo.expr(R.field,"dataItem")+"'>#: "+kendo.expr(R.field,Q.paramName)+"#</span>"}})}});o("mobile.ui.ButtonGroup","value",function(P){var O=this.self;if(P!=null){O.select(O.element.children("li.km-button").eq(P));O.trigger("change");O.trigger("select",{index:O.selectedIndex})}return O.selectedIndex});o("mobile.ui.ButtonGroup","_select",function(){this.next();this.self.trigger("change")});e.directive("kendoMobileApplication",function(){return{terminal:true,link:function(Q,P,O){H(Q,P,O,"kendoMobileApplication","kendoMobileApplication")}}}).directive("kendoMobileView",function(){return{scope:true,link:{pre:function(Q,P,O){O.defaultOptions=Q.viewOptions;O._instance=H(Q,P,O,"kendoMobileView","kendoMobileView")},post:function(Q,P,O){O._instance._layout();O._instance._scroller()}}}}).directive("kendoMobileDrawer",function(){return{scope:true,link:{pre:function(Q,P,O){O.defaultOptions=Q.viewOptions;O._instance=H(Q,P,O,"kendoMobileDrawer","kendoMobileDrawer")},post:function(Q,P,O){O._instance._layout();O._instance._scroller()}}}}).directive("kendoMobileModalView",function(){return{scope:true,link:{pre:function(Q,P,O){O.defaultOptions=Q.viewOptions;O._instance=H(Q,P,O,"kendoMobileModalView","kendoMobileModalView")},post:function(Q,P,O){O._instance._layout();O._instance._scroller()}}}}).directive("kendoMobileSplitView",function(){return{terminal:true,link:{pre:function(Q,P,O){O.defaultOptions=Q.viewOptions;O._instance=H(Q,P,O,"kendoMobileSplitView","kendoMobileSplitView")},post:function(Q,P,O){O._instance._layout()}}}}).directive("kendoMobilePane",function(){return{terminal:true,link:{pre:function(Q,P,O){O.defaultOptions=Q.viewOptions;H(Q,P,O,"kendoMobilePane","kendoMobilePane")}}}}).directive("kendoMobileLayout",function(){return{link:{pre:function(Q,P,O){H(Q,P,O,"kendoMobileLayout","kendoMobileLayout")}}}}).directive("kendoMobileActionSheet",function(){return{restrict:"A",link:function(Q,P,O){P.find("a[k-action]").each(function(){x(this).attr("data-"+kendo.ns+"action",x(this).attr("k-action"))});H(Q,P,O,"kendoMobileActionSheet","kendoMobileActionSheet")}}}).directive("kendoMobilePopOver",function(){return{terminal:true,link:{pre:function(Q,P,O){O.defaultOptions=Q.viewOptions;H(Q,P,O,"kendoMobilePopOver","kendoMobilePopOver")}}}}).directive("kendoViewTitle",function(){return{restrict:"E",replace:true,template:function(O){return"<span data-"+kendo.ns+"role='view-title'>"+O.html()+"</span>"}}}).directive("kendoMobileHeader",function(){return{restrict:"E",link:function(P,O){O.addClass("km-header").attr("data-role","header")}}}).directive("kendoMobileFooter",function(){return{restrict:"E",link:function(P,O){O.addClass("km-footer").attr("data-role","footer")}}}).directive("kendoMobileScrollViewPage",function(){return{restrict:"E",replace:true,template:function(O){return"<div data-"+kendo.ns+"role='page'>"+O.html()+"</div>"}}});s.forEach(["align","icon","rel","transition","actionsheetContext"],function(O){var P="k"+O.slice(0,1).toUpperCase()+O.slice(1);e.directive(P,function(){return{restrict:"A",priority:2,link:function(S,R,Q){R.attr(kendo.attr(kendo.toHyphens(O)),S.$eval(Q[P]))}}})});var h={TreeMap:["Template"],MobileListView:["HeaderTemplate","Template"],MobileScrollView:["EmptyTemplate","Template"],Grid:["AltRowTemplate","DetailTemplate","RowTemplate"],ListView:["EditTemplate","Template","AltTemplate"],Pager:["SelectTemplate","LinkTemplate"],PivotGrid:["ColumnHeaderTemplate","DataCellTemplate","RowHeaderTemplate"],Scheduler:["AllDayEventTemplate","DateHeaderTemplate","EventTemplate","MajorTimeHeaderTemplate","MinorTimeHeaderTemplate"],PanelBar:["Template"],TreeView:["Template"],Validator:["ErrorTemplate"]};(function(){var O={};s.forEach(h,function(P,Q){s.forEach(P,function(R){if(!O[R]){O[R]=[]}O[R].push("?^^kendo"+Q)})});s.forEach(O,function(Q,S){var P="k"+S;var R=kendo.toHyphens(P);e.directive(P,function(){return{restrict:"A",require:Q,terminal:true,compile:function(U,T){if(T[P]!==""){return}U.removeAttr(R);var V=U[0].outerHTML;return function(Z,Y,X,aa){var W;while(!W&&aa.length){W=aa.shift()}if(!W){M.warn(R+" without a matching parent widget found. It can be one of the following: "+Q.join(", "))}else{W.template(P,V);Y.remove()}}}}})})}())}(window.kendo.jQuery,window.angular));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.web",["kendo.core","kendo.router","kendo.view","kendo.fx","kendo.dom","kendo.data.odata","kendo.data.xml","kendo.data","kendo.ooxml","kendo.excel","kendo.data.signalr","kendo.binder","kendo.drawing","kendo.validator","kendo.userevents","kendo.draganddrop","kendo.mobile.scroller","kendo.groupable","kendo.reorderable","kendo.resizable","kendo.sortable","kendo.selectable","kendo.button","kendo.pager","kendo.popup","kendo.notification","kendo.tooltip","kendo.list","kendo.calendar","kendo.datepicker","kendo.autocomplete","kendo.dropdownlist","kendo.combobox","kendo.multiselect","kendo.colorpicker","kendo.columnmenu","kendo.columnsorter","kendo.grid","kendo.listview","kendo.filebrowser","kendo.imagebrowser","kendo.editor","kendo.numerictextbox","kendo.maskedtextbox","kendo.mediaplayer","kendo.menu","kendo.editable","kendo.pivot.fieldmenu","kendo.filtercell","kendo.panelbar","kendo.progressbar","kendo.responsivepanel","kendo.tabstrip","kendo.timepicker","kendo.toolbar","kendo.datetimepicker","kendo.treeview.draganddrop","kendo.treeview","kendo.slider","kendo.splitter","kendo.upload","kendo.dialog","kendo.window","kendo.virtuallist","kendo.scheduler.view","kendo.scheduler.dayview","kendo.scheduler.agendaview","kendo.scheduler.monthview","kendo.scheduler.recurrence","kendo.scheduler","kendo.gantt.list","kendo.gantt.timeline","kendo.gantt","kendo.treelist","kendo.pivotgrid","kendo.spreadsheet","kendo.pivot.configurator","kendo.angular"],a)}(function(){return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/core/kendo-core",["kendo.core","kendo.drawing"],a)}(function(){(function(cv){window.kendo.dataviz=window.kendo.dataviz||{};var cC=kendo.drawing;var be=cC.util;var aj=cC.Path;var aM=cC.Group;var bg=kendo.Class;var cn=kendo.geometry;var e=cn.Rect;var c=cn.Circle;var aS=cn.transform;var x=cn.Segment;var H=kendo.dataviz;var F=kendo.deepExtend;var ab=kendo.getter;var b1="x";var bZ="y";var by="top";var bv="bottom";var aZ="left";var a9="right";var O="center";var bK="width";var b2="height";var cq=3;var U=Number.MAX_VALUE;var cr=-Number.MAX_VALUE;var bV=600;var n=400;var cy="#fff";var D="#000";var bs="12px sans-serif";var cp=10;var cm="axisLabelClick";var a1="noteClick";var ct="noteHover";var br="outside";var M="none";var k="circle";var an="triangle";var bP="cross";var t="arc";var cz="inside";var o="value";var b4="string";var cF="object";var bH="date";var A=/\{\d+:?/;var aU={X:b1,Y:bZ,WIDTH:bK,HEIGHT:b2,DEFAULT_HEIGHT:n,DEFAULT_WIDTH:bV,TOP:by,LEFT:aZ,BOTTOM:bv,RIGHT:a9,CENTER:O,COORD_PRECISION:cq,DEFAULT_PRECISION:cp,CIRCLE:k,TRIANGLE:an,CROSS:bP,MAX_VALUE:U,MIN_VALUE:cr,WHITE:cy,BLACK:D,DEFAULT_FONT:bs,AXIS_LABEL_CLICK:cm,OUTSIDE:br,INSIDE:cz,NONE:M,NOTE_CLICK:a1,NOTE_HOVER:ct,VALUE:o,STRING:b4,OBJECT:cF,DATE:bH,ARC:t,FORMAT_REGEX:A};function a4(X){return Array.isArray(X)}function P(cK,cJ){var Y=a4(cJ)?cJ:[cJ];for(var X=0;X<Y.length;X++){var cL=Y[X];if(cK.className.indexOf(cL)===-1){cK.className+=" "+cL}}}var bb=/\s+/g;function bG(X,Y){if(X&&X.className){X.className=X.className.replace(Y,"").replace(bb," ")}}function aa(Y){var cJ=0.5;if(Y.options.stroke&&kendo.drawing.util.defined(Y.options.stroke.width)){if(Y.options.stroke.width%2===0){cJ=0}}for(var X=0;X<Y.segments.length;X++){Y.segments[X].anchor().round(0).translate(cJ,cJ)}return Y}function av(Y,X){return -Y.x*X.y+Y.y*X.x<0}function cG(X){return typeof X==="object"}function b5(X){return typeof X===b4}function aJ(X){return typeof X==="number"&&!isNaN(X)}function Q(X){if(aJ(X)){return X+"px"}return X}var g=/width|height|top|left|bottom|right/i;function i(X){return g.test(X)}function h(cL,cN){var cK=b5(cN)?[cN]:cN;if(a4(cK)){var Y={};var cM=window.getComputedStyle(cL);for(var X=0;X<cK.length;X++){var cO=cK[X];Y[cO]=i(cO)?parseFloat(cM[cO]):cM[cO]}return Y}else{if(cG(cN)){for(var cJ in cN){cL.style[cJ]=Q(cN[cJ])}}}}function a5(Y,X){if(X===void 0){X=0}var cJ={top:0,right:0,bottom:0,left:0};if(typeof Y==="number"){cJ[by]=cJ[a9]=cJ[bv]=cJ[aZ]=Y}else{cJ[by]=Y[by]||X;cJ[a9]=Y[a9]||X;cJ[bv]=Y[bv]||X;cJ[aZ]=Y[aZ]||X}return cJ}function cc(cL,cK){var cJ=cL.length;var Y=[];for(var X=0;X<cJ;X++){if(cK(cL[X])){Y.push(cL[X])}}return Y}function aF(Y,cK){if(Y.className){var cJ=cK.split(" ");for(var X=0;X<cJ.length;X++){if(Y.className.indexOf(cJ[X])!==-1){return true}}}}function K(X,Y){if(Y){return Y.indexOf(X)!==-1}}function ah(cJ,X,Y){return kendo.drawing.util.round(cJ+(X-cJ)*Y,cq)}var bu=bg.extend({init:function(Y,X){this.observer=Y;this.handlerMap=F({},this.handlerMap,X)},trigger:function(cK,cJ){var cM=this;var X=cM.observer;var Y=cM.handlerMap;var cL;if(Y[cK]){cL=X[Y[cK]](cJ)}else{if(X.trigger){cL=X.trigger(cK,cJ)}}return cL},requiresHandlers:function(Y){var cJ=this;if(this.observer.requiresHandlers){return this.observer.requiresHandlers(Y)}for(var X=0;X<Y.length;X++){if(cJ.handlerMap[Y[X]]){return true}}}});function y(X){return typeof X==="function"}function aD(cM,cL){var cJ=cM.length;var Y=[];for(var X=0;X<cJ;X++){var cK=cL(cM[X]);if(kendo.drawing.util.defined(cK)){Y.push(cK)}}return Y}function L(X){var Y=0;if(X.wheelDelta){Y=-X.wheelDelta/120;Y=Y>0?Math.ceil(Y):Math.floor(Y)}if(X.detail){Y=kendo.drawing.util.round(X.detail/3)}return Y}var bh=kendo.drawing.util;var s=bh.append;var a2=bh.bindEvents;var aw=bh.defined;var bC=bh.deg;var ag=bh.elementOffset;var cB=bh.elementSize;var b0=bh.eventElement;var b8=bh.eventCoordinates;var aN=bh.last;var ad=bh.limitValue;var cb=bh.objectKey;var cj=bh.rad;var I=bh.round;var aL=bh.unbindEvents;var aP=bh.valueOrDefault;var bd=bg.extend({});bd.fetchFonts=function(X,cK,Y){if(Y===void 0){Y={depth:0}}var cJ=5;if(!X||Y.depth>cJ||!document.fonts){return}Object.keys(X).forEach(function(cL){var cM=X[cL];if(cL==="dataSource"||cL[0]==="$"||!cM){return}if(cL==="font"){cK.push(cM)}else{if(typeof cM==="object"){Y.depth++;bd.fetchFonts(cM,cK,Y);Y.depth--}}})};bd.loadFonts=function(cK,cJ){var X=[];if(cK.length>0&&document.fonts){try{X=cK.map(function(cL){return document.fonts.load(cL)})}catch(Y){kendo.logToConsole(Y)}Promise.all(X).then(cJ,cJ)}else{cJ()}};bd.preloadFonts=function(X,cJ){var Y=[];bd.fetchFonts(X,Y);bd.loadFonts(Y,cJ)};function aK(Y,X){var cJ=Y.prototype;if(cJ.options){cJ.options=F({},cJ.options,X)}else{cJ.options=X}}function z(cJ){var cK=U;var Y=cr;for(var X=0,cL=cJ.length;X<cL;X++){var cM=cJ[X];if(cM!==null&&isFinite(cM)){cK=Math.min(cK,cM);Y=Math.max(Y,cM)}}return{min:cK===U?undefined:cK,max:Y===cr?undefined:Y}}var cf=bg.extend({init:function(X,Y){this.x=X||0;this.y=Y||0},clone:function(){return new cf(this.x,this.y)},equals:function(X){return X&&this.x===X.x&&this.y===X.y},rotate:function(X,cL){var Y=cj(cL);var cN=Math.cos(Y);var cQ=Math.sin(Y);var cM=X.x;var cK=X.y;var cJ=this;var cP=cJ.x;var cO=cJ.y;this.x=I(cM+(cP-cM)*cN+(cO-cK)*cQ,cq);this.y=I(cK+(cO-cK)*cN-(cP-cM)*cQ,cq);return this},multiply:function(X){this.x*=X;this.y*=X;return this},distanceTo:function(X){var cJ=this.x-X.x;var Y=this.y-X.y;return Math.sqrt(cJ*cJ+Y*Y)}});cf.onCircle=function(Y,cK,X){var cJ=cj(cK);return new cf(Y.x-X*Math.cos(cJ),Y.y-X*Math.sin(cJ))};var u=bg.extend({init:function(Y,cK,X,cJ){this.x1=Y||0;this.y1=cK||0;this.x2=X||0;this.y2=cJ||0},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1},translate:function(Y,X){this.x1+=Y;this.x2+=Y;this.y1+=X;this.y2+=X;return this},move:function(Y,cK){var X=this.height();var cJ=this.width();if(aw(Y)){this.x1=Y;this.x2=this.x1+cJ}if(aw(cK)){this.y1=cK;this.y2=this.y1+X}return this},wrap:function(X){this.x1=Math.min(this.x1,X.x1);this.y1=Math.min(this.y1,X.y1);this.x2=Math.max(this.x2,X.x2);this.y2=Math.max(this.y2,X.y2);return this},wrapPoint:function(Y){var cK=a4(Y);var X=cK?Y[0]:Y.x;var cJ=cK?Y[1]:Y.y;this.wrap(new u(X,cJ,X,cJ));return this},snapTo:function(X,Y){if(Y===b1||!Y){this.x1=X.x1;this.x2=X.x2}if(Y===bZ||!Y){this.y1=X.y1;this.y2=X.y2}return this},alignTo:function(cK,cL){var cJ=this.height();var cN=this.width();var cM=cL===by||cL===bv?bZ:b1;var cO=cM===bZ?cJ:cN;if(cL===O){var Y=cK.center();var X=this.center();this.x1+=Y.x-X.x;this.y1+=Y.y-X.y}else{if(cL===by||cL===aZ){this[cM+1]=cK[cM+1]-cO}else{this[cM+1]=cK[cM+2]}}this.x2=this.x1+cN;this.y2=this.y1+cJ;return this},shrink:function(X,Y){this.x2-=X;this.y2-=Y;return this},expand:function(X,Y){this.shrink(-X,-Y);return this},pad:function(X){var Y=a5(X);this.x1-=Y.left;this.x2+=Y.right;this.y1-=Y.top;this.y2+=Y.bottom;return this},unpad:function(X){var Y=a5(X);Y.left=-Y.left;Y.top=-Y.top;Y.right=-Y.right;Y.bottom=-Y.bottom;return this.pad(Y)},clone:function(){return new u(this.x1,this.y1,this.x2,this.y2)},center:function(){return new cf(this.x1+this.width()/2,this.y1+this.height()/2)},containsPoint:function(X){return X.x>=this.x1&&X.x<=this.x2&&X.y>=this.y1&&X.y<=this.y2},points:function(){return[new cf(this.x1,this.y1),new cf(this.x2,this.y1),new cf(this.x2,this.y2),new cf(this.x1,this.y2)]},getHash:function(){return[this.x1,this.y1,this.x2,this.y2].join(",")},overlaps:function(X){return !(X.y2<this.y1||this.y2<X.y1||X.x2<this.x1||this.x2<X.x1)},rotate:function(cQ){var cJ=this.width();var cP=this.height();var cL=this.center();var cO=cL.x;var cN=cL.y;var cM=p(0,0,cO,cN,cQ);var cK=p(cJ,0,cO,cN,cQ);var Y=p(cJ,cP,cO,cN,cQ);var X=p(0,cP,cO,cN,cQ);cJ=Math.max(cM.x,cK.x,Y.x,X.x)-Math.min(cM.x,cK.x,Y.x,X.x);cP=Math.max(cM.y,cK.y,Y.y,X.y)-Math.min(cM.y,cK.y,Y.y,X.y);this.x2=this.x1+cJ;this.y2=this.y1+cP;return this},toRect:function(){return new e([this.x1,this.y1],[this.width(),this.height()])},hasSize:function(){return this.width()!==0&&this.height()!==0},align:function(X,cL,cN){var cK=cL+1;var cJ=cL+2;var cM=cL===b1?bK:b2;var Y=this[cM]();if(K(cN,[aZ,by])){this[cK]=X[cK];this[cJ]=this[cK]+Y}else{if(K(cN,[a9,bv])){this[cJ]=X[cJ];this[cK]=this[cJ]-Y}else{if(cN===O){this[cK]=X[cK]+(X[cM]()-Y)/2;this[cJ]=this[cK]+Y}}}}});function p(Y,cM,X,cL,cK){var cJ=cj(cK);return new cf(X+(Y-X)*Math.cos(cJ)+(cM-cL)*Math.sin(cJ),cL-(Y-X)*Math.sin(cJ)+(cM-cL)*Math.cos(cJ))}var B=bg.extend({init:function(Y,cK,X,cJ,cL){this.center=Y;this.innerRadius=cK;this.radius=X;this.startAngle=cJ;this.angle=cL},clone:function(){return new B(this.center,this.innerRadius,this.radius,this.startAngle,this.angle)},middle:function(){return this.startAngle+this.angle/2},setRadius:function(X,Y){if(Y){this.innerRadius=X}else{this.radius=X}return this},point:function(cN,cM){var cJ=cj(cN);var cL=Math.cos(cJ);var cK=Math.sin(cJ);var Y=cM?this.innerRadius:this.radius;var X=I(this.center.x-cL*Y,cq);var cO=I(this.center.y-cK*Y,cq);return new cf(X,cO)},adjacentBox:function(X,Y,cS){var cJ=this.clone().expand(X);var cM=cJ.middle();var cP=cJ.point(cM);var cN=Y/2;var cK=cS/2;var cR=Math.sin(cj(cM));var cL=Math.cos(cj(cM));var cQ=cP.x-cN;var cO=cP.y-cK;if(Math.abs(cR)<0.9){cQ+=cN*-cL/Math.abs(cL)}if(Math.abs(cL)<0.9){cO+=cK*-cR/Math.abs(cR)}return new u(cQ,cO,cQ+Y,cO+cS)},containsPoint:function(cJ){var X=this.center;var cR=this.innerRadius;var cO=this.radius;var cP=this.startAngle;var cL=this.startAngle+this.angle;var cU=cJ.x-X.x;var cT=cJ.y-X.y;var cK=new cf(cU,cT);var Y=this.point(cP);var cM=new cf(Y.x-X.x,Y.y-X.y);var cS=this.point(cL);var cN=new cf(cS.x-X.x,cS.y-X.y);var cQ=I(cU*cU+cT*cT,cq);return(cM.equals(cK)||av(cM,cK))&&!av(cN,cK)&&cQ>=cR*cR&&cQ<=cO*cO},getBBox:function(){var cK=this;var cL=new u(U,U,cr,cr);var cM=I(this.startAngle%360);var Y=I((cM+this.angle)%360);var cO=this.innerRadius;var cR=[0,90,180,270,cM,Y].sort(bO);var X=cR.indexOf(cM);var cP=cR.indexOf(Y);var cN;if(cM===Y){cN=cR}else{if(X<cP){cN=cR.slice(X,cP+1)}else{cN=[].concat(cR.slice(0,cP+1),cR.slice(X,cR.length))}}for(var cJ=0;cJ<cN.length;cJ++){var cQ=cK.point(cN[cJ]);cL.wrapPoint(cQ);cL.wrapPoint(cQ,cO)}if(!cO){cL.wrapPoint(this.center)}return cL},expand:function(X){this.radius+=X;return this}});function bO(Y,X){return Y-X}var cI=B.extend({init:function(Y,X,cJ,cK){B.fn.init.call(this,Y,0,X,cJ,cK)},expand:function(X){return B.fn.expand.call(this,X)},clone:function(){return new cI(this.center,this.radius,this.startAngle,this.angle)},setRadius:function(X){this.radius=X;return this}});var bp=bg.extend({createRing:function(cK,cQ){var cN=cK.startAngle+180;var cJ=cK.angle+cN;var X=new cn.Point(cK.center.x,cK.center.y);var cM=Math.max(cK.radius,0);var cO=Math.max(cK.innerRadius,0);var Y=new cn.Arc(X,{startAngle:cN,endAngle:cJ,radiusX:cM,radiusY:cM});var cP=aj.fromArc(Y,cQ).close();if(cO){Y.radiusX=Y.radiusY=cO;var cL=Y.pointAt(cJ);cP.lineTo(cL.x,cL.y);cP.arc(cJ,cN,cO,cO,true)}else{cP.lineTo(X.x,X.y)}return cP}});bp.current=new bp();var m=bg.extend({init:function(X){this.children=[];this.options=F({},this.options,X)},reflow:function(X){var cJ=this.children;var cK;for(var Y=0;Y<cJ.length;Y++){var cL=cJ[Y];cL.reflow(X);cK=cK?cK.wrap(cL.box):cL.box.clone()}this.box=cK||X},destroy:function(){var Y=this.children;if(this.animation){this.animation.destroy()}for(var X=0;X<Y.length;X++){Y[X].destroy()}},getRoot:function(){var X=this.parent;return X?X.getRoot():null},getSender:function(){var X=this.getService();if(X){return X.sender}},getService:function(){var X=this;while(X){if(X.chartService){return X.chartService}X=X.parent}},translateChildren:function(Y,X){var cL=this.children;var cK=cL.length;for(var cJ=0;cJ<cK;cJ++){cL[cJ].box.translate(Y,X)}},append:function(){var X=arguments;var cK=this;for(var Y=0;Y<arguments.length;Y++){var cJ=X[Y];cK.children.push(cJ);cJ.parent=cK}},renderVisual:function(){if(this.options.visible===false){return}this.createVisual();this.addVisual();this.renderChildren();this.createAnimation();this.renderComplete()},addVisual:function(){if(this.visual){this.visual.chartElement=this;if(this.parent){this.parent.appendVisual(this.visual)}}},renderChildren:function(){var Y=this.children;var cJ=Y.length;for(var X=0;X<cJ;X++){Y[X].renderVisual()}},createVisual:function(){this.visual=new aM({zIndex:this.options.zIndex,visible:aP(this.options.visible,true)})},createAnimation:function(){if(this.visual){this.animation=cC.Animation.create(this.visual,this.options.animation)}},appendVisual:function(X){if(!X.chartElement){X.chartElement=this}if(X.options.noclip){this.clipRoot().visual.append(X)}else{if(aw(X.options.zIndex)){this.stackRoot().stackVisual(X)}else{if(this.isStackRoot){this.stackVisual(X)}else{if(this.visual){this.visual.append(X)}else{this.parent.appendVisual(X)}}}}},clipRoot:function(){if(this.parent){return this.parent.clipRoot()}return this},stackRoot:function(){if(this.parent){return this.parent.stackRoot()}return this},stackVisual:function(cK){var cN=cK.options.zIndex||0;var cL=this.visual.children;var cJ=cL.length;var cM;for(cM=0;cM<cJ;cM++){var Y=cL[cM];var X=aP(Y.options.zIndex,0);if(X>cN){break}}this.visual.insert(cM,cK)},traverse:function(cL){var Y=this.children;var cJ=Y.length;for(var X=0;X<cJ;X++){var cK=Y[X];cL(cK);if(cK.traverse){cK.traverse(cL)}}},closest:function(Y){var cJ=this;var X=false;while(cJ&&!X){X=Y(cJ);if(!X){cJ=cJ.parent}}if(X){return cJ}},renderComplete:function(){},hasHighlight:function(){var X=(this.options||{}).highlight;return !(!this.createHighlight||X&&X.visible===false)},toggleHighlight:function(X){var cM=this;var cJ=(this.options||{}).highlight;var cL=(cJ||{}).visual;var Y=this._highlight;if(!Y){var cK={fill:{color:cy,opacity:0.2},stroke:{color:cy,width:1,opacity:0.2}};if(cL){Y=this._highlight=cL(cv.extend(this.highlightVisualArgs(),{createVisual:function(){return cM.createHighlight(cK)},sender:this.getSender(),series:this.series,dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,runningTotal:this.runningTotal,total:this.total}));if(!Y){return}}else{Y=this._highlight=this.createHighlight(cK)}Y.options.zIndex=this.options.zIndex;this.appendVisual(Y)}Y.visible(X)},createGradientOverlay:function(cJ,Y,cK){var X=new aj(cv.extend({stroke:{color:"none"},fill:this.createGradient(cK),closed:cJ.options.closed},Y));X.segments.elements(cJ.segments.elements());return X},createGradient:function(X){if(this.parent){return this.parent.createGradient(X)}}});m.prototype.options={};var bA=m.extend({init:function(X){m.fn.init.call(this,X);this.options.margin=a5(this.options.margin);this.options.padding=a5(this.options.padding)},reflow:function(cQ){var cO=this;var cV=this.options;var Y=cV.width;var cT=cV.height;var cW=cV.shrinkToFit;var cK=Y&&cT;var cL=cV.margin;var cR=cV.padding;var X=cV.border.width;var cN;var cS=function(){cO.align(cQ,b1,cV.align);cO.align(cQ,bZ,cV.vAlign);cO.paddingBox=cN.clone().unpad(cL).unpad(X)};var cP=cQ.clone();if(cK){cP.x2=cP.x1+Y;cP.y2=cP.y1+cT}if(cW){cP.unpad(cL).unpad(X).unpad(cR)}m.fn.reflow.call(this,cP);if(cK){cN=this.box=new u(0,0,Y,cT)}else{cN=this.box}if(cW&&cK){cS();cP=this.contentBox=this.paddingBox.clone().unpad(cR)}else{cP=this.contentBox=cN.clone();cN.pad(cR).pad(X).pad(cL);cS()}this.translateChildren(cN.x1-cP.x1+cL.left+X+cR.left,cN.y1-cP.y1+cL.top+X+cR.top);var cJ=this.children;for(var cM=0;cM<cJ.length;cM++){var cU=cJ[cM];cU.reflow(cU.box)}},align:function(X,Y,cJ){this.box.align(X,Y,cJ)},hasBox:function(){var X=this.options;return X.border.width||X.background},createVisual:function(){m.fn.createVisual.call(this);var X=this.options;if(X.visible&&this.hasBox()){this.visual.append(aj.fromRect(this.paddingBox.toRect(),this.visualStyle()))}},visualStyle:function(){var Y=this.options;var X=Y.border||{};return{stroke:{width:X.width,color:X.color,opacity:aP(X.opacity,Y.opacity),dashType:X.dashType},fill:{color:Y.background,opacity:Y.opacity},cursor:Y.cursor}}});aK(bA,{align:aZ,vAlign:by,margin:{},padding:{},border:{color:D,width:0},background:"",shrinkToFit:false,width:0,height:0,visible:true});var am=bA.extend({init:function(Y,X){bA.fn.init.call(this,Y);this.pointData=X},getElement:function(){var cJ=this;var cP=cJ.options;var cM=cJ.paddingBox;var cN=cP.type;var cO=cP.rotation;var X=cM.center();var cL=cM.width()/2;if(!cP.visible||!this.hasBox()){return null}var Y=this.visualStyle();var cK;if(cN===k){cK=new cC.Circle(new c([I(cM.x1+cL,cq),I(cM.y1+cM.height()/2,cq)],cL),Y)}else{if(cN===an){cK=aj.fromPoints([[cM.x1+cL,cM.y1],[cM.x1,cM.y2],[cM.x2,cM.y2]],Y).close()}else{if(cN===bP){cK=new cC.MultiPath(Y);cK.moveTo(cM.x1,cM.y1).lineTo(cM.x2,cM.y2);cK.moveTo(cM.x1,cM.y2).lineTo(cM.x2,cM.y1)}else{cK=aj.fromRect(cM.toRect(),Y)}}}if(cO){cK.transform(aS().rotate(-cO,[X.x,X.y]))}cK.options.zIndex=cP.zIndex;return cK},createElement:function(){var cK=this;var Y=this.options.visual;var X=this.pointData||{};var cJ;if(Y){cJ=Y({value:X.value,dataItem:X.dataItem,sender:this.getSender(),series:X.series,category:X.category,rect:this.paddingBox.toRect(),options:this.visualOptions(),createVisual:function(){return cK.getElement()}})}else{cJ=this.getElement()}return cJ},visualOptions:function(){var X=this.options;return{background:X.background,border:X.border,margin:X.margin,padding:X.padding,type:X.type,size:X.width,visible:X.visible}},createVisual:function(){this.visual=this.createElement()}});aK(am,{type:k,align:O,vAlign:O});var af="linear";var co="radial";var bi={glass:{type:af,rotation:0,stops:[{offset:0,color:cy,opacity:0},{offset:0.25,color:cy,opacity:0.3},{offset:1,color:cy,opacity:0}]},sharpBevel:{type:co,stops:[{offset:0,color:cy,opacity:0.55},{offset:0.65,color:cy,opacity:0},{offset:0.95,color:cy,opacity:0.25}]},roundedBevel:{type:co,stops:[{offset:0.33,color:cy,opacity:0.06},{offset:0.83,color:cy,opacity:0.2},{offset:0.95,color:cy,opacity:0}]},roundedGlass:{type:co,supportVML:false,stops:[{offset:0,color:cy,opacity:0},{offset:0.5,color:cy,opacity:0.3},{offset:0.99,color:cy,opacity:0}]},sharpGlass:{type:co,supportVML:false,stops:[{offset:0,color:cy,opacity:0.2},{offset:0.15,color:cy,opacity:0.15},{offset:0.17,color:cy,opacity:0.35},{offset:0.85,color:cy,opacity:0.05},{offset:0.87,color:cy,opacity:0.15},{offset:0.99,color:cy,opacity:0}]},bubbleShadow:{type:co,center:[0.5,0.5],radius:0.5}};function ae(X,cR){if(X.x1===cR.x1&&X.y1===cR.y1&&X.x2===cR.x2&&X.y2===cR.y2){return cR}var cQ=Math.min(X.x1,cR.x1);var cP=Math.max(X.x1,cR.x1);var cO=Math.min(X.x2,cR.x2);var cN=Math.max(X.x2,cR.x2);var cM=Math.min(X.y1,cR.y1);var cL=Math.max(X.y1,cR.y1);var cK=Math.min(X.y2,cR.y2);var cJ=Math.max(X.y2,cR.y2);var Y=[];Y[0]=new u(cP,cM,cO,cL);Y[1]=new u(cQ,cL,cP,cK);Y[2]=new u(cO,cL,cN,cK);Y[3]=new u(cP,cK,cO,cJ);if(X.x1===cQ&&X.y1===cM||cR.x1===cQ&&cR.y1===cM){Y[4]=new u(cQ,cM,cP,cL);Y[5]=new u(cO,cK,cN,cJ)}else{Y[4]=new u(cO,cM,cN,cL);Y[5]=new u(cQ,cK,cP,cJ)}return cc(Y,function(cS){return cS.height()>0&&cS.width()>0})[0]}var V=m.extend({init:function(X){m.fn.init.call(this,X);var Y=this.options;Y.width=parseInt(Y.width,10);Y.height=parseInt(Y.height,10);this.gradients={}},reflow:function(){var cL=this;var Y=cL.options;var cK=cL.children;var X=new u(0,0,Y.width,Y.height);this.box=X.unpad(Y.margin);for(var cJ=0;cJ<cK.length;cJ++){cK[cJ].reflow(X);X=ae(X,cK[cJ].box)||new u()}},createVisual:function(){this.visual=new aM();this.createBackground()},createBackground:function(){var Y=this.options;var X=Y.border||{};var cK=this.box.clone().pad(Y.margin).unpad(X.width);var cJ=aj.fromRect(cK.toRect(),{stroke:{color:X.width?X.color:"",width:X.width,dashType:X.dashType},fill:{color:Y.background,opacity:Y.opacity},zIndex:-10});this.visual.append(cJ)},getRoot:function(){return this},createGradient:function(cJ){var X=this.gradients;var Y=cb(cJ);var cM=bi[cJ.gradient];var cK;if(X[Y]){cK=X[Y]}else{var cL=cv.extend({},cM,cJ);if(cM.type==="linear"){cK=new cC.LinearGradient(cL)}else{if(cJ.innerRadius){cL.stops=cl(cL)}cK=new cC.RadialGradient(cL);cK.supportVML=cM.supportVML!==false}X[Y]=cK}return cK}});aK(V,{width:bV,height:n,background:cy,border:{color:D,width:0},margin:a5(5),zIndex:-2});function cl(Y){var cM=Y.stops;var cN=Y.innerRadius/Y.radius*100;var cL=cM.length;var cK=[];for(var cJ=0;cJ<cL;cJ++){var X=cv.extend({},cM[cJ]);X.offset=(X.offset*(100-cN)+cN)/100;cK.push(X)}return cK}var aO=m.extend({init:function(X){m.fn.init.call(this,X);this._initDirection()},_initDirection:function(){var X=this.options;if(X.vertical){this.groupAxis=b1;this.elementAxis=bZ;this.groupSizeField=bK;this.elementSizeField=b2;this.groupSpacing=X.spacing;this.elementSpacing=X.vSpacing}else{this.groupAxis=bZ;this.elementAxis=b1;this.groupSizeField=b2;this.elementSizeField=bK;this.groupSpacing=X.vSpacing;this.elementSpacing=X.spacing}},reflow:function(X){this.box=X.clone();this.reflowChildren()},reflowChildren:function(){var c4=this;var cM=this;var cU=cM.box;var cV=cM.elementAxis;var cX=cM.groupAxis;var cN=cM.elementSizeField;var cO=cM.groupSizeField;var X=this.groupOptions();var c1=X.groups;var cP=X.groupsSize;var cL=X.maxGroupElementsSize;var c0=c1.length;var cY=cU[cX+1]+this.alignStart(cP,cU[cO]());if(c0){var cJ=cY;for(var cR=0;cR<c0;cR++){var cQ=c1[cR];var c3=cQ.groupElements;var cT=cU[cV+1];var cS=c3.length;for(var cW=0;cW<cS;cW++){var cK=c3[cW];var cZ=c4.elementSize(cK);var Y=cJ+c4.alignStart(cZ[cO],cQ.groupSize);var c2=new u();c2[cX+1]=Y;c2[cX+2]=Y+cZ[cO];c2[cV+1]=cT;c2[cV+2]=cT+cZ[cN];cK.reflow(c2);cT+=cZ[cN]+c4.elementSpacing}cJ+=cQ.groupSize+c4.groupSpacing}cU[cX+1]=cY;cU[cX+2]=cY+cP;cU[cV+2]=cU[cV+1]+cL}},alignStart:function(X,cK){var cJ=0;var Y=this.options.align;if(Y===a9||Y===bv){cJ=cK-X}else{if(Y===O){cJ=(cK-X)/2}}return cJ},groupOptions:function(){var cX=this;var cN=this;var cS=cN.box;var cM=cN.children;var cO=cN.elementSizeField;var cQ=cN.groupSizeField;var cJ=cN.elementSpacing;var cZ=cN.groupSpacing;var cK=I(cS[cO]());var cY=cM.length;var cV=[];var Y=0;var cP=0;var cR=0;var cL=0;var cW=[];for(var cT=0;cT<cY;cT++){var X=cM[cT];if(!X.box){X.reflow(cS)}var cU=cX.elementSize(X);if(cX.options.wrap&&I(cP+cJ+cU[cO])>cK){cV.push({groupElements:cW,groupSize:Y,groupElementsSize:cP});cL=Math.max(cL,cP);cR+=cZ+Y;Y=0;cP=0;cW=[]}Y=Math.max(Y,cU[cQ]);if(cP>0){cP+=cJ}cP+=cU[cO];cW.push(X)}cV.push({groupElements:cW,groupSize:Y,groupElementsSize:cP});cL=Math.max(cL,cP);cR+=Y;return{groups:cV,groupsSize:cR,maxGroupElementsSize:cL}},elementSize:function(X){return{width:X.box.width(),height:X.box.height()}},createVisual:function(){}});aK(aO,{vertical:true,wrap:true,vSpacing:0,spacing:0});var bJ=cC.Text;var bY=m.extend({init:function(Y,X){m.fn.init.call(this,X);this.content=Y;this.reflow(new u())},reflow:function(X){var Y=this.options;var cJ=Y.size=be.measureText(this.content,{font:Y.font});this.baseline=cJ.baseline;this.box=new u(X.x1,X.y1,X.x1+cJ.width,X.y1+cJ.height)},createVisual:function(){var cK=this.options;var Y=cK.font;var X=cK.color;var cJ=cK.opacity;var cL=cK.cursor;this.visual=new bJ(this.content,this.box.toRect().topLeft(),{font:Y,fill:{color:X,opacity:cJ},cursor:cL})}});aK(bY,{font:bs,color:D});function bD(cJ){var X=cJ.origin;var Y=cJ.bottomRight();return new u(X.x,X.y,Y.x,Y.y)}var bn=/\n|\\n/m;var a8=bA.extend({init:function(Y,X){bA.fn.init.call(this,X);this.content=Y;this._initContainer();if(this.options._autoReflow!==false){this.reflow(new u())}},_initContainer:function(){var cJ=this.options;var cL=String(this.content).split(bn);var Y=new aO({vertical:true,align:cJ.align,wrap:false});var X=F({},cJ,{opacity:1,animation:null});this.container=Y;this.append(Y);for(var cK=0;cK<cL.length;cK++){var cM=new bY(cL[cK].trim(),X);Y.append(cM)}},reflow:function(X){var Y=this.options;var cJ=Y.visual;this.container.options.align=Y.align;if(cJ&&!this._boxReflow){var cN=X;if(!cN.hasSize()){this._boxReflow=true;this.reflow(cN);this._boxReflow=false;cN=this.box}var cL=this.visual=cJ(this.visualContext(cN));if(cL){cN=bD(cL.clippedBBox()||new e());cL.options.zIndex=Y.zIndex;cL.options.noclip=Y.noclip}this.box=this.contentBox=this.paddingBox=cN}else{bA.fn.reflow.call(this,X);if(Y.rotation){var cM=a5(Y.margin);var cK=this.box.unpad(cM);this.targetBox=X;this.normalBox=cK.clone();cK=this.rotate();cK.translate(cM.left-cM.right,cM.top-cM.bottom);this.rotatedBox=cK.clone();cK.pad(cM)}}},createVisual:function(){var X=this.options;if(!X.visible){return}this.visual=new aM({transform:this.rotationTransform(),zIndex:X.zIndex,noclip:X.noclip});if(this.hasBox()){var Y=aj.fromRect(this.paddingBox.toRect(),this.visualStyle());this.visual.append(Y)}},renderVisual:function(){if(this.options.visual){this.addVisual();this.createAnimation()}else{bA.fn.renderVisual.call(this)}},visualOptions:function(){var X=this.options;return{background:X.background,border:X.border,color:X.color,font:X.font,margin:X.margin,padding:X.padding,visible:X.visible}},visualContext:function(X){var Y=this;return{text:this.content,rect:X.toRect(),sender:this.getSender(),options:this.visualOptions(),createVisual:function(){Y._boxReflow=true;Y.reflow(X);Y._boxReflow=false;return Y.getDefaultVisual()}}},getDefaultVisual:function(){this.createVisual();this.renderChildren();var X=this.visual;delete this.visual;return X},rotate:function(){var X=this.options;this.box.rotate(X.rotation);this.align(this.targetBox,b1,X.align);this.align(this.targetBox,bZ,X.vAlign);return this.box},rotationTransform:function(){var Y=this.options.rotation;if(!Y){return null}var cJ=this.normalBox.center();var X=cJ.x;var cL=cJ.y;var cK=this.rotatedBox.center();return aS().translate(cK.x-X,cK.y-cL).rotate(Y,[X,cL])}});var b=m.extend({init:function(X){m.fn.init.call(this,X);this.append(new a8(this.options.text,cv.extend({},this.options,{vAlign:this.options.position})))},reflow:function(X){m.fn.reflow.call(this,X);this.box.snapTo(X,b1)}});b.buildTitle=function(Y,cJ,X){var cK=Y;if(typeof Y==="string"){cK={text:Y}}cK=cv.extend({visible:true},X,cK);var cL;if(cK&&cK.visible&&cK.text){cL=new b(cK);cJ.append(cL)}return cL};aK(b,{color:D,position:by,align:O,margin:a5(5),padding:a5(5)});var b6=a8.extend({init:function(cK,cL,cJ,Y,X){a8.fn.init.call(this,cL,X);this.text=cL;this.value=cK;this.index=cJ;this.dataItem=Y;this.reflow(new u())},visualContext:function(X){var Y=a8.fn.visualContext.call(this,X);Y.value=this.value;Y.dataItem=this.dataItem;Y.format=this.options.format;Y.culture=this.options.culture;return Y},click:function(X,Y){X.trigger(cm,{element:b0(Y),value:this.value,text:this.text,index:this.index,dataItem:this.dataItem,axis:this.parent.options})},rotate:function(){if(this.options.alignRotation!==O){var Y=this.normalBox.toRect();var X=this.rotationTransform();this.box=bD(Y.bbox(X.matrix()))}else{a8.fn.rotate.call(this)}return this.box},rotationTransform:function(){var Y=this.options;var cU=Y.rotation;if(!cU){return null}if(Y.alignRotation===O){return a8.fn.rotationTransform.call(this)}var cO=aS().rotate(cU).matrix();var cM=this.normalBox.toRect();var X=this.targetBox.toRect();var cW=Y.rotationOrigin||by;var cS=cW===by||cW===bv?b1:bZ;var cY=cW===by||cW===bv?bZ:b1;var cJ=cW===by||cW===aZ?X.origin:X.bottomRight();var cT=cM.topLeft().transformCopy(cO);var cR=cM.topRight().transformCopy(cO);var cK=cM.bottomRight().transformCopy(cO);var cV=cM.bottomLeft().transformCopy(cO);var cL=e.fromPoints(cT,cR,cK,cV);var cP={};cP[cY]=X.origin[cY]-cL.origin[cY];var c0=Math.abs(cT[cY]+cP[cY]-cJ[cY]);var cN=Math.abs(cR[cY]+cP[cY]-cJ[cY]);var cZ,cX;if(I(c0,cp)===I(cN,cp)){cZ=cT;cX=cR}else{if(cN<c0){cZ=cR;cX=cK}else{cZ=cT;cX=cV}}var cQ=cZ[cS]+(cX[cS]-cZ[cS])/2;cP[cS]=X.center()[cS]-cQ;return aS().translate(cP.x,cP.y).rotate(cU)}});aK(b6,{_autoReflow:false});var G={format:function(Y,X){return X},toString:function(X){return X},parseDate:function(X){return new Date(X)}};var ci=G;var bN=bg.extend({});bN.register=function(X){ci=X};if(Object.defineProperties){Object.defineProperties(bN,{implementation:{get:function(){return ci}}})}var aC=/\{(\d+)(:[^\}]+)?\}/g;var aE=bg.extend({init:function(X){this._intlService=X},auto:function(Y){var cJ=[],X=arguments.length-1;while(X-->0){cJ[X]=arguments[X+1]}var cK=this.intlService;if(Y.match(A)){return cK.format.apply(cK,[Y].concat(cJ))}return cK.toString(cJ[0],Y)},localeAuto:function(cJ,cK,Y){var cL=this.intlService;var X;if(cJ.match(A)){X=cJ.replace(aC,function(cN,cM,cO){var cP=cK[parseInt(cM,10)];return cL.toString(cP,cO?cO.substring(1):"",Y)})}else{X=cL.toString(cK[0],cJ,Y)}return X}});if(Object.defineProperties){Object.defineProperties(aE.fn,{intlService:{get:function(){return this._intlService||bN.implementation}}})}var v=bg.extend({init:function(Y,X){if(X===void 0){X={}}this._intlService=X.intlService;this.sender=X.sender||Y;this.format=new aE(X.intlService);this.chart=Y},notify:function(Y,X){this.chart.trigger(Y,X)}});if(Object.defineProperties){Object.defineProperties(v.fn,{intl:{get:function(){return this._intlService||bN.implementation}}})}var a7;var aA=bg.extend({});aA.register=function(X){a7=X};aA.create=function(Y,X){if(a7){return a7.create(Y,X)}};var a6={compile:function(X){return X}};var az=bg.extend({});az.register=function(X){a6=X};az.compile=function(X){return a6.compile(X)};var ao={ChartService:v,DomEventsBuilder:aA,FormatService:aE,IntlService:bN,TemplateService:az};var bB=7;var bf="#fff";var bQ=bA.extend({init:function(X,Y,cJ){bA.fn.init.call(this,Y);this.fields=X;this.chartService=cJ;this.render()},hide:function(){this.options.visible=false},show:function(){this.options.visible=true},render:function(){var cQ=this.options;if(cQ.visible){var cM=cQ.label;var cL=cQ.icon;var cK=new u();var cP=cL.size;var cN=this.fields.text;var X,cO;if(aw(cM)&&cM.visible){if(cM.template){var Y=az.compile(cM.template);cN=Y(this.fields)}else{if(cM.format){cN=this.chartService.format.auto(cM.format,cN)}}if(!cM.color){cM.color=cM.position===cz?bf:cL.background}this.label=new a8(cN,F({},cM));if(cM.position===cz&&!aw(cP)){if(cL.type===k){cP=Math.max(this.label.box.width(),this.label.box.height())}else{X=this.label.box.width();cO=this.label.box.height()}cK.wrap(this.label.box)}}cL.width=X||cP||bB;cL.height=cO||cP||bB;var cJ=new am(F({},cL));this.marker=cJ;this.append(cJ);if(this.label){this.append(this.label)}cJ.reflow(new u());this.wrapperBox=cK.wrap(cJ.box)}},reflow:function(cP){var cJ=this;var cS=cJ.options;var cQ=cJ.label;var cK=cJ.marker;var cR=cJ.wrapperBox;var X=cP.center();var Y=cS.line.length;var cM=cS.position;if(cS.visible){var cN,cL,cO;if(K(cM,[aZ,a9])){if(cM===aZ){cO=cR.alignTo(cP,cM).translate(-Y,cP.center().y-cR.center().y);if(cS.line.visible){cN=[cP.x1,X.y];this.linePoints=[cN,[cO.x2,X.y]];cL=cO.clone().wrapPoint(cN)}}else{cO=cR.alignTo(cP,cM).translate(Y,cP.center().y-cR.center().y);if(cS.line.visible){cN=[cP.x2,X.y];this.linePoints=[cN,[cO.x1,X.y]];cL=cO.clone().wrapPoint(cN)}}}else{if(cM===bv){cO=cR.alignTo(cP,cM).translate(cP.center().x-cR.center().x,Y);if(cS.line.visible){cN=[X.x,cP.y2];this.linePoints=[cN,[X.x,cO.y1]];cL=cO.clone().wrapPoint(cN)}}else{cO=cR.alignTo(cP,cM).translate(cP.center().x-cR.center().x,-Y);if(cS.line.visible){cN=[X.x,cP.y1];this.linePoints=[cN,[X.x,cO.y2]];cL=cO.clone().wrapPoint(cN)}}}if(cK){cK.reflow(cO)}if(cQ){cQ.reflow(cO);if(cK){if(cS.label.position===br){cQ.box.alignTo(cK.box,cM)}cQ.reflow(cQ.box)}}this.contentBox=cO;this.targetBox=cP;this.box=cL||cO}},createVisual:function(){bA.fn.createVisual.call(this);this.visual.options.noclip=this.options.noclip;if(this.options.visible){this.createLine()}},renderVisual:function(){var cJ=this;var X=this.options;var Y=X.visual;if(X.visible&&Y){this.visual=Y(cv.extend(this.fields,{sender:this.getSender(),rect:this.targetBox.toRect(),options:{background:X.background,border:X.background,icon:X.icon,label:X.label,line:X.line,position:X.position,visible:X.visible},createVisual:function(){cJ.createVisual();cJ.renderChildren();var cK=cJ.visual;delete cJ.visual;return cK}}));this.addVisual()}else{bA.fn.renderVisual.call(this)}},createLine:function(){var X=this.options.line;if(this.linePoints){var Y=aj.fromPoints(this.linePoints,{stroke:{color:X.color,width:X.width,dashType:X.dashType}});aa(Y);this.visual.append(Y)}},click:function(Y,cJ){var X=this.eventArgs(cJ);if(!Y.trigger(a1,X)){cJ.preventDefault()}},hover:function(Y,cJ){var X=this.eventArgs(cJ);if(!Y.trigger(ct,X)){cJ.preventDefault()}},leave:function(X){X._unsetActivePoint()},eventArgs:function(Y){var X=this.options;return cv.extend(this.fields,{element:b0(Y),text:aw(X.label)?X.label.text:"",visual:this.visual})}});aK(bQ,{icon:{visible:true,type:k},label:{position:cz,visible:true,align:O,vAlign:O},line:{visible:true},visible:true,position:by,zIndex:2});function J(cK,cJ){var Y=cK.tickX;var cM=cK.tickY;var X=cK.position;var cL=new aj({stroke:{width:cJ.width,color:cJ.color}});if(cK.vertical){cL.moveTo(Y,X).lineTo(Y+cJ.size,X)}else{cL.moveTo(X,cM).lineTo(X,cM+cJ.size)}aa(cL);return cL}function bE(cJ,cM){var cK=cJ.lineStart;var cL=cJ.lineEnd;var X=cJ.position;var Y=new aj({stroke:{width:cM.width,color:cM.color,dashType:cM.dashType}});if(cJ.vertical){Y.moveTo(cK,X).lineTo(cL,X)}else{Y.moveTo(X,cK).lineTo(X,cL)}aa(Y);return Y}var N=m.extend({init:function(X,Y){if(Y===void 0){Y=new v()}m.fn.init.call(this,X);this.chartService=Y;if(!this.options.visible){this.options=F({},this.options,{labels:{visible:false},line:{visible:false},margin:0,majorTickSize:0,minorTickSize:0})}this.options.minorTicks=F({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.minorTickType!==M},this.options.minorTicks,{size:this.options.minorTickSize,align:this.options.minorTickType});this.options.majorTicks=F({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.majorTickType!==M},this.options.majorTicks,{size:this.options.majorTickSize,align:this.options.majorTickType});if(!this.options._deferLabels){this.createLabels()}this.createTitle();this.createNotes()},labelsRange:function(){return{min:this.options.labels.skip,max:this.labelsCount()}},createLabels:function(){var Y=this;var cP=this.options;var cL=cP.vertical?a9:O;var cJ=F({},cP.labels,{align:cL,zIndex:cP.zIndex});var X=Math.max(1,cJ.step);this.children=cc(this.children,function(cQ){return !(cQ instanceof b6)});this.labels=[];if(cJ.visible){var cK=this.labelsRange();var cO=cJ.rotation;if(cG(cO)){cJ.alignRotation=cO.align;cJ.rotation=cO.angle}if(cJ.rotation==="auto"){cJ.rotation=0;cP.autoRotateLabels=true}for(var cN=cK.min;cN<cK.max;cN+=X){var cM=Y.createAxisLabel(cN,cJ);if(cM){Y.append(cM);Y.labels.push(cM)}}}},lineBox:function(){var cL=this;var cJ=cL.options;var cK=cL.box;var Y=cJ.vertical;var cN=cJ.labels.mirror;var cO=cN?cK.x1:cK.x2;var cM=cN?cK.y2:cK.y1;var X=cJ.line.width||0;return Y?new u(cO,cK.y1,cO,cK.y2-X):new u(cK.x1,cM,cK.x2-X,cM)},createTitle:function(){var X=this.options;var Y=F({rotation:X.vertical?-90:0,text:"",zIndex:1,visualSize:true},X.title);if(Y.visible&&Y.text){var cJ=new a8(Y.text,Y);this.append(cJ);this.title=cJ}},createNotes:function(){var cN=this;var Y=this.options;var cK=Y.notes;var X=cK.data||[];this.notes=[];for(var cJ=0;cJ<X.length;cJ++){var cM=F({},cK,X[cJ]);cM.value=cN.parseNoteValue(cM.value);var cL=new bQ({value:cM.value,text:cM.label.text,dataItem:cM},cM,cN.chartService);if(cL.options.visible){if(aw(cL.options.position)){if(Y.vertical&&!K(cL.options.position,[aZ,a9])){cL.options.position=Y.reverse?aZ:a9}else{if(!Y.vertical&&!K(cL.options.position,[by,bv])){cL.options.position=Y.reverse?bv:by}}}else{if(Y.vertical){cL.options.position=Y.reverse?aZ:a9}else{cL.options.position=Y.reverse?bv:by}}cN.append(cL);cN.notes.push(cL)}}},parseNoteValue:function(X){return X},renderVisual:function(){m.fn.renderVisual.call(this);this.createPlotBands()},createVisual:function(){m.fn.createVisual.call(this);this.createBackground();this.createLine()},gridLinesVisual:function(){var X=this._gridLines;if(!X){X=this._gridLines=new aM({zIndex:-2});this.appendVisual(this._gridLines)}return X},createTicks:function(cJ){var Y=this.options;var X=this.lineBox();var cN=Y.labels.mirror;var cM=Y.majorTicks.visible?Y.majorUnit:0;var cL={vertical:Y.vertical};function cK(cP,cO,cR){var cT=cP.length;var cS=Math.max(1,cO.step);if(cO.visible){for(var cQ=cO.skip;cQ<cT;cQ+=cS){if(aw(cR)&&cQ%cR===0){continue}cL.tickX=cN?X.x2:X.x2-cO.size;cL.tickY=cN?X.y1-cO.size:X.y1;cL.position=cP[cQ];cJ.append(J(cL,cO))}}}cK(this.getMajorTickPositions(),Y.majorTicks);cK(this.getMinorTickPositions(),Y.minorTicks,cM/Y.minorUnit)},createLine:function(){var cJ=this.options;var Y=cJ.line;var X=this.lineBox();if(Y.width>0&&Y.visible){var cL=new aj({stroke:{width:Y.width,color:Y.color,dashType:Y.dashType}});cL.moveTo(X.x1,X.y1).lineTo(X.x2,X.y2);if(cJ._alignLines){aa(cL)}var cK=this._lineGroup=new aM();cK.append(cL);this.visual.append(cK);this.createTicks(cK)}},getActualTickSize:function(){var X=this.options;var Y=0;if(X.majorTicks.visible&&X.minorTicks.visible){Y=Math.max(X.majorTicks.size,X.minorTicks.size)}else{if(X.majorTicks.visible){Y=X.majorTicks.size}else{if(X.minorTicks.visible){Y=X.minorTicks.size}}}return Y},createBackground:function(){var cK=this;var X=cK.options;var cJ=cK.box;var Y=X.background;if(Y){this._backgroundPath=aj.fromRect(cJ.toRect(),{fill:{color:Y},stroke:null});this.visual.append(this._backgroundPath)}},createPlotBands:function(){var cL=this;var cT=this.options;var cQ=cT.plotBands||[];var cK=cT.vertical;var X=this.plotArea;if(cQ.length===0){return}var cP=this._plotbandGroup=new aM({zIndex:-1});var cJ=cc(this.pane.axes,function(cU){return cU.options.vertical!==cL.options.vertical})[0];for(var cO=0;cO<cQ.length;cO++){var cR=cQ[cO];var cN=void 0,cM=void 0;if(cK){cN=(cJ||X.axisX).lineBox();cM=cL.getSlot(cR.from,cR.to,true)}else{cN=cL.getSlot(cR.from,cR.to,true);cM=(cJ||X.axisY).lineBox()}if(cN.width()!==0&&cM.height()!==0){var Y=new e([cN.x1,cM.y1],[cN.width(),cM.height()]);var cS=aj.fromRect(Y,{fill:{color:cR.color,opacity:cR.opacity},stroke:null});cP.append(cS)}}this.appendVisual(cP)},createGridLines:function(cJ){var cU=this.options;var cR=cU.minorGridLines;var cQ=cU.majorGridLines;var cK=cU.minorUnit;var cL=cU.vertical;var cT=cJ.options.line.visible;var cO=cQ.visible?cU.majorUnit:0;var cN=cJ.lineBox();var cP=cN[cL?"y1":"x1"];var cS={lineStart:cN[cL?"x1":"y1"],lineEnd:cN[cL?"x2":"y2"],vertical:cL};var cM=[];var X=this.gridLinesVisual();function Y(cV,c0,cX){var cZ=cV.length;var cY=Math.max(1,c0.step);if(c0.visible){for(var cW=c0.skip;cW<cZ;cW+=cY){var c1=I(cV[cW]);if(!K(c1,cM)){if(cW%cX!==0&&(!cT||cP!==c1)){cS.position=c1;X.append(bE(cS,c0));cM.push(c1)}}}}}Y(this.getMajorTickPositions(),cQ);Y(this.getMinorTickPositions(),cR,cO/cK);return X.children},reflow:function(cR){var cL=this;var cV=cL.options;var cS=cL.labels;var cU=cL.title;var cN=cV.vertical;var cT=cS.length;var cK=cN?bK:b2;var cJ=cU?cU.box[cK]():0;var X=this.getActualTickSize()+cV.margin+cJ;var cQ=(this.getRoot()||{}).box||cR;var cM=cQ[cK]();var Y=0;for(var cP=0;cP<cT;cP++){var cO=cS[cP].box[cK]();if(cO+X<=cM){Y=Math.max(Y,cO)}}if(cN){this.box=new u(cR.x1,cR.y1,cR.x1+Y+X,cR.y2)}else{this.box=new u(cR.x1,cR.y1,cR.x2,cR.y1+Y+X)}this.arrangeTitle();this.arrangeLabels();this.arrangeNotes()},getLabelsTickPositions:function(){return this.getMajorTickPositions()},labelTickIndex:function(X){return X.index},arrangeLabels:function(){var cZ=this;var cM=this;var cK=cM.options;var cY=cM.labels;var cR=!cK.justified;var cJ=cK.vertical;var X=this.lineBox();var cS=cK.labels.mirror;var c0=this.getLabelsTickPositions();var cX=this.getActualTickSize()+cK.margin;for(var cT=0;cT<cY.length;cT++){var cN=cY[cT];var cL=cZ.labelTickIndex(cN);var cO=cJ?cN.box.height():cN.box.width();var cU=c0[cL]-cO/2;var cW=void 0,cV=void 0,Y=void 0;if(cJ){if(cR){cV=c0[cL];Y=c0[cL+1];var c1=cV+(Y-cV)/2;cU=c1-cO/2}var cQ=X.x2;if(cS){cQ+=cX;cN.options.rotationOrigin=aZ}else{cQ-=cX+cN.box.width();cN.options.rotationOrigin=a9}cW=cN.box.move(cQ,cU)}else{if(cR){cV=c0[cL];Y=c0[cL+1]}else{cV=cU;Y=cU+cO}var cP=X.y1;if(cS){cP-=cX+cN.box.height();cN.options.rotationOrigin=bv}else{cP+=cX;cN.options.rotationOrigin=by}cW=new u(cV,cP,Y,cP+cN.box.height())}cN.reflow(cW)}},autoRotateLabels:function(){if(this.options.autoRotateLabels&&!this.options.vertical){var Y=this.getMajorTickPositions();var cN=this.labels;var cM;for(var X=0;X<cN.length;X++){var cL=Y[X+1]-Y[X];var cK=cN[X].box;if(cK.width()>cL){if(cK.height()>cL){cM=-90;break}cM=-45}}if(cM){for(var cJ=0;cJ<cN.length;cJ++){cN[cJ].options.rotation=cM;cN[cJ].reflow(new u())}return true}}},arrangeTitle:function(){var cJ=this;var Y=cJ.options;var cL=cJ.title;var cK=Y.labels.mirror;var X=Y.vertical;if(cL){if(X){cL.options.align=cK?a9:aZ;cL.options.vAlign=cL.options.position}else{cL.options.align=cL.options.position;cL.options.vAlign=cK?by:bv}cL.reflow(this.box)}},arrangeNotes:function(){var cL=this;for(var X=0;X<this.notes.length;X++){var Y=cL.notes[X];var cJ=Y.options.value;var cK=void 0;if(aw(cJ)){if(cL.shouldRenderNote(cJ)){Y.show()}else{Y.hide()}cK=cL.noteSlot(cJ)}else{Y.hide()}Y.reflow(cK||cL.lineBox())}},noteSlot:function(X){return this.getSlot(X)},alignTo:function(cJ){var X=cJ.lineBox();var Y=this.options.vertical;var cK=Y?bZ:b1;this.box.snapTo(X,cK);if(Y){this.box.shrink(0,this.lineBox().height()-X.height())}else{this.box.shrink(this.lineBox().width()-X.width(),0)}this.box[cK+1]-=this.lineBox()[cK+1]-X[cK+1];this.box[cK+2]-=this.lineBox()[cK+2]-X[cK+2]},axisLabelText:function(cK,cJ,Y){var cL=cK;if(Y.template){var X=az.compile(Y.template);cL=X({value:cK,dataItem:cJ,format:Y.format,culture:Y.culture})}else{if(Y.format){cL=this.chartService.format.localeAuto(Y.format,[cK],Y.culture)}}return cL},slot:function(cK,cJ,X){var Y=this.getSlot(cK,cJ,X);if(Y){return Y.toRect()}},contentBox:function(){var X=this.box.clone();var cJ=this.labels;if(cJ.length){if(cJ[0].options.visible){X.wrap(cJ[0].box)}var Y=cJ[cJ.length-1];if(Y.options.visible){X.wrap(Y.box)}}return X},limitRange:function(cN,cO,Y,cL,X){var cP=this.options;if(cN<Y&&X<0&&(!aw(cP.min)||cP.min<=Y)||cL<cO&&X>0&&(!aw(cP.max)||cL<=cP.max)){return null}if(cO<Y&&X>0||cL<cN&&X<0){return{min:cN,max:cO}}var cK=cO-cN;var cM=cN;var cJ=cO;if(cN<Y){cM=ad(cN,Y,cL);cJ=ad(cN+cK,Y+cK,cL)}else{if(cO>cL){cJ=ad(cO,Y,cL);cM=ad(cO-cK,Y,cL-cK)}}return{min:cM,max:cJ}},valueRange:function(){return{min:this.seriesMin,max:this.seriesMax}}});aK(N,{labels:{visible:true,rotation:0,mirror:false,step:1,skip:0},line:{width:1,color:D,visible:true},title:{visible:true,position:O},majorTicks:{align:br,size:4,skip:0,step:1},minorTicks:{align:br,size:3,skip:0,step:1},axisCrossingValue:0,majorTickType:br,minorTickType:M,majorGridLines:{skip:0,step:1},minorGridLines:{visible:false,width:1,color:D,skip:0,step:1},margin:5,visible:true,reverse:false,justified:true,notes:{label:{text:""}},_alignLines:true,_deferLabels:false});var bW=0.01;var aQ=N.extend({init:function(X,Y){N.fn.init.call(this,X,Y);this._ticks={};this._initCategories(this.options)},_initCategories:function(cK){var Y=(cK.categories||[]).slice(0);var cM=aw(cK.min);var cJ=aw(cK.max);cK.categories=Y;if((cM||cJ)&&Y.length){cK.srcCategories=cK.categories;var cL=cM?Math.floor(cK.min):0;var X;if(cJ){X=cK.justified?Math.floor(cK.max)+1:Math.ceil(cK.max)}else{X=Y.length}cK.categories=cK.categories.slice(cL,X)}},rangeIndices:function(){var Y=this.options;var cK=Y.categories.length||1;var cJ=aJ(Y.min)?Y.min%1:0;var X;if(aJ(Y.max)&&Y.max%1!==0&&Y.max<this.totalRange().max){X=cK-(1-Y.max%1)}else{X=cK-(Y.justified?1:0)}return{min:cJ,max:X}},totalRangeIndices:function(Y){var cJ=this.options;var cK=aJ(cJ.min)?cJ.min:0;var X;if(aJ(cJ.max)){X=cJ.max}else{if(aJ(cJ.min)){X=cK+cJ.categories.length}else{X=(cJ.srcCategories||cJ.categories).length-(cJ.justified?1:0)||1}}if(Y){var cL=this.totalRange();cK=ad(cK,0,cL.max);X=ad(X,0,cL.max)}return{min:cK,max:X}},range:function(){var X=this.options;return{min:aJ(X.min)?X.min:0,max:aJ(X.max)?X.max:X.categories.length}},totalRange:function(){var X=this.options;return{min:0,max:Math.max(this._seriesMax||0,(X.srcCategories||X.categories).length)-(X.justified?1:0)}},getScale:function(){var cL=this.rangeIndices();var cK=cL.min;var X=cL.max;var Y=this.lineBox();var cJ=this.options.vertical?Y.height():Y.width();var cM=cJ/(X-cK||1);return cM*(this.options.reverse?-1:1)},getTickPositions:function(cS){var X=this.options;var cK=X.vertical;var cP=X.reverse;var Y=this.rangeIndices();var cL=Y.min;var cR=Y.max;var cN=this.lineBox();var cJ=this.getScale();var cQ=cN[(cK?bZ:b1)+(cP?2:1)];var cM=[];var cO=cL%1!==0?Math.floor(cL/1)+cS:cL;while(cO<=cR){cM.push(cQ+I(cJ*(cO-cL),cq));cO+=cS}return cM},getLabelsTickPositions:function(){var cK=this.getMajorTickPositions().slice(0);var Y=this.rangeIndices();var cN=this.getScale();var cM=this.lineBox();var cJ=this.options;var cL=cJ.vertical?bZ:b1;var cO=cJ.reverse?2:1;var X=cJ.reverse?1:2;if(Y.min%1!==0){cK.unshift(cM[cL+cO]-cN*(Y.min%1))}if(Y.max%1!==0){cK.push(cM[cL+X]+cN*(1-Y.max%1))}return cK},labelTickIndex:function(cJ){var X=this.rangeIndices();var Y=cJ.index;if(X.min>0){Y=Y-Math.floor(X.min)}return Y},arrangeLabels:function(){N.fn.arrangeLabels.call(this);this.hideOutOfRangeLabels()},hideOutOfRangeLabels:function(){var cK=this;var cJ=cK.box;var cO=cK.labels;if(cO.length){var cN=this.options.vertical?bZ:b1;var cM=cJ[cN+1];var Y=cJ[cN+2];var X=cO[0];var cL=aN(cO);if(X.box[cN+1]>Y||X.box[cN+2]<cM){X.options.visible=false}if(cL.box[cN+1]>Y||cL.box[cN+2]<cM){cL.options.visible=false}}},getMajorTickPositions:function(){return this.getTicks().majorTicks},getMinorTickPositions:function(){return this.getTicks().minorTicks},getTicks:function(){var cM=this.options;var cL=cM.reverse;var X=cM.justified;var cK=this._ticks;var cJ=this.rangeIndices();var Y=this.lineBox();var cN=Y.getHash()+cJ.min+","+cJ.max+cL+X;if(cK._hash!==cN){cK._hash=cN;cK.majorTicks=this.getTickPositions(1);cK.minorTicks=this.getTickPositions(0.5)}return cK},getSlot:function(cW,cM,cZ){var cQ=this;var cO=cQ.options;var cS=cO.reverse;var cT=cO.justified;var cL=cO.vertical;var Y=this.rangeIndices();var cV=Y.min;var cX=cL?bZ:b1;var X=this.lineBox();var c0=this.getScale();var cU=X[cX+(cS?2:1)];var cR=X.clone();var cY=!aw(cM);var cP=aP(cW,0);var cN=aP(cM,cP);cN=Math.max(cN-1,cP);cN=Math.max(cP,cN);var cK=cU+(cP-cV)*c0;var cJ=cU+(cN+1-cV)*c0;if(cY&&cT){cJ=cK}if(cZ){cK=ad(cK,X[cX+1],X[cX+2]);cJ=ad(cJ,X[cX+1],X[cX+2])}cR[cX+1]=cS?cJ:cK;cR[cX+2]=cS?cK:cJ;return cR},slot:function(cL,cK,Y){var cJ=cL;var X=cK;if(typeof cJ==="string"){cJ=this.categoryIndex(cJ)}if(typeof X==="string"){X=this.categoryIndex(X)}return N.fn.slot.call(this,cJ,X,Y)},pointCategoryIndex:function(cU){var Y=this.options;var cQ=Y.reverse;var cL=Y.justified;var cK=Y.vertical;var cV=cK?bZ:b1;var cP=this.lineBox();var cN=this.rangeIndices();var X=cQ?cN.max:cN.min;var cJ=this.getScale();var cO=cP[cV+1];var cM=cP[cV+2];var cR=cU[cV];if(cR<cO||cR>cM){return null}var cT=X+(cR-cO)/cJ;var cS=cT%1;if(cL){cT=Math.round(cT)}else{if(cS===0&&cT>0){cT--}}return Math.floor(cT)},getCategory:function(X){var Y=this.pointCategoryIndex(X);if(Y===null){return null}return this.options.categories[Y]},categoryIndex:function(cJ){var Y=this.options;var X=(Y.srcCategories||Y.categories).indexOf(cJ);return X-Math.floor(Y.min||0)},translateRange:function(cN){var cJ=this.options;var X=this.lineBox();var cK=cJ.vertical?X.height():X.width();var Y=cJ.categories.length;var cM=cK/Y;var cL=I(cN/cM,cp);return{min:cL,max:Y+cL}},zoomRange:function(cL){var Y=this.totalRangeIndices();var cM=this.totalRange();var cN=cM.min;var cJ=cM.max;var cK=ad(Y.min+cL,cN,cJ);var X=ad(Y.max-cL,cN,cJ);if(X-cK>0){return{min:cK,max:X}}},scaleRange:function(Y){var X=this.options.categories.length;var cJ=Y*X;return{min:-cJ,max:X+cJ}},labelsCount:function(){var X=this.labelsRange();return X.max-X.min},labelsRange:function(){var cK=this.options;var Y=cK.justified;var cJ=cK.labels;var cN=this.totalRangeIndices(true);var cL=cN.min;var X=cN.max;var cO=Math.floor(cL);if(!Y){cL=Math.floor(cL);X=Math.ceil(X)}else{cL=Math.ceil(cL);X=Math.floor(X)}var cM;if(cL>cJ.skip){cM=cJ.skip+cJ.step*Math.ceil((cL-cJ.skip)/cJ.step)}else{cM=cJ.skip}return{min:cM-cO,max:(cK.categories.length?X+(Y?1:0):0)-cO}},createAxisLabel:function(cK,X){var cJ=this.options;var Y=cJ.dataItems?cJ.dataItems[cK]:null;var cL=aP(cJ.categories[cK],"");var cM=this.axisLabelText(cL,Y,X);return new b6(cL,cM,cK,Y,X)},shouldRenderNote:function(Y){var X=this.totalRangeIndices();return Math.floor(X.min)<=Y&&Y<=Math.ceil(X.max)},noteSlot:function(cJ){var Y=this.options;var X=cJ-Math.floor(Y.min||0);return this.getSlot(X)},arrangeNotes:function(){N.fn.arrangeNotes.call(this);this.hideOutOfRangeNotes()},hideOutOfRangeNotes:function(){var cM=this;var cJ=cM.notes;var cL=cM.box;if(cJ&&cJ.length){var cO=this.options.vertical?bZ:b1;var cN=cL[cO+1];var Y=cL[cO+2];for(var X=0;X<cJ.length;X++){var cK=cJ[X];if(cK.box&&(Y<cK.box[cO+1]||cK.box[cO+2]<cN)){cK.hide()}}}},pan:function(cN){var Y=this.totalRangeIndices(true);var cM=this.getScale();var cL=I(cN/cM,cp);var cK=this.totalRange();var cJ=Y.min+cL;var X=Y.max+cL;return this.limitRange(cJ,X,0,cK.max,cL)},pointsRange:function(Y,cN){var cJ=this.options;var cT=cJ.reverse;var cM=cJ.vertical;var cW=cM?bZ:b1;var cS=this.lineBox();var cQ=this.totalRangeIndices(true);var cL=this.getScale();var cR=cS[cW+(cT?2:1)];var cV=Y[cW]-cR;var cK=cN[cW]-cR;var cO=cQ.min+cV/cL;var cU=cQ.min+cK/cL;var X=Math.min(cO,cU);var cP=Math.max(cO,cU);if(cP-X>=bW){return{min:X,max:cP}}},valueRange:function(){return this.range()}});aK(aQ,{type:"category",categories:[],vertical:false,majorGridLines:{visible:false,width:1,color:D},labels:{zIndex:1},justified:false,_deferLabels:true});var E="milliseconds";var bM="seconds";var cE="minutes";var bL="hours";var R="days";var a="weeks";var bz="months";var cw="years";var bj=1;var bc=1000;var bI=60*bc;var aY=60*bI;var l=24*aY;var w=7*l;var cd=31*l;var ck=365*l;var bR={years:ck,months:cd,weeks:w,days:l,hours:aY,minutes:bI,seconds:bc,milliseconds:bj};function aX(Y,X){var cK=Y.getTime()-X;var cJ=Y.getTimezoneOffset()-X.getTimezoneOffset();return cK-cJ*bI}function aI(X,Y){return new Date(X.getTime()+Y)}function ak(Y){var X;if(Y instanceof Date){X=Y}else{if(Y){X=new Date(Y)}}return X}function T(cJ,cK){if(cK===void 0){cK=0}var Y=0;var X=cJ.getDay();if(!isNaN(X)){while(X!==cK){if(X===0){X=6}else{X--}Y++}}return aI(cJ,-Y*l)}function bx(Y,X){if(X===0&&Y.getHours()===23){Y.setHours(Y.getHours()+2);return true}return false}function ay(Y,X){var cK=new Date(Y);cK.setMinutes(0,0,0);var cJ=(Y.getTimezoneOffset()-cK.getTimezoneOffset())*bI;return aI(cK,cJ+X*aY)}function ac(cK,cN,cM,cL){var X=cK;if(cK){var cJ=ak(cK);var Y=cJ.getHours();if(cM===cw){X=new Date(cJ.getFullYear()+cN,0,1);bx(X,0)}else{if(cM===bz){X=new Date(cJ.getFullYear(),cJ.getMonth()+cN,1);bx(X,Y)}else{if(cM===a){X=ac(T(cJ,cL),cN*7,R);bx(X,Y)}else{if(cM===R){X=new Date(cJ.getFullYear(),cJ.getMonth(),cJ.getDate()+cN);bx(X,Y)}else{if(cM===bL){X=ay(cJ,cN)}else{if(cM===cE){X=aI(cJ,cN*bI);if(X.getSeconds()>0){X.setSeconds(0)}}else{if(cM===bM){X=aI(cJ,cN*bc)}else{if(cM===E){X=aI(cJ,cN)}}}}}}}}if(cM!==E&&X.getMilliseconds()>0){X.setMilliseconds(0)}}return X}function au(X,cJ,Y){return ac(ak(X),0,cJ,Y)}function ca(Y,cK,cJ){var X=ak(Y);if(X&&au(X,cK,cJ).getTime()===X.getTime()){return X}return ac(X,1,cK,cJ)}function ap(Y,X){if(Y&&X){return Y.getTime()-X.getTime()}return -1}function r(Y,X){return Y.getTime()-X}function Z(cJ){if(a4(cJ)){var Y=[];for(var X=0;X<cJ.length;X++){Y.push(Z(cJ[X]))}return Y}else{if(cJ){return ak(cJ).getTime()}}}function cD(Y,X){if(Y&&X){return Z(Y)===Z(X)}return Y===X}function bU(X,cJ,Y){return aX(X,cJ)/bR[Y]}function j(cK,cN,cL,cM){var cJ=ak(cK);var X=ak(cN);var Y;if(cL===bz){Y=cJ.getMonth()-X.getMonth()+(cJ.getFullYear()-X.getFullYear())*12+bU(cJ,new Date(cJ.getFullYear(),cJ.getMonth()),R)/new Date(cJ.getFullYear(),cJ.getMonth()+1,0).getDate()}else{if(cL===cw){Y=cJ.getFullYear()-X.getFullYear()+j(cJ,new Date(cJ.getFullYear(),0),bz,1)/12}else{if(cL===R||cL===a){Y=bU(cJ,X,cL)}else{Y=r(cJ,cN)/bR[cL]}}}return Y/cM}function cg(Y,X,cJ){var cK;if(cJ===cw){cK=X.getFullYear()-Y.getFullYear()}else{if(cJ===bz){cK=cg(Y,X,cw)*12+X.getMonth()-Y.getMonth()}else{if(cJ===R){cK=Math.floor(r(X,Y)/l)}else{cK=Math.floor(r(X,Y)/bR[cJ])}}}return cK}function ba(cL,cJ){var X=0;var cM=cJ.length-1;var cK;while(X<=cM){cK=Math.floor((X+cM)/2);var Y=cJ[cK];if(Y<cL){X=cK+1;continue}if(Y>cL){cM=cK-1;continue}while(cD(cJ[cK-1],cL)){cK--}return cK}if(cJ[cK]<=cL){return cK}return cK-1}function cx(cJ,Y){var X;if(b5(Y)){X=cJ.parseDate(Y)||ak(Y)}else{X=ak(Y)}return X}function bX(cK,cJ){if(a4(cJ)){var Y=[];for(var X=0;X<cJ.length;X++){Y.push(cx(cK,cJ[X]))}return Y}return cx(cK,cJ)}var d=300000;var bl={seconds:"HH:mm:ss",minutes:"HH:mm",hours:"HH:mm",days:"M/d",weeks:"M/d",months:"MMM 'yy",years:"yyyy"};var aH=0.2;var b9="auto";var aG=[E,bM,cE,bL,R,a,bz,cw];var S="fit";var bS=aQ.extend({init:function(cM,cJ){aQ.fn.init.call(this,cM,cJ);var cL=cJ.intl;var Y=this.options;Y=F({roundToBaseUnit:true},Y,{categories:bX(cL,Y.categories),min:cx(cL,Y.min),max:cx(cL,Y.max)});Y.userSetBaseUnit=Y.userSetBaseUnit||Y.baseUnit;Y.userSetBaseUnitStep=Y.userSetBaseUnitStep||Y.baseUnitStep;if(Y.categories&&Y.categories.length>0){var cK=(Y.baseUnit||"").toLowerCase();var X=cK!==S&&!K(cK,aG);if(X){Y.baseUnit=this.defaultBaseUnit(Y)}if(cK===S||Y.baseUnitStep===b9){this.autoBaseUnit(Y)}this._groupsStart=ac(Y.categories[0],0,Y.baseUnit,Y.weekStartDay);this.groupCategories(Y)}else{Y.baseUnit=Y.baseUnit||R}this.options=Y},_initCategories:function(){},shouldRenderNote:function(cJ){var Y=this.range();var X=this.options.categories||[];return ap(cJ,Y.min)>=0&&ap(cJ,Y.max)<=0&&X.length},parseNoteValue:function(X){return cx(this.chartService.intl,X)},noteSlot:function(X){return this.getSlot(X)},translateRange:function(cP){var cS=this.options;var cM=cS.baseUnit;var cQ=cS.weekStartDay;var Y=cS.vertical;var cL=this.lineBox();var cR=Y?cL.height():cL.width();var cK=this.range();var X=cR/(cK.max-cK.min);var cJ=I(cP/X,cp);if(cK.min&&cK.max){var cO=aI(cS.min||cK.min,cJ);var cN=aI(cS.max||cK.max,cJ);cK={min:ac(cO,0,cM,cQ),max:ac(cN,0,cM,cQ)}}return cK},scaleRange:function(cN){var Y=Math.abs(cN);var X=this.range();var cM=X.min;var cL=X.max;if(cM&&cL){while(Y--){var cJ=r(cM,cL);var cK=Math.round(cJ*0.1);if(cN<0){cM=aI(cM,cK);cL=aI(cL,-cK)}else{cM=aI(cM,-cK);cL=aI(cL,cK)}}X={min:cM,max:cL}}return X},defaultBaseUnit:function(cP){var cK=cP.categories;var cL=aw(cK)?cK.length:0;var cO=U;var cJ,cN;for(var Y=0;Y<cL;Y++){var X=cK[Y];if(X&&cJ){var cM=aX(X,cJ);if(cM>0){cO=Math.min(cO,cM);if(cO>=ck){cN=cw}else{if(cO>=cd-l*3){cN=bz}else{if(cO>=w){cN=a}else{if(cO>=l){cN=R}else{if(cO>=aY){cN=bL}else{if(cO>=bI){cN=cE}else{cN=bM}}}}}}}}cJ=X}return cN||R},_categoryRange:function(Y){var X=Y._range;if(!X){X=Y._range=z(Y)}return X},totalRange:function(){return{min:0,max:this.options.categories.length}},rangeIndices:function(){var cP=this.options;var cJ=cP.categories;var cO=cP.baseUnit;var cL=cP.baseUnitStep||1;var X=this.categoriesRange();var Y=ak(cP.min||X.min);var cN=ak(cP.max||X.max);var cK=0,cM=0;if(cJ.length){cK=j(Y,cJ[0],cO,cL);cM=j(cN,cJ[0],cO,cL);if(cP.roundToBaseUnit){cK=Math.floor(cK);cM=cP.justified?Math.floor(cM):Math.ceil(cM)}}return{min:cK,max:cM}},labelsRange:function(){var cK=this.options;var cJ=cK.labels;var Y=this.rangeIndices();var cL=Math.floor(Y.min);var X=Math.ceil(Y.max);return{min:cL+cJ.skip,max:cK.categories.length?X+(cK.justified?1:0):0}},categoriesRange:function(){var cJ=this.options;var Y=this._categoryRange(cJ.srcCategories||cJ.categories);var X=ak(Y.max);if(!cJ.justified&&cD(X,this._roundToTotalStep(X,cJ,false))){X=this._roundToTotalStep(X,cJ,true,true)}return{min:ak(Y.min),max:X}},currentRange:function(){var Y=this.options;var cL=Y.roundToBaseUnit!==false;var cK=this.categoriesRange();var cJ=Y.min;var X=Y.max;if(!cJ){cJ=cL?this._roundToTotalStep(cK.min,Y,false):cK.min}if(!X){X=cL?this._roundToTotalStep(cK.max,Y,!Y.justified):cK.max}return{min:cJ,max:X}},datesRange:function(){var X=this._categoryRange(this.options.srcCategories||this.options.categories);return{min:ak(X.min),max:ak(X.max)}},pan:function(cR){var cT=this.options;var cM=this.lineBox();var cS=cT.vertical?cM.height():cM.width();var X=this.currentRange();var cK=X.min;var cN=X.max;var cO=this.totalLimits();var Y=cS/(cN-cK);var cJ=I(cR/Y,cp);var cQ=aI(cK,cJ);var cP=aI(cN,cJ);var cL=this.limitRange(Z(cQ),Z(cP),Z(cO.min),Z(cO.max),cJ);if(cL){cL.min=ak(cL.min);cL.max=ak(cL.max);cL.baseUnit=cT.baseUnit;cL.baseUnitStep=cT.baseUnitStep||1;cL.userSetBaseUnit=cT.userSetBaseUnit;cL.userSetBaseUnitStep=cT.userSetBaseUnitStep;return cL}},pointsRange:function(X,cK){var cM=aQ.fn.pointsRange.call(this,X,cK);var cN=this.currentRange();var Y=this.rangeIndices();var cJ=r(cN.max,cN.min)/(Y.max-Y.min);var cP=this.options;var cL=aI(cN.min,cM.min*cJ);var cO=aI(cN.min,cM.max*cJ);return{min:cL,max:cO,baseUnit:cP.userSetBaseUnit,baseUnitStep:cP.userSetBaseUnitStep}},zoomRange:function(cZ){var cK=this.options;var cU=this.totalLimits();var cJ=cK.weekStartDay;var cY=cK.baseUnit;var cP=cK.baseUnitStep||1;var cM=this.currentRange();var cL=cM.min;var cN=cM.max;var cV=ac(cL,cZ*cP,cY,cJ);var cW=ac(cN,-cZ*cP,cY,cJ);if(cK.userSetBaseUnit===S){var cS=cK.autoBaseUnitSteps;var cT=cK.maxDateGroups;var Y=aN(cS[cY])*cT*bR[cY];var cO=r(cN,cL);var cQ=r(cW,cV);var cX=aG.indexOf(cY);var cR,c0;if(cQ<bR[cY]&&cY!==E){cY=aG[cX-1];cR=aN(cS[cY]);c0=(cO-(cT-1)*cR*bR[cY])/2;cV=aI(cL,c0);cW=aI(cN,-c0)}else{if(cQ>Y&&cY!==cw){var X=0;do{cX++;cY=aG[cX];X=0;c0=2*bR[cY];do{cR=cS[cY][X];X++}while(X<cS[cY].length&&c0*cR<cO)}while(cY!==cw&&c0*cR<cO);c0=(c0*cR-cO)/2;if(c0>0){cV=aI(cL,-c0);cW=aI(cN,c0);cV=aI(cV,ad(cW,cU.min,cU.max)-cW);cW=aI(cW,ad(cV,cU.min,cU.max)-cV)}}}}cV=ak(ad(cV,cU.min,cU.max));cW=ak(ad(cW,cU.min,cU.max));if(cV&&cW&&r(cW,cV)>0){return{min:cV,max:cW,baseUnit:cK.userSetBaseUnit,baseUnitStep:cK.userSetBaseUnitStep}}},totalLimits:function(){var Y=this.options;var cK=this.datesRange();var cJ=this._roundToTotalStep(ak(cK.min),Y,false);var X=cK.max;if(!Y.justified){X=this._roundToTotalStep(X,Y,true,cD(X,this._roundToTotalStep(X,Y,false)))}return{min:cJ,max:X}},range:function(cP){var cQ=cP||this.options;var cK=cQ.categories;var X=cQ.baseUnit===S;var cN=X?aG[0]:cQ.baseUnit;var cL=cQ.baseUnitStep||1;var cO={baseUnit:cN,baseUnitStep:cL,weekStartDay:cQ.weekStartDay};var Y=this._categoryRange(cK);var cJ=ak(cQ.min||Y.min);var cM=ak(cQ.max||Y.max);return{min:this._roundToTotalStep(cJ,cO,false),max:this._roundToTotalStep(cM,cO,true,true)}},autoBaseUnit:function(cT){var cJ=this._categoryRange(cT.categories);var cP=ak(cT.max||cJ.max)-ak(cT.min||cJ.min);var cR=cT.maxDateGroups||this.options.maxDateGroups;var X=cT.baseUnit===S;var cL=0;var cO=X?aG[cL++]:cT.baseUnit;var cM=cP/bR[cO];var cS=cM;var cN=F({},this.options.autoBaseUnitSteps,cT.autoBaseUnitSteps);var cQ,Y,cK;while(!Y||cM>=cR){cQ=cQ||cN[cO].slice(0);cK=cQ.shift();if(cK){Y=cK;cM=cS/Y}else{if(cO===aN(aG)){Y=Math.ceil(cS/cR);break}else{if(X){cO=aG[cL++]||aN(aG);cS=cP/bR[cO];cQ=null}else{if(cM>cR){Y=Math.ceil(cS/cR)}break}}}}cT.baseUnitStep=Y;cT.baseUnit=cO},groupCategories:function(cR){var cM=cR.categories;var cP=cR.baseUnit;var cN=cR.baseUnitStep||1;var cQ=ak(z(cM).max);var Y=this.range(cR);var cL=Y.min;var cO=Y.max;var X=[];var cK;for(var cJ=cL;cJ<cO;cJ=cK){X.push(cJ);cK=ac(cJ,cN,cP,cR.weekStartDay);if(cK>cQ&&!cR.max){break}}cR.srcCategories=cM;cR.categories=X},_roundToTotalStep:function(cO,cJ,cP,cM){var cQ=cJ||this.options;var cN=cQ.baseUnit;var cK=cQ.baseUnitStep||1;var X=this._groupsStart;if(X){var Y=j(cO,X,cN,cK);var cL=cP?Math.ceil(Y):Math.floor(Y);if(cM){cL++}return ac(X,cL*cK,cN,cQ.weekStartDay)}return ac(cO,cP?cK:0,cN,cQ.weekStartDay)},createAxisLabel:function(cL,cK){var cQ=this.options;var X=cQ.dataItems?cQ.dataItems[cL]:null;var cJ=cQ.categories[cL];var cO=cQ.baseUnit;var cM=cK.dateFormats[cO];var Y=true;if(cQ.justified){var cN=au(cJ,cO,cQ.weekStartDay);Y=cD(cN,cJ)}else{if(!cQ.roundToBaseUnit){Y=!cD(this.range().max,cJ)}}if(Y){cK.format=cK.format||cM;var cP=this.axisLabelText(cJ,X,cK);if(cP){return new b6(cJ,cP,cL,X,cK)}}},categoryIndex:function(cK){var cJ=this.options;var X=cJ.categories;var Y=-1;if(X.length){Y=Math.floor(j(ak(cK),X[0],cJ.baseUnit,cJ.baseUnitStep||1))}return Y},getSlot:function(cK,X,cJ){var cL=cK;var Y=X;if(typeof cL===cF){cL=this.categoryIndex(cL)}if(typeof Y===cF){Y=this.categoryIndex(Y)}return aQ.fn.getSlot.call(this,cL,Y,cJ)},valueRange:function(){var Y=this.options;var X=this._categoryRange(Y.srcCategories||Y.categories);return{min:ak(X.min),max:ak(X.max)}}});aK(bS,{type:bH,labels:{dateFormats:bl},autoBaseUnitSteps:{milliseconds:[1,10,100],seconds:[1,2,5,15,30],minutes:[1,2,5,15,30],hours:[1,2,3],days:[1,2,3],weeks:[1,2],months:[1,2,3,6],years:[1,2,3,5,10,25,50]},maxDateGroups:10});function cu(cK,cJ){var cL=I(cJ-cK,cp-1);if(cL===0){if(cJ===0){return 0.1}cL=Math.abs(cJ)}var cM=Math.pow(10,Math.floor(Math.log(cL)/Math.log(10)));var Y=I(cL/cM,cp);var X=1;if(Y<1.904762){X=0.2}else{if(Y<4.761904){X=0.5}else{if(Y<9.523809){X=1}else{X=2}}}return I(cM*X,cp)}function f(cJ,X,cM){if(!cJ&&!X){return 0}var Y;if(cJ>=0&&X>=0){var cK=cJ===X?0:cJ;var cL=(X-cK)/X;if(cM===false||!cM&&cL>aH){return 0}Y=Math.max(0,cK-(X-cK)/2)}else{Y=cJ}return Y}function bF(Y,X,cM){if(!Y&&!X){return 1}var cL;if(Y<=0&&X<=0){var cK=Y===X?0:X;var cJ=Math.abs((cK-Y)/cK);if(cM===false||!cM&&cJ>aH){return 0}cL=Math.min(0,cK-(Y-cK)/2)}else{cL=X}return cL}function ch(Y,X){return I(Math.floor(Y/X)*X,cp)}function W(Y,X){return I(Math.ceil(Y/X)*X,cp)}function cs(X){return Math.max(Math.min(X,d),-d)}var a0=Math.pow(10,-cp+1);var at=N.extend({init:function(Y,cL,cJ,cK){var X=aR(Y,cL,cJ);var cM=ax(X,cJ);N.fn.init.call(this,bq(X,cJ),cK);this.totalMin=cM.min;this.totalMax=cM.max;this.totalMajorUnit=cM.majorUnit;this.seriesMin=Y;this.seriesMax=cL},startValue:function(){return 0},range:function(){var X=this.options;return{min:X.min,max:X.max}},getDivisions:function(X){if(X===0){return 1}var cJ=this.options;var Y=cJ.max-cJ.min;return Math.floor(I(Y/X,cq))+1},getTickPositions:function(cU,cW){var cX=this.options;var cN=cX.vertical;var cR=cX.reverse;var cQ=this.lineBox();var cV=cN?cQ.height():cQ.width();var cP=cX.max-cX.min;var cM=cV/cP;var cJ=cU*cM;var Y=this.getDivisions(cU);var cK=(cN?-1:1)*(cR?-1:1);var X=cK===1?1:2;var cO=[];var cS=cQ[(cN?bZ:b1)+X];var cL=0;if(cW){cL=cW/cU}for(var cT=0;cT<Y;cT++){if(cT%cL!==0){cO.push(I(cS,cq))}cS=cS+cJ*cK}return cO},getMajorTickPositions:function(){return this.getTickPositions(this.options.majorUnit)},getMinorTickPositions:function(){return this.getTickPositions(this.options.minorUnit)},getSlot:function(cS,cR,cN){if(cN===void 0){cN=false}var cX=this.options;var cL=cX.vertical;var cQ=cX.reverse;var cW=cL?bZ:b1;var cP=this.lineBox();var cO=cP[cW+(cQ?2:1)];var cU=cL?cP.height():cP.width();var cK=cQ?-1:1;var Y=cK*(cU/(cX.max-cX.min));var cJ=new u(cP.x1,cP.y1,cP.x1,cP.y1);var X=cS;var cM=cR;if(!aw(X)){X=cM||0}if(!aw(cM)){cM=X||0}if(cN){X=Math.max(Math.min(X,cX.max),cX.min);cM=Math.max(Math.min(cM,cX.max),cX.min)}var cV,cT;if(cL){cV=cX.max-Math.max(X,cM);cT=cX.max-Math.min(X,cM)}else{cV=Math.min(X,cM)-cX.min;cT=Math.max(X,cM)-cX.min}cJ[cW+1]=cs(cO+Y*(cQ?cT:cV));cJ[cW+2]=cs(cO+Y*(cQ?cV:cT));return cJ},getValue:function(cS){var cV=this.options;var cK=cV.vertical;var cP=cV.reverse;var cQ=Number(cV.max);var cM=Number(cV.min);var cU=cK?bZ:b1;var cO=this.lineBox();var cN=cO[cU+(cP?2:1)];var cT=cK?cO.height():cO.width();var cJ=cP?-1:1;var cL=cJ*(cS[cU]-cN);var Y=(cQ-cM)/cT;var X=cL*Y;if(cL<0||cL>cT){return null}var cR=cK?cQ-X:cM+X;return I(cR,cp)},translateRange:function(cP){var cR=this.options;var Y=cR.vertical;var cN=cR.reverse;var cO=cR.max;var cK=cR.min;var cM=this.lineBox();var cQ=Y?cM.height():cM.width();var cL=cO-cK;var X=cQ/cL;var cJ=I(cP/X,cp);if((Y||cN)&&!(Y&&cN)){cJ=-cJ}return{min:cK+cJ,max:cO+cJ}},scaleRange:function(cJ){var X=this.options;var Y=-cJ*X.majorUnit;return{min:X.min-Y,max:X.max+Y}},labelsCount:function(){return this.getDivisions(this.options.majorUnit)},createAxisLabel:function(cJ,X){var Y=this.options;var cK=I(Y.min+cJ*Y.majorUnit,cp);var cL=this.axisLabelText(cK,null,X);return new b6(cK,cL,cJ,null,X)},shouldRenderNote:function(Y){var X=this.range();return X.min<=Y&&Y<=X.max},pan:function(Y){var X=this.translateRange(Y);return this.limitRange(X.min,X.max,this.totalMin,this.totalMax)},pointsRange:function(cM,cJ){var cK=this.getValue(cM);var Y=this.getValue(cJ);var cL=Math.min(cK,Y);var X=Math.max(cK,Y);if(this.isValidRange(cL,X)){return{min:cL,max:X}}},zoomRange:function(cN){var cL=this;var cM=cL.totalMin;var cJ=cL.totalMax;var Y=this.scaleRange(cN);var cK=ad(Y.min,cM,cJ);var X=ad(Y.max,cM,cJ);if(this.isValidRange(cK,X)){return{min:cK,max:X}}},isValidRange:function(Y,X){return X-Y>a0}});function aR(Y,cN,cL){var cK=cL.narrowRange;var cM=f(Y,cN,cK);var cJ=bF(Y,cN,cK);var cO=cu(cM,cJ);var X={majorUnit:cO};if(cL.roundToMajorUnit!==false){if(cM<0&&aB(cM,cO,1/3)){cM-=cO}if(cJ>0&&aB(cJ,cO,1/3)){cJ+=cO}}X.min=ch(cM,cO);X.max=W(cJ,cO);return X}function ax(X,Y){return{min:aw(Y.min)?Math.min(X.min,Y.min):X.min,max:aw(Y.max)?Math.max(X.max,Y.max):X.max,majorUnit:X.majorUnit}}function bq(Y,cK){var cJ=cK;if(cK){var X=aw(cK.min)||aw(cK.max);if(X){if(cK.min===cK.max){if(cK.min>0){cK.min=0}else{cK.max=1}}}if(cK.majorUnit){Y.min=ch(Y.min,cK.majorUnit);Y.max=W(Y.max,cK.majorUnit)}else{if(X){cJ=F(Y,cK);Y.majorUnit=cu(cJ.min,cJ.max)}}}Y.minorUnit=(cJ.majorUnit||Y.majorUnit)/5;return F(Y,cJ)}function aB(cK,cL,Y){var cJ=I(Math.abs(cK%cL),cp);var X=cL*(1-Y);return cJ===0||cJ>X}aK(at,{type:"numeric",min:0,max:1,vertical:true,majorGridLines:{visible:true,width:1,color:D},labels:{format:"#.####################"},zIndex:1});var ce=N.extend({init:function(Y,cM,cO,cL){var cK=ak(Y);var X=ak(cM);var cN=cL.intl;var cJ=cO||{};cJ=F(cJ||{},{min:cx(cN,cJ.min),max:cx(cN,cJ.max),axisCrossingValue:bX(cN,cJ.axisCrossingValues||cJ.axisCrossingValue)});cJ=bk(cK,X,cJ);N.fn.init.call(this,cJ,cL);this.seriesMin=cK;this.seriesMax=X;this.totalMin=Z(au(Z(cK)-1,cJ.baseUnit));this.totalMax=Z(ca(Z(X)+1,cJ.baseUnit))},range:function(){var X=this.options;return{min:X.min,max:X.max}},getDivisions:function(X){var Y=this.options;return Math.floor(cg(Y.min,Y.max,Y.baseUnit)/X+1)},getTickPositions:function(cK){var cV=this.options;var cO=cV.vertical;var cR=this.lineBox();var cM=(cO?-1:1)*(cV.reverse?-1:1);var X=cM===1?1:2;var Y=cR[(cO?bZ:b1)+X];var cJ=this.getDivisions(cK);var cT=r(cV.max,cV.min);var cU=cO?cR.height():cR.width();var cN=cU/cT;var cQ=[Y];for(var cP=1;cP<cJ;cP++){var cL=ac(cV.min,cP*cK,cV.baseUnit);var cS=Y+r(cL,cV.min)*cN*cM;cQ.push(I(cS,cq))}return cQ},getMajorTickPositions:function(){return this.getTickPositions(this.options.majorUnit)},getMinorTickPositions:function(){return this.getTickPositions(this.options.minorUnit)},getSlot:function(cJ,X,Y){return at.prototype.getSlot.call(this,ak(cJ),ak(X),Y)},getValue:function(X){var Y=at.prototype.getValue.call(this,X);return Y!==null?ak(Y):null},labelsCount:function(){return this.getDivisions(this.options.majorUnit)},createAxisLabel:function(cK,X){var cJ=this.options;var cN=cK*cJ.majorUnit;var Y=cJ.min;if(cN>0){Y=ac(Y,cN,cJ.baseUnit)}var cL=X.dateFormats[cJ.baseUnit];X.format=X.format||cL;var cM=this.axisLabelText(Y,null,X);return new b6(Y,cM,cK,null,X)},translateRange:function(cP,cK){var cS=this.options;var cM=cS.baseUnit;var cQ=cS.weekStartDay;var cL=this.lineBox();var cR=cS.vertical?cL.height():cL.width();var cJ=this.range();var X=cR/r(cJ.max,cJ.min);var Y=I(cP/X,cp);var cO=aI(cS.min,Y);var cN=aI(cS.max,Y);if(!cK){cO=ac(cO,0,cM,cQ);cN=ac(cN,0,cM,cQ)}return{min:cO,max:cN}},scaleRange:function(cN){var cK=this.options;var cM=cK.min;var cL=cK.max;var X=Math.abs(cN);while(X--){var Y=r(cM,cL);var cJ=Math.round(Y*0.1);if(cN<0){cM=aI(cM,cJ);cL=aI(cL,-cJ)}else{cM=aI(cM,-cJ);cL=aI(cL,cJ)}}return{min:cM,max:cL}},shouldRenderNote:function(Y){var X=this.range();return ap(Y,X.min)>=0&&ap(Y,X.max)<=0},pan:function(cJ){var X=this.translateRange(cJ,true);var Y=this.limitRange(Z(X.min),Z(X.max),this.totalMin,this.totalMax);if(Y){return{min:ak(Y.min),max:ak(Y.max)}}},pointsRange:function(cM,cJ){var cK=this.getValue(cM);var Y=this.getValue(cJ);var cL=Math.min(cK,Y);var X=Math.max(cK,Y);return{min:ak(cL),max:ak(X)}},zoomRange:function(cK){var Y=this.scaleRange(cK);var cJ=ak(ad(Z(Y.min),this.totalMin,this.totalMax));var X=ak(ad(Z(Y.max),this.totalMin,this.totalMax));return{min:cJ,max:X}}});function bw(Y){var X=bL;if(Y>=ck){X=cw}else{if(Y>=cd){X=bz}else{if(Y>=w){X=a}else{if(Y>=l){X=R}}}}return X}function bk(Y,cO,cW){var cJ=cW.min||Y;var cQ=cW.max||cO;var cT=cW.baseUnit||(cQ&&cJ?bw(aX(cQ,cJ)):bL);var cL=bR[cT];var cU=au(Z(cJ)-1,cT)||ak(cQ);var X=ca(Z(cQ)+1,cT);var cS=cW.majorUnit?cW.majorUnit:undefined;var cN=cS||W(cu(cU.getTime(),X.getTime()),cL)/cL;var cK=cg(cU,X,cT);var cV=W(cK,cN);var cR=cV-cK;var cP=Math.floor(cR/2);var cM=cR-cP;if(!cW.baseUnit){delete cW.baseUnit}cW.baseUnit=cW.baseUnit||cT;cW.min=cW.min||ac(cU,-cP,cT);cW.max=cW.max||ac(X,cM,cT);cW.minorUnit=cW.minorUnit||cN/5;cW.majorUnit=cN;return cW}aK(ce,{type:bH,majorGridLines:{visible:true,width:1,color:D},labels:{dateFormats:bl}});var cA=10;var aq=N.extend({init:function(cJ,cM,cP,cO){var cK=F({majorUnit:cA,min:cJ,max:cM},cP);var X=cK.majorUnit;var Y=bt(cM,X);var cN=aV(cJ,cM,cK);var cL=C(cN,Y,cK,cP);cK.max=cL.max;cK.min=cL.min;cK.minorUnit=cP.minorUnit||I(X-1,cp);N.fn.init.call(this,cK,cO);this.totalMin=aw(cP.min)?Math.min(cN,cP.min):cN;this.totalMax=aw(cP.max)?Math.max(Y,cP.max):Y;this.logMin=I(bT(cL.min,X),cp);this.logMax=I(bT(cL.max,X),cp);this.seriesMin=cJ;this.seriesMax=cM;this.createLabels()},startValue:function(){return this.options.min},getSlot:function(c1,c0,cZ){var cR=this;var cO=cR.options;var cJ=cR.logMin;var cM=cR.logMax;var cV=cO.reverse;var cL=cO.vertical;var cQ=cO.majorUnit;var cY=cL?bZ:b1;var X=this.lineBox();var cW=X[cY+(cV?2:1)];var cS=cL?X.height():X.width();var cX=cV?-1:1;var cU=cX*(cS/(cM-cJ));var cT=new u(X.x1,X.y1,X.x1,X.y1);var cP=c1;var cN=c0;if(!aw(cP)){cP=cN||1}if(!aw(cN)){cN=cP||1}if(cP<=0||cN<=0){return null}if(cZ){cP=Math.max(Math.min(cP,cO.max),cO.min);cN=Math.max(Math.min(cN,cO.max),cO.min)}cP=bT(cP,cQ);cN=bT(cN,cQ);var cK,Y;if(cL){cK=cM-Math.max(cP,cN);Y=cM-Math.min(cP,cN)}else{cK=Math.min(cP,cN)-cJ;Y=Math.max(cP,cN)-cJ}cT[cY+1]=cs(cW+cU*(cV?Y:cK));cT[cY+2]=cs(cW+cU*(cV?cK:Y));return cT},getValue:function(cW){var cO=this;var cL=cO.options;var Y=cO.logMin;var cK=cO.logMax;var cR=cL.reverse;var cJ=cL.vertical;var cM=cL.majorUnit;var X=this.lineBox();var cU=cJ===cR?1:-1;var cS=cU===1?1:2;var cP=cJ?X.height():X.width();var cQ=(cK-Y)/cP;var cX=cJ?bZ:b1;var cT=X[cX+cS];var cN=cU*(cW[cX]-cT);var cY=cN*cQ;if(cN<0||cN>cP){return null}var cV=Y+cY;return I(Math.pow(cM,cV),cp)},range:function(){var X=this.options;return{min:X.min,max:X.max}},scaleRange:function(cJ){var X=this.options.majorUnit;var Y=-cJ;return{min:Math.pow(X,this.logMin-Y),max:Math.pow(X,this.logMax+Y)}},translateRange:function(cQ){var cJ=this;var cS=cJ.options;var X=cJ.logMin;var cN=cJ.logMax;var cP=cS.reverse;var cL=cS.vertical;var Y=cS.majorUnit;var cO=this.lineBox();var cR=cL?cO.height():cO.width();var cK=cR/(cN-X);var cM=I(cQ/cK,cp);if((cL||cP)&&!(cL&&cP)){cM=-cM}return{min:Math.pow(Y,X+cM),max:Math.pow(Y,cN+cM)}},labelsCount:function(){var X=Math.floor(this.logMax);var Y=Math.floor(X-this.logMin)+1;return Y},getMajorTickPositions:function(){var X=[];this.traverseMajorTicksPositions(function(Y){X.push(Y)},{step:1,skip:0});return X},createTicks:function(Y){var cQ=this.options;var cL=cQ.majorTicks;var cJ=cQ.minorTicks;var cK=cQ.vertical;var cN=cQ.labels.mirror;var cM=this.lineBox();var cO=[];var cP={vertical:cK};function X(cR,cS){cP.tickX=cN?cM.x2:cM.x2-cS.size;cP.tickY=cN?cM.y1-cS.size:cM.y1;cP.position=cR;Y.append(J(cP,cS))}if(cL.visible){this.traverseMajorTicksPositions(X,cL)}if(cJ.visible){this.traverseMinorTicksPositions(X,cJ)}return cO},createGridLines:function(cJ){var cQ=this.options;var cO=cQ.minorGridLines;var cN=cQ.majorGridLines;var cK=cQ.vertical;var cM=cJ.lineBox();var cP={lineStart:cM[cK?"x1":"y1"],lineEnd:cM[cK?"x2":"y2"],vertical:cK};var cL=[];var X=this.gridLinesVisual();function Y(cR,cS){if(!K(cR,cL)){cP.position=cR;X.append(bE(cP,cS));cL.push(cR)}}if(cN.visible){this.traverseMajorTicksPositions(Y,cN)}if(cO.visible){this.traverseMinorTicksPositions(Y,cO)}return X.children},traverseMajorTicksPositions:function(cQ,cJ){var cK=this._lineOptions();var cP=cK.lineStart;var cL=cK.step;var cM=this;var X=cM.logMin;var cN=cM.logMax;for(var Y=Math.ceil(X)+cJ.skip;Y<=cN;Y+=cJ.step){var cO=I(cP+cL*(Y-X),cp);cQ(cO,cJ)}},traverseMinorTicksPositions:function(cL,cQ){var cW=this;var cN=this.options;var cU=cN.min;var cV=cN.max;var cY=cN.minorUnit;var cM=cN.majorUnit;var X=this._lineOptions();var cS=X.lineStart;var cO=X.step;var c0=this;var Y=c0.logMin;var cJ=c0.logMax;var cK=Math.floor(Y);for(var cP=cK;cP<cJ;cP++){var cZ=cW._minorIntervalOptions(cP);for(var cR=cQ.skip;cR<cY;cR+=cQ.step){var cT=cZ.value+cR*cZ.minorStep;if(cT>cV){break}if(cT>=cU){var cX=I(cS+cO*(bT(cT,cM)-Y),cp);cL(cX,cQ)}}}},createAxisLabel:function(Y,X){var cJ=Math.ceil(this.logMin+Y);var cK=Math.pow(this.options.majorUnit,cJ);var cL=this.axisLabelText(cK,null,X);return new b6(cK,cL,Y,null,X)},shouldRenderNote:function(Y){var X=this.range();return X.min<=Y&&Y<=X.max},pan:function(Y){var X=this.translateRange(Y);return this.limitRange(X.min,X.max,this.totalMin,this.totalMax,-Y)},pointsRange:function(cM,cJ){var cK=this.getValue(cM);var Y=this.getValue(cJ);var cL=Math.min(cK,Y);var X=Math.max(cK,Y);return{min:cL,max:X}},zoomRange:function(cQ){var cJ=this;var cR=cJ.options;var cO=cJ.totalMin;var Y=cJ.totalMax;var cP=this.scaleRange(cQ);var cK=ad(cP.min,cO,Y);var cN=ad(cP.max,cO,Y);var X=cR.majorUnit;var cL=cN>cK&&cR.min&&cR.max&&I(bT(cR.max,X)-bT(cR.min,X),cp)<1;var cM=!(cR.min===cO&&cR.max===Y)&&I(bT(cN,X)-bT(cK,X),cp)>=1;if(cL||cM){return{min:cK,max:cN}}},_minorIntervalOptions:function(cK){var cL=this.options;var cJ=cL.minorUnit;var cN=cL.majorUnit;var cM=Math.pow(cN,cK);var X=Math.pow(cN,cK+1);var cO=X-cM;var Y=cO/cJ;return{value:cM,minorStep:Y}},_lineOptions:function(){var cJ=this.options;var cO=cJ.reverse;var cL=cJ.vertical;var cQ=cL?bZ:b1;var cN=this.lineBox();var cK=cL===cO?1:-1;var X=cK===1?1:2;var cP=cL?cN.height():cN.width();var Y=cK*(cP/(this.logMax-this.logMin));var cM=cN[cQ+X];return{step:Y,lineStart:cM,lineBox:cN}}});function C(cL,Y,cM,cJ){var cK=cM.min;var X=cM.max;if(aw(cM.axisCrossingValue)&&cM.axisCrossingValue<=0){ai()}if(!aw(cJ.max)){X=Y}else{if(cJ.max<=0){ai()}}if(!aw(cJ.min)){cK=cL}else{if(cJ.min<=0){ai()}}return{min:cK,max:X}}function aV(cJ,X,Y){var cL=Y.majorUnit;var cK=cJ;if(cJ<=0){cK=X<=1?Math.pow(cL,-2):1}else{if(!Y.narrowRange){cK=Math.pow(cL,Math.floor(bT(cJ,cL)))}}return cK}function bt(X,cK){var cJ=I(bT(X,cK),cp)%1;var Y;if(X<=0){Y=cK}else{if(cJ!==0&&(cJ<0.3||cJ>0.9)){Y=Math.pow(cK,bT(X,cK)+0.2)}else{Y=Math.pow(cK,Math.ceil(bT(X,cK)))}}return Y}function ai(){throw new Error("Non positive values cannot be used for a logarithmic axis")}function bT(Y,X){return Math.log(Y)/Math.log(X)}aK(aq,{type:"log",majorUnit:cA,minorUnit:1,axisCrossingValue:1,vertical:true,majorGridLines:{visible:true,width:1,color:D},zIndex:1,_deferLabels:true});var cH={createGridLines:function(cM){var cJ=this.options;var Y=Math.abs(this.box.center().y-cM.lineBox().y1);var cK=[];var cN=false;var cL,X;if(cJ.majorGridLines.visible){cL=this.majorGridLineAngles(cM);cN=true;cK=this.renderMajorGridLines(cL,Y,cJ.majorGridLines)}if(cJ.minorGridLines.visible){X=this.minorGridLineAngles(cM,cN);s(cK,this.renderMinorGridLines(X,Y,cJ.minorGridLines,cM,cN))}return cK},renderMajorGridLines:function(cJ,X,Y){return this.renderGridLines(cJ,X,Y)},renderMinorGridLines:function(cM,X,cJ,cK,cL){var Y=this.radiusCallback&&this.radiusCallback(X,cK,cL);return this.renderGridLines(cM,X,cJ,Y)},renderGridLines:function(cN,cM,cQ,cO){var cJ={stroke:{width:cQ.width,color:cQ.color,dashType:cQ.dashType}};var X=this.box.center();var Y=new c([X.x,X.y],cM);var cK=this.gridLinesVisual();for(var cL=0;cL<cN.length;cL++){var cP=new aj(cJ);if(cO){Y.radius=cO(cN[cL])}cP.moveTo(Y.center).lineTo(Y.pointAt(cN[cL]+180));cK.append(cP)}return cK.children},gridLineAngles:function(cK,cO,cN,cJ,X){var cL=this;var cM=this.intervals(cO,cN,cJ,X);var cP=cK.options;var Y=cP.visible&&(cP.line||{}).visible!==false;return aD(cM,function(cR){var cQ=cL.intervalAngle(cR);if(!Y||cQ!==90){return cQ}})}};var aW=aQ.extend({range:function(){return{min:0,max:this.options.categories.length}},reflow:function(X){this.box=X;this.reflowLabels()},lineBox:function(){return this.box},reflowLabels:function(){var cK=this;var X=this;var cM=X.labels;var cL=X.options.labels;var cO=cL.skip||0;var Y=cL.step||1;var cN=new u();for(var cJ=0;cJ<cM.length;cJ++){cM[cJ].reflow(cN);var cP=cM[cJ].box;cM[cJ].reflow(cK.getSlot(cO+cJ*Y).adjacentBox(0,cP.width(),cP.height()))}},intervals:function(cS,cJ,cQ,X){if(X===void 0){X=false}var cT=this.options;var cN=cT.categories.length;var cO=cN/cS||1;var cL=360/cO;var cR=cJ||0;var Y=cQ||1;var cP=[];var cK=0;for(var cM=cR;cM<cO;cM+=Y){if(cT.reverse){cK=360-cM*cL}else{cK=cM*cL}cK=I(cK,cq)%360;if(!(X&&K(cK,X))){cP.push(cK)}}return cP},majorIntervals:function(){return this.intervals(1)},minorIntervals:function(){return this.intervals(0.5)},intervalAngle:function(X){return(360+X+this.options.startAngle)%360},majorAngles:function(){var X=this;return aD(this.majorIntervals(),function(Y){return X.intervalAngle(Y)})},createLine:function(){return[]},majorGridLineAngles:function(Y){var X=this.options.majorGridLines;return this.gridLineAngles(Y,1,X.skip,X.step)},minorGridLineAngles:function(cK,cM){var Y=this.options;var X=Y.minorGridLines;var cJ=Y.majorGridLines;var cL=cM?this.intervals(1,cJ.skip,cJ.step):null;return this.gridLineAngles(cK,0.5,X.skip,X.step,cL)},radiusCallback:function(X,cM,cN){if(cM.options.type!==t){var cK=cj(360/(this.options.categories.length*2));var Y=Math.cos(cK)*X;var cL=this.majorAngles();var cJ=function(cO){if(!cN&&K(cO,cL)){return X}return Y};return cJ}},createPlotBands:function(){var cK=this;var cP=this.options.plotBands||[];var cO=this._plotbandGroup=new aM({zIndex:-1});for(var cJ=0;cJ<cP.length;cJ++){var cQ=cP[cJ];var cN=cK.plotBandSlot(cQ);var Y=cK.getSlot(cQ.from);var cM=cQ.from-Math.floor(cQ.from);cN.startAngle+=cM*Y.angle;var cL=Math.ceil(cQ.to)-cQ.to;cN.angle-=(cL+cM)*Y.angle;var X=bp.current.createRing(cN,{fill:{color:cQ.color,opacity:cQ.opacity},stroke:{opacity:cQ.opacity}});cO.append(X)}this.appendVisual(cO)},plotBandSlot:function(X){return this.getSlot(X.from,X.to-1)},getSlot:function(cR,cS){var cT=this.options;var cL=cT.justified;var cM=this.box;var cQ=this.majorAngles();var cN=cQ.length;var cK=360/cN;var X=cR;if(cT.reverse&&!cL){X=(X+1)%cN}X=ad(Math.floor(X),0,cN-1);var Y=cQ[X];if(cL){Y=Y-cK/2;if(Y<0){Y+=360}}var cP=ad(Math.ceil(cS||X),X,cN-1);var cO=cP-X+1;var cJ=cK*cO;return new B(cM.center(),0,cM.height()/2,Y,cJ)},slot:function(cL,cK){var cJ=this.getSlot(cL,cK);var Y=cJ.startAngle+180;var X=Y+cJ.angle;return new cn.Arc([cJ.center.x,cJ.center.y],{startAngle:Y,endAngle:X,radiusX:cJ.radius,radiusY:cJ.radius})},pointCategoryIndex:function(X){var cM=this;var cK=this.options.categories.length;var Y=null;for(var cJ=0;cJ<cK;cJ++){var cL=cM.getSlot(cJ);if(cL.containsPoint(X)){Y=cJ;break}}return Y}});aK(aW,{startAngle:90,labels:{margin:a5(10)},majorGridLines:{visible:true},justified:true});F(aW.prototype,cH);var q=N.extend({init:function(X,Y){N.fn.init.call(this,X,Y);var cJ=this.options;cJ.minorUnit=cJ.minorUnit||cJ.majorUnit/2},getDivisions:function(X){return at.prototype.getDivisions.call(this,X)-1},reflow:function(X){this.box=X;this.reflowLabels()},reflowLabels:function(){var cK=this;var X=this;var cR=X.options;var cM=X.labels;var cL=X.options.labels;var cP=cL.skip||0;var Y=cL.step||1;var cN=new u();var cO=this.intervals(cR.majorUnit,cP,Y);for(var cJ=0;cJ<cM.length;cJ++){cM[cJ].reflow(cN);var cQ=cM[cJ].box;cM[cJ].reflow(cK.getSlot(cO[cJ]).adjacentBox(0,cQ.width(),cQ.height()))}},lineBox:function(){return this.box},intervals:function(cR,cK,cP,X){if(X===void 0){X=false}var cL=this.options.min;var Y=this.getDivisions(cR);var cO=[];var cQ=cK||0;var cJ=cP||1;for(var cM=cQ;cM<Y;cM+=cJ){var cN=(360+cL+cM*cR)%360;if(!(X&&K(cN,X))){cO.push(cN)}}return cO},majorIntervals:function(){return this.intervals(this.options.majorUnit)},minorIntervals:function(){return this.intervals(this.options.minorUnit)},intervalAngle:function(X){return(540-X-this.options.startAngle)%360},createLine:function(){return[]},majorGridLineAngles:function(Y){var X=this.options.majorGridLines;return this.gridLineAngles(Y,this.options.majorUnit,X.skip,X.step)},minorGridLineAngles:function(cK,cM){var Y=this.options;var X=Y.minorGridLines;var cJ=Y.majorGridLines;var cL=cM?this.intervals(Y.majorUnit,cJ.skip,cJ.step):null;return this.gridLineAngles(cK,Y.minorUnit,X.skip,X.step,cL)},plotBandSlot:function(X){return this.getSlot(X.from,X.to)},getSlot:function(cO,cN){var Y=this;var cP=Y.options;var cL=Y.box;var cM=cP.startAngle;var X=ad(cO,cP.min,cP.max);var cJ=ad(cN||X,X,cP.max);if(cP.reverse){X*=-1;cJ*=-1}X=(540-X-cM)%360;cJ=(540-cJ-cM)%360;if(cJ<X){var cK=X;X=cJ;cJ=cK}return new B(cL.center(),0,cL.height()/2,X,cJ-X)},slot:function(cM,cN){if(cN===void 0){cN=cM}var cP=this.options;var X=360-cP.startAngle;var cO=this.getSlot(cM,cN);var cJ=Math.min(cM,cN);var cL=Math.max(cM,cN);var cK,Y;if(cP.reverse){cK=cJ;Y=cL}else{cK=360-cL;Y=360-cJ}cK=(cK+X)%360;Y=(Y+X)%360;return new cn.Arc([cO.center.x,cO.center.y],{startAngle:cK,endAngle:Y,radiusX:cO.radius,radiusY:cO.radius})},getValue:function(Y){var cL=this.options;var X=this.box.center();var cK=Y.x-X.x;var cJ=Y.y-X.y;var cM=Math.round(bC(Math.atan2(cJ,cK)));var cN=cL.startAngle;if(!cL.reverse){cM*=-1;cN*=-1}return(cM+cN+360)%360},valueRange:function(){return{min:0,max:Math.PI*2}}});aK(q,{type:"polar",startAngle:0,reverse:false,majorUnit:60,min:0,max:360,labels:{margin:a5(10)},majorGridLines:{color:D,visible:true,width:1},minorGridLines:{color:"#aaa"}});F(q.prototype,cH,{createPlotBands:aW.prototype.createPlotBands,majorAngles:aW.prototype.majorAngles,range:at.prototype.range,labelsCount:at.prototype.labelsCount,createAxisLabel:at.prototype.createAxisLabel});var al={options:{majorGridLines:{visible:true}},createPlotBands:function(){var cN=this;var Y=this.options;var cP=Y.majorGridLines.type;var cT=Y.plotBands;if(cT===void 0){cT=[]}var cJ=this.plotArea.polarAxis;var cR=cJ.majorAngles();var X=cJ.box.center();var cS=this._plotbandGroup=new aM({zIndex:-1});for(var cM=0;cM<cT.length;cM++){var cU=cT[cM];var cK={fill:{color:cU.color,opacity:cU.opacity},stroke:{opacity:cU.opacity}};var cQ=cN.getSlot(cU.from,cU.to,true);var cL=new B(X,X.y-cQ.y2,X.y-cQ.y1,0,360);var cO=void 0;if(cP===t){cO=bp.current.createRing(cL,cK)}else{cO=aj.fromPoints(cN.plotBandPoints(cL,cR),cK).close()}cS.append(cO)}this.appendVisual(cS)},plotBandPoints:function(cK,cO){var cJ=[];var Y=[];var X=[cK.center.x,cK.center.y];var cN=new c(X,cK.innerRadius);var cM=new c(X,cK.radius);for(var cL=0;cL<cO.length;cL++){cJ.push(cN.pointAt(cO[cL]+180));Y.push(cM.pointAt(cO[cL]+180))}cJ.reverse();cJ.push(cJ[0]);Y.push(Y[0]);return Y.concat(cJ)},createGridLines:function(cM){var cJ=this.options;var cN=this.radarMajorGridLinePositions();var cL=cM.majorAngles();var X=cM.box.center();var cK=[];if(cJ.majorGridLines.visible){cK=this.renderGridLines(X,cN,cL,cJ.majorGridLines)}if(cJ.minorGridLines.visible){var Y=this.radarMinorGridLinePositions();s(cK,this.renderGridLines(X,Y,cL,cJ.minorGridLines))}return cK},renderGridLines:function(Y,cQ,cP,cT){var cK={stroke:{width:cT.width,color:cT.color,dashType:cT.dashType}};var cR=cT.skip;if(cR===void 0){cR=0}var cM=cT.step;if(cM===void 0){cM=0}var cL=this.gridLinesVisual();for(var cN=cR;cN<cQ.length;cN+=cM){var X=Y.y-cQ[cN];if(X>0){var cJ=new c([Y.x,Y.y],X);if(cT.type===t){cL.append(new cC.Circle(cJ,cK))}else{var cS=new aj(cK);for(var cO=0;cO<cP.length;cO++){cS.lineTo(cJ.pointAt(cP[cO]+180))}cS.close();cL.append(cS)}}}return cL.children},getValue:function(cS){var cO=this.lineBox();var cL=this.plotArea.polarAxis;var cR=cL.majorAngles();var X=cL.box.center();var cP=cS.distanceTo(X);var Y=cP;if(this.options.majorGridLines.type!==t&&cR.length>1){var cU=cS.x-X.x;var cT=cS.y-X.y;var cJ=(bC(Math.atan2(cT,cU))+540)%360;cR.sort(function(cW,cV){return bm(cW,cJ)-bm(cV,cJ)});var cK=bm(cR[0],cR[1])/2;var cN=bm(cJ,cR[0]);var cM=90-cK;var cQ=180-cN-cM;Y=cP*(Math.sin(cj(cQ))/Math.sin(cj(cM)))}return this.axisType().prototype.getValue.call(this,new cf(cO.x1,cO.y2-Y))}};function bm(Y,X){return 180-Math.abs(Math.abs(Y-X)-180)}var b3=at.extend({radarMajorGridLinePositions:function(){return this.getTickPositions(this.options.majorUnit)},radarMinorGridLinePositions:function(){var Y=this.options;var X=0;if(Y.majorGridLines.visible){X=Y.majorUnit}return this.getTickPositions(Y.minorUnit,X)},axisType:function(){return at}});F(b3.prototype,al);var a3=aq.extend({radarMajorGridLinePositions:function(){var X=[];this.traverseMajorTicksPositions(function(Y){X.push(Y)},this.options.majorGridLines);return X},radarMinorGridLinePositions:function(){var X=[];this.traverseMinorTicksPositions(function(Y){X.push(Y)},this.options.minorGridLines);return X},axisType:function(){return aq}});F(a3.prototype,al);var bo=0.333;var ar=0.01;var b7=bg.extend({init:function(X){this.closed=X},process:function(c0){var cZ=this;var cV=c0.slice(0);var cU=[];var cK=this.closed;var cL=cV.length;if(cL>2){this.removeDuplicates(0,cV);cL=cV.length}if(cL<2||cL===2&&cV[0].equals(cV[1])){return cU}var cJ=cV[0];var Y=cV[1];var X=cV[2];cU.push(new x(cJ));while(cJ.equals(cV[cL-1])){cK=true;cV.pop();cL--}if(cL===2){var cP=this.tangent(cJ,Y,b1,bZ);aN(cU).controlOut(this.firstControlPoint(cP,cJ,Y,b1,bZ));cU.push(new x(Y,this.secondControlPoint(cP,cJ,Y,b1,bZ)));return cU}var cW,cM;if(cK){cJ=cV[cL-1];Y=cV[0];X=cV[1];var cS=this.controlPoints(cJ,Y,X);cW=cS[1];cM=cS[0]}else{var cO=this.tangent(cJ,Y,b1,bZ);cW=this.firstControlPoint(cO,cJ,Y,b1,bZ)}var cY=cW;for(var cQ=0;cQ<=cL-3;cQ++){cZ.removeDuplicates(cQ,cV);cL=cV.length;if(cQ+3<=cL){cJ=cV[cQ];Y=cV[cQ+1];X=cV[cQ+2];var cT=cZ.controlPoints(cJ,Y,X);aN(cU).controlOut(cY);cY=cT[1];var cX=cT[0];cU.push(new x(Y,cX))}}if(cK){cJ=cV[cL-2];Y=cV[cL-1];X=cV[0];var cR=this.controlPoints(cJ,Y,X);aN(cU).controlOut(cY);cU.push(new x(Y,cR[0]));aN(cU).controlOut(cR[1]);cU.push(new x(X,cM))}else{var cN=this.tangent(Y,X,b1,bZ);aN(cU).controlOut(cY);cU.push(new x(X,this.secondControlPoint(cN,Y,X,b1,bZ)))}return cU},removeDuplicates:function(X,Y){while(Y[X+1]&&(Y[X].equals(Y[X+1])||Y[X+1].equals(Y[X+2]))){Y.splice(X+1,1)}},invertAxis:function(cM,cL,cK){var X=false;if(cM.x===cL.x){X=true}else{if(cL.x===cK.x){if(cL.y<cK.y&&cM.y<=cL.y||cK.y<cL.y&&cL.y<=cM.y){X=true}}else{var cJ=this.lineFunction(cM,cL);var Y=this.calculateFunction(cJ,cK.x);if(!(cM.y<=cL.y&&cK.y<=Y)&&!(cL.y<=cM.y&&cK.y>=Y)){X=true}}}return X},isLine:function(cL,cK,cJ){var Y=this.lineFunction(cL,cK);var X=this.calculateFunction(Y,cJ.x);return cL.x===cK.x&&cK.x===cJ.x||I(X,1)===I(cJ.y,1)},lineFunction:function(cK,cJ){var Y=(cJ.y-cK.y)/(cJ.x-cK.x);var X=cK.y-Y*cK.x;return[X,Y]},controlPoints:function(cS,cR,cQ){var cL=b1;var cP=bZ;var Y=false;var cO=false;var cT;if(this.isLine(cS,cR,cQ)){cT=this.tangent(cS,cR,b1,bZ)}else{var X={x:this.isMonotonicByField(cS,cR,cQ,b1),y:this.isMonotonicByField(cS,cR,cQ,bZ)};if(X.x&&X.y){cT=this.tangent(cS,cQ,b1,bZ);Y=true}else{if(this.invertAxis(cS,cR,cQ)){cL=bZ;cP=b1}if(X[cL]){cT=0}else{var cJ;if(cQ[cP]<cS[cP]&&cS[cP]<=cR[cP]||cS[cP]<cQ[cP]&&cR[cP]<=cS[cP]){cJ=aT((cQ[cP]-cS[cP])*(cR[cL]-cS[cL]))}else{cJ=-aT((cQ[cL]-cS[cL])*(cR[cP]-cS[cP]))}cT=ar*cJ;cO=true}}}var cM=this.secondControlPoint(cT,cS,cR,cL,cP);if(cO){var cK=cL;cL=cP;cP=cK}var cN=this.firstControlPoint(cT,cR,cQ,cL,cP);if(Y){this.restrictControlPoint(cS,cR,cM,cT);this.restrictControlPoint(cR,cQ,cN,cT)}return[cM,cN]},restrictControlPoint:function(cK,cJ,Y,X){if(cK.y<cJ.y){if(cJ.y<Y.y){Y.x=cK.x+(cJ.y-cK.y)/X;Y.y=cJ.y}else{if(Y.y<cK.y){Y.x=cJ.x-(cJ.y-cK.y)/X;Y.y=cK.y}}}else{if(Y.y<cJ.y){Y.x=cK.x-(cK.y-cJ.y)/X;Y.y=cJ.y}else{if(cK.y<Y.y){Y.x=cJ.x+(cK.y-cJ.y)/X;Y.y=cK.y}}}},tangent:function(cN,cL,cJ,Y){var X=cL[cJ]-cN[cJ];var cM=cL[Y]-cN[Y];var cK;if(X===0){cK=0}else{cK=cM/X}return cK},isMonotonicByField:function(cK,cJ,Y,X){return Y[X]>cJ[X]&&cJ[X]>cK[X]||Y[X]<cJ[X]&&cJ[X]<cK[X]},firstControlPoint:function(cM,cO,cL,cK,Y){var cJ=cO[cK];var X=cL[cK];var cN=(X-cJ)*bo;return this.point(cJ+cN,cO[Y]+cN*cM,cK,Y)},secondControlPoint:function(cM,cO,cL,cK,Y){var cJ=cO[cK];var X=cL[cK];var cN=(X-cJ)*bo;return this.point(X-cN,cL[Y]-cN*cM,cK,Y)},point:function(cK,Y,cL,cJ){var X=new cn.Point();X[cL]=cK;X[cJ]=Y;return X},calculateFunction:function(cK,Y){var cL=cK.length;var X=0;for(var cJ=0;cJ<cL;cJ++){X+=Math.pow(Y,cJ)*cK[cJ]}return X}});function aT(X){return X<=0?-1:1}H.Gradients=bi;kendo.deepExtend(kendo.dataviz,{constants:aU,services:ao,autoMajorUnit:cu,Point:cf,Box:u,Ring:B,Sector:cI,ShapeBuilder:bp,ShapeElement:am,ChartElement:m,BoxElement:bA,RootElement:V,FloatElement:aO,Text:bY,TextBox:a8,Title:b,AxisLabel:b6,Axis:N,Note:bQ,CategoryAxis:aQ,DateCategoryAxis:bS,DateValueAxis:ce,NumericAxis:at,LogarithmicAxis:aq,PolarAxis:q,RadarCategoryAxis:aW,RadarNumericAxis:b3,RadarLogarithmicAxis:a3,CurveProcessor:b7,rectToBox:bD,addClass:P,removeClass:bG,alignPathToPixel:aa,clockwise:av,deepExtend:F,elementStyles:h,getSpacing:a5,getter:ab,grep:cc,hasClasses:aF,inArray:K,interpolateValue:ah,InstanceObserver:bu,isArray:a4,isFunction:y,isNumber:aJ,isObject:cG,isString:b5,map:aD,mousewheelDelta:L,FontLoader:bd,setDefaultOptions:aK,sparseArrayLimits:z,styleValue:Q,append:s,bindEvents:a2,Class:bg,defined:aw,deg:bC,elementOffset:ag,elementSize:cB,eventElement:b0,eventCoordinates:b8,last:aN,limitValue:ad,logToConsole:kendo.logToConsole,objectKey:cb,rad:cj,round:I,unbindEvents:aL,valueOrDefault:aP,absoluteDateDiff:aX,addDuration:ac,addTicks:aI,ceilDate:ca,dateComparer:ap,dateDiff:r,dateEquals:cD,dateIndex:j,duration:cg,floorDate:au,lteDateIndex:ba,startOfWeek:T,toDate:ak,parseDate:cx,parseDates:bX,toTime:Z})}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/core/core",["dataviz/core/kendo-core"],a)}(function(){(function(c){var d=kendo.dataviz;var b=d.services;var a=kendo.drawing;d.ExportMixin={extend:function(e,f){if(!e.exportVisual){throw new Error("Mixin target has no exportVisual method defined.")}e.exportSVG=this.exportSVG;e.exportImage=this.exportImage;e.exportPDF=this.exportPDF;if(!f){e.svg=this.svg;e.imageDataURL=this.imageDataURL}},exportSVG:function(e){return a.exportSVG(this.exportVisual(),e)},exportImage:function(e){return a.exportImage(this.exportVisual(e),e)},exportPDF:function(e){return a.exportPDF(this.exportVisual(),e)},svg:function(){if(a.svg.Surface){return a.svg.exportGroup(this.exportVisual())}else{throw new Error("SVG Export failed. Unable to export instantiate kendo.drawing.svg.Surface")}},imageDataURL:function(){if(!kendo.support.canvas){return null}if(a.canvas.Surface){var f=c("<div />").css({display:"none",width:this.element.width(),height:this.element.height()}).appendTo(document.body);var e=new a.canvas.Surface(f[0]);e.draw(this.exportVisual());var g=e._rootElement.toDataURL();e.destroy();f.remove();return g}else{throw new Error("Image Export failed. Unable to export instantiate kendo.drawing.canvas.Surface")}}};b.IntlService.register({format:function(e){return kendo.format.apply(null,[e].concat(Array.prototype.slice.call(arguments,1)))},toString:kendo.toString,parseDate:kendo.parseDate});b.TemplateService.register({compile:kendo.template});d.Point2D=d.Point;d.Box2D=d.Box;d.mwDelta=function(f){return d.mousewheelDelta(f.originalEvent)}}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.dataviz.core",["dataviz/core/kendo-core","dataviz/core/core"],a)}(function(){var a={id:"dataviz.core",name:"Core",description:"The DataViz core functions",category:"dataviz",depends:["core","drawing"],hidden:true}},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/themes/chart-base-theme",["kendo.dataviz.core"],a)}(function(){(function(){(function(F){var o=1.5;var l=0.4;var f="#000";var c="Arial, Helvetica, sans-serif";var k="11px "+c;var j="12px "+c;var g="16px "+c;var y="transparent";var D="#fff";var q=function(){return{icon:{border:{width:1}},label:{font:j,padding:3},line:{length:10,width:2},visible:true}};var C=function(){return{labels:{font:j},notes:q(),title:{font:g,margin:5}}};var a=function(){return{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:false},opacity:0.4}};var t=function(){return{gap:o,spacing:l}};var m=function(){return{outliersField:"",meanField:"",border:{_brightness:0.8,width:1},downColor:D,gap:1,highlight:{border:{opacity:1,width:2},whiskers:{width:3},mean:{width:2},median:{width:2}},mean:{width:2},median:{width:2},spacing:0.3,whiskers:{width:2}}};var h=function(){return{border:{width:0},labels:{background:y},opacity:0.6}};var A=function(){return{gap:o,spacing:l,target:{color:"#ff0000"}}};var v=function(){return{border:{_brightness:0.8,width:1},downColor:D,gap:1,highlight:{border:{opacity:1,width:2},line:{width:2}},line:{color:f,width:1},spacing:0.3}};var p=function(){return{gap:o,spacing:l}};var n=function(){return{margin:1}};var H=function(){return{width:2}};var B=function(){return{gap:1,highlight:{line:{opacity:1,width:3}},line:{width:1},spacing:0.3}};var s=function(){return{line:{opacity:1,width:0},markers:{size:6,visible:false},opacity:0.5}};var r=function(){return{markers:{visible:false},width:2}};var u=function(){return{gap:o,spacing:l}};var z=function(){return{gap:o,spacing:l}};var i=function(){return{width:1}};var x=function(){return{gap:0.5,line:{color:f,width:1},spacing:l}};var w=function(){return{labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}}}};var e=function(){return{labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}}}};var E=function(I){return{visible:true,labels:{font:k},overlay:I.gradients?{}:{gradient:"none"},area:a(),bar:t(),boxPlot:m(),bubble:h(),bullet:A(),candlestick:v(),column:p(),pie:w(),donut:n(),funnel:e(),horizontalWaterfall:x(),line:H(),notes:q(),ohlc:B(),radarArea:s(),radarLine:r(),polarArea:s(),polarLine:r(),rangeBar:u(),rangeColumn:z(),scatterLine:i(),verticalArea:a(),verticalBoxPlot:m(),verticalBullet:A(),verticalLine:H(),waterfall:x()}};var G=function(){return{font:g}};var b=function(){return{labels:{font:j}}};var d=function(I){if(I===void 0){I={}}return{axisDefaults:C(),categoryAxis:{majorGridLines:{visible:true}},navigator:{pane:{height:90,margin:{top:10}}},seriesDefaults:E(I),title:G(),legend:b()}};kendo.deepExtend(F,{chartBaseTheme:d})}(this.kendo.dataviz=this.kendo.dataviz||{}))}())},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/themes/auto-theme",["kendo.dataviz.core"],a)}(function(){var b;function a(d){if(!d&&b){return b}var f={chart:kendo.dataviz.chartBaseTheme()};var i=$('<div style="display: none">  <div class="k-var--accent"></div>  <div class="k-var--base"></div>  <div class="k-var--background"></div>  <div class="k-var--normal-background"></div>  <div class="k-var--normal-text-color"></div>  <div class="k-var--hover-background"></div>  <div class="k-var--hover-text-color"></div>  <div class="k-var--selected-background"></div>  <div class="k-var--selected-text-color"></div>  <div class="k-var--chart-error-bars-background"></div>  <div class="k-var--chart-notes-background"></div>  <div class="k-var--chart-notes-border"></div>  <div class="k-var--chart-notes-lines"></div>  <div class="k-var--chart-crosshair-background"></div>  <div class="k-var--chart-inactive"></div>  <div class="k-var--chart-major-lines"></div>  <div class="k-var--chart-minor-lines"></div>  <div class="k-var--chart-area-opacity"></div>  <div class="k-widget">      <div class="k-var--chart-font"></div>      <div class="k-var--chart-title-font"></div>      <div class="k-var--chart-label-font"></div>  </div>  <div class="k-var--series">    <div class="k-var--series-a"></div>    <div class="k-var--series-b"></div>    <div class="k-var--series-c"></div>    <div class="k-var--series-d"></div>    <div class="k-var--series-e"></div>    <div class="k-var--series-f"></div>  </div></div>').appendTo(document.body);function h(l,m){j(l,g(m,"backgroundColor"))}function g(m,l){return i.find(".k-var--"+m).css(l)}function j(p,n){var l=f;var o=p.split(".");var m=o.shift();while(o.length>0){l=l[m]=l[m]||{};m=o.shift()}l[m]=n}(function k(){h("chart.axisDefaults.crosshair.color","chart-crosshair-background");h("chart.axisDefaults.labels.color","normal-text-color");h("chart.axisDefaults.line.color","chart-major-lines");h("chart.axisDefaults.majorGridLines.color","chart-major-lines");h("chart.axisDefaults.minorGridLines.color","chart-minor-lines");h("chart.axisDefaults.notes.icon.background","chart-notes-background");h("chart.axisDefaults.notes.icon.border.color","chart-notes-border");h("chart.axisDefaults.notes.line.color","chart-notes-lines");h("chart.axisDefaults.title.color","normal-text-color");h("chart.legend.inactiveItems.labels.color","chart-inactive");h("chart.legend.inactiveItems.markers.color","chart-inactive");h("chart.legend.labels.color","normal-text-color");h("chart.seriesDefaults.boxPlot.downColor","chart-major-lines");h("chart.seriesDefaults.boxPlot.mean.color","base");h("chart.seriesDefaults.boxPlot.median.color","base");h("chart.seriesDefaults.boxPlot.whiskers.color","accent");h("chart.seriesDefaults.bullet.target.color","accent");h("chart.seriesDefaults.candlestick.downColor","normal-text-color");h("chart.seriesDefaults.candlestick.line.color","normal-text-color");h("chart.seriesDefaults.errorBars.color","chart-error-bars-background");h("chart.seriesDefaults.horizontalWaterfall.line.color","chart-major-lines");h("chart.seriesDefaults.icon.border.color","chart-major-lines");h("chart.seriesDefaults.labels.background","background");h("chart.seriesDefaults.labels.color","normal-text-color");h("chart.seriesDefaults.notes.icon.background","chart-notes-background");h("chart.seriesDefaults.notes.icon.border.color","chart-notes-border");h("chart.seriesDefaults.notes.line.color","chart-notes-lines");h("chart.seriesDefaults.verticalBoxPlot.downColor","chart-major-lines");h("chart.seriesDefaults.verticalBoxPlot.mean.color","base");h("chart.seriesDefaults.verticalBoxPlot.median.color","base");h("chart.seriesDefaults.verticalBoxPlot.whiskers.color","accent");h("chart.seriesDefaults.verticalBullet.target.color","accent");h("chart.seriesDefaults.waterfall.line.color","chart-major-lines");h("chart.title.color","normal-text-color");j("chart.seriesDefaults.labels.opacity",g("chart-area-opacity","opacity"))}());(function e(){function l(p){return g(p,"fontSize")+" "+g(p,"fontFamily")}var n=l("chart-font");var m=l("chart-title-font");var o=l("chart-label-font");j("chart.axisDefaults.labels.font",o);j("chart.axisDefaults.notes.label.font",n);j("chart.axisDefaults.title.font",n);j("chart.legend.labels.font",n);j("chart.seriesDefaults.labels.font",o);j("chart.seriesDefaults.notes.label.font",n);j("chart.title.font",m)}());(function c(){function o(p){return p.toLowerCase().charCodeAt(0)-"a".charCodeAt(0)}function m(p){return o(p.match(/series-([a-z])$/)[1])}var l=$(".k-var--series div").toArray();var n=l.reduce(function(p,q){var r=m(q.className);p[r]=$(q).css("backgroundColor");return p},[]);j("chart.seriesColors",n)}());i.remove();b=f;return f}kendo.dataviz.autoTheme=a},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/themes/themes",["dataviz/themes/chart-base-theme"],a)}(function(){(function(f){var g=window.kendo,i=g.dataviz.ui,b=g.deepExtend;var n="#000",j="Arial,Helvetica,sans-serif",d="12px "+j,c="#fff";var l=g.dataviz.chartBaseTheme({gradients:true});var a={scale:{labels:{font:d}}};var k={shapeDefaults:{hover:{opacity:0.2},stroke:{width:0}},editable:{resize:{handles:{width:7,height:7}}},selectable:{stroke:{width:1,dashType:"dot"}},connectionDefaults:{stroke:{width:2},selection:{handles:{width:8,height:8}},editable:{tools:["edit","delete"]}}};var h=i.themes,m=i.registerTheme=function(q,p){var o={};o.chart=b({},l,p.chart);o.gauge=b({},a,p.gauge);o.diagram=b({},k,p.diagram);o.treeMap=b({},p.treeMap);var r=o.chart.seriesDefaults;r.verticalLine=b({},r.line);r.verticalArea=b({},r.area);r.verticalBoxPlot=b({},r.boxPlot);r.polarArea=b({},r.radarArea);r.polarLine=b({},r.radarLine);h[q]=o};m("black",{chart:{title:{color:c},legend:{labels:{color:c},inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}},seriesDefaults:{labels:{color:c},errorBars:{color:c},notes:{icon:{background:"#3b3b3b",border:{color:"#8e8e8e"}},label:{color:c},line:{color:"#8e8e8e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#3d3d3d"}},scatter:{markers:{background:"#3d3d3d"}},scatterLine:{markers:{background:"#3d3d3d"}},waterfall:{line:{color:"#8e8e8e"}},horizontalWaterfall:{line:{color:"#8e8e8e"}},candlestick:{downColor:"#555",line:{color:c},border:{_brightness:1.5,opacity:1},highlight:{border:{color:c,opacity:0.2}}},ohlc:{line:{color:c}}},chartArea:{background:"#3d3d3d"},seriesColors:["#0081da","#3aafff","#99c900","#ffeb3d","#b20753","#ff4195"],axisDefaults:{line:{color:"#8e8e8e"},labels:{color:c},majorGridLines:{color:"#545454"},minorGridLines:{color:"#454545"},title:{color:c},crosshair:{color:"#8e8e8e"},notes:{icon:{background:"#3b3b3b",border:{color:"#8e8e8e"}},label:{color:c},line:{color:"#8e8e8e"}}}},gauge:{pointer:{color:"#0070e4"},scale:{rangePlaceholderColor:"#1d1d1d",labels:{color:c},minorTicks:{color:c},majorTicks:{color:c},line:{color:c}}},diagram:{shapeDefaults:{fill:{color:"#0066cc"},connectorDefaults:{fill:{color:c},stroke:{color:"#384049"},hover:{fill:{color:"#3d3d3d"},stroke:{color:"#efefef"}}},content:{color:c}},editable:{resize:{handles:{fill:{color:"#3d3d3d"},stroke:{color:c},hover:{fill:{color:c},stroke:{color:c}}}},rotate:{thumb:{stroke:{color:c},fill:{color:c}}}},selectable:{stroke:{color:c}},connectionDefaults:{stroke:{color:c},content:{color:c},selection:{handles:{fill:{color:"#3d3d3d"},stroke:{color:"#efefef"}}}}},treeMap:{colors:[["#0081da","#314b5c"],["#3aafff","#3c5464"],["#99c900","#4f5931"],["#ffeb3d","#64603d"],["#b20753","#543241"],["#ff4195","#643e4f"]]}});m("blueopal",{chart:{title:{color:"#293135"},legend:{labels:{color:"#293135"},inactiveItems:{labels:{color:"#27A5BA"},markers:{color:"#27A5BA"}}},seriesDefaults:{labels:{color:n,background:c,opacity:0.5},errorBars:{color:"#293135"},candlestick:{downColor:"#c4d0d5",line:{color:"#9aabb2"}},waterfall:{line:{color:"#9aabb2"}},horizontalWaterfall:{line:{color:"#9aabb2"}},notes:{icon:{background:"transparent",border:{color:"#9aabb2"}},label:{color:"#293135"},line:{color:"#9aabb2"}}},seriesColors:["#0069a5","#0098ee","#7bd2f6","#ffb800","#ff8517","#e34a00"],axisDefaults:{line:{color:"#9aabb2"},labels:{color:"#293135"},majorGridLines:{color:"#c4d0d5"},minorGridLines:{color:"#edf1f2"},title:{color:"#293135"},crosshair:{color:"#9aabb2"},notes:{icon:{background:"transparent",border:{color:"#9aabb2"}},label:{color:"#293135"},line:{color:"#9aabb2"}}}},gauge:{pointer:{color:"#005c83"},scale:{rangePlaceholderColor:"#daecf4",labels:{color:"#293135"},minorTicks:{color:"#293135"},majorTicks:{color:"#293135"},line:{color:"#293135"}}},diagram:{shapeDefaults:{fill:{color:"#7ec6e3"},connectorDefaults:{fill:{color:"#003f59"},stroke:{color:c},hover:{fill:{color:c},stroke:{color:"#003f59"}}},content:{color:"#293135"}},editable:{resize:{handles:{fill:{color:c},stroke:{color:"#003f59"},hover:{fill:{color:"#003f59"},stroke:{color:"#003f59"}}}},rotate:{thumb:{stroke:{color:"#003f59"},fill:{color:"#003f59"}}}},selectable:{stroke:{color:"#003f59"}},connectionDefaults:{stroke:{color:"#003f59"},content:{color:"#293135"},selection:{handles:{fill:{color:"#3d3d3d"},stroke:{color:"#efefef"}}}}},treeMap:{colors:[["#0069a5","#bad7e7"],["#0098ee","#b9e0f5"],["#7bd2f6","#ceeaf6"],["#ffb800","#e6e3c4"],["#ff8517","#e4d8c8"],["#e34a00","#ddccc2"]]}});m("highcontrast",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#66465B"},markers:{color:"#66465B"}}},seriesDefaults:{labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#ffffff"}},label:{color:"#ffffff"},line:{color:"#ffffff"}},pie:{overlay:{gradient:"sharpGlass"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#2c232b"}},scatter:{markers:{background:"#2c232b"}},scatterLine:{markers:{background:"#2c232b"}},area:{opacity:0.5},waterfall:{line:{color:"#ffffff"}},horizontalWaterfall:{line:{color:"#ffffff"}},candlestick:{downColor:"#664e62",line:{color:"#ffffff"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#ffffff",opacity:1}}},ohlc:{line:{color:"#ffffff"}}},chartArea:{background:"#2c232b"},seriesColors:["#a7008f","#ffb800","#3aafff","#99c900","#b20753","#ff4195"],axisDefaults:{line:{color:"#ffffff"},labels:{color:"#ffffff"},majorGridLines:{color:"#664e62"},minorGridLines:{color:"#4f394b"},title:{color:"#ffffff"},crosshair:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#ffffff"}},label:{color:"#ffffff"},line:{color:"#ffffff"}}}},gauge:{pointer:{color:"#a7008f"},scale:{rangePlaceholderColor:"#2c232b",labels:{color:"#ffffff"},minorTicks:{color:"#2c232b"},majorTicks:{color:"#664e62"},line:{color:"#ffffff"}}},diagram:{shapeDefaults:{fill:{color:"#a7018f"},connectorDefaults:{fill:{color:c},stroke:{color:"#2c232b"},hover:{fill:{color:"#2c232b"},stroke:{color:c}}},content:{color:c}},editable:{resize:{handles:{fill:{color:"#2c232b"},stroke:{color:c},hover:{fill:{color:c},stroke:{color:c}}}},rotate:{thumb:{stroke:{color:c},fill:{color:c}}}},selectable:{stroke:{color:c}},connectionDefaults:{stroke:{color:c},content:{color:c},selection:{handles:{fill:{color:"#2c232b"},stroke:{color:c}}}}},treeMap:{colors:[["#a7008f","#451c3f"],["#ffb800","#564122"],["#3aafff","#2f3f55"],["#99c900","#424422"],["#b20753","#471d33"],["#ff4195","#562940"]]}});m("default",{chart:{title:{color:"#8e8e8e"},legend:{labels:{color:"#232323"},inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}},seriesDefaults:{labels:{color:n,background:c,opacity:0.5},errorBars:{color:"#232323"},candlestick:{downColor:"#dedede",line:{color:"#8d8d8d"}},waterfall:{line:{color:"#8e8e8e"}},horizontalWaterfall:{line:{color:"#8e8e8e"}},notes:{icon:{background:"transparent",border:{color:"#8e8e8e"}},label:{color:"#232323"},line:{color:"#8e8e8e"}}},seriesColors:["#ff6800","#a0a700","#ff8d00","#678900","#ffb53c","#396000"],axisDefaults:{line:{color:"#8e8e8e"},labels:{color:"#232323"},minorGridLines:{color:"#f0f0f0"},majorGridLines:{color:"#dfdfdf"},title:{color:"#232323"},crosshair:{color:"#8e8e8e"},notes:{icon:{background:"transparent",border:{color:"#8e8e8e"}},label:{color:"#232323"},line:{color:"#8e8e8e"}}}},gauge:{pointer:{color:"#ea7001"},scale:{rangePlaceholderColor:"#dedede",labels:{color:"#2e2e2e"},minorTicks:{color:"#2e2e2e"},majorTicks:{color:"#2e2e2e"},line:{color:"#2e2e2e"}}},diagram:{shapeDefaults:{fill:{color:"#e15613"},connectorDefaults:{fill:{color:"#282828"},stroke:{color:c},hover:{fill:{color:c},stroke:{color:"#282828"}}},content:{color:"#2e2e2e"}},editable:{resize:{handles:{fill:{color:c},stroke:{color:"#282828"},hover:{fill:{color:"#282828"},stroke:{color:"#282828"}}}},rotate:{thumb:{stroke:{color:"#282828"},fill:{color:"#282828"}}}},selectable:{stroke:{color:"#a7018f"}},connectionDefaults:{stroke:{color:"#282828"},content:{color:"#2e2e2e"},selection:{handles:{fill:{color:c},stroke:{color:"#282828"}}}}},treeMap:{colors:[["#ff6800","#edcfba"],["#a0a700","#dadcba"],["#ff8d00","#edd7ba"],["#678900","#cfd6ba"],["#ffb53c","#eddfc6"],["#396000","#c6ceba"]]}});m("silver",{chart:{title:{color:"#4e5968"},legend:{labels:{color:"#4e5968"},inactiveItems:{labels:{color:"#B1BCC8"},markers:{color:"#B1BCC8"}}},seriesDefaults:{labels:{color:"#293135",background:"#eaeaec",opacity:0.5},errorBars:{color:"#4e5968"},notes:{icon:{background:"transparent",border:{color:"#4e5968"}},label:{color:"#4e5968"},line:{color:"#4e5968"}},line:{markers:{background:"#eaeaec"}},scatter:{markers:{background:"#eaeaec"}},scatterLine:{markers:{background:"#eaeaec"}},pie:{connectors:{color:"#A6B1C0"}},donut:{connectors:{color:"#A6B1C0"}},waterfall:{line:{color:"#a6b1c0"}},horizontalWaterfall:{line:{color:"#a6b1c0"}},candlestick:{downColor:"#a6afbe"}},chartArea:{background:"#eaeaec"},seriesColors:["#007bc3","#76b800","#ffae00","#ef4c00","#a419b7","#430B62"],axisDefaults:{line:{color:"#a6b1c0"},labels:{color:"#4e5968"},majorGridLines:{color:"#dcdcdf"},minorGridLines:{color:"#eeeeef"},title:{color:"#4e5968"},crosshair:{color:"#a6b1c0"},notes:{icon:{background:"transparent",border:{color:"#4e5968"}},label:{color:"#4e5968"},line:{color:"#4e5968"}}}},gauge:{pointer:{color:"#0879c0"},scale:{rangePlaceholderColor:"#f3f3f4",labels:{color:"#515967"},minorTicks:{color:"#515967"},majorTicks:{color:"#515967"},line:{color:"#515967"}}},diagram:{shapeDefaults:{fill:{color:"#1c82c2"},connectorDefaults:{fill:{color:"#515967"},stroke:{color:c},hover:{fill:{color:c},stroke:{color:"#282828"}}},content:{color:"#515967"}},editable:{resize:{handles:{fill:{color:c},stroke:{color:"#515967"},hover:{fill:{color:"#515967"},stroke:{color:"#515967"}}}},rotate:{thumb:{stroke:{color:"#515967"},fill:{color:"#515967"}}}},selectable:{stroke:{color:"#515967"}},connectionDefaults:{stroke:{color:"#515967"},content:{color:"#515967"},selection:{handles:{fill:{color:c},stroke:{color:"#515967"}}}}},treeMap:{colors:[["#007bc3","#c2dbea"],["#76b800","#dae7c3"],["#ffae00","#f5e5c3"],["#ef4c00","#f2d2c3"],["#a419b7","#e3c7e8"],["#430b62","#d0c5d7"]]}});m("metro",{chart:{title:{color:"#777777"},legend:{labels:{color:"#777777"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:n},errorBars:{color:"#777777"},notes:{icon:{background:"transparent",border:{color:"#777777"}},label:{color:"#777777"},line:{color:"#777777"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},waterfall:{line:{color:"#c7c7c7"}},horizontalWaterfall:{line:{color:"#c7c7c7"}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#8ebc00","#309b46","#25a0da","#ff6900","#e61e26","#d8e404","#16aba9","#7e51a1","#313131","#ed1691"],axisDefaults:{line:{color:"#c7c7c7"},labels:{color:"#777777"},minorGridLines:{color:"#c7c7c7"},majorGridLines:{color:"#c7c7c7"},title:{color:"#777777"},crosshair:{color:"#c7c7c7"},notes:{icon:{background:"transparent",border:{color:"#777777"}},label:{color:"#777777"},line:{color:"#777777"}}}},gauge:{pointer:{color:"#8ebc00"},scale:{rangePlaceholderColor:"#e6e6e6",labels:{color:"#777"},minorTicks:{color:"#777"},majorTicks:{color:"#777"},line:{color:"#777"}}},diagram:{shapeDefaults:{fill:{color:"#8ebc00"},connectorDefaults:{fill:{color:n},stroke:{color:c},hover:{fill:{color:c},stroke:{color:n}}},content:{color:"#777"}},editable:{resize:{handles:{fill:{color:c},stroke:{color:"#787878"},hover:{fill:{color:"#787878"},stroke:{color:"#787878"}}}},rotate:{thumb:{stroke:{color:"#787878"},fill:{color:"#787878"}}}},selectable:{stroke:{color:"#515967"}},connectionDefaults:{stroke:{color:"#787878"},content:{color:"#777"},selection:{handles:{fill:{color:c},stroke:{color:"#787878"}}}}},treeMap:{colors:[["#8ebc00","#e8f2cc"],["#309b46","#d6ebda"],["#25a0da","#d3ecf8"],["#ff6900","#ffe1cc"],["#e61e26","#fad2d4"],["#d8e404","#f7facd"],["#16aba9","#d0eeee"],["#7e51a1","#e5dcec"],["#313131","#d6d6d6"],["#ed1691","#fbd0e9"]]}});m("metroblack",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#797979"},markers:{color:"#797979"}}},seriesDefaults:{border:{_brightness:1},labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#cecece"}},label:{color:"#ffffff"},line:{color:"#cecece"}},line:{markers:{background:"#0e0e0e"}},bubble:{opacity:0.6},scatter:{markers:{background:"#0e0e0e"}},scatterLine:{markers:{background:"#0e0e0e"}},candlestick:{downColor:"#828282",line:{color:"#ffffff"}},waterfall:{line:{color:"#cecece"}},horizontalWaterfall:{line:{color:"#cecece"}},overlay:{gradient:"none"}},chartArea:{background:"#0e0e0e"},seriesColors:["#00aba9","#309b46","#8ebc00","#ff6900","#e61e26","#d8e404","#25a0da","#7e51a1","#313131","#ed1691"],axisDefaults:{line:{color:"#cecece"},labels:{color:"#ffffff"},minorGridLines:{color:"#2d2d2d"},majorGridLines:{color:"#333333"},title:{color:"#ffffff"},crosshair:{color:"#cecece"},notes:{icon:{background:"transparent",border:{color:"#cecece"}},label:{color:"#ffffff"},line:{color:"#cecece"}}}},gauge:{pointer:{color:"#00aba9"},scale:{rangePlaceholderColor:"#2d2d2d",labels:{color:"#ffffff"},minorTicks:{color:"#333333"},majorTicks:{color:"#cecece"},line:{color:"#cecece"}}},diagram:{shapeDefaults:{fill:{color:"#00aba9"},connectorDefaults:{fill:{color:c},stroke:{color:"#0e0e0e"},hover:{fill:{color:"#0e0e0e"},stroke:{color:c}}},content:{color:c}},editable:{resize:{handles:{fill:{color:"#0e0e0e"},stroke:{color:"#787878"},hover:{fill:{color:"#787878"},stroke:{color:"#787878"}}}},rotate:{thumb:{stroke:{color:c},fill:{color:c}}}},selectable:{stroke:{color:"#787878"}},connectionDefaults:{stroke:{color:c},content:{color:c},selection:{handles:{fill:{color:"#0e0e0e"},stroke:{color:c}}}}},treeMap:{colors:[["#00aba9","#0b2d2d"],["#309b46","#152a19"],["#8ebc00","#28310b"],["#ff6900","#3e200b"],["#e61e26","#391113"],["#d8e404","#36390c"],["#25a0da","#132b37"],["#7e51a1","#241b2b"],["#313131","#151515"],["#ed1691","#3b1028"]]}});m("moonlight",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#A1A7AB"},markers:{color:"#A1A7AB"}}},seriesDefaults:{labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#8c909e"}},label:{color:"#ffffff"},line:{color:"#8c909e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#212a33"}},bubble:{opacity:0.6},scatter:{markers:{background:"#212a33"}},scatterLine:{markers:{background:"#212a33"}},area:{opacity:0.3},candlestick:{downColor:"#757d87",line:{color:"#ea9d06"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:c,opacity:0.2}}},waterfall:{line:{color:"#8c909e"}},horizontalWaterfall:{line:{color:"#8c909e"}},ohlc:{line:{color:"#ea9d06"}}},chartArea:{background:"#212a33"},seriesColors:["#ffca08","#ff710f","#ed2e24","#ff9f03","#e13c02","#a00201"],axisDefaults:{line:{color:"#8c909e"},minorTicks:{color:"#8c909e"},majorTicks:{color:"#8c909e"},labels:{color:"#ffffff"},majorGridLines:{color:"#3e424d"},minorGridLines:{color:"#2f3640"},title:{color:"#ffffff"},crosshair:{color:"#8c909e"},notes:{icon:{background:"transparent",border:{color:"#8c909e"}},label:{color:"#ffffff"},line:{color:"#8c909e"}}}},gauge:{pointer:{color:"#f4af03"},scale:{rangePlaceholderColor:"#2f3640",labels:{color:c},minorTicks:{color:"#8c909e"},majorTicks:{color:"#8c909e"},line:{color:"#8c909e"}}},diagram:{shapeDefaults:{fill:{color:"#f3ae03"},connectorDefaults:{fill:{color:c},stroke:{color:"#414550"},hover:{fill:{color:"#414550"},stroke:{color:c}}},content:{color:c}},editable:{resize:{handles:{fill:{color:"#414550"},stroke:{color:c},hover:{fill:{color:c},stroke:{color:c}}}},rotate:{thumb:{stroke:{color:c},fill:{color:c}}}},selectable:{stroke:{color:c}},connectionDefaults:{stroke:{color:c},content:{color:c},selection:{handles:{fill:{color:"#414550"},stroke:{color:c}}}}},treeMap:{colors:[["#ffca08","#4e4b2b"],["#ff710f","#4e392d"],["#ed2e24","#4b2c31"],["#ff9f03","#4e422a"],["#e13c02","#482e2a"],["#a00201","#3b232a"]]}});m("uniform",{chart:{title:{color:"#686868"},legend:{labels:{color:"#686868"},inactiveItems:{labels:{color:"#B6B6B6"},markers:{color:"#B6B6B6"}}},seriesDefaults:{labels:{color:"#686868"},errorBars:{color:"#686868"},notes:{icon:{background:"transparent",border:{color:"#9e9e9e"}},label:{color:"#686868"},line:{color:"#9e9e9e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#ffffff"}},bubble:{opacity:0.6},scatter:{markers:{background:"#ffffff"}},scatterLine:{markers:{background:"#ffffff"}},area:{opacity:0.3},candlestick:{downColor:"#cccccc",line:{color:"#cccccc"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#cccccc",opacity:0.2}}},waterfall:{line:{color:"#9e9e9e"}},horizontalWaterfall:{line:{color:"#9e9e9e"}},ohlc:{line:{color:"#cccccc"}}},chartArea:{background:"#ffffff"},seriesColors:["#527aa3","#6f91b3","#8ca7c2","#a8bdd1","#c5d3e0","#e2e9f0"],axisDefaults:{line:{color:"#9e9e9e"},minorTicks:{color:"#aaaaaa"},majorTicks:{color:"#888888"},labels:{color:"#686868"},majorGridLines:{color:"#dadada"},minorGridLines:{color:"#e7e7e7"},title:{color:"#686868"},crosshair:{color:"#9e9e9e"},notes:{icon:{background:"transparent",border:{color:"#9e9e9e"}},label:{color:"#686868"},line:{color:"#9e9e9e"}}}},gauge:{pointer:{color:"#527aa3"},scale:{rangePlaceholderColor:"#e7e7e7",labels:{color:"#686868"},minorTicks:{color:"#aaaaaa"},majorTicks:{color:"#888888"},line:{color:"#9e9e9e"}}},diagram:{shapeDefaults:{fill:{color:"#d1d1d1"},connectorDefaults:{fill:{color:"#686868"},stroke:{color:c},hover:{fill:{color:c},stroke:{color:"#686868"}}},content:{color:"#686868"}},editable:{resize:{handles:{fill:{color:c},stroke:{color:"#686868"},hover:{fill:{color:"#686868"},stroke:{color:"#686868"}}}},rotate:{thumb:{stroke:{color:"#686868"},fill:{color:"#686868"}}}},selectable:{stroke:{color:"#686868"}},connectionDefaults:{stroke:{color:"#686868"},content:{color:"#686868"},selection:{handles:{fill:{color:c},stroke:{color:"#686868"}}}}},treeMap:{colors:[["#527aa3","#d0d8e1"],["#6f91b3","#d6dde4"],["#8ca7c2","#dce1e7"],["#a8bdd1","#e2e6ea"],["#c5d3e0","#e7eaed"],["#e2e9f0","#edeff0"]]}});m("bootstrap",{chart:{title:{color:"#333333"},legend:{labels:{color:"#333333"},inactiveItems:{labels:{color:"#999999"},markers:{color:"#9A9A9A"}}},seriesDefaults:{labels:{color:"#333333"},overlay:{gradient:"none"},errorBars:{color:"#343434"},notes:{icon:{background:"#000000",border:{color:"#000000"}},label:{color:"#333333"},line:{color:"#000000"}},pie:{overlay:{gradient:"none"}},donut:{overlay:{gradient:"none"}},line:{markers:{background:"#ffffff"}},bubble:{opacity:0.6},scatter:{markers:{background:"#ffffff"}},scatterLine:{markers:{background:"#ffffff"}},area:{opacity:0.8},candlestick:{downColor:"#d0d0d0",line:{color:"#333333"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#b8b8b8",opacity:0.2}}},waterfall:{line:{color:"#cccccc"}},horizontalWaterfall:{line:{color:"#cccccc"}},ohlc:{line:{color:"#333333"}}},chartArea:{background:"#ffffff"},seriesColors:["#428bca","#5bc0de","#5cb85c","#f2b661","#e67d4a","#da3b36"],axisDefaults:{line:{color:"#cccccc"},minorTicks:{color:"#ebebeb"},majorTicks:{color:"#cccccc"},labels:{color:"#333333"},majorGridLines:{color:"#cccccc"},minorGridLines:{color:"#ebebeb"},title:{color:"#333333"},crosshair:{color:"#000000"},notes:{icon:{background:"#000000",border:{color:"#000000"}},label:{color:"#ffffff"},line:{color:"#000000"}}}},gauge:{pointer:{color:"#428bca"},scale:{rangePlaceholderColor:"#cccccc",labels:{color:"#333333"},minorTicks:{color:"#ebebeb"},majorTicks:{color:"#cccccc"},line:{color:"#cccccc"}}},diagram:{shapeDefaults:{fill:{color:"#428bca"},connectorDefaults:{fill:{color:"#333333"},stroke:{color:c},hover:{fill:{color:c},stroke:{color:"#333333"}}},content:{color:"#333333"}},editable:{resize:{handles:{fill:{color:c},stroke:{color:"#333333"},hover:{fill:{color:"#333333"},stroke:{color:"#333333"}}}},rotate:{thumb:{stroke:{color:"#333333"},fill:{color:"#333333"}}}},selectable:{stroke:{color:"#333333"}},connectionDefaults:{stroke:{color:"#c4c4c4"},content:{color:"#333333"},selection:{handles:{fill:{color:c},stroke:{color:"#333333"}},stroke:{color:"#333333"}}}},treeMap:{colors:[["#428bca","#d1e0ec"],["#5bc0de","#d6eaf0"],["#5cb85c","#d6e9d6"],["#5cb85c","#f4e8d7"],["#e67d4a","#f2ddd3"],["#da3b36","#f0d0cf"]]}});m("flat",{chart:{title:{color:"#4c5356"},legend:{labels:{color:"#4c5356"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:"#4c5356"},errorBars:{color:"#4c5356"},notes:{icon:{background:"transparent",border:{color:"#cdcdcd"}},label:{color:"#4c5356"},line:{color:"#cdcdcd"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},area:{opacity:0.9},waterfall:{line:{color:"#cdcdcd"}},horizontalWaterfall:{line:{color:"#cdcdcd"}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#10c4b2","#ff7663","#ffb74f","#a2df53","#1c9ec4","#ff63a5","#1cc47b"],axisDefaults:{line:{color:"#cdcdcd"},labels:{color:"#4c5356"},minorGridLines:{color:"#cdcdcd"},majorGridLines:{color:"#cdcdcd"},title:{color:"#4c5356"},crosshair:{color:"#cdcdcd"},notes:{icon:{background:"transparent",border:{color:"#cdcdcd"}},label:{color:"#4c5356"},line:{color:"#cdcdcd"}}}},gauge:{pointer:{color:"#10c4b2"},scale:{rangePlaceholderColor:"#cdcdcd",labels:{color:"#4c5356"},minorTicks:{color:"#4c5356"},majorTicks:{color:"#4c5356"},line:{color:"#4c5356"}}},diagram:{shapeDefaults:{fill:{color:"#10c4b2"},connectorDefaults:{fill:{color:"#363940"},stroke:{color:c},hover:{fill:{color:c},stroke:{color:"#363940"}}},content:{color:"#4c5356"}},editable:{resize:{handles:{fill:{color:c},stroke:{color:"#363940"},hover:{fill:{color:"#363940"},stroke:{color:"#363940"}}}},rotate:{thumb:{stroke:{color:"#363940"},fill:{color:"#363940"}}}},selectable:{stroke:{color:"#363940"}},connectionDefaults:{stroke:{color:"#cdcdcd"},content:{color:"#4c5356"},selection:{handles:{fill:{color:c},stroke:{color:"#363940"}},stroke:{color:"#363940"}}}},treeMap:{colors:[["#10c4b2","#cff3f0"],["#ff7663","#ffe4e0"],["#ffb74f","#fff1dc"],["#a2df53","#ecf9dd"],["#1c9ec4","#d2ecf3"],["#ff63a5","#ffe0ed"],["#1cc47b","#d2f3e5"]]}});m("material",{chart:{title:{color:"#444444"},legend:{labels:{color:"#444444"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:"#444444"},errorBars:{color:"#444444"},notes:{icon:{background:"transparent",border:{color:"#e5e5e5"}},label:{color:"#444444"},line:{color:"#e5e5e5"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},area:{opacity:0.9},waterfall:{line:{color:"#e5e5e5"}},horizontalWaterfall:{line:{color:"#e5e5e5"}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#ff9800","#ff5722"],axisDefaults:{line:{color:"#e5e5e5"},labels:{color:"#444444"},minorGridLines:{color:"#e5e5e5"},majorGridLines:{color:"#e5e5e5"},title:{color:"#444444"},crosshair:{color:"#7f7f7f"},notes:{icon:{background:"transparent",border:{color:"#e5e5e5"}},label:{color:"#444444"},line:{color:"#e5e5e5"}}}},gauge:{pointer:{color:"#3f51b5"},scale:{rangePlaceholderColor:"#e5e5e5",labels:{color:"#444444"},minorTicks:{color:"#444444"},majorTicks:{color:"#444444"},line:{color:"#444444"}}},diagram:{shapeDefaults:{fill:{color:"#3f51b5"},connectorDefaults:{fill:{color:"#7f7f7f"},stroke:{color:c},hover:{fill:{color:c},stroke:{color:"#7f7f7f"}}},content:{color:"#444444"}},editable:{resize:{handles:{fill:{color:c},stroke:{color:"#444444"},hover:{fill:{color:"#444444"},stroke:{color:"#444444"}}}},rotate:{thumb:{stroke:{color:"#444444"},fill:{color:"#444444"}}}},selectable:{stroke:{color:"#444444"}},connectionDefaults:{stroke:{color:"#7f7f7f"},content:{color:"#444444"},selection:{handles:{fill:{color:c},stroke:{color:"#444444"}},stroke:{color:"#444444"}}}},treeMap:{colors:[["#3f51b5","#cff3f0"],["#03a9f4","#e5f6fe"],["#4caf50","#edf7ed"],["#f9ce1d","#fefae8"],["#ff9800","#fff4e5"],["#ff5722","#ffeee8"]]}});m("materialblack",{chart:{title:{color:"#fff"},legend:{labels:{color:"#fff"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:"#fff"},errorBars:{color:"#fff"},notes:{icon:{background:"transparent",border:{color:"#e5e5e5"}},label:{color:"#fff"},line:{color:"#e5e5e5"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},area:{opacity:0.9},waterfall:{line:{color:"#4d4d4d"}},horizontalWaterfall:{line:{color:"#4d4d4d"}},overlay:{gradient:"none"},border:{_brightness:1}},chartArea:{background:"#1c1c1c"},seriesColors:["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#ff9800","#ff5722"],axisDefaults:{line:{color:"#4d4d4d"},labels:{color:"#fff"},minorGridLines:{color:"#4d4d4d"},majorGridLines:{color:"#4d4d4d"},title:{color:"#fff"},crosshair:{color:"#7f7f7f"},notes:{icon:{background:"transparent",border:{color:"#4d4d4d"}},label:{color:"#fff"},line:{color:"#4d4d4d"}}}},gauge:{pointer:{color:"#3f51b5"},scale:{rangePlaceholderColor:"#4d4d4d",labels:{color:"#fff"},minorTicks:{color:"#fff"},majorTicks:{color:"#fff"},line:{color:"#fff"}}},diagram:{shapeDefaults:{fill:{color:"#3f51b5"},connectorDefaults:{fill:{color:"#7f7f7f"},stroke:{color:c},hover:{fill:{color:c},stroke:{color:"#7f7f7f"}}},content:{color:"#fff"}},editable:{resize:{handles:{fill:{color:c},stroke:{color:"#fff"},hover:{fill:{color:"#fff"},stroke:{color:"#fff"}}}},rotate:{thumb:{stroke:{color:"#fff"},fill:{color:"#fff"}}}},selectable:{stroke:{color:"#fff"}},connectionDefaults:{stroke:{color:"#7f7f7f"},content:{color:"#fff"},selection:{handles:{fill:{color:c},stroke:{color:"#fff"}},stroke:{color:"#fff"}}}},treeMap:{colors:[["#3f51b5","#cff3f0"],["#03a9f4","#e5f6fe"],["#4caf50","#edf7ed"],["#f9ce1d","#fefae8"],["#ff9800","#fff4e5"],["#ff5722","#ffeee8"]]}});(function(){var u="#333333";var q="#7f7f7f";var t="#bdbdbd";var o="#c8c8c8";var v="#dddddd";var r=["#008fd3","#99d101","#f39b02","#f05662","#c03c53","#acacac"];var s=["#cbe8f5","#eaf5cb","#fceacc","#fbdcdf","#f2d7dc","#eeeeee"];var w=r[0];var x=c;function p(){return{icon:{background:"#007cc0",border:{color:"#007cc0"}},label:{color:"#ffffff"},line:{color:o}}}m("fiori",{chart:{title:{color:u},legend:{labels:{color:u},inactiveItems:{labels:{color:q},markers:{color:q}}},seriesDefaults:{labels:{color:u},errorBars:{color:u},notes:p(),candlestick:{downColor:o,line:{color:t}},area:{opacity:0.8},waterfall:{line:{color:o}},horizontalWaterfall:{line:{color:o}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:r,axisDefaults:{line:{color:o},labels:{color:u},minorGridLines:{color:v},majorGridLines:{color:o},title:{color:u},crosshair:{color:q},notes:p()}},gauge:{pointer:{color:w},scale:{rangePlaceholderColor:o,labels:{color:u},minorTicks:{color:u},majorTicks:{color:u},line:{color:u}}},diagram:{shapeDefaults:{fill:{color:w},connectorDefaults:{fill:{color:u},stroke:{color:x},hover:{fill:{color:x},stroke:{color:u}}},content:{color:u}},editable:{resize:{handles:{fill:{color:x},stroke:{color:t},hover:{fill:{color:t},stroke:{color:t}}}},rotate:{thumb:{stroke:{color:t},fill:{color:t}}}},selectable:{stroke:{color:t}},connectionDefaults:{stroke:{color:t},content:{color:t},selection:{handles:{fill:{color:x},stroke:{color:t}},stroke:{color:t}}}},treeMap:{colors:e(r,s)}})}());(function(){var u="#4e4e4e";var q="#7f7f7f";var t="#bdbdbd";var o="#c8c8c8";var v="#e5e5e5";var r=["#0072c6","#5db2ff","#008a17","#82ba00","#ff8f32","#ac193d"];var s=["#cbe2f3","#deeffe","#cbe7d0","#e5f0cb","#fee8d5","#eed0d7"];var w=r[0];var x=c;function p(){return{icon:{background:"#00b0ff",border:{color:"#00b0ff"}},label:{color:"#ffffff"},line:{color:o}}}m("office365",{chart:{title:{color:u},legend:{labels:{color:u},inactiveItems:{labels:{color:q},markers:{color:q}}},seriesDefaults:{labels:{color:u},errorBars:{color:u},notes:p(),candlestick:{downColor:o,line:{color:t}},area:{opacity:0.8},waterfall:{line:{color:o}},horizontalWaterfall:{line:{color:o}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:r,axisDefaults:{line:{color:o},labels:{color:u},minorGridLines:{color:v},majorGridLines:{color:o},title:{color:u},crosshair:{color:q},notes:p()}},gauge:{pointer:{color:w},scale:{rangePlaceholderColor:o,labels:{color:u},minorTicks:{color:u},majorTicks:{color:u},line:{color:u}}},diagram:{shapeDefaults:{fill:{color:w},connectorDefaults:{fill:{color:u},stroke:{color:x},hover:{fill:{color:x},stroke:{color:u}}},content:{color:u}},editable:{resize:{handles:{fill:{color:x},stroke:{color:t},hover:{fill:{color:t},stroke:{color:t}}}},rotate:{thumb:{stroke:{color:t},fill:{color:t}}}},selectable:{stroke:{color:t}},connectionDefaults:{stroke:{color:t},content:{color:t},selection:{handles:{fill:{color:x},stroke:{color:t}},stroke:{color:t}}}},treeMap:{colors:e(r,s)}})}());(function(){var u="#32364c";var q="#7f7f7f";var t="#bdbdbd";var o="#dfe0e1";var v="#dfe0e1";var r=["#ff4350","#ff9ea5","#00acc1","#80deea","#ffbf46","#ffd78c"];var s=["#ffd9dc","#ffeced","#cceef3","#e6f8fb","#fff2da","#fff7e8"];var w=r[0];var x=c;function p(){return{icon:{background:"#007cc0",border:{color:"#007cc0"}},label:{color:"#ffffff"},line:{color:o}}}m("nova",{chart:{title:{color:u},legend:{labels:{color:u},inactiveItems:{labels:{color:q},markers:{color:q}}},seriesDefaults:{labels:{color:u},errorBars:{color:u},notes:p(),candlestick:{downColor:o,line:{color:t}},area:{opacity:0.8},waterfall:{line:{color:o}},horizontalWaterfall:{line:{color:o}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:r,axisDefaults:{line:{color:o},labels:{color:u},minorGridLines:{color:v},majorGridLines:{color:o},title:{color:u},crosshair:{color:u},notes:p()}},gauge:{pointer:{color:w},scale:{rangePlaceholderColor:o,labels:{color:u},minorTicks:{color:u},majorTicks:{color:u},line:{color:u}}},diagram:{shapeDefaults:{fill:{color:w},connectorDefaults:{fill:{color:u},stroke:{color:x},hover:{fill:{color:x},stroke:{color:u}}},content:{color:u}},editable:{resize:{handles:{fill:{color:x},stroke:{color:t},hover:{fill:{color:t},stroke:{color:t}}}},rotate:{thumb:{stroke:{color:t},fill:{color:t}}}},selectable:{stroke:{color:t}},connectionDefaults:{stroke:{color:t},content:{color:t},selection:{handles:{fill:{color:x},stroke:{color:t}},stroke:{color:t}}}},treeMap:{colors:e(r,s)}})}());(function(){var r="#656565";var t="#bdbdbd";var u="rgba(0, 0, 0, .04)";var q=["#ff6358","#ffd246","#78d237","#28b4c8","#2d73f5","#aa46be"];var o=["#ffd9dc","#ffeced","#cceef3","#e6f8fb","#fff2da","#fff7e8"];var p=q[0];var s=c;m("default-v2",{chart:{},gauge:{pointer:{color:p},scale:{rangePlaceholderColor:u,labels:{color:r},minorTicks:{color:r},majorTicks:{color:r},line:{color:r}}},diagram:{shapeDefaults:{fill:{color:p},connectorDefaults:{fill:{color:r},stroke:{color:s},hover:{fill:{color:s},stroke:{color:r}}},content:{color:r}},editable:{resize:{handles:{fill:{color:s},stroke:{color:t},hover:{fill:{color:t},stroke:{color:t}}}},rotate:{thumb:{stroke:{color:t},fill:{color:t}}}},selectable:{stroke:{color:t}},connectionDefaults:{stroke:{color:t},content:{color:t},selection:{handles:{fill:{color:s},stroke:{color:t}},stroke:{color:t}}}},treeMap:{colors:e(q,o)}});h.sass=h["default-v2"]}());function e(p,o){return f.map(p,function(r,q){return[[r,o[q]]]})}}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.dataviz.themes",["kendo.dataviz.core","dataviz/themes/chart-base-theme","dataviz/themes/auto-theme","dataviz/themes/themes"],a)}(function(){var a={id:"dataviz.themes",name:"Themes",description:"Built-in themes for the DataViz widgets",category:"dataviz",depends:["dataviz.core"],hidden:true}},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/chart/kendo-chart",["kendo.core","kendo.color","kendo.drawing","kendo.dataviz.core"],a)}(function(){(function(d7){window.kendo.dataviz=window.kendo.dataviz||{};var b8=kendo.dataviz;var aw=b8.Class;var p=b8.isNumber;var dn=b8.constants;var cw=dn.MAX_VALUE;var c9=dn.MIN_VALUE;var cy=dn.VALUE;var ef=dn.CENTER;var bQ=dn.TOP;var ei=dn.BOTTOM;var cM=dn.LEFT;var bY=dn.WHITE;var bn=dn.CIRCLE;var dL=dn.Y;var dM=dn.X;var d9=dn.RIGHT;var aN=dn.BLACK;var dO=dn.DATE;var o=dn.DEFAULT_PRECISION;var ad=dn.ARC;var bD=b8.defined;var ca=b8.getter;var M=b8.isArray;var dP=b8.ChartElement;var ec=b8.Point;var cB=b8.Box;var en=b8.alignPathToPixel;var i=b8.setDefaultOptions;var dv=b8.inArray;var a1=b8.isFunction;var bF=b8.valueOrDefault;var t=b8.isObject;var aD=b8.deepExtend;var cK=b8.eventElement;var ac=b8.services;var b4=ac.TemplateService;var aV=b8.TextBox;var q=b8.ShapeElement;var bs=b8.getSpacing;var ch=b8.limitValue;var dC=b8.last;var bU=b8.append;var B=b8.isString;var c5=b8.parseDate;var bT=b8.styleValue;var bH=b8.CategoryAxis;var a=b8.BoxElement;var ck=b8.round;var a4=b8.grep;var bM=b8.DateCategoryAxis;var m=b8.elementStyles;var ar=b8.hasClasses;var bb=b8.bindEvents;var dc=b8.unbindEvents;var dl=kendo.support;var n=kendo.drawing;var bl=n.Path;var e=n.Animation;var eq=n.AnimationFactory;var aK=n.Group;var A=kendo.Color;var em=kendo.geometry;var bf=em.Point;var ab=em.transform;var cs=aw.extend({init:function(X){this._axis=X;this.options=X.options},value:function(X){var Y=this._axis;var er=Y.getCategory?Y.getCategory(X):Y.getValue(X);return er},slot:function(er,Y,X){if(X===void 0){X=true}return this._axis.slot(er,Y,X)},range:function(){return this._axis.range()},valueRange:function(){return this._axis.valueRange()}});var ce=aw.extend({init:function(X){this._plotArea=X;this.visual=X.visual;this.backgroundVisual=X._bgVisual}});function W(X){var et=X.length;var es=0;for(var er=0;er<et;er++){var Y=X[er];if(p(Y)){es++}}return es}var b5={min:function(X){var es=X.length;var er=cw;for(var Y=0;Y<es;Y++){var et=X[Y];if(p(et)){er=Math.min(er,et)}}return er===cw?X[0]:er},max:function(Y){var es=Y.length;var X=c9;for(var er=0;er<es;er++){var et=Y[er];if(p(et)){X=Math.max(X,et)}}return X===c9?Y[0]:X},sum:function(X){var es=X.length;var er=0;for(var Y=0;Y<es;Y++){var et=X[Y];if(p(et)){er+=et}}return er},sumOrNull:function(Y){var X=null;if(W(Y)){X=b5.sum(Y)}return X},count:function(X){var es=X.length;var er=0;for(var Y=0;Y<es;Y++){var et=X[Y];if(et!==null&&bD(et)){er++}}return er},avg:function(Y){var er=W(Y);var X=Y[0];if(er>0){X=b5.sum(Y)/er}return X},first:function(X){var er=X.length;for(var Y=0;Y<er;Y++){var es=X[Y];if(es!==null&&bD(es)){return es}}return X[0]}};function cI(Y,er){if(er===null){return er}var X=ca(Y,true);return X(er)}var bt=aw.extend({init:function(){this._valueFields={};this._otherFields={};this._nullValue={};this._undefinedValue={}},register:function(Y,X,et){var eu=this;if(X===void 0){X=[cy]}if(et===void 0){et={}}for(var er=0;er<Y.length;er++){var es=Y[er];eu._valueFields[es]=X;eu._otherFields[es]=et;eu._nullValue[es]=eu._makeValue(X,null);eu._undefinedValue[es]=eu._makeValue(X,undefined)}},canonicalFields:function(X){return this.valueFields(X).concat(this.otherFields(X))},valueFields:function(X){return this._valueFields[X.type]||[cy]},otherFields:function(X){return this._otherFields[X.type]||[cy]},bindPoint:function(eu,ew,eA){var et=eu.data;var ez=bD(eA)?eA:et[ew];var eB={valueFields:{value:ez}};var er=this.valueFields(eu);var Y=this._otherFields[eu.type];var ev,ey;if(ez===null){ey=this._nullValue[eu.type]}else{if(!bD(ez)){ey=this._undefinedValue[eu.type]}else{if(Array.isArray(ez)){var es=ez.slice(er.length);ey=this._bindFromArray(ez,er);ev=this._bindFromArray(es,Y)}else{if(typeof ez==="object"){var ex=this.sourceFields(eu,er);var X=this.sourceFields(eu,Y);ey=this._bindFromObject(ez,er,ex);ev=this._bindFromObject(ez,Y,X)}}}}if(bD(ey)){if(er.length===1){eB.valueFields.value=ey[er[0]]}else{eB.valueFields=ey}}eB.fields=ev||{};return eB},_makeValue:function(Y,X){var et={};var es=Y.length;for(var er=0;er<es;er++){var eu=Y[er];et[eu]=X}return et},_bindFromArray:function(et,X){var es={};if(X){var er=Math.min(X.length,et.length);for(var Y=0;Y<er;Y++){es[X[Y]]=et[Y]}}return es},_bindFromObject:function(er,X,Y){if(Y===void 0){Y=X}var eu={};if(X){var et=X.length;for(var es=0;es<et;es++){var ew=X[es];var ev=Y[es];eu[ew]=cI(ev,er)}}return eu},sourceFields:function(er,es){var eu=[];if(es){var et=es.length;for(var Y=0;Y<et;Y++){var ev=es[Y];var X=ev===cy?"field":ev+"Field";eu.push(er[X]||ev)}}return eu}});bt.current=new bt();var b6="stderr";var aX="stddev";var cL=/percent(?:\w*)\((\d+)\)/;var dX=new RegExp("^"+aX+"(?:\\((\\d+(?:\\.\\d+)?)\\))?$");var a6=aw.extend({init:function(X,Y,er){this.initGlobalRanges(X,Y,er)},initGlobalRanges:function(Y,ev,ex){var eu=ev.data;var X=dX.exec(Y);if(X){this.valueGetter=this.createValueGetter(ev,ex);var er=this.getAverage(eu);var es=this.getStandardDeviation(eu,er,false);var ey=X[1]?parseFloat(X[1]):1;var ew={low:er.value-es*ey,high:er.value+es*ey};this.globalRange=function(){return ew}}else{if(Y.indexOf&&Y.indexOf(b6)>=0){this.valueGetter=this.createValueGetter(ev,ex);var et=this.getStandardError(eu,this.getAverage(eu));this.globalRange=function(ez){return{low:ez-et,high:ez+et}}}}},createValueGetter:function(es,ev){var er=es.data;var ew=bt.current;var X=ew.valueFields(es);var ex=bD(er[0])?er[0]:{};var Y;if(M(ex)){var et=ev?X.indexOf(ev):0;Y=ca("["+et+"]")}else{if(p(ex)){Y=ca()}else{if(typeof ex===dn.OBJECT){var eu=ew.sourceFields(es,X);Y=ca(eu[X.indexOf(ev)])}}}return Y},getErrorRange:function(eu,Y){var X,et,es;if(!bD(Y)){return null}if(this.globalRange){return this.globalRange(eu)}if(M(Y)){X=eu-Y[0];et=eu+Y[1]}else{if(p(es=parseFloat(Y))){X=eu-es;et=eu+es}else{if(es=cL.exec(Y)){var er=eu*(parseFloat(es[1])/100);X=eu-Math.abs(er);et=eu+Math.abs(er)}else{throw new Error("Invalid ErrorBar value: "+Y)}}}return{low:X,high:et}},getStandardError:function(Y,X){return this.getStandardDeviation(Y,X,true)/Math.sqrt(X.count)},getStandardDeviation:function(es,X,er){var et=this;var Y=es.length;var eu=er?X.count-1:X.count;var ew=0;for(var ex=0;ex<Y;ex++){var ev=et.valueGetter(es[ex]);if(p(ev)){ew+=Math.pow(ev-X.value,2)}}return Math.sqrt(ew/eu)},getAverage:function(eu){var ev=this;var es=eu.length;var Y=0;var er=0;for(var X=0;X<es;X++){var et=ev.valueGetter(eu[X]);if(p(et)){Y+=et;er++}}return{value:Y/er,count:er}}});var cQ=dl.browser||{};var H=600;var dI="fadeIn";var aL="glass";var P=0.8;var h=5;var a7=cQ.msie?0.001:0;var dT="errorLow";var bZ="errorHigh";var am="xErrorLow";var D="xErrorHigh";var w="yErrorLow";var c2="yErrorHigh";var ds=8;var bL="zero";var c="interpolate";var a0="gap";var aM="smooth";var v="step";var cZ="area";var cc="bar";var bo="boxPlot";var bx="bubble";var cU="bullet";var T="candlestick";var bz="column";var cf="donut";var ea="funnel";var ek="horizontalWaterfall";var bv="line";var ao="ohlc";var c0="pie";var da="polarArea";var bI="polarLine";var bk="polarScatter";var dq="radarArea";var L="radarColumn";var bW="radarLine";var aG="rangeBar";var av="rangeColumn";var S="scatter";var E="scatterLine";var bc="verticalArea";var cN="verticalBoxPlot";var aS="verticalBullet";var ep="verticalLine";var bu="waterfall";var dk=[cc,bz,ao,T,bo,cN,cU,av,aG,bu,ek];var bE="legendItemClick";var aj="legendItemHover";var bq="seriesClick";var O="seriesHover";var bi="plotAreaClick";var J="plotAreaHover";var bj="drag";var g="dragEnd";var cJ="dragStart";var cu="zoomStart";var k="zoom";var aU="zoomEnd";var j="selectStart";var b9="select";var ay="selectEnd";var an="render";var cX="showTooltip";var ak="hideTooltip";var df="log";var cv="category";var x="insideEnd";var b1="insideBase";var aO="outsideEnd";var cx="DOMMouseScroll mousewheel";var aB=150;var Q={INITIAL_ANIMATION_DURATION:H,FADEIN:dI,LEGEND_ITEM_CLICK:bE,LEGEND_ITEM_HOVER:aj,SERIES_CLICK:bq,SERIES_HOVER:O,GLASS:aL,BORDER_BRIGHTNESS:P,TOOLTIP_OFFSET:h,START_SCALE:a7,ERROR_LOW_FIELD:dT,ERROR_HIGH_FIELD:bZ,X_ERROR_LOW_FIELD:am,X_ERROR_HIGH_FIELD:D,Y_ERROR_LOW_FIELD:w,Y_ERROR_HIGH_FIELD:c2,LINE_MARKER_SIZE:ds,INTERPOLATE:c,ZERO:bL,SMOOTH:aM,STEP:v,CATEGORY:cv,FUNNEL:ea,BAR:cc,CANDLESTICK:T,PIE:c0,COLUMN:bz,AREA:cZ,VERTICAL_BULLET:aS,BOX_PLOT:bo,OHLC:ao,WATERFALL:bu,LINE:bv,BULLET:cU,VERTICAL_LINE:ep,VERTICAL_AREA:bc,RANGE_COLUMN:av,VERTICAL_BOX_PLOT:cN,RANGE_BAR:aG,HORIZONTAL_WATERFALL:ek,SCATTER:S,SCATTER_LINE:E,BUBBLE:bx,RADAR_AREA:dq,RADAR_LINE:bW,RADAR_COLUMN:L,POLAR_LINE:bI,POLAR_AREA:da,POLAR_SCATTER:bk,RENDER:an,PLOT_AREA_CLICK:bi,PLOT_AREA_HOVER:J,LOGARITHMIC:df,DRAG:bj,DRAG_START:cJ,DRAG_END:g,ZOOM_START:cu,ZOOM:k,ZOOM_END:aU,SELECT_START:j,SELECT:b9,SELECT_END:ay,GAP:a0,DONUT:cf,INSIDE_END:x,INSIDE_BASE:b1,OUTSIDE_END:aO,MOUSEWHEEL:cx,MOUSEWHEEL_DELAY:aB,SHOW_TOOLTIP:cX,HIDE_TOOLTIP:ak,EQUALLY_SPACED_SERIES:dk};var dh=4;var cE=dP.extend({init:function(X,et,eu,es,er,Y){dP.fn.init.call(this,Y);this.low=X;this.high=et;this.isVertical=eu;this.chart=es;this.series=er},reflow:function(eu){var es=this.options.endCaps;var ex=this.isVertical;var Y=this.getAxis();var et=Y.getSlot(this.low,this.high);var ey=eu.center();var er=this.getCapsWidth(eu,ex);var ev=ex?ey.x:ey.y;var ez=ev-er;var X=ev+er;var ew;if(ex){ew=[new ec(ey.x,et.y1),new ec(ey.x,et.y2)];if(es){ew.push(new ec(ez,et.y1),new ec(X,et.y1),new ec(ez,et.y2),new ec(X,et.y2))}this.box=new cB(ez,et.y1,X,et.y2)}else{ew=[new ec(et.x1,ey.y),new ec(et.x2,ey.y)];if(es){ew.push(new ec(et.x1,ez),new ec(et.x1,X),new ec(et.x2,ez),new ec(et.x2,X))}this.box=new cB(et.x1,ez,et.x2,X)}this.linePoints=ew},getCapsWidth:function(Y,er){var es=er?Y.width():Y.height();var X=Math.min(Math.floor(es/2),dh)||dh;return X},createVisual:function(){var er=this;var X=this.options;var Y=X.visual;if(Y){this.visual=Y({low:this.low,high:this.high,rect:this.box.toRect(),sender:this.getSender(),options:{endCaps:X.endCaps,color:X.color,line:X.line},createVisual:function(){er.createDefaultVisual();var es=er.visual;delete er.visual;return es}})}else{this.createDefaultVisual()}},createDefaultVisual:function(){var ev=this;var et=this;var es=et.options;var eu=et.linePoints;var er={stroke:{color:es.color,width:es.line.width,dashType:es.line.dashType}};dP.fn.createVisual.call(this);for(var X=0;X<eu.length;X+=2){var Y=new bl(er).moveTo(eu[X].x,eu[X].y).lineTo(eu[X+1].x,eu[X+1].y);en(Y);ev.visual.append(Y)}}});i(cE,{animation:{type:dI,delay:H},endCaps:true,line:{width:2},zIndex:1});var cr=cE.extend({getAxis:function(){var X=this.chart.seriesValueAxis(this.series);return X}});var dU=5;function bg(ex,es,X,ev){if(X===void 0){X={}}if(ev===void 0){ev=false}var et=X.defaults=X.defaults||{};var eu=X.depth=X.depth||0;var er=false;X.excluded=X.excluded||[];if(eu>dU){return null}for(var ew in ex){if(!dv(ew,X.excluded)&&ex.hasOwnProperty(ew)){var Y=ex[ew];if(a1(Y)){er=true;if(!ev){ex[ew]=bF(Y(es),et[ew])}}else{if(t(Y)){if(!ev){X.defaults=et[ew]}X.depth++;er=bg(Y,es,X,ev)||er;X.depth--}}}}return er}function c4(er){var es=er.length;var X=0;for(var Y=0;Y<es;Y++){X=Math.max(X,er[Y].data.length)}return X}var dF=dP.extend({init:function(Y,X){dP.fn.init.call(this,X);this.plotArea=Y;this.chartService=Y.chartService;this.categoryAxis=Y.seriesCategoryAxis(X.series[0]);this.valueAxisRanges={};this.points=[];this.categoryPoints=[];this.seriesPoints=[];this.seriesOptions=[];this._evalSeries=[];this.render()},render:function(){this.traverseDataPoints(this.addValue.bind(this))},pointOptions:function(er,X){var Y=this.seriesOptions[X];if(!Y){var es=this.pointType().prototype.defaults;this.seriesOptions[X]=Y=aD({},es,{vertical:!this.options.invertAxes},er)}return Y},plotValue:function(ew){if(!ew){return 0}if(this.options.isStacked100&&p(ew.value)){var et=ew.categoryIx;var X=this.categoryPoints[et];var er=[];var ex=0;for(var es=0;es<X.length;es++){var eu=X[es];if(eu){var ev=ew.series.stack;var Y=eu.series.stack;if(ev&&Y&&ev.group!==Y.group){continue}if(p(eu.value)){ex+=Math.abs(eu.value);er.push(Math.abs(eu.value))}}}if(ex>0){return ew.value/ex}}return ew.value},plotRange:function(eC,Y){var ex=this;if(Y===void 0){Y=0}var X=this.categoryPoints[eC.categoryIx];if(this.options.isStacked){var et=this.plotValue(eC);var ew=et>=0;var ey=Y;var eE=false;for(var ev=0;ev<X.length;ev++){var ez=X[ev];if(eC===ez){break}var eA=eC.series.stack;var er=ez.series.stack;if(eA&&er){if(typeof eA===dn.STRING&&eA!==er){continue}if(eA.group&&eA.group!==er.group){continue}}var es=ex.plotValue(ez);if(es>=0&&ew||es<0&&!ew){ey+=es;et+=es;eE=true;if(ex.options.isStacked100){et=Math.min(et,1)}}}if(eE){ey-=Y}return[ey,et]}var eu=eC.series;var eD=this.seriesValueAxis(eu);var eB=this.categoryAxisCrossingValue(eD);return[eB,eC.value||eB]},stackLimits:function(Y,ey){var et=this;var er=cw;var ev=c9;for(var es=0;es<this.categoryPoints.length;es++){var X=et.categoryPoints[es];if(!X){continue}for(var eu=0;eu<X.length;eu++){var ex=X[eu];if(ex){if(ex.series.stack===ey||ex.series.axis===Y){var ew=et.plotRange(ex,0)[1];if(bD(ew)&&isFinite(ew)){ev=Math.max(ev,ew);er=Math.min(er,ew)}}}}}return{min:er,max:ev}},updateStackRange:function(){var ev=this;var er=this.options;var ex=er.isStacked;var ew=er.series;var Y={};if(ex){for(var et=0;et<ew.length;et++){var eu=ew[et];var es=eu.axis;var ey=es+eu.stack;var X=Y[ey];if(!X){X=ev.stackLimits(es,eu.stack);var ez=ev.errorTotals;if(ez){if(ez.negative.length){X.min=Math.min(X.min,b8.sparseArrayLimits(ez.negative).min)}if(ez.positive.length){X.max=Math.max(X.max,b8.sparseArrayLimits(ez.positive).max)}}if(X.min!==cw||X.max!==c9){Y[ey]=X}else{X=null}}if(X){ev.valueAxisRanges[es]=X}}}},addErrorBar:function(ex,Y,et){var ew=ex.value;var er=ex.series;var ey=ex.seriesIx;var eu=ex.options.errorBars;var X=Y.fields[dT];var es=Y.fields[bZ];var ev;if(p(X)&&p(es)){ev={low:X,high:es}}else{if(eu&&bD(eu.value)){this.seriesErrorRanges=this.seriesErrorRanges||[];this.seriesErrorRanges[ey]=this.seriesErrorRanges[ey]||new a6(eu.value,er,cy);ev=this.seriesErrorRanges[ey].getErrorRange(ew,eu.value)}}if(ev){ex.low=ev.low;ex.high=ev.high;this.addPointErrorBar(ex,et)}},addPointErrorBar:function(ew,es){var ev=!this.options.invertAxes;var ey=ew.options.errorBars;var er=ew.series;var eu=ew.low;var Y=ew.high;if(this.options.isStacked){var X=this.stackedErrorRange(ew,es);eu=X.low;Y=X.high}else{var et={categoryIx:es,series:er};this.updateRange({value:eu},et);this.updateRange({value:Y},et)}var ex=new cr(eu,Y,ev,this,er,ey);ew.errorBars=[ex];ew.append(ex)},stackedErrorRange:function(Y,et){var es=this.plotRange(Y,0)[1]-Y.value;var X=Y.low+es;var er=Y.high+es;this.errorTotals=this.errorTotals||{positive:[],negative:[]};if(X<0){this.errorTotals.negative[et]=Math.min(this.errorTotals.negative[et]||0,X)}if(er>0){this.errorTotals.positive[et]=Math.max(this.errorTotals.positive[et]||0,er)}return{low:X,high:er}},addValue:function(ev,es){var ew=es.categoryIx;var eu=es.series;var er=es.seriesIx;var et=this.categoryPoints[ew];if(!et){this.categoryPoints[ew]=et=[]}var Y=this.seriesPoints[er];if(!Y){this.seriesPoints[er]=Y=[]}var X=this.createPoint(ev,es);if(X){d7.extend(X,es);X.owner=this;X.dataItem=eu.data[ew];X.noteText=ev.fields.noteText;this.addErrorBar(X,ev,ew)}this.points.push(X);Y.push(X);et.push(X);this.updateRange(ev.valueFields,es)},evalPointOptions:function(ew,ev,Y,eu,es,ex){var X={defaults:es._defaults,excluded:["data","aggregate","_events","tooltip","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint"]};var er=this._evalSeries[ex];if(!bD(er)){this._evalSeries[ex]=er=bg(ew,{},X,true)}var et=ew;if(er){et=aD({},et);bg(et,{value:ev,category:Y,index:eu,series:es,dataItem:es.data[eu]},X)}return et},updateRange:function(es,X){var et=X.series.axis;var er=es.value;var Y=this.valueAxisRanges[et];if(isFinite(er)&&er!==null){Y=this.valueAxisRanges[et]=Y||{min:cw,max:c9};Y.min=Math.min(Y.min,er);Y.max=Math.max(Y.max,er)}},seriesValueAxis:function(X){var er=this.plotArea;var es=X.axis;var Y=es?er.namedValueAxes[es]:er.valueAxis;if(!Y){throw new Error("Unable to locate value axis with name "+es)}return Y},reflow:function(Y){var eu=this;var et=this.categorySlots=[];var es=this.points;var er=this.categoryAxis;var X=0;this.traverseDataPoints(function(ey,eB){var eA=eB.categoryIx;var eE=eB.series;var eD=eu.seriesValueAxis(eE);var eC=es[X++];var ev=et[eA];if(!ev){et[eA]=ev=eu.categorySlot(er,eA,eD)}if(eC){var ew=eu.plotRange(eC,eD.startValue());var ez=eD.getSlot(ew[0],ew[1],!eu.options.clip);if(ez){var ex=eu.pointSlot(ev,ez);eC.aboveAxis=eu.aboveAxis(eC,eD);eC.stackValue=ew[1];if(eu.options.isStacked100){eC.percentage=eu.plotValue(eC)}eu.reflowPoint(eC,ex)}else{eC.visible=false}}});this.reflowCategories(et);this.box=Y},aboveAxis:function(X,es){var Y=this.categoryAxisCrossingValue(es);var er=X.value;return es.options.reverse?er<Y:er>=Y},categoryAxisCrossingValue:function(es){var er=this.categoryAxis;var X=es.options;var Y=[].concat(X.axisCrossingValues||X.axisCrossingValue);return Y[er.axisIndex||0]||0},reflowPoint:function(X,Y){X.reflow(Y)},reflowCategories:function(){},pointSlot:function(Y,es){var X=this.options;var er=X.invertAxes;var eu=er?es:Y;var et=er?Y:es;return new cB(eu.x1,et.y1,eu.x2,et.y2)},categorySlot:function(Y,X){return Y.getSlot(X)},traverseDataPoints:function(ez){var er=this;var Y=this.options.series;var et=this.categoryAxis.options.categories||[];var eu=c4(Y);var X=Y.length;for(var eB=0;eB<X;eB++){er._outOfRangeCallback(Y[eB],"_outOfRangeMinPoint",eB,ez)}for(var es=0;es<eu;es++){for(var ew=0;ew<X;ew++){var eA=Y[ew];var ey=et[es];var ex=er._bindPoint(eA,ew,es);ez(ex,{category:ey,categoryIx:es,series:eA,seriesIx:ew})}}for(var ev=0;ev<X;ev++){er._outOfRangeCallback(Y[ev],"_outOfRangeMaxPoint",ev,ez)}},_outOfRangeCallback:function(er,et,Y,ev){var es=er[et];if(es){var eu=es.categoryIx;var X=this._bindPoint(er,Y,eu,es.item);ev(X,{category:es.category,categoryIx:eu,series:er,seriesIx:Y})}},_bindPoint:function(er,X,eu,es){if(!this._bindCache){this._bindCache=[]}var Y=this._bindCache[X];if(!Y){Y=this._bindCache[X]=[]}var et=Y[eu];if(!et){et=Y[eu]=bt.current.bindPoint(er,eu,es)}return et},formatPointValue:function(X,Y){if(X.value===null){return""}return this.chartService.format.auto(Y,X.value)},pointValue:function(X){return X.valueFields.value}});i(dF,{series:[],invertAxes:false,isStacked:false,clip:true});var l={click:function(X,Y){return X.trigger(bq,this.eventArgs(Y))},hover:function(X,Y){return X.trigger(O,this.eventArgs(Y))},eventArgs:function(X){return{value:this.value,percentage:this.percentage,stackValue:this.stackValue,category:this.category,series:this.series,dataItem:this.dataItem,runningTotal:this.runningTotal,total:this.total,element:cK(X),originalEvent:X,point:this}}};var bG={createNote:function(){var X=this.options.notes;var Y=this.noteText||X.label.text;if(X.visible!==false&&bD(Y)&&Y!==null){this.note=new b8.Note({value:this.value,text:Y,dataItem:this.dataItem,category:this.category,series:this.series},this.options.notes,this.owner.chartService);this.append(this.note)}}};var bR="above";var dN="below";var dK=dP.extend({init:function(Y,X){dP.fn.init.call(this);this.value=Y;this.options=X;this.aboveAxis=bF(this.options.aboveAxis,true);this.tooltipTracking=true},render:function(){var er=this.options;var es=er.markers;var et=er.labels;if(this._rendered){return}this._rendered=true;if(es.visible&&es.size){this.marker=this.createMarker();this.append(this.marker)}if(et.visible){var Y=this.value;if(et.template){var X=b4.compile(et.template);Y=X({dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,series:this.series})}else{if(et.format){Y=this.formatValue(et.format)}}this.label=new aV(Y,aD({align:ef,vAlign:ef,margin:{left:5,right:5},zIndex:bF(et.zIndex,this.series.zIndex)},et));this.append(this.label)}this.createNote();if(this.errorBar){this.append(this.errorBar)}},markerBorder:function(){var Y=this.options.markers;var er=Y.background;var X=aD({color:this.color},Y.border);if(!bD(X.color)){X.color=new A(er).brightness(P).toHex()}return X},createVisual:function(){},createMarker:function(){var Y=this.options.markers;var X=new q({type:Y.type,width:Y.size,height:Y.size,rotation:Y.rotation,background:Y.background,border:this.markerBorder(),opacity:Y.opacity,zIndex:bF(Y.zIndex,this.series.zIndex),animation:Y.animation,visual:Y.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category});return X},markerBox:function(){if(!this.marker){this.marker=this.createMarker();this.marker.reflow(this._childBox)}return this.marker.box},reflow:function(ev){var et=this;var Y=this;var ey=Y.options;var eu=Y.aboveAxis;var er=ey.vertical;this.render();this.box=ev;var ex=ev.clone();if(er){if(eu){ex.y1-=ex.height()}else{ex.y2+=ex.height()}}else{if(eu){ex.x1+=ex.width()}else{ex.x2-=ex.width()}}this._childBox=ex;if(this.marker){this.marker.reflow(ex)}this.reflowLabel(ex);if(this.errorBars){for(var es=0;es<this.errorBars.length;es++){et.errorBars[es].reflow(ex)}}if(this.note){var ew=this.markerBox();if(!(ey.markers.visible&&ey.markers.size)){var X=ew.center();ew=new cB(X.x,X.y,X.x,X.y)}this.note.reflow(ew)}},reflowLabel:function(et){var es=this;var er=es.options;var Y=es.label;var X=er.labels.position;if(Y){X=X===bR?bQ:X;X=X===dN?ei:X;Y.reflow(et);Y.box.alignTo(this.markerBox(),X);Y.reflow(Y.box)}},createHighlight:function(){var es=this.options.highlight.markers;var er=this.markerBorder().color;var X=this.options.markers;var Y=X.size+(X.border.width||0)+(es.border.width||0);var et=new q({type:X.type,width:Y,height:Y,rotation:X.rotation,background:es.color||er,border:{color:es.border.color,width:es.border.width,opacity:bF(es.border.opacity,1)},opacity:bF(es.opacity,1)});et.reflow(this._childBox);return et.getElement()},highlightVisual:function(){return(this.marker||{}).visual},highlightVisualArgs:function(){var Y=this.marker;var eu,et;if(Y){et=Y.paddingBox.toRect();eu=Y.visual}else{var es=this.options.markers.size;var er=es/2;var X=this.box.center();et=new em.Rect([X.x-er,X.y-er],[es,es])}return{options:this.options,rect:et,visual:eu}},tooltipAnchor:function(){var es=this.markerBox();var er=this.owner.pane.clipBox();var ev=!er||er.overlaps(es);if(ev){var X=es.x2+h;var Y=cM;var eu,et;if(this.aboveAxis){eu=es.y1;et=ei}else{eu=es.y2;et=bQ}return{point:new ec(X,eu),align:{horizontal:Y,vertical:et}}}},formatValue:function(X){return this.owner.formatPointValue(this,X)},overlapsBox:function(X){var Y=this.markerBox();return Y.overlaps(X)}});dK.prototype.defaults={vertical:true,markers:{visible:true,background:bY,size:ds,type:bn,border:{width:2},opacity:1},labels:{visible:false,position:bR,margin:bs(3),padding:bs(4),animation:{type:dI,delay:H}},notes:{label:{}},highlight:{markers:{border:{color:"#fff",width:2}}},errorBars:{line:{width:1}}};aD(dK.prototype,l);aD(dK.prototype,bG);var cC=dP.extend({init:function(er,Y,X){dP.fn.init.call(this);this.linePoints=er;this.series=Y;this.seriesIx=X},points:function(et){var es=this.linePoints.concat(et||[]);var Y=[];for(var X=0,er=es.length;X<er;X++){if(es[X].visible!==false){Y.push(es[X]._childBox.toRect().center())}}return Y},createVisual:function(){var et=this;var er=et.options;var es=et.series;var Y=es.color;var eu=es._defaults;if(a1(Y)&&eu){Y=eu.color}var X=bl.fromPoints(this.points(),{stroke:{color:Y,width:es.width,opacity:es.opacity,dashType:es.dashType},zIndex:es.zIndex});if(er.closed){X.close()}this.visual=X},aliasFor:function(Y,X){return this.parent.getNearestPoint(X.x,X.y,this.seriesIx)}});i(cC,{closed:false});var di=cC.extend({points:function(Y){var X=this.calculateStepPoints(this.linePoints);if(Y&&Y.length){X=X.concat(this.calculateStepPoints(Y).reverse())}return X},calculateStepPoints:function(eD){var eA=this.parent;var Y=eA.plotArea;var ex=Y.seriesCategoryAxis(this.series);var es=eA.seriesMissingValues(this.series)===c;var ez=ex.options.reverse;var ev=ex.options.vertical;var et=ez?2:1;var eB=ez?1:2;var er=eD.length;var eE=[];for(var ew=1;ew<er;ew++){var ey=eD[ew-1];var eC=eD[ew];var X=ey.markerBox().center();var eu=eC.markerBox().center();if(ex.options.justified){eE.push(new bf(X.x,X.y));if(ev){eE.push(new bf(X.x,eu.y))}else{eE.push(new bf(eu.x,X.y))}eE.push(new bf(eu.x,eu.y))}else{if(ev){eE.push(new bf(X.x,ey.box[dL+et]));eE.push(new bf(X.x,ey.box[dL+eB]));if(es){eE.push(new bf(X.x,eC.box[dL+et]))}eE.push(new bf(eu.x,eC.box[dL+et]));eE.push(new bf(eu.x,eC.box[dL+eB]))}else{eE.push(new bf(ey.box[dM+et],X.y));eE.push(new bf(ey.box[dM+eB],X.y));if(es){eE.push(new bf(eC.box[dM+et],X.y))}eE.push(new bf(eC.box[dM+et],eu.y));eE.push(new bf(eC.box[dM+eB],eu.y))}}}return eE||[]}});var bP=cC.extend({createVisual:function(){var er=this.series;var et=er._defaults;var X=er.color;if(a1(X)&&et){X=et.color}var es=new b8.CurveProcessor(this.options.closed);var Y=es.process(this.points());var eu=new bl({stroke:{color:X,width:er.width,opacity:er.opacity,dashType:er.dashType},zIndex:er.zIndex});eu.segments.push.apply(eu.segments,Y);this.visual=eu}});var ah={renderSegments:function(){var es=this;var X=this;var eA=X.options;var eB=X.seriesPoints;var er=eA.series;var Y=eB.length;var eu;this._segments=[];for(var eC=0;eC<Y;eC++){var ez=er[eC];var ey=es.sortPoints(eB[eC]);var ew=ey.length;var ev=[];for(var et=0;et<ew;et++){var ex=ey[et];if(ex){ev.push(ex)}else{if(es.seriesMissingValues(ez)!==c){if(ev.length>1){eu=es.createSegment(ev,ez,eC,eu);es._addSegment(eu)}ev=[]}}}if(ev.length>1){eu=es.createSegment(ev,ez,eC,eu);es._addSegment(eu)}}this.children.unshift.apply(this.children,this._segments)},_addSegment:function(X){this._segments.push(X);X.parent=this},sortPoints:function(X){return X},seriesMissingValues:function(X){var Y=X.missingValues;var er=!Y&&this.options.isStacked;return er?bL:Y||c},getNearestPoint:function(ex,ew,ez){var et=new ec(ex,ew);var Y=this.seriesPoints[ez];var eu=cw;var ev;for(var es=0;es<Y.length;es++){var ey=Y[es];if(ey&&bD(ey.value)&&ey.value!==null&&ey.visible!==false){var X=ey.box;var er=X.center().distanceTo(et);if(er<eu){ev=ey;eu=er}}}return ev}};var cY=e.extend({setup:function(){this._setEnd(this.options.box.x1)},step:function(Y){var X=this.options.box;this._setEnd(b8.interpolateValue(X.x1,X.x2,Y))},_setEnd:function(X){var es=this.element;var Y=es.segments;var et=Y[1].anchor();var er=Y[2].anchor();es.suspend();et.setX(X);es.resume();er.setX(X)}});i(cY,{duration:H});eq.current.register("clip",cY);function cD(Y){for(var X=0;X<Y.length;X++){if(bD(Y[X].zIndex)){return true}}}var b={createAnimation:function(){var X=this.getRoot();if(X&&(X.options||{}).transitions!==false){var er=X.box;var Y=bl.fromRect(er.toRect());this.visual.clip(Y);this.animation=new cY(Y,{box:er});if(cD(this.options.series)){this._setChildrenAnimation(Y)}}},_setChildrenAnimation:function(es){var er=this.animationPoints();for(var Y=0;Y<er.length;Y++){var X=er[Y];if(X&&X.visual&&bD(X.visual.options.zIndex)){X.visual.clip(es)}}}};var b3=dF.extend({render:function(){dF.fn.render.call(this);this.updateStackRange();this.renderSegments()},pointType:function(){return dK},createPoint:function(er,ev){var eu=ev.categoryIx;var X=ev.category;var es=ev.series;var ez=ev.seriesIx;var ey=this.seriesMissingValues(es);var ex=er.valueFields.value;if(!bD(ex)||ex===null){if(ey===bL){ex=0}else{return null}}var et=this.pointOptions(es,ez);et=this.evalPointOptions(et,ex,X,eu,es,ez);var Y=er.fields.color||es.color;if(a1(es.color)){Y=et.color}var ew=new dK(ex,et);ew.color=Y;this.append(ew);return ew},plotRange:function(Y){var ev=this;var et=this.plotValue(Y);if(this.options.isStacked){var eu=Y.categoryIx;var er=this.categoryPoints[eu];for(var es=0;es<er.length;es++){var X=er[es];if(Y===X){break}et+=ev.plotValue(X);if(ev.options.isStacked100){et=Math.min(et,1)}}}return[et,et]},createSegment:function(et,Y,X){var er=Y.style;var es;if(er===v){es=di}else{if(er===aM){es=bP}else{es=cC}}return new es(et,Y,X)},animationPoints:function(){var er=this.points;var Y=[];for(var X=0;X<er.length;X++){Y.push((er[X]||{}).marker)}return Y.concat(this._segments)}});aD(b3.prototype,ah,b);var cn={points:function(){var ev=this.parent;var X=ev.plotArea;var er=ev.options.invertAxes;var ez=ev.seriesValueAxis(this.series);var eB=ez.lineBox();var eu=X.seriesCategoryAxis(this.series);var Y=eu.lineBox();var eA=this.stackPoints;var ey=this._linePoints(eA);var ew=er?dM:dL;var et=er?Y.x1:Y.y1;et=ch(et,eB[ew+1],eB[ew+2]);if(!this.stackPoints&&ey.length>1){var es=ey[0];var ex=dC(ey);if(er){ey.unshift(new bf(et,es.y));ey.push(new bf(et,ex.y))}else{ey.unshift(new bf(es.x,et));ey.push(new bf(ex.x,et))}}return ey},createVisual:function(){var Y=this.series;var er=Y._defaults;var X=Y.color;if(a1(X)&&er){X=er.color}this.visual=new aK({zIndex:Y.zIndex});this.createArea(X);this.createLine(X)},createLine:function(er){var es=this.series;var Y=aD({color:er,opacity:es.opacity},es.line);if(Y.visible!==false&&Y.width>0){var X=bl.fromPoints(this._linePoints(),{stroke:{color:Y.color,width:Y.width,opacity:Y.opacity,dashType:Y.dashType,lineCap:"butt"}});this.visual.append(X)}},createArea:function(X){var Y=this.series;var er=bl.fromPoints(this.points(),{fill:{color:X,opacity:Y.opacity},stroke:null});this.visual.append(er)}};var au=cC.extend({init:function(es,er,Y,X){cC.fn.init.call(this,es,Y,X);this.stackPoints=er}});aD(au.prototype,cn,{_linePoints:cC.prototype.points});var be=di.extend({init:function(es,er,Y,X){di.fn.init.call(this,es,Y,X);this.stackPoints=er}});aD(be.prototype,cn,{_linePoints:di.prototype.points});var dG=au.extend({init:function(et,er,es,Y,X){au.fn.init.call(this,et,[],Y,X);this.prevSegment=er;this.isStacked=es},strokeSegments:function(){var X=this._strokeSegments;if(!X){var Y=new b8.CurveProcessor(this.options.closed);var er=cC.prototype.points.call(this);X=this._strokeSegments=Y.process(er)}return X},createVisual:function(){var Y=this.series;var er=Y._defaults;var X=Y.color;if(a1(X)&&er){X=er.color}this.visual=new aK({zIndex:Y.zIndex});this.createFill({fill:{color:X,opacity:Y.opacity},stroke:null});this.createStroke({stroke:aD({color:X,opacity:Y.opacity,lineCap:"butt"},Y.line)})},createFill:function(X){var ez=this.strokeSegments();var Y=ez.slice(0);var er=this.prevSegment;if(this.isStacked&&er){var et=er.strokeSegments();var ew=dC(et).anchor();Y.push(new em.Segment(ew,ew,dC(ez).anchor()));var es=[];for(var ex=et.length-1;ex>=0;ex--){var eu=et[ex];es.push(new em.Segment(eu.anchor(),eu.controlOut(),eu.controlIn()))}bU(Y,es);var ev=Y[0].anchor();Y.push(new em.Segment(ev,ev,dC(es).anchor()))}var ey=new bl(X);ey.segments.push.apply(ey.segments,Y);this.closeFill(ey);this.visual.append(ey)},closeFill:function(ey){var ex=this.parent;var eu=this.prevSegment;var Y=ex.plotArea;var er=ex.options.invertAxes;var eB=ex.seriesValueAxis(this.series);var eC=eB.lineBox();var ew=Y.seriesCategoryAxis(this.series);var X=ew.lineBox();var ez=er?dM:dL;var ev=this.strokeSegments();var et=ev[0].anchor();var eA=dC(ev).anchor();var es=er?X.x1:X.y1;es=ch(es,eC[ez+1],eC[ez+2]);if(!(ex.options.isStacked&&eu)&&ev.length>1){if(er){ey.lineTo(es,eA.y).lineTo(es,et.y)}else{ey.lineTo(eA.x,es).lineTo(et.x,es)}}},createStroke:function(X){if(X.stroke.width>0){var Y=new bl(X);Y.segments.push.apply(Y.segments,this.strokeSegments());this.visual.append(Y)}}});var d6=b3.extend({createSegment:function(es,ew,ex,er){var et=this.options.isStacked;var X=(ew.line||{}).style;var eu;if(et&&ex>0&&er){var ev=this.seriesMissingValues(ew);if(ev!=="gap"){eu=er.linePoints}else{eu=this._gapStackPoints(es,ex,X)}if(X!==v){eu=eu.slice(0).reverse()}}if(X===aM){return new dG(es,er,et,ew,ex)}var Y;if(X===v){Y=be}else{Y=au}return new Y(es,eu,ew,ex)},reflow:function(Y){var eu=this;b3.fn.reflow.call(this,Y);var et=this._stackPoints;if(et){for(var X=0;X<et.length;X++){var es=et[X];var er=eu.categoryAxis.getSlot(es.categoryIx);es.reflow(er)}}},_gapStackPoints:function(ev,ez,Y){var es=this;var eA=this.seriesPoints;var et=ev[0].categoryIx;var er=et+ev.length;var ey=[];this._stackPoints=this._stackPoints||[];for(var ex=et;ex<er;ex++){var eu=ez;var ew=void 0;do{eu--;ew=eA[eu][ex]}while(eu>0&&!ew);if(ew){if(Y!==v&&ex>et&&!eA[eu][ex-1]){ey.push(es._previousSegmentPoint(ex,ex-1,eu))}ey.push(ew);if(Y!==v&&ex+1<er&&!eA[eu][ex+1]){ey.push(es._previousSegmentPoint(ex,ex+1,eu))}}else{var X=es._createGapStackPoint(ex);es._stackPoints.push(X);ey.push(X)}}return ey},_previousSegmentPoint:function(eu,es,et){var Y=this.seriesPoints;var er=et;var X;while(er>0&&!X){er--;X=Y[er][es]}if(!X){X=this._createGapStackPoint(eu);this._stackPoints.push(X)}else{X=Y[er][eu]}return X},_createGapStackPoint:function(er){var Y=this.pointOptions({},0);var X=new dK(0,Y);X.categoryIx=er;X.series={};return X},seriesMissingValues:function(X){return X.missingValues||bL}});var d4=aw.extend({init:function(){this.axisRanges={}},update:function(er){var es=this.axisRanges;for(var et in er){var Y=er[et];var X=es[et];es[et]=X=X||{min:cw,max:c9};X.min=Math.min(X.min,Y.min);X.max=Math.max(X.max,Y.max)}},reset:function(X){this.axisRanges[X]=undefined},query:function(X){return this.axisRanges[X]}});var a8=dP.extend({init:function(Y,X){dP.fn.init.call(this,X);this.textBox=new aV(Y,this.options);this.append(this.textBox)},createVisual:function(){this.textBox.options.noclip=this.options.noclip},reflow:function(es){var ex=this.options;var X=ex.vertical;var er=ex.aboveAxis;var eu=this.children[0];var ew=eu.options;var Y=eu.box;var et=eu.options.padding;var ev=es;ew.align=X?ef:cM;ew.vAlign=X?bQ:ef;if(ex.position===x){if(X){ew.vAlign=bQ;if(!er&&Y.height()<es.height()){ew.vAlign=ei}}else{ew.align=er?d9:cM}}else{if(ex.position===ef){ew.vAlign=ef;ew.align=ef}else{if(ex.position===b1){if(X){ew.vAlign=er?ei:bQ}else{ew.align=er?cM:d9}}else{if(ex.position===aO){if(X){if(er){ev=new cB(es.x1,es.y1-Y.height(),es.x2,es.y1)}else{ev=new cB(es.x1,es.y2,es.x2,es.y2+Y.height())}}else{ew.align=ef;if(er){ev=new cB(es.x2,es.y1,es.x2+Y.width(),es.y2)}else{ev=new cB(es.x1-Y.width(),es.y1,es.x1,es.y2)}}}}}}if(!ex.rotation){if(X){et.left=et.right=(ev.width()-eu.contentBox.width())/2}else{et.top=et.bottom=(ev.height()-eu.contentBox.height())/2}}eu.reflow(ev)},alignToClipBox:function(eu){var er=this.options.vertical;var et=er?dL:dM;var ew=et+"1";var X=et+"2";var ev=this.children[0];var es=this.parent.box;if(es[ew]<eu[ew]||eu[X]<es[X]){var Y=ev.paddingBox.clone();Y[ew]=Math.max(es[ew],eu[ew]);Y[X]=Math.min(es[X],eu[X]);this.reflow(Y)}}});i(a8,{position:aO,margin:bs(3),padding:bs(4),color:aN,background:"",border:{width:1,color:""},aboveAxis:true,vertical:false,animation:{type:dI,delay:H},zIndex:2});function ax(Y){var X=Y.overlay;return X&&X.gradient&&X.gradient!=="none"}var bm=6;var az=dP.extend({init:function(Y,X){dP.fn.init.call(this);this.options=X;this.color=X.color||bY;this.aboveAxis=bF(this.options.aboveAxis,true);this.value=Y},render:function(){if(this._rendered){return}this._rendered=true;this.createLabel();this.createNote();if(this.errorBar){this.append(this.errorBar)}},createLabel:function(){var X=this.options;var es=X.labels;if(es.visible){var er;if(es.template){var Y=b4.compile(es.template);er=Y({dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,series:this.series})}else{er=this.formatValue(es.format)}this.label=new a8(er,aD({vertical:X.vertical},es));this.append(this.label)}},formatValue:function(X){return this.owner.formatPointValue(this,X)},reflow:function(X){var es=this;this.render();var Y=this.label;this.box=X;if(Y){Y.options.aboveAxis=this.aboveAxis;Y.reflow(X)}if(this.note){this.note.reflow(X)}if(this.errorBars){for(var er=0;er<this.errorBars.length;er++){es.errorBars[er].reflow(X)}}},createVisual:function(){var eu=this;var et=this;var es=et.box;var X=et.options;var Y=X.visual;if(this.visible!==false){dP.fn.createVisual.call(this);if(Y){var er=this.rectVisual=Y({category:this.category,dataItem:this.dataItem,value:this.value,sender:this.getSender(),series:this.series,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,rect:es.toRect(),createVisual:function(){var ev=new aK();eu.createRect(ev);return ev},options:X});if(er){this.visual.append(er)}}else{if(es.width()>0&&es.height()>0){this.createRect(this.visual)}}}},createRect:function(X){var ey=this.options;var er=ey.border;var et=bD(er.opacity)?er.opacity:ey.opacity;var eu=this.box.toRect();eu.size.width=Math.round(eu.size.width);var ex=this.rectVisual=bl.fromRect(eu,{fill:{color:this.color,opacity:ey.opacity},stroke:{color:this.getBorderColor(),width:er.width,opacity:et,dashType:er.dashType}});var Y=this.box.width();var ev=this.box.height();var ew=ey.vertical?Y:ev;if(ew>bm){en(ex);if(Y<1||ev<1){ex.options.stroke.lineJoin="round"}}X.append(ex);if(ax(ey)){var es=this.createGradientOverlay(ex,{baseColor:this.color},aD({end:!ey.vertical?[0,1]:undefined},ey.overlay));X.append(es)}},createHighlight:function(Y){var X=bl.fromRect(this.box.toRect(),Y);return en(X)},highlightVisual:function(){return this.rectVisual},highlightVisualArgs:function(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},getBorderColor:function(){var X=this.color;var Y=this.options.border;var er=Y._brightness||P;var es=Y.color;if(!bD(es)){es=new A(X).brightness(er).toHex()}return es},tooltipAnchor:function(){var et=this;var ez=et.options;var ev=et.box;var ew=et.aboveAxis;var X=this.owner.pane.clipBox()||ev;var es=cM;var eu=bQ;var ey,ex;if(ez.vertical){ey=Math.min(ev.x2,X.x2)+h;if(ew){ex=Math.max(ev.y1,X.y1)}else{ex=Math.min(ev.y2,X.y2);eu=ei}}else{var er=Math.max(ev.x1,X.x1);var Y=Math.min(ev.x2,X.x2);if(ez.isStacked){eu=ei;if(ew){es=d9;ey=Y}else{ey=er}ex=Math.max(ev.y1,X.y1)-h}else{if(ew){ey=Y+h}else{ey=er-h;es=d9}ex=Math.max(ev.y1,X.y1)}}return{point:new ec(ey,ex),align:{horizontal:es,vertical:eu}}},overlapsBox:function(X){return this.box.overlaps(X)}});aD(az.prototype,l);aD(az.prototype,bG);az.prototype.defaults={border:{width:1},vertical:true,overlay:{gradient:"glass"},labels:{visible:false,format:"{0}"},opacity:1,notes:{label:{}}};var ba=dP.extend({reflow:function(ew){var Y=this.options;var et=Y.vertical;var eA=Y.gap;var ez=Y.spacing;var X=this.children;var ex=X.length;var es=et?dL:dM;var ey=ex+eA+ez*(ex-1);var er=(et?ew.height():ew.width())/ey;var ev=ew[es+1]+er*(eA/2);for(var eu=0;eu<ex;eu++){var eB=(X[eu].box||ew).clone();eB[es+1]=ev;eB[es+2]=ev+er;X[eu].reflow(eB);if(eu<ex-1){ev+=er*ez}ev+=er}}});i(ba,{vertical:false,gap:0,spacing:0});var dr=dP.extend({reflow:function(ew){var eu=this;var X=this.options.vertical?dM:dL;var Y=this.children;var es=Y.length;var ev=this.box=new cB();for(var et=0;et<es;et++){var er=Y[et];if(er.visible!==false){var ex=er.box.clone();ex.snapTo(ew,X);if(et===0){ev=eu.box=ex.clone()}er.reflow(ex);ev.wrap(ex)}}}});i(dr,{vertical:true});var c7=dF.extend({render:function(){dF.fn.render.call(this);this.updateStackRange()},pointType:function(){return az},clusterType:function(){return ba},stackType:function(){return dr},stackLimits:function(er,Y){var X=dF.fn.stackLimits.call(this,er,Y);return X},createPoint:function(eH,ey){var eG=ey.categoryIx;var eC=ey.category;var ev=ey.series;var ez=ey.seriesIx;var et=this;var er=et.options;var es=et.children;var eu=er.isStacked;var eA=this.pointValue(eH);var ew=this.pointOptions(ev,ez);var ex=ew.labels;if(eu){if(ex.position===aO){ex.position=x}}ew.isStacked=eu;var eD=eH.fields.color||ev.color;if(eA<0&&ew.negativeColor){eD=ew.negativeColor}ew=this.evalPointOptions(ew,eA,eC,eG,ev,ez);if(a1(ev.color)){eD=ew.color}var X=this.pointType();var eB=new X(eA,ew);eB.color=eD;var eF=es[eG];if(!eF){var Y=this.clusterType();eF=new Y({vertical:er.invertAxes,gap:er.gap,spacing:er.spacing});this.append(eF)}if(eu){var eE=this.getStackWrap(ev,eF);eE.append(eB)}else{eF.append(eB)}return eB},getStackWrap:function(eu,Y){var X=eu.stack;var er=X?X.group||X:X;var et=Y.children;var ew;if(typeof er===dn.STRING){for(var es=0;es<et.length;es++){if(et[es]._stackGroup===er){ew=et[es];break}}}else{ew=et[0]}if(!ew){var ev=this.stackType();ew=new ev({vertical:!this.options.invertAxes});ew._stackGroup=er;Y.append(ew)}return ew},categorySlot:function(ev,eu,ew){var er=this.options;var Y=ev.getSlot(eu);var X=ew.startValue();if(er.isStacked){var et=ew.getSlot(X,X,true);var es=er.invertAxes?dM:dL;Y[es+1]=Y[es+2]=et[es+1]}return Y},reflowCategories:function(es){var Y=this.children;var er=Y.length;for(var X=0;X<er;X++){Y[X].reflow(es[X])}},createAnimation:function(){this._setAnimationOptions();dF.fn.createAnimation.call(this);if(cD(this.options.series)){this._setChildrenAnimation()}},_setChildrenAnimation:function(){var et=this;var es=this.points;for(var Y=0;Y<es.length;Y++){var X=es[Y];var er=X.visual;if(er&&bD(er.options.zIndex)){X.options.animation=et.options.animation;X.createAnimation()}}},_setAnimationOptions:function(){var Y=this.options;var er=Y.animation||{};var X;if(Y.isStacked){var es=this.seriesValueAxis(Y.series[0]);X=es.getSlot(es.startValue())}else{X=this.categoryAxis.getSlot(0)}er.origin=new bf(X.x1,X.y1);er.vertical=!Y.invertAxes}});i(c7,{animation:{type:cc}});var a3=dP.extend({init:function(Y,X){dP.fn.init.call(this,X);this.value=Y},reflow:function(er){var X=this;var ey=X.options;var ev=X.value;var et=X.owner;var ex=et.seriesValueAxis(ey);var es=ex.getSlot(ev.open,ev.close);var Y=ex.getSlot(ev.low,ev.high);es.x1=Y.x1=er.x1;es.x2=Y.x2=er.x2;this.realBody=es;var eu=Y.center().x;var ew=[];ew.push([[eu,Y.y1],[eu,es.y1]]);ew.push([[eu,es.y2],[eu,Y.y2]]);this.lines=ew;this.box=Y.clone().wrap(es);if(!this._rendered){this._rendered=true;this.createNote()}this.reflowNote()},reflowNote:function(){if(this.note){this.note.reflow(this.box)}},createVisual:function(){dP.fn.createVisual.call(this);this._mainVisual=this.mainVisual(this.options);this.visual.append(this._mainVisual);this.createOverlay()},mainVisual:function(X){var Y=new aK();this.createBody(Y,X);this.createLines(Y,X);return Y},createBody:function(Y,er){var X=bl.fromRect(this.realBody.toRect(),{fill:{color:this.color,opacity:er.opacity},stroke:null});if(er.border.width>0){X.options.set("stroke",{color:this.getBorderColor(),width:er.border.width,dashType:er.border.dashType,opacity:bF(er.border.opacity,er.opacity)})}en(X);Y.append(X);if(ax(er)){Y.append(this.createGradientOverlay(X,{baseColor:this.color},aD({end:!er.vertical?[0,1]:undefined},er.overlay)))}},createLines:function(X,Y){this.drawLines(X,Y,this.lines,Y.line)},drawLines:function(es,eu,er,et){if(!er){return}var X={stroke:{color:et.color||this.color,opacity:bF(et.opacity,eu.opacity),width:et.width,dashType:et.dashType,lineCap:"butt"}};for(var ev=0;ev<er.length;ev++){var Y=bl.fromPoints(er[ev],X);en(Y);es.append(Y)}},getBorderColor:function(){var X=this.options.border;var Y=X.color;if(!bD(Y)){Y=new A(this.color).brightness(X._brightness).toHex()}return Y},createOverlay:function(){var X=bl.fromRect(this.box.toRect(),{fill:{color:bY,opacity:0},stroke:null});this.visual.append(X)},createHighlight:function(){var X=this.options.highlight;var er=this.color;this.color=X.color||this.color;var Y=this.mainVisual(aD({},this.options,{line:{color:this.getBorderColor()}},X));this.color=er;return Y},highlightVisual:function(){return this._mainVisual},highlightVisualArgs:function(){return{options:this.options,rect:this.box.toRect(),visual:this._mainVisual}},tooltipAnchor:function(){var X=this.box;var Y=this.owner.pane.clipBox()||X;return{point:new ec(X.x2+h,Math.max(X.y1,Y.y1)+h),align:{horizontal:cM,vertical:bQ}}},formatValue:function(X){return this.owner.formatPointValue(this,X)},overlapsBox:function(X){return this.box.overlaps(X)}});i(a3,{vertical:true,border:{_brightness:0.8},line:{width:2},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{4:d}</th></tr><tr><td>Open:</td><td>{0:C}</td></tr><tr><td>High:</td><td>{1:C}</td></tr><tr><td>Low:</td><td>{2:C}</td></tr><tr><td>Close:</td><td>{3:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:true,label:{}}});aD(a3.prototype,l);aD(a3.prototype,bG);function C(X){return W(X)===X.length}var d2=dF.extend({reflowCategories:function(es){var Y=this.children;var er=Y.length;for(var X=0;X<er;X++){Y[X].reflow(es[X])}},addValue:function(eu,ex){var ew=ex.categoryIx;var er=ex.category;var ev=ex.series;var eE=ex.seriesIx;var et=this;var es=et.children;var eD=et.options;var eB=eu.valueFields;var ey=this.splitValue(eB);var eC=C(ey);var X=ev.data[ew];var Y=this.categoryPoints[ew];var eA;if(!Y){this.categoryPoints[ew]=Y=[]}if(eC){eA=this.createPoint(eu,ex)}var ez=es[ew];if(!ez){ez=new ba({vertical:eD.invertAxes,gap:eD.gap,spacing:eD.spacing});this.append(ez)}if(eA){this.updateRange(eB,ex);ez.append(eA);eA.categoryIx=ew;eA.category=er;eA.series=ev;eA.seriesIx=eE;eA.owner=this;eA.dataItem=X;eA.noteText=eu.fields.noteText}this.points.push(eA);Y.push(eA)},pointType:function(){return a3},createPoint:function(es,ew){var ev=ew.categoryIx;var Y=ew.category;var et=ew.series;var ez=ew.seriesIx;var X=this.pointType();var ey=es.valueFields;var eu=aD({},et);var er=es.fields.color||et.color;eu=this.evalPointOptions(eu,ey,Y,ev,et,ez);if(et.type===T){if(ey.open>ey.close){er=es.fields.downColor||et.downColor||et.color}}if(a1(et.color)){er=eu.color}eu.vertical=!this.options.invertAxes;var ex=new X(ey,eu);ex.color=er;return ex},splitValue:function(X){return[X.low,X.open,X.close,X.high]},updateRange:function(er,X){var et=X.series.axis;var es=this.splitValue(er);var Y=this.valueAxisRanges[et];Y=this.valueAxisRanges[et]=Y||{min:cw,max:c9};Y=this.valueAxisRanges[et]={min:Math.min.apply(Math,es.concat([Y.min])),max:Math.max.apply(Math,es.concat([Y.max]))}},formatPointValue:function(X,er){var Y=X.value;return this.chartService.format.auto(er,Y.open,Y.high,Y.low,Y.close,X.category)},animationPoints:function(){return this.points}});aD(d2.prototype,b);var bA=a3.extend({init:function(Y,X){a3.fn.init.call(this,Y,X);this.createNote()},reflow:function(er){var Y=this;var ey=Y.options;var ew=Y.value;var eu=Y.owner;var ex=eu.seriesValueAxis(ey);var et,X;this.boxSlot=X=ex.getSlot(ew.q1,ew.q3);this.realBody=X;this.reflowBoxSlot(er);this.whiskerSlot=et=ex.getSlot(ew.lower,ew.upper);this.reflowWhiskerSlot(er);var ev=ex.getSlot(ew.median);if(ew.mean){var es=ex.getSlot(ew.mean);this.meanPoints=this.calcMeanPoints(er,es)}this.whiskerPoints=this.calcWhiskerPoints(X,et);this.medianPoints=this.calcMedianPoints(er,ev);this.box=et.clone().wrap(X);this.reflowNote()},reflowBoxSlot:function(X){this.boxSlot.x1=X.x1;this.boxSlot.x2=X.x2},reflowWhiskerSlot:function(X){this.whiskerSlot.x1=X.x1;this.whiskerSlot.x2=X.x2},calcMeanPoints:function(Y,X){return[[[Y.x1,X.y1],[Y.x2,X.y1]]]},calcWhiskerPoints:function(Y,er){var X=er.center().x;return[[[X-5,er.y1],[X+5,er.y1],[X,er.y1],[X,Y.y1]],[[X-5,er.y2],[X+5,er.y2],[X,er.y2],[X,Y.y2]]]},calcMedianPoints:function(Y,X){return[[[Y.x1,X.y1],[Y.x2,X.y1]]]},renderOutliers:function(ez){var eu=this;var ey=this.value;var ex=ey.outliers||[];var ew=Math.abs(ey.q3-ey.q1)*3;var X=[];var er=ez.markers||{};for(var es=0;es<ex.length;es++){var et=ex[es];if(et<ey.q3+ew&&et>ey.q1-ew){er=ez.outliers}else{er=ez.extremes}var Y=aD({},er.border);if(!bD(Y.color)){if(bD(eu.color)){Y.color=eu.color}else{Y.color=new A(er.background).brightness(P).toHex()}}var ev=new q({type:er.type,width:er.size,height:er.size,rotation:er.rotation,background:er.background,border:Y,opacity:er.opacity});ev.value=et;X.push(ev)}this.reflowOutliers(X);return X},reflowOutliers:function(es){var ev=this;var eu=this.owner.seriesValueAxis(this.options);var X=this.box.center();for(var er=0;er<es.length;er++){var Y=es[er].value;var et=eu.getSlot(Y);if(ev.options.vertical){et.move(X.x)}else{et.move(undefined,X.y)}ev.box=ev.box.wrap(et);es[er].reflow(et)}},mainVisual:function(X){var et=a3.fn.mainVisual.call(this,X);var es=this.renderOutliers(X);for(var er=0;er<es.length;er++){var Y=es[er].getElement();if(Y){et.append(Y)}}return et},createLines:function(X,Y){this.drawLines(X,Y,this.whiskerPoints,Y.whiskers);this.drawLines(X,Y,this.medianPoints,Y.median);this.drawLines(X,Y,this.meanPoints,Y.mean)},getBorderColor:function(){if(this.color){return this.color}return a3.fn.getBorderColor.call(this)}});i(bA,{border:{_brightness:0.8},line:{width:2},median:{color:"#f6f6f6"},mean:{width:2,dashType:"dash",color:"#f6f6f6"},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{6:d}</th></tr><tr><td>Lower:</td><td>{0:C}</td></tr><tr><td>Q1:</td><td>{1:C}</td></tr><tr><td>Median:</td><td>{2:C}</td></tr><tr><td>Mean:</td><td>{5:C}</td></tr><tr><td>Q3:</td><td>{3:C}</td></tr><tr><td>Upper:</td><td>{4:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:true,label:{}},outliers:{visible:true,size:ds,type:dn.CROSS,background:bY,border:{width:2,opacity:1},opacity:0},extremes:{visible:true,size:ds,type:bn,background:bY,border:{width:2,opacity:1},opacity:0}});aD(bA.prototype,l);var dg=bA.extend({reflowBoxSlot:function(X){this.boxSlot.y1=X.y1;this.boxSlot.y2=X.y2},reflowWhiskerSlot:function(X){this.whiskerSlot.y1=X.y1;this.whiskerSlot.y2=X.y2},calcMeanPoints:function(Y,X){return[[[X.x1,Y.y1],[X.x1,Y.y2]]]},calcWhiskerPoints:function(Y,er){var X=er.center().y;return[[[er.x1,X-5],[er.x1,X+5],[er.x1,X],[Y.x1,X]],[[er.x2,X-5],[er.x2,X+5],[er.x2,X],[Y.x2,X]]]},calcMedianPoints:function(Y,X){return[[[X.x1,Y.y1],[X.x1,Y.y2]]]}});var dR=d2.extend({addValue:function(eu,ex){var ew=ex.categoryIx;var er=ex.category;var ev=ex.series;var eE=ex.seriesIx;var et=this;var es=et.children;var eD=et.options;var eB=eu.valueFields;var ey=this.splitValue(eB);var eC=C(ey);var X=ev.data[ew];var Y=this.categoryPoints[ew];var eA;if(!Y){this.categoryPoints[ew]=Y=[]}if(eC){eA=this.createPoint(eu,ex)}var ez=es[ew];if(!ez){ez=new ba({vertical:eD.invertAxes,gap:eD.gap,spacing:eD.spacing});this.append(ez)}if(eA){this.updateRange(eB,ex);ez.append(eA);eA.categoryIx=ew;eA.category=er;eA.series=ev;eA.seriesIx=eE;eA.owner=this;eA.dataItem=X}this.points.push(eA);Y.push(eA)},pointType:function(){if(this.options.invertAxes){return dg}return bA},splitValue:function(X){return[X.lower,X.q1,X.median,X.q3,X.upper]},updateRange:function(er,X){var et=X.series.axis;var Y=this.valueAxisRanges[et];var es=this.splitValue(er).concat(this.filterOutliers(er.outliers));if(bD(er.mean)){es=es.concat(er.mean)}Y=this.valueAxisRanges[et]=Y||{min:cw,max:c9};Y=this.valueAxisRanges[et]={min:Math.min.apply(Math,es.concat([Y.min])),max:Math.max.apply(Math,es.concat([Y.max]))}},formatPointValue:function(X,er){var Y=X.value;return this.chartService.format.auto(er,Y.lower,Y.q1,Y.median,Y.q3,Y.upper,Y.mean,X.category)},filterOutliers:function(Y){var et=(Y||[]).length;var X=[];for(var er=0;er<et;er++){var es=Y[er];if(bD(es)&&es!==null){X.push(es)}}return X}});var ed=cE.extend({getAxis:function(){var Y=this.chart.seriesAxes(this.series);var X=this.isVertical?Y.y:Y.x;return X}});function ej(X){return bD(X)&&X!==null}var cP=dP.extend({init:function(Y,X){dP.fn.init.call(this,X);this.plotArea=Y;this.chartService=Y.chartService;this._initFields();this.render()},_initFields:function(){this.xAxisRanges={};this.yAxisRanges={};this.points=[];this.seriesPoints=[];this.seriesOptions=[];this._evalSeries=[]},render:function(){this.traverseDataPoints(this.addValue.bind(this))},addErrorBar:function(ey,ew,eu){var ex=ey.value[ew];var eA=ew+"Value";var ez=ew+"ErrorLow";var er=ew+"ErrorHigh";var eB=eu.seriesIx;var Y=eu.series;var et=ey.options.errorBars;var X=eu[ez];var es=eu[er];if(p(ex)){var ev;if(p(X)&&p(es)){ev={low:X,high:es}}if(et&&bD(et[eA])){this.seriesErrorRanges=this.seriesErrorRanges||{x:[],y:[]};this.seriesErrorRanges[ew][eB]=this.seriesErrorRanges[ew][eB]||new a6(et[eA],Y,ew);ev=this.seriesErrorRanges[ew][eB].getErrorRange(ex,et[eA])}if(ev){this.addPointErrorBar(ev,ey,ew)}}},addPointErrorBar:function(es,ev,eu){var er=es.low;var X=es.high;var Y=ev.series;var ey=ev.options.errorBars;var et=eu===dL;var ex={};ev[eu+"Low"]=er;ev[eu+"High"]=X;ev.errorBars=ev.errorBars||[];var ew=new ed(er,X,et,this,Y,ey);ev.errorBars.push(ew);ev.append(ew);ex[eu]=er;this.updateRange(ex,Y);ex[eu]=X;this.updateRange(ex,Y)},addValue:function(ev,er){var et=ev.x;var es=ev.y;var ex=er.seriesIx;var Y=this.options.series[ex];var ew=this.seriesMissingValues(Y);var ey=this.seriesPoints[ex];var X=ev;if(!(ej(et)&&ej(es))){X=this.createMissingValue(X,ew)}var eu;if(X){eu=this.createPoint(X,er);if(eu){d7.extend(eu,er);this.addErrorBar(eu,dM,er);this.addErrorBar(eu,dL,er)}this.updateRange(X,er.series)}this.points.push(eu);ey.push(eu)},seriesMissingValues:function(X){return X.missingValues},createMissingValue:function(){},updateRange:function(ew,er){var et=this.chartService.intl;var ex=er.xAxis;var X=er.yAxis;var ev=ew.x;var es=ew.y;var Y=this.xAxisRanges[ex];var eu=this.yAxisRanges[X];if(ej(ev)){Y=this.xAxisRanges[ex]=Y||{min:cw,max:c9};if(B(ev)){ev=c5(et,ev)}Y.min=Math.min(Y.min,ev);Y.max=Math.max(Y.max,ev)}if(ej(es)){eu=this.yAxisRanges[X]=eu||{min:cw,max:c9};if(B(es)){es=c5(et,es)}eu.min=Math.min(eu.min,es);eu.max=Math.max(eu.max,es)}},evalPointOptions:function(er,ew,Y){var es=Y.series;var X=Y.seriesIx;var ev={defaults:es._defaults,excluded:["data","tooltip","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint"]};var eu=this._evalSeries[X];if(!bD(eu)){this._evalSeries[X]=eu=bg(er,{},ev,true)}var et=er;if(eu){et=aD({},er);bg(et,{value:ew,series:es,dataItem:Y.dataItem},ev)}return et},pointType:function(){return dK},pointOptions:function(er,X){var Y=this.seriesOptions[X];if(!Y){var es=this.pointType().prototype.defaults;this.seriesOptions[X]=Y=aD({},es,{markers:{opacity:er.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},er)}return Y},createPoint:function(eu,Y){var es=Y.series;var et=this.pointOptions(es,Y.seriesIx);var er=Y.color||es.color;et=this.evalPointOptions(et,eu,Y);if(a1(es.color)){er=et.color}var X=new dK(eu,et);X.color=er;this.append(X);return X},seriesAxes:function(er){var es=er.xAxis;var Y=er.yAxis;var eu=this.plotArea;var et=es?eu.namedXAxes[es]:eu.axisX;var X=Y?eu.namedYAxes[Y]:eu.axisY;if(!et){throw new Error("Unable to locate X axis with name "+es)}if(!X){throw new Error("Unable to locate Y axis with name "+Y)}return{x:et,y:X}},reflow:function(er){var et=this;var es=this.points;var X=!this.options.clip;var Y=0;this.traverseDataPoints(function(ey,ev){var eu=es[Y++];var ex=et.seriesAxes(ev.series);var eA=ex.x.getSlot(ey.x,ey.x,X);var ez=ex.y.getSlot(ey.y,ey.y,X);if(eu){if(eA&&ez){var ew=et.pointSlot(eA,ez);eu.reflow(ew)}else{eu.visible=false}}});this.box=er},pointSlot:function(Y,X){return new cB(Y.x1,X.y1,Y.x2,X.y2)},traverseDataPoints:function(ex){var et=this;var X=this;var es=X.options.series;var ez=X.seriesPoints;for(var eA=0;eA<es.length;eA++){var ey=es[eA];var er=ez[eA];if(!er){ez[eA]=[]}for(var ev=0;ev<ey.data.length;ev++){var Y=et._bindPoint(ey,eA,ev);var ew=Y.valueFields;var eu=Y.fields;ex(ew,aD({pointIx:ev,series:ey,seriesIx:eA,dataItem:ey.data[ev],owner:et},eu))}}},formatPointValue:function(X,er){var Y=X.value;return this.chartService.format.auto(er,Y.x,Y.y)},animationPoints:function(){var er=this.points;var Y=[];for(var X=0;X<er.length;X++){Y.push((er[X]||{}).marker)}return Y}});i(cP,{series:[],tooltip:{format:"{0}, {1}"},labels:{format:"{0}, {1}"},clip:true});aD(cP.prototype,b,{_bindPoint:dF.prototype._bindPoint});var dx=dK.extend({init:function(Y,X){dK.fn.init.call(this,Y,X);this.category=Y.category},createHighlight:function(){var er=this.options.highlight;var et=er.border;var ev=this.options.markers;var Y=this.box.center();var X=(ev.size+ev.border.width+et.width)/2;var eu=new aK();var ew=new n.Circle(new em.Circle([Y.x,Y.y+X/5+et.width/2],X+et.width/2),{stroke:{color:"none"},fill:this.createGradient({gradient:"bubbleShadow",color:ev.background,stops:[{offset:0,color:ev.background,opacity:0.3},{offset:1,color:ev.background,opacity:0}]})});var es=new n.Circle(new em.Circle([Y.x,Y.y],X),{stroke:{color:et.color||new A(ev.background).brightness(P).toHex(),width:et.width,opacity:et.opacity},fill:{color:ev.background,opacity:er.opacity}});eu.append(ew,es);return eu}});dx.prototype.defaults=aD({},dx.prototype.defaults,{labels:{position:ef},highlight:{opacity:1,border:{color:"#fff",width:2,opacity:1}}});var K=cP.extend({_initFields:function(){this._maxSize=c9;cP.fn._initFields.call(this)},addValue:function(Y,X){if(Y.size!==null&&(Y.size>0||Y.size<0&&X.series.negativeValues.visible)){this._maxSize=Math.max(this._maxSize,Math.abs(Y.size));cP.fn.addValue.call(this,Y,X)}else{this.points.push(null);this.seriesPoints[X.seriesIx].push(null)}},reflow:function(X){this.updateBubblesSize(X);cP.fn.reflow.call(this,X)},pointType:function(){return dx},createPoint:function(ex,ev){var er=ev.series;var eu=er.data.length;var es=ev.pointIx*(H/eu);var X={delay:es,duration:H-es,type:bx};var Y=ev.color||er.color;if(ex.size<0&&er.negativeValues.visible){Y=bF(er.negativeValues.color,Y)}var et=aD({labels:{animation:{delay:es,duration:H-es}}},this.pointOptions(er,ev.seriesIx),{markers:{type:bn,border:er.border,opacity:er.opacity,animation:X}});et=this.evalPointOptions(et,ex,ev);if(a1(er.color)){Y=et.color}et.markers.background=Y;var ew=new dx(ex,et);ew.color=Y;this.append(ew);return ew},updateBubblesSize:function(eA){var eJ=this;var ey=this;var eB=ey.options.series;var eF=Math.min(eA.width(),eA.height());for(var eG=0;eG<eB.length;eG++){var eC=eB[eG];var eD=eJ.seriesPoints[eG];var er=eC.minSize||Math.max(eF*0.02,10);var et=eC.maxSize||eF*0.2;var X=er/2;var eK=et/2;var ex=Math.PI*X*X;var ez=Math.PI*eK*eK;var ew=ez-ex;var Y=ew/eJ._maxSize;for(var es=0;es<eD.length;es++){var eH=eD[es];if(eH){var eI=Math.abs(eH.value.size)*Y;var ev=Math.sqrt((ex+eI)/Math.PI);var eu=bF(eH.options.zIndex,0);var eE=eu+(1-ev/eK);aD(eH.options,{zIndex:eE,markers:{size:ev*2,zIndex:eE},labels:{zIndex:eE+1}})}}}},formatPointValue:function(X,er){var Y=X.value;return this.chartService.format.auto(er,Y.x,Y.y,Y.size,X.category)},createAnimation:function(){},createVisual:function(){}});i(K,{tooltip:{format:"{3}"},labels:{format:"{3}"}});var b2=q.extend({});aD(b2.prototype,l);var ai=dP.extend({init:function(Y,X){dP.fn.init.call(this,X);this.aboveAxis=this.options.aboveAxis;this.color=X.color||bY;this.value=Y},render:function(){var X=this.options;if(!this._rendered){this._rendered=true;if(bD(this.value.target)){this.target=new b2({type:X.target.shape,background:X.target.color||this.color,opacity:X.opacity,zIndex:X.zIndex,border:X.target.border,vAlign:bQ,align:d9});this.target.value=this.value;this.target.dataItem=this.dataItem;this.target.series=this.series;this.append(this.target)}this.createNote()}},reflow:function(ev){this.render();var es=this;var eA=es.options;var ew=es.target;var ex=es.owner;var Y=eA.invertAxes;var ez=ex.seriesValueAxis(this.options);var X=ex.categorySlot(ex.categoryAxis,eA.categoryIx,ez);var ey=ez.getSlot(this.value.target);var eu=Y?ey:X;var et=Y?X:ey;if(ew){var er=new cB(eu.x1,et.y1,eu.x2,et.y2);ew.options.height=Y?er.height():eA.target.line.width;ew.options.width=Y?eA.target.line.width:er.width();ew.reflow(er)}if(this.note){this.note.reflow(ev)}this.box=ev},createVisual:function(){dP.fn.createVisual.call(this);var Y=this.options;var X=bl.fromRect(this.box.toRect(),{fill:{color:this.color,opacity:Y.opacity},stroke:null});if(Y.border.width>0){X.options.set("stroke",{color:Y.border.color||this.color,width:Y.border.width,dashType:Y.border.dashType,opacity:bF(Y.border.opacity,Y.opacity)})}this.bodyVisual=X;en(X);this.visual.append(X)},createAnimation:function(){if(this.bodyVisual){this.animation=e.create(this.bodyVisual,this.options.animation)}},createHighlight:function(X){return bl.fromRect(this.box.toRect(),X)},highlightVisual:function(){return this.bodyVisual},highlightVisualArgs:function(){return{rect:this.box.toRect(),visual:this.bodyVisual,options:this.options}},formatValue:function(X){return this.owner.formatPointValue(this,X)}});ai.prototype.tooltipAnchor=az.prototype.tooltipAnchor;i(ai,{border:{width:1},vertical:false,opacity:1,target:{shape:"",border:{width:0,color:"green"},line:{width:2}},tooltip:{format:"Current: {0}<br />Target: {1}"}});aD(ai.prototype,l);aD(ai.prototype,bG);var c3=dF.extend({init:function(Y,X){cT(X);dF.fn.init.call(this,Y,X)},reflowCategories:function(es){var Y=this.children;var er=Y.length;for(var X=0;X<er;X++){Y[X].reflow(es[X])}},plotRange:function(X){var Y=X.series;var es=this.seriesValueAxis(Y);var er=this.categoryAxisCrossingValue(es);return[er,X.value.current||er]},createPoint:function(eu,ey){var ex=ey.categoryIx;var Y=ey.category;var ev=ey.series;var eC=ey.seriesIx;var es=this;var eB=es.options;var er=es.children;var eA=eu.valueFields;var ew=aD({vertical:!eB.invertAxes,overlay:ev.overlay,categoryIx:ex,invertAxes:eB.invertAxes},ev);var et=eu.fields.color||ev.color;ew=this.evalPointOptions(ew,eA,Y,ex,ev,eC);if(a1(ev.color)){et=ew.color}var X=new ai(eA,ew);X.color=et;var ez=er[ex];if(!ez){ez=new ba({vertical:eB.invertAxes,gap:eB.gap,spacing:eB.spacing});this.append(ez)}ez.append(X);return X},updateRange:function(er,X){var et=er.current;var es=er.target;var eu=X.series.axis;var Y=this.valueAxisRanges[eu];if(bD(et)&&!isNaN(et)&&bD(es&&!isNaN(es))){Y=this.valueAxisRanges[eu]=Y||{min:cw,max:c9};Y.min=Math.min(Y.min,et,es);Y.max=Math.max(Y.max,et,es)}},formatPointValue:function(X,Y){return this.chartService.format.auto(Y,X.value.current,X.value.target)},pointValue:function(X){return X.valueFields.current},aboveAxis:function(X){var Y=X.value.current;return Y>0},createAnimation:function(){var es=this;var er=this.points;this._setAnimationOptions();for(var Y=0;Y<er.length;Y++){var X=er[Y];X.options.animation=es.options.animation;X.createAnimation()}}});c3.prototype._setAnimationOptions=c7.prototype._setAnimationOptions;i(c3,{animation:{type:cc}});function cT(Y){var es=Y.series;for(var er=0;er<es.length;er++){var X=es[er];var et=X.data;if(et&&!M(et[0])&&!t(et[0])){X.data=[et]}}}var cG=aw.extend({init:function(Y,X){this.chartService=Y;this.options=aD({},this.options,X)},getStyle:function(er,X){var es=er.background;var Y=er.border.color;if(X){var et=X.color||X.options.color;es=bF(es,et);Y=bF(Y,et)}var eu=bs(er.padding||{},"auto");return{backgroundColor:es,borderColor:Y,font:er.font,color:er.color,opacity:er.opacity,borderWidth:bT(er.border.width),paddingTop:bT(eu.top),paddingBottom:bT(eu.bottom),paddingLeft:bT(eu.left),paddingRight:bT(eu.right)}},show:function(Y,er,X){Y.format=er.format;var es=this.getStyle(er,X);Y.style=es;if(!bD(er.color)&&new A(es.backgroundColor).percBrightness()>180){Y.className="k-chart-tooltip-inverse"}this.chartService.notify(cX,Y)},hide:function(){this.chartService.notify(ak)},destroy:function(){delete this.chartService}});i(cG,{border:{width:1},opacity:1});var z=cG.extend({init:function(Y,er,X){cG.fn.init.call(this,Y,X);this.crosshair=er;this.formatService=Y.format;this.initAxisName()},initAxisName:function(){var Y=this.crosshair.axis;var er=Y.plotArea;var X;if(er.categoryAxis){X=Y.getCategory?"categoryAxis":"valueAxis"}else{X=Y.options.vertical?"yAxis":"xAxis"}this.axisName=X},showAt:function(X){var et=this;var es=et.crosshair.axis;var Y=et.options;var eu=es[Y.stickyMode?"getCategory":"getValue"](X);var er=eu;if(Y.format){er=this.formatService.auto(Y.format,eu)}else{if(es.options.type===dO){er=this.formatService.auto(es.options.labels.dateFormats[es.options.baseUnit],eu)}}this.show({point:X,anchor:this.getAnchor(),crosshair:this.crosshair,value:er,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex},this.options)},hide:function(){this.chartService.notify(ak,{crosshair:this.crosshair,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex})},getAnchor:function(){var Y=this;var es=Y.crosshair;var ey=Y.options;var eu=ey.position;var ew=ey.padding;var et=!es.axis.options.vertical;var ev=es.line.bbox();var X,er,ex;if(et){X=ef;if(eu===ei){er=bQ;ex=ev.bottomLeft().translate(0,ew)}else{er=ei;ex=ev.topLeft().translate(0,-ew)}}else{er=ef;if(eu===cM){X=d9;ex=ev.topLeft().translate(-ew,0)}else{X=cM;ex=ev.topRight().translate(ew,0)}}return{point:ex,align:{horizontal:X,vertical:er}}}});i(z,{padding:10});var c1=dP.extend({init:function(es,er,X){dP.fn.init.call(this,X);this.axis=er;this.stickyMode=er instanceof bH;var Y=this.options.tooltip;if(Y.visible){this.tooltip=new z(es,this,aD({},Y,{stickyMode:this.stickyMode}))}},showAt:function(X){this.point=X;this.moveLine();this.line.visible(true);if(this.tooltip){this.tooltip.showAt(X)}},hide:function(){this.line.visible(false);if(this.tooltip){this.tooltip.hide()}},moveLine:function(){var X=this;var Y=X.axis;var ex=X.point;var er=Y.options.vertical;var eu=this.getBox();var et=er?dL:dM;var ev=new bf(eu.x1,eu.y1);var es;if(er){es=new bf(eu.x2,eu.y1)}else{es=new bf(eu.x1,eu.y2)}if(ex){if(this.stickyMode){var ew=Y.getSlot(Y.pointCategoryIndex(ex));ev[et]=es[et]=ew.center()[et]}else{ev[et]=es[et]=ex[et]}}this.box=eu;this.line.moveTo(ev).lineTo(es)},getBox:function(){var er=this.axis;var ew=er.pane.axes;var Y=ew.length;var es=er.options.vertical;var ev=er.lineBox().clone();var eu=es?dM:dL;var ex;for(var et=0;et<Y;et++){var X=ew[et];if(X.options.vertical!==es){if(!ex){ex=X.lineBox().clone()}else{ex.wrap(X.lineBox())}}}ev[eu+1]=ex[eu+1];ev[eu+2]=ex[eu+2];return ev},createVisual:function(){dP.fn.createVisual.call(this);var X=this.options;this.line=new bl({stroke:{color:X.color,width:X.width,opacity:X.opacity,dashType:X.dashType},visible:false});this.moveLine();this.visual.append(this.line)},destroy:function(){if(this.tooltip){this.tooltip.destroy()}dP.fn.destroy.call(this)}});i(c1,{color:aN,width:2,zIndex:-1,tooltip:{visible:false}});var dz=dP.extend({init:function(X,Y){dP.fn.init.call(this,X);this.pane=Y},shouldClip:function(){var Y=this.children;var er=Y.length;for(var X=0;X<er;X++){if(Y[X].options.clip===true){return true}}return false},_clipBox:function(){return this.pane.chartsBox()},createVisual:function(){this.visual=new aK({zIndex:0});if(this.shouldClip()){var er=this.clipBox=this._clipBox();var X=er.toRect();var Y=bl.fromRect(X);this.visual.clip(Y);this.unclipLabels()}},stackRoot:function(){return this},unclipLabels:function(){var er=this;var eu=er.children;var X=er.clipBox;for(var et=0;et<eu.length;et++){var ey=eu[et].points||{};var Y=ey.length;for(var es=0;es<Y;es++){var ex=ey[es];if(ex&&ex.overlapsBox&&ex.overlapsBox(X)){var ew=ex.label;var ev=ex.note;if(ew&&ew.options.visible){if(ew.alignToClipBox){ew.alignToClipBox(X)}ew.options.noclip=true}if(ev&&ev.options.visible){ev.options.noclip=true}}}}},destroy:function(){dP.fn.destroy.call(this);delete this.parent}});dz.prototype.isStackRoot=true;var cl=a.extend({init:function(X){a.fn.init.call(this,X);this.id=cg();this.createTitle();this.content=new dP();this.chartContainer=new dz({},this);this.append(this.content);this.axes=[];this.charts=[]},createTitle:function(){var X=this.options.title;if(t(X)){X=aD({},X,{align:X.position,position:bQ})}this.title=b8.Title.buildTitle(X,this,cl.prototype.options.title)},appendAxis:function(X){this.content.append(X);this.axes.push(X);X.pane=this},appendChart:function(X){if(this.chartContainer.parent!==this.content){this.content.append(this.chartContainer)}this.charts.push(X);this.chartContainer.append(X);X.pane=this},empty:function(){var es=this;var Y=this.parent;if(Y){for(var X=0;X<this.axes.length;X++){Y.removeAxis(es.axes[X])}for(var er=0;er<this.charts.length;er++){Y.removeChart(es.charts[er])}}this.axes=[];this.charts=[];this.content.destroy();this.content.children=[];this.chartContainer.children=[]},reflow:function(X){var Y;if(dC(this.children)===this.content){Y=this.children.pop()}a.fn.reflow.call(this,X);if(Y){this.children.push(Y)}if(this.title){this.contentBox.y1+=this.title.box.height()}},visualStyle:function(){var X=a.fn.visualStyle.call(this);X.zIndex=-10;return X},renderComplete:function(){if(this.options.visible){this.createGridLines()}},stackRoot:function(){return this},clipRoot:function(){return this},createGridLines:function(){var ey=this.axes;var et=ey.concat(this.parent.axes);var X=[];var ex=[];for(var ev=0;ev<ey.length;ev++){var er=ey[ev];var es=er.options.vertical;var ew=es?X:ex;for(var eu=0;eu<et.length;eu++){if(ew.length===0){var Y=et[eu];if(es!==Y.options.vertical){bU(ew,er.createGridLines(Y))}}}}},refresh:function(){this.visual.clear();this.content.parent=null;this.content.createGradient=this.createGradient.bind(this);this.content.renderVisual();this.content.parent=this;if(this.title){this.visual.append(this.title.visual)}this.visual.append(this.content.visual);this.renderComplete()},chartsBox:function(){var ex=this.axes;var Y=ex.length;var X=new cB();for(var eA=0;eA<Y;eA++){var es=ex[eA];var ez=es.options.vertical?dL:dM;var ew=es.lineBox();X[ez+1]=ew[ez+1];X[ez+2]=ew[ez+2]}if(X.x2===0){var ev=this.parent.axes;var ey=ev.length;for(var er=0;er<ey;er++){var et=ev[er];if(!et.options.vertical){var eu=et.lineBox();X.x1=eu.x1;X.x2=eu.x2}}}return X},clipBox:function(){return this.chartContainer.clipBox}});var d8=1;function cg(){return"pane"+d8++}cl.prototype.isStackRoot=true;i(cl,{zIndex:-1,shrinkToFit:true,title:{align:cM},visible:true});var cH=dP.extend({init:function(Y,X,er){dP.fn.init.call(this,X);this.initFields(Y,X);this.series=Y;this.initSeries();this.charts=[];this.options.legend.items=[];this.axes=[];this.crosshairs=[];this.chartService=er;this.createPanes();this.render();this.createCrosshairs()},initFields:function(){},initSeries:function(){var Y=this.series;for(var X=0;X<Y.length;X++){Y[X].index=X}},createPanes:function(){var et=this;var er={title:{color:(this.options.title||{}).color}};var ew=[];var eu=this.options.panes||[];var ev=Math.max(eu.length,1);function Y(ey,ez){if(B(ey.title)){ey.title={text:ey.title}}ey.title=aD({},ez.title,ey.title)}for(var es=0;es<ev;es++){var ex=eu[es]||{};Y(ex,er);var X=new cl(ex);X.paneIndex=es;ew.push(X);et.append(X)}this.panes=ew},createCrosshairs:function(et){var ev=this;if(et===void 0){et=this.panes}for(var er=0;er<et.length;er++){var eu=et[er];for(var Y=0;Y<eu.axes.length;Y++){var es=eu.axes[Y];if(es.options.crosshair&&es.options.crosshair.visible){var X=new c1(ev.chartService,es,es.options.crosshair);ev.crosshairs.push(X);eu.content.append(X)}}}},removeCrosshairs:function(et){var X=this.crosshairs;var es=et.axes;for(var er=X.length-1;er>=0;er--){for(var Y=0;Y<es.length;Y++){if(X[er].axis===es[Y]){X.splice(er,1);break}}}},hideCrosshairs:function(){var Y=this.crosshairs;for(var X=0;X<Y.length;X++){Y[X].hide()}},findPane:function(Y){var es=this.panes;var X;for(var er=0;er<es.length;er++){if(es[er].options.name===Y){X=es[er];break}}return X||es[0]},findPointPane:function(Y){var es=this.panes;var X;for(var er=0;er<es.length;er++){if(es[er].box.containsPoint(Y)){X=es[er];break}}return X},appendAxis:function(X){var Y=this.findPane(X.options.pane);Y.appendAxis(X);this.axes.push(X);X.plotArea=this},removeAxis:function(es){var et=this;var er=[];for(var X=0;X<this.axes.length;X++){var Y=et.axes[X];if(es!==Y){er.push(Y)}else{Y.destroy()}}this.axes=er},appendChart:function(X,Y){this.charts.push(X);if(Y){Y.appendChart(X)}else{this.append(X)}},removeChart:function(es){var et=this;var er=[];for(var X=0;X<this.charts.length;X++){var Y=et.charts[X];if(Y!==es){er.push(Y)}else{Y.destroy()}}this.charts=er},addToLegend:function(eu){var ex=eu.length;var ez=this.options.legend;var ew=ez.labels||{};var eA=ez.inactiveItems||{};var ey=eA.labels||{};var et=[];for(var ev=0;ev<ex;ev++){var eE=eu[ev];var es=eE.visible!==false;if(eE.visibleInLegend===false){continue}var eD=eE.name||"";var eC=es?ew.template:ey.template||ew.template;if(eC){eD=b4.compile(eC)({text:eD,series:eE})}var Y=eE._defaults;var X=eE.color;if(a1(X)&&Y){X=Y.color}var eB=void 0,er=void 0;if(es){eB={};er=X}else{eB={color:ey.color,font:ey.font};er=eA.markers.color}if(eD){et.push({text:eD,labels:eB,markerColor:er,series:eE,active:es})}}bU(ez.items,et)},groupAxes:function(es){var ev=[];var er=[];for(var Y=0;Y<es.length;Y++){var eu=es[Y].axes;for(var et=0;et<eu.length;et++){var X=eu[et];if(X.options.vertical){er.push(X)}else{ev.push(X)}}}return{x:ev,y:er,any:ev.concat(er)}},groupSeriesByPane:function(){var eu=this;var er=this.series;var es={};for(var Y=0;Y<er.length;Y++){var X=er[Y];var et=eu.seriesPaneName(X);if(es[et]){es[et].push(X)}else{es[et]=[X]}}return es},filterVisibleSeries:function(es){var X=[];for(var er=0;er<es.length;er++){var Y=es[er];if(Y.visible!==false){X.push(Y)}}return X},reflow:function(X){var Y=this.options.plotArea;var er=this.panes;var es=bs(Y.margin);this.box=X.clone().unpad(es);this.reflowPanes();this.reflowAxes(er);this.reflowCharts(er)},redraw:function(Y){var et=this;var er=[].concat(Y);this.initSeries();for(var X=0;X<er.length;X++){et.removeCrosshairs(er[X]);er[X].empty()}this.render(er);this.reflowAxes(this.panes);this.reflowCharts(er);this.createCrosshairs(er);for(var es=0;es<er.length;es++){er[es].refresh()}},axisCrossingValues:function(et,es){var Y=et.options;var eu=[].concat(Y.axisCrossingValues||Y.axisCrossingValue);var ev=es.length-eu.length;var X=eu[0]||0;for(var er=0;er<ev;er++){eu.push(X)}return eu},alignAxisTo:function(Y,et,ev,ex){var ew=Y.getSlot(ev,ev,true);var er=Y.options.reverse?2:1;var X=et.getSlot(ex,ex,true);var es=et.options.reverse?2:1;var eu=Y.box.translate(X[dM+es]-ew[dM+er],X[dL+es]-ew[dL+er]);if(Y.pane!==et.pane){eu.translate(0,Y.pane.box.y1-et.pane.box.y1)}Y.reflow(eu)},alignAxes:function(er,eE){var eH=this;var Y=er[0];var eL=eE[0];var ex=this.axisCrossingValues(Y,eE);var eu=this.axisCrossingValues(eL,er);var eF={};var eK={};var eI={};var X={};for(var eG=0;eG<eE.length;eG++){var et=eE[eG];var eD=et.pane;var eC=eD.id;var ez=bC(er,eD)||Y;var eB=ex;if(ez!==Y){eB=eH.axisCrossingValues(ez,eE)}eH.alignAxisTo(et,ez,eu[eG],eB[eG]);if(et.options._overlap){continue}if(ck(et.lineBox().x1)===ck(ez.lineBox().x1)){if(eF[eC]){et.reflow(et.box.alignTo(eF[eC].box,cM).translate(-et.options.margin,0))}eF[eC]=et}if(ck(et.lineBox().x2)===ck(ez.lineBox().x2)){if(!et._mirrored){et.options.labels.mirror=!et.options.labels.mirror;et._mirrored=true}eH.alignAxisTo(et,ez,eu[eG],eB[eG]);if(eK[eC]){et.reflow(et.box.alignTo(eK[eC].box,d9).translate(et.options.margin,0))}eK[eC]=et}if(eG!==0&&eL.pane===et.pane){et.alignTo(eL);et.reflow(et.box)}}for(var ew=0;ew<er.length;ew++){var ey=er[ew];var es=ey.pane;var eA=es.id;var eJ=bC(eE,es)||eL;var ev=eu;if(eJ!==eL){ev=eH.axisCrossingValues(eJ,er)}eH.alignAxisTo(ey,eJ,ex[ew],ev[ew]);if(ey.options._overlap){continue}if(ck(ey.lineBox().y1)===ck(eJ.lineBox().y1)){if(!ey._mirrored){ey.options.labels.mirror=!ey.options.labels.mirror;ey._mirrored=true}eH.alignAxisTo(ey,eJ,ex[ew],ev[ew]);if(eI[eA]){ey.reflow(ey.box.alignTo(eI[eA].box,bQ).translate(0,-ey.options.margin))}eI[eA]=ey}if(ck(ey.lineBox().y2,dn.COORD_PRECISION)===ck(eJ.lineBox().y2,dn.COORD_PRECISION)){if(X[eA]){ey.reflow(ey.box.alignTo(X[eA].box,ei).translate(0,ey.options.margin))}X[eA]=ey}if(ew!==0){ey.alignTo(Y);ey.reflow(ey.box)}}},shrinkAxisWidth:function(et){var ev=this.groupAxes(et).any;var er=bN(ev);var X=0;for(var es=0;es<et.length;es++){var eu=et[es];if(eu.axes.length>0){X=Math.max(X,er.width()-eu.contentBox.width())}}if(X!==0){for(var ew=0;ew<ev.length;ew++){var Y=ev[ew];if(!Y.options.vertical){Y.reflow(Y.box.shrink(X,0))}}}},shrinkAxisHeight:function(eu){var Y;for(var et=0;et<eu.length;et++){var ew=eu[et];var ev=ew.axes;var X=Math.max(0,bN(ev).height()-ew.contentBox.height());if(X!==0){for(var es=0;es<ev.length;es++){var er=ev[es];if(er.options.vertical){er.reflow(er.box.shrink(0,X))}}Y=true}}return Y},fitAxes:function(eA){var ez=this.groupAxes(eA).any;var ex=0;for(var ev=0;ev<eA.length;ev++){var X=eA[ev];var ew=X.axes;var Y=X.contentBox;if(ew.length>0){var eB=bN(ew);var eu=Math.max(Y.y1-eB.y1,Y.y2-eB.y2);ex=Math.max(ex,Y.x1-eB.x1);for(var et=0;et<ew.length;et++){var er=ew[et];er.reflow(er.box.translate(0,eu))}}}for(var es=0;es<ez.length;es++){var ey=ez[es];ey.reflow(ey.box.translate(ex,0))}},reflowAxes:function(Y){var es=this;var er=this.groupAxes(Y);for(var X=0;X<Y.length;X++){es.reflowPaneAxes(Y[X])}if(er.x.length>0&&er.y.length>0){this.alignAxes(er.x,er.y);this.shrinkAxisWidth(Y);this.autoRotateAxisLabels(er);this.alignAxes(er.x,er.y);if(this.shrinkAxisWidth(Y)){this.alignAxes(er.x,er.y)}this.shrinkAxisHeight(Y);this.alignAxes(er.x,er.y);if(this.shrinkAxisHeight(Y)){this.alignAxes(er.x,er.y)}this.fitAxes(Y)}},autoRotateAxisLabels:function(ex){var et=this;var Y=this;var eu=Y.axes;var ev=Y.panes;var er;for(var ew=0;ew<eu.length;ew++){var es=eu[ew];if(es.autoRotateLabels()){er=true}}if(er){for(var X=0;X<ev.length;X++){et.reflowPaneAxes(ev[X])}if(ex.x.length>0&&ex.y.length>0){this.alignAxes(ex.x,ex.y);this.shrinkAxisWidth(ev)}}},reflowPaneAxes:function(es){var er=es.axes;var Y=er.length;if(Y>0){for(var X=0;X<Y;X++){er[X].reflow(es.contentBox)}}},reflowCharts:function(Y){var et=this.charts;var es=et.length;var er=this.box;for(var X=0;X<es;X++){var eu=et[X].pane;if(!eu||dv(eu,Y)){et[X].reflow(er)}}},reflowPanes:function(){var et=this;var ew=et.box;var eB=et.panes;var ez=eB.length;var eF=ew.height();var ex=ez;var ey=0;var eA=ew.y1;for(var ev=0;ev<ez;ev++){var Y=eB[ev];var eE=Y.options.height;Y.options.width=ew.width();if(!Y.options.height){ey++}else{if(eE.indexOf&&eE.indexOf("%")){var eu=parseInt(eE,10)/100;Y.options.height=eu*ew.height()}Y.reflow(ew.clone());eF-=Y.options.height}}for(var es=0;es<ez;es++){var eD=eB[es];if(!eD.options.height){eD.options.height=eF/ey}}for(var er=0;er<ez;er++){var eC=eB[er];var X=ew.clone().move(ew.x1,eA);eC.reflow(X);ex--;eA+=eC.options.height}},backgroundBox:function(){var eu=this.axes;var et=eu.length;var es;for(var er=0;er<et;er++){var ew=eu[er];for(var Y=0;Y<et;Y++){var ev=eu[Y];if(ew.options.vertical!==ev.options.vertical){var X=ew.lineBox().clone().wrap(ev.lineBox());if(!es){es=X}else{es=es.wrap(X)}}}}return es||this.box},chartsBoxes:function(){var er=this.panes;var Y=[];for(var X=0;X<er.length;X++){Y.push(er[X].chartsBox())}return Y},addBackgroundPaths:function(er){var Y=this.chartsBoxes();for(var X=0;X<Y.length;X++){er.paths.push(bl.fromRect(Y[X].toRect()))}},backgroundContainsPoint:function(Y){var er=this.chartsBoxes();for(var X=0;X<er.length;X++){if(er[X].containsPoint(Y)){return true}}},createVisual:function(){dP.fn.createVisual.call(this);var er=this.options.plotArea;var Y=er.opacity;var et=er.background;var X=er.border;if(X===void 0){X={}}if(aT(et)){et=bY;Y=0}var es=this._bgVisual=new n.MultiPath({fill:{color:et,opacity:Y},stroke:{color:X.width?X.color:"",width:X.width,dashType:X.dashType},zIndex:-1});this.addBackgroundPaths(es);this.appendVisual(es)},pointsByCategoryIndex:function(ew){var ev=this.charts;var Y=[];if(ew!==null){for(var es=0;es<ev.length;es++){var eu=ev[es];if(eu.pane.options.name==="_navigator"){continue}var et=ev[es].categoryPoints[ew];if(et&&et.length){for(var er=0;er<et.length;er++){var X=et[er];if(X&&bD(X.value)&&X.value!==null){Y.push(X)}}}}}return Y},pointsBySeriesIndex:function(X){return this.filterPoints(function(Y){return Y.series.index===X})},pointsBySeriesName:function(X){return this.filterPoints(function(Y){return Y.series.name===X})},filterPoints:function(ew){var ev=this.charts;var Y=[];for(var es=0;es<ev.length;es++){var eu=ev[es];var et=eu.points;for(var er=0;er<et.length;er++){var X=et[er];if(X&&ew(X)){Y.push(X)}}}return Y},findPoint:function(ev){var eu=this.charts;for(var er=0;er<eu.length;er++){var et=eu[er];var es=et.points;for(var Y=0;Y<es.length;Y++){var X=es[Y];if(X&&ev(X)){return X}}}},paneByPoint:function(X){var er=this.panes;for(var Y=0;Y<er.length;Y++){var es=er[Y];if(es.box.containsPoint(X)){return es}}}});function bN(et){var es=et.length;var er;if(es>0){for(var Y=0;Y<es;Y++){var X=et[Y].contentBox();if(!er){er=X.clone()}else{er.wrap(X)}}}return er||new cB()}function bC(er,es){for(var Y=0;Y<er.length;Y++){var X=er[Y];if(X&&X.pane===es){return X}}}function aT(X){return X===""||X===null||X==="none"||X==="transparent"||!bD(X)}i(cH,{series:[],plotArea:{margin:{}},background:"",border:{color:aN,width:0},legend:{inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}}});var dS={hover:function(X,Y){this._dispatchEvent(X,Y,J)},click:function(X,Y){this._dispatchEvent(X,Y,bi)}};var bO=aw.extend({init:function(et,eA,ey){var X=eA.canonicalFields(et);var Y=eA.valueFields(et);var ez=eA.sourceFields(et,X);var ew=this._seriesFields=[];var er=ey.query(et.type);var eu=et.aggregate||er;this._series=et;this._binder=eA;for(var es=0;es<X.length;es++){var ex=X[es];var ev=void 0;if(t(eu)){ev=eu[ex]}else{if(es===0||dv(ex,Y)){ev=eu}else{break}}if(ev){ew.push({canonicalName:ex,name:ez[es],transform:a1(ev)?ev:b5[ev]})}}},aggregatePoints:function(eB,ez){var et=this;var X=this;var es=X._series;var ev=X._seriesFields;var er=this._bindPoints(eB||[]);var eu=er.dataItems[0];var eC={};if(eu&&!p(eu)&&!M(eu)){var ew=function(){};ew.prototype=eu;eC=new ew()}for(var Y=0;Y<ev.length;Y++){var ex=ev[Y];var eA=et._bindField(er.values,ex.canonicalName);var ey=ex.transform(eA,es,er.dataItems,ez);if(ey!==null&&t(ey)&&!bD(ey.length)&&!(ey instanceof Date)){eC=ey;break}else{if(bD(ey)){dV(ex.name,eC,ey)}}}return eC},_bindPoints:function(ev){var ew=this;var X=ew._binder;var eu=ew._series;var er=[];var es=[];for(var et=0;et<ev.length;et++){var Y=ev[et];er.push(X.bindPoint(eu,Y));es.push(eu.data[Y])}return{values:er,dataItems:es}},_bindField:function(ev,ew){var Y=[];var et=ev.length;for(var er=0;er<et;er++){var es=ev[er];var X=es.valueFields;var eu=void 0;if(bD(X[ew])){eu=X[ew]}else{eu=es.fields[ew]}Y.push(eu)}return Y}});function dV(eu,et,Y){var X=et;var es=eu;if(eu.indexOf(".")>-1){var er=eu.split(".");while(er.length>1){es=er.shift();if(!bD(X[es])){X[es]={}}X=X[es]}es=er.shift()}X[es]=Y}var a9=aw.extend({init:function(){this._defaults={}},register:function(X,es){var er=this;for(var Y=0;Y<X.length;Y++){er._defaults[X[Y]]=es}},query:function(X){return this._defaults[X]}});a9.current=new a9();var dm=az.extend({createLabel:function(){var er=this.options.labels;var Y=aD({},er,er.from);var X=aD({},er,er.to);if(Y.visible){this.labelFrom=this._createLabel(Y);this.append(this.labelFrom)}if(X.visible){this.labelTo=this._createLabel(X);this.append(this.labelTo)}},_createLabel:function(X){var er;if(X.template){var Y=b4.compile(X.template);er=Y({dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,runningTotal:this.runningTotal,total:this.total,series:this.series})}else{er=this.formatValue(X.format)}return new a8(er,aD({vertical:this.options.vertical},X))},reflow:function(X){this.render();var Y=this;var es=Y.labelFrom;var et=Y.labelTo;var er=Y.value;this.box=X;if(es){es.options.aboveAxis=er.from>er.to;es.reflow(X)}if(et){et.options.aboveAxis=er.to>er.from;et.reflow(X)}if(this.note){this.note.reflow(X)}}});dm.prototype.defaults=aD({},dm.prototype.defaults,{labels:{format:"{0} - {1}"},tooltip:{format:"{1}"}});var af=c7.extend({pointType:function(){return dm},pointValue:function(X){return X.valueFields},formatPointValue:function(X,Y){if(X.value.from===null&&X.value.to===null){return""}return this.chartService.format.auto(Y,X.value.from,X.value.to)},plotRange:function(X){if(!X){return 0}return[X.value.from,X.value.to]},updateRange:function(er,X){var es=X.series.axis;var eu=er.from;var et=er.to;var Y=this.valueAxisRanges[es];if(er!==null&&p(eu)&&p(et)){Y=this.valueAxisRanges[es]=Y||{min:cw,max:c9};Y.min=Math.min(Y.min,eu);Y.max=Math.max(Y.max,eu);Y.min=Math.min(Y.min,et);Y.max=Math.max(Y.max,et)}},aboveAxis:function(X){var Y=X.value;return Y.from<Y.to}});af.prototype.plotLimits=dF.prototype.plotLimits;var br=a3.extend({reflow:function(es){var Y=this;var eB=Y.options;var ex=Y.value;var ev=Y.owner;var ez=ev.seriesValueAxis(eB);var X=[];var ey=[];var eA=[];var er=ez.getSlot(ex.low,ex.high);var et=ez.getSlot(ex.open,ex.open);var eu=ez.getSlot(ex.close,ex.close);et.x1=eu.x1=er.x1=es.x1;et.x2=eu.x2=er.x2=es.x2;var ew=er.center().x;X.push([et.x1,et.y1]);X.push([ew,et.y1]);ey.push([ew,eu.y1]);ey.push([eu.x2,eu.y1]);eA.push([ew,er.y1]);eA.push([ew,er.y2]);this.lines=[X,ey,eA];this.box=er.clone().wrap(et.clone().wrap(eu));this.reflowNote()},createBody:function(){}});var f=d2.extend({pointType:function(){return br}});var de=dP.extend({init:function(er,Y,X){dP.fn.init.call(this);this.from=er;this.to=Y;this.series=X},linePoints:function(){var ev=this.from;var et=this;var Y=et.from.box;var er=et.to.box;var es=[];if(ev.isVertical){var eu=ev.aboveAxis?Y.y1:Y.y2;es.push([Y.x1,eu],[er.x2,eu])}else{var X=ev.aboveAxis?Y.x2:Y.x1;es.push([X,Y.y1],[X,er.y2])}return es},createVisual:function(){dP.fn.createVisual.call(this);var X=this.series.line||{};var Y=bl.fromPoints(this.linePoints(),{stroke:{color:X.color,width:X.width,opacity:X.opacity,dashType:X.dashType}});en(Y);this.visual.append(Y)}});i(de,{animation:{type:dI,delay:H}});var bd=c7.extend({render:function(){c7.fn.render.call(this);this.createSegments()},traverseDataPoints:function(eB){var er=this.options.series;var et=this.categoryAxis.options.categories||[];var ex=c4(er);var ew=!this.options.invertAxes;for(var eD=0;eD<er.length;eD++){var eC=er[eD];var ev=0;var X=0;for(var es=0;es<ex;es++){var Y=bt.current.bindPoint(eC,es);var eA=Y.valueFields.value;var eu=Y.fields.summary;var ez=ev;var ey=void 0;if(eu){if(eu.toLowerCase()==="total"){Y.valueFields.value=ev;ez=0;ey=ev}else{Y.valueFields.value=X;ey=ez-X;X=0}}else{if(p(eA)){X+=eA;ev+=eA;ey=ev}}eB(Y,{category:et[es],categoryIx:es,series:eC,seriesIx:eD,total:ev,runningTotal:X,from:ez,to:ey,isVertical:ew})}}},updateRange:function(Y,X){c7.fn.updateRange.call(this,{value:X.to},X)},aboveAxis:function(X){return X.value>=0},plotRange:function(X){return[X.from,X.to]},createSegments:function(){var Y=this;var X=this.options.series;var ey=this.seriesPoints;var er=this.segments=[];for(var ez=0;ez<X.length;ez++){var ex=X[ez];var ew=ey[ez];if(ew){var eu=void 0;for(var et=0;et<ew.length;et++){var ev=ew[et];if(ev&&eu){var es=new de(eu,ev,ex);er.push(es);Y.append(es)}eu=ev}}}}});function aR(eu,et){var Y=[];var er=[].concat(et);for(var X=0;X<eu.length;X++){var es=eu[X];if(dv(es.type,er)){Y.push(es)}}return Y}function ci(Y,X){if(Y&&X){return Y.toLowerCase()===X.toLowerCase()}return Y===X}function co(es,X){var Y=es.type;var er=X instanceof Date;return !Y&&er||ci(Y,dO)}function Z(Y,X){if(X!==null){Y.push(X)}}function ag(X){return X.length===1?X[0]:X}function ae(er,et,es){if(et===null){return et}var X="_date_"+er;var Y=et[X];if(!Y){Y=c5(es,ca(er,true)(et));et[X]=Y}return Y}var dE=cH.extend({initFields:function(er){var es=this;this.namedCategoryAxes={};this.namedValueAxes={};this.valueAxisRangeTracker=new d4();if(er.length>0){this.invertAxes=dv(er[0].type,[cc,cU,ep,bc,aG,ek,cN]);for(var Y=0;Y<er.length;Y++){var X=er[Y].stack;if(X&&X.type==="100%"){es.stack100=true;break}}}},render:function(X){if(X===void 0){X=this.panes}this.createCategoryAxes(X);this.aggregateCategories(X);this.createCategoryAxesLabels(X);this.createCharts(X);this.createValueAxes(X)},removeAxis:function(X){var Y=X.options.name;cH.fn.removeAxis.call(this,X);if(X instanceof bH){delete this.namedCategoryAxes[Y]}else{this.valueAxisRangeTracker.reset(Y);delete this.namedValueAxes[Y]}if(X===this.categoryAxis){delete this.categoryAxis}if(X===this.valueAxis){delete this.valueAxis}},createCharts:function(ex){var et=this;var er=this.groupSeriesByPane();for(var es=0;es<ex.length;es++){var X=ex[es];var ew=er[X.options.name||"default"]||[];et.addToLegend(ew);var ev=et.filterVisibleSeries(ew);if(!ev){continue}var Y=et.groupSeriesByCategoryAxis(ev);for(var eu=0;eu<Y.length;eu++){et.createChartGroup(Y[eu],X)}}},createChartGroup:function(X,Y){this.createAreaChart(aR(X,[cZ,bc]),Y);this.createBarChart(aR(X,[bz,cc]),Y);this.createRangeBarChart(aR(X,[av,aG]),Y);this.createBulletChart(aR(X,[cU,aS]),Y);this.createCandlestickChart(aR(X,T),Y);this.createBoxPlotChart(aR(X,[bo,cN]),Y);this.createOHLCChart(aR(X,ao),Y);this.createWaterfallChart(aR(X,[bu,ek]),Y);this.createLineChart(aR(X,[bv,ep]),Y)},aggregateCategories:function(ev){var et=this;var er=this.srcSeries||this.series;var X=[];for(var es=0;es<er.length;es++){var ex=er[es];var eu=et.seriesCategoryAxis(ex);var Y=et.findPane(eu.options.pane);var ew=ci(eu.options.type,dO);if((ew||ex.categoryField)&&dv(Y,ev)){ex=et.aggregateSeries(ex,eu)}else{if(p(eu.options.min)||p(eu.options.max)){ex=et.filterSeries(ex,eu)}}X.push(ex)}this.srcSeries=er;this.series=X},filterSeries:function(et,ew){var Y=ew.totalRangeIndices();var X=ew.options.justified;var es=dv(et.type,[bv,ep,cZ,bc]);Y.min=p(ew.options.min)?Math.floor(Y.min):0;if(p(ew.options.max)){Y.max=X?Math.floor(Y.max)+1:Math.ceil(Y.max)}else{Y.max=et.data.length}var er=aD({},et);if(es){var eu=Y.min-1;var ev=ew.options.srcCategories||[];if(eu>=0&&eu<er.data.length){er._outOfRangeMinPoint={item:er.data[eu],category:ev[eu],categoryIx:-1}}if(Y.max<er.data.length){er._outOfRangeMaxPoint={item:er.data[Y.max],category:ev[Y.max],categoryIx:Y.max-Y.min}}}ew._seriesMax=Math.max(ew._seriesMax||0,er.data.length);er.data=(er.data||[]).slice(Y.min,Y.max);return er},aggregateSeries:function(ey,eD){var eK=this;var ev=dv(ey.type,[bv,ep,cZ,bc]);var ew=eD.options;var eE=ew.categories;var er=ew.srcCategories;if(er===void 0){er=eE}var et=ew.dataItems;if(et===void 0){et=[]}var Y=ci(eD.options.type,dO);var es=aD({},ey);var eA=aD({},ey);var eI=ey.data;var X=[];var eL=c9;var ez=cw;var eu=cI;var eC,eB;if(Y){eu=ae}for(var eH=0;eH<eI.length;eH++){var eG=void 0;if(ey.categoryField){eG=eu(ey.categoryField,eI[eH],eK.chartService.intl)}else{eG=er[eH]}if(bD(eG)){var eJ=eD.categoryIndex(eG);if(0<=eJ&&eJ<eE.length){X[eJ]=X[eJ]||[];X[eJ].push(eH)}else{if(ev){if(eJ<0){if(eJ===eL){eC.points.push(eH)}else{if(eJ>eL){eL=eJ;eC={category:eG,points:[eH]}}}}else{if(eJ>=eE.length){if(eJ===ez){eB.points.push(eH)}else{if(eJ<ez){ez=eJ;eB={category:eG,points:[eH]}}}}}}}}}var eF=new bO(es,bt.current,a9.current);var eM=eA.data=[];for(var ex=0;ex<eE.length;ex++){eM[ex]=eF.aggregatePoints(X[ex],eE[ex]);if(X[ex]){et[ex]=eM[ex]}}if(eC&&eM.length){eA._outOfRangeMinPoint={item:eF.aggregatePoints(eC.points,eC.category),categoryIx:eL,category:eC.category}}if(eB&&eM.length){eA._outOfRangeMaxPoint={item:eF.aggregatePoints(eB.points,eB.category),categoryIx:ez,category:eB.category}}eD.options.dataItems=et;return eA},appendChart:function(er,eu){var Y=er.options.series;var et=this.seriesCategoryAxis(Y[0]);var X=et.options.categories;var es=Math.max(0,c4(Y)-X.length);while(es--){X.push("")}this.valueAxisRangeTracker.update(er.valueAxisRanges);cH.fn.appendChart.call(this,er,eu)},seriesPaneName:function(es){var X=this.options;var ev=es.axis;var ew=[].concat(X.valueAxis);var eu=a4(ew,function(ex){return ex.name===ev})[0];var et=X.panes||[{}];var er=(et[0]||{}).name||"default";var Y=(eu||{}).pane||er;return Y},seriesCategoryAxis:function(X){var er=X.categoryAxis;var Y=er?this.namedCategoryAxes[er]:this.categoryAxis;if(!Y){throw new Error("Unable to locate category axis with name "+er)}return Y},stackableChartOptions:function(er,et){var X=er.stack;var es=X&&X.type==="100%";var Y=et.options.clip;return{isStacked:X,isStacked100:es,clip:Y}},groupSeriesByCategoryAxis:function(ev){var ex=[];var eu={};for(var ew=0;ew<ev.length;ew++){var Y=ev[ew].categoryAxis||"$$default$$";if(!eu.hasOwnProperty(Y)){eu[Y]=true;ex.push(Y)}}var er=[];for(var et=0;et<ex.length;et++){var es=ex[et];var X=at(ev,es,et);if(X.length===0){continue}er.push(X)}return er},createBarChart:function(X,es){if(X.length===0){return}var er=X[0];var Y=new c7(this,d7.extend({series:X,invertAxes:this.invertAxes,gap:er.gap,spacing:er.spacing},this.stackableChartOptions(er,es)));this.appendChart(Y,es)},createRangeBarChart:function(Y,es){if(Y.length===0){return}var er=Y[0];var X=new af(this,{series:Y,invertAxes:this.invertAxes,gap:er.gap,spacing:er.spacing});this.appendChart(X,es)},createBulletChart:function(X,es){if(X.length===0){return}var er=X[0];var Y=new c3(this,{series:X,invertAxes:this.invertAxes,gap:er.gap,spacing:er.spacing,clip:es.options.clip});this.appendChart(Y,es)},createLineChart:function(Y,es){if(Y.length===0){return}var er=Y[0];var X=new b3(this,d7.extend({invertAxes:this.invertAxes,series:Y},this.stackableChartOptions(er,es)));this.appendChart(X,es)},createAreaChart:function(Y,es){if(Y.length===0){return}var er=Y[0];var X=new d6(this,d7.extend({invertAxes:this.invertAxes,series:Y},this.stackableChartOptions(er,es)));this.appendChart(X,es)},createOHLCChart:function(X,es){if(X.length===0){return}var er=X[0];var Y=new f(this,{invertAxes:this.invertAxes,gap:er.gap,series:X,spacing:er.spacing,clip:es.options.clip});this.appendChart(Y,es)},createCandlestickChart:function(X,es){if(X.length===0){return}var er=X[0];var Y=new d2(this,{invertAxes:this.invertAxes,gap:er.gap,series:X,spacing:er.spacing,clip:es.options.clip});this.appendChart(Y,es)},createBoxPlotChart:function(X,es){if(X.length===0){return}var er=X[0];var Y=new dR(this,{invertAxes:this.invertAxes,gap:er.gap,series:X,spacing:er.spacing,clip:es.options.clip});this.appendChart(Y,es)},createWaterfallChart:function(Y,es){if(Y.length===0){return}var er=Y[0];var X=new bd(this,{series:Y,invertAxes:this.invertAxes,gap:er.gap,spacing:er.spacing});this.appendChart(X,es)},axisRequiresRounding:function(X,es){var Y=this;var er=aR(this.series,dk);for(var ex=0;ex<this.series.length;ex++){var ev=Y.series[ex];if(ev.type===bv||ev.type===cZ){var ew=ev.line;if(ew&&ew.style===v){er.push(ev)}}}for(var et=0;et<er.length;et++){var eu=er[et].categoryAxis||"";if(eu===X||!eu&&es===0){return true}}},aggregatedAxis:function(et,es){var er=this.series;for(var X=0;X<er.length;X++){var Y=er[X].categoryAxis||"";if((Y===et||!Y&&es===0)&&er[X].categoryField){return true}}},createCategoryAxesLabels:function(){var Y=this.axes;for(var X=0;X<Y.length;X++){if(Y[X] instanceof bH){Y[X].createLabels()}}},createCategoryAxes:function(ez){var ex=this;var er=this.invertAxes;var eA=[].concat(this.options.categoryAxis);var ey=[];for(var eu=0;eu<eA.length;eu++){var et=eA[eu];var es=ex.findPane(et.pane);if(dv(es,ez)){var Y=et.name;var ew=et.categories;if(ew===void 0){ew=[]}et=aD({vertical:er,axisCrossingValue:er?cw:0},et);if(!bD(et.justified)){et.justified=ex.isJustified()}if(ex.axisRequiresRounding(Y,eu)){et.justified=false}var ev=void 0;if(co(et,ew[0])){ev=new bM(et,ex.chartService)}else{ev=new bH(et,ex.chartService)}if(Y){if(ex.namedCategoryAxes[Y]){throw new Error("Category axis with name "+Y+" is already defined")}ex.namedCategoryAxes[Y]=ev}ev.axisIndex=eu;ey.push(ev);ex.appendAxis(ev)}}var X=this.categoryAxis||ey[0];this.categoryAxis=X;if(er){this.axisY=X}else{this.axisX=X}},isJustified:function(){var er=this.series;for(var Y=0;Y<er.length;Y++){var X=er[Y];if(!dv(X.type,[cZ,bc])){return false}}return true},createValueAxes:function(eB){var ez=this;var eC=this.valueAxisRangeTracker;var es=eC.query();var eF=[].concat(this.options.valueAxis);var er=this.invertAxes;var ex={vertical:!er};var eA=[];if(this.stack100){ex.roundToMajorUnit=false;ex.labels={format:"P0"}}for(var ew=0;ew<eF.length;ew++){var ev=eF[ew];var et=ez.findPane(ev.pane);if(dv(et,eB)){var Y=ev.name;var eu=ci(ev.type,df)?{min:0.1,max:1}:{min:0,max:1};var ey=eC.query(Y)||es||eu;if(ew===0&&ey&&es){ey.min=Math.min(ey.min,es.min);ey.max=Math.max(ey.max,es.max)}var eD=void 0;if(ci(ev.type,df)){eD=b8.LogarithmicAxis}else{eD=b8.NumericAxis}var eE=new eD(ey.min,ey.max,aD({},ex,ev),ez.chartService);if(Y){if(ez.namedValueAxes[Y]){throw new Error("Value axis with name "+Y+" is already defined")}ez.namedValueAxes[Y]=eE}eE.axisIndex=ew;eA.push(eE);ez.appendAxis(eE)}}var X=this.valueAxis||eA[0];this.valueAxis=X;if(er){this.axisX=X}else{this.axisY=X}},_dispatchEvent:function(ew,ev,X){var ex=ew._eventCoordinates(ev);var ey=new ec(ex.x,ex.y);var Y=this.pointPane(ey);var eu=[];var ez=[];if(!Y){return}var es=Y.axes;for(var et=0;et<es.length;et++){var er=es[et];if(er.getValue){Z(ez,er.getValue(ey))}else{Z(eu,er.getCategory(ey))}}if(eu.length===0){Z(eu,this.categoryAxis.getCategory(ey))}if(eu.length>0&&ez.length>0){ew.trigger(X,{element:cK(ev),originalEvent:ev,category:ag(eu),value:ag(ez)})}},pointPane:function(X){var er=this.panes;for(var Y=0;Y<er.length;Y++){var es=er[Y];if(es.contentBox.containsPoint(X)){return es}}},updateAxisOptions:function(er,Y){var X=er instanceof bH?[].concat(this.options.categoryAxis):[].concat(this.options.valueAxis);aD(X[er.axisIndex],Y)}});function at(X,Y,er){return a4(X,function(es){return er===0&&!es.categoryAxis||es.categoryAxis===Y})}i(dE,{categoryAxis:{categories:[]},valueAxis:{}});aD(dE.prototype,dS);var aC=aw.extend({init:function(){this._points=[]},destroy:function(){this._points=[]},show:function(er){var et=this;var es=[].concat(er);this.hide();for(var Y=0;Y<es.length;Y++){var X=es[Y];if(X&&X.toggleHighlight&&X.hasHighlight()){et.togglePointHighlight(X,true);et._points.push(X)}}},togglePointHighlight:function(X,Y){var es=(X.options.highlight||{}).toggle;if(es){var er={category:X.category,series:X.series,dataItem:X.dataItem,value:X.value,stackValue:X.stackValue,preventDefault:aZ,visual:X.highlightVisual(),show:Y};es(er);if(!er._defaultPrevented){X.toggleHighlight(Y)}}else{X.toggleHighlight(Y)}},hide:function(){var Y=this;var X=this._points;while(X.length){Y.togglePointHighlight(X.pop(),false)}},isHighlighted:function(er){var es=this._points;for(var Y=0;Y<es.length;Y++){var X=es[Y];if(er===X){return true}}return false}});function aZ(){this._defaultPrevented=true}function b7(et,er){var Y=(er||"").toLowerCase();var es=et.event;var X=Y==="none"&&!(es.ctrlKey||es.shiftKey||es.altKey)||es[Y+"Key"];return X}function al(es){var Y={};for(var X=0;X<es.length;X++){var er=es[X];if(er.axis.options.name){Y[er.axis.options.name]={min:er.range.min,max:er.range.max}}}return Y}var bJ=aw.extend({init:function(Y,X){this.plotArea=Y;this.options=aD({},this.options,X)},start:function(X){this._active=b7(X,this.options.key);return this._active},move:function(Y){if(this._active){var X=this.axisRanges=this._panAxes(Y,dM).concat(this._panAxes(Y,dL));if(X.length){this.axisRanges=X;return al(X)}}},end:function(){var X=this._active;this._active=false;return X},pan:function(){var er=this;var es=er.plotArea;var et=er.axisRanges;if(et.length){for(var X=0;X<et.length;X++){var Y=et[X];es.updateAxisOptions(Y.axis,Y.range)}es.redraw(es.panes)}},destroy:function(){delete this.plotArea},_panAxes:function(eu,et){var X=this.plotArea;var ex=-eu[et].delta;var ey=(this.options.lock||"").toLowerCase();var er=[];if(ex!==0&&(ey||"").toLowerCase()!==et){var ev=X.axes;for(var ew=0;ew<ev.length;ew++){var Y=ev[ew];if(et===dM&&!Y.options.vertical||et===dL&&Y.options.vertical){var es=Y.pan(ex);if(es){es.limitRange=true;er.push({axis:Y,range:es})}}}}return er}});bJ.prototype.options={key:"none",lock:"none"};var bX=aw.extend({init:function(Y,X){this.chart=Y;this.options=aD({},this.options,X);this.createElement()},createElement:function(){var Y=this._marquee=document.createElement("div");Y.className="k-marquee";var X=document.createElement("div");X.className="k-marquee-color";Y.appendChild(X)},removeElement:function(){if(this._marquee.parentNode){this._marquee.parentNode.removeChild(this._marquee)}},setStyles:function(X){m(this._marquee,X)},start:function(et){if(b7(et,this.options.key)){var Y=this.chart;var X=Y._eventCoordinates(et);var er=this._zoomPane=Y._plotArea.paneByPoint(X);if(er&&er.clipBox()){var es=er.clipBox().clone();var eu=this._elementOffset();es.translate(eu.left,eu.top);this._zoomPaneClipBox=es;document.body.appendChild(this._marquee);this.setStyles({left:et.pageX+1,top:et.pageY+1,width:0,height:0});return true}}return false},_elementOffset:function(){var et=this.chart.element;var er=m(et,["paddingLeft","paddingTop"]);var X=er.paddingLeft;var Y=er.paddingTop;var es=b8.elementOffset(et);return{left:X+es.left,top:Y+es.top}},move:function(Y){var X=this._zoomPane;if(X){this.setStyles(this._selectionPosition(Y))}},end:function(es){var er=this._zoomPane;if(er){var Y=this._elementOffset();var et=this._selectionPosition(es);et.left-=Y.left;et.top-=Y.top;var eu={x:et.left,y:et.top};var X={x:et.left+et.width,y:et.top+et.height};this._updateAxisRanges(eu,X);this.removeElement();delete this._zoomPane;return al(this.axisRanges)}},zoom:function(){var es=this.axisRanges;if(es&&es.length){var er=this.chart._plotArea;for(var X=0;X<es.length;X++){var Y=es[X];er.updateAxisOptions(Y.axis,Y.range)}er.redraw(er.panes)}},destroy:function(){this.removeElement();delete this._marquee;delete this.chart},_updateAxisRanges:function(X,es){var ex=(this.options.lock||"").toLowerCase();var ev=[];var eu=this._zoomPane.axes;for(var ew=0;ew<eu.length;ew++){var Y=eu[ew];var er=Y.options.vertical;if(!(ex===dM&&!er)&&!(ex===dL&&er)){var et=Y.pointsRange(X,es);if(et){ev.push({axis:Y,range:et})}}}this.axisRanges=ev},_selectionPosition:function(eu){var X=this._zoomPaneClipBox;var ew={x:eu.x.startLocation,y:eu.y.startLocation};var et=eu.x.location;var es=eu.y.location;var ex=(this.options.lock||"").toLowerCase();var er=Math.min(ew.x,et);var ev=Math.min(ew.y,es);var Y=Math.abs(ew.x-et);var ey=Math.abs(ew.y-es);if(ex===dM){er=X.x1;Y=X.width()}if(ex===dL){ev=X.y1;ey=X.height()}if(et>X.x2){Y=X.x2-ew.x}if(et<X.x1){Y=ew.x-X.x1}if(es>X.y2){ey=X.y2-ew.y}if(es<X.y1){ey=ew.y-X.y1}return{left:Math.max(er,X.x1),top:Math.max(ev,X.y1),width:Y,height:ey}}});bX.prototype.options={key:"shift",lock:"none"};var d3=aw.extend({init:function(Y,X){this.chart=Y;this.options=aD({},this.options,X)},updateRanges:function(ew){var es=(this.options.lock||"").toLowerCase();var ev=[];var eu=this.chart._plotArea.axes;for(var X=0;X<eu.length;X++){var et=eu[X];var er=et.options.vertical;if(!(es===dM&&!er)&&!(es===dL&&er)){var Y=et.zoomRange(-ew);if(Y){ev.push({axis:et,range:Y})}}}this.axisRanges=ev;return al(ev)},zoom:function(){var es=this.axisRanges;if(es&&es.length){var er=this.chart._plotArea;for(var X=0;X<es.length;X++){var Y=es[X];er.updateAxisOptions(Y.axis,Y.range)}er.redraw(er.panes)}},destroy:function(){delete this.chart}});var ee=dP.extend({init:function(X,Y){dP.fn.init.call(this,X);this.chartService=Y},render:function(){var eu=this;var et=eu.children;var es=eu.options;var er=es.vertical;this.visual=new n.Layout(null,{spacing:er?0:es.spacing,lineSpacing:er?es.spacing:0,orientation:er?"vertical":"horizontal"});for(var X=0;X<et.length;X++){var Y=et[X];Y.reflow(new cB());Y.renderVisual()}},reflow:function(X){this.visual.rect(X.toRect());this.visual.reflow();var Y=this.visual.clippedBBox();if(Y){this.box=b8.rectToBox(Y)}else{this.box=new cB()}},renderVisual:function(){this.addVisual()},createVisual:function(){}});var aq=a.extend({init:function(X){a.fn.init.call(this,X);this.createContainer();this.createMarker();this.createLabel()},createContainer:function(){this.container=new b8.FloatElement({vertical:false,wrap:false,align:ef});this.append(this.container)},createMarker:function(){this.container.append(new q(this.markerOptions()))},markerOptions:function(){var Y=this.options;var X=Y.markerColor;return aD({},Y.markers,{background:X,border:{color:X}})},createLabel:function(){var Y=this.options;var X=aD({},Y.labels);this.container.append(new aV(Y.text,X))},renderComplete:function(){a.fn.renderComplete.call(this);var Y=this.options.cursor||{};var X=this._itemOverlay=bl.fromRect(this.container.box.toRect(),{fill:{color:bY,opacity:0},stroke:null,cursor:Y.style||Y});this.appendVisual(X)},click:function(Y,er){var X=this.eventArgs(er);if(!Y.trigger(bE,X)){er.preventDefault()}},hover:function(Y,er){var X=this.eventArgs(er);if(!Y.trigger(aj,X)){er.preventDefault();Y._legendItemHover(X.seriesIndex,X.pointIndex)}return true},leave:function(X){X._unsetActivePoint()},eventArgs:function(Y){var X=this.options;return{element:cK(Y),text:X.text,series:X.series,seriesIndex:X.series.index,pointIndex:X.pointIndex}},renderVisual:function(){var er=this;var X=this.options;var Y=X.visual;if(Y){this.visual=Y({active:X.active,series:X.series,sender:this.getSender(),pointIndex:X.pointIndex,options:{markers:this.markerOptions(),labels:X.labels},createVisual:function(){er.createVisual();er.renderChildren();er.renderComplete();var es=er.visual;delete er.visual;return es}});this.addVisual()}else{a.fn.renderVisual.call(this)}}});var c6="horizontal";var dy="pointer";var aF="custom";var db=dP.extend({init:function(X,Y){dP.fn.init.call(this,X);this.chartService=Y;if(!dv(this.options.position,[bQ,d9,ei,cM,aF])){this.options.position=d9}this.createContainer();this.createItems()},createContainer:function(){var er=this.options;var X=er.position;var Y=er.align;var et=X;var es=ef;if(X===aF){et=cM}else{if(dv(X,[bQ,ei])){if(Y==="start"){et=cM}else{if(Y==="end"){et=d9}else{et=ef}}es=X}else{if(Y){if(Y==="start"){es=bQ}else{if(Y==="end"){es=ei}}}}}this.container=new a({margin:er.margin,padding:er.padding,background:er.background,border:er.border,vAlign:es,align:et,zIndex:er.zIndex,shrinkToFit:true});this.append(this.container)},createItems:function(){var et=this.getService();var er=this.options;var Y=this.isVertical();var ew=new ee({vertical:Y,spacing:er.spacing},et);var X=er.items;if(er.reverse){X=X.slice(0).reverse()}var ev=X.length;for(var es=0;es<ev;es++){var eu=X[es];ew.append(new aq(aD({},{markers:er.markers,labels:er.labels},er.item,eu)))}ew.render();this.container.append(ew)},isVertical:function(){var es=this.options;var er=es.orientation;var X=es.position;var Y=X===aF&&er!==c6||(bD(er)?er!==c6:dv(X,[cM,d9]));return Y},hasItems:function(){return this.container.children[0].children.length>0},reflow:function(X){var er=this.options;var Y=X.clone();if(!this.hasItems()){this.box=Y;return}if(er.position===aF){this.containerCustomReflow(Y);this.box=Y}else{this.containerReflow(Y)}},containerReflow:function(ex){var es=this;var eA=es.options;var X=es.container;var ew=eA.position;var er=eA.width;var ez=eA.height;var ey=ew===bQ||ew===ei?dM:dL;var eu=this.isVertical();var et=ex.clone();var Y=ex.clone();if(ew===cM||ew===d9){Y.y1=et.y1=0}if(eu&&ez){Y.y2=Y.y1+ez;Y.align(et,dL,X.options.vAlign)}else{if(!eu&&er){Y.x2=Y.x1+er;Y.align(et,dM,X.options.align)}}X.reflow(Y);Y=X.box;var ev=Y.clone();if(eA.offsetX||eA.offsetY){Y.translate(eA.offsetX,eA.offsetY);this.container.reflow(Y)}ev[ey+1]=ex[ey+1];ev[ey+2]=ex[ey+2];this.box=ev},containerCustomReflow:function(ew){var es=this;var ey=es.options;var X=es.container;var ev=ey.offsetX;var eu=ey.offsetY;var er=ey.width;var ex=ey.height;var et=this.isVertical();var Y=ew.clone();if(et&&ex){Y.y2=Y.y1+ex}else{if(!et&&er){Y.x2=Y.x1+er}}X.reflow(Y);Y=X.box;X.reflow(new cB(ev,eu,ev+Y.width(),eu+Y.height()))},renderVisual:function(){if(this.hasItems()){dP.fn.renderVisual.call(this)}}});i(db,{position:d9,items:[],labels:{margin:{left:6}},offsetX:0,offsetY:0,margin:bs(5),padding:bs(5),border:{color:aN,width:0},item:{cursor:dy},spacing:6,background:"",zIndex:1,markers:{border:{width:0},width:15,height:3,type:"rect",align:cM,vAlign:ef}});var aY=aw.extend({init:function(){this._registry=[]},register:function(Y,X){this._registry.push({type:Y,seriesTypes:X})},create:function(ew,es,eu){var Y=this._registry;var er=Y[0];var et;for(var X=0;X<Y.length;X++){var ev=Y[X];et=aR(ew,ev.seriesTypes);if(et.length>0){er=ev;break}}return new er.type(et,es,eu)}});aY.current=new aY();var eh=3;function dZ(Y){var X=document.createElement("div");if(Y){X.className=Y}return X}function bp(X){var Y=X;while(Y&&!ar(Y,"k-handle")){Y=Y.parentNode}return Y}var d5=aw.extend({init:function(er,et,Y,X){var es=er.element;var eu=this.getValueAxis(et);this.options=aD({},this.options,Y);this.chart=er;this.observer=X;this.chartElement=es;this.categoryAxis=et;this._dateAxis=this.categoryAxis instanceof bM;this.valueAxis=eu;this.initOptions();if(this.options.visible){this.createElements();this.set(this._index(this.options.from),this._index(this.options.to));this.bindEvents()}},createElements:function(){var Y=this.options;var ew=this.wrapper=dZ("k-selector");m(ew,{top:Y.offset.top,left:Y.offset.left,width:Y.width,height:Y.height});var et=this.selection=dZ("k-selection");this.leftMask=dZ("k-mask");this.rightMask=dZ("k-mask");ew.appendChild(this.leftMask);ew.appendChild(this.rightMask);ew.appendChild(et);et.appendChild(dZ("k-selection-bg"));var es=this.leftHandle=dZ("k-handle k-left-handle");var eu=this.rightHandle=dZ("k-handle k-right-handle");es.appendChild(dZ());eu.appendChild(dZ());et.appendChild(es);et.appendChild(eu);this.chartElement.appendChild(ew);var ev=m(et,["borderLeftWidth","borderRightWidth","height"]);var er=m(es,"height").height;var X=m(eu,"height").height;Y.selection={border:{left:ev.borderLeftWidth,right:ev.borderRightWidth}};m(es,{top:(ev.height-er)/2});m(eu,{top:(ev.height-X)/2});ew.style.cssText=ew.style.cssText},bindEvents:function(){this._mousewheelHandler=this.options.mousewheel!==false?this._mousewheel.bind(this):bw;var X;bb(this.wrapper,(X={},X[cx]=this._mousewheelHandler,X));this._domEvents=ac.DomEventsBuilder.create(this.wrapper,{start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),press:this._press.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)})},initOptions:function(){var Y=this;var ex=Y.options;var et=Y.categoryAxis;var ev=Y.valueAxis;var X=et.lineBox();var ey=ev.lineBox();var eu=this.chart.chartService.intl;if(this._dateAxis){aD(ex,{min:c5(eu,ex.min),max:c5(eu,ex.max),from:c5(eu,ex.from),to:c5(eu,ex.to)})}var es=m(this.chartElement,["paddingLeft","paddingTop"]);var er=es.paddingLeft;var ew=es.paddingTop;this.options=aD({},{width:X.width(),height:ey.height(),padding:{left:er,top:ew},offset:{left:ey.x2+er,top:ey.y1+ew},from:ex.min,to:ex.max},ex)},destroy:function(){if(this._domEvents){this._domEvents.destroy();delete this._domEvents}clearTimeout(this._mwTimeout);this._state=null;if(this.wrapper){var X;dc(this.wrapper,(X={},X[cx]=this._mousewheelHandler,X));this.chartElement.removeChild(this.wrapper)}},_rangeEventArgs:function(X){return{axis:this.categoryAxis.options,from:this._value(X.from),to:this._value(X.to)}},_start:function(es){var Y=this.options;var er=cK(es);if(this._state||!er){return}this.chart._unsetActivePoint();this._state={moveTarget:bp(er)||er,startLocation:es.x?es.x.location:0,range:{from:this._index(Y.from),to:this._index(Y.to)}};var X=this._rangeEventArgs({from:this._index(Y.from),to:this._index(Y.to)});if(this.trigger(j,X)){this._state=null}},_press:function(Y){var X;if(this._state){X=this._state.moveTarget}else{X=bp(cK(Y))}if(X){b8.addClass(X,"k-handle-active")}},_move:function(ew){if(!this._state){return}var Y=this;var X=Y._state;var eE=Y.options;var eu=Y.categoryAxis.options.categories;var ev=X.range;var ex=X.moveTarget;var eC=this._index(eE.from);var eB=this._index(eE.to);var et=this._index(eE.min);var ez=this._index(eE.max);var eD=X.startLocation-ew.x.location;var ey={from:ev.from,to:ev.to};var eA=ev.to-ev.from;var er=m(this.wrapper,"width").width/(eu.length-1);var es=Math.round(eD/er);if(!ex){return}if(ar(ex,"k-selection k-selection-bg")){ev.from=Math.min(Math.max(et,eC-es),ez-eA);ev.to=Math.min(ev.from+eA,ez)}else{if(ar(ex,"k-left-handle")){ev.from=Math.min(Math.max(et,eC-es),ez-1);ev.to=Math.max(ev.from+1,ev.to)}else{if(ar(ex,"k-right-handle")){ev.to=Math.min(Math.max(et+1,eB-es),ez);ev.from=Math.min(ev.to-1,ev.from)}}}if(ev.from!==ey.from||ev.to!==ey.to){this.move(ev.from,ev.to);this.trigger(b9,this._rangeEventArgs(ev))}},_end:function(){if(this._state){var Y=this._state.moveTarget;if(Y){b8.removeClass(Y,"k-handle-active")}var X=this._state.range;this.set(X.from,X.to);this.trigger(ay,this._rangeEventArgs(X));delete this._state}},_tap:function(ew){var X=this;var eD=X.options;var et=X.categoryAxis;var ey=this.chart._eventCoordinates(ew);var eu=et.pointCategoryIndex(new ec(ey.x,et.box.y1));var eB=this._index(eD.from);var eC=this._index(eD.to);var er=this._index(eD.min);var ex=this._index(eD.max);var eA=eC-eB;var ez=eB+eA/2;var es={};var ev=ew.event.which===3;var Y=Math.round(ez-eu);if(this._state||ev){return}this.chart._unsetActivePoint();if(!et.options.justified){Y--}es.from=Math.min(Math.max(er,eB-Y),ex-eA);es.to=Math.min(es.from+eA,ex);this._start(ew);if(this._state){this._state.range=es;this.trigger(b9,this._rangeEventArgs(es));this._end()}},_mousewheel:function(Y){var es=this;var er=b8.mousewheelDelta(Y);this._start({target:this.selection});if(this._state){var X=this._state.range;Y.preventDefault();Y.stopPropagation();if(Math.abs(er)>1){er*=eh}if(this.options.mousewheel.reverse){er*=-1}if(this.expand(er)){this.trigger(b9,{axis:this.categoryAxis.options,delta:er,originalEvent:Y,from:this._value(X.from),to:this._value(X.to)})}if(this._mwTimeout){clearTimeout(this._mwTimeout)}this._mwTimeout=setTimeout(function(){es._end()},aB)}},_gesturestart:function(er){var Y=this.options;this._state={range:{from:this._index(Y.from),to:this._index(Y.to)}};var X=this._rangeEventArgs(this._state.range);if(this.trigger(j,X)){this._state=null}else{er.preventDefault()}},_gestureend:function(){if(this._state){this.trigger(ay,this._rangeEventArgs(this._state.range));delete this._state}},_gesturechange:function(eu){var Y=this;var ev=Y.chart;var X=Y._state;var ez=Y.options;var es=Y.categoryAxis;var et=X.range;var ey=ev._toModelCoordinates(eu.touches[0].x.location).x;var ex=ev._toModelCoordinates(eu.touches[1].x.location).x;var er=Math.min(ey,ex);var ew=Math.max(ey,ex);eu.preventDefault();et.from=es.pointCategoryIndex(new ec(er))||ez.min;et.to=es.pointCategoryIndex(new ec(ew))||ez.max;this.move(et.from,et.to);this.trigger(b9,this._rangeEventArgs(et))},_index:function(Y){var X=Y;if(Y instanceof Date){X=this.categoryAxis.categoryIndex(Y)}return X},_value:function(Y){var X=this.categoryAxis.options.categories;var er=Y;if(this._dateAxis){if(Y>X.length-1){er=this.options.max}else{er=X[Math.ceil(Y)]}}return er},_slot:function(Y){var er=this.categoryAxis;var X=this._index(Y);return er.getSlot(X,X,true)},move:function(ew,ex){var ey=this.options;var et=ey.offset;var ev=ey.padding;var er=ey.selection.border;var eu=this._slot(ew);var Y=ck(eu.x1-et.left+ev.left);m(this.leftMask,{width:Y});m(this.selection,{left:Y});eu=this._slot(ex);var es=ck(ey.width-(eu.x1-et.left+ev.left));m(this.rightMask,{width:es});var X=ey.width-es;if(X!==ey.width){X+=er.right}m(this.rightMask,{left:X});m(this.selection,{width:Math.max(ey.width-(Y+es)-er.right,0)})},set:function(ev,eu){var er=this.options;var es=this._index(er.min);var X=this._index(er.max);var et=ch(this._index(ev),es,X);var Y=ch(this._index(eu),et+1,X);if(er.visible){this.move(et,Y)}er.from=this._value(et);er.to=this._value(Y)},expand:function(ew){var ex=this.options;var X=this._index(ex.min);var et=this._index(ex.max);var Y=ex.mousewheel.zoom;var eu=this._index(ex.from);var ev=this._index(ex.to);var er={from:eu,to:ev};var es=aD({},er);if(this._state){er=this._state.range}if(Y!==d9){er.from=ch(ch(eu-ew,0,ev-1),X,et)}if(Y!==cM){er.to=ch(ch(ev+ew,er.from+1,et),X,et)}if(er.from!==es.from||er.to!==es.to){this.set(er.from,er.to);return true}},getValueAxis:function(et){var es=et.pane.axes;var er=es.length;for(var X=0;X<er;X++){var Y=es[X];if(Y.options.vertical!==et.options.vertical){return Y}}},trigger:function(Y,X){return(this.observer||this.chart).trigger(Y,X)}});function bw(X){X.stopPropagation()}i(d5,{visible:true,mousewheel:{zoom:"both"},min:c9,max:cw});var dw=cG.extend({show:function(X){if(!X||!X.tooltipAnchor||this._current&&this._current===X){return}var er=aD({},this.options,X.options.tooltip);var Y=X.tooltipAnchor();if(Y){this._current=X;cG.fn.show.call(this,{point:X,anchor:Y},er,X)}else{this.hide()}},hide:function(){delete this._current;cG.fn.hide.call(this)}});var by=cG.extend({init:function(Y,X){cG.fn.init.call(this,Y.chartService,X);this.plotArea=Y;this.formatService=Y.chartService.format},showAt:function(es,et){var er=a4(es,function(ev){var ex=ev.series.tooltip;var ew=ex&&ex.visible===false;return !ew});if(er.length>0){var X=er[0];var eu=this.plotArea.categoryAxis.getSlot(X.categoryIx);var Y=et?this._slotAnchor(et,eu):this._defaultAnchor(X,eu);this.show({anchor:Y,shared:true,points:es,category:X.category,categoryText:this.formatService.auto(this.options.categoryFormat,X.category)},this.options)}},_slotAnchor:function(X,es){var Y=this.plotArea.categoryAxis;var er={horizontal:"left",vertical:"center"};if(!Y.options.vertical){X.x=es.center().x}return{point:X,align:er}},_defaultAnchor:function(Y,ew){var es=Y.owner.pane.chartsBox();var er=this.plotArea.categoryAxis.options.vertical;var X=es.center();var et=ew.center();var ev={horizontal:"center",vertical:"center"};var eu;if(er){eu=new ec(X.x,et.y)}else{eu=new ec(et.x,X.y)}return{point:eu,align:ev}}});i(by,{categoryFormat:"{0:d}"});var aE=e.extend({setup:function(){var et=this;var er=et.element;var Y=et.options;var eu=er.bbox();if(eu){this.origin=Y.origin;var es=Y.vertical?dL:dM;var X=this.fromScale=new bf(1,1);X[es]=a7;er.transform(ab().scale(X.x,X.y))}else{this.abort()}},step:function(er){var Y=b8.interpolateValue(this.fromScale.x,1,er);var X=b8.interpolateValue(this.fromScale.y,1,er);this.element.transform(ab().scale(Y,X,this.origin))},abort:function(){e.fn.abort.call(this);this.element.transform(null)}});i(aE,{duration:H});eq.current.register(cc,aE);var aA=e.extend({setup:function(){var X=this.center=this.element.bbox().center();this.element.transform(ab().scale(a7,a7,X))},step:function(X){this.element.transform(ab().scale(X,X,this.center))}});i(aA,{easing:"easeOutElastic"});eq.current.register(bx,aA);var V=e.extend({setup:function(){this.fadeTo=this.element.opacity();this.element.opacity(0)},step:function(X){this.element.opacity(X*this.fadeTo)}});i(V,{duration:200,easing:"linear"});eq.current.register(dI,V);var cA=e.extend({setup:function(){this.element.transform(ab().scale(a7,a7,this.options.center))},step:function(X){this.element.transform(ab().scale(X,X,this.options.center))}});i(cA,{easing:"easeOutElastic",duration:H});eq.current.register(c0,cA);var aH=cP.extend({render:function(){cP.fn.render.call(this);this.renderSegments()},createSegment:function(et,Y,X){var er=Y.style;var es;if(er===aM){es=bP}else{es=cC}return new es(et,Y,X)},animationPoints:function(){var X=cP.fn.animationPoints.call(this);return X.concat(this._segments)},createMissingValue:function(er,X){if(X===bL){var Y={x:er.x,y:er.y};if(!ej(Y.x)){Y.x=0}if(!ej(Y.y)){Y.y=0}return Y}}});aD(aH.prototype,ah);var aQ=cH.extend({initFields:function(){this.namedXAxes={};this.namedYAxes={};this.xAxisRangeTracker=new d4();this.yAxisRangeTracker=new d4()},render:function(es){var ev=this;if(es===void 0){es=this.panes}var er=this.groupSeriesByPane();for(var Y=0;Y<es.length;Y++){var eu=es[Y];var et=er[eu.options.name||"default"]||[];ev.addToLegend(et);var X=ev.filterVisibleSeries(et);if(!X){continue}ev.createScatterChart(aR(X,S),eu);ev.createScatterLineChart(aR(X,E),eu);ev.createBubbleChart(aR(X,bx),eu)}this.createAxes(es)},appendChart:function(X,Y){this.xAxisRangeTracker.update(X.xAxisRanges);this.yAxisRangeTracker.update(X.yAxisRanges);cH.fn.appendChart.call(this,X,Y)},removeAxis:function(X){var Y=X.options.name;cH.fn.removeAxis.call(this,X);if(X.options.vertical){this.yAxisRangeTracker.reset(Y);delete this.namedYAxes[Y]}else{this.xAxisRangeTracker.reset(Y);delete this.namedXAxes[Y]}if(X===this.axisX){delete this.axisX}if(X===this.axisY){delete this.axisY}},seriesPaneName:function(et){var ez=this.options;var ey=et.xAxis;var ev=[].concat(ez.xAxis);var er=a4(ev,function(eA){return eA.name===ey})[0];var es=et.yAxis;var ex=[].concat(ez.yAxis);var X=a4(ex,function(eA){return eA.name===es})[0];var eu=ez.panes||[{}];var Y=eu[0].name||"default";var ew=(er||{}).pane||(X||{}).pane||Y;return ew},createScatterChart:function(X,Y){if(X.length>0){this.appendChart(new cP(this,{series:X,clip:Y.options.clip}),Y)}},createScatterLineChart:function(X,Y){if(X.length>0){this.appendChart(new aH(this,{series:X,clip:Y.options.clip}),Y)}},createBubbleChart:function(X,Y){if(X.length>0){this.appendChart(new K(this,{series:X,clip:Y.options.clip}),Y)}},createXYAxis:function(er,X,eB){var et=er.name;var eu=X?this.namedYAxes:this.namedXAxes;var es=X?this.yAxisRangeTracker:this.xAxisRangeTracker;var eA=aD({},er,{vertical:X});var eD=ci(eA.type,df);var eE=es.query();var ex=eD?{min:0.1,max:1}:{min:0,max:1};var eC=es.query(et)||eE||ex;var eF=[eA.min,eA.max];var ey=this.series;for(var eG=0;eG<ey.length;eG++){var ez=ey[eG];var eJ=ez[X?"yAxis":"xAxis"];if(eJ===eA.name||eB===0&&!eJ){var ew=bt.current.bindPoint(ez,0).valueFields;eF.push(ew[X?"y":"x"]);break}}if(eB===0&&eE){eC.min=Math.min(eC.min,eE.min);eC.max=Math.max(eC.max,eE.max)}var eH;for(var eI=0;eI<eF.length;eI++){if(eF[eI] instanceof Date){eH=true;break}}var ev;if(ci(eA.type,dO)||!eA.type&&eH){ev=b8.DateValueAxis}else{if(eD){ev=b8.LogarithmicAxis}else{ev=b8.NumericAxis}}var Y=new ev(eC.min,eC.max,eA,this.chartService);Y.axisIndex=eB;if(et){if(eu[et]){throw new Error((X?"Y":"X")+" axis with name "+et+" is already defined")}eu[et]=Y}this.appendAxis(Y);return Y},createAxes:function(ew){var et=this;var ez=this.options;var er=[].concat(ez.xAxis);var ev=[];var X=[].concat(ez.yAxis);var eu=[];for(var ex=0;ex<er.length;ex++){var es=et.findPane(er[ex].pane);if(dv(es,ew)){ev.push(et.createXYAxis(er[ex],false,ex))}}for(var Y=0;Y<X.length;Y++){var ey=et.findPane(X[Y].pane);if(dv(ey,ew)){eu.push(et.createXYAxis(X[Y],true,Y))}}this.axisX=this.axisX||ev[0];this.axisY=this.axisY||eu[0]},_dispatchEvent:function(ew,ev,Y){var ey=ew._eventCoordinates(ev);var ez=new ec(ey.x,ey.y);var et=this.axes;var er=et.length;var X=[];var ex=[];for(var eu=0;eu<er;eu++){var es=et[eu];var eB=es.options.vertical?ex:X;var eA=es.getValue(ez);if(eA!==null){eB.push(eA)}}if(X.length>0&&ex.length>0){ew.trigger(Y,{element:cK(ev),originalEvent:ev,x:ag(X),y:ag(ex)})}},updateAxisOptions:function(es,er){var X=es.options.vertical;var et=this.groupAxes(this.panes);var Y=(X?et.y:et.x).indexOf(es);var eu=[].concat(X?this.options.yAxis:this.options.xAxis)[Y];aD(eu,er)}});i(aQ,{xAxis:{},yAxis:{}});aD(aQ.prototype,dS);var du=dP.extend({init:function(er,Y,X){dP.fn.init.call(this,X);this.value=er;this.sector=Y},render:function(){var eu=this.options.labels;var es=this.owner.chartService;var et=this.value;if(this._rendered||this.visible===false){return}this._rendered=true;if(eu.template){var Y=b4.compile(eu.template);et=Y({dataItem:this.dataItem,category:this.category,value:this.value,series:this.series,percentage:this.percentage})}else{if(eu.format){et=es.format.auto(eu.format,et)}}if(eu.visible&&et){if(eu.position===ef||eu.position===x){if(!eu.color){var X=new A(this.options.color).percBrightness();if(X>180){eu.color=aN}else{eu.color=bY}}if(!eu.background){eu.background=this.options.color}}else{var er=es.theme.seriesDefaults.labels;eu.color=eu.color||er.color;eu.background=eu.background||er.background}this.label=new aV(et,aD({},eu,{align:ef,vAlign:"",animation:{type:dI,delay:this.animationDelay}}));this.append(this.label)}},reflow:function(X){this.render();this.box=X;this.reflowLabel()},reflowLabel:function(){var es=this;var er=es.options.labels;var ey=es.label;var eu=this.sector.clone();var X=er.distance;var et=eu.middle();if(ey){var ev=ey.box.height();var ex=ey.box.width();var ew;if(er.position===ef){eu.radius=Math.abs((eu.radius-ev)/2)+ev;ew=eu.point(et);ey.reflow(new cB(ew.x,ew.y-ev/2,ew.x,ew.y))}else{if(er.position===x){eu.radius=eu.radius-ev/2;ew=eu.point(et);ey.reflow(new cB(ew.x,ew.y-ev/2,ew.x,ew.y))}else{var Y;ew=eu.clone().expand(X).point(et);if(ew.x>=eu.center.x){Y=ew.x+ex;ey.orientation=d9}else{Y=ew.x-ex;ey.orientation=cM}ey.reflow(new cB(Y,ew.y-ev,ew.x,ew.y))}}}},createVisual:function(){var eu=this;var et=this;var er=et.sector;var X=et.options;dP.fn.createVisual.call(this);if(this.value){if(X.visual){var Y=(er.startAngle+180)%360;var es=X.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,center:new bf(er.center.x,er.center.y),radius:er.radius,innerRadius:er.innerRadius,startAngle:Y,endAngle:Y+er.angle,options:X,sender:this.getSender(),createVisual:function(){var ev=new aK();eu.createSegmentVisual(ev);return ev}});if(es){this.visual.append(es)}}else{this.createSegmentVisual(this.visual)}}},createSegmentVisual:function(ev){var Y=this;var er=Y.sector;var ex=Y.options;var eu=ex.border||{};var es=eu.width>0?{stroke:{color:eu.color,width:eu.width,opacity:eu.opacity,dashType:eu.dashType}}:{};var et=ex.color;var ew={color:et,opacity:ex.opacity};var X=this.createSegment(er,aD({fill:ew,stroke:{opacity:ex.opacity},zIndex:ex.zIndex},es));ev.append(X);if(ax(ex)){ev.append(this.createGradientOverlay(X,{baseColor:et,fallbackFill:ew},aD({center:[er.center.x,er.center.y],innerRadius:er.innerRadius,radius:er.radius,userSpace:true},ex.overlay)))}},createSegment:function(Y,X){if(X.singleSegment){return new n.Circle(new em.Circle(new bf(Y.center.x,Y.center.y),Y.radius),X)}return b8.ShapeBuilder.current.createRing(Y,X)},createAnimation:function(){var er=this;var Y=er.options;var X=er.sector.center;aD(Y,{animation:{center:[X.x,X.y],delay:this.animationDelay}});dP.fn.createAnimation.call(this)},createHighlight:function(er){var X=this.options.highlight||{};var Y=X.border||{};return this.createSegment(this.sector,aD({},er,{fill:{color:X.color,opacity:X.opacity},stroke:{opacity:Y.opacity,width:Y.width,color:Y.color}}))},highlightVisual:function(){return this.visual.children[0]},highlightVisualArgs:function(){var X=this.sector;return{options:this.options,radius:X.radius,innerRadius:X.innerRadius,center:new bf(X.center.x,X.center.y),startAngle:X.startAngle,endAngle:X.angle+X.startAngle,visual:this.visual}},tooltipAnchor:function(){var X=this.sector.clone().expand(h);var Y=X.middle();var er=X.point(Y);return{point:er,align:cF(Y+180)}},formatValue:function(X){return this.owner.formatPointValue(this,X)}});var dt=ck(b8.rad(30),o);var cO=ck(b8.rad(60),o);function cF(et){var es=b8.rad(et);var er=ck(Math.sin(es),o);var eu=ck(Math.cos(es),o);var X;if(Math.abs(er)>cO){X=ef}else{if(eu<0){X=d9}else{X=cM}}var Y;if(Math.abs(er)<dt){Y=ef}else{if(er<0){Y=ei}else{Y=bQ}}return{horizontal:X,vertical:Y}}i(du,{color:bY,overlay:{gradient:"roundedBevel"},border:{width:0.5},labels:{visible:false,distance:35,font:dn.DEFAULT_FONT,margin:bs(0.5),align:bn,zIndex:1,position:aO},animation:{type:c0},highlight:{visible:true,border:{width:1}},visible:true});aD(du.prototype,l);var el={createLegendItem:function(et,ev,eA){var ez=this.options.legend||{};var X=ez.labels||{};var eu=ez.inactiveItems||{};var er=eu.labels||{};if(eA&&eA.visibleInLegend!==false){var es=eA.visible!==false;var ex=es?X.template:er.template||X.template;var ey=eA.category||"";if(ex){ey=b4.compile(ex)({text:ey,series:eA.series,dataItem:eA.dataItem,percentage:eA.percentage,value:et})}var ew,Y;if(es){ew={};Y=ev.color}else{ew={color:er.color,font:er.font};Y=(eu.markers||{}).color}if(ey){this.legendItems.push({pointIndex:eA.index,text:ey,series:eA.series,markerColor:Y,labels:ew})}}}};function a5(er,X,Y){var es=X.visible;if(bD(es)){return es}var et=er.pointVisibility;if(et){return et[Y]}}function bK(er){var eu=er.data;var es=0;for(var Y=0;Y<eu.length;Y++){var X=bt.current.bindPoint(er,Y);var et=X.valueFields.value;if(B(et)){et=parseFloat(et)}var ev=a5(er,X.fields,Y);if(p(et)&&ev!==false){es+=Math.abs(et)}}return es}var d1=70;var bS=dP.extend({init:function(Y,X){dP.fn.init.call(this,X);this.plotArea=Y;this.chartService=Y.chartService;this.points=[];this.legendItems=[];this.render()},render:function(){this.traverseDataPoints(this.addValue.bind(this))},traverseDataPoints:function(et){var eI=this;var eu=this;var es=eu.options;var er=eu.plotArea.options.seriesColors;if(er===void 0){er=[]}var eD=er.length;var ew=es.series;var eF=ew.length;for(var eA=0;eA<eF;eA++){var ex=ew[eA];var eJ=ex.data;var eK=bK(ex);var X=360/eK;var ey=void 0;if(bD(ex.startAngle)){ey=ex.startAngle}else{ey=es.startAngle}if(eA!==eF-1){if(ex.labels.position===aO){ex.labels.position=ef}}for(var eE=0;eE<eJ.length;eE++){var eG=bt.current.bindPoint(ex,eE);var eB=eG.valueFields.value;var ev=Math.abs(eB);var ez=eG.fields;var eH=ev*X;var eC=eJ.length!==1&&Boolean(ez.explode);if(!a1(ex.color)){ex.color=ez.color||er[eE%eD]}var Y=a5(ex,ez,eE);et(eB,new b8.Ring(null,0,0,ey,eH),{owner:eI,category:ez.category||"",index:eE,series:ex,seriesIx:eA,dataItem:eJ[eE],percentage:eK!==0?ev/eK:0,explode:eC,visibleInLegend:ez.visibleInLegend,visible:Y,zIndex:eF-eA,animationDelay:eI.animationDelay(eE,eA,eF)});if(Y!==false){ey+=eH}}}},evalSegmentOptions:function(Y,es,X){var er=X.series;bg(Y,{value:es,series:er,dataItem:X.dataItem,category:X.category,percentage:X.percentage},{defaults:er._defaults,excluded:["data","template","visual","toggle"]})},addValue:function(et,er,X){var Y=aD({},X.series,{index:X.index});this.evalSegmentOptions(Y,et,X);this.createLegendItem(et,Y,X);if(X.visible===false){return}var es=new du(et,er,Y);d7.extend(es,X);this.append(es);this.points.push(es)},reflow:function(ew){var eu=this;var Y=eu.options;var eJ=eu.points;var eE=eu.seriesConfigs;if(eE===void 0){eE=[]}var ex=eJ.length;var ez=ew.clone();var eL=5;var eB=Math.min(ez.width(),ez.height());var eO=eB/2;var es=eB-eB*0.85;var et=new cB(ez.x1,ez.y1,ez.x1+eB,ez.y1+eB);var ev=et.center();var eD=ez.center();var eK=Y.series.length;var eC=[];var eM=[];var eA=bF(Y.padding,es);eA=eA>eO-eL?eO-eL:eA;et.translate(eD.x-ev.x,eD.y-ev.y);var er=eO-eA;var eN=new ec(er+et.x1+eA,er+et.y1+eA);for(var eI=0;eI<ex;eI++){var X=eJ[eI];var eG=X.sector;var eH=X.seriesIx;eG.radius=er;eG.center=eN;if(eE.length){var eF=eE[eH];eG.innerRadius=eF.innerRadius;eG.radius=eF.radius}if(eH===eK-1&&X.explode){eG.center=eG.clone().setRadius(eG.radius*0.15).point(eG.middle())}X.reflow(et);var ey=X.label;if(ey){if(ey.options.position===aO){if(eH===eK-1){if(ey.orientation===d9){eM.push(ey)}else{eC.push(ey)}}}}}if(eC.length>0){eC.sort(this.labelComparator(true));this.leftLabelsReflow(eC)}if(eM.length>0){eM.sort(this.labelComparator(false));this.rightLabelsReflow(eM)}this.box=et},leftLabelsReflow:function(Y){var X=this.distanceBetweenLabels(Y);this.distributeLabels(X,Y)},rightLabelsReflow:function(Y){var X=this.distanceBetweenLabels(Y);this.distributeLabels(X,Y)},distanceBetweenLabels:function(eu){var ev=dC(this.points);var er=ev.sector;var ew=eu.length-1;var et=er.radius+ev.options.labels.distance;var ex=[];var ey=eu[0].box;var X=ck(ey.y1-(er.center.y-et-ey.height()-ey.height()/2));ex.push(X);for(var es=0;es<ew;es++){var Y=eu[es+1].box;ey=eu[es].box;X=ck(Y.y1-ey.y2);ex.push(X)}X=ck(er.center.y+et-eu[ew].box.y2-eu[ew].box.height()/2);ex.push(X);return ex},distributeLabels:function(X,ew){var ev=this;var et=X.length;var eu,er,es;for(var Y=0;Y<et;Y++){es=-X[Y];eu=er=Y;while(es>0&&(eu>=0||er<et)){es=ev._takeDistance(X,Y,--eu,es);es=ev._takeDistance(X,Y,++er,es)}}this.reflowLabels(X,ew)},_takeDistance:function(er,es,Y,et){var X=et;if(er[Y]>0){var eu=Math.min(er[Y],X);X-=eu;er[Y]-=eu;er[es]+=eu}return X},reflowLabels:function(ey,ew){var eu=this;var ex=dC(this.points);var er=ex.sector;var ev=ex.options.labels;var X=ew.length;var Y=ev.distance;var eA=er.center.y-(er.radius+Y)-ew[0].box.height();var eB;ey[0]+=2;for(var es=0;es<X;es++){var ez=ew[es];var et=ez.box;eA+=ey[es];eB=eu.hAlignLabel(et.x2,er.clone().expand(Y),eA,eA+et.height(),ez.orientation===d9);if(ez.orientation===d9){if(ev.align!==bn){eB=er.radius+er.center.x+Y}ez.reflow(new cB(eB+et.width(),eA,eB,eA))}else{if(ev.align!==bn){eB=er.center.x-er.radius-Y}ez.reflow(new cB(eB-et.width(),eA,eB,eA))}eA+=et.height()}},createVisual:function(){var eH=this;var et=this;var eA=et.options.connectors;var eD=et.points;var eu=eD.length;var eG=4;dP.fn.createVisual.call(this);this._connectorLines=[];for(var eE=0;eE<eu;eE++){var X=eD[eE];var eC=X.sector;var ew=X.label;var eF=eC.middle();var ev=(X.options.connectors||{}).color||eA.color;if(ew){var ex=new bl({stroke:{color:ev,width:eA.width},animation:{type:dI,delay:X.animationDelay}});if(ew.options.position===aO&&X.value!==0){var ey=ew.box;var ez=eC.center;var es=eC.point(eF);var eI=new ec(ey.x1,ey.center().y);var eB=void 0,er=void 0,Y=void 0;es=eC.clone().expand(eA.padding).point(eF);ex.moveTo(es.x,es.y);if(ew.orientation===d9){er=new ec(ey.x1-eA.padding,ey.center().y);Y=a2(ez,es,eI,er);eI=new ec(er.x-eG,er.y);Y=Y||eI;Y.x=Math.min(Y.x,eI.x);if(eH.pointInCircle(Y,eC.center,eC.radius+eG)||Y.x<eC.center.x){eB=eC.center.x+eC.radius+eG;if(X.options.labels.align!==bz){if(eB<eI.x){ex.lineTo(eB,es.y)}else{ex.lineTo(es.x+eG*2,es.y)}}else{ex.lineTo(eB,es.y)}ex.lineTo(eI.x,er.y)}else{Y.y=er.y;ex.lineTo(Y.x,Y.y)}}else{er=new ec(ey.x2+eA.padding,ey.center().y);Y=a2(ez,es,eI,er);eI=new ec(er.x+eG,er.y);Y=Y||eI;Y.x=Math.max(Y.x,eI.x);if(eH.pointInCircle(Y,eC.center,eC.radius+eG)||Y.x>eC.center.x){eB=eC.center.x-eC.radius-eG;if(X.options.labels.align!==bz){if(eB>eI.x){ex.lineTo(eB,es.y)}else{ex.lineTo(es.x-eG*2,es.y)}}else{ex.lineTo(eB,es.y)}ex.lineTo(eI.x,er.y)}else{Y.y=er.y;ex.lineTo(Y.x,Y.y)}}ex.lineTo(er.x,er.y);eH._connectorLines.push(ex);eH.visual.append(ex)}}}},labelComparator:function(X){var Y=X?-1:1;return function(es,er){var eu=(es.parent.sector.middle()+270)%360;var et=(er.parent.sector.middle()+270)%360;return(eu-et)*Y}},hAlignLabel:function(ex,er,ew,eu,ev){var et=er.radius;var X=er.center;var es=X.x;var Y=X.y;var ey=Math.min(Math.abs(Y-ew),Math.abs(Y-eu));if(ey>et){return ex}return es+Math.sqrt(et*et-ey*ey)*(ev?1:-1)},pointInCircle:function(er,Y,X){return Math.pow(Y.x-er.x,2)+Math.pow(Y.y-er.y,2)<Math.pow(X,2)},formatPointValue:function(X,Y){return this.chartService.format.auto(Y,X.value)},animationDelay:function(X){return X*d1}});function a2(er,Y,eu,es){var ew=(es.x-eu.x)*(er.y-eu.y)-(es.y-eu.y)*(er.x-eu.x);var et=(es.y-eu.y)*(Y.x-er.x)-(es.x-eu.x)*(Y.y-er.y);var X;if(et!==0){var ev=ew/et;X=new ec(er.x+ev*(Y.x-er.x),er.y+ev*(Y.y-er.y))}return X}i(bS,{startAngle:90,connectors:{width:2,color:"#939393",padding:8},inactiveItems:{markers:{},labels:{}}});aD(bS.prototype,el);var dB=cH.extend({render:function(){this.createPieChart(this.series)},createPieChart:function(Y){var er=Y[0];var X=new bS(this,{series:Y,padding:er.padding,startAngle:er.startAngle,connectors:er.connectors,legend:this.options.legend});this.appendChart(X)},appendChart:function(X,Y){cH.fn.appendChart.call(this,X,Y);bU(this.options.legend.items,X.legendItems)}});var cz=du.extend({reflowLabel:function(){var es=this;var ev=es.options.labels;var X=es.label;var er=this.sector.clone();var eu=er.middle();if(X){var et=X.box.height();if(ev.position===ef){er.radius-=(er.radius-er.innerRadius)/2;var Y=er.point(eu);X.reflow(new cB(Y.x,Y.y-et/2,Y.x,Y.y))}else{du.fn.reflowLabel.call(this)}}},createSegment:function(Y,X){return b8.ShapeBuilder.current.createRing(Y,X)}});i(cz,{overlay:{gradient:"roundedGlass"},labels:{position:ef},animation:{type:c0}});aD(cz.prototype,l);var d0=50;var eb=bS.extend({addValue:function(et,er,X){var Y=aD({},X.series,{index:X.index});this.evalSegmentOptions(Y,et,X);this.createLegendItem(et,Y,X);if(!et||X.visible===false){return}var es=new cz(et,er,Y);d7.extend(es,X);this.append(es);this.points.push(es)},reflow:function(ex){var eK=this;var et=this.options;var ez=ex.clone();var eJ=5;var eE=Math.min(ez.width(),ez.height());var eL=eE/2;var ev=eE-eE*0.85;var eA=et.series;var eI=eA.length;var eD=bF(et.padding,ev);eD=eD>eL-eJ?eL-eJ:eD;var eC=eL-eD;var X=0;var es;for(var eH=0;eH<eI;eH++){var eB=eA[eH];if(eH===0){if(bD(eB.holeSize)){es=eB.holeSize;eC-=eB.holeSize}}if(bD(eB.size)){eC-=eB.size}else{X++}if(bD(eB.margin)&&eH!==eI-1){eC-=eB.margin}}if(!bD(es)){var Y=(eL-eD)/(eI+0.75);es=Y*0.75;eC-=es}var ey=es;var eF=0;var eG,eu;this.seriesConfigs=[];for(var ew=0;ew<eI;ew++){var er=eA[ew];eG=bF(er.size,eC/X);ey+=eF;eu=ey+eG;eK.seriesConfigs.push({innerRadius:ey,radius:eu});eF=er.margin||0;ey=eu}bS.fn.reflow.call(this,ex)},animationDelay:function(er,X,Y){return er*d0+H*(X+1)/(Y+1)}});i(eb,{startAngle:90,connectors:{width:2,color:"#939393",padding:8}});var y=dB.extend({render:function(){this.createDonutChart(this.series)},createDonutChart:function(X){var er=X[0];var Y=new eb(this,{series:X,padding:er.padding,connectors:er.connectors,legend:this.options.legend});this.appendChart(Y)}});var aP=0.15;var U=cH.extend({initFields:function(){this.valueAxisRangeTracker=new d4()},render:function(){this.addToLegend(this.series);this.createPolarAxis();this.createCharts();this.createValueAxis()},alignAxes:function(){var es=this.valueAxis;var Y=es.range();var eu=es.options.reverse?Y.max:Y.min;var et=es.getSlot(eu);var X=this.polarAxis.getSlot(0).center;var er=es.box.translate(X.x-et.x1,X.y-et.y1);es.reflow(er)},createValueAxis:function(){var es=this.valueAxisRangeTracker;var et=es.query();var ev=this.valueAxisOptions({roundToMajorUnit:false,zIndex:-1});var X,er;if(ev.type===df){X=b8.RadarLogarithmicAxis;er={min:0.1,max:1}}else{X=b8.RadarNumericAxis;er={min:0,max:1}}var Y=es.query(name)||et||er;if(Y&&et){Y.min=Math.min(Y.min,et.min);Y.max=Math.max(Y.max,et.max)}var eu=new X(Y.min,Y.max,ev,this.chartService);this.valueAxis=eu;this.appendAxis(eu)},reflowAxes:function(){var Y=this;var ey=Y.options.plotArea;var ex=Y.valueAxis;var es=Y.polarAxis;var et=Y.box;var X=Math.min(et.width(),et.height())*aP;var ev=bs(ey.padding||{},X);var ew=et.clone().unpad(ev);var eu=ew.clone().shrink(0,ew.height()/2);es.reflow(ew);ex.reflow(eu);var er=ex.lineBox().height()-ex.box.height();ex.reflow(ex.box.unpad({top:er}));this.axisBox=ew;this.alignAxes(ew)},backgroundBox:function(){return this.box}});var dH=cP.extend({pointSlot:function(es,Y){var X=es.center.y-Y.y1;var er=ec.onCircle(es.center,es.startAngle,X);return new cB(er.x,er.y,er.x,er.y)}});i(dH,{clip:false});var eo=aH.extend({});eo.prototype.pointSlot=dH.prototype.pointSlot;i(eo,{clip:false});var r=dG.extend({closeFill:function(Y){var X=this._polarAxisCenter();Y.lineTo(X.x,X.y)},_polarAxisCenter:function(){var Y=this.parent.plotArea.polarAxis;var X=Y.box.center();return X},strokeSegments:function(){var Y=this._strokeSegments;if(!Y){var X=this._polarAxisCenter();var er=new b8.CurveProcessor(false);var es=cC.prototype.points.call(this);es.push(X);Y=this._strokeSegments=er.process(es);Y.pop()}return Y}});var dA=au.extend({points:function(){var er=this;var es=er.parent.plotArea.polarAxis;var et=er.stackPoints;var X=es.box.center();var Y=cC.prototype.points.call(this,et);Y.unshift([X.x,X.y]);Y.push([X.x,X.y]);return Y}});var cW=eo.extend({createSegment:function(et,Y,X){var er=(Y.line||{}).style;var es;if(er===aM){es=new r(et,null,false,Y,X)}else{es=new dA(et,[],Y,X)}return es},createMissingValue:function(er,X){var Y;if(ej(er.x)&&X!==c){Y={x:er.x,y:er.y};if(X===bL){Y.y=0}}return Y},seriesMissingValues:function(X){return X.missingValues||bL},_hasMissingValuesGap:function(){var er=this;var Y=this.options.series;for(var X=0;X<Y.length;X++){if(er.seriesMissingValues(Y[X])===a0){return true}}},sortPoints:function(er){var et=this;er.sort(eg);if(this._hasMissingValuesGap()){for(var Y=0;Y<er.length;Y++){var X=er[Y];if(X){var es=X.value;if(!ej(es.y)&&et.seriesMissingValues(X.series)===a0){delete er[Y]}}}}return er}});function eg(Y,X){return Y.value.x-X.value.x}var aW=U.extend({createPolarAxis:function(){var X=new b8.PolarAxis(this.options.xAxis,this.chartService);this.polarAxis=X;this.axisX=X;this.appendAxis(X)},valueAxisOptions:function(X){return aD(X,{majorGridLines:{type:ad},minorGridLines:{type:ad}},this.options.yAxis)},createValueAxis:function(){U.fn.createValueAxis.call(this);this.axisY=this.valueAxis},appendChart:function(X,Y){this.valueAxisRangeTracker.update(X.yAxisRanges);cH.prototype.appendChart.call(this,X,Y)},createCharts:function(){var X=this.filterVisibleSeries(this.series);var Y=this.panes[0];this.createLineChart(aR(X,[bI]),Y);this.createScatterChart(aR(X,[bk]),Y);this.createAreaChart(aR(X,[da]),Y)},createLineChart:function(Y,er){if(Y.length===0){return}var X=new eo(this,{series:Y});this.appendChart(X,er)},createScatterChart:function(X,er){if(X.length===0){return}var Y=new dH(this,{series:X});this.appendChart(Y,er)},createAreaChart:function(Y,er){if(Y.length===0){return}var X=new cW(this,{series:Y});this.appendChart(X,er)},_dispatchEvent:function(et,ev,er){var eu=et._eventCoordinates(ev);var X=new ec(eu.x,eu.y);var es=this.axisX.getValue(X);var Y=this.axisY.getValue(X);if(es!==null&&Y!==null){et.trigger(er,{element:cK(ev),x:es,y:Y})}},createCrosshairs:function(){}});i(aW,{xAxis:{},yAxis:{}});aD(aW.prototype,dS);var dJ=b3.extend({pointSlot:function(Y,er){var X=Y.center.y-er.y1;var es=ec.onCircle(Y.center,Y.middle(),X);return new cB(es.x,es.y,es.x,es.y)},createSegment:function(eu,Y,X){var er=Y.style;var et;if(er===aM){et=bP}else{et=cC}var es=new et(eu,Y,X);if(eu.length===Y.data.length){es.options.closed=true}return es}});i(dJ,{clip:false});var bh=dG.extend({closeFill:function(){}});var R=au.extend({points:function(){return cC.prototype.points.call(this,this.stackPoints)}});var cj=dJ.extend({createSegment:function(ew,Y,X,es){var eu=this.options.isStacked;var er=(Y.line||{}).style;var et;if(er===aM){et=new bh(ew,es,eu,Y,X);et.options.closed=true}else{var ev;if(eu&&X>0&&es){ev=es.linePoints.slice(0).reverse()}ew.push(ew[0]);et=new R(ew,ev,Y,X)}return et},seriesMissingValues:function(X){return X.missingValues||bL}});var ap=cz.extend({init:function(Y,X){cz.fn.init.call(this,Y,null,X)}});i(ap,{overlay:{gradient:"none"},labels:{distance:10}});var dW=dP.extend({reflow:function(et){var Y=this;var eA=Y.options;var X=Y.children;var ez=eA.gap;var ey=eA.spacing;var ew=X.length;var ex=ew+ez+ey*(ew-1);var es=et.angle/ex;var er=et.startAngle+es*(ez/2);for(var ev=0;ev<ew;ev++){var eu=et.clone();eu.startAngle=er;eu.angle=es;if(X[ev].sector){eu.radius=X[ev].sector.radius}X[ev].reflow(eu);X[ev].sector=eu;er+=es+es*ey}}});i(dW,{gap:1,spacing:0});var I=dP.extend({reflow:function(es){var Y=this;var ex=Y.options.reverse;var X=Y.children;var et=X.length;var ev=ex?et-1:0;var er=ex?-1:1;this.box=new cB();for(var eu=ev;eu>=0&&eu<et;eu+=er){var ew=X[eu].sector;ew.startAngle=es.startAngle;ew.angle=es.angle}}});var dd=c7.extend({pointType:function(){return ap},clusterType:function(){return dW},stackType:function(){return I},categorySlot:function(Y,X){return Y.getSlot(X)},pointSlot:function(X,Y){var es=X.clone();var er=X.center.y;es.radius=er-Y.y1;es.innerRadius=er-Y.y2;return es},reflowPoint:function(X,Y){X.sector=Y;X.reflow()},createAnimation:function(){this.options.animation.center=this.box.toRect().center();c7.fn.createAnimation.call(this)}});dd.prototype.reflow=dF.prototype.reflow;i(dd,{clip:false,animation:{type:"pie"}});var G=U.extend({createPolarAxis:function(){var X=new b8.RadarCategoryAxis(this.options.categoryAxis,this.chartService);this.polarAxis=X;this.categoryAxis=X;this.appendAxis(X);this.aggregateCategories();this.createCategoryAxesLabels()},valueAxisOptions:function(X){if(this._hasBarCharts){aD(X,{majorGridLines:{type:ad},minorGridLines:{type:ad}})}if(this._isStacked100){aD(X,{roundToMajorUnit:false,labels:{format:"P0"}})}return aD(X,this.options.valueAxis)},aggregateCategories:function(){dE.prototype.aggregateCategories.call(this,this.panes)},createCategoryAxesLabels:function(){dE.prototype.createCategoryAxesLabels.call(this,this.panes)},filterSeries:function(X){return X},createCharts:function(){var X=this.filterVisibleSeries(this.series);var Y=this.panes[0];this.createAreaChart(aR(X,[dq]),Y);this.createLineChart(aR(X,[bW]),Y);this.createBarChart(aR(X,[L]),Y)},chartOptions:function(es){var er={series:es};var et=es[0];if(et){var Y=this.filterVisibleSeries(es);var X=et.stack;er.isStacked=X&&Y.length>1;er.isStacked100=X&&X.type==="100%"&&Y.length>1;if(er.isStacked100){this._isStacked100=true}}return er},createAreaChart:function(Y,er){if(Y.length===0){return}var X=new cj(this,this.chartOptions(Y));this.appendChart(X,er)},createLineChart:function(Y,er){if(Y.length===0){return}var X=new dJ(this,this.chartOptions(Y));this.appendChart(X,er)},createBarChart:function(Y,et){if(Y.length===0){return}var es=Y[0];var X=this.chartOptions(Y);X.gap=es.gap;X.spacing=es.spacing;var er=new dd(this,X);this.appendChart(er,et);this._hasBarCharts=true},seriesCategoryAxis:function(){return this.categoryAxis},_dispatchEvent:function(er,ev,Y){var eu=er._eventCoordinates(ev);var X=new ec(eu.x,eu.y);var es=this.categoryAxis.getCategory(X);var et=this.valueAxis.getValue(X);if(es!==null&&et!==null){er.trigger(Y,{element:cK(ev),category:es,value:et})}},createCrosshairs:function(){}});aD(G.prototype,dS,{appendChart:dE.prototype.appendChart,aggregateSeries:dE.prototype.aggregateSeries});i(G,{categoryAxis:{categories:[]},valueAxis:{}});var dj=dP.extend({init:function(er,Y,X){dP.fn.init.call(this,Y);this.value=er;this.options.index=X.index},reflow:function(Y){var er=this.points;var X=this.children[0];this.box=new cB(er[0].x,er[0].y,er[1].x,er[2].y);if(X){X.reflow(new cB(Y.x1,er[0].y,Y.x2,er[2].y))}},createVisual:function(){var er=this;var X=this.options;var Y;dP.fn.createVisual.call(this);if(X.visual){Y=X.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,points:this.points,options:X,sender:this.getSender(),createVisual:function(){return er.createPath()}})}else{Y=this.createPath()}if(Y){this.visual.append(Y)}},createPath:function(){var Y=this.options;var X=Y.border;var er=bl.fromPoints(this.points,{fill:{color:Y.color,opacity:Y.opacity},stroke:{color:X.color,opacity:X.opacity,width:X.width}}).close();return er},createHighlight:function(X){return bl.fromPoints(this.points,X)},highlightVisual:function(){return this.visual.children[0]},highlightVisualArgs:function(){var X=bl.fromPoints(this.points).close();return{options:this.options,path:X}},tooltipAnchor:function(){var X=this.box;return{point:new ec(X.center().x,X.y1),align:{horizontal:"center",vertical:"top"}}},formatValue:function(Y){var X=this;return X.owner.formatPointValue(X,Y)}});i(dj,{color:bY,border:{width:1}});aD(dj.prototype,l);var aa=dP.extend({init:function(Y,X){dP.fn.init.call(this,X);this.plotArea=Y;this.points=[];this.labels=[];this.legendItems=[];this.render()},formatPointValue:function(X,Y){return this.chartService.format.auto(Y,X.value)},render:function(){var ev=this;var Y=this;var eC=Y.options;var X=Y.plotArea.options.seriesColors;if(X===void 0){X=[]}var et=eC.series[0];var es=et.data;if(!es){return}var ey=bK(et);for(var eu=0;eu<es.length;eu++){var eB=bt.current.bindPoint(et,eu);var eA=eB.valueFields.value;if(eA===null||eA===undefined){continue}var ex=eB.fields;if(!a1(et.color)){et.color=ex.color||X[eu%X.length]}var er=a5(et,ex,eu);ex=aD({index:eu,owner:ev,series:et,dataItem:es[eu],percentage:Math.abs(eA)/ey},ex,{visible:er});var ew=ev.createSegment(eA,ex);var ez=ev.createLabel(eA,ex);if(ew&&ez){ew.append(ez)}}},evalSegmentOptions:function(Y,es,X){var er=X.series;bg(Y,{value:es,series:er,dataItem:X.dataItem,index:X.index},{defaults:er._defaults,excluded:["data","toggle","visual"]})},createSegment:function(es,X){var Y=aD({},X.series);this.evalSegmentOptions(Y,es,X);this.createLegendItem(es,Y,X);if(X.visible!==false){var er=new dj(es,Y,X);d7.extend(er,X);this.append(er);this.points.push(er);return er}},createLabel:function(eu,es){var Y=es.series;var X=es.dataItem;var er=aD({},this.options.labels,Y.labels);var ew=eu;if(er.visible){if(er.template){var ev=b4.compile(er.template);ew=ev({dataItem:X,value:eu,percentage:es.percentage,category:es.category,series:Y})}else{if(er.format){ew=this.plotArea.chartService.format.auto(er.format,ew)}}if(!er.color){var ex=new A(Y.color).percBrightness();if(ex>180){er.color=aN}else{er.color=bY}if(!er.background){er.background=Y.color}}this.evalSegmentOptions(er,eu,es);var et=new aV(ew,aD({vAlign:er.position},er));this.labels.push(et);return et}},labelPadding:function(){var eu=this.labels;var es={left:0,right:0};for(var Y=0;Y<eu.length;Y++){var X=eu[Y];var et=X.options.align;if(et!==ef){var er=eu[Y].box.width();if(et===cM){es.left=Math.max(es.left,er)}else{es.right=Math.max(es.right,er)}}}return es},dynamicSlopeReflow:function(ey,eD,eI){var es=this;var X=es.options;var eE=es.points;var ew=eE.length;var Y=eE[0];var eu=Y;for(var eB=0;eB<eE.length;eB++){if(eE[eB].percentage>eu.percentage){eu=eE[eB]}}var ex=Y.percentage/eu.percentage*eD;var ez=(eD-ex)/2;var eH=0;for(var et=0;et<ew;et++){var eA=eE[et].percentage;var eF=eE[et+1];var ev=eF?eF.percentage:eA;var eG=eE[et].points=[];var eC=X.dynamicHeight?eI*eA:eI/ew;var er=void 0;if(!eA){er=ev?0:eD/2}else{er=(eD-ex*(ev/eA))/2}er=ch(er,0,eD);eG.push(new bf(ey.x1+ez,ey.y1+eH));eG.push(new bf(ey.x1+eD-ez,ey.y1+eH));eG.push(new bf(ey.x1+eD-er,ey.y1+eC+eH));eG.push(new bf(ey.x1+er,ey.y1+eC+eH));ez=er;eH+=eC+X.segmentSpacing;ex=ch(eD-2*er,0,eD)}},constantSlopeReflow:function(eu,eA,eF){var es=this;var Y=es.options;var eC=es.points;var et=eC.length;var eG=Y.neckRatio<=1;var X=eG?Y.neckRatio*eA:eA;var ev=eG?0:(eA-eA/Y.neckRatio)/2;var eB=eG?eA:eA-ev*2;var ex=(eB-X)/2;var eE=0;for(var ey=0;ey<et;ey++){var eD=eC[ey].points=[];var ew=eC[ey].percentage;var er=Y.dynamicHeight?ex*ew:ex/et;var ez=Y.dynamicHeight?eF*ew:eF/et;eD.push(new bf(eu.x1+ev,eu.y1+eE));eD.push(new bf(eu.x1+eA-ev,eu.y1+eE));eD.push(new bf(eu.x1+eA-ev-er,eu.y1+ez+eE));eD.push(new bf(eu.x1+ev+er,eu.y1+ez+eE));ev+=er;eE+=ez+Y.segmentSpacing}},reflow:function(es){var eu=this.points;var ew=eu.length;if(!ew){return}var Y=this.options;var ev=es.clone().unpad(this.labelPadding());var er=ev.height()-Y.segmentSpacing*(ew-1);var et=ev.width();if(Y.dynamicSlope){this.dynamicSlopeReflow(ev,et,er)}else{this.constantSlopeReflow(ev,et,er)}for(var X=0;X<ew;X++){eu[X].reflow(es)}}});i(aa,{neckRatio:0.3,width:300,dynamicSlope:false,dynamicHeight:true,segmentSpacing:0,labels:{visible:false,align:ef,position:ef,zIndex:1}});aD(aa.prototype,el);var cm=cH.extend({render:function(){this.createFunnelChart(this.series)},createFunnelChart:function(Y){var er=Y[0];var X=new aa(this,{series:Y,legend:this.options.legend,neckRatio:er.neckRatio,dynamicHeight:er.dynamicHeight,dynamicSlope:er.dynamicSlope,segmentSpacing:er.segmentSpacing,highlight:er.highlight});this.appendChart(X)},appendChart:function(X,Y){cH.fn.appendChart.call(this,X,Y);bU(this.options.legend.items,X.legendItems)}});var bB="color";var cb="first";var F="from";var c8="max";var bV="min";var aJ="noteText";var dp="summary";var b0="to";aY.current.register(dE,[cc,bz,bv,ep,cZ,bc,T,ao,cU,aS,bo,cN,av,aG,bu,ek]);aY.current.register(aQ,[S,E,bx]);aY.current.register(dB,[c0]);aY.current.register(y,[cf]);aY.current.register(cm,[ea]);aY.current.register(aW,[da,bI,bk]);aY.current.register(G,[dq,L,bW]);bt.current.register([cc,bz,bv,ep,cZ,bc],[cy],[cv,bB,aJ,dT,bZ]);bt.current.register([av,aG],[F,b0],[cv,bB,aJ]);bt.current.register([bu,ek],[cy],[cv,bB,aJ,dp]);bt.current.register([da,bI,bk],[dM,dL],[bB]);bt.current.register([dq,L,bW],[cy],[bB]);bt.current.register([ea],[cy],[cv,bB,"visibleInLegend","visible"]);a9.current.register([cc,bz,bv,ep,cZ,bc,bu,ek],{value:c8,color:cb,noteText:cb,errorLow:bV,errorHigh:c8});a9.current.register([av,aG],{from:bV,to:c8,color:cb,noteText:cb});a9.current.register([dq,L,bW],{value:c8,color:cb});bt.current.register([S,E,bx],[dM,dL],[bB,aJ,am,D,w,c2]);bt.current.register([bx],[dM,dL,"size"],[bB,cv,aJ]);bt.current.register([T,ao],["open","high","low","close"],[cv,bB,"downColor",aJ]);a9.current.register([T,ao],{open:c8,high:c8,low:bV,close:c8,color:cb,downColor:cb,noteText:cb});bt.current.register([bo,cN],["lower","q1","median","q3","upper","mean","outliers"],[cv,bB,aJ]);a9.current.register([bo,cN],{lower:c8,q1:c8,median:c8,q3:c8,upper:c8,mean:c8,outliers:cb,color:cb,noteText:cb});bt.current.register([cU,aS],["current","target"],[cv,bB,"visibleInLegend",aJ]);a9.current.register([cU,aS],{current:c8,target:c8,color:cb,noteText:cb});bt.current.register([c0,cf],[cy],[cv,bB,"explode","visibleInLegend","visible"]);var cd=[cv,cy,dM,dL];var cS="mousemove";var aI="contextmenu";var d=20;var cp=aw.extend({init:function(es,et,Y,er){var eu=this;if(er===void 0){er={}}this.observers=[];this.addObserver(er.observer);this.chartService=new ac.ChartService(this,er);this.chartService.theme=Y;this._initElement(es);var X=aD({},this.options,et);this._originalOptions=aD({},X);this._theme=Y;this._initTheme(X,Y);this._initSurface();this._initHandlers();this._bindCategories();b8.FontLoader.preloadFonts(et,function(){if(!eu._destroyed){eu._redraw();eu._attachEvents()}})},_initElement:function(X){this._setElementClass(X);X.style.position="relative";while(X.firstChild){X.removeChild(X.firstChild)}this.element=X},_setElementClass:function(X){b8.addClass(X,"k-chart")},_initTheme:function(Y,X){var et=[];var es=Y.series||[];for(var er=0;er<es.length;er++){et.push(d7.extend({},es[er]))}Y.series=et;u(Y);this._applyDefaults(Y,X);if(Y.seriesColors===null){delete Y.seriesColors}this.options=aD({},X,Y);this._applySeriesColors()},getSize:function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},resize:function(er){var Y=this.getSize();var X=this._size;if(er||(Y.width>0||Y.height>0)&&(!X||Y.width!==X.width||Y.height!==X.height)){this._size=Y;this._resize(Y,er);this.trigger("resize",Y)}},_resize:function(){this._noTransitionsRedraw()},redraw:function(X){this._applyDefaults(this.options);this._applySeriesColors();if(X){var Y=this._model._plotArea;var er=Y.findPane(X);Y.redraw(er)}else{this._redraw()}},getAxis:function(Y){var er=this._plotArea.axes;for(var X=0;X<er.length;X++){if(er[X].options.name===Y){return new cs(er[X])}}},findAxisByName:function(X){return this.getAxis(X)},plotArea:function(){return new ce(this._plotArea)},toggleHighlight:function(Y,es){var ev=this._plotArea;var eu=(ev.srcSeries||ev.series||[])[0];var er;if(a1(es)){er=ev.filterPoints(es)}else{var X,et;if(t(es)){X=es.series;et=es.category}else{X=et=es}if(eu.type===cf){er=dQ(ev.pointsBySeriesName(X),et)}else{if(eu.type===c0||eu.type===ea){er=dQ((ev.charts[0]||{}).points,et)}else{er=ev.pointsBySeriesName(X)}}}if(er){this._togglePointsHighlight(Y,er)}},_togglePointsHighlight:function(Y,es){var er=this._highlight;for(var X=0;X<es.length;X++){er.togglePointHighlight(es[X],Y)}},showTooltip:function(er){var ew=this._sharedTooltip();var es=this;var ev=es._tooltip;var eu=es._plotArea;var X,et;if(a1(er)){X=eu.findPoint(er);if(X&&ew){et=X.categoryIx}}else{if(ew&&bD(er)){et=eu.categoryAxis.categoryIndex(er)}}if(ew){if(et>=0){var Y=this._plotArea.pointsByCategoryIndex(et);ev.showAt(Y)}}else{if(X){ev.show(X)}}},hideTooltip:function(){this._tooltip.hide()},_initSurface:function(){var X=this.surface;var Y=this._surfaceWrap();var er=this.options.chartArea;if(er.width){b8.elementSize(Y,{width:er.width})}if(er.height){b8.elementSize(Y,{height:er.height})}if(!X||X.options.type!==this.options.renderAs){if(X){X.destroy()}this.surface=n.Surface.create(Y,{type:this.options.renderAs})}else{this.surface.clear();this.surface.resize()}},_surfaceWrap:function(){return this.element},_redraw:function(){var X=this._getModel();this._destroyView();this._model=X;this._plotArea=X._plotArea;X.renderVisual();if(this.options.transitions!==false){X.traverse(function(Y){if(Y.animation){Y.animation.setup()}})}this._initSurface();this.surface.draw(X.visual);if(this.options.transitions!==false){X.traverse(function(Y){if(Y.animation){Y.animation.play()}})}this._tooltip=this._createTooltip();this._highlight=new aC();this._setupSelection();this._createPannable();this._createZoomSelection();this._createMousewheelZoom();this.trigger(an);if(!this._navState){this._cancelDomEvents()}},exportVisual:function(Y){var es;if(Y&&(Y.width||Y.height)){var er=this.options.chartArea;var et=this._originalOptions.chartArea;aD(er,Y);var X=this._getModel();er.width=et.width;er.height=et.height;X.renderVisual();es=X.visual}else{es=this.surface.exportVisual()}return es},_sharedTooltip:function(){return this._plotArea instanceof dE&&this.options.tooltip.shared},_createPannable:function(){var X=this.options;if(X.pannable!==false){this._pannable=new bJ(this._plotArea,X.pannable)}},_createZoomSelection:function(){var X=this.options.zoomable;var Y=(X||{}).selection;if(X!==false&&Y!==false){this._zoomSelection=new bX(this,Y)}},_createMousewheelZoom:function(){var Y=this.options.zoomable;var X=(Y||{}).mousewheel;if(Y!==false&&X!==false){this._mousewheelZoom=new d3(this,X)}},_createTooltip:function(){var Y=this;var X=Y.options.tooltip;var er;if(this._sharedTooltip()){er=new by(this._plotArea,X)}else{er=new dw(this.chartService,X)}return er},_applyDefaults:function(Y,X){s(Y,X);dD(Y,X)},_applySeriesColors:function(){var er=this.options;var eu=er.series;var Y=er.seriesColors||[];for(var et=0;et<eu.length;et++){var es=eu[et];var X=Y[et%Y.length];var ev=es._defaults;es.color=es.color||X;if(ev){ev.color=ev.color||X}}},_getModel:function(){var Y=this.options;var er=this._createPlotArea();var X=new b8.RootElement(this._modelOptions());X.chart=this;X._plotArea=er;b8.Title.buildTitle(Y.title,X);if(Y.legend.visible){X.append(new db(er.options.legend,this.chartService))}X.append(er);X.reflow();return X},_modelOptions:function(){var es=this;var X=es.options;var er=es.element;var Y=b8.elementSize(er);this._size=null;return aD({width:Math.floor(Y.width)||dn.DEFAULT_WIDTH,height:Math.floor(Y.height)||dn.DEFAULT_HEIGHT,transitions:X.transitions},X.chartArea)},_createPlotArea:function(Y){var X=this.options;var er=aY.current.create(Y?[]:X.series,X,this.chartService);return er},_hasSelection:function(){return this._selections&&this._selections.length},_setupSelection:function(){var eu=this;var Y=this;var ev=Y._plotArea.axes;var X=this._selections=[];for(var et=0;et<ev.length;et++){var er=ev[et];var ey=er.options;if(er instanceof bH&&ey.select&&!ey.vertical){var es=0;var ew=ey.categories.length-1;if(er instanceof bM){es=ey.categories[es];ew=ey.categories[ew]}if(!ey.justified){if(er instanceof bM){ew=b8.addDuration(ew,1,ey.baseUnit,ey.weekStartDay)}else{ew++}}var ex=new d5(eu,er,aD({min:es,max:ew},ey.select));X.push(ex)}}},_selectStart:function(X){return this.trigger(j,X)},_select:function(X){return this.trigger(b9,X)},_selectEnd:function(X){return this.trigger(ay,X)},_initHandlers:function(){this._clickHandler=this._click.bind(this);this._mousewheelHandler=this._mousewheel.bind(this);this._surfaceMouseenterHandler=this._mouseover.bind(this);this._surfaceMouseleaveHandler=this._mouseout.bind(this);this._mousemove=kendo.throttle(this._mousemove.bind(this),d)},addObserver:function(X){if(X){this.observers.push(X)}},removeObserver:function(X){var Y=this.observers.indexOf(X);if(Y>=0){this.observers.splice(Y,1)}},requiresHandlers:function(er){var Y=this.observers;for(var X=0;X<Y.length;X++){if(Y[X].requiresHandlers(er)){return true}}},trigger:function(er,Y){if(Y===void 0){Y={}}if(er===cX){Y.anchor.point=this._toDocumentCoordinates(Y.anchor.point)}Y.sender=this;var et=this.observers;var es=false;for(var X=0;X<et.length;X++){if(et[X].trigger(er,Y)){es=true}}return es},_attachEvents:function(){var es=this;var er=es.element;var X=es.surface;X.bind("mouseenter",this._surfaceMouseenterHandler);X.bind("mouseleave",this._surfaceMouseleaveHandler);var et;bb(er,(et={},et[aI]=this._clickHandler,et[cx]=this._mousewheelHandler,et));if(this._shouldAttachMouseMove()){var Y;bb(er,(Y={},Y[cS]=this._mousemove,Y))}this.domEvents=ac.DomEventsBuilder.create(this.element,{start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)})},_cancelDomEvents:function(){if(this.domEvents&&this.domEvents.cancel){this.domEvents.cancel()}},_gesturestart:function(X){if(this._mousewheelZoom&&!this._stopDragEvent(X)){this._gestureDistance=X.distance;this._unsetActivePoint();this.surface.suspendTracking()}},_gestureend:function(X){if(this._zooming&&!this._stopDragEvent(X)){if(this.surface){this.surface.resumeTracking()}this._zooming=false;this.trigger(aU,{})}},_gesturechange:function(et){var es=this._mousewheelZoom;if(es&&!this._stopDragEvent(et)){et.preventDefault();var eu=this._gestureDistance;var Y=-et.distance/eu+1;if(Math.abs(Y)>=0.1){Y=Math.round(Y*10);this._gestureDistance=et.distance;var er={delta:Y,axisRanges:cq(this._plotArea.axes),originalEvent:et};if(this._zooming||!this.trigger(cu,er)){if(!this._zooming){this._zooming=true}var X=er.axisRanges=es.updateRanges(Y);if(X&&!this.trigger(k,er)){es.zoom()}}}}},_mouseout:function(Y){if(Y.element){var X=this._drawingChartElement(Y.element,Y);if(X&&X.leave){X.leave(this,Y.originalEvent)}}},_start:function(Y){var X=this._eventCoordinates(Y);if(this._stopDragEvent(Y)||!this._plotArea.backgroundContainsPoint(X)){return}if(this.requiresHandlers([cJ,bj,g])){this._startNavigation(Y,X,cJ)}if(this._pannable&&this._pannable.start(Y)){this.surface.suspendTracking();this._unsetActivePoint();this._suppressHover=true}if(this._zoomSelection){if(this._zoomSelection.start(Y)){this.trigger(cu,{axisRanges:cq(this._plotArea.axes),originalEvent:Y})}}},_move:function(ex){var et=this;var Y=et._navState;var ez=et._pannable;if(this._stopDragEvent(ex)){return}if(ez){var er=ez.move(ex);if(er&&!this.trigger(bj,{axisRanges:er,originalEvent:ex})){ez.pan()}}else{if(Y){var X={};var ey=Y.axes;for(var ew=0;ew<ey.length;ew++){var es=ey[ew];var ev=es.options.name;if(ev){var eu=es.options.vertical?ex.y:ex.x;var eA=eu.startLocation-eu.location;if(eA!==0){X[es.options.name]=es.translateRange(eA)}}}Y.axisRanges=X;this.trigger(bj,{axisRanges:X,originalEvent:ex})}}if(this._zoomSelection){this._zoomSelection.move(ex)}},_end:function(er){if(this._stopDragEvent(er)){return}var Y=this._pannable;if(Y&&Y.end(er)){this.surface.resumeTracking();this.trigger(g,{axisRanges:cq(this._plotArea.axes),originalEvent:er});this._suppressHover=false}else{this._endNavigation(er,g)}if(this._zoomSelection){var X=this._zoomSelection.end(er);if(X&&!this.trigger(k,{axisRanges:X,originalEvent:er})){this._zoomSelection.zoom();this.trigger(aU,{axisRanges:X,originalEvent:er})}}},_stopDragEvent:function(){return this._hasSelection()},_mousewheel:function(ey){var ex=this;var eC=b8.mousewheelDelta(ey);var ev=this._mousewheelZoom;var eB=this._eventCoordinates(ey);if(!this._plotArea.backgroundContainsPoint(eB)){return}if(ev){var eA={delta:eC,axisRanges:cq(this._plotArea.axes),originalEvent:ey};if(this._zooming||!this.trigger(cu,eA)){ey.preventDefault();if(!this._zooming){this._unsetActivePoint();this.surface.suspendTracking();this._zooming=true}if(this._mwTimeout){clearTimeout(this._mwTimeout)}eA.axisRanges=ev.updateRanges(eC);if(eA.axisRanges&&!this.trigger(k,eA)){ev.zoom()}this._mwTimeout=setTimeout(function(){ex.trigger(aU,eA);ex._zooming=false;if(ex.surface){ex.surface.resumeTracking()}},aB)}}else{var Y=this._navState;if(!Y){var et=this._startNavigation(ey,eB,cu);if(!et){Y=this._navState}}if(Y){var es=Y.totalDelta||eC;Y.totalDelta=es+eC;var ez=this._navState.axes;var X={};for(var ew=0;ew<ez.length;ew++){var er=ez[ew];var eu=er.options.name;if(eu){X[eu]=er.scaleRange(-es)}}this.trigger(k,{delta:eC,axisRanges:X,originalEvent:ey});if(this._mwTimeout){clearTimeout(this._mwTimeout)}this._mwTimeout=setTimeout(function(){ex._endNavigation(ey,aU)},aB)}}},_startNavigation:function(ev,et,Y){var es=this._model._plotArea;var ew=es.findPointPane(et);var eu=es.axes.slice(0);if(!ew){return}var X=cq(eu);var er=this.trigger(Y,{axisRanges:X,originalEvent:ev});if(er){this._cancelDomEvents()}else{this._suppressHover=true;this._unsetActivePoint();this._navState={axisRanges:X,pane:ew,axes:eu}}},_endNavigation:function(Y,X){if(this._navState){this.trigger(X,{axisRanges:this._navState.axisRanges,originalEvent:Y});this._suppressHover=false;this._navState=null}},_getChartElement:function(er,X){var Y=this.surface.eventTarget(er);if(Y){return this._drawingChartElement(Y,er,X)}},_drawingChartElement:function(Y,es,X){var er=Y;var et;while(er&&!et){et=er.chartElement;er=er.parent}if(et){if(et.aliasFor){et=et.aliasFor(es,this._eventCoordinates(es))}if(X){et=et.closest(X)}return et}},_eventCoordinates:function(X){var Y=b8.eventCoordinates(X);return this._toModelCoordinates(Y.x,Y.y)},_elementPadding:function(){if(!this._padding){var er=m(this.element,["paddingLeft","paddingTop"]);var X=er.paddingLeft;var Y=er.paddingTop;this._padding={top:Y,left:X}}return this._padding},_toDocumentCoordinates:function(X){var Y=this._elementPadding();var er=b8.elementOffset(this.element);return{left:ck(X.x+Y.left+er.left),top:ck(X.y+Y.top+er.top)}},_toModelCoordinates:function(er,Y){var X=this.element;var et=b8.elementOffset(X);var es=this._elementPadding();return new ec(er-et.left-es.left,Y-et.top-es.top)},_tap:function(er){var es=this;var X=this.surface.eventTarget(er);var Y=this._drawingChartElement(X,er);if(this._activePoint===Y){this._propagateClick(Y,er)}else{if(!this._startHover(X,er)){this._unsetActivePoint()}this._propagateClick(Y,er)}this.handlingTap=true;setTimeout(function(){es.handlingTap=false},0)},_click:function(Y){var X=this._getChartElement(Y);this._propagateClick(X,Y)},_propagateClick:function(X,er){var es=this;var Y=X;while(Y){if(Y.click){Y.click(es,er)}Y=Y.parent}},_startHover:function(es,ev){var ew=this._drawingChartElement(es,ev);var et=this;var eu=et._tooltip;var Y=et._highlight;if(this._suppressHover||!Y||Y.isHighlighted(ew)||this._sharedTooltip()){return false}var X=this._drawingChartElement(es,ev,function(ex){return ex.hover&&!(ex instanceof cH)});if(X&&!X.hover(this,ev)){this._activePoint=X;var er=aD({},er,X.options.tooltip);if(er.visible){eu.show(X)}Y.show(X);return X}},_mouseover:function(er){var X=this._startHover(er.element,er.originalEvent);if(X&&X.tooltipTracking){this._mouseMoveTrackHandler=this._mouseMoveTrackHandler||this._mouseMoveTracking.bind(this);var Y;bb(document,(Y={},Y[cS]=this._mouseMoveTrackHandler,Y))}},_mouseMoveTracking:function(et){var X=this;var ey=X.options;var ex=X._tooltip;var er=X._highlight;var ew=X._activePoint;var ev=this._eventCoordinates(et);if(this._plotArea.box.containsPoint(ev)){if(ew&&ew.tooltipTracking&&ew.series&&ew.parent.getNearestPoint){var eu=ew.parent.getNearestPoint(ev.x,ev.y,ew.seriesIx);if(eu&&eu!==ew){eu.hover(this,et);this._activePoint=eu;var Y=aD({},ey.tooltip,ew.options.tooltip);if(Y.visible){ex.show(eu)}er.show(eu)}}}else{var es;dc(document,(es={},es[cS]=this._mouseMoveTrackHandler,es));this._unsetActivePoint()}},_mousemove:function(Y){var X=this._eventCoordinates(Y);this._trackCrosshairs(X);if(this._plotArea.hover){this._plotArea.hover(this,Y)}if(this._sharedTooltip()){this._trackSharedTooltip(X,Y)}},_trackCrosshairs:function(er){var X=this._plotArea.crosshairs;for(var Y=0;Y<X.length;Y++){var es=X[Y];if(es.box.containsPoint(er)){es.showAt(er)}else{es.hide()}}},_trackSharedTooltip:function(ey,ex){var es=this;var et=es.options.tooltip;var X=es._plotArea;var ev=es._plotArea.categoryAxis;var eA=es._tooltip;var eu=es._highlight;if(X.box.containsPoint(ey)){var ew=ev.pointCategoryIndex(ey);if(ew!==this._tooltipCategoryIx){var ez=X.pointsByCategoryIndex(ew);var er=ez.map(function(eB){return eB.eventArgs(ex)});var Y=er[0]||{};Y.categoryPoints=er;if(ez.length>0&&!this.trigger(O,Y)){if(et.visible){eA.showAt(ez,ey)}eu.show(ez)}else{eA.hide()}this._tooltipCategoryIx=ew}}},hideElements:function(){var Y=this;var es=Y._plotArea;var er=Y._tooltip;var X=Y._highlight;this._mousemove.cancel();es.hideCrosshairs();X.hide();er.hide();delete this._tooltipCategoryIx},_unsetActivePoint:function(){var Y=this;var er=Y._tooltip;var X=Y._highlight;this._activePoint=null;if(er){er.hide()}if(X){X.hide()}},_deferRedraw:function(){this._redraw()},_clearRedrawTimeout:function(){if(this._redrawTimeout){clearInterval(this._redrawTimeout);this._redrawTimeout=null}},_bindCategories:function(){var et=this;var X=this.options;var er=[].concat(X.categoryAxis);for(var es=0;es<er.length;es++){var Y=er[es];if(Y.autoBind!==false){et._bindCategoryAxisFromSeries(Y,es)}}},_bindCategoryAxisFromSeries:function(er,ev){var eE=this;var ew=this.options.series;var eF=ew.length;var X={};var eA=[];var Y;for(var eB=0;eB<eF;eB++){var ez=ew[eB];var eD=ez.categoryAxis===er.name||!ez.categoryAxis&&ev===0;var eG=ez.data;var eu=eG.length;if(ez.categoryField&&eD&&eu>0){Y=co(er,cI(ez.categoryField,eG[0]));var es=Y?ae:cI;for(var et=0;et<eu;et++){var ey=eG[et];var eC=es(ez.categoryField,ey,eE.chartService.intl);if(Y||!X[eC]){eA.push([eC,ey]);if(!Y){X[eC]=true}}}}}if(eA.length>0){if(Y){eA=N(eA,function(eI,eH){return b8.dateComparer(eI[0],eH[0])})}var ex=cR(eA);er.categories=ex[0]}},_isBindable:function(es){var Y=bt.current.valueFields(es);var X=true;for(var er=0;er<Y.length;er++){var et=Y[er];if(et===cy){et="field"}else{et=et+"Field"}if(!bD(es[et])){X=false;break}}return X},_noTransitionsRedraw:function(){var X=this.options;var Y;if(X.transitions){X.transitions=false;Y=true}this.redraw();if(Y){X.transitions=true}},_legendItemHover:function(er,eu){var et=this;var ev=et._plotArea;var Y=et._highlight;var es=(ev.srcSeries||ev.series)[er];var X;if(dv(es.type,[c0,cf,ea])){X=ev.findPoint(function(ew){return ew.series.index===er&&ew.index===eu})}else{X=ev.pointsBySeriesIndex(er)}Y.show(X)},_shouldAttachMouseMove:function(){return this._plotArea.crosshairs.length||this._tooltip&&this._sharedTooltip()||this.requiresHandlers([J])},updateMouseMoveHandler:function(){var Y;dc(this.element,(Y={},Y[cS]=this._mousemove,Y));if(this._shouldAttachMouseMove()){var X;bb(this.element,(X={},X[cS]=this._mousemove,X))}},applyOptions:function(X,Y){dY(this._originalOptions,X);this._originalOptions=aD(this._originalOptions,X);this.options=aD({},this._originalOptions);if(Y){this._theme=Y;this.chartService.theme=Y}this._initTheme(this.options,this._theme)},setOptions:function(X,Y){this.applyOptions(X,Y);this._bindCategories();this.redraw();this.updateMouseMoveHandler()},destroy:function(){this._destroyed=true;var Y;dc(this.element,(Y={},Y[aI]=this._clickHandler,Y[cx]=this._mousewheelHandler,Y[cS]=this._mousemove,Y));if(this.domEvents){this.domEvents.destroy();delete this.domEvents}var X;dc(document,(X={},X[cS]=this._mouseMoveTrackHandler,X));this._destroyView();this.surface.destroy();this.surface=null;this._clearRedrawTimeout()},_destroyView:function(){var er=this;var X=er._model;var Y=er._selections;if(X){X.destroy();this._model=null}if(Y){while(Y.length>0){Y.shift().destroy()}}this._unsetActivePoint();if(this._tooltip){this._tooltip.destroy()}if(this._highlight){this._highlight.destroy()}if(this._zoomSelection){this._zoomSelection.destroy();delete this._zoomSelection}if(this._pannable){this._pannable.destroy();delete this._pannable}if(this._mousewheelZoom){this._mousewheelZoom.destroy();delete this._mousewheelZoom}}});function u(er){var Y=cd;for(var X=0;X<Y.length;X++){var es=Y[X]+"Axes";if(er[es]){er[Y[X]+"Axis"]=er[es];delete er[es]}}}function dQ(er,Y){if(er){for(var X=0;X<er.length;X++){if(er[X].category===Y){return[er[X]]}}}}function s(es,er){var ew=(er||{}).axisDefaults||{};var ev,Y,eu;function et(ez){var ey=(ez||{}).color||Y.color;var ex=aD({},ew,ew[ev],Y,Y[ev],{line:{color:ey},labels:{color:ey},title:{color:ey}},ez);delete ex[ev];return ex}for(var X=0;X<cd.length;X++){ev=cd[X]+"Axis";Y=es.axisDefaults||{};eu=[].concat(es[ev]);eu=eu.map(et);es[ev]=eu.length>1?eu:eu[0]}}function dD(ez,ew){var ev=ez.series;var Y=ev.length;var es=ez.seriesDefaults;var ex=aD({},ez.seriesDefaults);var X=ew?aD({},ew.seriesDefaults):{};var ey=aD({},X);ct(ex);ct(ey);for(var eu=0;eu<Y;eu++){var er=ev[eu].type||ez.seriesDefaults.type;var et=aD({data:[]},ey,X[er],{tooltip:ez.tooltip},ex,es[er]);ev[eu]._defaults=et;ev[eu]=aD({},et,ev[eu])}}function ct(X){delete X.bar;delete X.column;delete X.rangeColumn;delete X.line;delete X.verticalLine;delete X.pie;delete X.donut;delete X.area;delete X.verticalArea;delete X.scatter;delete X.scatterLine;delete X.bubble;delete X.candlestick;delete X.ohlc;delete X.boxPlot;delete X.bullet;delete X.verticalBullet;delete X.polarArea;delete X.polarLine;delete X.radarArea;delete X.radarLine;delete X.waterfall}function cq(es){var X={};for(var Y=0;Y<es.length;Y++){var er=es[Y];var et=er.options.name;if(et){X[et]=er.range()}}return X}function cV(es,Y){if(Y===void 0){Y=b8.dateComparer}for(var X=1,er=es.length;X<er;X++){if(Y(es[X],es[X-1])<0){es.sort(Y);break}}return es}function N(eu,er){if(er===void 0){er=b8.dateComparer}var et=cV(eu,er);var es=et.length;var X=es>0?[et[0]]:[];for(var Y=1;Y<es;Y++){if(er(et[Y],dC(X))!==0){X.push(et[Y])}}return X}function cR(es){var Y=es.length;var X=[];for(var ev=0;ev<Y;ev++){var eu=es[ev];var er=eu.length;for(var et=0;et<er;et++){X[et]=X[et]||[];X[et].push(eu[et])}}return X}function dY(eu,Y){for(var et in Y){var es=Y[et];var X=eu[et];if(bD(X)){var er=es===null;if(er||!bD(es)){delete eu[et];if(er){delete Y[et]}}else{if(X&&t(es)){if(t(X)){dY(X,es)}}}}}}i(cp,{renderAs:"",chartArea:{},legend:{visible:true,labels:{}},categoryAxis:{},seriesDefaults:{type:bz,data:[],highlight:{visible:true},labels:{},negativeValues:{visible:false}},series:[],seriesColors:null,tooltip:{visible:false},transitions:true,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}],pannable:false,zoomable:false});kendo.deepExtend(kendo.dataviz,{constants:Q,Aggregates:b5,AreaChart:d6,AreaSegment:au,AxisGroupRangeTracker:d4,Bar:az,BarChart:c7,BarLabel:a8,BoxPlotChart:dR,BoxPlot:bA,BubbleChart:K,Bullet:ai,BulletChart:c3,CandlestickChart:d2,Candlestick:a3,CategoricalChart:dF,CategoricalErrorBar:cr,CategoricalPlotArea:dE,Chart:cp,ChartContainer:dz,ClipAnimation:cY,ClusterLayout:ba,Crosshair:c1,CrosshairTooltip:z,DefaultAggregates:a9,DonutChart:eb,DonutPlotArea:y,DonutSegment:cz,ErrorBarBase:cE,ErrorRangeCalculator:a6,Highlight:aC,SharedTooltip:by,Legend:db,LegendItem:aq,LegendLayout:ee,LineChart:b3,LinePoint:dK,LineSegment:cC,Pane:cl,PieAnimation:cA,PieChart:bS,PieChartMixin:el,PiePlotArea:dB,PieSegment:du,PlotAreaBase:cH,PlotAreaEventsMixin:dS,PlotAreaFactory:aY,PointEventsMixin:l,RangeBar:dm,RangeBarChart:af,ScatterChart:cP,ScatterErrorBar:ed,ScatterLineChart:aH,Selection:d5,SeriesAggregator:bO,SeriesBinder:bt,SplineSegment:bP,SplineAreaSegment:dG,StackWrap:dr,Tooltip:dw,OHLCChart:f,OHLCPoint:br,WaterfallChart:bd,WaterfallSegment:de,XYPlotArea:aQ,MousewheelZoom:d3,ZoomSelection:bX,Pannable:bJ,ChartAxis:cs,ChartPlotArea:ce,anyHasZIndex:cD,appendIfNotNull:C,areNumbers:C,categoriesCount:c4,countNumbers:W,equalsIgnoreCase:ci,evalOptions:bg,filterSeriesByType:aR,getDateField:ae,getField:cI,hasGradientOverlay:ax,hasValue:ej,isDateAxis:co,segmentVisible:a5,seriesTotal:bK,singleItemOrArray:ag})}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/chart/chart",["dataviz/chart/kendo-chart","kendo.data","kendo.dataviz.core","kendo.dataviz.themes","kendo.drawing","kendo.userevents"],a)}(function(){(function(S,y){var V=".kendoChart";var T=window.kendo;var b=T.Class;var ae=T._outerWidth;var aj=T._outerHeight;var m=T.dataviz;var aa=m.constants;var J=m.Chart;var p=m.SeriesBinder;var i=T.ui.Widget;var W=T.data.DataSource;var Z=T.deepExtend;var ad=m.defined;var k=m.getField;var R=m.InstanceObserver;var ah=m.inArray;var v=m.services;var af=S.proxy;var L=S.isArray;var j=T.template;var E="mouseleave"+V;var f=aa.AXIS_LABEL_CLICK;var e=aa.LEGEND_ITEM_CLICK;var Y=aa.LEGEND_ITEM_HOVER;var B=aa.SERIES_CLICK;var am=aa.SERIES_HOVER;var x=aa.PLOT_AREA_CLICK;var ai=aa.PLOT_AREA_HOVER;var K=aa.DRAG;var I=aa.DRAG_END;var al=aa.DRAG_START;var A=aa.ZOOM_START;var t=aa.ZOOM;var ab=aa.ZOOM_END;var h=aa.SELECT_START;var F=aa.SELECT;var o=aa.SELECT_END;var s=aa.RENDER;var D=aa.NOTE_CLICK;var a=aa.NOTE_HOVER;var Q="change";var n="dataBound";var r="leave";var ag=aa.VALUE;var q=aa.PIE;var l=aa.DONUT;var M=aa.FUNNEL;var g=T.Observable;var z=150;var P=100;var O="k-chart-tooltip-inverse";var H="k-chart-shared-tooltip";v.DomEventsBuilder.register({create:function(ao,an){return new T.UserEvents(ao,Z({global:true,multiTouch:true,fastTap:true},an))}});var w=R.extend({handlerMap:{showTooltip:"_showTooltip",hideTooltip:"_hideTooltip",legendItemClick:"_onLegendItemClick",render:"_onRender"}});var X=i.extend({init:function(an,ap){var ao;T.destroy(an);i.fn.init.call(this,an);if(ap){ao=ap.dataSource;delete ap.dataSource}this.options=Z({},this.options,ap);this.wrapper=this.element;this._attachEvents();if(ap){ap.dataSource=ao}this.bind(this.events,this.options);this._initDataSource(ap);T.notify(this,m.ui)},events:[n,B,am,f,e,Y,x,ai,al,K,I,A,t,ab,h,F,o,D,a,s],options:{name:"Chart",renderAs:"",theme:"default",chartArea:{},legend:{},categoryAxis:{},autoBind:true,seriesDefaults:{},series:[],seriesColors:null,tooltip:{},transitions:true,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}],pannable:false,zoomable:false},items:function(){return S()},refresh:function(){var ao=this;var an=ao._instance;an._applyDefaults(ao.options);an._applySeriesColors();ao._bindSeries();ao._bindCategories();ao.trigger(n);ao._redraw()},getSize:function(){return T.dimensions(this.element)},redraw:function(an){this._size=null;this._instance.redraw(an)},setOptions:function(an){var ao=this,ap=an.dataSource;delete an.dataSource;i.fn._setEvents.call(ao,an);this._instance.applyOptions(an,this._getThemeOptions(an));this.options=this._instance.options;this._tooltip.setOptions(this.options.tooltip);this._sourceSeries=null;if(ap){ao.setDataSource(ap)}if(ao._hasDataSource){ao._onDataChanged()}else{ao._bindCategories();ao.redraw()}ao._instance.updateMouseMoveHandler()},setDataSource:function(ao){var an=this;an.dataSource.unbind(Q,an._dataChangeHandler);an.dataSource=ao=W.create(ao);an._hasDataSource=true;an._hasData=false;ao.bind(Q,an._dataChangeHandler);if(an.options.autoBind){ao.fetch()}},destroy:function(){var an=this,ao=an.dataSource;an.element.off(V);if(ao){ao.unbind(Q,an._dataChangeHandler)}if(an._instance){an._instance.destroy();delete this._instance}if(this._tooltip){this._tooltip.destroy();delete this._tooltip}this._destroyCrosshairTooltips();i.fn.destroy.call(an)},findPaneByName:function(ao){var ap=this._plotArea.panes;for(var an=0;an<ap.length;an++){if(ap[an].options.name===ao){return new U(this,ap[an])}}},findPaneByIndex:function(an){var ao=this._plotArea.panes;if(ao[an]){return new U(this,ao[an])}},findSeries:function(aq){var ap=this._plotArea;var ao=ap.srcSeries||ap.series;for(var an=0;an<ao.length;an++){if(aq(ao[an])){return new d(this,ao[an])}}},findSeriesByName:function(an){return this._createSeries({name:an})},findSeriesByIndex:function(an){return this._createSeries({index:an})},_createSeries:function(ao){var an=this._seriesOptions(ao);if(an){return new d(this,an)}},_seriesOptions:function(ap){var ar=this._plotArea;var aq=ar.srcSeries||ar.series;var ao;if(ad(ap.index)){ao=aq[ap.index]}else{if(ad(ap.name)){for(var an=0;an<aq.length;an++){if(aq[an].name===ap.name){ao=aq[an];break}}}}return ao},_attachEvents:function(){this.element.on(E,af(this._mouseleave,this))},_mouseleave:function(aq){var an=this._instance;var ao=this._tooltip;var ap=aq.relatedTarget;if(!(ap&&S(ap).closest(ao.element).length)&&an&&!an.handlingTap){an.hideElements()}},_getThemeOptions:function(aq){var ao=(aq||{}).theme;if(ao==="sass"||ao==="default-v2"){return m.autoTheme().chart}if(ad(ao)){var an=m.ui.themes||{};var ap=an[ao]||an[ao.toLowerCase()]||{};return ap.chart||{}}},_initChart:function(){this._createChart(this.options,this._getThemeOptions(this.options));this.options=this._instance.options},_createChart:function(ao,an){this._instance=new J(this.element[0],ao,an,{observer:new w(this),sender:this})},_initDataSource:function(ap){var an=this,ao=(ap||{}).dataSource;an._dataChangeHandler=af(an._onDataChanged,an);an.dataSource=W.create(ao).bind("change",an._dataChangeHandler);an._bindCategories();if(ao){an._hasDataSource=true}this._initChart();this._initTooltip();if(ao){if(an.options.autoBind){an.dataSource.fetch()}}},_destroyCrosshairTooltips:function(){var ao=this._crosshairTooltips;if(ao){for(var an in ao){ao[an].destroy()}}this._crosshairTooltips={}},_getCrosshairTooltip:function(ao,an){var aq=this._crosshairTooltips=this._crosshairTooltips||{};var ap=ao+an;var ar=aq[ap];if(!ar){ar=aq[ap]=new G(this.element)}return ar},_showTooltip:function(ao){if(ao.crosshair){var an=this._getCrosshairTooltip(ao.axisName,ao.axisIndex);an.show(ao)}else{if(this._tooltip){this._tooltip.show(ao)}}},_hideTooltip:function(ao){if(ao.crosshair){var an=this._getCrosshairTooltip(ao.axisName,ao.axisIndex);an.hide()}else{if(this._tooltip){this._tooltip.hide(ao)}}},_onRender:function(an){this._destroyCrosshairTooltips();this._copyMembers(an.sender);if(!this._hasDataSource||this._hasData||!this.options.autoBind){this.trigger(s)}},_copyMembers:function(an){this._instance=an;this.options=an.options;this._originalOptions=an._originalOptions;this.surface=an.surface;this._plotArea=an._plotArea;this._model=an._model;this._highlight=an._highlight;this._selections=an._selections;this._pannable=an._pannable;this._zoomSelection=an._zoomSelection;this._mousewheelZoom=an._mousewheelZoom},requiresHandlers:function(ap){var ao=this._events;for(var an=0;an<ap.length;an++){if(ad(ao[ap[an]])){return true}}},_initTooltip:function(){this._tooltip=this._createTooltip();this._tooltip.bind(r,af(this._tooltipleave,this))},_onLegendItemClick:function(an){if(!this.trigger(e,an)){this._legendItemClick(an.seriesIndex,an.pointIndex)}},_legendItemClick:function(an,aq){var ap=this._instance,ar=ap._plotArea,ao=(ar.srcSeries||ar.series)[an];if(S.inArray(ao.type,[q,l,M])>=0){var au=ao.pointVisibility=ao.pointVisibility||{};var at=au[aq];au[aq]=ad(at)?!at:false}else{ao.visible=!ao.visible;this._saveGroupVisibleState(ao)}ap._noTransitionsRedraw()},_createTooltip:function(){return new N(this.element,this.options.tooltip)},_tooltipleave:function(){var ao=this._instance,ap=ao._plotArea,an=ao._highlight;ap.hideCrosshairs();an.hide()},_bindData:function(ar){var at=this,aw=at.options,aq=at._sourceSeries||aw.series,ax,an=aq.length,ap=at.dataSource.view(),au=(at.dataSource.group()||[]).length>0,ao=[],av;for(ax=0;ax<an;ax++){av=aq[ax];if(at._isBindable(av)&&au){ao=ao.concat(c(av,ap));this._applyGroupVisibleState(ao,ar)}else{ao.push(av||[])}}at._sourceSeries=aq;aw.series=ao;this._instance._applySeriesColors();at._bindSeries();at._bindCategories();this._hasData=true},_onDataChanged:function(an){this._bindData(an);this.trigger(n);this._redraw()},_applyGroupVisibleState:function(aq,ap){if(ap&&ap.action){var ao=this._groupVisibleState=this._groupVisibleState||{};for(var an=0;an<aq.length;an++){if(ao[aq[an]._groupValue]===false){aq[an].visible=false}}}else{delete this._groupVisibleState}},_saveGroupVisibleState:function(an){if(ad(an._groupValue)){if(!this._groupVisibleState){this._groupVisibleState={}}this._groupVisibleState[an._groupValue]=an.visible}},_bindSeries:function(){var at=this,av=at.dataSource.view(),ar=at.options.series,an,ao=ar.length,aq,au,ap;for(an=0;an<ao;an++){aq=ar[an];if(at._isBindable(aq)){au=aq._groupIx;ap=ad(au)?(av[au]||{}).items:av;if(aq.autoBind!==false){aq.data=ap}}}},_bindCategories:function(){var at=this,av=at.dataSource.view()||[],ar=(at.dataSource.group()||[]).length>0,an=av,ao=at.options,aq=[].concat(ao.categoryAxis),au,ap;if(ar){if(av.length){an=av[0].items}}for(au=0;au<aq.length;au++){ap=aq[au];if(ap.autoBind!==false){at._bindCategoryAxis(ap,an,au)}}},_bindCategoryAxis:function(an,ar,aq){var ap=(ar||[]).length,au,ao,at;if(an.field){an.categories=[];for(au=0;au<ap;au++){at=ar[au];ao=k(an.field,at);if(au===0){an.categories=[ao];an.dataItems=[at]}else{an.categories.push(ao);an.dataItems.push(at)}}}else{if(this._instance){this._instance._bindCategoryAxisFromSeries(an,aq)}}},_isBindable:function(aq){var ao=p.current.valueFields(aq),an=true,ar,ap;for(ap=0;ap<ao.length;ap++){ar=ao[ap];if(ar===ag){ar="field"}else{ar=ar+"Field"}if(!ad(aq[ar])){an=false;break}}return an}});var C=["getAxis","findAxisByName","plotArea","toggleHighlight","showTooltip","hideTooltip","exportVisual","_resize","_redraw","_noTransitionsRedraw","_legendItemHover","_eventCoordinates"];function ac(an){X.fn[an]=function(){var ao=this._instance;if(ao){return ao[an].apply(ao,arguments)}}}for(var ak=0;ak<C.length;ak++){ac(C[ak])}function c(ao,ar){var an=[],av,ap=ao.groupNameTemplate,aq,at=ar.length,au;if(at===0){au=Z({},ao);au.visibleInLegend=false;return[au]}if(ad(ap)){T.logToConsole("'groupNameTemplate' is obsolete and will be removed in future versions. Specify the group name template as 'series.name'");if(ap){av=j(ap)}}else{av=j(ao.name||"");if(av._slotCount===0){av=j(ad(ao.name)?"#= group.value #: #= series.name #":"#= group.value #")}}for(aq=0;aq<at;aq++){au=Z({},ao);if(!T.isFunction(au.color)){au.color=y}au._groupIx=aq;au._groupValue=ar[aq].value;an.push(au);if(av){au.name=av({series:au,group:ar[aq]})}}return an}m.ExportMixin.extend(X.fn);if(T.PDFMixin){T.PDFMixin.extend(X.fn)}m.ui.plugin(X);var u=T.geometry;var N=g.extend({init:function(aq,ao){var ap=this;g.fn.init.call(ap);this.setOptions(ao);ap.chartElement=aq;ap.template=N.template;if(!ap.template){ap.template=N.template=T.template("<div class='k-tooltip k-chart-tooltip' style='display:none; position: absolute; font: #= d.font #;#if (d.border) {# border: #= d.border.width #px solid; #}#opacity: #= d.opacity #; filter: alpha(opacity=#= d.opacity * 100 #);'></div>",{useWithBlock:false,paramName:"d"})}ap.element=S(ap.template(ap.options));ap.move=af(ap.move,ap);ap._mouseleave=af(ap._mouseleave,ap);var an=T.format("[{0}='content'],[{0}='scroller']",T.attr("role"));ap._mobileScroller=aq.closest(an).data("kendoMobileScroller")},destroy:function(){this._clearShowTimeout();if(this.element){this.element.off(E).remove();this.element=null}},setOptions:function(an){this.options=Z({},this.options,an)},options:{opacity:1,animation:{duration:z},sharedTemplate:"<table><th colspan='3'>#= categoryText #</th># for(var i = 0; i < points.length; i++) { ## var point = points[i]; #<tr><td><span class='k-chart-shared-tooltip-marker' style='background-color:#:point.series.color#'></span></td># if(point.series.name) { # <td> #= point.series.name #:</td># } #<td>#= content(point) #</td></tr># } #</table>",categoryFormat:"{0:d}"},move:function(){var ap=this,an=ap.options,ao=ap.element,aq;if(!ap.anchor||!ap.element){return}aq=ap._offset();if(!ap.visible){ao.css({top:aq.top,left:aq.left})}ap.visible=true;ap._ensureElement(document.body);ao.stop(true,true).show().animate({left:aq.left,top:aq.top},an.animation.duration)},_clearShowTimeout:function(){if(this.showTimeout){clearTimeout(this.showTimeout);this.showTimeout=null}},getAnchor:function(aq){var ap=this.anchor;var ao=ap.point;var at=ap.align;var an=ao.left;var ar=ao.top;if(at.horizontal==="center"){an-=aq.width/2}else{if(at.horizontal==="right"){an-=aq.width}}if(at.vertical==="center"){ar-=aq.height/2}else{if(at.vertical==="bottom"){ar-=aq.height}}return{x:an,y:ar}},_offset:function(){var ay=this,az=ay._measure(),at=ay.getAnchor(az),av=at.y,ap=at.x,ar=T.support.zoomLevel(),au=S(window),an=window.pageYOffset||document.documentElement.scrollTop||0,aq=window.pageXOffset||document.documentElement.scrollLeft||0,ax=(this._mobileScroller||{}).movable;if(!ax||ax.scale===1){av+=ay._fit(av-an,az.height,aj(au)/ar);ap+=ay._fit(ap-aq,az.width,ae(au)/ar)}else{var ao=u.transform().scale(ax.scale,ax.scale,[ax.x,ax.y]);var aw=new u.Point(ap,av).transform(ao);ap=aw.x;av=aw.y}return{top:av,left:ap}},show:function(ao){this.anchor=ao.anchor;this.element.css(ao.style);this.element.toggleClass(O,!!ao.className);this.element.toggleClass(H,!!ao.shared);var an=ao.shared?this._sharedContent(ao):this._pointContent(ao.point);this.element.html(an);this._clearShowTimeout();this.showTimeout=setTimeout(this.move,P)},hide:function(){var an=this;clearTimeout(an.showTimeout);an._hideElement();if(an.visible){an.point=null;an.visible=false;an.index=null}},_sharedContent:function(aq){var ap=this,an,ao;an=T.template(ap.options.sharedTemplate);ao=an({points:aq.points,category:aq.category,categoryText:aq.categoryText,content:ap._pointContent});return ao},_measure:function(){this._ensureElement();var an={width:ae(this.element),height:aj(this.element)};return an},_ensureElement:function(){if(this.element){this.element.appendTo(document.body).on(E,this._mouseleave)}},_mouseleave:function(ap){var ao=ap.relatedTarget;var an=this.chartElement[0];if(ao&&ao!==an&&!S.contains(an,ao)){this.trigger(r);this.hide()}},_hideElement:function(){var ao=this;var an=this.element;if(an){an.fadeOut({always:function(){if(!ao.visible){an.off(E).remove()}}})}},_pointContent:function(an){var ar=this,ap=Z({},ar.options,an.options.tooltip),aq,ao;if(ad(an.value)){aq=an.value.toString()}if(ap.template){ao=j(ap.template);aq=ao({value:an.value,category:an.category,series:an.series,dataItem:an.dataItem,percentage:an.percentage,runningTotal:an.runningTotal,total:an.total,low:an.low,high:an.high,xLow:an.xLow,xHigh:an.xHigh,yLow:an.yLow,yHigh:an.yHigh})}else{if(ap.format){aq=an.formatValue(ap.format)}}return aq},_fit:function(aq,ap,an){var ao=0;if(aq+ap>an){ao=an-(aq+ap)}if(aq<0){ao=-aq}return ao}});var G=N.extend({init:function(ao,an){N.fn.init.call(this,ao,an);this.element.addClass("k-chart-crosshair-tooltip")},show:function(ao){var an=this.element;if(an){this.anchor=ao.anchor;this.element.css(ao.style);this.element.html(this.content(ao));this.move()}},move:function(){var ao=this,an=ao.element,ap=ao._offset();ao._ensureElement();an.css({top:ap.top,left:ap.left}).show()},content:function(ap){var ao=ap.value,an=ap.crosshair.options.tooltip;if(an.template){ao=j(an.template)({value:ao})}return ao},hide:function(){this.element.hide()}});var U=b.extend({init:function(an,ao){this._chart=an;this._pane=ao;this.visual=ao.visual;this.chartsVisual=ao.chartContainer.visual;this.name=ao.options.name},series:function(){var ar=this._chart;var aq=ar._plotArea.groupSeriesByPane();var ap=aq[this.name||"default"];var ao=[];if(ap){for(var an=0;an<ap.length;an++){ao.push(new d(ar,ap[an]))}}return ao}});var d=b.extend({init:function(ao,an){this._chart=ao;this._options=an},points:function(ap){var ao=this._points;if(!ao){var an=this._seriesOptions();var aq=this._chart._plotArea;this._points=ao=aq.pointsBySeriesIndex(an.index)}if(T.isFunction(ap)){ao=this._filterPoints(ao,ap)}return ao},data:function(at){var ao=this._seriesOptions();if(at){var aq=this._chart;var ar=aq._plotArea;ao.data=at;if(ao.categoryField){var ap=ar.seriesCategoryAxis(ao);var an=[].concat(aq.options.categoryAxis);aq._instance._bindCategoryAxisFromSeries(an[ap.axisIndex],ap.axisIndex)}aq._noTransitionsRedraw();this._clearFields()}return ao.data},findPoint:function(ap){var ao=this.points();for(var an=0;an<ao.length;an++){if(ap(ao[an])){return ao[an]}}},toggleHighlight:function(an,ao){if(!ao){ao=this.points()}else{if(T.isFunction(ao)){ao=this.points(ao)}else{ao=L(ao)?ao:[ao]}}this._chart._instance._togglePointsHighlight(an,ao)},toggleVisibility:function(au,ar){var aq=this._chart;var ap=this._seriesOptions();var ao=T.isFunction(ar);if(!ao){ap.visible=au;aq._saveGroupVisibleState(ap)}else{if(ah(ap.type,[q,l,M])){var at=this._filterData(ar);for(var an=0;an<at.length;an++){at[an].visible=au}}else{ap.visible=function(av){return ar(av.dataItem)?au:true}}}aq._noTransitionsRedraw();this._clearFields()},_filterData:function(ap){var ar=this._seriesOptions().data;var aq=ar.length;var ao=[];for(var an=0;an<aq;an++){if(ap(ar[an])){ao.push(ar[an])}}return ao},_filterPoints:function(aq,ap){var ao=[];var ar=aq.length;for(var an=0;an<ar;an++){if(ap(aq[an])){ao.push(aq[an])}}return ao},_seriesOptions:function(){var an=this._series;if(!an){an=this._series=this._chart._seriesOptions(this._options)}return an},_clearFields:function(){delete this._points;delete this._series}});m.Tooltip=N;m.CrosshairTooltip=G;m.ChartInstanceObserver=w;m.ChartPane=U;m.ChartSeries=d}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.dataviz.chart",["dataviz/chart/kendo-chart","dataviz/chart/chart"],a)}(function(){var a={id:"dataviz.chart",name:"Chart",category:"dataviz",description:"The Chart widget uses modern browser technologies to render high-quality data visualizations in the browser.",depends:["data","userevents","drawing","dataviz.core","dataviz.themes"],features:[{id:"dataviz.chart-pdf-export",name:"PDF export",description:"Export Chart as PDF",depends:["pdf"]}]}},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.dataviz.gauge",["kendo.dataviz.core","kendo.drawing","kendo.dataviz.themes"],a)}(function(){var a={id:"dataviz.gauge",name:"Gauge",category:"dataviz",description:"Radial and Linear gauges.",depends:["dataviz.core","dataviz.themes"]};(function(S,r){var N=Math,T=window.kendo,h=T.ui.Widget,aa=T.deepExtend,n=T.dataviz,j=n.autoMajorUnit,K=n.ChartElement,B=n.NumericAxis,x=n.Axis,O=n.Box2D,c=T.Class,ac=n.defined,ao=n.isNumber,L=n.interpolateValue,H=n.getSpacing,ag=n.round,al=n.geometry,am=n.drawing,C=al.Point,l=am.Group,W=am.Path,G=al.Rect,D=am.Text;var ae=150,U=250,Z="arrow",A="arrowPointer",R="barPointer",an="#000",q=0.05,af=n.COORD_PRECISION,b=Number.MAX_VALUE,Q=-Number.MAX_VALUE,M=200,J=0.5,E=200,ak=60,t=60,V=5,P=N.PI/180,ap=180,d="inside",o="linear",u="needle",ab="outside",g="radialPointer",f="x",e="y";var w=c.extend({init:function(au,Y){var at=this;var X=au.options;K.fn.init.call(at,Y);Y=at.options;Y.fill=Y.color;at.scale=au;if(ac(Y.value)){Y.value=N.min(N.max(Y.value,X.min),X.max)}else{Y.value=X.min}},options:{color:an},value:function(av){var at=this;var Y=at.options;var au=Y.value;var X=at.scale.options;if(arguments.length===0){return au}Y._oldValue=Y._oldValue!==r?Y.value:X.min;Y.value=N.min(N.max(av,X.min),X.max);if(at.elements){at.repaint()}}});var s=w.extend({options:{shape:u,cap:{size:q},arrow:{width:16,height:14},animation:{type:g,duration:ae}},setRadius:function(X){var Y=this;if(X){Y.elements.clear();Y.render(Y.parent,Y.center,X)}},setAngle:function(X){this.elements.transform(al.transform().rotate(X,this.center))},repaint:function(){var at=this;var au=at.scale;var X=at.options;var Y=au.slotAngle(X._oldValue);var av=au.slotAngle(X.value);if(X.animation.transitions===false){at.setAngle(av)}else{new ai(at.elements,aa(X.animation,{oldAngle:Y,newAngle:av})).play()}},render:function(){var at=this;var av=at.scale;var X=av.arc.center;var Y=at.options;var au=new l();if(Y.animation!==false){aa(Y.animation,{startAngle:0,center:X,reverse:av.options.reverse})}if(Y.shape===u){au.append(at._renderNeedle(),at._renderCap())}else{au.append(at._renderArrow())}at.elements=au;at.setAngle(P);return au},reflow:function(au){var av=this;var at=av.center=au.center;var Y=av.radius=au.getRadiusX();var X=av.capSize=Math.round(Y*av.options.cap.size);av.bbox=G.fromPoints(new C(at.x-X,at.y-X),new C(at.x+X,at.y+X))},_renderNeedle:function(){var aw=this;var au=aw.options;var at=aw.scale.options.minorTicks.size;var Y=aw.center;var av=au.color;var X=new W({fill:{color:av},stroke:{color:av,width:J}});X.moveTo(Y.x+aw.radius-at,Y.y).lineTo(Y.x,Y.y-aw.capSize/2).lineTo(Y.x,Y.y+aw.capSize/2).close();return X},_renderCap:function(){var au=this;var Y=au.options;var X=Y.cap.color||Y.color;var av=new al.Circle(au.center,au.capSize);var at=new am.Circle(av,{fill:{color:X},stroke:{color:X}});return at}});var k=B.extend({init:function(X){var Y=this;Y.options=aa({},Y.options,X);Y.options.majorUnit=Y.options.majorUnit||j(Y.options.min,Y.options.max);Y.options.minorUnit=Y.options.minorUnit||Y.options.majorUnit/10;x.fn.init.call(Y,Y.options)},options:{min:0,max:100,majorTicks:{size:15,align:d,color:an,width:J,visible:true},minorTicks:{size:10,align:d,color:an,width:J,visible:true},startAngle:-30,endAngle:210,labels:{position:d,padding:2}},render:function(Y,X){var au=this;var at=au.renderArc(Y,X);au.bbox=at.bbox();au.labelElements=au.renderLabels();au.ticks=au.renderTicks();au.ranges=au.renderRanges()},reflow:function(au){var at=this;var Y=au.center();var X=N.min(au.height(),au.width())/2;if(at.bbox!==r){at.bbox=at.arc.bbox();at.radius(at.arc.getRadiusX());at.repositionRanges();at.renderLabels()}else{return at.render(Y,X)}},slotAngle:function(ax){var au=this.options;var aw=au.startAngle;var at=au.reverse;var ay=au.endAngle-aw;var av=au.min;var Y=au.max;var X;if(at){X=au.endAngle-(ax-av)/(Y-av)*ay}else{X=(ax-av)/(Y-av)*ay+aw}return X+ap},renderLabels:function(){var aD=this;var aw=aD.options;var az=aw.majorTicks.size;var aF=aD.arc.clone();var ax=aF.getRadiusX();var aN=aD.tickAngles(aF,aw.majorUnit);var aS=aD.labels;var aC=aS.length;var ay=aw.labels;var aK=ay.padding;var aJ=ax*0.05;var aI=aw.rangeSize=aw.rangeSize||ax*0.1;var av=aw.ranges||[];var aE,aL,Y;var aR,aH,aG,aO,au,at,aB;var aP=new l();var aQ,aM,aA,X;if(aD.options.rangeDistance!==r){aJ=aD.options.rangeDistance}else{aD.options.rangeDistance=aJ}if(ay.position===d){ax-=az;if(av.length&&aD.labelElements===r){ax-=aI+aJ}aF.setRadiusX(ax).setRadiusY(ax)}for(aO=0;aO<aC;aO++){aH=aS[aO];aE=aH.box.width()/2;aL=aH.box.height()/2;aR=aN[aO];Y=(aR-ap)*P;aB=ay.position===d;aG=aF.pointAt(aR);au=aG.x+N.cos(Y)*(aE+aK)*(aB?1:-1);at=aG.y+N.sin(Y)*(aL+aK)*(aB?1:-1);aH.reflow(new n.Box2D(au-aE,at-aL,au+aE,at+aL));aM=new C(aH.box.x1,aH.box.y1);if(aD.labelElements===r){aQ=z(aH,aw.labels);aP.append(aQ)}else{aQ=aD.labelElements.children[aO];aA=aQ.bbox().origin;X=aQ.transform()||al.transform();X.translate(aM.x-aA.x,aM.y-aA.y);aQ.transform(X)}aD.bbox=G.union(aD.bbox,aQ.bbox())}return aP},repositionRanges:function(){var aw=this;var at=aw.ranges.children;var ax=aw.options.rangeSize;var av=aw.options.rangeDistance;var Y,X;if(at.length>0){Y=aw.getRangeRadius();if(aw.options.labels.position===d){Y+=ax+av}X=Y+ax/2;for(var au=0;au<at.length;au++){at[au]._geometry.setRadiusX(X).setRadiusY(X)}aw.bbox=G.union(aw.bbox,aw.ranges.bbox())}},renderRanges:function(){var ay=this;var X=ay.arc;var aE=new l();var aC,aD;var av=ay.rangeSegments();var ax=av.length;var aA=ay.options.reverse;var aB=ay.options.rangeSize;var Y=ay.options.rangeDistance;var aw,az,au,at;if(ax){az=ay.getRangeRadius();ay.radius(ay.radius()-aB-Y);for(at=0;at<ax;at++){aw=av[at];aC=ay.slotAngle(aw[aA?"to":"from"]);aD=ay.slotAngle(aw[!aA?"to":"from"]);if(aD-aC!==0){au=new al.Arc(X.center,{radiusX:az+aB/2,radiusY:az+aB/2,startAngle:aC,endAngle:aD});aE.append(new am.Arc(au,{stroke:{width:aB,color:aw.color,opacity:aw.opacity}}))}}}return aE},rangeSegments:function(){var aD=this;var aE=aD.options;var X=aE.ranges||[];var aB=X.length;var ay;var aA;var Y=aE.rangePlaceholderColor;var ax=[];var az;var av=aE.min;var aC=aE.max;var aw,au;function at(aI,aH,aF,aG){return{from:aI,to:aH,color:aF,opacity:aG}}if(aB){ax.push(at(av,aC,Y));for(aw=0;aw<aB;aw++){ay=i(X[aw],av,aC);aA=ax.length;for(au=0;au<aA;au++){az=ax[au];if(az.from<=ay.from&&ay.from<=az.to){ax.push(at(ay.from,ay.to,ay.color,ay.opacity));if(az.from<=ay.to&&ay.to<=az.to){ax.push(at(ay.to,az.to,Y,ay.opacity))}az.to=ay.from;break}}}}return ax},getRangeRadius:function(){var aw=this;var Y=aw.options;var X=Y.majorTicks.size;var ax=Y.rangeSize;var av=Y.rangeDistance;var at=aw.arc;var au;if(Y.labels.position===ab){au=at.getRadiusX()-X-av-ax}else{au=at.getRadiusX()-ax}return au},renderArc:function(Y,X){var av=this;var at=av.options;var au=av.arc=new al.Arc(Y,{radiusX:X,radiusY:X,startAngle:at.startAngle+ap,endAngle:at.endAngle+ap});return au},renderTicks:function(){var au=this;var X=au.arc;var aA=au.options;var Y=aA.labels.position;var ay=new l();var ax=aA.majorTicks.size;var aw=aA.minorTicks.size;var az=X.clone();var at=az.getRadiusX();function av(aD,aF,aK,aE){var aL=new l(),aC=aD.center,aI=aD.getRadiusX(),aH,aJ,aB,aG=aE.visible;if(aG){for(aH=0;aH<aF.length;aH++){aJ=aD.pointAt(aF[aH]);aB=new C(aC.x+aI-aE.size,aC.y).rotate(aF[aH],aC);aL.append(new W({stroke:{color:aE.color,width:aE.width}}).moveTo(aJ).lineTo(aB))}}return aL}au.majorTickAngles=au.tickAngles(X,aA.majorUnit);au.majorTicks=av(az,au.majorTickAngles,aA.majorUnit,aA.majorTicks);ay.append(au.majorTicks);au._tickDifference=ax-aw;if(Y===ab){az.setRadiusX(at-ax+aw).setRadiusY(at-ax+aw)}au.minorTickAngles=au.normalizeTickAngles(au.tickAngles(X,aA.minorUnit));au.minorTicks=av(az,au.minorTickAngles,aA.minorUnit,aA.minorTicks,aA.majorUnit);ay.append(au.minorTicks);return ay},normalizeTickAngles:function(av){var au=this;var X=au.options;var at=X.majorUnit/X.minorUnit;for(var Y=av.length-1;Y>=0;Y--){if(Y%at===0){av.splice(Y,1)}}return av},tickAngles:function(av,aA){var at=this;var aC=at.options;var az=aC.reverse;var ay=aC.max-aC.min;var au=av.endAngle-av.startAngle;var aB=av.startAngle;var X=ay/aA;var Y=au/X;var ax=[];var aw;if(az){aB+=au;Y=-Y}for(aw=0;aw<X;aw++){ax.push(ag(aB,af));aB+=Y}if(ag(aB)<=av.endAngle){ax.push(aB)}return ax},radius:function(X){var Y=this;if(X){Y.arc.setRadiusX(X).setRadiusY(X);Y.repositionTicks(Y.majorTicks.children,Y.majorTickAngles);Y.repositionTicks(Y.minorTicks.children,Y.minorTickAngles,true)}else{return Y.arc.getRadiusX()}},repositionTicks:function(aB,Y,av){var aw=this;var aA=av?aw._tickDifference||0:0;var aC=aw.arc;var ax=aC.getRadiusX();if(av&&aw.options.labels.position===ab&&aA!==0){aC=aw.arc.clone();aC.setRadiusX(ax-aA).setRadiusY(ax-aA)}for(var at=0;at<aB.length;at++){var X=aC.pointAt(Y[at]);var au=aB[at].segments;var az=X.x-au[0].anchor().x;var ay=X.y-au[0].anchor().y;aB[at].transform(new al.Transformation().translate(az,ay))}}});var m=h.extend({init:function(at,au){var ay=this;var az;var aw;var av;var ax=n.ui.themes||{};var Y;T.destroy(at);S(at).empty();h.fn.init.call(ay,at);ay.wrapper=ay.element;ay._originalOptions=aa({},au);az=aa({},ay.options,au);av=az.theme;Y=ax[av]||ax[av.toLowerCase()];aw=av&&Y?Y.gauge:{};ay.options=aa({},aw,az);if(S.isArray(az.pointer)){for(var X=0;X<az.pointer.length;X++){ay.options.pointer[X]=aa({},aw.pointer,az.pointer[X])}}ay.element.addClass("k-gauge");ay.surface=ay._createSurface();ay.redraw()},options:{plotArea:{},theme:"default",renderAs:"",pointer:{},scale:{},gaugeArea:{}},destroy:function(){this.surface.destroy();h.fn.destroy.call(this)},value:function(Y){var X=this;var at=X.pointers[0];if(arguments.length===0){return at.value()}at.value(Y);X._setValueOptions(Y)},_draw:function(){var X=this.surface;X.clear();X.draw(this._visuals)},exportVisual:function(){return this._visuals},allValues:function(at){var av=this;var Y=av.pointers;var X=[];var au;if(arguments.length===0){for(au=0;au<Y.length;au++){X.push(Y[au].value())}return X}if(S.isArray(at)){for(au=0;au<at.length;au++){if(ao(at[au])){Y[au].value(at[au])}}}av._setValueOptions(at)},_setValueOptions:function(Y){var X=[].concat(this.options.pointer);Y=[].concat(Y);for(var at=0;at<Y.length;at++){X[at].value=Y[at]}},_resize:function(){var at=this;var Y=at.options.transitions;var X;at.options.transitions=false;for(X=0;X<at.pointers.length;X++){at.pointers[X].options.animation.transitions=false}at.redraw();at.options.transitions=Y;for(X=0;X<at.pointers.length;X++){at.pointers[X].options.animation.transitions=Y}},redraw:function(){var Y=this;var X=aa(Y._getSize(),Y.options.gaugeArea);var au=new G([0,0],[X.width,X.height]);var at;Y.surface.clear();Y.gaugeArea=Y._createGaugeArea();Y.surface.element.css({width:X.width,height:X.height});Y._createModel();at=I(au.bbox(),Y._gaugeAreaMargin);Y.reflow(at)},_createGaugeArea:function(){var aw=this;var at=aw.options.gaugeArea;var au=aw.surface.size();var Y=at.border||{};var X=new G([0,0],[au.width,au.height]);aw._gaugeAreaMargin=at.margin||V;if(Y.width>0){X=I(X,Y.width)}var av=W.fromRect(X,{stroke:{color:Y.width?Y.color:"",width:Y.width,dashType:Y.dashType,lineJoin:"round",lineCap:"round"},fill:{color:at.background}});return av},_createSurface:function(){var au=this;var X=au.options;var Y=au._getSize();Y=X.gaugeArea?aa(Y,X.gaugeArea):Y;var at=S("<div></div>").appendTo(au.element).css({width:Y.width,height:Y.height});return new am.Surface.create(at,{type:X.renderAs})},getSize:function(){return this._getSize()},_getSize:function(){var au=this;var Y=au.element;var at=Y.width();var X=Y.height();if(!at){at=E}if(!X){X=M}return{width:at,height:X}}});var aj=m.extend({init:function(at,X){var Y=this;m.fn.init.call(Y,at,X);T.notify(Y,n.ui)},options:{name:"RadialGauge",transitions:true,gaugeArea:{background:""}},reflow:function(au){var at=this;var X=at.pointers;at.scale.reflow(au);at._initialPlotArea=at.scale.bbox;for(var Y=0;Y<X.length;Y++){X[Y].reflow(at.scale.arc);at._initialPlotArea=G.union(at._initialPlotArea,X[Y].bbox)}at.fitScale(au);at.alignScale(au);at._buildVisual(at.gaugeArea,X,at.scale);at._draw()},_buildVisual:function(at,X,aw){var au=new l();var av;au.append(at);au.append(aw.ticks);au.append(aw.ranges);for(var Y=0;Y<X.length;Y++){av=X[Y];av.render();au.append(av.elements);av.value(av.options.value)}au.append(aw.labelElements);this._visuals=au},fitScale:function(aD){var aw=this;var at=aw.scale;var X=at.arc;var aE=aw._initialPlotArea;var Y=N.abs(aw.getDiff(aE,aD));var au=ag(Y,af);var ay=ag(-Y,af);var aF,aB,ax,aA,aC;var az=0;var av=0;while(av++<100){az=aC===ax?az+1:0;if(az>5){break}if(au!=aA){aF=aw.getPlotBox(au,aD,X);if(0<=aF&&aF<=2){break}}if(ay!=aA){ax=aw.getPlotBox(ay,aD,X);if(0<=ax&&ax<=2){break}}if(aF>0&&ax>0){aA=au*2}else{if(aF<0&&ax<0){aA=ay*2}else{aA=ag((au+ay)/2||1,af)}}aB=aw.getPlotBox(aA,aD,X);if(0<=aB&&aB<=2){break}aC=ax;if(aB>0){ay=aA;ax=aB}else{au=aA;aF=aB}}},getPlotBox:function(aw,ay,au){var av=this;var ax=av.scale;var Y=av.pointers;var X=au.getRadiusX();au=au.clone();au.setRadiusX(X+aw).setRadiusY(X+aw);ax.arc=au;ax.reflow(ay);av.plotBbox=ax.bbox;for(var at=0;at<Y.length;at++){Y[at].reflow(au);av.plotBbox=G.union(av.plotBbox,Y[at].bbox)}return av.getDiff(av.plotBbox,ay)},getDiff:function(X,Y){return N.min(Y.width()-X.width(),Y.height()-X.height())},alignScale:function(az){var av=this;var aw=av.plotBbox.center();var ax=az.center();var at=aw.x-ax.x;var Y=aw.y-ax.y;var X=av.scale;var ay=av.pointers;X.arc.center.x-=at;X.arc.center.y-=Y;X.reflow(az);for(var au=0;au<ay.length;au++){ay[au].reflow(X.arc);av.plotBbox=G.union(X.bbox,ay[au].bbox)}},_createModel:function(){var au=this;var Y=au.options;var X=Y.pointer;var aw=au.scale=new k(Y.scale);var av;au.pointers=[];X=S.isArray(X)?X:[X];for(var at=0;at<X.length;at++){av=new s(aw,aa({},X[at],{animation:{transitions:Y.transitions}}));au.pointers.push(av)}}});var ar=m.extend({init:function(at,Y){var X=this;m.fn.init.call(X,at,Y);T.notify(X,n.ui)},options:{name:"LinearGauge",transitions:true,gaugeArea:{background:""},scale:{vertical:true}},reflow:function(ax){var av=this;var at=av.pointers;var Y=ax.origin.x;var X=ax.origin.y;var aw=new n.Box2D(Y,X,Y+ax.width(),X+ax.height());av.scale.reflow(aw);for(var au=0;au<at.length;au++){at[au].reflow()}av.bbox=av._getBox(aw);av._alignElements();av._shrinkElements();av._buildVisual();av._draw()},_buildVisual:function(){var au=this;var av=new l();var at=au.scale.render();var X=au.pointers;var aw;av.append(au.gaugeArea);av.append(at);for(var Y=0;Y<X.length;Y++){aw=X[Y];av.append(aw.render());aw.value(aw.options.value)}au._visuals=av},_createModel:function(){var av=this;var at=av.options;var Y=at.pointer;var ax=av.scale=new p(at.scale);var aw,X;av.pointers=[];Y=S.isArray(Y)?Y:[Y];for(var au=0;au<Y.length;au++){X=aa({},Y[au],{animation:{transitions:at.transitions}});if(X.shape===Z){aw=new aq(ax,X)}else{aw=new v(ax,X)}av.pointers.push(aw)}},_getSize:function(){var av=this;var at=av.element;var au=at.width();var X=at.height();var Y=av.options.scale.vertical;if(!au){au=Y?ak:E}if(!X){X=Y?M:t}return{width:au,height:X}},_getBox:function(aw){var av=this;var ay=av.scale;var X=av.pointers;var ax=aw.center();var au=X[0].box.clone().wrap(ay.box);var at;for(var Y=0;Y<X.length;Y++){au.wrap(X[Y].box.clone())}if(ay.options.vertical){at=au.width()/2;au=new O(ax.x-at,aw.y1,ax.x+at,aw.y2)}else{at=au.height()/2;au=new O(aw.x1,ax.y-at,aw.x2,ax.y+at)}return au},_alignElements:function(){var aw=this;var ay=aw.scale;var X=aw.pointers;var au=ay.box;var av=X[0].box.clone().wrap(ay.box);var at=aw.bbox;var ax,Y;for(Y=0;Y<X.length;Y++){av.wrap(X[Y].box.clone())}if(ay.options.vertical){ax=at.center().x-av.center().x;ay.reflow(new O(au.x1+ax,at.y1,au.x2+ax,at.y2))}else{ax=at.center().y-av.center().y;ay.reflow(new O(at.x1,au.y1+ax,at.x2,au.y2+ax))}for(Y=0;Y<X.length;Y++){X[Y].reflow(aw.bbox)}},_shrinkElements:function(){var au=this;var av=au.scale;var X=au.pointers;var at=av.box.clone();var ax=av.options.vertical?"y":"x";var aw=X[0].box;var Y;for(Y=0;Y<X.length;Y++){aw.wrap(X[Y].box.clone())}at[ax+1]+=N.max(at[ax+1]-aw[ax+1],0);at[ax+2]-=N.max(aw[ax+2]-at[ax+2],0);av.reflow(at);for(Y=0;Y<X.length;Y++){X[Y].reflow(au.bbox)}}});var p=B.extend({init:function(X){var Y=this;Y.options=aa({},Y.options,X);Y.options=aa({},Y.options,{labels:{mirror:Y.options.mirror}});Y.options.majorUnit=Y.options.majorUnit||j(Y.options.min,Y.options.max);x.fn.init.call(Y,Y.options);Y.options.minorUnit=Y.options.minorUnit||Y.options.majorUnit/10},options:{min:0,max:50,majorTicks:{size:15,align:d,color:an,width:J,visible:true},minorTicks:{size:10,align:d,color:an,width:J,visible:true},line:{width:J},labels:{position:d,padding:2},mirror:false,_alignLines:false},render:function(){var Y=this;var at=Y.elements=new l();var aw=Y.renderLabels();var au=Y.renderLine();var av=Y.renderTicks();var X=Y.renderRanges();at.append(au,aw,av,X);return at},renderRanges:function(){var ay=this;var aF=ay.options;var au=aF.min;var aB=aF.max;var Y=aF.ranges||[];var at=aF.vertical;var aD=aF.labels.mirror;var X=new l();var ax=Y.length;var az=aF.rangeSize||aF.minorTicks.size/2;var aw,aE,aC,aA,av;if(ax){for(av=0;av<ax;av++){aw=i(Y[av],au,aB);aE=ay.getSlot(aw.from,aw.to);aC=at?ay.lineBox():aE;aA=at?aE:ay.lineBox();if(at){aC.x1-=az*(aD?-1:1)}else{aA.y2+=az*(aD?-1:1)}X.append(W.fromRect(new G([aC.x1,aA.y1],[aC.x2-aC.x1,aA.y2-aA.y1]),{fill:{color:aw.color,opacity:aw.opacity},stroke:{}}))}}return X},renderLabels:function(){var at=this;var X=at.options;var av=at.labels;var au=new l();for(var Y=0;Y<av.length;Y++){au.append(z(av[Y],X.labels))}return au},renderLine:function(){var av=this;var au=av.options;var at=au.line;var Y=av.lineBox();var X;var aw=new l();if(at.width>0&&at.visible){X=new W({stroke:{color:at.color,dashType:at.dashType,width:at.width}});X.moveTo(Y.x1,Y.y1).lineTo(Y.x2,Y.y2);aw.append(X)}return aw},renderTicks:function(){var av=this;var au=new l();var Y=av.options;var X=av.lineBox();var ay=Y.labels.mirror;var ax=Y.majorTicks.visible?Y.majorUnit:0;var aw={_alignLines:Y._alignLines,vertical:Y.vertical};function at(aA,az){var aB,aC=aA.length;if(az.visible){for(aB=az.skip;aB<aC;aB+=az.step){if(aB%az.skipUnit===0){continue}aw.tickX=ay?X.x2:X.x2-az.size;aw.tickY=ay?X.y1-az.size:X.y1;aw.position=aA[aB];au.append(av.renderAxisTick(aw,az))}}}at(av.getMajorTickPositions(),Y.majorTicks);at(av.getMinorTickPositions(),aa({},{skipUnit:ax/Y.minorUnit},Y.minorTicks));return au},renderAxisTick:function(av,au){var Y=av.tickX;var ay=av.tickY;var X=av.position;var ax,at,aw;if(av.vertical){ax=new C(Y,X);at=new C(Y+au.size,X)}else{ax=new C(X,ay);at=new C(X,ay+au.size)}aw=new W({stroke:{color:au.color,width:au.width}}).moveTo(ax).lineTo(at);return aw}});var F=w.extend({init:function(at,X){var Y=this;w.fn.init.call(Y,at,X);Y.options=aa({track:{visible:ac(X.track)}},Y.options)},options:{shape:R,track:{border:{width:1}},color:an,border:{width:1},opacity:1,margin:H(3),animation:{type:R},visible:true},reflow:function(){var Y=this;var aD=Y.options;var av=Y.scale;var ax=av.lineBox();var aC=aD.track.size||aD.size;var az=aD.size/2;var aB=av.options.mirror;var aw=H(aD.margin);var au=av.options.vertical;var X=au?aw[aB?"left":"right"]:aw[aB?"bottom":"top"];var ay,at,aA;X=aB?-X:X;if(au){aA=new O(ax.x1+X,ax.y1,ax.x1+X,ax.y2);if(aB){aA.x1-=aC}else{aA.x2+=aC}if(aD.shape!==R){at=new O(ax.x2+X,ax.y1-az,ax.x2+X,ax.y2+az);ay=at}}else{aA=new O(ax.x1,ax.y1-X,ax.x2,ax.y1-X);if(aB){aA.y2+=aC}else{aA.y1-=aC}if(aD.shape!==R){at=new O(ax.x1-az,ax.y1-X,ax.x2+az,ax.y1-X);ay=at}}Y.trackBox=aA;Y.pointerRangeBox=at;Y.box=ay||aA.clone().pad(aD.border.width)},getElementOptions:function(){var X=this.options;return{fill:{color:X.color,opacity:X.opacity},stroke:ac(X.border)?{color:X.border.width?X.border.color||X.color:"",width:X.border.width,dashType:X.border.dashType,opacity:X.opacity}:null}},_margin:function(){var ax=this;var Y=ax.options;var aw=ax.scale;var av=aw.options.mirror;var au=H(Y.margin);var X=aw.options.vertical;var at=X?au[av?"left":"right"]:au[av?"bottom":"top"];return at}});var aq=F.extend({init:function(Y,X){F.fn.init.call(this,Y,X);if(this.options.size===r){this.options.size=this.scale.options.majorTicks.size*0.6}},pointerShape:function(){var av=this;var aA=av.options;var Y=av.scale;var az=aA.size;var at=Y.options.vertical;var au=az/2;var X=Y.options.mirror?-1:1;var ax=Y.options.reverse;var ay,aw;if(at){ay=ax?"y2":"y1";aw=[new C(0,0-au),new C(0-X*az,0),new C(0,0+au)]}else{ay=ax?"x1":"x2";aw=[new C(0-au,0),new C(0,0+X*az),new C(0+au,0)]}return aw},repaint:function(){var Y=this;var au=Y.scale;var X=Y.options;var at=new ah(Y.elements,aa(X.animation,{vertical:au.options.vertical,mirror:au.options.mirror,margin:Y._margin(X.margin),from:au.getSlot(X._oldValue),to:au.getSlot(X.value)}));if(X.animation.transitions===false){at.options.duration=0}at.setup();at.play()},render:function(){var au=this;var at=au.options;var av=new l();var aw=au.scale;var Y=au.getElementOptions();var X=au.pointerShape(at.value);at.animation.type=A;av=new W({stroke:Y.stroke,fill:Y.fill}).moveTo(X[0]).lineTo(X[1]).lineTo(X[2]).close();var ax=aw.getSlot(at.value);av.transform(al.transform().translate(ax.x1,ax.y1));au.elements=av;return av}});var v=F.extend({init:function(Y,X){F.fn.init.call(this,Y,X);if(this.options.size===r){this.options.size=this.scale.options.majorTicks.size*0.3}},pointerShape:function(aC){var aw=this;var aH=aw.options;var at=aw.scale;var au=at.options.vertical;var az=at.options.mirror;var Y=az==au?-1:1;var aG=aH.size*Y;var aF=at.getSlot(at.options.min);var aB=at.getSlot(aC);var X=au?e:f;var ax=au?f:e;var av=aw._margin()*Y;var aE=new C();aE[X]=aF[X+"1"];aE[ax]=aF[ax+"1"];var aD=new C();aD[X]=aB[X+"1"];aD[ax]=aB[ax+"1"];if(au){aE.translate(av,0);aD.translate(av,0)}else{aE.translate(0,av);aD.translate(0,av)}var aA=aD.clone();var ay=aE.clone();if(au){aA.translate(aG,0);ay.translate(aG,0)}else{aA.translate(0,aG);ay.translate(0,aG)}return[aE,aD,aA,ay]},repaint:function(){var au=this;var ax=au.scale;var at=au.options;var X=au.pointerShape(at.value);var Y=au.elements.children[0];var aw=au.pointerShape(at._oldValue);Y.moveTo(X[0]).lineTo(X[1]).lineTo(X[2]).lineTo(X[3]).close();var av=new ad(Y,aa(at.animation,{reverse:ax.options.reverse,vertical:ax.options.vertical,oldPoints:[aw[1],aw[2]],newPoints:[X[1],X[2]]}));if(at.animation.transitions===false){av.options.duration=0}av.setup();av.play()},render:function(){var Y=this;var at=new l();var X=Y.getElementOptions();var au=new W({stroke:X.stroke,fill:X.fill});at.append(au);Y.elements=at;return at}});var ai=am.Animation.extend({init:function(Y,X){am.Animation.fn.init.call(this,Y,X);X=this.options;X.duration=N.max(N.abs(X.newAngle-X.oldAngle)/X.duration*1000,1)},options:{easing:o,duration:ae},step:function(au){var Y=this;var X=Y.options;var at=L(X.oldAngle,X.newAngle,au);Y.element.transform(al.transform().rotate(at,X.center))}});am.AnimationFactory.current.register(g,ai);var ah=am.Animation.extend({options:{easing:o,duration:U},setup:function(){var at=this.options;var av=at.margin;var ax=at.from;var aw=at.to;var au=at.vertical?"x1":"y1";if(at.mirror==at.vertical){ax[au]-=av;aw[au]-=av}else{ax[au]+=av;aw[au]+=av}var X=this.fromScale=new C(ax.x1,ax.y1);var Y=this.toScale=new C(aw.x1,aw.y1);if(at.duration!==0){at.duration=N.max(X.distanceTo(Y)/at.duration*1000,1)}},step:function(at){var Y=L(this.fromScale.x,this.toScale.x,at);var X=L(this.fromScale.y,this.toScale.y,at);this.element.transform(al.transform().translate(Y,X))}});am.AnimationFactory.current.register(A,ah);var ad=am.Animation.extend({options:{easing:o,speed:U},setup:function(){var X=this.options;var au=X.newPoints;var Y=X.oldPoints;var at=this.axis=X.vertical?e:f;var aw=this.to=au[0][at];var av=this.from=Y[0][at];if(X.duration!==0){X.duration=N.max(N.abs(aw-av)/X.speed*1000,1)}this._set(av)},step:function(Y){var X=L(this.from,this.to,Y);this._set(X)},_set:function(Y){var at="set"+this.axis.toUpperCase();var X=this.options.newPoints;X[0][at](Y);X[1][at](Y)}});am.AnimationFactory.current.register(R,ad);function z(ay,aB){var aA=ay.box;var ax=ay.children[0].box;var av=aB.border||{};var au=aB.background||"";var X=new l();var at,aw,Y;Y=W.fromRect(new G([aA.x1,aA.y1],[aA.width(),aA.height()]),{stroke:{}});var az=new D(ay.text,new C(ax.x1,ax.y1),{font:aB.font,fill:{color:aB.color}});aw=y(az.bbox().clone(),aB.padding);at=W.fromRect(aw,{stroke:{color:av.width?av.color:"",width:av.width,dashType:av.dashType,lineJoin:"round",lineCap:"round"},fill:{color:au}});X.append(Y);X.append(at);X.append(az);return X}function i(Y,at,X){var av=ac(Y.from)?Y.from:Q;var au=ac(Y.to)?Y.to:b;Y.from=N.max(N.min(au,av),at);Y.to=N.min(N.max(au,av),X);return Y}function y(au,at){var X=au.getOrigin();var Y=au.getSize();var av=H(at);au.setOrigin([X.x-av.left,X.y-av.top]);au.setSize([Y.width+(av.left+av.right),Y.height+(av.top+av.bottom)]);return au}function I(Y,X){var at=H(X);at.left=-at.left;at.top=-at.top;at.right=-at.right;at.bottom=-at.bottom;return y(Y,at)}n.ui.plugin(aj);n.ui.plugin(ar);n.ExportMixin.extend(m.fn);aa(n,{Gauge:m,RadialPointer:s,LinearPointer:F,ArrowLinearPointer:aq,BarLinearPointer:v,LinearScale:p,RadialScale:k,LinearGauge:ar,RadialGauge:aj})}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.dataviz.barcode",["kendo.dataviz.core","kendo.drawing"],a)}(function(){var a={id:"dataviz.barcode",name:"Barcode",category:"dataviz",description:"Barcode widget",depends:["dataviz.core"]};(function(l,n){var y=window.kendo,g=y.ui.Widget,E=l.extend,v=y.deepExtend,D=l.inArray,x=l.isPlainObject,r=y.drawing,z=y.geometry,d=y.drawing.util,f=d.defined,p=y.dataviz,k=p.Box2D,u=p.TextBox,j=300,A=100,t=10,m=/^\d+$/,C=/^[a-z0-9]+$/i,G="Character '{0}' is not valid for symbology {1}";function h(J,H,I){return J.substring(H,H+I)}var i=y.Class.extend({init:function(H){this.setOptions(H)},setOptions:function(H){var I=this;I.options=E({},I.options,H);I.quietZoneLength=I.options.addQuietZone?2*I.options.quietZoneLength:0},encode:function(K,I,H){var J=this;if(f(K)){K+=""}J.initValue(K,I,H);if(J.options.addQuietZone){J.addQuietZone()}J.addData();if(J.options.addQuietZone){J.addQuietZone()}return{baseUnit:J.baseUnit,pattern:J.pattern}},options:{quietZoneLength:t,addQuietZone:true,addCheckSum:true},initValue:function(){},addQuietZone:function(){this.pattern.push(this.options.quietZoneLength||t)},addData:function(){},invalidCharacterError:function(H){throw new Error(y.format(G,H,this.name))}});var w={};var q=i.extend({minBaseUnitLength:0.7,addData:function(){var I=this,J=I.value;I.addStart();for(var H=0;H<J.length;H++){I.addCharacter(J.charAt(H))}if(I.options.addCheckSum){I.pushCheckSum()}I.addStop();I.prepareValues()},addCharacter:function(J){var I=this,H=I.characterMap[J];if(!H){I.invalidCharacterError(J)}I.addBase(H)},addBase:function(){}});var b={addCharacter:function(I){var H=this;if(H.characterMap[I]){H.addBase(H.characterMap[I])}else{if(I.charCodeAt(0)>127){H.invalidCharacterError(I)}else{H.addExtended(I.charCodeAt(0))}}},addExtended:function(L){var K=this,J;for(var I=0;I<K.extendedMappings.length;I++){if(J=K.extendedMappings[I].call(K,L)){for(var H=0;H<J.length;H++){K.addBase(J[H])}K.dataLength+=J.length-1;return}}},extendedMappings:[function(I){if(97<=I&&I<=122){var H=this;return[H.characterMap[H.shiftCharacters[0]],H.characterMap[String.fromCharCode(I-32)]]}},function(I){if(33<=I&&I<=58){var H=this;return[H.characterMap[H.shiftCharacters[1]],H.characterMap[String.fromCharCode(I+32)]]}},function(I){if(1<=I&&I<=26){var H=this;return[H.characterMap[H.shiftCharacters[2]],H.characterMap[String.fromCharCode(I+64)]]}},function(L){var K=this,H,J;if(!K.specialAsciiCodes[L]){J=Math.floor(L/32)*6+(L-27)%32+64;H=[K.characterMap[K.shiftCharacters[3]],K.characterMap[String.fromCharCode(J)]]}else{H=[];for(var I=0;I<K.specialAsciiCodes[L].length;I++){H.push(K.characterMap[K.shiftCharacters[3]]);H.push(K.characterMap[K.specialAsciiCodes[L][I]])}}return H}],specialAsciiCodes:{"0":["U"],"64":["V"],"96":["W"],"127":["T","X","Y","Z"]},shiftValuesAsciiCodes:{"39":36,"40":47,"41":43,"42":37},characterMap:{"+":false,"/":false,"$":false,"%":false},shiftCharacters:["SHIFT0","SHIFT1","SHIFT2","SHIFT3"]};w.code39=q.extend({name:"Code 39",checkSumMod:43,minRatio:2.5,maxRatio:3,gapWidth:1,splitCharacter:"|",initValue:function(K,I,H){var J=this;J.width=I;J.height=H;J.value=K;J.dataLength=K.length;J.pattern=[];J.patternString=""},prepareValues:function(){var K=this,N,M=K.minBaseUnitLength,J=K.maxRatio,I=K.minRatio,L=Math.max(0.15*K.width,24);if(K.height<L){throw new Error("Insufficient Height. The minimum height for value: "+K.value+" is: "+L)}while((N=K.getBaseUnit(J))<M&&J>I){J=parseFloat((J-0.1).toFixed(1))}if(N<M){var H=Math.ceil(K.getBaseWidth(I)*M);throw new Error("Insufficient width. The minimum width for value: "+K.value+" is: "+H)}K.ratio=J;K.baseUnit=N;K.patternString=K.patternString.substring(0,K.patternString.length-1);K.pattern=K.pattern.concat(K.patternString.replace(/ratio/g,J).split(K.splitCharacter))},getBaseUnit:function(H){return this.width/this.getBaseWidth(H)},getBaseWidth:function(H){var I=this,J=3*(H+2);return I.quietZoneLength+J*(I.dataLength+2)+I.gapWidth*(I.dataLength+1)},addStart:function(){var H=this;H.addPattern(H.characterMap.START.pattern);H.addCharacterGap()},addBase:function(H){this.addPattern(H.pattern);this.addCharacterGap()},addStop:function(){this.addPattern(this.characterMap.START.pattern)},addPattern:function(I){for(var H=0;H<I.length;H++){this.patternString+=this.patternMappings[I.charAt(H)]}},addCharacterGap:function(){var H=this;H.patternString+=H.gapWidth+H.splitCharacter},patternMappings:{b:"1|",w:"1|",B:"ratio|",W:"ratio|"},characterMap:{"0":{pattern:"bwbWBwBwb",value:0},"1":{pattern:"BwbWbwbwB",value:1},"2":{pattern:"bwBWbwbwB",value:2},"3":{pattern:"BwBWbwbwb",value:3},"4":{pattern:"bwbWBwbwB",value:4},"5":{pattern:"BwbWBwbwb",value:5},"6":{pattern:"bwBWBwbwb",value:6},"7":{pattern:"bwbWbwBwB",value:7},"8":{pattern:"BwbWbwBwb",value:8},"9":{pattern:"bwBWbwBwb",value:9},A:{pattern:"BwbwbWbwB",value:10},B:{pattern:"bwBwbWbwB",value:11},C:{pattern:"BwBwbWbwb",value:12},D:{pattern:"bwbwBWbwB",value:13},E:{pattern:"BwbwBWbwb",value:14},F:{pattern:"bwBwBWbwb",value:15},G:{pattern:"bwbwbWBwB",value:16},H:{pattern:"BwbwbWBwb",value:17},I:{pattern:"bwBwbWBwb",value:18},J:{pattern:"bwbwBWBwb",value:19},K:{pattern:"BwbwbwbWB",value:20},L:{pattern:"bwBwbwbWB",value:21},M:{pattern:"BwBwbwbWb",value:22},N:{pattern:"bwbwBwbWB",value:23},O:{pattern:"BwbwBwbWb",value:24},P:{pattern:"bwBwBwbWb",value:25},Q:{pattern:"bwbwbwBWB",value:26},R:{pattern:"BwbwbwBWb",value:27},S:{pattern:"bwBwbwBWb",value:28},T:{pattern:"bwbwBwBWb",value:29},U:{pattern:"BWbwbwbwB",value:30},V:{pattern:"bWBwbwbwB",value:31},W:{pattern:"BWBwbwbwb",value:32},X:{pattern:"bWbwBwbwB",value:33},Y:{pattern:"BWbwBwbwb",value:34},Z:{pattern:"bWBwBwbwb",value:35},"-":{pattern:"bWbwbwBwB",value:36},".":{pattern:"BWbwbwBwb",value:37}," ":{pattern:"bWBwbwBwb",value:38},"$":{pattern:"bWbWbWbwb",value:39},"/":{pattern:"bWbWbwbWb",value:40},"+":{pattern:"bWbwbWbWb",value:41},"%":{pattern:"bwbWbWbWb",value:42},START:{pattern:"bWbwBwBwb"}},options:{addCheckSum:false}});w.code39extended=w.code39.extend(v({},b,{name:"Code 39 extended",characterMap:{SHIFT0:{pattern:"bWbwbWbWb",value:41},SHIFT1:{pattern:"bWbWbwbWb",value:40},SHIFT2:{pattern:"bWbWbWbwb",value:39},SHIFT3:{pattern:"bwbWbWbWb",value:42}}}));w.code93=q.extend({name:"Code 93",cCheckSumTotal:20,kCheckSumTotal:15,checkSumMod:47,initValue:function(K,I,H){var J=this;J.value=K;J.width=I;J.height=H;J.pattern=[];J.values=[];J.dataLength=K.length},prepareValues:function(){var H=this,I=Math.max(0.15*H.width,24);if(H.height<I){throw new Error("Insufficient Height")}H.setBaseUnit();if(H.baseUnit<H.minBaseUnitLength){throw new Error("Insufficient Width")}},setBaseUnit:function(){var I=this,H=2;I.baseUnit=I.width/(9*(I.dataLength+2+H)+I.quietZoneLength+1)},addStart:function(){var H=this.characterMap.START.pattern;this.addPattern(H)},addStop:function(){var H=this;H.addStart();H.pattern.push(H.characterMap.TERMINATION_BAR)},addBase:function(H){this.addPattern(H.pattern);this.values.push(H.value)},pushCheckSum:function(){var K=this,J=K._getCheckValues(),H;K.checksum=J.join("");for(var I=0;I<J.length;I++){H=K.characterMap[K._findCharacterByValue(J[I])];K.addPattern(H.pattern)}},_getCheckValues:function(){var M=this,J=M.values,L=J.length,I=0,K,N,H;for(H=L-1;H>=0;H--){I+=M.weightedValue(J[H],L-H,M.cCheckSumTotal)}K=I%M.checkSumMod;I=M.weightedValue(K,1,M.kCheckSumTotal);for(H=L-1;H>=0;H--){I+=M.weightedValue(J[H],L-H+1,M.kCheckSumTotal)}N=I%M.checkSumMod;return[K,N]},_findCharacterByValue:function(I){for(var H in this.characterMap){if(this.characterMap[H].value===I){return H}}},weightedValue:function(J,H,I){return(H%I||I)*J},addPattern:function(J){var I;for(var H=0;H<J.length;H++){I=parseInt(J.charAt(H),10);this.pattern.push(I)}},characterMap:{"0":{pattern:"131112",value:0},"1":{pattern:"111213",value:1},"2":{pattern:"111312",value:2},"3":{pattern:"111411",value:3},"4":{pattern:"121113",value:4},"5":{pattern:"121212",value:5},"6":{pattern:"121311",value:6},"7":{pattern:"111114",value:7},"8":{pattern:"131211",value:8},"9":{pattern:"141111",value:9},A:{pattern:"211113",value:10},B:{pattern:"211212",value:11},C:{pattern:"211311",value:12},D:{pattern:"221112",value:13},E:{pattern:"221211",value:14},F:{pattern:"231111",value:15},G:{pattern:"112113",value:16},H:{pattern:"112212",value:17},I:{pattern:"112311",value:18},J:{pattern:"122112",value:19},K:{pattern:"132111",value:20},L:{pattern:"111123",value:21},M:{pattern:"111222",value:22},N:{pattern:"111321",value:23},O:{pattern:"121122",value:24},P:{pattern:"131121",value:25},Q:{pattern:"212112",value:26},R:{pattern:"212211",value:27},S:{pattern:"211122",value:28},T:{pattern:"211221",value:29},U:{pattern:"221121",value:30},V:{pattern:"222111",value:31},W:{pattern:"112122",value:32},X:{pattern:"112221",value:33},Y:{pattern:"122121",value:34},Z:{pattern:"123111",value:35},"-":{pattern:"121131",value:36},".":{pattern:"311112",value:37}," ":{pattern:"311211",value:38},"$":{pattern:"321111",value:39},"/":{pattern:"112131",value:40},"+":{pattern:"113121",value:41},"%":{pattern:"211131",value:42},SHIFT0:{pattern:"122211",value:46},SHIFT1:{pattern:"311121",value:45},SHIFT2:{pattern:"121221",value:43},SHIFT3:{pattern:"312111",value:44},START:{pattern:"111141"},TERMINATION_BAR:"1"}});w.code93extended=w.code93.extend(v({},b,{name:"Code 93 extended",pushCheckSum:function(){var J=this,I=J._getCheckValues(),K;J.checksum=I.join("");for(var H=0;H<I.length;H++){K=I[H];if(J.shiftValuesAsciiCodes[K]){J.addExtended(J.shiftValuesAsciiCodes[K])}else{J.addPattern(J.characterMap[J._findCharacterByValue(K)].pattern)}}}}));var o=y.Class.extend({init:function(H){this.encoding=H},addStart:function(){},is:function(){},move:function(){},pushState:function(){}});var c=o.extend({FNC4:"FNC4",init:function(J,H){var I=this;I.encoding=J;I.states=H;I._initMoves(H)},addStart:function(){this.encoding.addPattern(this.START)},is:function(J,H){var I=J.charCodeAt(H);return this.isCode(I)},move:function(J){var I=this,H=0;while(!I._moves[H].call(I,J)&&H<I._moves.length){H++}},pushState:function(M){var L=this,I=L.states,N=M.value,H=N.length,K;if(D("C",I)>=0){var J=N.substr(M.index).match(/\d{4,}/g);if(J){H=N.indexOf(J[0],M.index)}}while((K=M.value.charCodeAt(M.index))>=0&&L.isCode(K)&&M.index<H){L.encoding.addPattern(L.getValue(K));M.index++}},_initMoves:function(H){var I=this;I._moves=[];if(D(I.FNC4,H)>=0){I._moves.push(I._moveFNC)}if(D(I.shiftKey,H)>=0){I._moves.push(I._shiftState)}I._moves.push(I._moveState)},_moveFNC:function(H){if(H.fnc){H.fnc=false;return H.previousState==this.key}},_shiftState:function(I){var H=this;if(I.previousState==H.shiftKey&&(I.index+1>=I.value.length||H.encoding[H.shiftKey].is(I.value,I.index+1))){H.encoding.addPattern(H.SHIFT);I.shifted=true;return true}},_moveState:function(){this.encoding.addPattern(this.MOVE);return true},SHIFT:98});var e={};e.A=c.extend({key:"A",shiftKey:"B",isCode:function(H){return 0<=H&&H<96},getValue:function(H){if(H<32){return H+64}return H-32},MOVE:101,START:103});e.B=c.extend({key:"B",shiftKey:"A",isCode:function(H){return 32<=H&&H<128},getValue:function(H){return H-32},MOVE:100,START:104});e.C=o.extend({key:"C",addStart:function(){this.encoding.addPattern(this.START)},is:function(J,I){var H=h(J,I,4);return(I+4<=J.length||J.length==2)&&m.test(H)},move:function(){this.encoding.addPattern(this.MOVE)},pushState:function(I){var H;while((H=h(I.value,I.index,2))&&m.test(H)&&H.length==2){this.encoding.addPattern(parseInt(H,10));I.index+=2}},getValue:function(H){return H},MOVE:99,START:105});e.FNC4=o.extend({key:"FNC4",dependentStates:["A","B"],init:function(I,H){this.encoding=I;this._initSubStates(H)},addStart:function(I){var H=I.value.charCodeAt(0)-128,J=this._getSubState(H);this.encoding[J].addStart()},is:function(J,H){var I=J.charCodeAt(H);return this.isCode(I)},isCode:function(H){return 128<=H&&H<256},pushState:function(L){var K=this,M=K._initSubState(L),J=K.encoding,I=M.value.length;L.index+=I;if(I<3){var H;for(;M.index<I;M.index++){H=M.value.charCodeAt(M.index);M.state=K._getSubState(H);if(M.previousState!=M.state){M.previousState=M.state;J[M.state].move(M)}J.addPattern(J[M.state].MOVE);J.addPattern(J[M.state].getValue(H))}}else{if(M.state!=M.previousState){J[M.state].move(M)}K._pushStart(M);J.pushData(M,K.subStates);if(L.index<L.value.length){K._pushStart(M)}}L.fnc=true;L.state=M.state},_pushStart:function(I){var H=this;H.encoding.addPattern(H.encoding[I.state].MOVE);H.encoding.addPattern(H.encoding[I.state].MOVE)},_initSubState:function(I){var H=this,J={value:H._getAll(I.value,I.index),index:0};J.state=H._getSubState(J.value.charCodeAt(0));J.previousState=I.previousState==H.key?J.state:I.previousState;return J},_initSubStates:function(H){var J=this;J.subStates=[];for(var I=0;I<H.length;I++){if(D(H[I],J.dependentStates)>=0){J.subStates.push(H[I])}}},_getSubState:function(J){var I=this;for(var H=0;H<I.subStates.length;H++){if(I.encoding[I.subStates[H]].isCode(J)){return I.subStates[H]}}},_getAll:function(K,I){var J,H="";while((J=K.charCodeAt(I++))&&this.isCode(J)){H+=String.fromCharCode(J-128)}return H}});e.FNC1=o.extend({key:"FNC1",startState:"C",dependentStates:["C","B"],startAI:"(",endAI:")",init:function(I,H){this.encoding=I;this.states=H},addStart:function(){this.encoding[this.startState].addStart()},is:function(){return D(this.key,this.states)>=0},pushState:function(K){var L=this,J=L.encoding,P=K.value.replace(/\s/g,""),I=new RegExp("["+L.startAI+L.endAI+"]","g"),M=K.index,Q={state:L.startState},N,H,O;J.addPattern(L.START);while(true){Q.index=0;O=P.charAt(M)===L.startAI?2:0;N=O>0?L.getBySeparator(P,M):L.getByLength(P,M);if(N.ai.length){H=M+O+N.id.length+N.ai.length}else{H=P.indexOf(L.startAI,M+1);if(H<0){if(M+N.ai.max+N.id.length+O<P.length){throw new Error("Separators are required after variable length identifiers")}H=P.length}}Q.value=P.substring(M,H).replace(I,"");L.validate(N,Q.value);J.pushData(Q,L.dependentStates);if(H>=P.length){break}M=H;if(Q.state!=L.startState){J[L.startState].move(Q);Q.state=L.startState}if(!N.ai.length){J.addPattern(L.START)}}K.index=K.value.length},validate:function(K,J){var I=J.substr(K.id.length),H=K.ai;if(!H.type&&!m.test(I)){throw new Error("Application identifier "+K.id+" is numeric only but contains non numeric character(s).")}if(H.type=="alphanumeric"&&!C.test(I)){throw new Error("Application identifier "+K.id+" is alphanumeric only but contains non alphanumeric character(s).")}if(H.length&&H.length!==I.length){throw new Error("Application identifier "+K.id+" must be "+H.length+" characters long.")}if(H.min&&H.min>I.length){throw new Error("Application identifier "+K.id+" must be at least "+H.min+" characters long.")}if(H.max&&H.max<I.length){throw new Error("Application identifier "+K.id+" must be at most "+H.max+" characters long.")}},getByLength:function(L,I){var K=this,M,H;for(var J=2;J<=4;J++){M=h(L,I,J);H=K.getAI(M)||K.getAI(M.substring(0,M.length-1));if(H){return{id:M,ai:H}}}K.unsupportedAIError(M)},unsupportedAIError:function(H){throw new Error(y.format("'{0}' is not a supported Application Identifier"),H)},getBySeparator:function(L,J){var K=this,N=L.indexOf(K.startAI,J),I=L.indexOf(K.endAI,N),M=L.substring(N+1,I),H=K.getAI(M)||K.getAI(M.substr(M.length-1));if(!H){K.unsupportedAIError(M)}return{ai:H,id:M}},getAI:function(M){var H=this.applicationIdentifiers,L=H.multiKey;if(H[M]){return H[M]}for(var K=0;K<L.length;K++){if(L[K].ids&&D(M,L[K].ids)>=0){return L[K].type}else{if(L[K].ranges){var I=L[K].ranges;for(var J=0;J<I.length;J++){if(I[J][0]<=M&&M<=I[J][1]){return L[K].type}}}}}},applicationIdentifiers:{"22":{max:29,type:"alphanumeric"},"402":{length:17},"7004":{max:4,type:"alphanumeric"},"242":{max:6,type:"alphanumeric"},"8020":{max:25,type:"alphanumeric"},"703":{min:3,max:30,type:"alphanumeric"},"8008":{min:8,max:12,type:"alphanumeric"},"253":{min:13,max:17,type:"alphanumeric"},"8003":{min:14,max:30,type:"alphanumeric"},multiKey:[{ids:["15","17","8005","8100"],ranges:[[11,13],[310,316],[320,336],[340,369]],type:{length:6}},{ids:["240","241","250","251","400","401","403","7002","8004","8007","8110"],ranges:[[90-99]],type:{max:30,type:"alphanumeric"}},{ids:["7001"],ranges:[[410,414]],type:{length:13}},{ids:["10","21","254","420","8002"],type:{max:20,type:"alphanumeric"}},{ids:["00","8006","8017","8018"],type:{length:18}},{ids:["01","02","8001"],type:{length:14}},{ids:["422"],ranges:[[424,426]],type:{length:3}},{ids:["20","8102"],type:{length:2}},{ids:["30","37"],type:{max:8,type:"alphanumeric"}},{ids:["390","392"],type:{max:15,type:"alphanumeric"}},{ids:["421","423"],type:{min:3,max:15,type:"alphanumeric"}},{ids:["391","393"],type:{min:3,max:18,type:"alphanumeric"}},{ids:["7003","8101"],type:{length:10}}]},START:102});var B=i.extend({init:function(H){i.fn.init.call(this,H);this._initStates()},_initStates:function(){var I=this;for(var H=0;H<I.states.length;H++){I[I.states[H]]=new e[I.states[H]](I,I.states)}},initValue:function(K,I,H){var J=this;J.pattern=[];J.value=K;J.width=I;J.height=H;J.checkSum=0;J.totalUnits=0;J.index=0;J.position=1},addData:function(){var I=this,H={value:I.value,index:0,state:""};if(I.value.length===0){return}H.state=H.previousState=I.getNextState(H,I.states);I.addStart(H);I.pushData(H,I.states);I.addCheckSum();I.addStop();I.setBaseUnit()},pushData:function(K,I){var J=this;while(true){J[K.state].pushState(K);if(K.index>=K.value.length){break}if(!K.shifted){K.previousState=K.state;K.state=J.getNextState(K,I);J[K.state].move(K)}else{var H=K.state;K.state=K.previousState;K.previousState=H;K.shifted=false}}},addStart:function(H){this[H.state].addStart(H);this.position=1},addCheckSum:function(){var H=this;H.checksum=H.checkSum%103;H.addPattern(H.checksum)},addStop:function(){this.addPattern(this.STOP)},setBaseUnit:function(){var H=this;H.baseUnit=H.width/(H.totalUnits+H.quietZoneLength)},addPattern:function(J){var I=this,L=I.characterMap[J].toString(),K;for(var H=0;H<L.length;H++){K=parseInt(L.charAt(H),10);I.pattern.push(K);I.totalUnits+=K}I.checkSum+=J*I.position++},getNextState:function(J,H){for(var I=0;I<H.length;I++){if(this[H[I]].is(J.value,J.index)){return H[I]}}this.invalidCharacterError(J.value.charAt(J.index))},characterMap:[212222,222122,222221,121223,121322,131222,122213,122312,132212,221213,221312,231212,112232,122132,122231,113222,123122,123221,223211,221132,221231,213212,223112,312131,311222,321122,321221,312212,322112,322211,212123,212321,232121,111323,131123,131321,112313,132113,132311,211313,231113,231311,112133,112331,132131,113123,113321,133121,313121,211331,231131,213113,213311,213131,311123,311321,331121,312113,312311,332111,314111,221411,431111,111224,111422,121124,121421,141122,141221,112214,112412,122114,122411,142112,142211,241211,221114,413111,241112,134111,111242,121142,121241,114212,124112,124211,411212,421112,421211,212141,214121,412121,111143,111341,131141,114113,114311,411113,411311,113141,114131,311141,411131,211412,211214,211232,2331112],STOP:106});w.code128a=B.extend({name:"Code 128 A",states:["A"]});w.code128b=B.extend({name:"Code 128 B",states:["B"]});w.code128c=B.extend({name:"Code 128 C",states:["C"]});w.code128=B.extend({name:"Code 128",states:["C","B","A","FNC4"]});w["gs1-128"]=B.extend({name:"Code GS1-128",states:["FNC1","C","B"]});var F=i.extend({initValue:function(J,H){var I=this;I.pattern=[];I.value=J;I.checkSumLength=0;I.width=H},setBaseUnit:function(){var H=this,I=7;H.baseUnit=H.width/(12*(H.value.length+H.checkSumLength)+H.quietZoneLength+I)},addData:function(){var I=this,J=I.value;I.addPattern(I.START);for(var H=0;H<J.length;H++){I.addCharacter(J.charAt(H))}if(I.options.addCheckSum){I.addCheckSum()}I.addPattern(I.STOP);I.setBaseUnit()},addCharacter:function(J){var H=this,I=H.characterMap[J];if(!I){H.invalidCharacterError(J)}H.addPattern(I)},addPattern:function(I){for(var H=0;H<I.length;H++){this.pattern.push(parseInt(I.charAt(H),10))}},addCheckSum:function(){var K=this,H=K.checkSums[K.checkSumType],J;J=H.call(K.checkSums,K.value);K.checksum=J.join("");for(var I=0;I<J.length;I++){K.checkSumLength++;K.addPattern(K.characterMap[J[I]])}},checkSums:{Modulo10:function(M){var J=[0,""],L=M.length%2,H,K,I;for(H=0;H<M.length;H++){J[(H+L)%2]+=parseInt(M.charAt(H),10)}I=J[0];K=(J[1]*2).toString();for(H=0;H<K.length;H++){I+=parseInt(K.charAt(H),10)}return[(10-I%10)%10]},Modulo11:function(N){var M=0,I=11,K=N.length,L,J;for(var H=0;H<K;H++){L=((K-H)%6||6)+1;M+=L*N.charAt(H)}J=(I-M%I)%I;if(J!=10){return[J]}return[1,0]},Modulo11Modulo10:function(J){var I=this.Modulo11(J),H;H=J+I[0];return I.concat(this.Modulo10(H))},Modulo10Modulo10:function(J){var I=this.Modulo10(J),H;H=J+I[0];return I.concat(this.Modulo10(H))}},characterMap:["12121212","12121221","12122112","12122121","12211212","12211221","12212112","12212121","21121212","21121221"],START:"21",STOP:"121",checkSumType:""});w.msimod10=F.extend({name:"MSI Modulo10",checkSumType:"Modulo10"});w.msimod11=F.extend({name:"MSI Modulo11",checkSumType:"Modulo11"});w.msimod1110=F.extend({name:"MSI Modulo11 Modulo10",checkSumType:"Modulo11Modulo10"});w.msimod1010=F.extend({name:"MSI Modulo10 Modulo10",checkSumType:"Modulo10Modulo10"});w.code11=i.extend({name:"Code 11",cCheckSumTotal:10,kCheckSumTotal:9,kCheckSumMinLength:10,checkSumMod:11,DASH_VALUE:10,DASH:"-",START:"112211",STOP:"11221",initValue:function(J,H){var I=this;I.pattern=[];I.value=J;I.width=H;I.totalUnits=0},addData:function(){var I=this;var J=I.value;I.addPattern(I.START);for(var H=0;H<J.length;H++){I.addCharacter(J.charAt(H))}if(I.options.addCheckSum){I.addCheckSum()}I.addPattern(I.STOP);I.setBaseUnit()},setBaseUnit:function(){var H=this;H.baseUnit=H.width/(H.totalUnits+H.quietZoneLength)},addCheckSum:function(){var J=this,L=J.value,I=L.length,H;H=J.getWeightedSum(L,I,J.cCheckSumTotal)%J.checkSumMod;J.checksum=H+"";J.addPattern(J.characterMap[H]);I++;if(I>=J.kCheckSumMinLength){var K=(H+J.getWeightedSum(L,I,J.kCheckSumTotal))%J.checkSumMod;J.checksum+=K;J.addPattern(J.characterMap[K])}},getWeightedSum:function(L,J,I){var K=0;for(var H=0;H<L.length;H++){K+=this.weightedValue(this.getValue(L.charAt(H)),J,H,I)}return K},weightedValue:function(L,J,H,I){var K=(J-H)%I||I;return K*L},getValue:function(I){var H=this;if(!isNaN(I)){return parseInt(I,10)}else{if(I!==H.DASH){H.invalidCharacterError(I)}}return H.DASH_VALUE},addCharacter:function(K){var H=this,J=H.getValue(K),I=H.characterMap[J];H.addPattern(I)},addPattern:function(J){var I;for(var H=0;H<J.length;H++){I=parseInt(J.charAt(H),10);this.pattern.push(I);this.totalUnits+=I}},characterMap:["111121","211121","121121","221111","112121","212111","122111","111221","211211","211111","112111"],options:{addCheckSum:true}});w.postnet=i.extend({name:"Postnet",START:"2",VALID_CODE_LENGTHS:[5,9,11],DIGIT_SEPARATOR:"-",initValue:function(K,I,H){var J=this;J.height=H;J.width=I;J.baseHeight=H/2;J.value=K.replace(new RegExp(J.DIGIT_SEPARATOR,"g"),"");J.pattern=[];J.validate(J.value);J.checkSum=0;J.setBaseUnit()},addData:function(){var I=this,J=I.value;I.addPattern(I.START);for(var H=0;H<J.length;H++){I.addCharacter(J.charAt(H))}if(I.options.addCheckSum){I.addCheckSum()}I.addPattern(I.START);I.pattern.pop()},addCharacter:function(J){var H=this,I=H.characterMap[J];H.checkSum+=parseInt(J,10);H.addPattern(I)},addCheckSum:function(){var H=this;H.checksum=(10-H.checkSum%10)%10;H.addCharacter(H.checksum)},setBaseUnit:function(){var H=this,I=3;H.baseUnit=H.width/((H.value.length+1)*10+I+H.quietZoneLength)},validate:function(I){var H=this;if(!m.test(I)){H.invalidCharacterError(I.match(/[^0-9]/)[0])}if(D(I.length,H.VALID_CODE_LENGTHS)<0){throw new Error("Invalid value length. Valid lengths for the Postnet symbology are "+H.VALID_CODE_LENGTHS.join(","))}},addPattern:function(K){var J=this,I;for(var H=0;H<K.length;H++){I=J.height-J.baseHeight*K.charAt(H);J.pattern.push({width:1,y1:I,y2:J.height});J.pattern.push(1)}},characterMap:["22111","11122","11212","11221","12112","12121","12211","21112","21121","21211"]});w.ean13=i.extend({initValue:function(K,I,H){K+="";if(K.length!=12||/\D/.test(K)){throw new Error('The value of the "EAN13" encoding should be 12 symbols')}var J=this;J.pattern=[];J.options.height=H;J.baseUnit=I/(95+J.quietZoneLength);J.value=K;J.checksum=J.calculateChecksum();J.leftKey=K[0];J.leftPart=K.substr(1,6);J.rightPart=K.substr(7)+J.checksum},addData:function(){var H=this;H.addPieces(H.characterMap.start);H.addSide(H.leftPart,H.leftKey);H.addPieces(H.characterMap.middle);H.addSide(H.rightPart);H.addPieces(H.characterMap.start)},addSide:function(J,I){var K=this;for(var H=0;H<J.length;H++){if(I&&parseInt(K.keyTable[I].charAt(H),10)){K.addPieces(Array.prototype.slice.call(K.characterMap.digits[J.charAt(H)]).reverse(),true)}else{K.addPieces(K.characterMap.digits[J.charAt(H)],true)}}},addPieces:function(K,H){var J=this;for(var I=0;I<K.length;I++){if(H){J.pattern.push({y1:0,y2:J.options.height*0.95,width:K[I]})}else{J.pattern.push(K[I])}}},calculateChecksum:function(){var K=0,L=0,J=this.value.split("").reverse().join("");for(var H=0;H<J.length;H++){if(H%2){L+=parseInt(J.charAt(H),10)}else{K+=parseInt(J.charAt(H),10)}}var I=(10-(3*K+L)%10)%10;return I},keyTable:["000000","001011","001101","001110","010011","011001","011100","010101","010110","011010"],characterMap:{digits:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2]],start:[1,1,1],middle:[1,1,1,1,1]}});w.ean8=w.ean13.extend({initValue:function(K,I,H){var J=this;if(K.length!=7||/\D/.test(K)){throw new Error("Invalid value provided")}J.value=K;J.options.height=H;J.checksum=J.calculateChecksum(J.value);J.leftPart=J.value.substr(0,4);J.rightPart=J.value.substr(4)+J.checksum;J.pattern=[];J.baseUnit=I/(67+J.quietZoneLength)}});var s=g.extend({init:function(I,H){var J=this;g.fn.init.call(J,I,H);J.element=l(I);J.wrapper=J.element;J.element.addClass("k-barcode").css("display","block");J.surfaceWrap=l("<div />").css("position","relative").appendTo(this.element);J.surface=r.Surface.create(J.surfaceWrap,{type:J.options.renderAs});J.setOptions(H)},setOptions:function(H){var I=this;I.type=(H.type||I.options.type).toLowerCase();if(I.type=="upca"){I.type="ean13";H.value="0"+H.value}if(I.type=="upce"){I.type="ean8";H.value="0"+H.value}if(!w[I.type]){throw new Error("Encoding "+I.type+"is not supported.")}I.encoding=new w[I.type]();I.options=E(true,I.options,H);if(!f(H.value)){return}I.redraw()},redraw:function(){var H=this._getSize();this.surface.clear();this.surface.setSize({width:H.width,height:H.height});this.createVisual();this.surface.draw(this.visual)},getSize:function(){return y.dimensions(this.element)},_resize:function(){this.redraw()},createVisual:function(){this.visual=this._render()},_render:function(){var L=this,U=L.options,O=U.value,R=U.text,J=p.getSpacing(R.margin),T=L._getSize(),K=U.border||{},I=L.encoding,M=new k(0,0,T.width,T.height).unpad(K.width).unpad(U.padding),Q=M.height(),S,P,N;var H=new r.Group();L.contentBox=M;H.append(L._getBackground(T));if(R.visible){N=r.util.measureText(O,{font:R.font}).height;Q-=N+J.top+J.bottom}S=I.encode(O,M.width(),Q);if(R.visible){P=O;if(U.checksum&&f(I.checksum)){P+=" "+I.checksum}H.append(L._getText(P))}L.barHeight=Q;this._bandsGroup=this._getBands(S.pattern,S.baseUnit);H.append(this._bandsGroup);return H},exportVisual:function(){return this._render()},_getSize:function(){var J=this,I=J.element,H=new z.Size(j,A);if(I.width()>0){H.width=I.width()}if(I.height()>0){H.height=I.height()}if(J.options.width){H.width=J.options.width}if(J.options.height){H.height=J.options.height}return H},value:function(I){var H=this;if(!f(I)){return H.options.value}H.options.value=I+"";H.redraw()},_getBands:function(L,O){var K=this,M=K.contentBox,J=M.x1,H,Q;var P=new r.Group();for(var I=0;I<L.length;I++){Q=x(L[I])?L[I]:{width:L[I],y1:0,y2:K.barHeight};H=Q.width*O;if(I%2){var N=z.Rect.fromPoints(new z.Point(J,Q.y1+M.y1),new z.Point(J+H,Q.y2+M.y1));var R=r.Path.fromRect(N,{fill:{color:K.options.color},stroke:null});P.append(R)}J+=H}return P},_getBackground:function(J){var L=this,I=L.options,H=I.border||{};var K=new k(0,0,J.width,J.height).unpad(H.width/2);var M=r.Path.fromRect(K.toRect(),{fill:{color:I.background},stroke:{color:H.width?H.color:"",width:H.width,dashType:H.dashType}});return M},_getText:function(J){var I=this,H=I.options.text,K=I._textbox=new u(J,{font:H.font,color:H.color,align:"center",vAlign:"bottom",margin:H.margin});K.reflow(I.contentBox);K.renderVisual();return K.visual},options:{name:"Barcode",renderAs:"svg",value:"",type:"code39",checksum:false,width:0,height:0,color:"black",background:"white",text:{visible:true,font:"16px Consolas, Monaco, Sans Mono, monospace, sans-serif",color:"black",margin:{top:0,bottom:0,left:0,right:0}},border:{width:0,dashType:"solid",color:"black"},padding:{top:0,bottom:0,left:0,right:0}}});p.ExportMixin.extend(s.fn);p.ui.plugin(s);y.deepExtend(p,{encodings:w,Encoding:i})}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.dataviz.qrcode",["kendo.dataviz.core","kendo.drawing"],a)}(function(){var a={id:"dataviz.qrcode",name:"QRCode",category:"dataviz",description:"QRCode widget.",depends:["dataviz.core","drawing"]};(function(aA,x){var r=window.kendo,aa=aA.extend,aj=r.drawing,Y=r.dataviz,k=r.ui.Widget,v=Y.Box2D,H="0000",aE="numeric",O="alphanumeric",aJ="byte",ak={"1":0},az={"0":1},E=[[1,0],[1,25,0]],ax={15:20,16:20,18:24,19:24,22:20,24:22,26:24,28:20,30:20,31:24,32:28,33:24,36:18,37:22,39:20,40:24},ao=[{L:{groups:[[1,19]],totalDataCodewords:19,errorCodewordsPerBlock:7},M:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:10},Q:{groups:[[1,13]],totalDataCodewords:13,errorCodewordsPerBlock:13},H:{groups:[[1,9]],totalDataCodewords:9,errorCodewordsPerBlock:17}},{L:{groups:[[1,34]],totalDataCodewords:34,errorCodewordsPerBlock:10},M:{groups:[[1,28]],totalDataCodewords:28,errorCodewordsPerBlock:16},Q:{groups:[[1,22]],totalDataCodewords:22,errorCodewordsPerBlock:22},H:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:28}},{L:{groups:[[1,55]],totalDataCodewords:55,errorCodewordsPerBlock:15},M:{groups:[[1,44]],totalDataCodewords:44,errorCodewordsPerBlock:26},Q:{groups:[[2,17]],totalDataCodewords:34,errorCodewordsPerBlock:18},H:{groups:[[2,13]],totalDataCodewords:26,errorCodewordsPerBlock:22}},{L:{groups:[[1,80]],totalDataCodewords:80,errorCodewordsPerBlock:20},M:{groups:[[2,32]],totalDataCodewords:64,errorCodewordsPerBlock:18},Q:{groups:[[2,24]],totalDataCodewords:48,errorCodewordsPerBlock:26},H:{groups:[[4,9]],totalDataCodewords:36,errorCodewordsPerBlock:16}},{L:{groups:[[1,108]],totalDataCodewords:108,errorCodewordsPerBlock:26},M:{groups:[[2,43]],totalDataCodewords:86,errorCodewordsPerBlock:24},Q:{groups:[[2,15],[2,16]],totalDataCodewords:62,errorCodewordsPerBlock:18},H:{groups:[[2,11],[2,12]],totalDataCodewords:46,errorCodewordsPerBlock:22}},{L:{groups:[[2,68]],totalDataCodewords:136,errorCodewordsPerBlock:18},M:{groups:[[4,27]],totalDataCodewords:108,errorCodewordsPerBlock:16},Q:{groups:[[4,19]],totalDataCodewords:76,errorCodewordsPerBlock:24},H:{groups:[[4,15]],totalDataCodewords:60,errorCodewordsPerBlock:28}},{L:{groups:[[2,78]],totalDataCodewords:156,errorCodewordsPerBlock:20},M:{groups:[[4,31]],totalDataCodewords:124,errorCodewordsPerBlock:18},Q:{groups:[[2,14],[4,15]],totalDataCodewords:88,errorCodewordsPerBlock:18},H:{groups:[[4,13],[1,14]],totalDataCodewords:66,errorCodewordsPerBlock:26}},{L:{groups:[[2,97]],totalDataCodewords:194,errorCodewordsPerBlock:24},M:{groups:[[2,38],[2,39]],totalDataCodewords:154,errorCodewordsPerBlock:22},Q:{groups:[[4,18],[2,19]],totalDataCodewords:110,errorCodewordsPerBlock:22},H:{groups:[[4,14],[2,15]],totalDataCodewords:86,errorCodewordsPerBlock:26}},{L:{groups:[[2,116]],totalDataCodewords:232,errorCodewordsPerBlock:30},M:{groups:[[3,36],[2,37]],totalDataCodewords:182,errorCodewordsPerBlock:22},Q:{groups:[[4,16],[4,17]],totalDataCodewords:132,errorCodewordsPerBlock:20},H:{groups:[[4,12],[4,13]],totalDataCodewords:100,errorCodewordsPerBlock:24}},{L:{groups:[[2,68],[2,69]],totalDataCodewords:274,errorCodewordsPerBlock:18},M:{groups:[[4,43],[1,44]],totalDataCodewords:216,errorCodewordsPerBlock:26},Q:{groups:[[6,19],[2,20]],totalDataCodewords:154,errorCodewordsPerBlock:24},H:{groups:[[6,15],[2,16]],totalDataCodewords:122,errorCodewordsPerBlock:28}},{L:{groups:[[4,81]],totalDataCodewords:324,errorCodewordsPerBlock:20},M:{groups:[[1,50],[4,51]],totalDataCodewords:254,errorCodewordsPerBlock:30},Q:{groups:[[4,22],[4,23]],totalDataCodewords:180,errorCodewordsPerBlock:28},H:{groups:[[3,12],[8,13]],totalDataCodewords:140,errorCodewordsPerBlock:24}},{L:{groups:[[2,92],[2,93]],totalDataCodewords:370,errorCodewordsPerBlock:24},M:{groups:[[6,36],[2,37]],totalDataCodewords:290,errorCodewordsPerBlock:22},Q:{groups:[[4,20],[6,21]],totalDataCodewords:206,errorCodewordsPerBlock:26},H:{groups:[[7,14],[4,15]],totalDataCodewords:158,errorCodewordsPerBlock:28}},{L:{groups:[[4,107]],totalDataCodewords:428,errorCodewordsPerBlock:26},M:{groups:[[8,37],[1,38]],totalDataCodewords:334,errorCodewordsPerBlock:22},Q:{groups:[[8,20],[4,21]],totalDataCodewords:244,errorCodewordsPerBlock:24},H:{groups:[[12,11],[4,12]],totalDataCodewords:180,errorCodewordsPerBlock:22}},{L:{groups:[[3,115],[1,116]],totalDataCodewords:461,errorCodewordsPerBlock:30},M:{groups:[[4,40],[5,41]],totalDataCodewords:365,errorCodewordsPerBlock:24},Q:{groups:[[11,16],[5,17]],totalDataCodewords:261,errorCodewordsPerBlock:20},H:{groups:[[11,12],[5,13]],totalDataCodewords:197,errorCodewordsPerBlock:24}},{L:{groups:[[5,87],[1,88]],totalDataCodewords:523,errorCodewordsPerBlock:22},M:{groups:[[5,41],[5,42]],totalDataCodewords:415,errorCodewordsPerBlock:24},Q:{groups:[[5,24],[7,25]],totalDataCodewords:295,errorCodewordsPerBlock:30},H:{groups:[[11,12],[7,13]],totalDataCodewords:223,errorCodewordsPerBlock:24}},{L:{groups:[[5,98],[1,99]],totalDataCodewords:589,errorCodewordsPerBlock:24},M:{groups:[[7,45],[3,46]],totalDataCodewords:453,errorCodewordsPerBlock:28},Q:{groups:[[15,19],[2,20]],totalDataCodewords:325,errorCodewordsPerBlock:24},H:{groups:[[3,15],[13,16]],totalDataCodewords:253,errorCodewordsPerBlock:30}},{L:{groups:[[1,107],[5,108]],totalDataCodewords:647,errorCodewordsPerBlock:28},M:{groups:[[10,46],[1,47]],totalDataCodewords:507,errorCodewordsPerBlock:28},Q:{groups:[[1,22],[15,23]],totalDataCodewords:367,errorCodewordsPerBlock:28},H:{groups:[[2,14],[17,15]],totalDataCodewords:283,errorCodewordsPerBlock:28}},{L:{groups:[[5,120],[1,121]],totalDataCodewords:721,errorCodewordsPerBlock:30},M:{groups:[[9,43],[4,44]],totalDataCodewords:563,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[1,23]],totalDataCodewords:397,errorCodewordsPerBlock:28},H:{groups:[[2,14],[19,15]],totalDataCodewords:313,errorCodewordsPerBlock:28}},{L:{groups:[[3,113],[4,114]],totalDataCodewords:795,errorCodewordsPerBlock:28},M:{groups:[[3,44],[11,45]],totalDataCodewords:627,errorCodewordsPerBlock:26},Q:{groups:[[17,21],[4,22]],totalDataCodewords:445,errorCodewordsPerBlock:26},H:{groups:[[9,13],[16,14]],totalDataCodewords:341,errorCodewordsPerBlock:26}},{L:{groups:[[3,107],[5,108]],totalDataCodewords:861,errorCodewordsPerBlock:28},M:{groups:[[3,41],[13,42]],totalDataCodewords:669,errorCodewordsPerBlock:26},Q:{groups:[[15,24],[5,25]],totalDataCodewords:485,errorCodewordsPerBlock:30},H:{groups:[[15,15],[10,16]],totalDataCodewords:385,errorCodewordsPerBlock:28}},{L:{groups:[[4,116],[4,117]],totalDataCodewords:932,errorCodewordsPerBlock:28},M:{groups:[[17,42]],totalDataCodewords:714,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[6,23]],totalDataCodewords:512,errorCodewordsPerBlock:28},H:{groups:[[19,16],[6,17]],totalDataCodewords:406,errorCodewordsPerBlock:30}},{L:{groups:[[2,111],[7,112]],totalDataCodewords:1006,errorCodewordsPerBlock:28},M:{groups:[[17,46]],totalDataCodewords:782,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[16,25]],totalDataCodewords:568,errorCodewordsPerBlock:30},H:{groups:[[34,13]],totalDataCodewords:442,errorCodewordsPerBlock:24}},{L:{groups:[[4,121],[5,122]],totalDataCodewords:1094,errorCodewordsPerBlock:30},M:{groups:[[4,47],[14,48]],totalDataCodewords:860,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[14,25]],totalDataCodewords:614,errorCodewordsPerBlock:30},H:{groups:[[16,15],[14,16]],totalDataCodewords:464,errorCodewordsPerBlock:30}},{L:{groups:[[6,117],[4,118]],totalDataCodewords:1174,errorCodewordsPerBlock:30},M:{groups:[[6,45],[14,46]],totalDataCodewords:914,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[16,25]],totalDataCodewords:664,errorCodewordsPerBlock:30},H:{groups:[[30,16],[2,17]],totalDataCodewords:514,errorCodewordsPerBlock:30}},{L:{groups:[[8,106],[4,107]],totalDataCodewords:1276,errorCodewordsPerBlock:26},M:{groups:[[8,47],[13,48]],totalDataCodewords:1000,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[22,25]],totalDataCodewords:718,errorCodewordsPerBlock:30},H:{groups:[[22,15],[13,16]],totalDataCodewords:538,errorCodewordsPerBlock:30}},{L:{groups:[[10,114],[2,115]],totalDataCodewords:1370,errorCodewordsPerBlock:28},M:{groups:[[19,46],[4,47]],totalDataCodewords:1062,errorCodewordsPerBlock:28},Q:{groups:[[28,22],[6,23]],totalDataCodewords:754,errorCodewordsPerBlock:28},H:{groups:[[33,16],[4,17]],totalDataCodewords:596,errorCodewordsPerBlock:30}},{L:{groups:[[8,122],[4,123]],totalDataCodewords:1468,errorCodewordsPerBlock:30},M:{groups:[[22,45],[3,46]],totalDataCodewords:1128,errorCodewordsPerBlock:28},Q:{groups:[[8,23],[26,24]],totalDataCodewords:808,errorCodewordsPerBlock:30},H:{groups:[[12,15],[28,16]],totalDataCodewords:628,errorCodewordsPerBlock:30}},{L:{groups:[[3,117],[10,118]],totalDataCodewords:1531,errorCodewordsPerBlock:30},M:{groups:[[3,45],[23,46]],totalDataCodewords:1193,errorCodewordsPerBlock:28},Q:{groups:[[4,24],[31,25]],totalDataCodewords:871,errorCodewordsPerBlock:30},H:{groups:[[11,15],[31,16]],totalDataCodewords:661,errorCodewordsPerBlock:30}},{L:{groups:[[7,116],[7,117]],totalDataCodewords:1631,errorCodewordsPerBlock:30},M:{groups:[[21,45],[7,46]],totalDataCodewords:1267,errorCodewordsPerBlock:28},Q:{groups:[[1,23],[37,24]],totalDataCodewords:911,errorCodewordsPerBlock:30},H:{groups:[[19,15],[26,16]],totalDataCodewords:701,errorCodewordsPerBlock:30}},{L:{groups:[[5,115],[10,116]],totalDataCodewords:1735,errorCodewordsPerBlock:30},M:{groups:[[19,47],[10,48]],totalDataCodewords:1373,errorCodewordsPerBlock:28},Q:{groups:[[15,24],[25,25]],totalDataCodewords:985,errorCodewordsPerBlock:30},H:{groups:[[23,15],[25,16]],totalDataCodewords:745,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[3,116]],totalDataCodewords:1843,errorCodewordsPerBlock:30},M:{groups:[[2,46],[29,47]],totalDataCodewords:1455,errorCodewordsPerBlock:28},Q:{groups:[[42,24],[1,25]],totalDataCodewords:1033,errorCodewordsPerBlock:30},H:{groups:[[23,15],[28,16]],totalDataCodewords:793,errorCodewordsPerBlock:30}},{L:{groups:[[17,115]],totalDataCodewords:1955,errorCodewordsPerBlock:30},M:{groups:[[10,46],[23,47]],totalDataCodewords:1541,errorCodewordsPerBlock:28},Q:{groups:[[10,24],[35,25]],totalDataCodewords:1115,errorCodewordsPerBlock:30},H:{groups:[[19,15],[35,16]],totalDataCodewords:845,errorCodewordsPerBlock:30}},{L:{groups:[[17,115],[1,116]],totalDataCodewords:2071,errorCodewordsPerBlock:30},M:{groups:[[14,46],[21,47]],totalDataCodewords:1631,errorCodewordsPerBlock:28},Q:{groups:[[29,24],[19,25]],totalDataCodewords:1171,errorCodewordsPerBlock:30},H:{groups:[[11,15],[46,16]],totalDataCodewords:901,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[6,116]],totalDataCodewords:2191,errorCodewordsPerBlock:30},M:{groups:[[14,46],[23,47]],totalDataCodewords:1725,errorCodewordsPerBlock:28},Q:{groups:[[44,24],[7,25]],totalDataCodewords:1231,errorCodewordsPerBlock:30},H:{groups:[[59,16],[1,17]],totalDataCodewords:961,errorCodewordsPerBlock:30}},{L:{groups:[[12,121],[7,122]],totalDataCodewords:2306,errorCodewordsPerBlock:30},M:{groups:[[12,47],[26,48]],totalDataCodewords:1812,errorCodewordsPerBlock:28},Q:{groups:[[39,24],[14,25]],totalDataCodewords:1286,errorCodewordsPerBlock:30},H:{groups:[[22,15],[41,16]],totalDataCodewords:986,errorCodewordsPerBlock:30}},{L:{groups:[[6,121],[14,122]],totalDataCodewords:2434,errorCodewordsPerBlock:30},M:{groups:[[6,47],[34,48]],totalDataCodewords:1914,errorCodewordsPerBlock:28},Q:{groups:[[46,24],[10,25]],totalDataCodewords:1354,errorCodewordsPerBlock:30},H:{groups:[[2,15],[64,16]],totalDataCodewords:1054,errorCodewordsPerBlock:30}},{L:{groups:[[17,122],[4,123]],totalDataCodewords:2566,errorCodewordsPerBlock:30},M:{groups:[[29,46],[14,47]],totalDataCodewords:1992,errorCodewordsPerBlock:28},Q:{groups:[[49,24],[10,25]],totalDataCodewords:1426,errorCodewordsPerBlock:30},H:{groups:[[24,15],[46,16]],totalDataCodewords:1096,errorCodewordsPerBlock:30}},{L:{groups:[[4,122],[18,123]],totalDataCodewords:2702,errorCodewordsPerBlock:30},M:{groups:[[13,46],[32,47]],totalDataCodewords:2102,errorCodewordsPerBlock:28},Q:{groups:[[48,24],[14,25]],totalDataCodewords:1502,errorCodewordsPerBlock:30},H:{groups:[[42,15],[32,16]],totalDataCodewords:1142,errorCodewordsPerBlock:30}},{L:{groups:[[20,117],[4,118]],totalDataCodewords:2812,errorCodewordsPerBlock:30},M:{groups:[[40,47],[7,48]],totalDataCodewords:2216,errorCodewordsPerBlock:28},Q:{groups:[[43,24],[22,25]],totalDataCodewords:1582,errorCodewordsPerBlock:30},H:{groups:[[10,15],[67,16]],totalDataCodewords:1222,errorCodewordsPerBlock:30}},{L:{groups:[[19,118],[6,119]],totalDataCodewords:2956,errorCodewordsPerBlock:30},M:{groups:[[18,47],[31,48]],totalDataCodewords:2334,errorCodewordsPerBlock:28},Q:{groups:[[34,24],[34,25]],totalDataCodewords:1666,errorCodewordsPerBlock:30},H:{groups:[[20,15],[61,16]],totalDataCodewords:1276,errorCodewordsPerBlock:30}}],aG=[1,0,1,1,1],u=[1,0,1],ac={L:"01",M:"00",Q:"11",H:"10"},ag="101010000010010",af="10100110111",S="1111100100101",at=["11101100","00010001"],aq=93,T=[function(aM,aL){return(aM+aL)%2===0},function(aL){return aL%2===0},function(aM,aL){return aL%3===0},function(aM,aL){return(aM+aL)%3===0},function(aM,aL){return(Math.floor(aM/2)+Math.floor(aL/3))%2===0},function(aM,aL){return aM*aL%2+aM*aL%3===0},function(aM,aL){return(aM*aL%2+aM*aL%3)%2===0},function(aM,aL){return((aM+aL)%2+aM*aL%3)%2===0}],ay=/^\d+/,aH="A-Z0-9 $%*+./:-",aD="A-Z $%*+./:-",am=new RegExp("^["+aD+"]+"),P=new RegExp("^["+aH+"]+"),F=new RegExp("^[^"+aH+"]+"),aK=8,g=5,X=8,ai=17,M=9,aF=16,K=Math.round;function q(aL){return parseInt(aL,2)}function al(aN,aM){var aL=Number(aN).toString(2);if(aL.length<aM){aL=new Array(aM-aL.length+1).join(0)+aL}return aL}function L(aN,aO){var aM=[],aL=0;while(aL<aN.length){aM.push(aN.substring(aL,aL+aO));aL+=aO}return aM}var z=r.Class.extend({getVersionIndex:function(aL){if(aL<10){return 0}else{if(aL>26){return 2}}return 1},getBitsCharacterCount:function(aL){var aM=this;return aM.bitsInCharacterCount[aM.getVersionIndex(aL||40)]},getModeCountString:function(aM,aL){var aN=this;return aN.modeIndicator+al(aM,aN.getBitsCharacterCount(aL))},encode:function(){},getStringBitsLength:function(){},getValue:function(){},modeIndicator:"",bitsInCharacterCount:[]});var t={};t[aE]=z.extend({bitsInCharacterCount:[10,12,14],modeIndicator:"0001",getValue:function(aL){return parseInt(aL,10)},encode:function(aQ,aM){var aP=this,aO=L(aQ,3),aL=aP.getModeCountString(aQ.length,aM);for(var aN=0;aN<aO.length-1;aN++){aL+=al(aO[aN],10)}return aL+al(aO[aN],1+3*aO[aN].length)},getStringBitsLength:function(aM,aL){var aN=aM%3;return 4+this.getBitsCharacterCount(aL)+10*Math.floor(aM/3)+3*aN+(aN===0?0:1)}});t[O]=z.extend({characters:{"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35," ":36,"$":37,"%":38,"*":39,"+":40,"-":41,".":42,"/":43,":":44},bitsInCharacterCount:[9,11,13],modeIndicator:"0010",getValue:function(aL){return this.characters[aL]},encode:function(aR,aM){var aQ=this,aP=L(aR,2),aL=aQ.getModeCountString(aR.length,aM),aO;for(var aN=0;aN<aP.length-1;aN++){aO=45*aQ.getValue(aP[aN].charAt(0))+aQ.getValue(aP[aN].charAt(1));aL+=al(aO,11)}aO=aP[aN].length==2?45*aQ.getValue(aP[aN].charAt(0))+aQ.getValue(aP[aN].charAt(1)):aQ.getValue(aP[aN].charAt(0));return aL+al(aO,1+5*aP[aN].length)},getStringBitsLength:function(aM,aL){return 4+this.getBitsCharacterCount(aL)+11*Math.floor(aM/2)+6*(aM%2)}});t[aJ]=z.extend({bitsInCharacterCount:[8,16,16],modeIndicator:"0100",getValue:function(aM){var aL=aM.charCodeAt(0);if(aL<=127||160<=aL&&aL<=255){return aL}else{throw new Error("Unsupported character: "+aM)}},encode:function(aP,aM){var aO=this,aL=aO.getModeCountString(aP.length,aM);for(var aN=0;aN<aP.length;aN++){aL+=al(aO.getValue(aP.charAt(aN)),8)}return aL},getStringBitsLength:function(aM,aL){return 4+this.getBitsCharacterCount(aL)+8*aM}});var n={};for(var Z in t){n[Z]=new t[Z]()}var o=function(aL){var aP=this,aQ=aL.length-1,aO=aL.length-1,aN=aO,aM=-1,aR=0;aP.move=function(){aQ+=aM*aR;aR^=1;aO=aN-aR};aP.getNextCell=function(){while(aL[aQ][aO]!==x){aP.move();if(aQ<0||aQ>=aL.length){aM=-aM;aN-=aN!=8?2:3;aO=aN;aQ=aM<0?aL.length-1:0}}return{row:aQ,column:aO}};aP.getNextRemainderCell=function(){aP.move();if(aL[aQ][aO]===x){return{row:aQ,column:aO}}}};function l(aM,aO,aL,aP){for(var aN=0;aN<aM.length;aN++){aM[aN][aL][aP]=aO}}function D(aM,aO,aL,aP){for(var aN=0;aN<T.length;aN++){aM[aN][aL][aP]=T[aN](aL,aP)?aO^1:parseInt(aO,10)}}var av=function(aR,aL){var aT=new o(aR[0]),aO,aM,aS;for(var aN=0;aN<aL.length;aN++){aO=aL[aN];aM=0;while(aO.length>0){for(var aQ=0;aQ<aO.length;aQ++){for(var aP=0;aP<8;aP++){aS=aT.getNextCell();D(aR,aO[aQ][aM].charAt(aP),aS.row,aS.column)}}aM++;while(aO[0]&&aM==aO[0].length){aO.splice(0,1)}}}while(aS=aT.getNextRemainderCell()){D(aR,0,aS.row,aS.column)}};var ab=function(aN,aO){var aP=aO*8,aM=0,aL=0;while(aN.length<aP&&aM<H.length){aN+=H.charAt(aM++)}if(aN.length%8!==0){aN+=new Array(9-aN.length%8).join("0")}while(aN.length<aP){aN+=at[aL];aL^=1}return aN};function h(){var aL;for(var aM=1;aM<255;aM++){aL=az[aM-1]*2;if(aL>255){aL=aL^285}az[aM]=aL;ak[aL]=aM}aL=az[aM-1]*2^285;az[aM]=aL;az[-1]=0}var d=function(aN,aP){var aM=[],aL=aN.length-2;for(var aO=aL;aO>=0;aO--){aM[aO]=aN[aO]^aP[aO]}return aM};var e=function(aM,aP){var aL=[];for(var aO=0;aO<aM.length;aO++){for(var aN=0;aN<aP.length;aN++){if(aL[aO+aN]===x){aL[aO+aN]=(aM[aO]+(aP[aN]>=0?aP[aN]:0))%255}else{aL[aO+aN]=ak[az[aL[aO+aN]]^az[(aM[aO]+aP[aN])%255]]}}}return aL};function f(){var aN=68;for(var aM=2;aM<=aN;aM++){var aL=E[aM-1],aO=[aM,0];E[aM]=e(aL,aO)}}h();f();function j(aN,aO){var aM=[],aL=aN.length-1;do{aM[aL]=az[(aN[aL]+aO)%255];aL--}while(aN[aL]!==x);return aM}var y=function(aN,aP){var aO=E[aP-1],aT=new Array(aP).concat(aN),aL=new Array(aT.length-aO.length).concat(aO),aQ=aN.length,aS=[],aM,aR;for(aR=0;aR<aQ;aR++){aM=j(aL,ak[aT[aT.length-1]]);aL.splice(0,1);aT=d(aM,aT)}for(aR=aT.length-1;aR>=0;aR--){aS[aP-1-aR]=al(aT[aR],8)}return aS};var R=function(aX,aN){var aQ=0,aM=[],aW=[],aS,aT=aN.groups,aV,aU,aL,aR;for(var aY=0;aY<aT.length;aY++){aU=aT[aY][0];for(var aP=0;aP<aU;aP++){aV=aT[aY][1];aS=[];aL=[];for(var aO=1;aO<=aV;aO++){aR=aX.substring(aQ,aQ+8);aS.push(aR);aL[aV-aO]=q(aR);aQ+=8}aM.push(aS);aW.push(y(aL,aN.errorCodewordsPerBlock))}}return[aM,aW]};var aC=function(aU,aR,aO,aQ,aX){var aV=ay.exec(aU),aM=aV?aV[0]:"",aP=am.exec(aU),aW=aP?aP[0]:"",aT=P.exec(aU),aL=aT?aT[0]:"",aS,aN;if(aM&&(aM.length>=aR||aU.length==aM.length||aM.length>=aO&&!P.test(aU.charAt(aM.length)))){aS=aE;aN=aM}else{if(aL&&(aU.length==aL.length||aL.length>=aQ||aX==O)){aS=O;aN=aM||aW}else{aS=aJ;if(aL){aN=aL+F.exec(aU.substring(aL.length))[0]}else{aN=F.exec(aU)[0]}}}return{mode:aS,modeString:aN}};var N=function(aP){var aO=[],aN,aL=0;aO.push(aC(aP,aK,g,X,aN));aN=aO[0].mode;aP=aP.substr(aO[0].modeString.length);while(aP.length>0){var aM=aC(aP,ai,M,aF,aN);if(aM.mode!=aN){aN=aM.mode;aO.push(aM);aL++}else{aO[aL].modeString+=aM.modeString}aP=aP.substr(aM.modeString.length)}return aO};var Q=function(aN){var aM=0,aO;for(var aL=0;aL<aN.length;aL++){aO=n[aN[aL].mode];aM+=aO.getStringBitsLength(aN[aL].modeString.length)}return Math.ceil(aM/8)};var b=function(aO,aN){var aL=0,aP=ao.length-1,aM=Math.floor(ao.length/2);do{if(aO<ao[aM][aN].totalDataCodewords){aP=aM}else{aL=aM}aM=aL+Math.floor((aP-aL)/2)}while(aP-aL>1);if(aO<=ao[aL][aN].totalDataCodewords){return aM+1}return aP+1};var p=function(aO,aL){var aN="",aP;for(var aM=0;aM<aO.length;aM++){aP=n[aO[aM].mode];aN+=aP.encode(aO[aM].modeString,aL)}return aN};var W=function(aP){var aM=q(aP),aO,aL="";if(aM===0){return"101010000010010"}else{aO=aB(q(aP),af,15)}for(var aN=0;aN<aO.length;aN++){aL+=aO.charAt(aN)^ag.charAt(aN)}return aL};var aB=function(aQ,aM,aR){var aO=q(aM),aS=aM.length-1,aL=aQ<<aS,aN=aR-aS,aP=al(aQ,aN),aT=s(aL,aO);aT=aP+al(aT,aS);return aT};var s=function(aO,aM){var aN=aM.toString(2).length,aL=aO.toString(2).length;do{aO^=aM<<aL-aN;aL=aO.toString(2).length}while(aL>=aN);return aO};function J(aM,aL){return parseInt(aM.charAt(aL),10)}var A=function(aL){var aO=[],aN=17+4*aL;for(var aP=0;aP<T.length;aP++){aO[aP]=new Array(aN);for(var aM=0;aM<aN;aM++){aO[aP][aM]=new Array(aN)}}return aO};var c=function(aP,aN){var aO=aP[0],aM,aR,aL=0,aQ=aN.length;for(aM=0,aR=8;aM<=8;aM++){if(aM!==6){l(aP,J(aN,aQ-1-aL++),aM,aR)}}for(aM=8,aR=7;aR>=0;aR--){if(aR!==6){l(aP,J(aN,aQ-1-aL++),aM,aR)}}aL=0;for(aR=aO.length-1,aM=8;aR>=aO.length-8;aR--){l(aP,J(aN,aQ-1-aL++),aM,aR)}l(aP,1,aO.length-8,8);for(aM=aO.length-7,aR=8;aM<aO.length;aM++){l(aP,J(aN,aQ-1-aL++),aM,aR)}};var V=function(aL){return aB(aL,S,18)};var ad=function(aW,aP){var aT=aW[0],aN=aT.length,aM=0,aS=aN-11,aL=aN-11,aR=0,aO,aQ,aV;for(var aU=0;aU<aP.length;aU++){aO=Math.floor(aU/3);aQ=aU%3;aV=J(aP,aP.length-aU-1);l(aW,aV,aM+aO,aS+aQ);l(aW,aV,aL+aQ,aR+aO)}};var aw=function(aS,aO,aQ,aP){var aT=aO.length+2,aL=aO.length+1,aR;for(var aN=0;aN<aO.length;aN++){for(var aM=aN;aM<aT-aN;aM++){aR=aO[aN];l(aS,aR,aQ+aM,aP+aN);l(aS,aR,aQ+aN,aP+aM);l(aS,aR,aQ+aL-aM,aP+aL-aN);l(aS,aR,aQ+aL-aN,aP+aL-aM)}}};var B=function(aN,aP,aL,aR){var aQ=aL,aO=aR,aM=aN[0];do{l(aN,0,aQ,aR);l(aN,0,aL,aO);aQ+=aP[0];aO+=aP[1]}while(aQ>=0&&aQ<aM.length)};var ar=function(aM){var aL=aM[0].length;aw(aM,aG,0,0);B(aM,[-1,-1],7,7);aw(aM,aG,aL-7,0);B(aM,[1,-1],aL-8,7);aw(aM,aG,0,aL-7);B(aM,[-1,1],7,aL-8)};var ae=function(aU,aR){if(aR<2){return}var aS=aU[0],aN=aS.length,aQ=Math.floor(aR/7),aV=[6],aL,aM,aT=0;if(aL=ax[aR]){aM=(aN-13-aL)/aQ}else{aL=aM=(aN-13)/(aQ+1)}aV.push(aV[aT++]+aL);while(aV[aT]+aM<aN){aV.push(aV[aT++]+aM)}for(var aP=0;aP<aV.length;aP++){for(var aO=0;aO<aV.length;aO++){if(aS[aV[aP]][aV[aO]]===x){aw(aU,u,aV[aP]-2,aV[aO]-2)}}}};var i=function(aM){var aQ=6,aO=6,aP=1,aL=aM[0].length;for(var aN=8;aN<aL-8;aN++){l(aM,aP,aQ,aN);l(aM,aP,aN,aO);aP^=1}};var an=function(aY){var aP=[],aS=[],aV=[],aL=[],aZ=[],aX,aT,a0=0,aN=1,aM=aY[0].length;for(aT=0;aT<aY.length;aT++){aP[aT]=0;aV[aT]=0;aZ[aT]=[0,0];aL[aT]=[0,0];aS[aT]=[]}for(aT=0;aT<aM;aT++){for(var aR=0;aR<aM;aR++){for(var aO=0;aO<aY.length;aO++){aX=aY[aO];aV[aO]+=parseInt(aX[aT][aR],10);if(aS[aO][a0]===aX[aT][aR]&&aT+1<aM&&aR-1>=0&&aX[aT+1][aR]==aS[aO][a0]&&aX[aT+1][aR-1]==aS[aO][a0]){aP[aO]+=3}w(aO,aL,aP,a0,aX[aT][aR]);w(aO,aL,aP,aN,aX[aR][aT]);G(aO,aP,aS,aX[aT][aR],aZ,a0);G(aO,aP,aS,aX[aR][aT],aZ,aN)}}}var aW=aM*aM,aU,aQ=Number.MAX_VALUE;for(aT=0;aT<aP.length;aT++){aP[aT]+=ap(aV[aT],aW);if(aP[aT]<aQ){aQ=aP[aT];aU=aT}}return aU};function w(aM,aN,aP,aL,aO){aN[aM][aL]=(aN[aM][aL]<<1^aO)%128;if(aN[aM][aL]==aq){aP[aM]+=40}}function G(aM,aQ,aN,aP,aO,aL){if(aN[aM][aL]==aP){aO[aM][aL]++}else{aN[aM][aL]=aP;if(aO[aM][aL]>=5){aQ[aM]+=3+aO[aM][aL]-5}aO[aM][aL]=1}}function ap(aQ,aP){var aO=Math.floor(aQ/aP*100),aL=aO%5,aN=Math.abs(aO-aL-50),aM=Math.abs(aO+5-aL-50),aR=10*Math.min(aN/5,aM/5);return aR}var au=function(aM,aL){this.dataString=aM;this.version=aL};var C=function(){this.getEncodingResult=function(aQ,aM){var aP=N(aQ),aO=Q(aP),aL=b(aO,aM),aN=p(aP,aL);return new au(aN,aL)}};var aI=function(){this.mode=n[this.encodingMode]};aI.fn=aI.prototype={encodingMode:aJ,utfBOM:"111011111011101110111111",initialModeCountStringLength:20,getEncodingResult:function(aR,aM){var aO=this,aQ=aO.encode(aR),aP=aO.getDataCodewordsCount(aQ),aL=b(aP,aM),aN=aO.mode.getModeCountString(aQ.length/8,aL)+aQ;return new au(aN,aL)},getDataCodewordsCount:function(aN){var aL=this,aO=aN.length,aM=Math.ceil((aL.initialModeCountStringLength+aO)/8);return aM},encode:function(aO){var aN=this,aL=aN.utfBOM;for(var aM=0;aM<aO.length;aM++){aL+=aN.encodeCharacter(aO.charCodeAt(aM))}return aL},encodeCharacter:function(aP){var aO=this.getBytesCount(aP),aQ=aO-1,aL="";if(aO==1){aL=al(aP,8)}else{var aM=8-aO;for(var aN=0;aN<aQ;aN++){aL=al(aP>>aN*6&63|128,8)+aL}aL=(aP>>aQ*6|255>>aM<<aM).toString(2)+aL}return aL},getBytesCount:function(aN){var aL=this.ranges;for(var aM=0;aM<aL.length;aM++){if(aN<aL[aM]){return aM+1}}},ranges:[128,2048,65536,2097152,67108864]};var U=function(aL){if(aL&&aL.toLowerCase().indexOf("utf_8")>=0){return new aI()}else{return new C()}};var I=function(aT,aM,aN){var aU=new U(aN),aX=aU.getEncodingResult(aT,aM),aS=aX.version,aW=ao[aS-1][aM],aR=ab(aX.dataString,aW.totalDataCodewords),aL=R(aR,aW),aV=A(aS);ar(aV);ae(aV,aS);i(aV);if(aS>=7){ad(aV,al(0,18))}c(aV,al(0,15));av(aV,aL);var aQ=an(aV),aO=aV[aQ];if(aS>=7){ad([aO],V(aS))}var aP=ac[aM]+al(aQ,3);c([aO],W(aP));return aO};var m={DEFAULT_SIZE:200,QUIET_ZONE_LENGTH:4,DEFAULT_ERROR_CORRECTION_LEVEL:"L",DEFAULT_BACKGROUND:"#fff",DEFAULT_DARK_MODULE_COLOR:"#000",MIN_BASE_UNIT_SIZE:1};var ah=k.extend({init:function(aM,aL){var aN=this;k.fn.init.call(aN,aM,aL);aN.element=aA(aM);aN.wrapper=aN.element;aN.element.addClass("k-qrcode");aN.surfaceWrap=aA("<div />").css("position","relative").appendTo(this.element);aN.surface=aj.Surface.create(aN.surfaceWrap,{type:aN.options.renderAs});aN.setOptions(aL)},redraw:function(){var aL=this._getSize();this.surfaceWrap.css({width:aL,height:aL});this.surface.clear();this.createVisual();this.surface.draw(this.visual)},getSize:function(){return r.dimensions(this.element)},_resize:function(){this.redraw()},createVisual:function(){this.visual=this._render()},exportVisual:function(){return this._render()},_render:function(){var aR=this,aV=aR._value,aS,aQ=aR.options.border||{},aT=aR.options.padding||0,aM=aQ.width||0,aP,aU,aW,aN,aO;aQ.width=aM;var aL=new aj.Group();if(aV){aU=I(aV,aR.options.errorCorrection,aR.options.encoding);aW=aR._getSize();aO=aW-2*(aM+aT);aS=aR._calculateBaseUnit(aO,aU.length);aN=aU.length*aS;aP=aM+aT+(aO-aN)/2;aL.append(aR._renderBackground(aW,aQ));aL.append(aR._renderMatrix(aU,aS,aP))}return aL},_getSize:function(){var aO=this,aN;if(aO.options.size){aN=parseInt(aO.options.size,10)}else{var aM=aO.element,aL=Math.min(aM.width(),aM.height());if(aL>0){aN=aL}else{aN=m.DEFAULT_SIZE}}return aN},_calculateBaseUnit:function(aL,aM){var aN=Math.floor(aL/aM);if(aN<m.MIN_BASE_UNIT_SIZE){throw new Error("Insufficient size.")}if(aN*aM>=aL&&aN-1>=m.MIN_BASE_UNIT_SIZE){aN--}return aN},_renderMatrix:function(aT,aS,aN){var aW=new aj.MultiPath({fill:{color:this.options.color},stroke:null});for(var aV=0;aV<aT.length;aV++){var aQ=aN+aV*aS;var aO=0;while(aO<aT.length){while(aT[aV][aO]===0&&aO<aT.length){aO++}if(aO<aT.length){var aU=aO;while(aT[aV][aO]==1){aO++}var aM=K(aN+aU*aS);var aR=K(aQ);var aL=K(aN+aO*aS);var aP=K(aQ+aS);aW.moveTo(aM,aR).lineTo(aM,aP).lineTo(aL,aP).lineTo(aL,aR).close()}}}return aW},_renderBackground:function(aM,aL){var aN=new v(0,0,aM,aM).unpad(aL.width/2);return aj.Path.fromRect(aN.toRect(),{fill:{color:this.options.background},stroke:{color:aL.color,width:aL.width}})},setOptions:function(aL){var aM=this;aL=aL||{};aM.options=aa(aM.options,aL);if(aL.value!==x){aM._value=aM.options.value+""}aM.redraw()},value:function(aM){var aL=this;if(aM===x){return aL._value}aL._value=aM+"";aL.redraw()},options:{name:"QRCode",renderAs:"svg",encoding:"ISO_8859_1",value:"",errorCorrection:m.DEFAULT_ERROR_CORRECTION_LEVEL,background:m.DEFAULT_BACKGROUND,color:m.DEFAULT_DARK_MODULE_COLOR,size:"",padding:0,border:{color:"",width:0}}});Y.ExportMixin.extend(ah.fn);Y.ui.plugin(ah);r.deepExtend(Y,{QRCode:ah,QRCodeDefaults:m,QRCodeFunctions:{FreeCellVisitor:o,fillData:av,padDataString:ab,generateErrorCodewords:y,xorPolynomials:d,getBlocks:R,multiplyPolynomials:e,chooseMode:aC,getModes:N,getDataCodewordsCount:Q,getVersion:b,getDataString:p,encodeFormatInformation:W,encodeBCH:aB,dividePolynomials:s,initMatrices:A,addFormatInformation:c,encodeVersionInformation:V,addVersionInformation:ad,addCentricPattern:aw,addFinderSeparator:B,addFinderPatterns:ar,addAlignmentPatterns:ae,addTimingFunctions:i,scoreMaskMatrixes:an,encodeData:I,UTF8Encoder:aI},QRCodeFields:{modes:n,powersOfTwo:ak,powersOfTwoResult:az,generatorPolynomials:E}})}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/stock/kendo-stock-chart",["kendo.dataviz.chart"],a)}(function(){(function(){window.kendo.dataviz=window.kendo.dataviz||{};var i=kendo.dataviz;var k=i.deepExtend;var j=i.elementStyles;var g=i.toTime;var a=i.services;var b=i.constants;var o=i.Chart;function h(t,s){var u=document.createElement("div");u.className=t;if(s){u.style.cssText=s}return u}var f=i.Class.extend({init:function(s,u,t){this.options=k({},this.options,t);this.container=s;this.chartService=u;var v=j(s,["paddingLeft","paddingTop"]);this.chartPadding={top:v.paddingTop,left:v.paddingLeft};this.createElements();s.appendChild(this.element)},createElements:function(){var t=this.element=h("k-navigator-hint","display: none; position: absolute; top: 1px; left: 1px;");var u=this.tooltip=h("k-tooltip k-chart-tooltip");var s=this.scroll=h("k-scroll");u.innerHTML="&nbsp;";t.appendChild(u);t.appendChild(s)},show:function(G,v,s){var B=this;var u=B.element;var x=B.options;var t=B.scroll;var z=B.tooltip;var I=i.toDate(g(G)+g(v-G)/2);var C=s.width()*0.4;var w=s.center().x-C;var F=s.center().x;var y=F-w;var E=x.max-x.min;var J=y/E;var A=I-x.min;var D=this.chartService.intl.format(x.format,G,v);if(this._hideTimeout){clearTimeout(this._hideTimeout)}if(!this._visible){j(u,{visibility:"hidden",display:"block"});this._visible=true}if(x.template){D=a.TemplateService.compile(x.template)({from:G,to:v})}z.innerHTML=D;j(z,{left:s.center().x-z.offsetWidth/2,top:s.y1});var H=j(z,["marginTop","borderTopWidth","height"]);j(t,{width:C,left:w+A*J,top:s.y1+H.marginTop+H.borderTopWidth+H.height/2});j(u,{visibility:"visible"})},hide:function(){var s=this;if(this._hideTimeout){clearTimeout(this._hideTimeout)}this._hideTimeout=setTimeout(function(){s._visible=false;j(s.element,{display:"none"})},this.options.hideDelay)}});i.setDefaultOptions(f,{format:"{0:d} - {1:d}",hideDelay:500});var c="_navigator";var l=c;var r={NAVIGATOR_AXIS:l,NAVIGATOR_PANE:c};var p=3;var e=i.Class.extend({init:function(u){this.chart=u;var t=this.options=k({},this.options,u.options.navigator);var s=t.select;if(s){s.from=this.parseDate(s.from);s.to=this.parseDate(s.to)}if(!i.defined(t.hint.visible)){t.hint.visible=t.visible}var v;this.chartObserver=new i.InstanceObserver(this,(v={},v[b.DRAG]="_drag",v[b.DRAG_END]="_dragEnd",v[b.ZOOM]="_zoom",v[b.ZOOM_END]="_zoomEnd",v));u.addObserver(this.chartObserver)},parseDate:function(s){return i.parseDate(this.chart.chartService.intl,s)},destroy:function(){if(this.chart){this.chart.removeObserver(this.chartObserver);delete this.chart}if(this.selection){this.selection.destroy();delete this.selection}},redraw:function(){this._redrawSelf();this._initSelection()},_initSelection:function(){var u=this;var z=u.chart;var F=u.options;var x=this.mainAxis();var w=x.range();var y=w.min;var A=w.max;var v=F.select;var E=v.from;var D=v.to;var C=v.mousewheel;var s=q(x);var t=x.options.categories;var B=this.selection;if(t.length===0){return}if(B){B.destroy()}s.box=x.box;B=this.selection=new i.Selection(z,s,{min:y,max:A,from:E||y,to:D||A,mousewheel:i.valueOrDefault(C,{zoom:"left"}),visible:F.visible},new i.InstanceObserver(this,{selectStart:"_selectStart",select:"_select",selectEnd:"_selectEnd"}));if(F.hint.visible){this.hint=new f(z.element,z.chartService,{min:y,max:A,template:F.hint.template,format:F.hint.format})}},_setRange:function(){var x=this.chart._createPlotArea(true);var v=x.namedCategoryAxes[l];var w=v.range();var u=w.min;var t=w.max;var s=this.options.select||{};var z=s.from||u;if(z<u){z=u}var y=s.to||t;if(y>t){y=t}this.options.select=k({},s,{from:z,to:y});this.filterAxes()},_redrawSelf:function(s){var t=this.chart._plotArea;if(t){t.redraw(i.last(t.panes),s)}},redrawSlaves:function(){var s=this.chart;var t=s._plotArea;var u=t.panes.slice(0,-1);t.srcSeries=s.options.series;t.redraw(u)},_drag:function(x){var s=this;var y=s.chart;var F=s.selection;var C=y._eventCoordinates(x.originalEvent);var w=this.mainAxis();var z=w.datesRange();var A=w.pane.box.containsPoint(C);var t=y._plotArea.categoryAxis;var v=x.axisRanges[t.options.name];var B=this.options.select;var u;if(!v||A||!F){return}if(B.from&&B.to){u=g(B.to)-g(B.from)}else{u=g(F.options.to)-g(F.options.from)}var E=i.toDate(i.limitValue(g(v.min),z.min,g(z.max)-u));var D=i.toDate(i.limitValue(g(E)+u,g(z.min)+u,z.max));this.options.select={from:E,to:D};if(this.options.liveDrag){this.filterAxes();this.redrawSlaves()}F.set(E,D);this.showHint(E,D)},_dragEnd:function(){this.filterAxes();this.filter();this.redrawSlaves();if(this.hint){this.hint.hide()}},readSelection:function(){var u=this;var t=u.selection.options;var w=t.from;var v=t.to;var s=u.options.select;s.from=w;s.to=v},filterAxes:function(){var w=this;var t=w.options.select;if(t===void 0){t={}}var v=w.chart;var x=v.options.categoryAxis;var z=t.from;var y=t.to;for(var s=0;s<x.length;s++){var u=x[s];if(u.pane!==c){u.min=z;u.max=y}}},filter:function(){var u=this;var t=u.chart;var w=u.options;var v=w.filterable;var s=w.select;if(v){var x=new i.DateCategoryAxis(k({baseUnit:"fit"},t.options.categoryAxis[0],{categories:[s.from,s.to]}),t.chartService).options;this.chart.trigger("navigatorFilter",{from:i.addDuration(x.min,-x.baseUnitStep,x.baseUnit),to:i.addDuration(x.max,x.baseUnitStep,x.baseUnit)})}},_zoom:function(x){var s=this;var u=s.chart._plotArea.categoryAxis;var B=s.selection;var A=s.options;var y=A.select;var z=A.liveDrag;var v=this.mainAxis().options.categories;var C=x.delta;if(!B){return}var w=i.lteDateIndex(B.options.from,v);var t=i.lteDateIndex(B.options.to,v);x.originalEvent.preventDefault();if(Math.abs(C)>1){C*=p}if(t-w>1){B.expand(C);this.readSelection()}else{u.options.min=y.from;y.from=u.scaleRange(-x.delta).min}if(z){this.filterAxes();this.redrawSlaves()}B.set(y.from,y.to);this.showHint(this.options.select.from,this.options.select.to)},_zoomEnd:function(s){this._dragEnd(s)},showHint:function(u,t){var s=this.chart._plotArea;if(this.hint){this.hint.show(u,t,s.backgroundBox())}},_selectStart:function(s){return this.chart._selectStart(s)},_select:function(s){this.showHint(s.from,s.to);return this.chart._select(s)},_selectEnd:function(s){if(this.hint){this.hint.hide()}this.readSelection();this.filterAxes();this.filter();this.redrawSlaves();return this.chart._selectEnd(s)},mainAxis:function(){var s=this.chart._plotArea;if(s){return s.namedCategoryAxes[l]}},select:function(u,t){var s=this.options.select;if(u&&t){s.from=this.parseDate(u);s.to=this.parseDate(t);this.filterAxes();this.filter();this.redrawSlaves();this.selection.set(u,t)}return{from:s.from,to:s.to}}});e.setup=function(t,s){if(t===void 0){t={}}if(s===void 0){s={}}if(t.__navi){return}t.__navi=true;var v=k({},s.navigator,t.navigator);var u=t.panes=[].concat(t.panes);var w=k({},v.pane,{name:c});if(!v.visible){w.visible=false;w.height=0.1}u.push(w);e.attachAxes(t,v);e.attachSeries(t,v,s)};e.attachAxes=function(A,z){var w=z.series||[];var y=A.categoryAxis=[].concat(A.categoryAxis);var u=A.valueAxis=[].concat(A.valueAxis);var t=i.filterSeriesByType(w,b.EQUALLY_SPACED_SERIES);var x=t.length===0;var s=k({type:"date",pane:c,roundToBaseUnit:!x,justified:x,_collapse:false,majorTicks:{visible:true},tooltip:{visible:false},labels:{step:1},autoBind:!z.filterable,autoBaseUnitSteps:{minutes:[1],hours:[1,2],days:[1,2],weeks:[],months:[1],years:[1]}});var v=z.categoryAxis;y.push(k({},s,{maxDateGroups:200},v,{name:l,title:null,baseUnit:"fit",baseUnitStep:"auto",labels:{visible:false},majorTicks:{visible:false}}),k({},s,v,{name:l+"_labels",maxDateGroups:20,baseUnitStep:"auto",plotBands:[],autoBaseUnitSteps:{minutes:[]},_overlap:true}),k({},s,v,{name:l+"_ticks",maxDateGroups:200,majorTicks:{width:0.5},plotBands:[],title:null,labels:{visible:false,mirror:true},_overlap:true}));u.push(k({name:l,pane:c,majorGridLines:{visible:false},visible:false},z.valueAxis))};e.attachSeries=function(v,y,u){var w=v.series=v.series||[];var t=[].concat(y.series||[]);var x=u.seriesColors;var z=y.seriesDefaults;for(var s=0;s<t.length;s++){w.push(k({color:x[s%x.length],categoryField:y.dateField,visibleInLegend:false,tooltip:{visible:false}},z,t[s],{axis:l,categoryAxis:l,autoBind:!y.filterable}))}};function m(){}function q(s){m.prototype=s;return new m()}var n=28;var d=o.extend({_applyDefaults:function(t,s){var u=i.elementSize(this.element).width||b.DEFAULT_WIDTH;var v=s;var w={seriesDefaults:{categoryField:t.dateField},axisDefaults:{categoryAxis:{name:"default",majorGridLines:{visible:false},labels:{step:2},majorTicks:{visible:false},maxDateGroups:Math.floor(u/n)}}};if(v){v=k({},v,w)}e.setup(t,v);o.fn._applyDefaults.call(this,t,v)},_setElementClass:function(s){i.addClass(s,"k-chart k-stockchart")},setOptions:function(s){this._destroyNavigator();o.fn.setOptions.call(this,s)},_resize:function(){var s=this.options.transitions;this.options.transitions=false;this._fullRedraw();this.options.transitions=s},_redraw:function(){var s=this._navigator;if(!this._dirty()&&s&&s.options.filterable){s.redrawSlaves()}else{this._fullRedraw()}},_dirty:function(){var s=this.options;var t=[].concat(s.series,s.navigator.series);var v=i.grep(t,function(w){return w&&w.visible}).length;var u=this._seriesCount!==v;this._seriesCount=v;return u},_fullRedraw:function(){var s=this._navigator;if(!s){s=this._navigator=new e(this);this.trigger("navigatorCreated",{navigator:s})}s._setRange();o.fn._redraw.call(this);s._initSelection()},_trackSharedTooltip:function(t){var s=this._plotArea;var u=s.paneByPoint(t);if(u&&u.options.name===c){this._unsetActivePoint()}else{o.fn._trackSharedTooltip.call(this,t)}},_destroyNavigator:function(){this._navigator.destroy();this._navigator=null},destroy:function(){this._destroyNavigator();o.fn.destroy.call(this)},_stopDragEvent:function(t){var s=this._eventCoordinates(t);var u=this._plotArea.paneByPoint(s);return o.fn._stopDragEvent.call(this,t)||u&&u.options.name===c}});i.setDefaultOptions(d,{dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:true},valueAxis:{narrowRange:true,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:false},tooltip:{visible:true},line:{width:2}},hint:{},visible:true},tooltip:{visible:true},legend:{visible:false}});kendo.deepExtend(kendo.dataviz,{constants:r,Navigator:e,NavigatorHint:f,StockChart:d})}())},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/stock/stock-chart",["dataviz/stock/kendo-stock-chart"],a)}(function(){(function(i){var m=window.kendo;var g=m.dataviz;var n=g.ChartInstanceObserver;var j=g.ui.Chart;var c=g.StockChart;var p=g.constants;var b=p.NAVIGATOR_AXIS;var a=p.NAVIGATOR_PANE;var d=m.deepExtend;var e=g.defined;var l=i.proxy;var h="change";var k=n.extend({handlerMap:{navigatorFilter:"_onNavigatorFilter",navigatorCreated:"_onNavigatorCreated"}});var f=j.extend({options:{name:"StockChart",dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:true},valueAxis:{narrowRange:true,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:false},tooltip:{visible:true,template:"#= kendo.toString(category, 'd') #"},line:{width:2}},hint:{},visible:true},tooltip:{visible:true},legend:{visible:false}},_createChart:function(r,q){this._initNavigatorOptions(r);this._instance=new c(this.element[0],r,q,{observer:new k(this),sender:this})},_initNavigatorOptions:function(r){var t=r.navigator||{};var s=m.support;var q=s.touch;var u=s.browser.mozilla;d(t,{filterable:!!t.dataSource,liveDrag:!q&&!u})},_initDataSource:function(t){var B=t||{},q=B.dataSource,u=q&&q.serverFiltering,s=[].concat(B.categoryAxis)[0],A=B.navigator||{},v=A.select,y=v&&v.from&&v.to;if(u&&y){var r=[].concat(q.filter||[]);var x=m.parseDate(v.from);var w=m.parseDate(v.to);var z=new g.DateCategoryAxis(d({baseUnit:"fit"},s,{categories:[x,w]}),m);q.filter=o(z.range().min,w).concat(r)}j.fn._initDataSource.call(this,t)},_onNavigatorCreated:function(q){this._instance=q.sender;this.options=q.sender.options;this._navigator=this.navigator=q.navigator;this._initNavigatorDataSource()},_initNavigatorDataSource:function(){var q=this.options.navigator;var r=q.autoBind;var s=q.dataSource;if(s){this._navigatorDataChangedHandler=this._navigatorDataChangedHandler||l(this._onNavigatorDataChanged,this);this._navigatorDataSource=m.data.DataSource.create(s).bind(h,this._navigatorDataChangedHandler);if(!e(r)){r=this.options.autoBind}if(r){this._navigatorDataSource.fetch()}}},_onNavigatorDataChanged:function(){var x=this,A=x._instance,v=x.options.series,C,s=v.length,z=x.options.categoryAxis,t,r=z.length,u=x._navigatorDataSource.view(),B,q,w;for(C=0;C<s;C++){B=v[C];if(B.axis==b&&x._isBindable(B)){B.data=u}}for(t=0;t<r;t++){q=z[t];if(q.pane==a){if(q.name==b){x._bindCategoryAxis(q,u,t);w=q.categories}else{q.categories=w}}}if(A._model){var y=this.navigator;y.redraw();y._setRange();if(!x.options.dataSource||x.options.dataSource&&x._dataBound){y.redrawSlaves()}}},_bindCategories:function(){var r=this.options;var t=[].concat(r.categoryAxis);var u,s,q;j.fn._bindCategories.call(this);for(u=0;u<t.length;u++){s=t[u];if(s.name===b){q=s.categories}else{if(q&&s.pane==a){s.categories=q}}}},_onDataChanged:function(){j.fn._onDataChanged.call(this);this._dataBound=true},setOptions:function(q){this._removeNavigatorDataSource();this._initNavigatorOptions(q);this._instance._destroyNavigator();j.fn.setOptions.call(this,q)},_onNavigatorFilter:function(q){this.dataSource.filter(o(q.from,q.to))},_removeNavigatorDataSource:function(){var q=this._navigatorDataSource;if(q){q.unbind(h,this._navigatorDataChangedHandler);delete this._navigatorDataSource}},destroy:function(){j.fn.destroy.call(this);this._removeNavigatorDataSource()}});g.ui.plugin(f);function o(r,q){return[{field:"Date",operator:"gte",value:r},{field:"Date",operator:"lt",value:q}]}}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.dataviz.stock",["dataviz/stock/kendo-stock-chart","dataviz/stock/stock-chart"],a)}(function(){var a={id:"dataviz.stockchart",name:"StockChart",category:"dataviz",description:"StockChart widget and associated financial series.",depends:["dataviz.chart"]}},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/sparkline/kendo-sparkline",["kendo.dataviz.chart"],a)}(function(){(function(){window.kendo.dataviz=window.kendo.dataviz||{};var f=kendo.dataviz;var l=f.constants;var g=f.Chart;var k=f.elementSize;var e=f.deepExtend;var h=150;var d=150;var b=[l.BAR,l.BULLET];function i(n){var o=[];for(var m=0;m<n.length;m++){var p=n[m];o[m]=p.style.display;p.style.display="none"}return o}function j(n,o){for(var m=0;m<n.length;m++){n[m].style.display=o[m]}}function c(m){return f.isNumber(m)?[m]:m}var a=g.extend({_setElementClass:function(m){f.addClass(m,"k-sparkline")},_initElement:function(m){g.fn._initElement.call(this,m);this._initialWidth=Math.floor(k(m).width)},_resize:function(){var m=this.element;var n=i(m.childNodes);this._initialWidth=Math.floor(k(m).width);j(m.childNodes,n);g.fn._resize.call(this)},_modelOptions:function(){var q=this.options;var n=this._surfaceWrap();var o=i(n.childNodes);var p=document.createElement("span");p.innerHTML="&nbsp;";n.appendChild(p);var m=e({width:this._autoWidth,height:k(n).height,transitions:q.transitions},q.chartArea,{inline:true,align:false});k(n,{width:m.width,height:m.height});n.removeChild(p);j(n.childNodes,o);this.surface.resize();return m},_surfaceWrap:function(){if(!this.stage){var m=this.stage=document.createElement("span");this.element.appendChild(m)}return this.stage},_createPlotArea:function(m){var n=g.fn._createPlotArea.call(this,m);this._autoWidth=this._initialWidth||this._calculateWidth(n);return n},_calculateWidth:function(m){var x=this.options;var n=f.getSpacing(x.chartArea.margin);var q=m.charts;var s=this._surfaceWrap();var v=0;for(var o=0;o<q.length;o++){var u=q[o];var t=(u.options.series||[])[0];if(!t){continue}if(t.type===l.BAR){return h}if(t.type===l.BULLET){return d}if(t.type===l.PIE){return k(s).height}var p=u.categoryAxis;if(p){var r=p.options.categories.length*(!u.options.isStacked&&f.inArray(t.type,[l.COLUMN,l.VERTICAL_BULLET])?u.seriesOptions.length:1);v=Math.max(v,r)}}var w=v*x.pointWidth;if(w>0){w+=n.left+n.right}return w}});a.normalizeOptions=function(n){var m=c(n);if(f.isArray(m)){m={seriesDefaults:{data:m}}}else{m=e({},m)}if(!m.series){m.series=[{data:c(m.data)}]}e(m,{seriesDefaults:{type:m.type}});if(f.inArray(m.series[0].type,b)||f.inArray(m.seriesDefaults.type,b)){m=e({},{categoryAxis:{crosshair:{visible:false}}},m)}return m};f.setDefaultOptions(a,{chartArea:{margin:2},axisDefaults:{visible:false,majorGridLines:{visible:false},valueAxis:{narrowRange:true}},seriesDefaults:{type:"line",area:{line:{width:0.5}},bar:{stack:true},padding:2,width:0.5,overlay:{gradient:null},highlight:{visible:false},border:{width:0},markers:{size:2,visible:false}},tooltip:{visible:true,shared:true},categoryAxis:{crosshair:{visible:true,tooltip:{visible:false}}},legend:{visible:false},transitions:false,pointWidth:5,panes:[{clip:false}]});kendo.deepExtend(kendo.dataviz,{Sparkline:a})}())},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/sparkline/sparkline",["dataviz/sparkline/kendo-sparkline"],a)}(function(){(function(){var f=kendo.dataviz;var a=f.ui.Chart;var e=f.Sparkline;var c=f.ChartInstanceObserver;var b=a.extend({init:function(h,i){var g=i;if(g instanceof kendo.data.ObservableArray){g={seriesDefaults:{data:g}}}a.fn.init.call(this,h,e.normalizeOptions(g))},_createChart:function(h,g){this._instance=new e(this.element[0],h,g,{observer:new c(this),sender:this})},_createTooltip:function(){return new d(this.element,this.options.tooltip)},options:{name:"Sparkline",chartArea:{margin:2},axisDefaults:{visible:false,majorGridLines:{visible:false},valueAxis:{narrowRange:true}},seriesDefaults:{type:"line",area:{line:{width:0.5}},bar:{stack:true},padding:2,width:0.5,overlay:{gradient:null},highlight:{visible:false},border:{width:0},markers:{size:2,visible:false}},tooltip:{visible:true,shared:true},categoryAxis:{crosshair:{visible:true,tooltip:{visible:false}}},legend:{visible:false},transitions:false,pointWidth:5,panes:[{clip:false}]}});f.ui.plugin(b);var d=f.Tooltip.extend({options:{animation:{duration:0}},_hideElement:function(){if(this.element){this.element.hide().remove()}}});f.SparklineTooltip=d}())},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.dataviz.sparkline",["dataviz/sparkline/kendo-sparkline","dataviz/sparkline/sparkline"],a)}(function(){var a={id:"dataviz.sparkline",name:"Sparkline",category:"dataviz",description:"Sparkline widgets.",depends:["dataviz.chart"]}},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/map/location",["kendo.drawing","util/main"],a)}(function(){(function(h,i){var g=Math,o=g.abs,j=g.atan,f=g.atan2,e=g.cos,s=g.max,r=g.min,a=g.sin,u=g.tan,p=window.kendo,t=p.Class,k=p.dataviz,l=p.deepExtend,b=p.drawing.util,d=b.defined,n=b.deg,w=b.rad,v=b.round,m=b.valueOrDefault,q=p.util.sqr;var c=t.extend({init:function(z,y){if(arguments.length===1){this.lat=z[0];this.lng=z[1]}else{this.lat=z;this.lng=y}},DISTANCE_ITERATIONS:100,DISTANCE_CONVERGENCE:1e-12,DISTANCE_PRECISION:2,FORMAT:"{0:N6},{1:N6}",toArray:function(){return[this.lat,this.lng]},equals:function(y){return y&&y.lat===this.lat&&y.lng===this.lng},clone:function(){return new c(this.lat,this.lng)},round:function(y){this.lng=v(this.lng,y);this.lat=v(this.lat,y);return this},wrap:function(){this.lng=this.lng%180;this.lat=this.lat%90;return this},distanceTo:function(z,y){return this.greatCircleTo(z,y).distance},destination:function(F,B,z){B=w(B);z=z||k.map.datums.WGS84;var y=w(this.lat);var D=w(this.lng);var E=F/p.dataviz.map.datums.WGS84.a;var C=g.asin(a(y)*e(E)+e(y)*a(E)*e(B));var A=D+f(a(B)*a(E)*e(y),e(E)-a(y)*a(C));return new c(n(C),n(A))},greatCircleTo:function(O,Y){O=c.create(O);Y=Y||k.map.datums.WGS84;if(!O||this.clone().round(8).equals(O.clone().round(8))){return{distance:0,azimuthFrom:0,azimuthTo:0}}var af=Y.a;var ad=Y.b;var Z=Y.f;var K=w(O.lng-this.lng);var ab=j((1-Z)*u(w(this.lat)));var I=a(ab);var D=e(ab);var aa=j((1-Z)*u(w(O.lat)));var H=a(aa);var z=e(aa);var P=K;var M;var W=this.DISTANCE_ITERATIONS;var ag=false;var U;var y;var G;var F;var ae;var X;var T;while(!ag&&W-->0){U=a(P);y=e(P);G=g.sqrt(q(z*U)+q(D*H-I*z*y));ae=I*H+D*z*y;T=f(G,ae);var E=D*z*U/G;F=1-q(E);X=0;if(F!==0){X=ae-2*I*H/F}M=P;var Q=Z/16*F*(4+Z*(4-3*F));P=K+(1-Q)*Z*E*(T+Q*G*(X+Q*ae*(-1+2*q(X))));ag=o(P-M)<=this.DISTANCE_CONVERGENCE}var V=F*(q(af)-q(ad))/q(ad);var S=1+V/16384*(4096+V*(-768+V*(320-175*V)));var R=V/1024*(256+V*(-128+V*(74-47*V)));var N=R*G*(X+R/4*(ae*(-1+2*q(X))-R/6*X*(-3+4*q(G))*(-3+4*q(X))));var ac=f(z*U,D*H-I*z*y);var J=f(D*U,-I*z+D*H*y);return{distance:v(ad*S*(T-N),this.DISTANCE_PRECISION),azimuthFrom:n(ac),azimuthTo:n(J)}}});c.fn.toString=function(){return p.format(this.FORMAT,this.lat,this.lng)};c.fromLngLat=function(y){return new c(y[1],y[0])};c.fromLatLng=function(y){return new c(y[0],y[1])};c.create=function(z,y){if(d(z)){if(z instanceof c){return z.clone()}else{if(arguments.length===1&&z.length===2){return c.fromLatLng(z)}else{return new c(z,y)}}}};var x=t.extend({init:function(y,z){y=c.create(y);z=c.create(z);if(y.lng+180>z.lng+180&&y.lat+90<z.lat+90){this.se=y;this.nw=z}else{this.se=z;this.nw=y}},contains:function(C){var y=this.nw,A=this.se,z=m(C.lng,C[1]),B=m(C.lat,C[0]);return C&&z+180>=y.lng+180&&z+180<=A.lng+180&&B+90>=A.lat+90&&B+90<=y.lat+90},center:function(){var y=this.nw;var A=this.se;var z=y.lng+(A.lng-y.lng)/2;var B=y.lat+(A.lat-y.lat)/2;return new c(B,z)},containsAny:function(A){var y=false;for(var z=0;z<A.length;z++){y=y||this.contains(A[z])}return y},include:function(C){var y=this.nw,A=this.se,z=m(C.lng,C[1]),B=m(C.lat,C[0]);y.lng=r(y.lng,z);y.lat=s(y.lat,B);A.lng=s(A.lng,z);A.lat=r(A.lat,B)},includeAll:function(z){for(var y=0;y<z.length;y++){this.include(z[y])}},edges:function(){var y=this.nw,z=this.se;return{nw:this.nw,ne:new c(y.lat,z.lng),se:this.se,sw:new c(z.lat,y.lng)}},toArray:function(){var y=this.nw,z=this.se;return[y,new c(y.lat,z.lng),z,new c(z.lat,y.lng)]},overlaps:function(y){return this.containsAny(y.toArray())||y.containsAny(this.toArray())}});x.World=new x([90,-180],[-90,180]);x.create=function(z,y){if(z instanceof x){return z}else{if(z&&y){return new x(z,y)}else{if(z&&z.length===4&&!y){return new x([z[0],z[1]],[z[2],z[3]])}}}};l(k,{map:{Extent:x,Location:c}})}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/map/attribution",["kendo.drawing"],a)}(function(){(function(){var g=window.kendo,d=g.ui.Widget,c=g.template,a=g.drawing.util,f=a.valueOrDefault,e=a.defined;var b=d.extend({init:function(i,h){d.fn.init.call(this,i,h);this._initOptions(h);this.items=[];this.element.addClass("k-widget k-attribution")},options:{name:"Attribution",separator:"&nbsp;|&nbsp;",itemTemplate:"#= text #"},filter:function(h,i){this._extent=h;this._zoom=i;this._render()},add:function(h){if(e(h)){if(typeof h==="string"){h={text:h}}this.items.push(h);this._render()}},remove:function(l){var h=[];for(var j=0;j<this.items.length;j++){var k=this.items[j];if(k.text!==l){h.push(k)}}this.items=h;this._render()},clear:function(){this.items=[];this.element.empty()},_render:function(){var h=[];var l=c(this.options.itemTemplate);for(var j=0;j<this.items.length;j++){var k=this.items[j];var m=this._itemText(k);if(m!==""){h.push(l({text:m}))}}if(h.length>0){this.element.empty().append(h.join(this.options.separator)).show()}else{this.element.hide()}},_itemText:function(h){var j="";var i=this._inZoomLevel(h.minZoom,h.maxZoom);var k=this._inArea(h.extent);if(i&&k){j+=h.text}return j},_inZoomLevel:function(j,i){var h=true;j=f(j,-Number.MAX_VALUE);i=f(i,Number.MAX_VALUE);h=this._zoom>j&&this._zoom<i;return h},_inArea:function(i){var h=true;if(i){h=i.contains(this._extent)}return h}});g.dataviz.ui.plugin(b)}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/map/navigator",["kendo.core"],a)}(function(){(function(c){var e=window.kendo;var g=e.ui.Widget;var h=e.keys;var f=c.proxy;var b=".kendoNavigator";function d(j){return e.format('<button class="k-button k-navigator-{0}"><span class="k-icon k-i-arrow-60-{0}"/></button>',j)}var a=d("up")+d("right")+d("down")+d("left");var i=g.extend({init:function(l,k){g.fn.init.call(this,l,k);this._initOptions(k);this.element.addClass("k-widget k-header k-shadow k-navigator").append(a).on("click"+b,".k-button",f(this,"_click"));var j=this.element.parent().closest("["+e.attr("role")+"]");this._keyroot=j.length>0?j:this.element;this._tabindex(this._keyroot);this._keydown=f(this._keydown,this);this._keyroot.on("keydown",this._keydown)},options:{name:"Navigator",panStep:1},events:["pan"],dispose:function(){this._keyroot.off("keydown",this._keydown)},_pan:function(j,l){var k=this.options.panStep;this.trigger("pan",{x:j*k,y:l*k})},_click:function(l){var j=0;var m=0;var k=c(l.currentTarget);if(k.is(".k-navigator-up")){m=1}else{if(k.is(".k-navigator-down")){m=-1}else{if(k.is(".k-navigator-right")){j=1}else{if(k.is(".k-navigator-left")){j=-1}}}}this._pan(j,m);l.preventDefault()},_keydown:function(j){switch(j.which){case h.UP:this._pan(0,1);j.preventDefault();break;case h.DOWN:this._pan(0,-1);j.preventDefault();break;case h.RIGHT:this._pan(1,0);j.preventDefault();break;case h.LEFT:this._pan(-1,0);j.preventDefault();break}}});e.dataviz.ui.plugin(i)}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/map/zoom",["kendo.core"],a)}(function(){(function(d){var i=window.kendo;var l=i.ui.Widget;var m=i.keys;var j=d.proxy;function g(o,n){return i.format('<button class="k-button k-zoom-{0}" title="zoom-{0}"><span class="k-icon {1}"></span></button>',o,n)}var c=".kendoZoomControl";var b=g("in","k-i-plus")+g("out","k-i-minus");var f=187;var a=189;var h=61;var k=173;var e=l.extend({init:function(p,o){l.fn.init.call(this,p,o);this._initOptions(o);this.element.addClass("k-widget k-zoom-control k-button-wrap k-buttons-horizontal k-button-group k-group-horizontal").append(b).on("click"+c,".k-button",j(this,"_click"));var n=this.element.parent().closest("["+i.attr("role")+"]");this._keyroot=n.length>0?n:this.element;this._tabindex(this._keyroot);this._keydown=j(this._keydown,this);this._keyroot.on("keydown",this._keydown)},options:{name:"ZoomControl",zoomStep:1},events:["change"],_change:function(o){var n=this.options.zoomStep;this.trigger("change",{delta:o*n})},_click:function(p){var o=d(p.currentTarget);var n=1;if(o.is(".k-zoom-out")){n=-1}this._change(n);p.preventDefault()},_keydown:function(n){switch(n.which){case m.NUMPAD_PLUS:case f:case h:this._change(1);break;case m.NUMPAD_MINUS:case a:case k:this._change(-1);break}}});i.dataviz.ui.plugin(e)}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/map/crs",["dataviz/map/location","kendo.drawing"],a)}(function(){(function(i,j){var e=Math,k=e.atan,o=e.exp,f=e.pow,a=e.sin,m=e.log,A=e.tan,v=window.kendo,x=v.Class,n=v.dataviz,q=v.deepExtend,y=v.geometry,E=y.Point,B=n.map,c=B.Location,b=v.drawing.util,D=b.rad,t=b.deg,z=b.limitValue;var w=e.PI,G=w/2,C=w/4,p=w/180;var d={a:6378137,b:6356752.314245179,f:0.0033528106647474805,e:0.08181919084262149};var s=x.extend({init:function(g){this._initOptions(g)},MAX_LNG:180,MAX_LAT:85.0840590501,INVERSE_ITERATIONS:15,INVERSE_CONVERGENCE:1e-12,options:{centralMeridian:0,datum:d},forward:function(J,I){var H=this,Q=H.options,O=Q.datum,g=O.a,P=Q.centralMeridian,K=z(J.lat,-H.MAX_LAT,H.MAX_LAT),M=I?z(J.lng,-H.MAX_LNG,H.MAX_LNG):J.lng,N=D(M-P)*g,L=H._projectLat(K);return new E(N,L)},_projectLat:function(M){var I=this.options.datum,H=I.e,K=I.a,N=D(M),J=A(C+N/2),g=H*a(N),L=f((1-g)/(1+g),H/2);return K*m(J*L)},inverse:function(N,I){var H=this,O=H.options,L=O.datum,g=L.a,M=O.centralMeridian,K=N.x/(p*g)+M,J=z(H._inverseY(N.y),-H.MAX_LAT,H.MAX_LAT);if(I){K=z(K,-H.MAX_LNG,H.MAX_LNG)}return new c(J,K)},_inverseY:function(Q){var L=this,R=L.options.datum,g=R.a,K=R.e,J=K/2,P=o(-Q/g),O=G-2*k(P),M;for(M=0;M<=L.INVERSE_ITERATIONS;M++){var I=K*a(O),H=f((1-I)/(1+I),J),N=G-2*k(P*H)-O;O+=N;if(e.abs(N)<=L.INVERSE_CONVERGENCE){break}}return t(O)}});var r=s.extend({MAX_LAT:85.0511287798,_projectLat:function(I){var H=this.options.datum.a,J=D(I),g=A(C+J/2);return H*m(g)},_inverseY:function(I){var H=this.options.datum.a,g=o(-I/H);return t(G-2*k(g))}});var l=x.extend({forward:function(g){return new E(g.lng,g.lat)},inverse:function(g){return new c(g.y,g.x)}});var u=x.extend({init:function(){var g=this,H=g._proj=new r();var I=this.c=2*w*H.options.datum.a;this._tm=y.transform().translate(0.5,0.5).scale(1/I,-1/I);this._itm=y.transform().scale(I,-I).translate(-0.5,-0.5)},toPoint:function(J,I,H){var g=this._proj.forward(J,H);return g.transform(this._tm).scale(I||1)},toLocation:function(g,I,H){g=g.clone().scale(1/(I||1)).transform(this._itm);return this._proj.inverse(g,H)}});var h=x.extend({init:function(){this._proj=new s()},toPoint:function(g){return this._proj.forward(g)},toLocation:function(g){return this._proj.inverse(g)}});var F=x.extend({init:function(){this._proj=new l()},toPoint:function(g){return this._proj.forward(g)},toLocation:function(g){return this._proj.inverse(g)}});q(n,{map:{crs:{EPSG3395:h,EPSG3857:u,EPSG4326:F},datums:{WGS84:d},projections:{Equirectangular:l,Mercator:s,SphericalMercator:r}}})}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/map/layers/base",["kendo.core","dataviz/map/location"],a)}(function(){(function(g,b){var j=g.proxy,i=window.kendo,a=i.Class,f=i.dataviz,d=i.deepExtend,k=f.map.Extent,h=i.drawing.util,e=h.defined;var c=a.extend({init:function(m,l){this._initOptions(l);this.map=m;this.element=g("<div class='k-layer'></div>").css({zIndex:this.options.zIndex,opacity:this.options.opacity}).appendTo(m.scrollElement);this._beforeReset=j(this._beforeReset,this);this._reset=j(this._reset,this);this._resize=j(this._resize,this);this._panEnd=j(this._panEnd,this);this._activate();this._updateAttribution()},destroy:function(){this._deactivate()},show:function(){this.reset();this._activate();this._applyExtent(true)},hide:function(){this._deactivate();this._setVisibility(false)},reset:function(){this._beforeReset();this._reset()},_reset:function(){this._applyExtent()},_beforeReset:g.noop,_resize:g.noop,_panEnd:function(){this._applyExtent()},_applyExtent:function(){var n=this.options;var p=this.map.zoom();var q=!e(n.minZoom)||p>=n.minZoom;var m=!e(n.maxZoom)||p<=n.maxZoom;var o=k.create(n.extent);var l=!o||o.overlaps(this.map.extent());this._setVisibility(q&&m&&l)},_setVisibility:function(l){this.element.css("display",l?"":"none")},_activate:function(){var l=this.map;l.bind("beforeReset",this._beforeReset);l.bind("reset",this._reset);l.bind("resize",this._resize);l.bind("panEnd",this._panEnd)},_deactivate:function(){var l=this.map;l.unbind("beforeReset",this._beforeReset);l.unbind("reset",this._reset);l.unbind("resize",this._resize);l.unbind("panEnd",this._panEnd)},_updateAttribution:function(){var l=this.map.attribution;if(l){l.add(this.options.attribution)}}});d(f,{map:{layers:{Layer:c}}})}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/map/layers/shape",["dataviz/map/layers/base","dataviz/map/location"],a)}(function(){(function(e,i){var p=e.proxy,m=window.kendo,q=m.Class,c=m.data.DataSource,j=m.dataviz,l=m.deepExtend,r=m.geometry,s=m.drawing,n=s.Group,k=s.util.last,b=s.util.defined,t=j.map,a=t.Location,f=t.layers.Layer;var h=f.extend({init:function(g,d){this._pan=p(this._pan,this);f.fn.init.call(this,g,d);this.surface=s.Surface.create(this.element,{width:g.scrollElement.width(),height:g.scrollElement.height()});this._initRoot();this.movable=new m.ui.Movable(this.surface.element);this._markers=[];this._click=this._handler("shapeClick");this.surface.bind("click",this._click);this._mouseenter=this._handler("shapeMouseEnter");this.surface.bind("mouseenter",this._mouseenter);this._mouseleave=this._handler("shapeMouseLeave");this.surface.bind("mouseleave",this._mouseleave);this._initDataSource()},options:{autoBind:true},destroy:function(){f.fn.destroy.call(this);this.surface.destroy();this.dataSource.unbind("change",this._dataChange)},setDataSource:function(d){if(this.dataSource){this.dataSource.unbind("change",this._dataChange)}this.dataSource=m.data.DataSource.create(d);this.dataSource.bind("change",this._dataChange);if(this.options.autoBind){this.dataSource.fetch()}},_reset:function(){f.fn._reset.call(this);this._translateSurface();if(this._data){this._load(this._data)}},_initRoot:function(){this._root=new n();this.surface.draw(this._root)},_beforeReset:function(){this.surface.clear();this._initRoot()},_resize:function(){this.surface.size(this.map.size())},_initDataSource:function(){var d=this.options.dataSource;this._dataChange=p(this._dataChange,this);this.dataSource=c.create(d).bind("change",this._dataChange);if(d&&this.options.autoBind){this.dataSource.fetch()}},_dataChange:function(d){this._data=d.sender.view();this._load(this._data)},_load:function(v){this._clearMarkers();if(!this._loader){this._loader=new o(this.map,this.options.style,this)}var d=new n();for(var u=0;u<v.length;u++){var g=this._loader.parse(v[u]);if(g){d.append(g)}}this._root.clear();this._root.append(d)},shapeCreated:function(d){var u=false;if(d instanceof s.Circle){u=b(this._createMarker(d))}if(!u){var g={layer:this,shape:d};u=this.map.trigger("shapeCreated",g)}return u},featureCreated:function(d){d.layer=this;this.map.trigger("shapeFeatureCreated",d)},_createMarker:function(g){var d=this.map.markers.bind({location:g.location},g.dataItem);if(d){this._markers.push(d)}return d},_clearMarkers:function(){for(var d=0;d<this._markers.length;d++){this.map.markers.remove(this._markers[d])}this._markers=[]},_pan:function(){if(!this._panning){this._panning=true;this.surface.suspendTracking()}},_panEnd:function(d){f.fn._panEnd.call(this,d);this._translateSurface();this.surface.resumeTracking();this._panning=false},_translateSurface:function(){var g=this.map;var d=g.locationToView(g.extent().nw);if(this.surface.translate){this.surface.translate(d);this.movable.moveTo({x:d.x,y:d.y})}},_handler:function(g){var d=this;return function(v){if(v.element){var u={layer:d,shape:v.element,originalEvent:v.originalEvent};d.map.trigger(g,u)}}},_activate:function(){f.fn._activate.call(this);this.map.bind("pan",this._pan)},_deactivate:function(){f.fn._deactivate.call(this);this.map.unbind("pan",this._pan)}});var o=q.extend({init:function(d,u,g){this.observer=g;this.locator=d;this.style=u},parse:function(u){var g=new n();var d=true;if(u.type==="Feature"){d=false;this._loadGeometryTo(g,u.geometry,u);this._featureCreated(g,u)}else{this._loadGeometryTo(g,u,u)}if(d&&g.children.length<2){g=g.children[0]}return g},_shapeCreated:function(d){var g=false;if(this.observer&&this.observer.shapeCreated){g=this.observer.shapeCreated(d)}return g},_featureCreated:function(g,d){if(this.observer&&this.observer.featureCreated){this.observer.featureCreated({group:g,dataItem:d,properties:d.properties})}},_loadGeometryTo:function(d,x,g){var v=x.coordinates;var u;var w;switch(x.type){case"LineString":w=this._loadPolygon(d,[v],g);this._setLineFill(w);break;case"MultiLineString":for(u=0;u<v.length;u++){w=this._loadPolygon(d,[v[u]],g);this._setLineFill(w)}break;case"Polygon":this._loadPolygon(d,v,g);break;case"MultiPolygon":for(u=0;u<v.length;u++){this._loadPolygon(d,v[u],g)}break;case"Point":this._loadPoint(d,v,g);break;case"MultiPoint":for(u=0;u<v.length;u++){this._loadPoint(d,v[u],g)}break}},_setLineFill:function(g){var d=g.segments;if(d.length<4||!d[0].anchor().equals(k(d).anchor())){g.options.fill=null}},_loadShape:function(d,g){if(!this._shapeCreated(g)){d.append(g)}return g},_loadPolygon:function(d,v,u){var g=this._buildPolygon(v);g.dataItem=u;return this._loadShape(d,g)},_buildPolygon:function(x){var v=x.length>1?s.MultiPath:s.Path;var w=new v(this.style);for(var u=0;u<x.length;u++){for(var g=0;g<x[u].length;g++){var d=this.locator.locationToView(a.fromLngLat(x[u][g]));if(g===0){w.moveTo(d.x,d.y)}else{w.lineTo(d.x,d.y)}}}return w},_loadPoint:function(u,x,w){var g=a.fromLngLat(x);var d=this.locator.locationToView(g);var y=new r.Circle(d,10);var v=new s.Circle(y,this.style);v.dataItem=w;v.location=g;return this._loadShape(u,v)}});l(m.data,{schemas:{geojson:{type:"json",data:function(d){if(d.type==="FeatureCollection"){return d.features}if(d.type==="GeometryCollection"){return d.geometries}return d}}},transports:{geojson:{read:{dataType:"json"}}}});l(j,{map:{layers:{shape:h,ShapeLayer:h},GeoJSONLoader:o}})}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/map/layers/bubble",["dataviz/map/layers/shape"],a)}(function(){(function(i,c){var o=window.kendo,q=o.getter,h=o.dataviz,e=o.deepExtend,k=o.geometry,p=o.drawing,j=p.util,f=j.defined,a=h.map,n=a.Location,r=a.layers.ShapeLayer;var m=r.extend({options:{autoBind:true,locationField:"location",valueField:"value",minSize:0,maxSize:100,scale:"sqrt",symbol:"circle"},_load:function(x){this.surface.clear();if(x.length===0){return}var t=this.options;var w=q(t.valueField);x=x.slice(0);x.sort(function(D,C){return w(C)-w(D)});var s=this._scaleType();var v;for(var y=0;y<x.length;y++){var g=x[y];var A=q(t.locationField)(g);var z=q(t.valueField)(g);if(f(A)&&f(z)){if(!v){v=new s([0,z],[t.minSize,t.maxSize])}A=n.create(A);var d=this.map.locationToView(A);var B=v.map(z);var u=this._createSymbol({center:d,size:B,style:t.style,dataItem:g,location:A});u.dataItem=g;u.location=A;u.value=z;this._drawSymbol(u)}}},_scaleType:function(){var d=this.options.scale;if(o.isFunction(d)){return d}return h.map.scales[d]},_createSymbol:function(d){var g=this.options.symbol;if(!o.isFunction(g)){g=h.map.symbols[g]}return g(d)},_drawSymbol:function(d){var g={layer:this,shape:d};var s=this.map.trigger("shapeCreated",g);if(!s){this.surface.draw(d)}}});var b=o.Class.extend({init:function(t,d){this._domain=t;this._range=d;var g=Math.sqrt(t[1])-Math.sqrt(t[0]);var s=d[1]-d[0];this._ratio=s/g},map:function(g){var d=(Math.sqrt(g)-Math.sqrt(this._domain[0]))*this._ratio;return this._range[0]+d}});var l={circle:function(d){var g=new k.Circle(d.center,d.size/2);return new p.Circle(g,d.style)},square:function(g){var t=new p.Path(g.style);var s=g.size/2;var d=g.center;t.moveTo(d.x-s,d.y-s).lineTo(d.x+s,d.y-s).lineTo(d.x+s,d.y+s).lineTo(d.x-s,d.y+s).close();return t}};e(h,{map:{layers:{bubble:m,BubbleLayer:m},scales:{sqrt:b},symbols:l}})}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/map/layers/tile",["dataviz/map/layers/base","dataviz/map/location"],a)}(function(){(function(d,f){var b=Math,p=d.proxy,o=window.kendo,q=o.Class,v=o.template,h=o.dataviz,k=o.deepExtend,r=o.geometry,w=r.Point,e=h.map.layers.Layer,a=o.util,c=a.renderSize,n=o.drawing.util,u=n.round,s=n.limitValue;var j=e.extend({init:function(y,x){e.fn.init.call(this,y,x);if(typeof this.options.subdomains==="string"){this.options.subdomains=this.options.subdomains.split("")}var g=this._viewType();this._view=new g(this.element,this.options)},destroy:function(){e.fn.destroy.call(this);this._view.destroy();this._view=null},_beforeReset:function(){var x=this.map;var g=x.locationToLayer(x.extent().nw).round();this._view.viewOrigin(g)},_reset:function(){e.fn._reset.call(this);this._updateView();this._view.reset()},_viewType:function(){return i},_activate:function(){e.fn._activate.call(this);if(!o.support.mobileOS){if(!this._pan){this._pan=o.throttle(p(this._render,this),100)}this.map.bind("pan",this._pan)}},_deactivate:function(){e.fn._deactivate.call(this);if(this._pan){this.map.unbind("pan",this._pan)}},_updateView:function(){var g=this._view,z=this.map,x=z.extent(),y={nw:z.locationToLayer(x.nw).round(),se:z.locationToLayer(x.se).round()};g.center(z.locationToLayer(z.center()));g.extent(y);g.zoom(z.zoom())},_resize:function(){this._render()},_panEnd:function(g){e.fn._panEnd.call(this,g);this._render()},_render:function(){this._updateView();this._view.render()}});var i=q.extend({init:function(x,g){this.element=x;this._initOptions(g);this.pool=new l()},options:{tileSize:256,subdomains:["a","b","c"],urlTemplate:""},center:function(g){this._center=g},extent:function(g){this._extent=g},viewOrigin:function(g){this._viewOrigin=g},zoom:function(g){this._zoom=g},pointToTileIndex:function(g){return new w(b.floor(g.x/this.options.tileSize),b.floor(g.y/this.options.tileSize))},tileCount:function(){var y=this.size(),z=this.pointToTileIndex(this._extent.nw),x=this._extent.nw,g=this.indexToPoint(z).translate(-x.x,-x.y);return{x:b.ceil((b.abs(g.x)+y.width)/this.options.tileSize),y:b.ceil((b.abs(g.y)+y.height)/this.options.tileSize)}},size:function(){var g=this._extent.nw,x=this._extent.se,y=x.clone().translate(-g.x,-g.y);return{width:y.x,height:y.y}},indexToPoint:function(z){var g=z.x,A=z.y;return new w(g*this.options.tileSize,A*this.options.tileSize)},subdomainText:function(){var g=this.options.subdomains;return g[this.subdomainIndex++%g.length]},destroy:function(){this.element.empty();this.pool.empty()},reset:function(){this.pool.reset();this.subdomainIndex=0;this.render()},render:function(){var z=this.tileCount(),B=this.pointToTileIndex(this._extent.nw),A,g,C;for(g=0;g<z.x;g++){for(C=0;C<z.y;C++){A=this.createTile({x:B.x+g,y:B.y+C});if(!A.visible){A.show()}}}},createTile:function(g){var x=this.tileOptions(g);var y=this.pool.get(this._center,x);if(y.element.parent().length===0){this.element.append(y.element)}return y},tileOptions:function(x){var z=this.wrapIndex(x),g=this.indexToPoint(x),y=this._viewOrigin,A=g.clone().translate(-y.x,-y.y);return{index:z,currentIndex:x,point:g,offset:m(A),zoom:this._zoom,size:this.options.tileSize,subdomain:this.subdomainText(),urlTemplate:this.options.urlTemplate,errorUrlTemplate:this.options.errorUrlTemplate}},wrapIndex:function(g){var x=b.pow(2,this._zoom);return{x:this.wrapValue(g.x,x),y:s(g.y,0,x-1)}},wrapValue:function(x,y){var g=b.abs(x)%y;if(x>=0){x=g}else{x=y-(g===0?y:g)}return x}});var t=q.extend({init:function(x,g){this.id=x;this.visible=true;this._initOptions(g);this.createElement();this.show()},options:{urlTemplate:"",errorUrlTemplate:""},createElement:function(){this.element=d("<img style='position: absolute; display: block;' />").css({width:this.options.size,height:this.options.size}).on("error",p(function(g){if(this.errorUrl()){g.target.setAttribute("src",this.errorUrl())}else{g.target.removeAttribute("src")}},this))},show:function(){var x=this.element[0];x.style.top=c(this.options.offset.y);x.style.left=c(this.options.offset.x);var g=this.url();if(g){x.setAttribute("src",g)}x.style.visibility="visible";this.visible=true},hide:function(){this.element[0].style.visibility="hidden";this.visible=false},url:function(){var g=v(this.options.urlTemplate);return g(this.urlOptions())},errorUrl:function(){var g=v(this.options.errorUrlTemplate);return g(this.urlOptions())},urlOptions:function(){var g=this.options;return{zoom:g.zoom,subdomain:g.subdomain,z:g.zoom,x:g.index.x,y:g.index.y,s:g.subdomain,quadkey:g.quadkey,q:g.quadkey,culture:g.culture,c:g.culture}},destroy:function(){if(this.element){this.element.remove();this.element=null}}});var l=q.extend({init:function(){this._items=[]},options:{maxSize:100},get:function(g,x){if(this._items.length>=this.options.maxSize){this._remove(g)}return this._create(x)},empty:function(){var g=this._items;for(var x=0;x<g.length;x++){g[x].destroy()}this._items=[]},reset:function(){var g=this._items;for(var x=0;x<g.length;x++){g[x].hide()}},_create:function(x){var g=this._items;var z;var A=a.hashKey(x.point.toString()+x.offset.toString()+x.zoom+x.urlTemplate);for(var y=0;y<g.length;y++){if(g[y].id===A){z=g[y];break}}if(z){z.show()}else{z=new t(A,x);this._items.push(z)}return z},_remove:function(g){var x=this._items;var A=-1;var y=-1;for(var z=0;z<x.length;z++){var B=x[z].options.point.distanceTo(g);if(B>A&&!x[z].visible){y=z;A=B}}if(y!==-1){x[y].destroy();x.splice(y,1)}}});function m(g){return new w(u(g.x),u(g.y))}k(h,{map:{layers:{tile:j,TileLayer:j,ImageTile:t,TilePool:l,TileView:i}}})}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/map/layers/bing",["dataviz/map/layers/tile"],a)}(function(){(function(h,b){var j=window.kendo,f=j.dataviz,c=j.deepExtend,e=j.drawing.util.defined,k=f.map.Extent,i=f.map.Location,d=f.map.layers.TileLayer,g=f.map.layers.TileView;var a=d.extend({init:function(n,m){this.options.baseUrl=this._scheme()+"://dev.virtualearth.net/REST/v1/Imagery/Metadata/";d.fn.init.call(this,n,m);this._onMetadata=h.proxy(this._onMetadata,this);this._fetchMetadata()},options:{imagerySet:"road"},_fetchMetadata:function(){var m=this.options;if(!m.key){throw new Error("Bing tile layer: API key is required")}h.ajax({url:m.baseUrl+m.imagerySet,data:{output:"json",include:"ImageryProviders",key:m.key,uriScheme:this._scheme()},type:"get",dataType:"jsonp",jsonp:"jsonp",success:this._onMetadata})},_scheme:function(m){m=m||window.location.protocol;return m.replace(":","")==="https"?"https":"http"},_onMetadata:function(o){if(o&&o.resourceSets.length){var n=this.resource=o.resourceSets[0].resources[0];c(this._view.options,{urlTemplate:n.imageUrl.replace("{subdomain}","#= subdomain #").replace("{quadkey}","#= quadkey #").replace("{culture}","#= culture #"),subdomains:n.imageUrlSubdomains});var m=this.options;if(!e(m.minZoom)){m.minZoom=n.zoomMin}if(!e(m.maxZoom)){m.maxZoom=n.zoomMax}this._addAttribution();if(this.element.css("display")!=="none"){this._reset()}}},_viewType:function(){return l},_addAttribution:function(){var m=this.map.attribution;if(m){var n=this.resource.imageryProviders;if(n){for(var o=0;o<n.length;o++){var q=n[o];for(var r=0;r<q.coverageAreas.length;r++){var p=q.coverageAreas[r];m.add({text:q.attribution,minZoom:p.zoomMin,maxZoom:p.zoomMax,extent:new k(new i(p.bbox[2],p.bbox[1]),new i(p.bbox[0],p.bbox[3]))})}}}}},imagerySet:function(m){if(m){this.options.imagerySet=m;this.map.attribution.clear();this._fetchMetadata()}else{return this.options.imagerySet}}});var l=g.extend({options:{culture:"en-US"},tileOptions:function(m){var n=g.fn.tileOptions.call(this,m);n.culture=this.options.culture;n.quadkey=this.tileQuadKey(this.wrapIndex(m));return n},tileQuadKey:function(o){var n="",q,m,p;for(p=this._zoom;p>0;p--){q=0;m=1<<p-1;if((o.x&m)!==0){q++}if((o.y&m)!==0){q+=2}n+=q}return n}});c(f,{map:{layers:{bing:a,BingLayer:a,BingView:l}}})}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/map/layers/marker",["dataviz/map/layers/base","dataviz/map/location","kendo.data","kendo.tooltip"],a)}(function(){(function(g,c){var p=document,o=Math,m=g.inArray,j=g.proxy,i=window.kendo,b=i.Class,q=i.data.DataSource,l=i.ui.Tooltip,f=i.dataviz,e=i.deepExtend,a=f.map,h=a.Location,d=a.layers.Layer;var n=d.extend({init:function(s,r){d.fn.init.call(this,s,r);this._markerClick=j(this._markerClick,this);this.element.on("click",".k-marker",this._markerClick);this.items=[];this._initDataSource()},destroy:function(){d.fn.destroy.call(this);this.element.off("click",".k-marker",this._markerClick);this.dataSource.unbind("change",this._dataChange);this.clear()},options:{zIndex:1000,autoBind:true,dataSource:{},locationField:"location",titleField:"title"},add:function(r){if(g.isArray(r)){for(var s=0;s<r.length;s++){this._addOne(r[s])}}else{return this._addOne(r)}},remove:function(r){r.destroy();var s=m(r,this.items);if(s>-1){this.items.splice(s,1)}},clear:function(){for(var r=0;r<this.items.length;r++){this.items[r].destroy()}this.items=[]},update:function(r){var t=r.location();if(t){r.showAt(this.map.locationToView(t));var s={marker:r,layer:this};this.map.trigger("markerActivate",s)}},_reset:function(){d.fn._reset.call(this);var r=this.items;for(var s=0;s<r.length;s++){this.update(r[s])}},bind:function(u,t){var r=a.Marker.create(u,this.options);r.dataItem=t;var s={marker:r,layer:this};var v=this.map.trigger("markerCreated",s);if(!v){this.add(r);return r}},setDataSource:function(r){if(this.dataSource){this.dataSource.unbind("change",this._dataChange)}this.dataSource=i.data.DataSource.create(r);this.dataSource.bind("change",this._dataChange);if(this.options.autoBind){this.dataSource.fetch()}},_addOne:function(r){var s=k.create(r,this.options);s.addTo(this);return s},_initDataSource:function(){var r=this.options.dataSource;this._dataChange=j(this._dataChange,this);this.dataSource=q.create(r).bind("change",this._dataChange);if(r&&this.options.autoBind){this.dataSource.fetch()}},_dataChange:function(r){this._load(r.sender.view())},_load:function(v){this._data=v;this.clear();var u=i.getter(this.options.locationField);var t=i.getter(this.options.titleField);for(var s=0;s<v.length;s++){var r=v[s];this.bind({location:u(r),title:t(r)},r)}},_markerClick:function(s){var r={marker:g(s.target).data("kendoMarker"),layer:this};this.map.trigger("markerClick",r)}});var k=b.extend({init:function(r){this.options=r||{}},addTo:function(r){this.layer=r.markers||r;this.layer.items.push(this);this.layer.update(this)},location:function(r){if(r){this.options.location=h.create(r).toArray();if(this.layer){this.layer.update(this)}return this}else{return h.create(this.options.location)}},showAt:function(r){this.render();this.element.css({left:o.round(r.x),top:o.round(r.y)});if(this.tooltip&&this.tooltip.popup){this.tooltip.popup._position()}},hide:function(){if(this.element){this.element.remove();this.element=null}if(this.tooltip){this.tooltip.destroy();this.tooltip=null}},destroy:function(){this.layer=null;this.hide()},render:function(){if(!this.element){var r=this.options;var s=this.layer;this.element=g(p.createElement("span")).addClass("k-marker k-marker-"+i.toHyphens(r.shape||"pin")).attr("title",r.title).attr(r.attributes||{}).data("kendoMarker",this).css("zIndex",r.zIndex);if(s){s.element.append(this.element)}this.renderTooltip()}},renderTooltip:function(){var r=this;var v=r.options.title;var s=r.options.tooltip||{};if(s&&l){var t=s.template;if(t){var u=i.template(t);s.content=function(w){w.location=r.location();w.marker=r;return u(w)}}if(v||s.content||s.contentUrl){this.tooltip=new l(this.element,s);this.tooltip.marker=this}}}});k.create=function(r,s){if(r instanceof k){return r}return new k(e({},s,r))};e(f,{map:{layers:{marker:n,MarkerLayer:n},Marker:k}})}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/map/main",["dataviz/map/crs","dataviz/map/location"],a)}(function(){(function(j,k){var E=document,f=Math,u=f.min,h=f.pow,v=j.proxy,t=window.kendo,e=t.ui.Widget,o=t.deepExtend,n=t.dataviz,s=n.ui,w=t.geometry,C=w.Point,B=n.map,D=B.Extent,c=B.Location,r=B.crs.EPSG3857,a=t.util,m=a.renderPos,q=t.drawing.util,d=q.defined,y=q.limitValue,p=q.valueOrDefault;var z="k-",A=0.9,b=0.93,x="DOMMouseScroll mousewheel",l=5;var i=e.extend({init:function(F,g){t.destroy(F);e.fn.init.call(this,F);this._initOptions(g);this.bind(this.events,g);this.crs=new r();this.element.addClass(z+this.options.name.toLowerCase()).css("position","relative").empty().append(E.createElement("div"));this._viewOrigin=this._getOrigin();this._initScroller();this._initMarkers();this._initControls();this._initLayers();this._reset();this._mousewheel=v(this._mousewheel,this);this.element.bind("click",v(this._click,this));this.element.bind(x,this._mousewheel)},options:{name:"Map",controls:{attribution:true,navigator:{panStep:100},zoom:true},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:0.5}}},bubble:{style:{fill:{color:"#fff",opacity:0.5},stroke:{color:"#aaa",width:0.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:true},events:["beforeReset","click","markerActivate","markerClick","markerCreated","pan","panEnd","reset","shapeClick","shapeCreated","shapeFeatureCreated","shapeMouseEnter","shapeMouseLeave","zoomEnd","zoomStart"],destroy:function(){this.scroller.destroy();if(this.navigator){this.navigator.destroy()}if(this.attribution){this.attribution.destroy()}if(this.zoomControl){this.zoomControl.destroy()}this.markers.destroy();for(var g=0;g<this.layers.length;g++){this.layers[g].destroy()}e.fn.destroy.call(this)},zoom:function(F){var g=this.options;if(d(F)){F=f.round(y(F,g.minZoom,g.maxZoom));if(g.zoom!==F){g.zoom=F;this._reset()}return this}else{return g.zoom}},center:function(g){if(g){this.options.center=c.create(g).toArray();this._reset();return this}else{return c.create(this.options.center)}},extent:function(g){if(g){this._setExtent(g);return this}else{return this._getExtent()}},setOptions:function(g){e.fn.setOptions.call(this,g);this._reset()},locationToLayer:function(g,F){var G=!this.options.wraparound;g=c.create(g);return this.crs.toPoint(g,this._layerSize(F),G)},layerToLocation:function(g,F){var G=!this.options.wraparound;g=C.create(g);return this.crs.toLocation(g,this._layerSize(F),G)},locationToView:function(F){F=c.create(F);var G=this.locationToLayer(this._viewOrigin);var g=this.locationToLayer(F);return g.translateWith(G.scale(-1))},viewToLocation:function(g,G){var F=this.locationToLayer(this._getOrigin(),G);g=C.create(g);g=g.clone().translateWith(F);return this.layerToLocation(g,G)},eventOffset:function(G){var H=this.element.offset();var F=G.originalEvent||G;var g=p(F.pageX,F.clientX)-H.left;var I=p(F.pageY,F.clientY)-H.top;return new w.Point(g,I)},eventToView:function(g){var F=this.eventOffset(g);return this.locationToView(this.viewToLocation(F))},eventToLayer:function(g){return this.locationToLayer(this.eventToLocation(g))},eventToLocation:function(g){var F=this.eventOffset(g);return this.viewToLocation(F)},viewSize:function(){var g=this.element;var G=this._layerSize();var F=g.width();if(!this.options.wraparound){F=u(G,F)}return{width:F,height:u(G,g.height())}},exportVisual:function(){this._reset();return false},_setOrigin:function(g,H){var F=this.viewSize(),G;g=this._origin=c.create(g);G=this.locationToLayer(g,H);G.x+=F.width/2;G.y+=F.height/2;this.options.center=this.layerToLocation(G,H).toArray();return this},_getOrigin:function(G){var g=this.viewSize(),F;if(G||!this._origin){F=this.locationToLayer(this.center());F.x-=g.width/2;F.y-=g.height/2;this._origin=this.layerToLocation(F)}return this._origin},_setExtent:function(H){H=D.create(H);this.center(H.center());var G=this.element.width();var g=this.element.height();for(var J=this.options.maxZoom;J>=this.options.minZoom;J--){var F=this.locationToLayer(H.nw,J);var K=this.locationToLayer(H.se,J);var I=f.abs(K.x-F.x);var L=f.abs(K.y-F.y);if(I<=G&&L<=g){break}}this.zoom(J)},_getExtent:function(){var g=this._getOrigin();var G=this.locationToLayer(g);var F=this.viewSize();G.x+=F.width;G.y+=F.height;var H=this.layerToLocation(G);return new D(g,H)},_zoomAround:function(g,F){this._setOrigin(this.layerToLocation(g,F),F);this.zoom(F)},_initControls:function(){var g=this.options.controls;if(s.Attribution&&g.attribution){this._createAttribution(g.attribution)}if(!t.support.mobileOS){if(s.Navigator&&g.navigator){this._createNavigator(g.navigator)}if(s.ZoomControl&&g.zoom){this._createZoomControl(g.zoom)}}},_createControlElement:function(G,F){var I=G.position||F;var g="."+m(I).replace(" ",".");var H=j(".k-map-controls"+g,this.element);if(H.length===0){H=j("<div>").addClass("k-map-controls "+m(I)).appendTo(this.element)}return j("<div>").appendTo(H)},_createAttribution:function(g){var F=this._createControlElement(g,"bottomRight");this.attribution=new s.Attribution(F,g)},_createNavigator:function(F){var G=this._createControlElement(F,"topLeft");var g=this.navigator=new s.Navigator(G,F);this._navigatorPan=v(this._navigatorPan,this);g.bind("pan",this._navigatorPan);this._navigatorCenter=v(this._navigatorCenter,this);g.bind("center",this._navigatorCenter)},_navigatorPan:function(K){var J=this;var G=J.scroller;var F=G.scrollLeft+K.x;var L=G.scrollTop-K.y;var I=this._virtualSize;var g=this.element.height();var H=this.element.width();F=y(F,I.x.min,I.x.max-H);L=y(L,I.y.min,I.y.max-g);J.scroller.one("scroll",function(M){J._scrollEnd(M)});J.scroller.scrollTo(-F,-L)},_navigatorCenter:function(){this.center(this.options.center)},_createZoomControl:function(F){var G=this._createControlElement(F,"topLeft");var g=this.zoomControl=new s.ZoomControl(G,F);this._zoomControlChange=v(this._zoomControlChange,this);g.bind("change",this._zoomControlChange)},_zoomControlChange:function(g){if(!this.trigger("zoomStart",{originalEvent:g})){this.zoom(this.zoom()+g.delta);this.trigger("zoomEnd",{originalEvent:g})}},_initScroller:function(){var G=t.support.mobileOS?b:A;var F=this.options.zoomable!==false;var g=this.scroller=new t.mobile.ui.Scroller(this.element.children(0),{friction:G,velocityMultiplier:l,zoom:F,mousewheelScrolling:false});g.bind("scroll",v(this._scroll,this));g.bind("scrollEnd",v(this._scrollEnd,this));g.userEvents.bind("gesturestart",v(this._scaleStart,this));g.userEvents.bind("gestureend",v(this._scale,this));this.scrollElement=g.scrollElement},_initLayers:function(){var g=this.options.layers,K=this.layers=[];for(var H=0;H<g.length;H++){var G=g[H];var I=G.type||"shape";var J=this.options.layerDefaults[I];var F=n.map.layers[I];K.push(new F(this,o({},J,G)))}},_initMarkers:function(){this.markers=new B.layers.MarkerLayer(this,this.options.markerDefaults);this.markers.add(this.options.markers)},_scroll:function(G){var g=this.locationToLayer(this._viewOrigin).round();var F=G.sender.movable;var H=new w.Point(F.x,F.y).scale(-1).scale(1/F.scale);g.x+=H.x;g.y+=H.y;this._scrollOffset=H;this._setOrigin(this.layerToLocation(g));this.trigger("pan",{originalEvent:G,origin:this._getOrigin(),center:this.center()})},_scrollEnd:function(g){if(!this._scrollOffset||!this._panComplete()){return}this._scrollOffset=null;this._panEndTS=new Date();this.trigger("panEnd",{originalEvent:g,origin:this._getOrigin(),center:this.center()})},_panComplete:function(){return new Date()-(this._panEndTS||0)>50},_scaleStart:function(g){if(this.trigger("zoomStart",{originalEvent:g})){var F=g.touches[1];if(F){F.cancel()}}},_scale:function(I){var J=this.scroller.movable.scale;var F=this._scaleToZoom(J);var H=new w.Point(I.center.x,I.center.y);var g=this.viewToLocation(H,F);var K=this.locationToLayer(g,F);var G=K.translate(-H.x,-H.y);this._zoomAround(G,F);this.trigger("zoomEnd",{originalEvent:I})},_scaleToZoom:function(F){var H=this._layerSize()*F;var g=H/this.options.minSize;var G=f.log(g)/f.log(2);return f.round(G)},_reset:function(){if(this.attribution){this.attribution.filter(this.center(),this.zoom())}this._viewOrigin=this._getOrigin(true);this._resetScroller();this.trigger("beforeReset");this.trigger("reset")},_resetScroller:function(){var G=this.scroller;var L=G.dimensions.x;var K=G.dimensions.y;var F=this._layerSize();var H=this.extent().nw;var M=this.locationToLayer(H).round();G.movable.round=true;G.reset();G.userEvents.cancel();var N=this.zoom();G.dimensions.forcedMinScale=h(2,this.options.minZoom-N);G.dimensions.maxScale=h(2,this.options.maxZoom-N);var g={min:-M.x,max:F-M.x};var I={min:-M.y,max:F-M.y};if(this.options.wraparound){g.max=20*F;g.min=-g.max}if(this.options.pannable===false){var J=this.viewSize();g.min=I.min=0;g.max=J.width;I.max=J.height}L.makeVirtual();K.makeVirtual();L.virtualSize(g.min,g.max);K.virtualSize(I.min,I.max);this._virtualSize={x:g,y:I}},_renderLayers:function(){var g=this.options.layers,L=this.layers=[],J=this.scrollWrap;J.empty();for(var H=0;H<g.length;H++){var G=g[H];var I=G.type||"shape";var K=this.options.layerDefaults[I];var F=n.map.layers[I];L.push(new F(this,o({},K,G)))}},_layerSize:function(g){g=p(g,this.options.zoom);return this.options.minSize*h(2,g)},_click:function(g){if(!this._panComplete()){return}var F=this.eventOffset(g);this.trigger("click",{originalEvent:g,location:this.viewToLocation(F)})},_mousewheel:function(G){G.preventDefault();var K=n.mwDelta(G)>0?-1:1;var M=this.options;var F=this.zoom();var g=y(F+K,M.minZoom,M.maxZoom);if(M.zoomable!==false&&g!==F){if(!this.trigger("zoomStart",{originalEvent:G})){var L=this.eventOffset(G);var J=this.viewToLocation(L);var H=this.locationToLayer(J,g);var I=H.translate(-L.x,-L.y);this._zoomAround(I,g);this.trigger("zoomEnd",{originalEvent:G})}}}});n.ui.plugin(i)}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.dataviz.map",["kendo.data","kendo.userevents","kendo.tooltip","kendo.mobile.scroller","kendo.draganddrop","kendo.dataviz.core","dataviz/map/location","dataviz/map/attribution","dataviz/map/navigator","dataviz/map/zoom","dataviz/map/crs","dataviz/map/layers/base","dataviz/map/layers/shape","dataviz/map/layers/bubble","dataviz/map/layers/tile","dataviz/map/layers/bing","dataviz/map/layers/marker","dataviz/map/main"],a)}(function(){var a={id:"dataviz.map",name:"Map",category:"dataviz",description:"The Kendo DataViz Map displays spatial data",depends:["data","userevents","tooltip","dataviz.core","drawing","mobile.scroller"]};return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/diagram/utils",["kendo.core"],a)}(function(){(function(g,c){var k=window.kendo,f=k.dataviz.diagram={},e=k.deepExtend,h=g.isArray,d=0.000001;var i={};e(i,{isNearZero:function(n){return Math.abs(n)<d},isDefined:function(n){return typeof n!=="undefined"},isUndefined:function(n){return typeof n==="undefined"||n===null},isObject:function(n){return n===Object(n)},has:function(o,n){return Object.hasOwnProperty.call(o,n)},isString:function(n){return Object.prototype.toString.call(n)=="[object String]"},isBoolean:function(n){return Object.prototype.toString.call(n)=="[object Boolean]"},isType:function(o,n){return Object.prototype.toString.call(o)=="[object "+n+"]"},isNumber:function(n){return !isNaN(parseFloat(n))&&isFinite(n)},isEmpty:function(o){if(o===null){return true}if(h(o)||i.isString(o)){return o.length===0}for(var n in o){if(i.has(o,n)){return false}}return true},simpleExtend:function(n,p){if(!i.isObject(p)){return}for(var o in p){n[o]=p[o]}},initArray:function l(o,p){var q=[];for(var n=0;n<o;++n){q[n]=p}return q},serializePoints:function(q){var o=[];for(var n=0;n<q.length;n++){var r=q[n];o.push(r.x+";"+r.y)}return o.join(";")},deserializePoints:function(q){var n=q.split(";"),p=[];if(n.length%2!==0){throw"Not an array of points."}for(var o=0;o<n.length;o+=2){p.push(new f.Point(parseInt(n[o],10),parseInt(n[o+1],10)))}return p},randomInteger:function(n,o){return parseInt(Math.floor(Math.random()*o)+n,10)},DFT:function(o,q){q(o);if(o.childNodes){for(var n=0;n<o.childNodes.length;n++){var p=o.childNodes[n];this.DFT(p,q)}}},getMatrixAngle:function(n){if(n===null||n.d===0){return 0}return Math.atan2(n.b,n.d)*180/Math.PI},getMatrixScaling:function(n){var p=Math.sqrt(n.a*n.a+n.c*n.c);var o=Math.sqrt(n.b*n.b+n.d*n.d);return[p,o]}});function b(u,r,s){if(typeof u=="undefined"||typeof r=="undefined"){return[]}if(s&&i.sign(r-u)!=i.sign(s)){throw"The sign of the increment should allow to reach the stop-value."}s=s||1;u=u||0;r=r||u;if((r-u)/s===Infinity){throw"Infinite range defined."}var o=[],q=-1,p;function t(v){var w=1;while(v*w%1){w*=10}return w}var n=t(Math.abs(s));u*=n;r*=n;s*=n;if(u>r&&s>0){s=-s}if(s<0){while((p=u+s*++q)>=r){o.push(p/n)}}else{while((p=u+s*++q)<=r){o.push(p/n)}}return o}function m(r,o){if(r==o){return 0}var n=o.x-r.x,p=r.y-o.y,q=Math.atan(n/p);if(p>=0){return n<0?q+2*Math.PI:q}return q+Math.PI}i.sign=function(n){return n?n<0?-1:1:0};i.findAngle=function(n,o){return m(n,o)*180/Math.PI};i.forEach=function(n,p,q){for(var o=0;o<n.length;o++){p.call(q,n[o],o,n)}};i.any=function(o,n){for(var p=0;p<o.length;++p){if(n(o[p])){return o[p]}}return null};i.remove=function(n,p){var o;while((o=i.indexOf(n,p))!==-1){n.splice(o,1)}return n};i.contains=function(n,o){return i.indexOf(n,o)!==-1};i.indexOf=function(n,o){return g.inArray(o,n)};i.fold=function(t,q,s,p){var n=arguments.length>2;for(var o=0;o<t.length;o++){var r=t[o];if(!n){s=r;n=true}else{s=q.call(p,s,r,o,t)}}if(!n){throw"Reduce of empty array with no initial value"}return s};i.find=function(o,q,p){var n;i.any(o,function(t,r,s){if(q.call(p,t,r,s)){n=t;return true}return false});return n};i.first=function(n,p,o){if(n.length===0){return null}if(i.isUndefined(p)){return n[0]}return i.find(n,p,o)};i.insert=function(o,p,n){o.splice(n,0,p);return o};i.all=function(o,r,q){var n=true;var s;for(var p=0;p<o.length;p++){s=o[p];n=n&&r.call(q,s,p,o);if(!n){break}}return n};i.clear=function(n){n.splice(0,n.length)};i.bisort=function(o,n,p){if(i.isUndefined(o)){throw"First array is not specified."}if(i.isUndefined(n)){throw"Second array is not specified."}if(o.length!=n.length){throw"The two arrays should have equal length"}var r=[],q;for(q=0;q<o.length;q++){r.push({x:o[q],y:n[q]})}if(i.isUndefined(p)){r.sort(function(s,t){return s.x-t.x})}else{r.sort(function(s,t){return p(s.x,t.x)})}i.clear(o);i.clear(n);for(q=0;q<r.length;q++){o.push(r[q].x);n.push(r[q].y)}};i.addRange=function(n,o){n.push.apply(n,o)};var j={easeInOut:function(n){return -Math.cos(n*Math.PI)/2+0.5}};var a=k.Class.extend({init:function(){this.adapters=[];this.target=0;this.tick=0;this.interval=20;this.duration=800;this.lastTime=null;this.handlers=[];var n=this;this.transition=j.easeInOut;this.timerDelegate=function(){n.onTimerEvent()}},addAdapter:function(n){this.adapters.push(n)},onComplete:function(n){this.handlers.push(n)},removeHandler:function(n){this.handlers=g.grep(this.handlers,function(o){return o!==n})},trigger:function(){var n=this;if(this.handlers){i.forEach(this.handlers,function(o){return o.call(n.caller!==null?n.caller:n)})}},onStep:function(){},seekTo:function(n){this.seekFromTo(this.tick,n)},seekFromTo:function(o,n){this.target=Math.max(0,Math.min(1,n));this.tick=Math.max(0,Math.min(1,o));this.lastTime=new Date().getTime();if(!this.intervalId){this.intervalId=window.setInterval(this.timerDelegate,this.interval)}},stop:function(){if(this.intervalId){window.clearInterval(this.intervalId);this.intervalId=null;this.trigger()}},play:function(n){if(this.adapters.length===0){return}if(n!==null){this.caller=n}this.initState();this.seekFromTo(0,1)},reverse:function(){this.seekFromTo(1,0)},initState:function(){if(this.adapters.length===0){return}for(var n=0;n<this.adapters.length;n++){this.adapters[n].initState()}},propagate:function(){var o=this.transition(this.tick);for(var n=0;n<this.adapters.length;n++){this.adapters[n].update(o)}},onTimerEvent:function(){var p=new Date().getTime();var n=p-this.lastTime;this.lastTime=p;var o=n/this.duration*(this.tick<this.target?1:-1);if(Math.abs(o)>=Math.abs(this.tick-this.target)){this.tick=this.target}else{this.tick+=o}try{this.propagate()}finally{this.onStep.call(this);if(this.target==this.tick){this.stop()}}}});k.deepExtend(f,{init:function(n){k.init(n,f.ui)},Utils:i,Range:b,Ticker:a})}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/diagram/math",["dataviz/diagram/utils","kendo.dataviz.core"],a)}(function(){(function(z,k){var A=window.kendo,f=A.dataviz.diagram,b=A.Class,C=A.deepExtend,h=A.dataviz,E=f.Utils,p=h.Point2D,o=A.isFunction,y=E.contains,w=z.map;var J=3,l=0.000001;C(p.fn,{plus:function(K){return new p(this.x+K.x,this.y+K.y)},minus:function(K){return new p(this.x-K.x,this.y-K.y)},offset:function(K){return new p(this.x-K,this.y-K)},times:function(K){return new p(this.x*K,this.y*K)},normalize:function(){if(this.length()===0){return new p()}return this.times(1/this.length())},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},toString:function(){return"("+this.x+","+this.y+")"},lengthSquared:function(){return this.x*this.x+this.y*this.y},middleOf:function n(L,K){return new p(K.x-L.x,K.y-L.y).times(0.5).plus(L)},toPolar:function(N){var M=1;if(N){M=180/Math.PI}var L=Math.atan2(Math.abs(this.y),Math.abs(this.x));var O=Math.PI/2;var K=this.length();if(this.x===0){if(this.y===0){return new m(0,0)}if(this.y>0){return new m(K,M*O)}if(this.y<0){return new m(K,M*3*O)}}else{if(this.x>0){if(this.y===0){return new m(K,0)}if(this.y>0){return new m(K,M*L)}if(this.y<0){return new m(K,M*(4*O-L))}}else{if(this.y===0){return new m(K,2*O)}if(this.y>0){return new m(K,M*(2*O-L))}if(this.y<0){return new m(K,M*(2*O+L))}}}},isOnLine:function(Q,P){if(Q.x>P.x){var M=P;P=Q;Q=M}var L=new r(Q.x,Q.y).inflate(J,J),K=new r(P.x,P.y).inflate(J,J),N,O;if(L.union(K).contains(this)){if(Q.x===P.x||Q.y===P.y){return true}else{if(Q.y<P.y){N=L.x+(K.x-L.x)*(this.y-(L.y+L.height))/(K.y+K.height-(L.y+L.height));O=L.x+L.width+(K.x+K.width-(L.x+L.width))*(this.y-L.y)/(K.y-L.y)}else{N=L.x+(K.x-L.x)*(this.y-L.y)/(K.y-L.y);O=L.x+L.width+(K.x+K.width-(L.x+L.width))*(this.y-(L.y+L.height))/(K.y+K.height-(L.y+L.height))}}return this.x>N&&this.x<O}return false}});C(p,{parse:function(N){var L=N.slice(1,N.length-1),M=L.split(","),K=parseInt(M[0],10),O=parseInt(M[1],10);if(!isNaN(K)&&!isNaN(O)){return new p(K,O)}}});var j=b.extend({init:function(M,L,K){this.point=M;this.left=L;this.right=K}});var r=b.extend({init:function(L,N,M,K){this.x=L||0;this.y=N||0;this.width=M||0;this.height=K||0},contains:function(K){return K.x>=this.x&&K.x<=this.x+this.width&&K.y>=this.y&&K.y<=this.y+this.height},inflate:function(L,K){if(K===k){K=L}this.x-=L;this.y-=K;this.width+=2*L+1;this.height+=2*K+1;return this},offset:function(M,L){var K=M,N=L;if(M instanceof p){K=M.x;N=M.y}this.x+=K;this.y+=N;return this},union:function(O){var L=Math.min(this.x,O.x);var N=Math.min(this.y,O.y);var K=Math.max(this.x+this.width,O.x+O.width);var M=Math.max(this.y+this.height,O.y+O.height);return new r(L,N,K-L,M-N)},center:function(){return new p(this.x+this.width/2,this.y+this.height/2)},top:function(){return new p(this.x+this.width/2,this.y)},right:function(){return new p(this.x+this.width,this.y+this.height/2)},bottom:function(){return new p(this.x+this.width/2,this.y+this.height)},left:function(){return new p(this.x,this.y+this.height/2)},topLeft:function(){return new p(this.x,this.y)},topRight:function(){return new p(this.x+this.width,this.y)},bottomLeft:function(){return new p(this.x,this.y+this.height)},bottomRight:function(){return new p(this.x+this.width,this.y+this.height)},clone:function(){return new r(this.x,this.y,this.width,this.height)},isEmpty:function(){return !this.width&&!this.height},equals:function(K){return this.x===K.x&&this.y===K.y&&this.width===K.width&&this.height===K.height},rotatedBounds:function(P){var N=this.clone(),M=this.rotatedPoints(P),K=M[0],O=M[1],L=M[2],Q=M[3];N.x=Math.min(L.x,K.x,O.x,Q.x);N.y=Math.min(L.y,K.y,O.y,Q.y);N.width=Math.max(L.x,K.x,O.x,Q.x)-N.x;N.height=Math.max(L.y,K.y,O.y,Q.y)-N.y;return N},rotatedPoints:function(O){var M=this,Q=M.center(),L=M.bottomRight().rotate(Q,360-O),K=M.topLeft().rotate(Q,360-O),N=M.topRight().rotate(Q,360-O),P=M.bottomLeft().rotate(Q,360-O);return[K,N,L,P]},toString:function(K){K=K||" ";return this.x+K+this.y+K+this.width+K+this.height},scale:function(R,P,T,O,K){var S=this.topLeft();var M=this.center();S.rotate(M,360-K).rotate(O,K);var Q=T.minus(S);var L=new p(Q.x*R,Q.y*P);var N=Q.minus(L);S=S.plus(N);S.rotate(O,360-K).rotate(M,K);this.x=S.x;this.y=S.y;this.width*=R;this.height*=P},zoom:function(K){this.x*=K;this.y*=K;this.width*=K;this.height*=K;return this},overlaps:function(M){var L=this.bottomRight();var K=M.bottomRight();var N=!(L.x<M.x||L.y<M.y||K.x<this.x||K.y<this.y);return N}});var c=b.extend({init:function(L,K){this.width=L;this.height=K}});c.prototype.Empty=new c(0,0);r.toRect=function(K){if(!(K instanceof r)){K=new r(K.x,K.y,K.width,K.height)}return K};r.empty=function(){return new r(0,0,0,0)};r.fromPoints=function(L,K){if(isNaN(L.x)||isNaN(L.y)||isNaN(K.x)||isNaN(K.y)){throw"Some values are NaN."}return new r(Math.min(L.x,K.x),Math.min(L.y,K.y),Math.abs(L.x-K.x),Math.abs(L.y-K.y))};function G(K){return Math.abs(K)<l}function D(M,P,L,N,S){var T=(P.x-M.x)*(N.y-L.y)-(P.y-M.y)*(N.x-L.x);if(G(T)){return}var Q=(M.y-L.y)*(N.x-L.x)-(M.x-L.x)*(N.y-L.y);var O=(M.y-L.y)*(P.x-M.x)-(M.x-L.x)*(P.y-M.y);var K=Q/T;var R=O/T;if(S&&(K<0||K>1||R<0||R>1)){return}return new p(M.x+K*(P.x-M.x),M.y+K*(P.y-M.y))}var H={lines:function(N,L,M,K){return D(N,L,M,K)},segments:function(N,L,M,K){return D(N,L,M,K,true)},rectWithLine:function(L,M,K){return H.segments(M,K,L.topLeft(),L.topRight())||H.segments(M,K,L.topRight(),L.bottomRight())||H.segments(M,K,L.bottomLeft(),L.bottomRight())||H.segments(M,K,L.topLeft(),L.bottomLeft())},rects:function(R,Q,N){var T=Q.topLeft(),P=Q.topRight(),M=Q.bottomLeft(),S=Q.bottomRight();var K=Q.center();if(N){T=T.rotate(K,N);P=P.rotate(K,N);M=M.rotate(K,N);S=S.rotate(K,N)}var L=R.contains(T)||R.contains(P)||R.contains(M)||R.contains(S)||H.rectWithLine(R,T,P)||H.rectWithLine(R,T,M)||H.rectWithLine(R,P,S)||H.rectWithLine(R,M,S);if(!L){T=R.topLeft();P=R.topRight();M=R.bottomLeft();S=R.bottomRight();if(N){var O=360-N;T=T.rotate(K,O);P=P.rotate(K,O);M=M.rotate(K,O);S=S.rotate(K,O)}L=Q.contains(T)||Q.contains(P)||Q.contains(M)||Q.contains(S)}return L}};var x=b.extend({init:function(K){this.container=r.toRect(K)},align:function(M,N){var L=N.toLowerCase().split(" ");for(var K=0;K<L.length;K++){M=this._singleAlign(M,L[K])}return M},_singleAlign:function(K,L){if(o(this[L])){return this[L](K)}else{return K}},left:function(K){return this._align(K,this._left)},center:function(K){return this._align(K,this._center)},right:function(K){return this._align(K,this._right)},stretch:function(K){return this._align(K,this._stretch)},top:function(K){return this._align(K,this._top)},middle:function(K){return this._align(K,this._middle)},bottom:function(K){return this._align(K,this._bottom)},_left:function(K,L){L.x=K.x},_center:function(K,L){L.x=(K.width-L.width)/2||0},_right:function(K,L){L.x=K.width-L.width},_top:function(K,L){L.y=K.y},_middle:function(K,L){L.y=(K.height-L.height)/2||0},_bottom:function(K,L){L.y=K.height-L.height},_stretch:function(K,L){L.x=0;L.y=0;L.height=K.height;L.width=K.width},_align:function(L,K){L=r.toRect(L);K(this.container,L);return L}});var m=b.extend({init:function(L,K){this.r=L;this.angle=K}});var d=b.extend({init:function(L,K,P,O,N,M){this.a=L||0;this.b=K||0;this.c=P||0;this.d=O||0;this.e=N||0;this.f=M||0},plus:function(K){this.a+=K.a;this.b+=K.b;this.c+=K.c;this.d+=K.d;this.e+=K.e;this.f+=K.f},minus:function(K){this.a-=K.a;this.b-=K.b;this.c-=K.c;this.d-=K.d;this.e-=K.e;this.f-=K.f},times:function(K){return new d(this.a*K.a+this.c*K.b,this.b*K.a+this.d*K.b,this.a*K.c+this.c*K.d,this.b*K.c+this.d*K.d,this.a*K.e+this.c*K.f+this.e,this.b*K.e+this.d*K.f+this.f)},apply:function(K){return new p(this.a*K.x+this.c*K.y+this.e,this.b*K.x+this.d*K.y+this.f)},applyRect:function(K){return r.fromPoints(this.apply(K.topLeft()),this.apply(K.bottomRight()))},toString:function(){return"matrix("+this.a+" "+this.b+" "+this.c+" "+this.d+" "+this.e+" "+this.f+")"}});C(d,{fromSVGMatrix:function(L){var K=new d();K.a=L.a;K.b=L.b;K.c=L.c;K.d=L.d;K.e=L.e;K.f=L.f;return K},fromMatrixVector:function(L){var K=new d();K.a=L.a;K.b=L.b;K.c=L.c;K.d=L.d;K.e=L.e;K.f=L.f;return K},fromList:function(L){if(L.length!==6){throw"The given list should consist of six elements."}var K=new d();K.a=L[0];K.b=L[1];K.c=L[2];K.d=L[3];K.e=L[4];K.f=L[5];return K},translation:function(L,M){var K=new d();K.a=1;K.b=0;K.c=0;K.d=1;K.e=L;K.f=M;return K},unit:function(){return new d(1,0,0,1,0,0)},rotation:function(M,L,N){var K=new d();K.a=Math.cos(M*Math.PI/180);K.b=Math.sin(M*Math.PI/180);K.c=-K.b;K.d=K.a;K.e=L-L*K.a+N*K.b||0;K.f=N-N*K.a-L*K.b||0;return K},scaling:function(M,L){var K=new d();K.a=M;K.b=0;K.c=0;K.d=L;K.e=0;K.f=0;return K},parse:function(K){var M,L;if(K){K=K.trim();if(K.slice(0,6).toLowerCase()==="matrix"){L=K.slice(7,K.length-1).trim();M=L.split(",");if(M.length===6){return d.fromList(w(M,function(N){return parseFloat(N)}))}M=L.split(" ");if(M.length===6){return d.fromList(w(M,function(N){return parseFloat(N)}))}}if(K.slice(0,1)==="("&&K.slice(K.length-1)===")"){K=K.substr(1,K.length-1)}if(K.indexOf(",")>0){M=K.split(",");if(M.length===6){return d.fromList(w(M,function(N){return parseFloat(N)}))}}if(K.indexOf(" ")>0){M=K.split(" ");if(M.length===6){return d.fromList(w(M,function(N){return parseFloat(N)}))}}}return M}});var v=b.extend({init:function(L,K,P,O,N,M){this.a=L||0;this.b=K||0;this.c=P||0;this.d=O||0;this.e=N||0;this.f=M||0},fromMatrix:function e(K){var L=new v();L.a=K.a;L.b=K.b;L.c=K.c;L.d=K.d;L.e=K.e;L.f=K.f;return L}});function s(L,N){var K,O,M;do{K=Math.random()*2-1;O=Math.random()*2-1;M=K*K+O*O}while(!M||M>1);return L+N*K*Math.sqrt(-2*Math.log(M)/M)}function B(N){if(E.isUndefined(N)){N=10}var K="";var M="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var L=N;L>0;--L){K+=M.charAt(Math.round(Math.random()*(M.length-1)))}return K}var F={_distanceToLineSquared:function(Q,L,K){function P(S,R){return(S.x-R.x)*(S.x-R.x)+(S.y-R.y)*(S.y-R.y)}if(L===K){return P(Q,L)}var O=K.x-L.x,N=K.y-L.y,M=(Q.x-L.x)*O+(Q.y-L.y)*N;if(M<0){return P(L,Q)}M=(K.x-Q.x)*O+(K.y-Q.y)*N;if(M<0){return P(K,Q)}M=(K.x-Q.x)*N-(K.y-Q.y)*O;return M*M/(O*O+N*N)},distanceToLine:function(M,L,K){return Math.sqrt(this._distanceToLineSquared(M,L,K))},distanceToPolyline:function(O,L){var M=Number.MAX_VALUE;if(E.isUndefined(L)||L.length===0){return Number.MAX_VALUE}for(var K=0;K<L.length-1;K++){var Q=L[K];var N=L[K+1];var P=this._distanceToLineSquared(O,Q,N);if(P<M){M=P}}return Math.sqrt(M)}};var q=A.Class.extend({init:function(){this._buckets=[];this.length=0},add:function(K,L){var M=this._createGetBucket(K);if(E.isDefined(L)){M.value=L}return M},get:function(K){if(this._bucketExists(K)){return this._createGetBucket(K)}return null},set:function(K,L){this.add(K,L)},containsKey:function(K){return this._bucketExists(K)},remove:function(K){if(this._bucketExists(K)){var L=this._hash(K);delete this._buckets[L];this.length--;return K}},forEach:function(N){var L=this._hashes();for(var M=0,K=L.length;M<K;M++){var O=L[M];var P=this._buckets[O];if(E.isUndefined(P)){continue}N(P)}},clone:function(){var M=new q();var L=this._hashes();for(var N=0,K=L.length;N<K;N++){var O=L[N];var P=this._buckets[O];if(E.isUndefined(P)){continue}M.add(P.key,P.value)}return M},_hashes:function(){var K=[];for(var L in this._buckets){if(this._buckets.hasOwnProperty(L)){K.push(L)}}return K},_bucketExists:function(K){var L=this._hash(K);return E.isDefined(this._buckets[L])},_createGetBucket:function(K){var L=this._hash(K);var M=this._buckets[L];if(E.isUndefined(M)){M={key:K};this._buckets[L]=M;this.length++}return M},_hash:function(K){if(E.isNumber(K)){return K}if(E.isString(K)){return this._hashString(K)}if(E.isObject(K)){return this._objectHashId(K)}throw"Unsupported key type."},_hashString:function(N){var K=0;if(N.length===0){return K}for(var L=0;L<N.length;L++){var M=N.charCodeAt(L);K=K*32-K+M}return K},_objectHashId:function(K){var L=K._hashId;if(E.isUndefined(L)){L=B();K._hashId=L}return L}});var g=A.Observable.extend({init:function(M){var L=this;A.Observable.fn.init.call(L);this._hashTable=new q();this.length=0;if(E.isDefined(M)){if(z.isArray(M)){for(var K=0;K<M.length;K++){this.add(M[K])}}else{M.forEach(function(O,N){this.add(O,N)},this)}}},add:function(K,M){var L=this._hashTable.get(K);if(!L){L=this._hashTable.add(K);this.length++;this.trigger("changed")}L.value=M},set:function(K,L){this.add(K,L)},get:function(K){var L=this._hashTable.get(K);if(L){return L.value}throw new Error("Cannot find key "+K)},containsKey:function(K){return this._hashTable.containsKey(K)},remove:function(K){if(this.containsKey(K)){this.trigger("changed");this.length--;return this._hashTable.remove(K)}},forEach:function(K,L){this._hashTable.forEach(function(M){K.call(L,M.key,M.value)})},forEachValue:function(K,L){this._hashTable.forEach(function(M){K.call(L,M.value)})},forEachKey:function(K,L){this._hashTable.forEach(function(M){K.call(L,M.key)})},keys:function(){var K=[];this.forEachKey(function(L){K.push(L)});return K}});var I=A.Class.extend({init:function(){this._tail=null;this._head=null;this.length=0},enqueue:function(L){var K={value:L,next:null};if(!this._head){this._head=K;this._tail=this._head}else{this._tail.next=K;this._tail=this._tail.next}this.length++},dequeue:function(){if(this.length<1){throw new Error("The queue is empty.")}var K=this._head.value;this._head=this._head.next;this.length--;return K},contains:function(K){var L=this._head;while(L){if(L.value===K){return true}L=L.next}return false}});var i=A.Observable.extend({init:function(L){var K=this;A.Observable.fn.init.call(K);this._hashTable=new q();this.length=0;if(E.isDefined(L)){if(L instanceof q){L.forEach(function(M){this.add(M)})}else{if(L instanceof g){L.forEach(function(N,M){this.add({key:N,value:M})},this)}}}},contains:function(K){return this._hashTable.containsKey(K)},add:function(L){var K=this._hashTable.get(L);if(!K){this._hashTable.add(L,L);this.length++;this.trigger("changed")}},get:function(K){if(this.contains(K)){return this._hashTable.get(K).value}else{return null}},hash:function(K){return this._hashTable._hash(K)},remove:function(K){if(this.contains(K)){this._hashTable.remove(K);this.length--;this.trigger("changed")}},forEach:function(L,K){this._hashTable.forEach(function(M){L(M.value)},K)},toArray:function(){var K=[];this.forEach(function(L){K.push(L)});return K}});var t=A.Class.extend({init:function(M,L){this.links=[];this.outgoing=[];this.incoming=[];this.weight=1;if(E.isDefined(M)){this.id=M}else{this.id=B()}if(E.isDefined(L)){this.associatedShape=L;var K=L.bounds();this.width=K.width;this.height=K.height;this.x=K.x;this.y=K.y}else{this.associatedShape=null}this.data=null;this.type="Node";this.shortForm="Node '"+this.id+"'";this.isVirtual=false},isIsolated:function(){return E.isEmpty(this.links)},bounds:function(K){if(!E.isDefined(K)){return new f.Rect(this.x,this.y,this.width,this.height)}this.x=K.x;this.y=K.y;this.width=K.width;this.height=K.height},isLinkedTo:function(L){var K=this;return E.any(K.links,function(M){return M.getComplement(K)===L})},getChildren:function(){if(this.outgoing.length===0){return[]}var M=[];for(var L=0,K=this.outgoing.length;L<K;L++){var N=this.outgoing[L];M.push(N.getComplement(this))}return M},getParents:function(){if(this.incoming.length===0){return[]}var L=[];for(var M=0,K=this.incoming.length;M<K;M++){var N=this.incoming[M];L.push(N.getComplement(this))}return L},clone:function(){var K=new t();if(E.isDefined(this.weight)){K.weight=this.weight}if(E.isDefined(this.balance)){K.balance=this.balance}if(E.isDefined(this.owner)){K.owner=this.owner}K.associatedShape=this.associatedShape;K.x=this.x;K.y=this.y;K.width=this.width;K.height=this.height;return K},adjacentTo:function(K){return this.isLinkedTo(K)!==null},removeLink:function(K){if(K.source===this){E.remove(this.links,K);E.remove(this.outgoing,K);K.source=null}if(K.target===this){E.remove(this.links,K);E.remove(this.incoming,K);K.target=null}},hasLinkTo:function(K){return E.any(this.outgoing,function(L){return L.target===K})},degree:function(){return this.links.length},incidentWith:function(K){return y(this.links,K)},getLinksWith:function(K){return E.all(this.links,function(L){return L.getComplement(this)===K},this)},getNeighbors:function(){var K=[];E.forEach(this.incoming,function(L){K.push(L.getComplement(this))},this);E.forEach(this.outgoing,function(L){K.push(L.getComplement(this))},this);return K}});var a=A.Class.extend({init:function(N,O,P,K){if(E.isUndefined(N)){throw"The source of the new link is not set."}if(E.isUndefined(O)){throw"The target of the new link is not set."}var L,M;if(E.isString(N)){L=new t(N)}else{L=N}if(E.isString(O)){M=new t(O)}else{M=O}this.source=L;this.target=M;this.source.links.push(this);this.target.links.push(this);this.source.outgoing.push(this);this.target.incoming.push(this);if(E.isDefined(P)){this.id=P}else{this.id=B()}if(E.isDefined(K)){this.associatedConnection=K}else{this.associatedConnection=null}this.type="Link";this.shortForm="Link '"+this.source.id+"->"+this.target.id+"'"},getComplement:function(K){if(this.source!==K&&this.target!==K){throw"The given node is not incident with this link."}return this.source===K?this.target:this.source},getCommonNode:function(K){if(this.source===K.source||this.source===K.target){return this.source}if(this.target===K.source||this.target===K.target){return this.target}return null},isBridging:function(L,K){return this.source===L&&this.target===K||this.source===K&&this.target===L},getNodes:function(){return[this.source,this.target]},incidentWith:function(K){return this.source===K||this.target===K},adjacentTo:function(K){return y(this.source.links,K)||y(this.target.links,K)},changeSource:function(K){E.remove(this.source.links,this);E.remove(this.source.outgoing,this);K.links.push(this);K.outgoing.push(this);this.source=K},changeTarget:function(K){E.remove(this.target.links,this);E.remove(this.target.incoming,this);K.links.push(this);K.incoming.push(this);this.target=K},changesNodes:function(L,K){if(this.source===L){this.changeSource(K)}else{if(this.target===L){this.changeTarget(K)}}},reverse:function(){var K=this.source;var L=this.target;this.source=L;E.remove(K.outgoing,this);this.source.outgoing.push(this);this.target=K;E.remove(L.incoming,this);this.target.incoming.push(this);return this},directTo:function(K){if(this.source!==K&&this.target!==K){throw"The given node is not incident with this link."}if(this.target!==K){this.reverse()}},createReverseEdge:function(){var K=this.clone();K.reverse();K.reversed=true;return K},clone:function(){var K=new a(this.source,this.target);return K}});var u=A.Class.extend({init:function(K){this.links=[];this.nodes=[];this._nodeMap=new g();this.diagram=null;this._root=null;if(E.isDefined(K)){if(E.isString(K)){this.id=K}else{this.diagram=K;this.id=K.id}}else{this.id=B()}this.bounds=new r();this._hasCachedRelationships=false;this.type="Graph"},cacheRelationships:function(M){if(E.isUndefined(M)){M=false}if(this._hasCachedRelationships&&!M){return}for(var L=0,K=this.nodes.length;L<K;L++){var N=this.nodes[L];N.children=this.getChildren(N);N.parents=this.getParents(N)}this._hasCachedRelationships=true},assignLevels:function(M,P,L){if(!M){throw"Start node not specified."}if(E.isUndefined(P)){P=0}this.cacheRelationships();if(E.isUndefined(L)){L=new g();E.forEach(this.nodes,function(R){L.add(R,false)})}L.set(M,true);M.level=P;var O=M.children;for(var N=0,K=O.length;N<K;N++){var Q=O[N];if(!Q||L.get(Q)){continue}this.assignLevels(Q,P+1,L)}},root:function(L){if(E.isUndefined(L)){if(!this._root){var K=E.first(this.nodes,function(M){return M.incoming.length===0});if(K){return K}return E.first(this.nodes)}else{return this._root}}else{this._root=L}},getConnectedComponents:function(){this.componentIndex=0;this.setItemIndices();var L=E.initArray(this.nodes.length,-1);for(var K=0;K<this.nodes.length;K++){if(L[K]===-1){this._collectConnectedNodes(L,K);this.componentIndex++}}var N=[],M;for(M=0;M<this.componentIndex;++M){N[M]=new u()}for(M=0;M<L.length;++M){var O=N[L[M]];O.addNodeAndOutgoings(this.nodes[M])}N.sort(function(Q,P){return P.nodes.length-Q.nodes.length});return N},_collectConnectedNodes:function(K,M){K[M]=this.componentIndex;var L=this.nodes[M];E.forEach(L.links,function(P){var O=P.getComplement(L);var N=O.index;if(K[N]===-1){this._collectConnectedNodes(K,N)}},this)},calcBounds:function(){if(this.isEmpty()){this.bounds=new r();return this.bounds}var L=null;for(var M=0,K=this.nodes.length;M<K;M++){var N=this.nodes[M];if(!L){L=N.bounds()}else{L=L.union(N.bounds())}}this.bounds=L;return this.bounds},getSpanningTree:function(V){var Y=new u();var L=new g(),K,S;Y.root=V.clone();Y.root.level=0;Y.root.id=V.id;L.add(V,Y.root);V.level=0;var T=[];var P=[];Y._addNode(Y.root);T.push(V);P.push(V);var N=1;while(P.length>0){var R=P.pop();for(var M=0;M<R.links.length;M++){var U=R.links[M];var W=U.getComplement(R);if(y(T,W)){continue}W.level=R.level+1;if(N<W.level+1){N=W.level+1}if(!y(P,W)){P.push(W)}if(!y(T,W)){T.push(W)}if(L.containsKey(R)){K=L.get(R)}else{K=R.clone();K.level=R.level;K.id=R.id;L.add(R,K)}if(L.containsKey(W)){S=L.get(W)}else{S=W.clone();S.level=W.level;S.id=W.id;L.add(W,S)}var O=new a(K,S);Y.addLink(O)}}var X=[];for(var Q=0;Q<N;Q++){X.push([])}E.forEach(Y.nodes,function(Z){X[Z.level].push(Z)});Y.treeLevels=X;Y.cacheRelationships();return Y},takeRandomNode:function(L,M){if(E.isUndefined(L)){L=[]}if(E.isUndefined(M)){M=4}if(this.nodes.length===0){return null}if(this.nodes.length===1){return y(L,this.nodes[0])?null:this.nodes[0]}var K=z.grep(this.nodes,function(N){return !y(L,N)&&N.degree()<=M});if(E.isEmpty(K)){return null}return K[E.randomInteger(0,K.length)]},isEmpty:function(){return E.isEmpty(this.nodes)},isHealthy:function(){return E.all(this.links,function(K){return y(this.nodes,K.source)&&y(this.nodes,K.target)},this)},getParents:function(K){if(!this.hasNode(K)){throw"The given node is not part of this graph."}return K.getParents()},getChildren:function(K){if(!this.hasNode(K)){throw"The given node is not part of this graph."}return K.getChildren()},addLink:function(M,P,K){if(E.isUndefined(M)){throw"The source of the link is not defined."}if(E.isUndefined(P)){if(E.isDefined(M.type)&&M.type==="Link"){this.addExistingLink(M);return}else{throw"The target of the link is not defined."}}var L=this.getNode(M);if(E.isUndefined(L)){L=this.addNode(M)}var N=this.getNode(P);if(E.isUndefined(N)){N=this.addNode(P)}var O=new a(L,N);if(E.isDefined(K)){O.owner=K}this.links.push(O);return O},removeAllLinks:function(){while(this.links.length>0){var K=this.links[0];this.removeLink(K)}},addExistingLink:function(M){if(this.hasLink(M)){return}this.links.push(M);if(this.hasNode(M.source.id)){var L=this.getNode(M.source.id);M.changeSource(L)}else{this.addNode(M.source)}if(this.hasNode(M.target.id)){var K=this.getNode(M.target.id);M.changeTarget(K)}else{this.addNode(M.target)}},hasLink:function(K){if(E.isString(K)){return E.any(this.links,function(L){return L.id===K})}if(K.type==="Link"){return y(this.links,K)}throw"The given object is neither an identifier nor a Link."},getNode:function(K){var L=K.id||K;if(this._nodeMap.containsKey(L)){return this._nodeMap.get(L)}},hasNode:function(K){var L=K.id||K;return this._nodeMap.containsKey(L)},_addNode:function(K){this.nodes.push(K);this._nodeMap.add(K.id,K)},_removeNode:function(K){E.remove(this.nodes,K);this._nodeMap.remove(K.id)},removeNode:function(L){var P=L;if(E.isString(L)){P=this.getNode(L)}if(E.isDefined(P)){var M=P.links;P.links=[];for(var N=0,K=M.length;N<K;N++){var O=M[N];this.removeLink(O)}this._removeNode(P)}else{throw"The identifier should be a Node or the Id (string) of a node."}},areConnected:function(L,K){return E.any(this.links,function(M){return M.source==L&&M.target==K||M.source==K&&M.target==L})},removeLink:function(K){E.remove(this.links,K);E.remove(K.source.outgoing,K);E.remove(K.source.links,K);E.remove(K.target.incoming,K);E.remove(K.target.links,K)},addNode:function(L,N,K){var M=null;if(!E.isDefined(L)){throw"No Node or identifier for a new Node is given."}if(E.isString(L)){if(this.hasNode(L)){return this.getNode(L)}M=new t(L)}else{if(this.hasNode(L)){return this.getNode(L)}M=L}if(E.isDefined(N)){M.bounds(N)}if(E.isDefined(K)){M.owner=K}this._addNode(M);return M},addNodeAndOutgoings:function(L){if(!this.hasNode(L)){this._addNode(L)}var K=L.outgoing;L.outgoing=[];E.forEach(K,function(M){this.addExistingLink(M)},this)},setItemIndices:function(){var K;for(K=0;K<this.nodes.length;++K){this.nodes[K].index=K}for(K=0;K<this.links.length;++K){this.links[K].index=K}},clone:function(K){var N=new u();var L=E.isDefined(K)&&K===true;if(L){N.nodeMap=new g();N.linkMap=new g()}var M=new g();E.forEach(this.nodes,function(P){var O=P.clone();M.set(P,O);N._addNode(O);if(L){N.nodeMap.set(O,P)}});E.forEach(this.links,function(O){if(M.containsKey(O.source)&&M.containsKey(O.target)){var P=N.addLink(M.get(O.source),M.get(O.target));if(L){N.linkMap.set(P,O)}}});return N},linearize:function(K){return u.Utils.linearize(this,K)},depthFirstTraversal:function(M,N){if(E.isUndefined(M)){throw"You need to supply a starting node."}if(E.isUndefined(N)){throw"You need to supply an action."}if(!this.hasNode(M)){throw"The given start-node is not part of this graph"}var K=this.getNode(M);var L=[];this._dftIterator(K,N,L)},_dftIterator:function(O,P,L){P(O);L.push(O);var N=O.getChildren();for(var M=0,K=N.length;M<K;M++){var Q=N[M];if(y(L,Q)){continue}this._dftIterator(Q,P,L)}},breadthFirstTraversal:function(M,O){if(E.isUndefined(M)){throw"You need to supply a starting node."}if(E.isUndefined(O)){throw"You need to supply an action."}if(!this.hasNode(M)){throw"The given start-node is not part of this graph"}var Q=this.getNode(M);var R=new I();var T=[];R.enqueue(Q);while(R.length>0){var N=R.dequeue();O(N);T.push(N);var L=N.getChildren();for(var P=0,S=L.length;P<S;P++){var K=L[P];if(y(T,K)||y(R,K)){continue}R.enqueue(K)}}},_stronglyConnectedComponents:function(V,M,U,K,N,T,R){U.add(M,R);K.add(M,R);R++;T.push(M);var L=M.getChildren(),P;for(var O=0,Q=L.length;O<Q;O++){P=L[O];if(!U.containsKey(P)){this._stronglyConnectedComponents(V,P,U,K,N,T,R);K.add(M,Math.min(K.get(M),K.get(P)))}else{if(y(T,P)){K.add(M,Math.min(K.get(M),U.get(P)))}}}if(K.get(M)===U.get(M)){var S=[];do{P=T.pop();S.push(P)}while(P!==M);if(!V||S.length>1){N.push(S)}}},findCycles:function(N){if(E.isUndefined(N)){N=true}var R=new g();var M=new g();var Q=[];var L=[];for(var O=0,K=this.nodes.length;O<K;O++){var P=this.nodes[O];if(R.containsKey(P)){continue}this._stronglyConnectedComponents(N,P,R,M,Q,L,0)}return Q},isAcyclic:function(){return E.isEmpty(this.findCycles())},isSubGraph:function(K){var M=K.linearize();var L=this.linearize();return E.all(M,function(N){return y(L,N)})},makeAcyclic:function(){if(this.isEmpty()||this.nodes.length<=1||this.links.length<=1){return[]}if(this.nodes.length==2){var U=[];if(this.links.length>1){var P=this.links[0];var aa=P.source;for(var ah=0,ai=this.links.length;ah<ai;ah++){var R=this.links[ah];if(R.source==aa){continue}var ao=R.reverse();U.push(ao)}}return U}var ae=this.clone(true);var S=this.nodes.length;var ac=new g();var L=function(N){if(N.outgoing.length===0){return 2-S}else{if(N.incoming.length===0){return S-2}else{return N.outgoing.length-N.incoming.length}}};var ag=function(at,ar){var N=L(at,S);if(!ar.containsKey(N)){ar.set(N,[])}ar.get(N).push(at)};E.forEach(ae.nodes,function(N){ag(N,ac)});var O=[];var ap=[];while(ae.nodes.length>0){var ad,aq,Q;if(ac.containsKey(2-S)){var an=ac.get(2-S);while(an.length>0){aq=an.pop();for(var Z=0;Z<aq.links.length;Z++){var ak=aq.links[Z];ad=ak.getComplement(aq);Q=L(ad,S);E.remove(ac.get(Q),ad);ad.removeLink(ak);ag(ad,ac)}ae._removeNode(aq);ap.unshift(aq)}}if(ac.containsKey(S-2)){var K=ac.get(S-2);while(K.length>0){ad=K.pop();for(var am=0;am<ad.links.length;am++){var W=ad.links[am];aq=W.getComplement(ad);Q=L(aq,S);E.remove(ac.get(Q),aq);aq.removeLink(W);ag(aq,ac)}O.push(ad);ae._removeNode(ad)}}if(ae.nodes.length>0){for(var af=S-3;af>2-S;af--){if(ac.containsKey(af)&&ac.get(af).length>0){var aj=ac.get(af);var V=aj.pop();for(var ab=0;ab<V.links.length;ab++){var Y=V.links[ab];var X=Y.getComplement(V);Q=L(X,S);E.remove(ac.get(Q),X);X.removeLink(Y);ag(X,ac)}O.push(V);ae._removeNode(V);break}}}}O=O.concat(ap);var al=new g();for(var M=0;M<this.nodes.length;M++){al.set(ae.nodeMap.get(O[M]),M)}var T=[];E.forEach(this.links,function(N){if(al.get(N.source)>al.get(N.target)){N.reverse();T.push(N)}});return T}});u.Predefined={EightGraph:function(){return u.Utils.parse(["1->2","2->3","3->4","4->1","3->5","5->6","6->7","7->3"])},Mindmap:function(){return u.Utils.parse(["0->1","0->2","0->3","0->4","0->5","1->6","1->7","7->8","2->9","9->10","9->11","3->12","12->13","13->14","4->15","4->16","15->17","15->18","18->19","18->20","14->21","14->22","5->23","23->24","23->25","6->26"])},ThreeGraph:function(){return u.Utils.parse(["1->2","2->3","3->1"])},BinaryTree:function(K){if(E.isUndefined(K)){K=5}return u.Utils.createBalancedTree(K,2)},Linear:function(K){if(E.isUndefined(K)){K=10}return u.Utils.createBalancedTree(K,1)},Tree:function(L,K){return u.Utils.createBalancedTree(L,K)},Forest:function(M,L,K){return u.Utils.createBalancedForest(M,L,K)},Workflow:function(){return u.Utils.parse(["0->1","1->2","2->3","1->4","4->3","3->5","5->6","6->3","6->7","5->4"])},Grid:function(R,K){var P=new f.Graph();if(R<=0&&K<=0){return P}for(var M=0;M<R+1;M++){var O=null;for(var L=0;L<K+1;L++){var N=new t(M.toString()+"."+L.toString());P.addNode(N);if(O){P.addLink(O,N)}if(M>0){var Q=P.getNode((M-1).toString()+"."+L.toString());P.addLink(Q,N)}O=N}}return P}};u.Utils={parse:function(O){var L,P=new f.Graph(),R=O.slice();for(var N=0,K=R.length;N<K;N++){var M=R[N];if(E.isString(M)){if(M.indexOf("->")<0){throw"The link should be specified as 'a->b'."}var Q=M.split("->");if(Q.length!=2){throw"The link should be specified as 'a->b'."}L=new a(Q[0],Q[1]);P.addLink(L)}if(E.isObject(M)){if(!L){throw"Specification found before Link definition."}A.deepExtend(L,M)}}return P},linearize:function(N,P){if(E.isUndefined(N)){throw"Expected an instance of a Graph object in slot one."}if(E.isUndefined(P)){P=false}var O=[];for(var L=0,K=N.links.length;L<K;L++){var M=N.links[L];O.push(M.source.id+"->"+M.target.id);if(P){O.push({id:M.id})}}return O},_addShape:function(N,L,M,K){if(E.isUndefined(L)){L=new f.Point(0,0)}if(E.isUndefined(M)){M=B()}K=A.deepExtend({width:20,height:20,id:M,radius:10,fill:"#778899",data:"circle",undoable:false,x:L.x,y:L.y},K);return N.addShape(K)},_addConnection:function(L,N,M,K){return L.connect(N,M,K)},createDiagramFromGraph:function(ab,N,L,Q){if(E.isUndefined(ab)){throw"The diagram surface is undefined."}if(E.isUndefined(N)){throw"No graph specification defined."}if(E.isUndefined(L)){L=true}if(E.isUndefined(Q)){Q=false}var U=ab.element.clientWidth||200;var S=ab.element.clientHeight||200;var ac=[],V,M;for(var Y=0,aa=N.nodes.length;Y<aa;Y++){V=N.nodes[Y];var T=V.position;if(E.isUndefined(T)){if(E.isDefined(V.x)&&E.isDefined(V.y)){T=new p(V.x,V.y)}else{T=new p(E.randomInteger(10,U-20),E.randomInteger(10,S-20))}}var K={};if(V.id==="0"){}else{if(Q){A.deepExtend(K,{width:Math.random()*150+20,height:Math.random()*80+50,data:"rectangle",fill:{color:"#778899"}})}}M=this._addShape(ab,T,V.id,K);var O=M.bounds();if(E.isDefined(O)){V.x=O.x;V.y=O.y;V.width=O.width;V.height=O.height}ac[V.id]=M}for(var R=0;R<N.links.length;R++){var P=N.links[R];var ad=ac[P.source.id];if(E.isUndefined(ad)){continue}var X=ac[P.target.id];if(E.isUndefined(X)){continue}this._addConnection(ab,ad,X,{id:P.id})}if(L){var W=new ab.SpringLayout(ab);W.layoutGraph(N,{limitToView:false});for(var Z=0;Z<N.nodes.length;Z++){V=N.nodes[Z];M=ac[V.id];M.bounds(new r(V.x,V.y,V.width,V.height))}}},createBalancedTree:function(V,P){if(E.isUndefined(V)){V=3}if(E.isUndefined(P)){P=3}var O=new f.Graph(),K=-1,Q=[],T;if(V<=0||P<=0){return O}var R=new t((++K).toString());O.addNode(R);O.root=R;Q.push(R);for(var N=0;N<V;N++){T=[];for(var M=0;M<Q.length;M++){var S=Q[M];for(var L=0;L<P;L++){var U=new t((++K).toString());O.addLink(S,U);T.push(U)}}Q=T}return O},createBalancedForest:function(V,P,X){if(E.isUndefined(V)){V=3}if(E.isUndefined(P)){P=3}if(E.isUndefined(X)){X=5}var O=new f.Graph(),K=-1,Q=[],T;if(V<=0||P<=0||X<=0){return O}for(var W=0;W<X;W++){var R=new t((++K).toString());O.addNode(R);Q=[R];for(var N=0;N<V;N++){T=[];for(var M=0;M<Q.length;M++){var S=Q[M];for(var L=0;L<P;L++){var U=new t((++K).toString());O.addLink(S,U);T.push(U)}}Q=T}}return O},createRandomConnectedGraph:function(M,L,R){if(E.isUndefined(M)){M=40}if(E.isUndefined(L)){L=4}if(E.isUndefined(R)){R=false}var P=new f.Graph(),K=-1;if(M<=0){return P}var U=new t((++K).toString());P.addNode(U);if(M===1){return P}if(M>1){for(var N=1;N<M;N++){var O=P.takeRandomNode([],L);if(!O){break}var W=P.addNode(N.toString());P.addLink(O,W)}if(!R&&M>1){var T=E.randomInteger(1,M);for(var V=0;V<T;V++){var S=P.takeRandomNode([],L);var Q=P.takeRandomNode([],L);if(S&&Q&&!P.areConnected(S,Q)){P.addLink(S,Q)}}}return P}},randomDiagram:function(M,P,O,L,K){var N=A.dataviz.diagram.Graph.Utils.createRandomConnectedGraph(P,O,L);u.Utils.createDiagramFromGraph(M,N,false,K)}};A.deepExtend(f,{init:function(K){A.init(K,f.ui)},Point:p,Intersect:H,Geometry:F,Rect:r,Size:c,RectAlign:x,Matrix:d,MatrixVector:v,normalVariable:s,randomId:B,Dictionary:g,HashTable:q,Queue:I,Set:i,Node:t,Link:a,Graph:u,PathDefiner:j})}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/diagram/svg",["kendo.drawing","dataviz/diagram/math"],a)}(function(){(function(G,q){var I=window.kendo,m=I.dataviz.diagram,a=I.Class,N=I.deepExtend,u=m.Point,w=m.Rect,h=m.Matrix,O=m.Utils,af=O.isNumber,o=O.isString,B=m.MatrixVector,ab=I.geometry,ad=I.drawing,R=ad.util.defined,aa=G.inArray;var C="transparent",Z={none:"none",arrowStart:"ArrowStart",filledCircle:"FilledCircle",arrowEnd:"ArrowEnd"},A=360,E="start",T="end",j="width",F="height",e="x",c="y";m.Markers=Z;function p(Y,g){var X=this.options;var d=false;var ah,ai;for(var ag=0;ag<g.length;ag++){ai=g[ag];ah=Y[ai];if(af(ah)&&X[ai]!==ah){X[ai]=ah;d=true}}return d}var t=a.extend({init:function(d,g){this.x=d;this.y=g},toMatrix:function(){return h.scaling(this.x,this.y)},toString:function(){return I.format("scale({0},{1})",this.x,this.y)},invert:function(){return new t(1/this.x,1/this.y)}});var S=a.extend({init:function(d,g){this.x=d;this.y=g},toMatrixVector:function(){return new B(0,0,0,0,this.x,this.y)},toMatrix:function(){return h.translation(this.x,this.y)},toString:function(){return I.format("translate({0},{1})",this.x,this.y)},plus:function(d){this.x+=d.x;this.y+=d.y},times:function(d){this.x*=d;this.y*=d},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){if(this.Length===0){return}this.times(1/this.length())},invert:function(){return new S(-this.x,-this.y)}});var k=a.extend({init:function(g,d,X){this.x=d||0;this.y=X||0;this.angle=g},toString:function(){if(this.x&&this.y){return I.format("rotate({0},{1},{2})",this.angle,this.x,this.y)}else{return I.format("rotate({0})",this.angle)}},toMatrix:function(){return h.rotation(this.angle,this.x,this.y)},center:function(){return new u(this.x,this.y)},invert:function(){return new k(A-this.angle,this.x,this.y)}});k.ZERO=new k(0);k.create=function(d){return new k(d.angle,d.x,d.y)};k.parse=function(ag){var g=ag.slice(1,ag.length-1).split(","),Y=g[0],d=g[1],ah=g[2];var X=new k(Y,d,ah);return X};var Q=a.extend({init:function(g,ah,Y,X,ag,d){this.translate=new S(g,ah);if(Y!==q&&X!==q){this.scale=new t(Y,X)}if(ag!==q){this.rotate=d?new k(ag,d.x,d.y):new k(ag)}},toString:function(){var d=function(g){return g?g.toString():""};return d(this.translate)+d(this.rotate)+d(this.scale)},render:function(d){d._transform=this;d._renderTransform()},toMatrix:function(){var d=h.unit();if(this.translate){d=d.times(this.translate.toMatrix())}if(this.rotate){d=d.times(this.rotate.toMatrix())}if(this.scale){d=d.times(this.scale.toMatrix())}return d},invert:function(){var X=this.rotate?this.rotate.invert():q,ai=X?X.toMatrix():h.unit(),ah=this.scale?this.scale.invert():q,Y=ah?ah.toMatrix():h.unit();var d=new u(-this.translate.x,-this.translate.y);d=ai.times(Y).apply(d);var ag=new S(d.x,d.y);var g=new Q();g.translate=ag;g.rotate=X;g.scale=ah;return g}});var L={_setScale:function(){var Y=this.options;var d=this._originWidth;var ag=this._originHeight;var X=Y.width/d;var g=Y.height/ag;if(!af(X)){X=1}if(!af(g)){g=1}this._transform.scale=new t(X,g)},_setTranslate:function(){var g=this.options;var d=g.x||0;var X=g.y||0;this._transform.translate=new S(d,X)},_initSize:function(){var g=this.options;var d=false;if(g.autoSize!==false&&(R(g.width)||R(g.height))){this._measure(true);this._setScale();d=true}if(R(g.x)||R(g.y)){this._setTranslate();d=true}if(d){this._renderTransform()}},_updateSize:function(d){var g=false;if(this.options.autoSize!==false&&this._diffNumericOptions(d,[j,F])){g=true;this._measure(true);this._setScale()}if(this._diffNumericOptions(d,[e,c])){g=true;this._setTranslate()}if(g){this._renderTransform()}return g}};var n=a.extend({init:function(d){var g=this;g.options=N({},g.options,d);g.id=g.options.id;g._originSize=w.empty();g._transform=new Q()},visible:function(d){return this.drawingContainer().visible(d)},redraw:function(d){if(d&&d.id){this.id=d.id}},position:function(d,X){var g=this.options;if(!R(d)){return new u(g.x,g.y)}if(R(X)){g.x=d;g.y=X}else{if(d instanceof u){g.x=d.x;g.y=d.y}}this._transform.translate=new S(g.x,g.y);this._renderTransform()},rotate:function(g,d){if(R(g)){this._transform.rotate=new k(g,d.x,d.y);this._renderTransform()}return this._transform.rotate||k.ZERO},drawingContainer:function(){return this.drawingElement},_renderTransform:function(){var d=this._transform.toMatrix();this.drawingContainer().transform(new ab.Matrix(d.a,d.b,d.c,d.d,d.e,d.f))},_hover:function(){},_diffNumericOptions:p,_measure:function(Y){var X;if(!this._measured||Y){var g=this._boundingBox()||new ab.Rect();var d=g.topLeft();X=new w(d.x,d.y,g.width(),g.height());this._originSize=X;this._originWidth=X.width;this._originHeight=X.height;this._measured=true}else{X=this._originSize}return X},_boundingBox:function(){return this.drawingElement.rawBBox()}});var J=n.extend({init:function(d){n.fn.init.call(this,d);d=this.options;d.fill=D(d.fill);d.stroke=D(d.stroke)},options:{stroke:{color:"gray",width:1},fill:{color:C}},fill:function(d,g){this._fill({color:y(d),opacity:g})},stroke:function(d,X,g){this._stroke({color:y(d),width:X,opacity:g})},redraw:function(d){if(d){var X=d.stroke;var g=d.fill;if(X){this._stroke(D(X))}if(g){this._fill(D(g))}n.fn.redraw.call(this,d)}},_hover:function(d){var X=this.drawingElement;var g=this.options;var Y=g.hover;if(Y&&Y.fill){var ag=d?D(Y.fill):g.fill;X.fill(ag.color,ag.opacity)}},_stroke:function(g){var d=this.options;N(d,{stroke:g});g=d.stroke;var X=null;if(g.width>0){X={color:g.color,width:g.width,opacity:g.opacity,dashType:g.dashType}}this.drawingElement.options.set("stroke",X)},_fill:function(g){var X=this.options;N(X,{fill:g||{}});var ag=X.fill;if(ag.gradient){var Y=ag.gradient;var d=Y.type==="radial"?ad.RadialGradient:ad.LinearGradient;this.drawingElement.fill(new d(Y))}else{this.drawingElement.fill(ag.color,ag.opacity)}}});var V=J.extend({init:function(d){d=this._textColor(d);J.fn.init.call(this,d);this._font();this._initText();this._initSize()},options:{fontSize:15,fontFamily:"sans-serif",stroke:{width:0},fill:{color:"black"},autoSize:true},_initText:function(){var d=this.options;this.drawingElement=new ad.Text(R(d.text)?d.text:"",new ab.Point(),{font:d.font});this._fill();this._stroke()},_textColor:function(d){if(d&&d.color){d=N({},d,{fill:{color:d.color}})}return d},_font:function(){var d=this.options;if(d.fontFamily&&R(d.fontSize)){var g=[];if(d.fontStyle){g.push(d.fontStyle)}if(d.fontWeight){g.push(d.fontWeight)}g.push(d.fontSize+(af(d.fontSize)?"px":""));g.push(d.fontFamily);d.font=g.join(" ")}else{delete d.font}},content:function(d){return this.drawingElement.content(d)},redraw:function(X){if(X){var d=false;var g=this.options;X=this._textColor(X);J.fn.redraw.call(this,X);if(X.fontFamily||R(X.fontSize)||X.fontStyle||X.fontWeight){N(g,{fontFamily:X.fontFamily,fontSize:X.fontSize,fontStyle:X.fontStyle,fontWeight:X.fontWeight});this._font();this.drawingElement.options.set("font",g.font);d=true}if(X.text){this.content(X.text);d=true}if(!this._updateSize(X)&&d){this._initSize()}}}});N(V.fn,L);var r=J.extend({init:function(d){J.fn.init.call(this,d);this._initPath();this._setPosition()},_setPosition:function(){var g=this.options;var d=g.x;var X=g.y;if(R(d)||R(X)){this.position(d||0,X||0)}},redraw:function(d){if(d){J.fn.redraw.call(this,d);if(this._diffNumericOptions(d,[j,F])){this._drawPath()}if(this._diffNumericOptions(d,[e,c])){this._setPosition()}}},_initPath:function(){var d=this.options;this.drawingElement=new ad.Path({stroke:d.stroke,closed:true});this._fill();this._drawPath()},_drawPath:function(){var g=this.drawingElement;var Y=ae(this.options);var X=Y.width;var d=Y.height;g.segments.elements([x(0,0),x(X,0),x(X,d),x(0,d)])}});var M=J.extend({init:function(g){J.fn.init.call(this,g);var d=this.options.anchor;this.anchor=new ab.Point(d.x,d.y);this.createElement()},options:{stroke:{color:C,width:0},fill:{color:"black"}},_transformToPath:function(d,X){var g=X.transform();if(d&&g){d=d.transformCopy(g)}return d},redraw:function(d){if(d){if(d.position){this.options.position=d.position}J.fn.redraw.call(this,d)}}});var ac=M.extend({options:{radius:4,anchor:{x:0,y:0}},createElement:function(){var d=this.options;this.drawingElement=new ad.Circle(new ab.Circle(this.anchor,d.radius),{fill:d.fill,stroke:d.stroke})},positionMarker:function(ah){var Y=this.options;var g=Y.position;var X=ah.segments;var ag;var d;if(g==E){ag=X[0]}else{ag=X[X.length-1]}if(ag){d=this._transformToPath(ag.anchor(),ah);this.drawingElement.transform(ab.transform().translate(d.x,d.y))}}});var b=M.extend({options:{path:"M 0 0 L 10 5 L 0 10 L 3 5 z",anchor:{x:10,y:5}},createElement:function(){var d=this.options;this.drawingElement=ad.Path.parse(d.path,{fill:d.fill,stroke:d.stroke})},positionMarker:function(ag){var Y=this._linePoints(ag);var ai=Y.start;var d=Y.end;var X=ab.transform();if(ai){X.rotate(P(ai,d),d)}if(d){var g=this.anchor;var ah=d.clone().translate(-g.x,-g.y);X.translate(ah.x,ah.y)}this.drawingElement.transform(X)},_linePoints:function(aj){var g=this.options;var d=aj.segments;var ah,X,ag;if(g.position==E){ag=d[0];if(ag){X=ag.anchor();ah=ag.controlOut();var ai=d[1];if(!ah&&ai){ah=ai.anchor()}}}else{ag=d[d.length-1];if(ag){X=ag.anchor();ah=ag.controlIn();var Y=d[d.length-2];if(!ah&&Y){ah=Y.anchor()}}}if(X){return{start:this._transformToPath(ah,aj),end:this._transformToPath(X,aj)}}}});var z={_getPath:function(d){var g=this.drawingElement;if(g instanceof ad.MultiPath){if(d==E){g=g.paths[0]}else{g=g.paths[g.paths.length-1]}}if(g&&g.segments.length){return g}},_normalizeMarkerOptions:function(d){var X=d.startCap;var g=d.endCap;if(o(X)){d.startCap={type:X}}if(o(g)){d.endCap={type:g}}},_removeMarker:function(d){var g=this._markers[d];if(g){this.drawingContainer().remove(g.drawingElement);delete this._markers[d]}},_createMarkers:function(){var d=this.options;this._normalizeMarkerOptions(d);this._markers={};this._markers[E]=this._createMarker(d.startCap,E);this._markers[T]=this._createMarker(d.endCap,T)},_createMarker:function(Y,g){var ag=(Y||{}).type;var ah=this._getPath(g);var d,X;if(!ah){this._removeMarker(g);return}if(ag==Z.filledCircle){d=ac}else{if(ag==Z.arrowStart||ag==Z.arrowEnd){d=b}else{this._removeMarker(g)}}if(d){X=new d(N({},Y,{position:g}));X.positionMarker(ah);this.drawingContainer().append(X.drawingElement);return X}},_positionMarker:function(d){var g=this._markers[d];if(g){var X=this._getPath(d);if(X){g.positionMarker(X)}else{this._removeMarker(d)}}},_capMap:{start:"startCap",end:"endCap"},_redrawMarker:function(ai,g,Y){this._normalizeMarkerOptions(Y);var ah=this.options;var ag=this._capMap[g];var X=(ah[ag]||{}).type;var d=Y[ag];var aj=false;if(d){ah[ag]=N({},ah[ag],d);if(d.type&&X!=d.type){this._removeMarker(g);this._markers[g]=this._createMarker(ah[ag],g);aj=true}else{if(this._markers[g]){this._markers[g].redraw(d)}}}else{if(ai&&!this._markers[g]&&ah[ag]){this._markers[g]=this._createMarker(ah[ag],g);aj=true}}return aj},_redrawMarkers:function(g,d){if(!this._redrawMarker(g,E,d)&&g){this._positionMarker(E)}if(!this._redrawMarker(g,T,d)&&g){this._positionMarker(T)}}};var K=J.extend({init:function(d){J.fn.init.call(this,d);this.container=new ad.Group();this._createElements();this._initSize()},options:{autoSize:true},drawingContainer:function(){return this.container},data:function(g){var d=this.options;if(g){if(d.data!=g){d.data=g;this._setData(g);this._initSize();this._redrawMarkers(true,{})}}else{return d.data}},redraw:function(d){if(d){J.fn.redraw.call(this,d);var g=this.options;var X=d.data;if(R(X)&&g.data!=X){g.data=X;this._setData(X);if(!this._updateSize(d)){this._initSize()}this._redrawMarkers(true,d)}else{this._updateSize(d);this._redrawMarkers(false,d)}}},_createElements:function(){var d=this.options;this.drawingElement=ad.Path.parse(d.data||"",{stroke:d.stroke});this._fill();this.container.append(this.drawingElement);this._createMarkers()},_setData:function(X){var d=this.drawingElement;var g=ad.Path.parse(X||"");var Y=g.paths.slice(0);g.paths.elements([]);d.paths.elements(Y)}});N(K.fn,L);N(K.fn,z);var f=J.extend({init:function(d){J.fn.init.call(this,d);this.container=new ad.Group();this._initPath();this._createMarkers()},drawingContainer:function(){return this.container},redraw:function(d){if(d){d=d||{};var X=d.from;var g=d.to;if(X){this.options.from=X}if(g){this.options.to=g}if(X||g){this._drawPath();this._redrawMarkers(true,d)}else{this._redrawMarkers(false,d)}J.fn.redraw.call(this,d)}},_initPath:function(){var g=this.options;var d=this.drawingElement=new ad.Path({stroke:g.stroke});this._fill();this._drawPath();this.container.append(d)},_drawPath:function(){var g=this.options;var d=this.drawingElement;var Y=g.from||new u();var X=g.to||new u();d.segments.elements([x(Y.x,Y.y),x(X.x,X.y)])}});N(f.fn,z);var s=J.extend({init:function(d){J.fn.init.call(this,d);this.container=new ad.Group();this._initPath();this._createMarkers()},drawingContainer:function(){return this.container},points:function(g){var d=this.options;if(g){d.points=g;this._updatePath()}else{return d.points}},redraw:function(d){if(d){var g=d.points;J.fn.redraw.call(this,d);if(g&&this._pointsDiffer(g)){this.points(g);this._redrawMarkers(true,d)}else{this._redrawMarkers(false,d)}}},_initPath:function(){var d=this.options;this.drawingElement=new ad.Path({stroke:d.stroke});this._fill();this.container.append(this.drawingElement);if(d.points){this._updatePath()}},_pointsDiffer:function(Y){var X=this.options.points;var g=X.length!==Y.length;if(!g){for(var d=0;d<Y.length;d++){if(X[d].x!==Y[d].x||X[d].y!==Y[d].y){g=true;break}}}return g},_updatePath:function(){var Y=this.drawingElement;var X=this.options;var ah=X.points;var g=[];var d;for(var ag=0;ag<ah.length;ag++){d=ah[ag];g.push(x(d.x,d.y))}Y.segments.elements(g)},options:{points:[]}});N(s.fn,z);var W=n.extend({init:function(d){n.fn.init.call(this,d);this._initImage()},redraw:function(d){if(d){if(d.source){this.drawingElement.src(d.source)}if(this._diffNumericOptions(d,[j,F,e,c])){this.drawingElement.rect(this._rect())}n.fn.redraw.call(this,d)}},_initImage:function(){var d=this.options;var g=this._rect();this.drawingElement=new ad.Image(d.source,g,{})},_rect:function(){var X=ae(this.options);var d=new ab.Point(X.x,X.y);var g=new ab.Size(X.width,X.height);return new ab.Rect(d,g)}});var l=n.extend({init:function(d){this.children=[];n.fn.init.call(this,d);this.drawingElement=new ad.Group();this._initSize()},options:{autoSize:false},append:function(d){this.drawingElement.append(d.drawingContainer());this.children.push(d);this._childrenChange=true},remove:function(d){if(this._remove(d)){this._childrenChange=true}},_remove:function(g){var d=aa(g,this.children);if(d>=0){this.drawingElement.removeAt(d);this.children.splice(d,1);return true}},clear:function(){this.drawingElement.clear();this.children=[];this._childrenChange=true},toFront:function(X){var g;for(var d=0;d<X.length;d++){g=X[d];if(this._remove(g)){this.append(g)}}},toBack:function(d){this._reorderChildren(d,0)},toIndex:function(d,g){this._reorderChildren(d,g)},_reorderChildren:function(X,am){var al=this.drawingElement;var ah=al.children.slice(0);var g=this.children;var aj=af(am);var ag,ak,Y,ai,d;for(ag=0;ag<X.length;ag++){d=X[ag];ai=d.drawingContainer();ak=aa(d,g);if(ak>=0){ah.splice(ak,1);g.splice(ak,1);Y=aj?am:am[ag];ah.splice(Y,0,ai);g.splice(Y,0,d)}}al.clear();al.append.apply(al,ah)},redraw:function(d){if(d){if(this._childrenChange){this._childrenChange=false;if(!this._updateSize(d)){this._initSize()}}else{this._updateSize(d)}n.fn.redraw.call(this,d)}},_boundingBox:function(){var Y=this.children;var d;var ag,X;for(var g=0;g<Y.length;g++){ag=Y[g];if(ag.visible()&&ag._includeInBBox!==false){X=ag.drawingContainer().clippedBBox(null);if(X){if(d){d=ab.Rect.union(d,X)}else{d=X}}}}return d}});N(l.fn,L);var i=l.extend({init:function(g,d){this.children=[];n.fn.init.call(this,d);this.drawingElement=new ad.Layout(v(g),d);this._initSize()},rect:function(g){if(g){this.drawingElement.rect(v(g))}else{var d=this.drawingElement.rect();if(d){return new w(d.origin.x,d.origin.y,d.size.width,d.size.height)}}},reflow:function(){this.drawingElement.reflow()},redraw:function(d){I.deepExtend(this.drawingElement.options,d);l.fn.redraw.call(this,d)}});var U=J.extend({init:function(d){J.fn.init.call(this,d);this._initCircle();this._initSize()},redraw:function(d){if(d){var g=this.options;if(d.center){N(g,{center:d.center});this._center.move(g.center.x,g.center.y)}if(this._diffNumericOptions(d,["radius"])){this._circle.setRadius(g.radius)}this._updateSize(d);J.fn.redraw.call(this,d)}},_initCircle:function(){var Y=this.options;var ag=Y.width;var X=Y.height;var g=Y.radius;if(!R(g)){if(!R(ag)){ag=X}if(!R(X)){X=ag}Y.radius=g=Math.min(ag,X)/2}var d=Y.center||{x:g,y:g};this._center=new ab.Point(d.x,d.y);this._circle=new ab.Circle(this._center,g);this.drawingElement=new ad.Circle(this._circle,{stroke:Y.stroke});this._fill()}});N(U.fn,L);var H=a.extend({init:function(g,d){d=d||{};this.element=g;this.surface=ad.Surface.create(g,d);if(I.isFunction(this.surface.translate)){this.translate=this._translate}this.drawingElement=new ad.Group();this._viewBox=new w(0,0,d.width,d.height);this.size(this._viewBox)},bounds:function(){var d=this.drawingElement.clippedBBox();return new w(0,0,d.width(),d.height())},size:function(d){var g=this._viewBox;if(R(d)){g.width=d.width;g.height=d.height;this.surface.setSize(d)}return{width:g.width,height:g.height}},_translate:function(d,X){var g=this._viewBox;if(R(d)&&R(X)){g.x=d;g.y=X;this.surface.translate({x:d,y:X})}return{x:g.x,y:g.y}},draw:function(){this.surface.draw(this.drawingElement)},append:function(d){this.drawingElement.append(d.drawingContainer());return this},remove:function(d){this.drawingElement.remove(d.drawingContainer())},insertBefore:function(){},clear:function(){this.drawingElement.clear()},destroy:function(d){this.surface.destroy();if(d){G(this.element).remove()}}});function ae(d){return{x:d.x||0,y:d.y||0,width:d.width||0,height:d.height||0}}function D(g){if(g){var d=g;if(o(d)){d={color:d}}if(d.color){d.color=y(d.color)}return d}}function y(g){var d;if(g!=C){d=new ad.Color(g).toHex()}else{d=g}return d}function P(Y,g){var ag=g.x-Y.x;var d=g.y-Y.y;var X=ad.util.deg(Math.atan2(d,ag));return X}function x(d,g){return new ad.Segment(new ab.Point(d,g))}function v(d){if(d){return new ab.Rect([d.x,d.y],[d.width,d.height])}}I.deepExtend(m,{init:function(d){I.init(d,m.ui)},diffNumericOptions:p,Element:n,Scale:t,Translation:S,Rotation:k,Circle:U,Group:l,Rectangle:r,Canvas:H,Path:K,Layout:i,Line:f,MarkerBase:M,ArrowMarker:b,CircleMarker:ac,Polyline:s,CompositeTransform:Q,TextBlock:V,Image:W,VisualBase:J})}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/diagram/services",["kendo.drawing","dataviz/diagram/svg"],a)}(function(){(function(au,x){var u=window.kendo,ai=u.dataviz,j=ai.diagram,aB=u.Class,ac=j.Group,D=j.Rect,C=j.Rectangle,ah=j.Utils,O=ah.isUndefined,i=j.Point,ae=j.Circle,W=j.Ticker,aH=u.deepExtend,aq=u.ui.Movable,ax=u.support.browser,aw=u.drawing.util,k=aw.defined,v=au.inArray,A=au.proxy;var t={arrow:"default",grip:"pointer",cross:"pointer",add:"pointer",move:"move",select:"pointer",south:"s-resize",east:"e-resize",west:"w-resize",north:"n-resize",rowresize:"row-resize",colresize:"col-resize"},U=10,aL="Auto",s="Top",o="Right",c="Left",av="Bottom",p=10,J=10,aj="dragStart",B="drag",w="dragEnd",V="itemRotate",m="itemBoundsChange",Z=5,aJ=5,l="mouseEnter",M="mouseLeave",G="zoomStart",h="zoomEnd",at=-20000,f=20000,S=0.9,T=0.93,af=5,ao="transparent",X="pan",K="rotated",N="source",q="target",aA={"-1":N,"1":q};j.Cursors=t;var ad=u.Class.extend({init:function(aM){this.layoutState=aM;this.diagram=aM.diagram},initState:function(){this.froms=[];this.tos=[];this.subjects=[];function aM(aP,aO){var aN=this.diagram.getShapeById(aP);if(aN){this.subjects.push(aN);this.froms.push(aN.bounds().topLeft());this.tos.push(aO.topLeft())}}this.layoutState.nodeMap.forEach(aM,this)},update:function(aN){if(this.subjects.length<=0){return}for(var aM=0;aM<this.subjects.length;aM++){this.subjects[aM].position(new i(this.froms[aM].x+(this.tos[aM].x-this.froms[aM].x)*aN,this.froms[aM].y+(this.tos[aM].y-this.froms[aM].y)*aN))}}});var aa=aB.extend({init:function(aM,aO,aN){if(O(aN)){this.animate=false}else{this.animate=aN}this._initialState=aM;this._finalState=aO;this.title="Diagram layout"},undo:function(){this.setState(this._initialState)},redo:function(){this.setState(this._finalState)},setState:function(aN){var aM=aN.diagram;if(this.animate){aN.linkMap.forEach(function(aR,aP){var aQ=aM.getShapeById(aR);aQ.visible(false);if(aQ){aQ.points(aP)}});var aO=new W();aO.addAdapter(new ad(aN));aO.onComplete(function(){aN.linkMap.forEach(function(aQ){var aP=aM.getShapeById(aQ);aP.visible(true)})});aO.play()}else{aN.nodeMap.forEach(function(aR,aQ){var aP=aM.getShapeById(aR);if(aP){aP.position(aQ.topLeft())}});aN.linkMap.forEach(function(aR,aP){var aQ=aM.getShapeById(aR);if(aQ){aQ.points(aP)}})}}});var ap=aB.extend({init:function(aM){this.units=[];this.title="Composite unit";if(aM!==x){this.units.push(aM)}},add:function(aM){this.units.push(aM)},undo:function(){for(var aM=0;aM<this.units.length;aM++){this.units[aM].undo()}},redo:function(){for(var aM=0;aM<this.units.length;aM++){this.units[aM].redo()}}});var E=aB.extend({init:function(aM,aN,aO){this.item=aM;this._redoSource=aN;this._redoTarget=aO;if(k(aN)){this._undoSource=aM.source()}if(k(aO)){this._undoTarget=aM.target()}this.title="Connection Editing"},undo:function(){if(this._undoSource!==x){this.item._updateConnector(this._undoSource,"source")}if(this._undoTarget!==x){this.item._updateConnector(this._undoTarget,"target")}this.item.updateModel()},redo:function(){if(this._redoSource!==x){this.item._updateConnector(this._redoSource,"source")}if(this._redoTarget!==x){this.item._updateConnector(this._redoTarget,"target")}this.item.updateModel()}});var d=aB.extend({init:function(aO,aM,aN){this.item=aO;this._undoSource=aM;this._undoTarget=aN;this._redoSource=aO.source();this._redoTarget=aO.target();this.title="Connection Editing"},undo:function(){this.item._updateConnector(this._undoSource,"source");this.item._updateConnector(this._undoTarget,"target");this.item.updateModel()},redo:function(){this.item._updateConnector(this._redoSource,"source");this.item._updateConnector(this._redoTarget,"target");this.item.updateModel()}});var aF=aB.extend({init:function(aM){this.connection=aM;this.diagram=aM.diagram;this.targetConnector=aM.targetConnector;this.title="Delete connection"},undo:function(){this.diagram._addConnection(this.connection,false)},redo:function(){this.diagram.remove(this.connection,false)}});var Y=aB.extend({init:function(aM){this.shape=aM;this.diagram=aM.diagram;this.title="Deletion"},undo:function(){this.diagram._addShape(this.shape,false);this.shape.select(false)},redo:function(){this.shape.select(false);this.diagram.remove(this.shape,false)}});var ab=aB.extend({init:function(aM,aQ,aP){this.shapes=aM;this.undoStates=aQ;this.title="Transformation";this.redoStates=[];this.adorner=aP;for(var aO=0;aO<this.shapes.length;aO++){var aN=this.shapes[aO];this.redoStates.push(aN.bounds())}},undo:function(){for(var aN=0;aN<this.shapes.length;aN++){var aM=this.shapes[aN];aM.bounds(this.undoStates[aN]);if(aM.hasOwnProperty("layout")){aM.layout(aM,this.redoStates[aN],this.undoStates[aN])}aM.updateModel()}if(this.adorner){this.adorner.refreshBounds();this.adorner.refresh()}},redo:function(){for(var aN=0;aN<this.shapes.length;aN++){var aM=this.shapes[aN];aM.bounds(this.redoStates[aN]);if(aM.hasOwnProperty("layout")){aM.layout(aM,this.undoStates[aN],this.redoStates[aN])}aM.updateModel()}if(this.adorner){this.adorner.refreshBounds();this.adorner.refresh()}}});var aK=aB.extend({init:function(aM,aN){this.connection=aM;this.diagram=aN;this.title="New connection"},undo:function(){this.diagram.remove(this.connection,false)},redo:function(){this.diagram._addConnection(this.connection,false)}});var ag=aB.extend({init:function(aM,aN){this.shape=aM;this.diagram=aN;this.title="New shape"},undo:function(){this.diagram.deselect();this.diagram.remove(this.shape,false)},redo:function(){this.diagram._addShape(this.shape,false)}});var z=aB.extend({init:function(aM,aO,aN){this.initial=aM;this.finalPos=aO;this.diagram=aN;this.title="Pan Unit"},undo:function(){this.diagram.pan(this.initial)},redo:function(){this.diagram.pan(this.finalPos)}});var L=aB.extend({init:function(aQ,aM,aO){this.shapes=aM;this.undoRotates=aO;this.title="Rotation";this.redoRotates=[];this.redoAngle=aQ._angle;this.adorner=aQ;this.center=aQ._innerBounds.center();for(var aP=0;aP<this.shapes.length;aP++){var aN=this.shapes[aP];this.redoRotates.push(aN.rotate().angle)}},undo:function(){var aN,aM;for(aN=0;aN<this.shapes.length;aN++){aM=this.shapes[aN];aM.rotate(this.undoRotates[aN],this.center,false);if(aM.hasOwnProperty("layout")){aM.layout(aM)}aM.updateModel()}if(this.adorner){this.adorner._initialize();this.adorner.refresh()}},redo:function(){var aN,aM;for(aN=0;aN<this.shapes.length;aN++){aM=this.shapes[aN];aM.rotate(this.redoRotates[aN],this.center,false);if(aM.hasOwnProperty("layout")){aM.layout(aM)}aM.updateModel()}if(this.adorner){this.adorner._initialize();this.adorner.refresh()}}});var Q=aB.extend({init:function(aN,aM,aO){this.diagram=aN;this.indices=aO;this.items=aM;this.title="Rotate Unit"},undo:function(){this.diagram._toIndex(this.items,this.indices)},redo:function(){this.diagram.toFront(this.items,false)}});var I=aB.extend({init:function(aN,aM,aO){this.diagram=aN;this.indices=aO;this.items=aM;this.title="Rotate Unit"},undo:function(){this.diagram._toIndex(this.items,this.indices)},redo:function(){this.diagram.toBack(this.items,false)}});var aG=u.Observable.extend({init:function(aM){u.Observable.fn.init.call(this,aM);this.bind(this.events,aM);this.stack=[];this.index=0;this.capacity=100},events:["undone","redone"],begin:function(){this.composite=new ap()},cancel:function(){this.composite=x},commit:function(aM){if(this.composite.units.length>0){this._restart(this.composite,aM)}this.composite=x},addCompositeItem:function(aM){if(this.composite){this.composite.add(aM)}else{this.add(aM)}},add:function(aM,aN){this._restart(aM,aN)},pop:function(){if(this.index>0){this.stack.pop();this.index--}},count:function(){return this.stack.length},undo:function(){if(this.index>0){this.index--;this.stack[this.index].undo();this.trigger("undone")}},redo:function(){if(this.stack.length>0&&this.index<this.stack.length){this.stack[this.index].redo();this.index++;this.trigger("redone")}},_restart:function(aN,aM){this.stack.splice(this.index,this.stack.length-this.index);this.stack.push(aN);if(aM!==false){this.redo()}else{this.index++}if(this.stack.length>this.capacity){this.stack.splice(0,this.stack.length-this.capacity);this.index=this.capacity}},clear:function(){this.stack=[];this.index=0}});var ak=aB.extend({init:function(aM){this.toolService=aM},start:function(){},move:function(){},end:function(){},tryActivate:function(){return false},getCursor:function(){return t.arrow}});var ay=ak.extend({init:function(aQ){var aP=this;var aS=u.support.mobileOS?T:S;ak.fn.init.call(aP,aQ);var aO=aP.toolService.diagram,aN=aO.canvas;var aM=aO.scroller=aP.scroller=au(aO.scrollable).kendoMobileScroller({friction:aS,velocityMultiplier:af,mousewheelScrolling:false,zoom:false,scroll:A(aP._move,aP)}).data("kendoMobileScroller");if(aN.translate){aP.movableCanvas=new aq(aN.element)}var aR=function(aV,aU,aT){aV.makeVirtual();aV.virtualSize(aU||at,aT||f)};aR(aM.dimensions.x);aR(aM.dimensions.y);aM.disable()},tryActivate:function(aQ,aP){var aO=this.toolService;var aN=aO.diagram.options.pannable;var aM=aP.ctrlKey;if(k(aN.key)){if(!aN.key||aN.key=="none"){aM=ar(aP)&&!k(aO.hoveredItem)}else{aM=aP[aN.key+"Key"]}}return aN!==false&&aM&&!k(aO.hoveredAdorner)&&!k(aO._hoveredConnector)},start:function(){this.scroller.enable()},move:function(){},_move:function(aP){var aO=this,aN=aO.toolService.diagram,aM=aN.canvas,aQ=new i(aP.scrollLeft,aP.scrollTop);if(aM.translate){aN._storePan(aQ.times(-1));aO.movableCanvas.moveTo(aQ);aM.translate(aQ.x,aQ.y)}else{aQ=aQ.plus(aN._pan.times(-1))}aN.trigger(X,{pan:aQ})},end:function(){this.scroller.disable()},getCursor:function(){return t.move}});var R=aB.extend({init:function(aM){this.toolService=aM},tryActivate:function(){return true},start:function(aP,aO){var aN=this.toolService,aM=aN.diagram,aQ=aN.hoveredItem;if(aQ){aN.selectSingle(aQ,aO);if(aQ.adorner){this.adorner=aQ.adorner;this.handle=this.adorner._hitTest(aP)}}if(!this.handle){this.handle=aM._resizingAdorner._hitTest(aP);if(this.handle){this.adorner=aM._resizingAdorner}}if(this.adorner){if(!this.adorner.isDragHandle(this.handle)||!aM.trigger(aj,{shapes:this.adorner.shapes,connections:[]})){this.adorner.start(aP)}else{aN.startPoint=aP;aN.end(aP)}}},move:function(aM){if(this.adorner){this.adorner.move(this.handle,aM);if(this.adorner.isDragHandle(this.handle)){this.toolService.diagram.trigger(B,{shapes:this.adorner.shapes,connections:[]})}}},end:function(){var aM=this.toolService.diagram,aN=this.adorner,aO;if(aN){if(!aN.isDragHandle(this.handle)||!aM.trigger(w,{shapes:aN.shapes,connections:[]})){aO=aN.stop();if(aO){aM.undoRedoService.add(aO,false)}}else{aN.cancel()}}this.adorner=x;this.handle=x},getCursor:function(aM){return this.toolService.hoveredItem?this.toolService.hoveredItem._getCursor(aM):t.arrow}});var n=aB.extend({init:function(aM){this.toolService=aM},tryActivate:function(aQ,aP){var aO=this.toolService;var aN=aO.diagram.options.selectable;var aM=aN&&aN.multiple!==false;if(aM){if(aN.key&&aN.key!="none"){aM=aP[aN.key+"Key"]}else{aM=ar(aP)}}return aM&&!k(aO.hoveredItem)&&!k(aO.hoveredAdorner)},start:function(aN){var aM=this.toolService.diagram;aM.deselect();aM.selector.start(aN)},move:function(aN){var aM=this.toolService.diagram;aM.selector.move(aN)},end:function(aP,aO){var aM=this.toolService.diagram,aQ=this.toolService.hoveredItem;var aN=aM.selector.bounds();if((!aQ||!aQ.isSelected)&&!aO.ctrlKey){aM.deselect()}if(!aN.isEmpty()){aM.selectArea(aN)}aM.selector.end()},getCursor:function(){return t.arrow}});var am=aB.extend({init:function(aM){this.toolService=aM;this.type="ConnectionTool"},tryActivate:function(){return this.toolService._hoveredConnector},start:function(aR,aQ){var aP=this.toolService,aO=aP.diagram,aM=aP._hoveredConnector,aN=aO._createConnection({},aM._c,aR);if(al(aN)&&!aO.trigger(aj,{shapes:[],connections:[aN],connectionHandle:q})&&aO._addConnection(aN)){aP._connectionManipulation(aN,aM._c.shape,true);aP._removeHover();aP.selectSingle(aP.activeConnection,aQ);if(aQ.type=="touchmove"){aO._cachedTouchTarget=aM.visual}}else{aN.source(null);aP.end(aR)}},move:function(aO){var aN=this.toolService;var aM=aN.activeConnection;aM.target(aO);aN.diagram.trigger(B,{shapes:[],connections:[aM],connectionHandle:q});return true},end:function(aR){var aP=this.toolService,aS=aP.diagram,aO=aP.activeConnection,aT=aP.hoveredItem,aN=aP._hoveredConnector,aQ,aM=aS._cachedTouchTarget;if(!aO){return}if(aN&&aN._c!=aO.sourceConnector){aQ=aN._c}else{if(aT&&aT instanceof j.Shape){aQ=aT.getConnector(aL)||aT.getConnector(aR)}else{aQ=aR}}aO.target(aQ);if(!aS.trigger(w,{shapes:[],connections:[aO],connectionHandle:q})){aO.updateModel();aS._syncConnectionChanges()}else{aS.remove(aO,false);aS.undoRedoService.pop()}aP._connectionManipulation();if(aM){aS._connectorsAdorner.visual.remove(aM);aS._cachedTouchTarget=null}},getCursor:function(){return t.arrow}});var F=aB.extend({init:function(aM){this.toolService=aM;this.type="ConnectionTool"},tryActivate:function(aS,aR){var aQ=this.toolService,aN=aQ.diagram,aM=aN.options.selectable,aP=aQ.hoveredItem,aO=aM!==false&&aP&&aP.path&&!(aP.isSelected&&aR.ctrlKey);if(aO){this._c=aP}return aO},start:function(aS,aR){var aP=this.toolService;var aM=this._c;aP.selectSingle(aM,aR);var aO=aM.adorner;var aQ,aN;if(aO){aQ=aO._hitTest(aS);aN=aA[aQ]}if(al(aM)&&aO&&!aP.diagram.trigger(aj,{shapes:[],connections:[aM],connectionHandle:aN})){this.handle=aQ;this.handleName=aN;aO.start(aS)}else{aP.startPoint=aS;aP.end(aS)}},move:function(aN){var aM=this._c.adorner;if(al(this._c)&&aM){aM.move(this.handle,aN);this.toolService.diagram.trigger(B,{shapes:[],connections:[this._c],connectionHandle:this.handleName});return true}},end:function(aR){var aM=this._c;var aO=aM.adorner;var aQ=this.toolService;var aN=aQ.diagram;if(aO){if(al(aM)){var aP=aO.stop(aR);if(!aN.trigger(w,{shapes:[],connections:[aM],connectionHandle:this.handleName})){aN.undoRedoService.add(aP,false);aM.updateModel();aN._syncConnectionChanges()}else{aP.undo()}}}},getCursor:function(){return t.move}});function b(aM,aN){return aN.charCodeAt(0)==aM||aN.toUpperCase().charCodeAt(0)==aM}var aD=aB.extend({init:function(aM){this.diagram=aM;this.tools=[new ay(this),new F(this),new am(this),new n(this),new R(this)];this.activeTool=x},start:function(aN,aM){aM=aH({},aM);if(this.activeTool){this.activeTool.end(aN,aM)}this._updateHoveredItem(aN);this._activateTool(aN,aM);this.activeTool.start(aN,aM);this._updateCursor(aN);this.diagram.focus();this.diagram.canvas.surface.suspendTracking();this.startPoint=aN;return true},move:function(aO,aN){aN=aH({},aN);var aM=true;if(this.activeTool){aM=this.activeTool.move(aO,aN)}if(aM){this._updateHoveredItem(aO)}this._updateCursor(aO);return true},end:function(aN,aM){aM=aH({},aM);if(this.activeTool){this.activeTool.end(aN,aM)}this.diagram.canvas.surface.resumeTracking();this.activeTool=x;this._updateCursor(aN);return true},keyDown:function(aN,aP){var aM=this.diagram;aP=aH({ctrlKey:false,metaKey:false,altKey:false},aP);if((aP.ctrlKey||aP.metaKey)&&!aP.altKey){if(b(aN,"a")){aM.selectAll();aM._destroyToolBar();return true}else{if(b(aN,"z")){aM.undo();aM._destroyToolBar();return true}else{if(b(aN,"y")){aM.redo();aM._destroyToolBar();return true}else{if(b(aN,"c")){aM.copy();aM._destroyToolBar()}else{if(b(aN,"x")){aM.cut();aM._destroyToolBar()}else{if(b(aN,"v")){aM.paste();aM._destroyToolBar()}else{if(b(aN,"l")){aM.layout();aM._destroyToolBar()}else{if(b(aN,"d")){aM._destroyToolBar();aM.copy();aM.paste()}}}}}}}}}else{if(aN===46||aN===8){var aO=this.diagram._triggerRemove(aM.select());if(aO.length){this.diagram.remove(aO,true);this.diagram._syncChanges();this.diagram._destroyToolBar()}return true}else{if(aN===27){this._discardNewConnection();aM.deselect();aM._destroyToolBar();return true}}}},wheel:function(aR,aQ){var aO=this.diagram,aT=aQ.delta,aS=aO.zoom(),aN=aO.options,aM=aN.zoomRate,aP={point:aR,meta:aQ,zoom:aS};if(aO.trigger(G,aP)){return}if(aT<0){aS+=aM}else{aS-=aM}aS=u.dataviz.round(Math.max(aN.zoomMin,Math.min(aN.zoomMax,aS)),2);aP.zoom=aS;aO.zoom(aS,aP);aO.trigger(h,aP);return true},setTool:function(aN,aM){aN.toolService=this;this.tools[aM]=aN},selectSingle:function(aP,aQ){var aN=this.diagram;var aM=aN.options.selectable;if(aM&&!aP.isSelected&&aP.options.selectable!==false){var aO=aQ.ctrlKey&&aM.multiple!==false;aN.select(aP,{addToSelection:aO})}},_discardNewConnection:function(){if(this.newConnection){this.diagram.remove(this.newConnection);this.newConnection=x}},_activateTool:function(aP,aO){for(var aN=0;aN<this.tools.length;aN++){var aM=this.tools[aN];if(aM.tryActivate(aP,aO)){this.activeTool=aM;break}}},_updateCursor:function(aN){var aM=this.diagram.element;var aO=this.activeTool?this.activeTool.getCursor(aN):this.hoveredAdorner?this.hoveredAdorner._getCursor(aN):this.hoveredItem?this.hoveredItem._getCursor(aN):t.arrow;aM.css({cursor:aO});if(ax.msie&&ax.version==7){aM[0].style.cssText=aM[0].style.cssText}},_connectionManipulation:function(aN,aO,aM){this.activeConnection=aN;this.disabledShape=aO;if(aM){this.newConnection=this.activeConnection}else{this.newConnection=x}},_updateHoveredItem:function(aO){var aN=this._hitTest(aO);var aM=this.diagram;if(aN!=this.hoveredItem&&(!this.disabledShape||aN!=this.disabledShape)){if(this.hoveredItem){aM.trigger(M,{item:this.hoveredItem});this.hoveredItem._hover(false)}if(aN&&aN.options.enable){aM.trigger(l,{item:aN});this.hoveredItem=aN;this.hoveredItem._hover(true)}else{this.hoveredItem=x}}},_removeHover:function(){if(this.hoveredItem){this.hoveredItem._hover(false);this.hoveredItem=x}},_hitTest:function(aN){var aQ,aR=this.diagram,aP,aO;if(this._hoveredConnector){this._hoveredConnector._hover(false);this._hoveredConnector=x}if(aR._connectorsAdorner._visible){aQ=aR._connectorsAdorner._hitTest(aN);if(aQ){return aQ}}aQ=this.diagram._resizingAdorner._hitTest(aN);if(aQ){this.hoveredAdorner=aR._resizingAdorner;if(aQ.x!==0||aQ.y!==0){return}aQ=x}else{this.hoveredAdorner=x}if(!this.activeTool||this.activeTool.type!=="ConnectionTool"){var aM=[];for(aO=0;aO<aR._selectedItems.length;aO++){aP=aR._selectedItems[aO];if(aP instanceof j.Connection){aM.push(aP)}}aQ=this._hitTestItems(aM,aN)}return aQ||this._hitTestElements(aN)},_hitTestElements:function(aM){var aP=this.diagram;var aT=this._hitTestItems(aP.shapes,aM);var aN=this._hitTestItems(aP.connections,aM);var aR;if((!this.activeTool||this.activeTool.type!="ConnectionTool")&&aT&&aN&&!aE(aT,aM)){var aS=aP.mainLayer;var aO=v(aT.visual,aS.children);var aQ=v(aN.visual,aS.children);aR=aO>aQ?aT:aN}return aR||aT||aN},_hitTestItems:function(aQ,aM){var aN,aO,aP;for(aN=aQ.length-1;aN>=0;aN--){aO=aQ[aN];aP=aO._hitTest(aM);if(aP){return aP}}}});var a=u.Class.extend({init:function(){}});var e=a.extend({init:function(aM){var aN=this;a.fn.init.call(aN);this.connection=aM},hitTest:function(aM){var aN=this.getBounds().inflate(U);if(!aN.contains(aM)){return false}return j.Geometry.distanceToPolyline(aM,this.connection.allPoints())<U},getBounds:function(){var aQ=this.connection.allPoints(),aP=aQ[0],aT=aQ[aQ.length-1],aO=Math.max(aP.x,aT.x),aS=Math.min(aP.x,aT.x),aR=Math.min(aP.y,aT.y),aM=Math.max(aP.y,aT.y);for(var aN=1;aN<aQ.length-1;++aN){aO=Math.max(aO,aQ[aN].x);aS=Math.min(aS,aQ[aN].x);aR=Math.min(aR,aQ[aN].y);aM=Math.max(aM,aQ[aN].y)}return new D(aS,aR,aO-aS,aM-aR)}});var y=e.extend({init:function(aM){var aN=this;e.fn.init.call(aN);this.connection=aM},route:function(){}});var aI=e.extend({SAME_SIDE_DISTANCE_RATIO:5,init:function(aM){var aN=this;e.fn.init.call(aN);this.connection=aM},routePoints:function(aQ,aN,aP,aO){var aM;if(aP&&aO){aM=this._connectorPoints(aQ,aN,aP,aO)}else{aM=this._floatingPoints(aQ,aN,aP)}return aM},route:function(){var aP=this.connection._resolvedSourceConnector;var aO=this.connection._resolvedTargetConnector;var aQ=this.connection.sourcePoint();var aM=this.connection.targetPoint();var aN=this.routePoints(aQ,aM,aP,aO);this.connection.points(aN)},_connectorSides:[{name:"Top",axis:"y",boundsPoint:"topLeft",secondarySign:1},{name:"Left",axis:"x",boundsPoint:"topLeft",secondarySign:1},{name:"Bottom",axis:"y",boundsPoint:"bottomRight",secondarySign:-1},{name:"Right",axis:"x",boundsPoint:"bottomRight",secondarySign:-1}],_connectorSide:function(aP,aR){var aS=aP.position();var aT=aP.shape.bounds(K);var aM={topLeft:aT.topLeft(),bottomRight:aT.bottomRight()};var aN=this._connectorSides;var aQ=aw.MAX_NUM;var aX;var aV;var aO;var aU;for(var aW=0;aW<aN.length;aW++){aU=aN[aW];aO=aU.axis;aX=Math.round(Math.abs(aS[aO]-aM[aU.boundsPoint][aO]));if(aX<aQ){aQ=aX;aV=aU}else{if(aX===aQ&&(aS[aO]-aR[aO])*aU.secondarySign>(aS[aV.axis]-aR[aV.axis])*aV.secondarySign){aV=aU}}}return aV.name},_sameSideDistance:function(aM){var aN=aM.shape.bounds(K);return Math.min(aN.width,aN.height)/this.SAME_SIDE_DISTANCE_RATIO},_connectorPoints:function(aO,aQ,aN,aU){var aT=this._connectorSide(aN,aQ);var aV=this._connectorSide(aU,aO);var aS=aQ.x-aO.x;var aR=aQ.y-aO.y;var aP=this._sameSideDistance(aN);var aX=[];var aM,aW;if(aT===s||aT==av){if(aV==s||aV==av){if(aT==aV){if(aT==s){aW=Math.min(aO.y,aQ.y)-aP}else{aW=Math.max(aO.y,aQ.y)+aP}aX=[new i(aO.x,aW),new i(aQ.x,aW)]}else{aX=[new i(aO.x,aO.y+aR/2),new i(aQ.x,aO.y+aR/2)]}}else{aX=[new i(aO.x,aQ.y)]}}else{if(aV==c||aV==o){if(aT==aV){if(aT==c){aM=Math.min(aO.x,aQ.x)-aP}else{aM=Math.max(aO.x,aQ.x)+aP}aX=[new i(aM,aO.y),new i(aM,aQ.y)]}else{aX=[new i(aO.x+aS/2,aO.y),new i(aO.x+aS/2,aO.y+aR)]}}else{aX=[new i(aQ.x,aO.y)]}}return aX},_floatingPoints:function(aN,aP,aM){var aS=aM?this._connectorSide(aM,aP):null;var aX=this._startHorizontal(aN,aP,aS);var aW=[aN,aN,aP,aP];var aR=aP.x-aN.x;var aQ=aP.y-aN.y;var aO=aW.length;var aV;var aT;for(var aU=1;aU<aO-1;++aU){if(aX){if(aU%2!==0){aV=aR/(aO/2);aT=0}else{aV=0;aT=aQ/((aO-1)/2)}}else{if(aU%2!==0){aV=0;aT=aQ/(aO/2)}else{aV=aR/((aO-1)/2);aT=0}}aW[aU]=new i(aW[aU-1].x+aV,aW[aU-1].y+aT)}aU--;if(aX&&aU%2!==0||!aX&&aU%2===0){aW[aO-2]=new i(aW[aO-1].x,aW[aO-2].y)}else{aW[aO-2]=new i(aW[aO-2].x,aW[aO-1].y)}return[aW[1],aW[2]]},_startHorizontal:function(aP,aN,aO){var aM;if(aO!==null&&(aO===o||aO===c)){aM=true}else{aM=Math.abs(aP.x-aN.x)>Math.abs(aP.y-aN.y)}return aM}});var aC=aB.extend({init:function(aN,aM){var aO=this;aO.diagram=aN;aO.options=aH({},aO.options,aM);aO.visual=new ac();aO.diagram._adorners.push(aO)},refresh:function(){}});var H=aC.extend({init:function(aM,aO){var aP=this,aN;aP.connection=aM;aN=aP.connection.diagram;aP._ts=aN.toolService;aC.fn.init.call(aP,aN,aO);var aQ=aP.connection.sourcePoint();var aR=aP.connection.targetPoint();aP.spVisual=new ae(aH(aP.options.handles,{center:aQ}));aP.epVisual=new ae(aH(aP.options.handles,{center:aR}));aP.visual.append(aP.spVisual);aP.visual.append(aP.epVisual)},options:{handles:{}},_getCursor:function(){return t.move},start:function(aM){this.handle=this._hitTest(aM);this.startPoint=aM;this._initialSource=this.connection.source();this._initialTarget=this.connection.target();switch(this.handle){case -1:if(this.connection.targetConnector){this._ts._connectionManipulation(this.connection,this.connection.targetConnector.shape)}break;case 1:if(this.connection.sourceConnector){this._ts._connectionManipulation(this.connection,this.connection.sourceConnector.shape)}break}},move:function(aM,aN){switch(aM){case -1:this.connection.source(aN);break;case 1:this.connection.target(aN);break;default:var aO=aN.minus(this.startPoint);this.startPoint=aN;if(!this.connection.sourceConnector){this.connection.source(this.connection.sourcePoint().plus(aO))}if(!this.connection.targetConnector){this.connection.target(this.connection.targetPoint().plus(aO))}break}this.refresh();return true},stop:function(aP){var aN=this.diagram.toolService,aM=aN.hoveredItem,aO;if(aN._hoveredConnector){aO=aN._hoveredConnector._c}else{if(aM&&aM instanceof j.Shape){aO=aM.getConnector(aL)||aM.getConnector(aP)}else{aO=aP}}if(this.handle===-1){this.connection.source(aO)}else{if(this.handle===1){this.connection.target(aO)}}this.handle=x;this._ts._connectionManipulation();return new d(this.connection,this._initialSource,this._initialTarget)},_hitTest:function(aT){var aS=this.connection.sourcePoint();var aP=this.connection.targetPoint();var aN=this.options.handles.width/2+U;var aM=this.options.handles.height/2+U;var aR=aS.distanceTo(aT);var aU=aP.distanceTo(aT);var aV=new D(aS.x,aS.y).inflate(aN,aM).contains(aT);var aO=new D(aP.x,aP.y).inflate(aN,aM).contains(aT);var aQ=0;if(aV&&(!aO||aR<aU)){aQ=-1}else{if(aO&&(!aV||aU<aR)){aQ=1}}return aQ},refresh:function(){this.spVisual.redraw({center:this.diagram.modelToLayer(this.connection.sourcePoint())});this.epVisual.redraw({center:this.diagram.modelToLayer(this.connection.targetPoint())})}});var P=aC.extend({init:function(aN,aM){var aO=this;aC.fn.init.call(aO,aN,aM);aO._refreshHandler=function(aP){if(aP.item==aO.shape){aO.refresh()}}},show:function(aN){var aP=this,aM,aO,aQ;aP._visible=true;aP.shape=aN;aP.diagram.bind(m,aP._refreshHandler);aM=aN.connectors.length;aP.connectors=[];aP._clearVisual();for(aO=0;aO<aM;aO++){aQ=new r(aN.connectors[aO]);aP.connectors.push(aQ);aP.visual.append(aQ.visual)}aP.visual.visible(true);aP.refresh()},_clearVisual:function(){var aM=this;if(aM.diagram._cachedTouchTarget){aM._keepCachedTouchTarget()}else{aM.visual.clear()}},_keepCachedTouchTarget:function(){var aQ=this,aP=aQ.visual.children;var aO=aP.length;var aM=v(aQ.diagram._cachedTouchTarget,aP);for(var aN=aO-1;aN>=0;aN--){if(aN==aM){continue}aQ.visual.remove(aP[aN])}},destroy:function(){var aM=this;aM.diagram.unbind(m,aM._refreshHandler);aM.shape=x;aM._visible=x;aM.visual.visible(false)},_hitTest:function(aO){var aN,aM;for(aM=0;aM<this.connectors.length;aM++){aN=this.connectors[aM];if(aN._hitTest(aO)){aN._hover(true);this.diagram.toolService._hoveredConnector=aN;break}}},refresh:function(){if(this.shape){var aM=this.shape.bounds();aM=this.diagram.modelToLayer(aM);this.visual.position(aM.topLeft());au.each(this.connectors,function(){this.refresh()})}}});function g(aO,aN){var aM;if(aO.x==-1&&aO.y==-1){aM=aN.bottomRight()}else{if(aO.x==1&&aO.y==1){aM=aN.topLeft()}else{if(aO.x==-1&&aO.y==1){aM=aN.topRight()}else{if(aO.x==1&&aO.y==-1){aM=aN.bottomLeft()}else{if(aO.x===0&&aO.y==-1){aM=aN.bottom()}else{if(aO.x===0&&aO.y==1){aM=aN.top()}else{if(aO.x==1&&aO.y===0){aM=aN.left()}else{if(aO.x==-1&&aO.y===0){aM=aN.right()}}}}}}}}return aM}var an=aC.extend({init:function(aN,aM){var aO=this;aC.fn.init.call(aO,aN,aM);aO._manipulating=false;aO.map=[];aO.shapes=[];aO._initSelection();aO._createHandles();aO.redraw();aO.diagram.bind("select",function(aP){aO._initialize(aP.selected)});aO._refreshHandler=function(){if(!aO._internalChange){aO.refreshBounds();aO.refresh()}};aO._rotatedHandler=function(){if(aO.shapes.length==1){aO._angle=aO.shapes[0].rotate().angle}aO._refreshHandler()};aO.diagram.bind(m,aO._refreshHandler).bind(V,aO._rotatedHandler);aO.refreshBounds();aO.refresh()},options:{handles:{fill:{color:"#fff"},stroke:{color:"#282828"},height:7,width:7,hover:{fill:{color:"#282828"},stroke:{color:"#282828"}}},selectable:{stroke:{color:"#778899",width:1,dashType:"dash"},fill:{color:ao}},offset:10},_initSelection:function(){var aP=this;var aO=aP.diagram;var aN=aO.options.selectable;var aM=aH({},aP.options.selectable,aN);aP.rect=new C(aM);aP.visual.append(aP.rect)},_resizable:function(){return this.options.editable&&this.options.editable.resize!==false},_handleOptions:function(){return(this.options.editable.resize||{}).handles||this.options.handles},_createHandles:function(){var aN,aO,aP,aM;if(this._resizable()){aN=this._handleOptions();for(aM=-1;aM<=1;aM++){for(aP=-1;aP<=1;aP++){if(aM!==0||aP!==0){aO=new C(aN);aO.drawingElement._hover=A(this._hover,this);this.map.push({x:aM,y:aP,visual:aO});this.visual.append(aO)}}}}},bounds:function(aM){if(aM){this._innerBounds=aM.clone();this._bounds=this.diagram.modelToLayer(aM).inflate(this.options.offset,this.options.offset)}else{return this._bounds}},_hitTest:function(aQ){var aR=this.diagram.modelToLayer(aQ),aN,aP,aS,aM=this.map.length,aO;if(this._angle){aR=aR.clone().rotate(this._bounds.center(),this._angle)}if(this._resizable()){for(aN=0;aN<aM;aN++){aO=this.map[aN];aP=new i(aO.x,aO.y);aS=this._getHandleBounds(aP);aS.offset(this._bounds.x,this._bounds.y);if(aS.contains(aR)){return aP}}}if(this._bounds.contains(aR)){return new i(0,0)}},_getHandleBounds:function(aQ){if(this._resizable()){var aN=this._handleOptions(),aM=aN.width,aO=aN.height,aP=new D(0,0,aM,aO);if(aQ.x<0){aP.x=-aM/2}else{if(aQ.x===0){aP.x=Math.floor(this._bounds.width/2)-aM/2}else{if(aQ.x>0){aP.x=this._bounds.width+1-aM/2}}}if(aQ.y<0){aP.y=-aO/2}else{if(aQ.y===0){aP.y=Math.floor(this._bounds.height/2)-aO/2}else{if(aQ.y>0){aP.y=this._bounds.height+1-aO/2}}}return aP}},_getCursor:function(aM){var aN=this._hitTest(aM);if(aN&&aN.x>=-1&&aN.x<=1&&aN.y>=-1&&aN.y<=1&&this._resizable()){var aO=this._angle;if(aO){aO=360-aO;aN.rotate(new i(0,0),aO);aN=new i(Math.round(aN.x),Math.round(aN.y))}if(aN.x==-1&&aN.y==-1){return"nw-resize"}if(aN.x==1&&aN.y==1){return"se-resize"}if(aN.x==-1&&aN.y==1){return"sw-resize"}if(aN.x==1&&aN.y==-1){return"ne-resize"}if(aN.x===0&&aN.y==-1){return"n-resize"}if(aN.x===0&&aN.y==1){return"s-resize"}if(aN.x==1&&aN.y===0){return"e-resize"}if(aN.x==-1&&aN.y===0){return"w-resize"}}return this._manipulating?t.move:t.select},_initialize:function(){var aP=this,aN,aO,aM=aP.diagram.select();aP.shapes=[];for(aN=0;aN<aM.length;aN++){aO=aM[aN];if(aO instanceof j.Shape){aP.shapes.push(aO);aO._rotationOffset=new i()}}aP._angle=aP.shapes.length==1?aP.shapes[0].rotate().angle:0;aP._startAngle=aP._angle;aP._rotates();aP._positions();aP.refreshBounds();aP.refresh();aP.redraw()},_rotates:function(){var aO=this,aN,aM;aO.initialRotates=[];for(aN=0;aN<aO.shapes.length;aN++){aM=aO.shapes[aN];aO.initialRotates.push(aM.rotate().angle)}},_positions:function(){var aO=this,aN,aM;aO.initialStates=[];for(aN=0;aN<aO.shapes.length;aN++){aM=aO.shapes[aN];aO.initialStates.push(aM.bounds())}},_hover:function(aP,aM){if(this._resizable()){var aO=this._handleOptions(),aN=aO.hover,aR=aO.stroke,aQ=aO.fill;if(aP&&ah.isDefined(aN.stroke)){aR=aH({},aR,aN.stroke)}if(aP&&ah.isDefined(aN.fill)){aQ=aN.fill}aM.stroke(aR.color,aR.width,aR.opacity);aM.fill(aQ.color,aQ.opacity)}},start:function(aO){this._sp=aO;this._cp=aO;this._lp=aO;this._manipulating=true;this._internalChange=true;this.shapeStates=[];for(var aN=0;aN<this.shapes.length;aN++){var aM=this.shapes[aN];this.shapeStates.push(aM.bounds())}},redraw:function(){var aN,aO,aM=this._resizable();for(aN=0;aN<this.map.length;aN++){aO=this.map[aN];aO.visual.visible(aM)}},angle:function(aM){if(k(aM)){this._angle=aM}return this._angle},rotate:function(){var aM=this._innerBounds.center();var aP=this.angle();this._internalChange=true;for(var aO=0;aO<this.shapes.length;aO++){var aN=this.shapes[aO];aP=(aP+this.initialRotates[aO]-this._startAngle)%360;aN.rotate(aP,aM)}this.refresh()},move:function(a1,aV){var a2,aW,aU=new i(),aQ=new i(),aS,a4,aN,aX,aZ,aT,aR=0,aY,a3,a0;if(a1.y===-2&&a1.x===-1){a4=this._innerBounds.center();this._angle=this._truncateAngle(ah.findAngle(a4,aV));for(aX=0;aX<this.shapes.length;aX++){aN=this.shapes[aX];aZ=(this._angle+this.initialRotates[aX]-this._startAngle)%360;aN.rotate(aZ,a4);if(aN.hasOwnProperty("layout")){aN.layout(aN)}this._rotating=true}this.refresh()}else{if(this.shouldSnap()){var aP=this._truncateDistance(aV.minus(this._lp));if(aP.x===0&&aP.y===0){this._cp=aV;return}a2=aP;this._lp=new i(this._lp.x+aP.x,this._lp.y+aP.y)}else{a2=aV.minus(this._cp)}if(this.isDragHandle(a1)){aQ=aU=a2;aW=true}else{if(this._angle){a2.rotate(new i(0,0),this._angle)}if(a1.x==-1){aU.x=a2.x}else{if(a1.x==1){aQ.x=a2.x}}if(a1.y==-1){aU.y=a2.y}else{if(a1.y==1){aQ.y=a2.y}}}if(!aW){aY=g(a1,this._innerBounds);a3=(this._innerBounds.width+a2.x*a1.x)/this._innerBounds.width;a0=(this._innerBounds.height+a2.y*a1.y)/this._innerBounds.height}for(aX=0;aX<this.shapes.length;aX++){aN=this.shapes[aX];aS=aN.bounds();if(aW){if(!al(aN)){continue}aT=this._displaceBounds(aS,aU,aQ,aW)}else{aT=aS.clone();aT.scale(a3,a0,aY,this._innerBounds.center(),aN.rotate().angle);var aM=aT.center();aM.rotate(aS.center(),-this._angle);aT=new D(aM.x-aT.width/2,aM.y-aT.height/2,aT.width,aT.height)}if(aT.width>=aN.options.minWidth&&aT.height>=aN.options.minHeight){var aO=aS;aN.bounds(aT);if(aN.hasOwnProperty("layout")){aN.layout(aN,aO,aT)}if(aO.width!==aT.width||aO.height!==aT.height){aN.rotate(aN.rotate().angle)}aR+=1}}if(aR){if(aR==aX){aT=this._displaceBounds(this._innerBounds,aU,aQ,aW);this.bounds(aT)}else{this.refreshBounds()}this.refresh()}this._positions()}this._cp=aV},isDragHandle:function(aM){return aM.x===0&&aM.y===0},cancel:function(){var aN=this.shapes;var aO=this.shapeStates;for(var aM=0;aM<aN.length;aM++){aN[aM].bounds(aO[aM])}this.refreshBounds();this.refresh();this._manipulating=x;this._internalChange=x;this._rotating=x},_truncatePositionToGuides:function(aM){if(this.diagram.ruler){return this.diagram.ruler.truncatePositionToGuides(aM)}return aM},_truncateSizeToGuides:function(aM){if(this.diagram.ruler){return this.diagram.ruler.truncateSizeToGuides(aM)}return aM},_truncateAngle:function(aN){var aM=this.snapOptions();var aO=Math.max(aM.angle||J,aJ);return aM?Math.floor(aN%360/aO)*aO:aN%360},_truncateDistance:function(aN){if(aN instanceof j.Point){return new j.Point(this._truncateDistance(aN.x),this._truncateDistance(aN.y))}else{var aM=this.snapOptions()||{};var aO=Math.max(aM.size||p,Z);return aM?Math.floor(aN/aO)*aO:aN}},snapOptions:function(){var aN=this.diagram.options.editable;var aM=((aN||{}).drag||{}).snap||{};return aM},shouldSnap:function(){var aN=this.diagram.options.editable;var aO=(aN||{}).drag;var aM=(aO||{}).snap;return aN!==false&&aO!==false&&aM!==false},_displaceBounds:function(aQ,aT,aM,aS){var aO=aQ.topLeft().plus(aT),aP=aQ.bottomRight().plus(aM),aR=D.fromPoints(aO,aP),aN;if(!aS){aN=aR.center();aN.rotate(aQ.center(),-this._angle);aR=new D(aN.x-aR.width/2,aN.y-aR.height/2,aR.width,aR.height)}return aR},stop:function(){var aP,aN,aM;if(this._cp!=this._sp){if(this._rotating){aP=new L(this,this.shapes,this.initialRotates);this._rotating=false}else{if(this._diffStates()){if(this.diagram.ruler){for(aN=0;aN<this.shapes.length;aN++){aM=this.shapes[aN];var aO=aM.bounds();aO=this._truncateSizeToGuides(this._truncatePositionToGuides(aO));aM.bounds(aO);this.refreshBounds();this.refresh()}}for(aN=0;aN<this.shapes.length;aN++){aM=this.shapes[aN];aM.updateModel()}aP=new ab(this.shapes,this.shapeStates,this);this.diagram._syncShapeChanges()}}}this._manipulating=x;this._internalChange=x;this._rotating=x;return aP},_diffStates:function(){var aN=this.shapes;var aO=this.shapeStates;for(var aM=0;aM<aN.length;aM++){if(!aN[aM].bounds().equals(aO[aM])){return true}}return false},refreshBounds:function(){var aM=this.shapes.length==1?this.shapes[0].bounds().clone():this.diagram.boundingBox(this.shapes,true);this.bounds(aM)},refresh:function(){var aQ=this,aN,aP;if(this.shapes.length>0){aP=this.bounds();this.visual.visible(true);this.visual.position(aP.topLeft());au.each(this.map,function(){aN=aQ._getHandleBounds(new i(this.x,this.y));this.visual.position(aN.topLeft())});this.visual.position(aP.topLeft());var aM=new i(aP.width/2,aP.height/2);this.visual.rotate(this._angle,aM);this.rect.redraw({width:aP.width,height:aP.height});if(this.rotationThumb){var aO=this.options.editable.rotate.thumb;this._rotationThumbBounds=new D(aP.center().x,aP.y+aO.y,0,0).inflate(aO.width);this.rotationThumb.redraw({x:aP.width/2-aO.width/2})}}else{this.visual.visible(false)}}});var az=aB.extend({init:function(aN){var aM=aN.options.selectable;this.options=aH({},this.options,aM);this.visual=new C(this.options);this.diagram=aN},options:{stroke:{color:"#778899",width:1,dashType:"dash"},fill:{color:ao}},start:function(aM){this._sp=this._ep=aM;this.refresh();this.diagram._adorn(this,true)},end:function(){this._sp=this._ep=x;this.diagram._adorn(this,false)},bounds:function(aM){if(aM){this._bounds=aM}return this._bounds},move:function(aM){this._ep=aM;this.refresh()},refresh:function(){if(this._sp){var aM=D.fromPoints(this.diagram.modelToLayer(this._sp),this.diagram.modelToLayer(this._ep));this.bounds(D.fromPoints(this._sp,this._ep));this.visual.position(aM.topLeft());this.visual.redraw({height:aM.height+1,width:aM.width+1})}}});var r=aB.extend({init:function(aM){this.options=aH({},aM.options);this._c=aM;this.visual=new ae(this.options);this.refresh()},_hover:function(aO){var aM=this.options,aN=aM.hover,aQ=aM.stroke,aP=aM.fill;if(aO&&ah.isDefined(aN.stroke)){aQ=aH({},aQ,aN.stroke)}if(aO&&ah.isDefined(aN.fill)){aP=aN.fill}this.visual.redraw({stroke:aQ,fill:aP})},refresh:function(){var aO=this._c.shape.diagram.modelToView(this._c.position()),aN=aO.minus(this._c.shape.bounds("transformed").topLeft()),aM=new D(aO.x,aO.y,0,0);aM.inflate(this.options.width/2,this.options.height/2);this._visualBounds=aM;this.visual.redraw({center:new i(aN.x,aN.y)})},_hitTest:function(aM){var aN=this._c.shape.diagram.modelToView(aM);return this._visualBounds.contains(aN)}});function al(aN){var aM=aN.options.editable;return aM&&aM.drag!==false}function aE(aQ,aO){var aP,aN,aR;for(var aM=0;aM<aQ.connectors.length;aM++){aP=aQ.connectors[aM];aN=aP.position();aR=new D(aN.x,aN.y);aR.inflate(U,U);if(aR.contains(aO)){return aP}}}function ar(aM){return aM.ctrlKey===false&&aM.altKey===false&&aM.shiftKey===false}aH(j,{CompositeUnit:ap,TransformUnit:ab,PanUndoUnit:z,AddShapeUnit:ag,AddConnectionUnit:aK,DeleteShapeUnit:Y,DeleteConnectionUnit:aF,ConnectionEditAdorner:H,ConnectionTool:am,ConnectorVisual:r,UndoRedoService:aG,ResizingAdorner:an,Selector:az,ToolService:aD,ConnectorsAdorner:P,LayoutUndoUnit:aa,ConnectionEditUnit:E,ToFrontUnit:Q,ToBackUnit:I,ConnectionRouterBase:a,PolylineRouter:y,CascadingRouter:aI,SelectionTool:n,ScrollerTool:ay,PointerTool:R,ConnectionEditTool:F,RotateUnit:L})}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/diagram/layout",["dataviz/diagram/math"],a)}(function(){(function(d,e){var q=window.kendo,x=q.dataviz.diagram,g=x.Graph,y=x.Node,p=x.Link,o=q.deepExtend,v=x.Size,f=x.Rect,w=x.Dictionary,u=x.Set,t=x.Graph,b=x.Utils,z=x.Point,r=0.000001,n=Math.PI/180,i=b.contains,l=d.grep;var m=q.Class.extend({defaultOptions:{type:"Tree",subtype:"Down",roots:null,animate:false,limitToView:false,friction:0.9,nodeDistance:50,iterations:300,horizontalSeparation:90,verticalSeparation:50,underneathVerticalTopOffset:15,underneathHorizontalOffset:15,underneathVerticalSeparation:15,grid:{width:1500,offsetX:50,offsetY:50,componentSpacingX:20,componentSpacingY:20},layerSeparation:50,layeredIterations:2,startRadialAngle:0,endRadialAngle:360,radialSeparation:150,radialFirstLevelSeparation:200,keepComponentsInOneRadialLayout:false,ignoreContainers:true,layoutContainerChildren:false,ignoreInvisible:true,animateTransitions:false},init:function(){},gridLayoutComponents:function(J){if(!J){throw"No components supplied."}b.forEach(J,function(Q){Q.calcBounds()});J.sort(function(R,Q){return Q.bounds.width-R.bounds.width});var N=this.options.grid.width,H=this.options.grid.componentSpacingX,E=this.options.grid.componentSpacingY,P=0,G=this.options.grid.offsetX,F=this.options.grid.offsetY,M=G,L=F,D,I=[],O=[];while(J.length>0){if(M>=N){M=G;L+=P+E;P=0}var K=J.pop();this.moveToOffset(K,new z(M,L));for(D=0;D<K.nodes.length;D++){O.push(K.nodes[D])}for(D=0;D<K.links.length;D++){I.push(K.links[D])}var B=K.bounds;var C=B.height;if(C<=0||isNaN(C)){C=0}var A=B.width;if(A<=0||isNaN(A)){A=0}if(C>=P){P=C}M+=A+H}return{nodes:O,links:I}},moveToOffset:function(H,B){var F,E,A=H.bounds,M=B.x-A.x,J=B.y-A.y;for(F=0;F<H.nodes.length;F++){var D=H.nodes[F];var C=D.bounds();if(C.width===0&&C.height===0&&C.x===0&&C.y===0){C=new f(0,0,0,0)}C.x+=M;C.y+=J;D.bounds(C)}for(F=0;F<H.links.length;F++){var G=H.links[F];if(G.points){var L=[];var I=G.points;for(E=0;E<I.length;E++){var K=I[E];K.x+=M;K.y+=J;L.push(K)}G.points=L}}this.currentHorizontalOffset+=A.width+this.options.grid.offsetX;return new z(M,J)},transferOptions:function(A){this.options=q.deepExtend({},this.defaultOptions);if(b.isUndefined(A)){return}this.options=q.deepExtend(this.options,A||{})}});var c=q.Class.extend({init:function(A){this.nodeMap=new w();this.shapeMap=new w();this.nodes=[];this.edges=[];this.edgeMap=new w();this.finalNodes=[];this.finalLinks=[];this.ignoredConnections=[];this.ignoredShapes=[];this.hyperMap=new w();this.hyperTree=new g();this.finalGraph=null;this.diagram=A},convert:function(A){if(b.isUndefined(this.diagram)){throw"No diagram to convert."}this.options=q.deepExtend({ignoreInvisible:true,ignoreContainers:true,layoutContainerChildren:false},A||{});this.clear();this._renormalizeShapes();this._renormalizeConnections();this.finalNodes=new w(this.nodes);this.finalLinks=new w(this.edges);this.finalGraph=new g();this.finalNodes.forEach(function(B){this.finalGraph.addNode(B)},this);this.finalLinks.forEach(function(B){this.finalGraph.addExistingLink(B)},this);return this.finalGraph},mapConnection:function(A){return this.edgeMap.get(A.id)},mapShape:function(A){return this.nodeMap.get(A.id)},getEdge:function(B,A){return b.first(B.links,function(C){return C.getComplement(B)===A})},clear:function(){this.finalGraph=null;this.hyperTree=!this.options.ignoreContainers&&this.options.layoutContainerChildren?new t():null;this.hyperMap=!this.options.ignoreContainers&&this.options.layoutContainerChildren?new w():null;this.nodeMap=new w();this.shapeMap=new w();this.nodes=[];this.edges=[];this.edgeMap=new w();this.ignoredConnections=[];this.ignoredShapes=[];this.finalNodes=[];this.finalLinks=[]},listToRoot:function(C){var B=[];var A=C.container;if(!A){return B}B.push(A);while(A.parentContainer){A=A.parentContainer;B.push(A)}B.reverse();return B},firstNonIgnorableContainer:function(A){if(A.isContainer&&!this._isIgnorableItem(A)){return A}return !A.parentContainer?null:this.firstNonIgnorableContainer(A.parentContainer)},isContainerConnection:function(B,A){if(B.isContainer&&this.isDescendantOf(B,A)){return true}return A.isContainer&&this.isDescendantOf(A,B)},isDescendantOf:function(D,B){if(!D.isContainer){throw"Expecting a container."}if(D===B){return false}if(i(D.children,B)){return true}var E=[];for(var C=0,A=D.children.length;C<A;C++){var F=D.children[C];if(F.isContainer&&this.isDescendantOf(F,B)){E.push(F)}}return E.length>0},isIgnorableItem:function(A){if(this.options.ignoreInvisible){if(A.isCollapsed&&this._isVisible(A)){return false}if(!A.isCollapsed&&this._isVisible(A)){return false}return true}else{return A.isCollapsed&&!this._isTop(A)}},isShapeMapped:function(A){return A.isCollapsed&&!this._isVisible(A)&&!this._isTop(A)},leastCommonAncestor:function(B,A){if(!B){throw"Parameter should not be null."}if(!A){throw"Parameter should not be null."}if(!this.hyperTree){throw"No hypertree available."}var E=this.listToRoot(B);var H=this.listToRoot(A);var D=null;if(b.isEmpty(E)||b.isEmpty(H)){return this.hyperTree.root.data}var G=E[0];var F=H[0];var C=0;while(G===F){D=E[C];C++;if(C>=E.length||C>=H.length){break}G=E[C];F=H[C]}if(!D){return this.hyperTree.root.data}else{return l(this.hyperTree.nodes,function(I){return I.data.container===D})}},_isTop:function(A){return !A.parentContainer},_isVisible:function(A){if(!A.visible()){return false}return !A.parentContainer?A.visible():this._isVisible(A.parentContainer)},_isCollapsed:function(A){if(A.isContainer&&A.isCollapsed){return true}return A.parentContainer&&this._isCollapsed(A.parentContainer)},_renormalizeShapes:function(){if(this.options.ignoreContainers){for(var C=0,A=this.diagram.shapes.length;C<A;C++){var B=this.diagram.shapes[C];if(this.options.ignoreInvisible&&!this._isVisible(B)||B.isContainer){this.ignoredShapes.push(B);continue}var D=new y(B.id,B);D.isVirtual=false;this.nodeMap.add(B.id,D);this.nodes.push(D)}}else{throw"Containers are not supported yet, but stay tuned."}},_renormalizeConnections:function(){if(this.diagram.connections.length===0){return}for(var C=0,A=this.diagram.connections.length;C<A;C++){var E=this.diagram.connections[C];if(this.isIgnorableItem(E)){this.ignoredConnections.push(E);continue}var G=!E.sourceConnector?null:E.sourceConnector.shape;var F=!E.targetConnector?null:E.targetConnector.shape;if(!G||!F){this.ignoredConnections.push(E);continue}if(i(this.ignoredShapes,G)&&!this.shapeMap.containsKey(G)){this.ignoredConnections.push(E);continue}if(i(this.ignoredShapes,F)&&!this.shapeMap.containsKey(F)){this.ignoredConnections.push(E);continue}if(this.shapeMap.containsKey(G)){G=this.shapeMap[G]}if(this.shapeMap.containsKey(F)){F=this.shapeMap[F]}var D=this.mapShape(G);var H=this.mapShape(F);if(D===H||this.areConnectedAlready(D,H)){this.ignoredConnections.push(E);continue}if(D===null||H===null){throw"A shape was not mapped to a node."}if(this.options.ignoreContainers){if(D.isVirtual||H.isVirtual){this.ignoredConnections.push(E);continue}var B=new p(D,H,E.id,E);this.edgeMap.add(E.id,B);this.edges.push(B)}else{throw"Containers are not supported yet, but stay tuned."}}},areConnectedAlready:function(B,A){return b.any(this.edges,function(C){return C.source===B&&C.target===A||C.source===A&&C.target===B})}});var a=m.extend({init:function(A){var B=this;m.fn.init.call(B);if(b.isUndefined(A)){throw"Diagram is not specified."}this.diagram=A},layout:function(D){this.transferOptions(D);var B=new c(this.diagram);var G=B.convert(D);if(G.isEmpty()){return}var F=G.getConnectedComponents();if(b.isEmpty(F)){return}for(var E=0;E<F.length;E++){var C=F[E];this.layoutGraph(C,D)}var A=this.gridLayoutComponents(F);return new x.LayoutState(this.diagram,A)},layoutGraph:function(E,A){if(b.isDefined(A)){this.transferOptions(A)}this.graph=E;var B=this.options.nodeDistance*9;this.temperature=B;var C=this._expectedBounds();this.width=C.width;this.height=C.height;for(var D=0;D<this.options.iterations;D++){this.refineStage=D>=this.options.iterations*5/6;this.tick();this.temperature=this.refineStage?B/30:B*(1-D/(2*this.options.iterations))}},tick:function(){var A;for(A=0;A<this.graph.nodes.length;A++){this._repulsion(this.graph.nodes[A])}for(A=0;A<this.graph.links.length;A++){this._attraction(this.graph.links[A])}for(A=0;A<this.graph.nodes.length;A++){var B=this.graph.nodes[A];var C=Math.sqrt(B.dx*B.dx+B.dy*B.dy);if(C===0){return}B.x+=Math.min(C,this.temperature)*B.dx/C;B.y+=Math.min(C,this.temperature)*B.dy/C;if(this.options.limitToView){B.x=Math.min(this.width,Math.max(B.width/2,B.x));B.y=Math.min(this.height,Math.max(B.height/2,B.y))}}},_shake:function(B){var A=Math.random()*this.options.nodeDistance/4;var C=Math.random()*2*Math.PI;B.x+=A*Math.cos(C);B.y-=A*Math.sin(C)},_InverseSquareForce:function(F,D,E){var C;if(!this.refineStage){C=Math.pow(F,2)/Math.pow(this.options.nodeDistance,2)}else{var J=D.x-E.x;var I=D.y-E.y;var G=D.width/2;var A=D.height/2;var H=E.width/2;var B=E.height/2;C=Math.pow(J,2)/Math.pow(G+H+this.options.nodeDistance,2)+Math.pow(I,2)/Math.pow(A+B+this.options.nodeDistance,2)}return C*4/3},_SquareForce:function(B,C,A){return 1/this._InverseSquareForce(B,C,A)},_repulsion:function(A){A.dx=0;A.dy=0;b.forEach(this.graph.nodes,function(B){if(B===A){return}while(A.x===B.x&&A.y===B.y){this._shake(B)}var D=A.x-B.x;var C=A.y-B.y;var F=Math.sqrt(D*D+C*C);var E=this._SquareForce(F,A,B)*2;A.dx+=D/F*E;A.dy+=C/F*E},this)},_attraction:function(C){var G=C.target;var H=C.source;if(H===G){return}while(H.x===G.x&&H.y===G.y){this._shake(G)}var D=H.x-G.x;var B=H.y-G.y;var A=Math.sqrt(D*D+B*B);var E=this._InverseSquareForce(A,H,G)*5;var I=D/A*E;var F=B/A*E;G.dx+=I;G.dy+=F;H.dx-=I;H.dy-=F},_expectedBounds:function(){var C,G=this.graph.nodes.length,E=1.5,H=4;if(G===0){return C}C=b.fold(this.graph.nodes,function(I,K){var J=K.width*K.height;if(J>0){I+=Math.sqrt(J);return I}return 0},0,this);var F=C/G;var B=F*Math.ceil(Math.sqrt(G));var D=B*Math.sqrt(E);var A=B/Math.sqrt(E);return{width:D*H,height:A*H}}});var h=q.Class.extend({init:function(A){this.center=null;this.options=A},layout:function(B,A){this.graph=B;if(!this.graph.nodes||this.graph.nodes.length===0){return}if(!i(this.graph.nodes,A)){throw"The given root is not in the graph."}this.center=A;this.graph.cacheRelationships();this.layoutSwitch()},layoutLeft:function(B){this.setChildrenDirection(this.center,"Left",false);this.setChildrenLayout(this.center,"Default",false);var E=0,H=0,F,D,C;for(D=0;D<B.length;D++){C=B[D];C.TreeDirection="Left";var I=this.measure(C,v.Empty);H=Math.max(H,I.Width);E+=I.height+this.options.verticalSeparation}E-=this.options.verticalSeparation;var G=this.center.x-this.options.horizontalSeparation;F=this.center.y+(this.center.height-E)/2;for(D=0;D<B.length;D++){C=B[D];var A=new z(G-C.Size.width,F);this.arrange(C,A);F+=C.Size.height+this.options.verticalSeparation}},layoutRight:function(H){this.setChildrenDirection(this.center,"Right",false);this.setChildrenLayout(this.center,"Default",false);var D=0,G=0,E,C,B;for(C=0;C<H.length;C++){B=H[C];B.TreeDirection="Right";var I=this.measure(B,v.Empty);G=Math.max(G,I.Width);D+=I.height+this.options.verticalSeparation}D-=this.options.verticalSeparation;var F=this.center.x+this.options.horizontalSeparation+this.center.width;E=this.center.y+(this.center.height-D)/2;for(C=0;C<H.length;C++){B=H[C];var A=new z(F,E);this.arrange(B,A);E+=B.Size.height+this.options.verticalSeparation}},layoutUp:function(B){this.setChildrenDirection(this.center,"Up",false);this.setChildrenLayout(this.center,"Default",false);var C=0,H,F,D;for(D=0;D<B.length;D++){F=B[D];F.TreeDirection="Up";var E=this.measure(F,v.Empty);C+=E.width+this.options.horizontalSeparation}C-=this.options.horizontalSeparation;var A=this.center.x+this.center.width/2-C/2;for(D=0;D<B.length;D++){F=B[D];H=this.center.y-this.options.verticalSeparation-F.Size.height;var G=new z(A,H);this.arrange(F,G);A+=F.Size.width+this.options.horizontalSeparation}},layoutDown:function(H){var E,C;this.setChildrenDirection(this.center,"Down",false);this.setChildrenLayout(this.center,"Default",false);var B=0,G;for(C=0;C<H.length;C++){E=H[C];E.treeDirection="Down";var D=this.measure(E,v.Empty);B+=D.width+this.options.horizontalSeparation}B-=this.options.horizontalSeparation;var A=this.center.x+this.center.width/2-B/2;G=this.center.y+this.options.verticalSeparation+this.center.height;for(C=0;C<H.length;C++){E=H[C];var F=new z(A,G);this.arrange(E,F);A+=E.Size.width+this.options.horizontalSeparation}},layoutRadialTree:function(){this.setChildrenDirection(this.center,"Radial",false);this.setChildrenLayout(this.center,"Default",false);this.previousRoot=null;var B=this.options.startRadialAngle*n;var A=this.options.endRadialAngle*n;if(A<=B){throw"Final angle should not be less than the start angle."}this.maxDepth=0;this.origin=new z(this.center.x,this.center.y);this.calculateAngularWidth(this.center,0);if(this.maxDepth>0){this.radialLayout(this.center,this.options.radialFirstLevelSeparation,B,A)}this.center.Angle=A-B},tipOverTree:function(H,B){if(b.isUndefined(B)){B=0}this.setChildrenDirection(this.center,"Down",false);this.setChildrenLayout(this.center,"Default",false);this.setChildrenLayout(this.center,"Underneath",false,B);var G=0,E,C,D;for(D=0;D<H.length;D++){C=H[D];C.TreeDirection="Down";var I=this.measure(C,v.Empty);G+=I.width+this.options.horizontalSeparation}G-=this.options.horizontalSeparation;G-=H[H.length-1].width;G+=H[H.length-1].associatedShape.bounds().width;var F=this.center.x+this.center.width/2-G/2;E=this.center.y+this.options.verticalSeparation+this.center.height;for(D=0;D<H.length;D++){C=H[D];var A=new z(F,E);this.arrange(C,A);F+=C.Size.width+this.options.horizontalSeparation}},calculateAngularWidth:function(C,G){if(G>this.maxDepth){this.maxDepth=G}var A=0,H=1000,E=1000,I=G===0?0:Math.sqrt(H*H+E*E)/G;if(C.children.length>0){for(var D=0,F=C.children.length;D<F;D++){var B=C.children[D];A+=this.calculateAngularWidth(B,G+1)}A=Math.max(I,A)}else{A=I}C.sectorAngle=A;return A},sortChildren:function(E){var F=0,J;if(E.parents.length>1){throw"Node is not part of a tree."}var B=E.parents[0];if(B){var I=new z(B.x,B.y);var A=new z(E.x,E.y);F=this.normalizeAngle(Math.atan2(I.y-A.y,I.x-A.x))}var K=E.children.length;if(K===0){return null}var H=[];var M=[];for(J=0;J<K;++J){var L=E.children[J];var G=new z(L.x,L.y);M[J]=J;H[J]=this.normalizeAngle(-F+Math.atan2(G.y-G.y,G.x-G.x))}b.bisort(H,M);var D=[];var C=E.children;for(J=0;J<K;++J){D.push(C[M[J]])}return D},normalizeAngle:function(A){while(A>Math.PI*2){A-=2*Math.PI}while(A<0){A+=Math.PI*2}return A},radialLayout:function(C,G,I,B){var N=B-I;var L=N/2;var M=C.sectorAngle;var K=0;var H=this.sortChildren(C);for(var E=0,F=H.length;E<F;E++){var A=H[E];var J=A;var D=J.sectorAngle/M;if(A.children.length>0){this.radialLayout(A,G+this.options.radialSeparation,I+K*N,I+(K+D)*N)}this.setPolarLocation(A,G,I+K*N+D*L);J.angle=D*N;K+=D}},setPolarLocation:function(B,A,C){B.x=this.origin.x+A*Math.cos(C);B.y=this.origin.y+A*Math.sin(C);B.BoundingRectangle=new f(B.x,B.y,B.width,B.height)},setChildrenDirection:function(C,D,B){var A=C.treeDirection;this.graph.depthFirstTraversal(C,function(E){E.treeDirection=D});if(!B){C.treeDirection=A}},setChildrenLayout:function(E,D,B,C){if(b.isUndefined(C)){C=0}var A=E.childrenLayout;if(C>0){this.graph.assignLevels(E);this.graph.depthFirstTraversal(E,function(F){if(F.level>=C+1){F.childrenLayout=D}})}else{this.graph.depthFirstTraversal(E,function(F){F.childrenLayout=D});if(!B){E.childrenLayout=A}}},measure:function(B,E){var J=0,F=0,K;var L=new v(0,0);if(!B){throw""}var H=B.associatedShape.bounds();var G=H.width;var C=H.height;if(B.parents.length!==1){throw"Node not in a spanning tree."}var I=B.parents[0];if(B.treeDirection==="Undefined"){B.treeDirection=I.treeDirection}if(b.isEmpty(B.children)){L=new v(Math.abs(G)<r?50:G,Math.abs(C)<r?25:C)}else{if(B.children.length===1){switch(B.treeDirection){case"Radial":K=this.measure(B.children[0],E);J=G+this.options.radialSeparation*Math.cos(B.AngleToParent)+K.width;F=C+Math.abs(this.options.radialSeparation*Math.sin(B.AngleToParent))+K.height;break;case"Left":case"Right":switch(B.childrenLayout){case"TopAlignedWithParent":break;case"BottomAlignedWithParent":break;case"Underneath":K=this.measure(B.children[0],E);J=G+K.width+this.options.underneathHorizontalOffset;F=C+this.options.underneathVerticalTopOffset+K.height;break;case"Default":K=this.measure(B.children[0],E);J=G+this.options.horizontalSeparation+K.width;F=Math.max(C,K.height);break;default:throw"Unhandled TreeDirection in the Radial layout measuring."}break;case"Up":case"Down":switch(B.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":K=this.measure(B.children[0],E);J=Math.max(G,K.width+this.options.underneathHorizontalOffset);F=C+this.options.underneathVerticalTopOffset+K.height;break;case"Default":K=this.measure(B.children[0],E);F=C+this.options.verticalSeparation+K.height;J=Math.max(G,K.width);break;default:throw"Unhandled TreeDirection in the Down layout measuring."}break;default:throw"Unhandled TreeDirection in the layout measuring."}L=new v(J,F)}else{var D,A;switch(B.treeDirection){case"Left":case"Right":switch(B.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":J=G;F=C+this.options.underneathVerticalTopOffset;for(D=0;D<B.children.length;D++){A=B.children[D];K=this.measure(A,E);J=Math.max(J,K.width+this.options.underneathHorizontalOffset);F+=K.height+this.options.underneathVerticalSeparation}F-=this.options.underneathVerticalSeparation;break;case"Default":J=G;F=0;for(D=0;D<B.children.length;D++){A=B.children[D];K=this.measure(A,E);J=Math.max(J,G+this.options.horizontalSeparation+K.width);F+=K.height+this.options.verticalSeparation}F-=this.options.verticalSeparation;break;default:throw"Unhandled TreeDirection in the Right layout measuring."}break;case"Up":case"Down":switch(B.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":J=G;F=C+this.options.underneathVerticalTopOffset;for(D=0;D<B.children.length;D++){A=B.children[D];K=this.measure(A,E);J=Math.max(J,K.width+this.options.underneathHorizontalOffset);F+=K.height+this.options.underneathVerticalSeparation}F-=this.options.underneathVerticalSeparation;break;case"Default":J=0;F=0;for(D=0;D<B.children.length;D++){A=B.children[D];K=this.measure(A,E);J+=K.width+this.options.horizontalSeparation;F=Math.max(F,K.height+this.options.verticalSeparation+C)}J-=this.options.horizontalSeparation;break;default:throw"Unhandled TreeDirection in the Down layout measuring."}break;default:throw"Unhandled TreeDirection in the layout measuring."}L=new v(J,F)}}B.SectorAngle=Math.sqrt(J*J/4+F*F/4);B.Size=L;return L},arrange:function(D,A){var H,C,B,F,E,L=D.associatedShape.bounds();var J=L.width;var G=L.height;if(b.isEmpty(D.children)){D.x=A.x;D.y=A.y;D.BoundingRectangle=new f(A.x,A.y,J,G)}else{var M,K;var I;switch(D.treeDirection){case"Left":switch(D.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":I=A;D.x=I.x;D.y=I.y;D.BoundingRectangle=new f(D.x,D.y,D.width,D.height);K=A.y+G+this.options.underneathVerticalTopOffset;for(H=0;H<F.children.length;H++){F=F.children[H];M=I.x-F.associatedShape.width-this.options.underneathHorizontalOffset;C=new z(M,K);this.arrange(F,C);K+=F.Size.height+this.options.underneathVerticalSeparation}break;case"Default":I=new z(A.x+D.Size.width-J,A.y+(D.Size.height-G)/2);D.x=I.x;D.y=I.y;D.BoundingRectangle=new f(D.x,D.y,D.width,D.height);M=I.x-this.options.horizontalSeparation;K=A.y;for(H=0;H<D.children.length;H++){F=D.children[H];C=new z(M-F.Size.width,K);this.arrange(F,C);K+=F.Size.height+this.options.verticalSeparation}break;default:throw"Unsupported TreeDirection"}break;case"Right":switch(D.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":I=A;D.x=I.x;D.y=I.y;D.BoundingRectangle=new f(D.x,D.y,D.width,D.height);M=A.x+J+this.options.underneathHorizontalOffset;K=A.y+G+this.options.underneathVerticalTopOffset;for(H=0;H<D.children.length;H++){F=D.children[H];C=new z(M,K);this.arrange(F,C);K+=F.Size.height+this.options.underneathVerticalSeparation}break;case"Default":I=new z(A.x,A.y+(D.Size.height-G)/2);D.x=I.x;D.y=I.y;D.BoundingRectangle=new f(D.x,D.y,D.width,D.height);M=A.x+J+this.options.horizontalSeparation;K=A.y;for(H=0;H<D.children.length;H++){F=D.children[H];C=new z(M,K);this.arrange(F,C);K+=F.Size.height+this.options.verticalSeparation}break;default:throw"Unsupported TreeDirection"}break;case"Up":I=new z(A.x+(D.Size.width-J)/2,A.y+D.Size.height-G);D.x=I.x;D.y=I.y;D.BoundingRectangle=new f(D.x,D.y,D.width,D.height);if(Math.abs(I.x-A.x)<r){E=0;for(H=0;H<D.children.length;H++){B=D.children[H];E+=B.Size.width+this.options.horizontalSeparation}E-=this.options.horizontalSeparation;M=A.x+(J-E)/2}else{M=A.x}for(H=0;H<D.children.length;H++){F=D.children[H];K=I.y-this.options.verticalSeparation-F.Size.height;C=new z(M,K);this.arrange(F,C);M+=F.Size.width+this.options.horizontalSeparation}break;case"Down":switch(D.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":I=A;D.x=I.x;D.y=I.y;D.BoundingRectangle=new f(D.x,D.y,D.width,D.height);M=A.x+this.options.underneathHorizontalOffset;K=A.y+G+this.options.underneathVerticalTopOffset;for(H=0;H<D.children.length;H++){F=D.children[H];C=new z(M,K);this.arrange(F,C);K+=F.Size.height+this.options.underneathVerticalSeparation}break;case"Default":I=new z(A.x+(D.Size.width-J)/2,A.y);D.x=I.x;D.y=I.y;D.BoundingRectangle=new f(D.x,D.y,D.width,D.height);if(Math.abs(I.x-A.x)<r){E=0;for(H=0;H<D.children.length;H++){B=D.children[H];E+=B.Size.width+this.options.horizontalSeparation}E-=this.options.horizontalSeparation;M=A.x+(J-E)/2}else{M=A.x}for(H=0;H<D.children.length;H++){F=D.children[H];K=I.y+this.options.verticalSeparation+G;C=new z(M,K);this.arrange(F,C);M+=F.Size.width+this.options.horizontalSeparation}break;default:throw"Unsupported TreeDirection"}break;case"None":break;default:throw"Unsupported TreeDirection"}}},layoutSwitch:function(){if(!this.center){return}if(b.isEmpty(this.center.children)){return}var E=this.options.subtype;if(b.isUndefined(E)){E="Down"}var F,D,C,A;var B=this.center.children;switch(E.toLowerCase()){case"radial":case"radialtree":this.layoutRadialTree();break;case"mindmaphorizontal":case"mindmap":F=this.center.children;if(this.center.children.length===1){this.layoutRight(F)}else{A=B.length/2;D=l(this.center.children,function(G){return b.indexOf(B,G)<A});C=l(this.center.children,function(G){return b.indexOf(B,G)>=A});this.layoutLeft(D);this.layoutRight(C)}break;case"mindmapvertical":F=this.center.children;if(this.center.children.length===1){this.layoutDown(F)}else{A=B.length/2;D=l(this.center.children,function(G){return b.indexOf(B,G)<A});C=l(this.center.children,function(G){return b.indexOf(B,G)>=A});this.layoutUp(D);this.layoutDown(C)}break;case"right":this.layoutRight(this.center.children);break;case"left":this.layoutLeft(this.center.children);break;case"up":case"bottom":this.layoutUp(this.center.children);break;case"down":case"top":this.layoutDown(this.center.children);break;case"tipover":case"tipovertree":if(this.options.tipOverTreeStartLevel<0){throw"The tip-over level should be a positive integer."}this.tipOverTree(this.center.children,this.options.tipOverTreeStartLevel);break;case"undefined":case"none":break}}});var k=m.extend({init:function(A){var B=this;m.fn.init.call(B);if(b.isUndefined(A)){throw"No diagram specified."}this.diagram=A},layout:function(C){this.transferOptions(C);var B=new c(this.diagram);this.graph=B.convert();var A=this.layoutComponents();return new x.LayoutState(this.diagram,A)},layoutComponents:function(){if(this.graph.isEmpty()){return}var H=this.graph.getConnectedComponents();if(b.isEmpty(H)){return}var G=new h(this.options);var E=[];for(var F=0;F<H.length;F++){var D=H[F];var C=this.getTree(D);if(!C){throw"Failed to find a spanning tree for the component."}var B=C.root;var A=C.tree;G.layout(A,B);E.push(A)}return this.gridLayoutComponents(E)},getTree:function(F){var B=null;if(this.options.roots&&this.options.roots.length>0){for(var D=0,A=F.nodes.length;D<A;D++){var E=F.nodes[D];for(var C=0;C<this.options.roots.length;C++){var G=this.options.roots[C];if(G===E.associatedShape){B=E;break}}}}if(!B){B=F.root();if(!B){throw"Unable to find a root for the tree."}}return this.getTreeForRoot(F,B)},getTreeForRoot:function(C,B){var A=C.getSpanningTree(B);if(b.isUndefined(A)||A.isEmpty()){return null}return{tree:A,root:A.root}}});var s=m.extend({init:function(A){var B=this;m.fn.init.call(B);if(b.isUndefined(A)){throw"Diagram is not specified."}this.diagram=A},layout:function(D){this.transferOptions(D);var B=new c(this.diagram);var G=B.convert(D);if(G.isEmpty()){return}var F=G.getConnectedComponents();if(b.isEmpty(F)){return}for(var E=0;E<F.length;E++){var C=F[E];this.layoutGraph(C,D)}var A=this.gridLayoutComponents(F);return new x.LayoutState(this.diagram,A)},_initRuntimeProperties:function(){for(var A=0;A<this.graph.nodes.length;A++){var B=this.graph.nodes[A];B.layer=-1;B.downstreamLinkCount=0;B.upstreamLinkCount=0;B.isVirtual=false;B.uBaryCenter=0;B.dBaryCenter=0;B.upstreamPriority=0;B.downstreamPriority=0;B.gridPosition=0}},_prepare:function(N){var K=[],F,E,M;var O=new w();var L=0;var A,H,J;b.forEach(N.nodes,function(P){if(P.incoming.length===0){O.set(P,0);K.push(P)}});while(K.length>0){H=K.shift();for(F=0;F<H.outgoing.length;F++){M=H.outgoing[F];J=M.target;if(O.containsKey(J)){A=Math.max(O.get(H)+1,O.get(J))}else{A=O.get(H)+1}O.set(J,A);if(A>L){L=A}if(!i(K,J)){K.push(J)}}}var C=O.keys();C.sort(function(S,R){var Q=O.get(S);var P=O.get(R);return b.sign(P-Q)});for(var B=0;B<C.length;++B){var D=C[B];var G=Number.MAX_VALUE;if(D.outgoing.length===0){continue}for(E=0;E<D.outgoing.length;++E){M=D.outgoing[E];G=Math.min(G,O.get(M.target))}if(G>1){O.set(D,G-1)}}this.layers=[];var I;for(F=0;F<L+1;F++){I=[];I.linksTo={};this.layers.push(I)}O.forEach(function(Q,P){Q.layer=P;this.layers[P].push(Q)},this);for(E=0;E<this.layers.length;E++){I=this.layers[E];for(F=0;F<I.length;F++){I[F].gridPosition=F}}},layoutGraph:function(C,A){if(b.isUndefined(C)){throw"No graph given or graph analysis of the diagram failed."}if(b.isDefined(A)){this.transferOptions(A)}this.graph=C;C.setItemIndices();var B=C.makeAcyclic();this._initRuntimeProperties();this._prepare(C,A);this._dummify();this._optimizeCrossings();this._swapPairs();this.arrangeNodes();this._moveThingsAround();this._dedummify();b.forEach(B,function(D){if(D.points){D.points.reverse()}})},setMinDist:function(A,E,C){var B=A.layer;var D=A.layerIndex;this.minDistances[B][D]=C},getMinDist:function(B,A){var H=0,F=B.layerIndex,C=A.layerIndex,D=B.layer,G=Math.min(F,C),I=Math.max(F,C);for(var E=G;E<I;++E){H+=this.minDistances[D][E]}return H},placeLeftToRight:function(E){var F=new w(),B,C;for(var K=0;K<this.layers.length;++K){var H=E[K];if(!H){continue}for(B=0;B<H.length;B++){C=H[B];if(!F.containsKey(C)){this.placeLeft(C,F,K)}}var J=Number.POSITIVE_INFINITY;for(B=0;B<H.length;B++){C=H[B];var G=this.rightSibling(C);if(G&&this.nodeLeftClass.get(G)!==K){J=Math.min(J,F.get(G)-F.get(C)-this.getMinDist(C,G))}}if(J===Number.POSITIVE_INFINITY){var A=[];for(B=0;B<H.length;B++){C=H[B];var M=[];b.addRange(M,this.upNodes.get(C));b.addRange(M,this.downNodes.get(C));for(var I=0;I<M.length;I++){var L=M[I];if(this.nodeLeftClass.get(L)<K){A.push(F.get(L)-F.get(C))}}}A.sort();if(A.length===0){J=0}else{if(A.length%2===1){J=A[this.intDiv(A.length,2)]}else{J=(A[this.intDiv(A.length,2)-1]+A[this.intDiv(A.length,2)])/2}}}for(B=0;B<H.length;B++){C=H[B];F.set(C,F.get(C)+J)}}return F},placeRightToLeft:function(K){var H=new w(),C,E;for(var J=0;J<this.layers.length;++J){var F=K[J];if(!F){continue}for(C=0;C<F.length;C++){E=F[C];if(!H.containsKey(E)){this.placeRight(E,H,J)}}var I=Number.NEGATIVE_INFINITY;for(C=0;C<F.length;C++){E=F[C];var B=this.leftSibling(E);if(B&&this.nodeRightClass.get(B)!==J){I=Math.max(I,H.get(B)-H.get(E)+this.getMinDist(B,E))}}if(I===Number.NEGATIVE_INFINITY){var A=[];for(C=0;C<F.length;C++){E=F[C];var M=[];b.addRange(M,this.upNodes.get(E));b.addRange(M,this.downNodes.get(E));for(var G=0;G<M.length;G++){var L=M[G];if(this.nodeRightClass.get(L)<J){A.push(H.get(E)-H.get(L))}}}A.sort();if(A.length===0){I=0}else{if(A.length%2===1){I=A[this.intDiv(A.length,2)]}else{I=(A[this.intDiv(A.length,2)-1]+A[this.intDiv(A.length,2)])/2}}}for(C=0;C<F.length;C++){E=F[C];H.set(E,H.get(E)+I)}}return H},_getLeftWing:function(){var B={value:null};var A=this.computeClasses(B,1);this.nodeLeftClass=B.value;return A},_getRightWing:function(){var B={value:null};var A=this.computeClasses(B,-1);this.nodeRightClass=B.value;return A},computeClasses:function(C,J){var L=0,A=C.value=new w();for(var F=0;F<this.layers.length;++F){L=F;var I=this.layers[F];for(var D=J===1?0:I.length-1;0<=D&&D<I.length;D+=J){var E=I[D];if(!A.containsKey(E)){A.set(E,L);if(E.isVirtual){var K=this._nodesInLink(E);for(var B=0;B<K.length;B++){var M=K[B];A.set(M,L)}}}else{L=A.get(E)}}}var G=[];for(var H=0;H<this.layers.length;H++){G.push(null)}A.forEach(function(O,N){if(G[N]===null){G[N]=[]}G[N].push(O)});return G},_isVerticalLayout:function(){return this.options.subtype.toLowerCase()==="up"||this.options.subtype.toLowerCase()==="down"||this.options.subtype.toLowerCase()==="vertical"},_isHorizontalLayout:function(){return this.options.subtype.toLowerCase()==="right"||this.options.subtype.toLowerCase()==="left"||this.options.subtype.toLowerCase()==="horizontal"},_isIncreasingLayout:function(){return this.options.subtype.toLowerCase()==="right"||this.options.subtype.toLowerCase()==="down"},_moveThingsAround:function(){var W,T,Q,ab,O,I;for(T=0;T<this.layers.length;++T){ab=this.layers[T];ab.sort(this._gridPositionComparer)}this.minDistances=[];for(T=0;T<this.layers.length;++T){ab=this.layers[T];this.minDistances[T]=[];for(O=0;O<ab.length;++O){Q=ab[O];Q.layerIndex=O;this.minDistances[T][O]=this.options.nodeDistance;if(O<ab.length-1){if(this._isVerticalLayout()){this.minDistances[T][O]+=(Q.width+ab[O+1].width)/2}else{this.minDistances[T][O]+=(Q.height+ab[O+1].height)/2}}}}this.downNodes=new w();this.upNodes=new w();b.forEach(this.graph.nodes,function(ac){this.downNodes.set(ac,[]);this.upNodes.set(ac,[])},this);b.forEach(this.graph.links,function(af){var ad=af.source;var ae=af.target;var ag=null,ac=null;if(ad.layer>ae.layer){ag=af.source;ac=af.target}else{ac=af.source;ag=af.target}this.downNodes.get(ac).push(ag);this.upNodes.get(ag).push(ac)},this);this.downNodes.forEachValue(function(ac){ac.sort(this._gridPositionComparer)},this);this.upNodes.forEachValue(function(ac){ac.sort(this._gridPositionComparer)},this);for(T=0;T<this.layers.length-1;++T){ab=this.layers[T];for(I=0;I<ab.length-1;I++){var B=ab[I];if(!B.isVirtual){continue}var aa=this.downNodes.get(B)[0];if(!aa.isVirtual){continue}for(O=I+1;O<ab.length;++O){Q=ab[O];if(!Q.isVirtual){continue}var R=this.downNodes.get(Q)[0];if(!R.isVirtual){continue}if(aa.gridPosition>R.gridPosition){var G=aa.gridPosition;aa.gridPosition=R.gridPosition;R.gridPosition=G;var S=aa.layerIndex;var P=R.layerIndex;this.layers[T+1][S]=R;this.layers[T+1][P]=aa;aa.layerIndex=P;R.layerIndex=S}}}}var K=this._getLeftWing();var D=this._getRightWing();var N=this.placeLeftToRight(K);var X=this.placeRightToLeft(D);var H=new w();b.forEach(this.graph.nodes,function(ac){H.set(ac,(N.get(ac)+X.get(ac))/2)});var U=new w();var Z=new w();for(T=0;T<this.layers.length;++T){ab=this.layers[T];var V=-1,C=-1;for(O=0;O<ab.length;++O){Q=ab[O];U.set(Q,0);Z.set(Q,false);if(Q.isVirtual){if(V===-1){V=O}else{if(V===O-1){V=O}else{C=O;U.set(ab[V],0);if(H.get(Q)-H.get(ab[V])===this.getMinDist(ab[V],Q)){Z.set(ab[V],true)}else{Z.set(ab[V],false)}V=O}}}}}var J=[1,-1];b.forEach(J,function(ai){var ac=ai===1?0:this.layers.length-1;for(var ae=ac;0<=ae&&ae<this.layers.length;ae+=ai){var ag=this.layers[ae];var aj=this._firstVirtualNode(ag);var ah=null;var af=null;if(aj!==-1){ah=ag[aj];af=[];for(W=0;W<aj;W++){af.push(ag[W])}}else{ah=null;af=ag}if(af.length>0){this._sequencer(H,null,ah,ai,af);for(W=0;W<af.length-1;++W){this.setMinDist(af[W],af[W+1],H.get(af[W+1])-H.get(af[W]))}if(ah){this.setMinDist(af[af.length-1],ah,H.get(ah)-H.get(af[af.length-1]))}}while(ah){var ak=this.nextVirtualNode(ag,ah);if(!ak){aj=ah.layerIndex;af=[];for(W=aj+1;W<ag.length;W++){af.push(ag[W])}if(af.length>0){this._sequencer(H,ah,null,ai,af);for(W=0;W<af.length-1;++W){this.setMinDist(af[W],af[W+1],H.get(af[W+1])-H.get(af[W]))}this.setMinDist(ah,af[0],H.get(af[0])-H.get(ah))}}else{if(U.get(ah)===ai){aj=ah.layerIndex;var ad=ak.layerIndex;af=[];for(W=aj+1;W<ad;W++){af.push(ag[W])}if(af.length>0){this._sequencer(H,ah,ak,ai,af)}Z.set(ah,true)}}ah=ak}this.adjustDirections(ae,ai,U,Z)}},this);var A=this._isIncreasingLayout()?0:this.layers.length-1;var M=function(ad,ac){if(ac._isIncreasingLayout()){return ad<ac.layers.length}else{return ad>=0}};var Y=this._isIncreasingLayout()?+1:-1,F=0;function E(ae,ad){var ac=Number.MIN_VALUE;for(var ag=0;ag<ae.length;++ag){var af=ae[ag];if(ad._isVerticalLayout()){ac=Math.max(ac,af.height)}else{ac=Math.max(ac,af.width)}}return ac}for(W=A;M(W,this);W+=Y){ab=this.layers[W];var L=E(ab,this);for(O=0;O<ab.length;++O){Q=ab[O];if(this._isVerticalLayout()){Q.x=H.get(Q);Q.y=F+L/2}else{Q.x=F+L/2;Q.y=H.get(Q)}}F+=this.options.layerSeparation+L}},adjustDirections:function(K,Q,M,P){if(K+Q<0||K+Q>=this.layers.length){return}var D=null,O=null;var R=this.layers[K+Q];for(var H=0;H<R.length;++H){var E=R[H];if(E.isVirtual){var G=this.getNeighborOnLayer(E,K);if(G.isVirtual){if(D){var F=P.get(O);var C=this.layers[K];var J=O.layerIndex;var I=G.layerIndex;for(var N=J+1;N<I;++N){if(C[N].isVirtual){F=F&&P.get(C[N])}}if(F){M.set(D,Q);var B=D.layerIndex;var A=E.layerIndex;for(var L=B+1;L<A;++L){if(R[L].isVirtual){M.set(R[L],Q)}}}}D=E;O=G}}}},getNeighborOnLayer:function(B,A){var C=this.upNodes.get(B)[0];if(C.layer===A){return C}C=this.downNodes.get(B)[0];if(C.layer===A){return C}return null},_sequencer:function(A,G,E,B,F){if(F.length===1){this._sequenceSingle(A,G,E,B,F[0])}if(F.length>1){var D=F.length,C=this.intDiv(D,2);this._sequencer(A,G,E,B,F.slice(0,C));this._sequencer(A,G,E,B,F.slice(C));this.combineSequences(A,G,E,B,F)}},_sequenceSingle:function(A,G,E,B,D){var C=B===-1?this.downNodes.get(D):this.upNodes.get(D);var F=C.length;if(F!==0){if(F%2===1){A.set(D,A.get(C[this.intDiv(F,2)]))}else{A.set(D,(A.get(C[this.intDiv(F,2)-1])+A.get(C[this.intDiv(F,2)]))/2)}if(G){A.set(D,Math.max(A.get(D),A.get(G)+this.getMinDist(G,D)))}if(E){A.set(D,Math.min(A.get(D),A.get(E)-this.getMinDist(D,E)))}}},combineSequences:function(G,C,A,L,F){var J=F.length,I=this.intDiv(J,2);var B=[],Q,R,N,P,E,M;for(Q=0;Q<I;++Q){R=0;P=L===-1?this.downNodes.get(F[Q]):this.upNodes.get(F[Q]);for(N=0;N<P.length;++N){E=P[N];if(G.get(E)>=G.get(F[Q])){R++}else{R--;B.push({k:G.get(E)+this.getMinDist(F[Q],F[I-1]),v:2})}}B.push({k:G.get(F[Q])+this.getMinDist(F[Q],F[I-1]),v:R})}if(C){B.push({k:G.get(C)+this.getMinDist(C,F[I-1]),v:Number.MAX_VALUE})}B.sort(this._positionDescendingComparer);var K=[];for(Q=I;Q<J;++Q){R=0;P=L===-1?this.downNodes.get(F[Q]):this.upNodes.get(F[Q]);for(N=0;N<P.length;++N){E=P[N];if(G.get(E)<=G.get(F[Q])){R++}else{R--;K.push({k:G.get(E)-this.getMinDist(F[Q],F[I]),v:2})}}K.push({k:G.get(F[Q])-this.getMinDist(F[Q],F[I]),v:R})}if(A){K.push({k:G.get(A)-this.getMinDist(A,F[I]),v:Number.MAX_VALUE})}K.sort(this._positionAscendingComparer);var D=0,H=0;var O=this.getMinDist(F[I-1],F[I]);while(G.get(F[I])-G.get(F[I-1])<O){if(D<H){if(B.length===0){G.set(F[I-1],G.get(F[I])-O);break}else{M=B.shift();D=D+M.v;G.set(F[I-1],M.k);G.set(F[I-1],Math.max(G.get(F[I-1]),G.get(F[I])-O))}}else{if(K.length===0){G.set(F[I],G.get(F[I-1])+O);break}else{M=K.shift();H=H+M.v;G.set(F[I],M.k);G.set(F[I],Math.min(G.get(F[I]),G.get(F[I-1])+O))}}}for(Q=I-2;Q>=0;Q--){G.set(F[Q],Math.min(G.get(F[Q]),G.get(F[I-1])-this.getMinDist(F[Q],F[I-1])))}for(Q=I+1;Q<J;Q++){G.set(F[Q],Math.max(G.get(F[Q]),G.get(F[I])+this.getMinDist(F[Q],F[I])))}},placeLeft:function(B,A,C){var D=Number.NEGATIVE_INFINITY;b.forEach(this._getComposite(B),function(F){var E=this.leftSibling(F);if(E&&this.nodeLeftClass.get(E)===this.nodeLeftClass.get(F)){if(!A.containsKey(E)){this.placeLeft(E,A,C)}D=Math.max(D,A.get(E)+this.getMinDist(E,F))}},this);if(D===Number.NEGATIVE_INFINITY){D=0}b.forEach(this._getComposite(B),function(E){A.set(E,D)})},placeRight:function(C,B,A){var D=Number.POSITIVE_INFINITY;b.forEach(this._getComposite(C),function(E){var F=this.rightSibling(E);if(F&&this.nodeRightClass.get(F)===this.nodeRightClass.get(E)){if(!B.containsKey(F)){this.placeRight(F,B,A)}D=Math.min(D,B.get(F)-this.getMinDist(E,F))}},this);if(D===Number.POSITIVE_INFINITY){D=0}b.forEach(this._getComposite(C),function(E){B.set(E,D)})},leftSibling:function(C){var B=this.layers[C.layer],A=C.layerIndex;return A===0?null:B[A-1]},rightSibling:function(C){var B=this.layers[C.layer];var A=C.layerIndex;return A===B.length-1?null:B[A+1]},_getComposite:function(A){return A.isVirtual?this._nodesInLink(A):[A]},arrangeNodes:function(){var D,A,C,B,G;for(A=0;A<this.layers.length;A++){B=this.layers[A];for(C=0;C<B.length;C++){G=B[C];G.upstreamPriority=G.upstreamLinkCount;G.downstreamPriority=G.downstreamLinkCount}}var F=2;for(var E=0;E<F;E++){for(D=this.layers.length-1;D>=1;D--){this.layoutLayer(false,D)}for(D=0;D<this.layers.length-1;D++){this.layoutLayer(true,D)}}var H=Number.MAX_VALUE;for(A=0;A<this.layers.length;A++){B=this.layers[A];for(C=0;C<B.length;C++){G=B[C];H=Math.min(H,G.gridPosition)}}if(H<0){for(A=0;A<this.layers.length;A++){B=this.layers[A];for(C=0;C<B.length;C++){G=B[C];G.gridPosition=G.gridPosition-H}}}},layoutLayer:function(F,C){var B;var D;if(F){D=this.layers[B=C+1]}else{D=this.layers[B=C-1]}var A=[];for(var E=0;E<D.length;E++){A.push(D[E])}A.sort(function(H,G){var J=(H.upstreamPriority+H.downstreamPriority)/2;var I=(G.upstreamPriority+G.downstreamPriority)/2;if(Math.abs(J-I)<0.0001){return 0}if(J<I){return 1}return -1});b.forEach(A,function(J){var I=J.gridPosition;var G=this.calcBaryCenter(J);var H=(J.upstreamPriority+J.downstreamPriority)/2;if(Math.abs(I-G)<0.0001){return}if(Math.abs(I-G)<0.25+0.0001){return}if(I<G){while(I<G){if(!this.moveRight(J,D,H)){break}I=J.gridPosition}}else{while(I>G){if(!this.moveLeft(J,D,H)){break}I=J.gridPosition}}},this);if(B>0){this.calcDownData(B-1)}if(B<this.layers.length-1){this.calcUpData(B+1)}},moveRight:function(F,E,D){var C=b.indexOf(E,F);if(C===E.length-1){F.gridPosition=F.gridPosition+0.5;return true}var B=E[C+1];var A=(B.upstreamPriority+B.downstreamPriority)/2;if(B.gridPosition>F.gridPosition+1){F.gridPosition=F.gridPosition+0.5;return true}if(A>D||Math.abs(A-D)<0.0001){return false}if(this.moveRight(B,E,D)){F.gridPosition=F.gridPosition+0.5;return true}return false},moveLeft:function(E,C,B){var A=b.indexOf(C,E);if(A===0){E.gridPosition=E.gridPosition-0.5;return true}var F=C[A-1];var D=(F.upstreamPriority+F.downstreamPriority)/2;if(F.gridPosition<E.gridPosition-1){E.gridPosition=E.gridPosition-0.5;return true}if(D>B||Math.abs(D-B)<0.0001){return false}if(this.moveLeft(F,C,B)){E.gridPosition=E.gridPosition-0.5;return true}return false},mapVirtualNode:function(B,A){this.nodeToLinkMap.set(B,A);if(!this.linkToNodeMap.containsKey(A)){this.linkToNodeMap.set(A,[])}this.linkToNodeMap.get(A).push(B)},_nodesInLink:function(A){return this.linkToNodeMap.get(this.nodeToLinkMap.get(A))},_dummify:function(){this.linkToNodeMap=new w();this.nodeToLinkMap=new w();var T,E,B,M,J,P,O,N,A=this.graph.links.slice(0);var G=this.layers;var Q=function(W,V,U){G[W].linksTo[V]=G[W].linksTo[V]||[];G[W].linksTo[V].push(U)};for(N=0;N<A.length;N++){var F=A[N];var L=F.source;var S=F.target;var R=L.layer;var H=S.layer;var C=L.gridPosition;var I=S.gridPosition;var D=(I-C)/Math.abs(H-R);var K=L;if(R-H>1){for(O=R-1;O>H;O--){B=new y();B.x=L.x;B.y=L.y;B.width=L.width/100;B.height=L.height/100;T=G[O];E=(O-H)*D+C;if(E>T.length){E=T.length}if(C>=G[R].length-1&&I>=G[H].length-1){E=T.length}else{if(C===0&&I===0){E=0}}B.layer=O;B.uBaryCenter=0;B.dBaryCenter=0;B.upstreamLinkCount=0;B.downstreamLinkCount=0;B.gridPosition=E;B.isVirtual=true;b.insert(T,B,E);for(J=E+1;J<T.length;J++){M=T[J];M.gridPosition=M.gridPosition+1}P=new p(K,B);P.depthOfDumminess=0;Q(O-1,O,P);K=B;this.graph._addNode(B);this.graph.addLink(P);B.index=this.graph.nodes.length-1;this.mapVirtualNode(B,F)}Q(H-1,H,P);F.changeSource(K);F.depthOfDumminess=R-H-1}else{if(R-H<-1){for(O=R+1;O<H;O++){B=new y();B.x=L.x;B.y=L.y;B.width=L.width/100;B.height=L.height/100;T=G[O];E=(O-R)*D+C;if(E>T.length){E=T.length}if(C>=G[R].length-1&&I>=G[H].length-1){E=T.length}else{if(C===0&&I===0){E=0}}B.layer=O;B.uBaryCenter=0;B.dBaryCenter=0;B.upstreamLinkCount=0;B.downstreamLinkCount=0;B.gridPosition=E;B.isVirtual=true;E&=E;b.insert(T,B,E);for(J=E+1;J<T.length;J++){M=T[J];M.gridPosition=M.gridPosition+1}P=new p(K,B);P.depthOfDumminess=0;Q(O-1,O,P);K=B;this.graph._addNode(B);this.graph.addLink(P);B.index=this.graph.nodes.length-1;this.mapVirtualNode(B,F)}Q(H-1,H,F);F.changeSource(K);F.depthOfDumminess=H-R-1}else{Q(R,H,F)}}}},_dedummify:function(){var A=true;while(A){A=false;for(var C=0;C<this.graph.links.length;C++){var G=this.graph.links[C];if(!G.depthOfDumminess){continue}var H=[];H.unshift({x:G.target.x,y:G.target.y});H.unshift({x:G.source.x,y:G.source.y});var I=G;var D=G.depthOfDumminess;for(var F=0;F<D;F++){var B=I.source;var E=B.incoming[0];H.unshift({x:E.source.x,y:E.source.y});I=E}G.changeSource(I.source);G.depthOfDumminess=0;if(H.length>2){H.splice(0,1);H.splice(H.length-1);G.points=H}else{G.points=[]}A=true;break}}},_optimizeCrossings:function(){var B=-1,D;var C=3;var A=0;while(B!==0){if(A++>C){break}B=0;for(D=this.layers.length-1;D>=1;D--){B+=this.optimizeLayerCrossings(false,D)}for(D=0;D<this.layers.length-1;D++){B+=this.optimizeLayerCrossings(true,D)}}},calcUpData:function(E){if(E===0){return}var H=this.layers[E],D,C,I;var A=new u();var J=this.layers[E-1];for(D=0;D<J.length;D++){A.add(J[D])}for(D=0;D<H.length;D++){var B=H[D];var F=0;var G=0;for(C=0;C<B.incoming.length;C++){I=B.incoming[C];if(A.contains(I.source)){G++;F+=I.source.gridPosition}}for(C=0;C<B.outgoing.length;C++){I=B.outgoing[C];if(A.contains(I.target)){G++;F+=I.target.gridPosition}}if(G>0){B.uBaryCenter=F/G;B.upstreamLinkCount=G}else{B.uBaryCenter=D;B.upstreamLinkCount=0}}},calcDownData:function(D){if(D===this.layers.length-1){return}var G=this.layers[D],C,B,H;var I=new u();var J=this.layers[D+1];for(C=0;C<J.length;C++){I.add(J[C])}for(C=0;C<G.length;C++){var A=G[C];var E=0;var F=0;for(B=0;B<A.incoming.length;B++){H=A.incoming[B];if(I.contains(H.source)){F++;E+=H.source.gridPosition}}for(B=0;B<A.outgoing.length;B++){H=A.outgoing[B];if(I.contains(H.target)){F++;E+=H.target.gridPosition}}if(F>0){A.dBaryCenter=E/F;A.downstreamLinkCount=F}else{A.dBaryCenter=C;A.downstreamLinkCount=0}}},optimizeLayerCrossings:function(J,G){var C;var I;if(J){I=this.layers[C=G+1]}else{I=this.layers[C=G-1]}var E=I.slice(0);if(J){this.calcUpData(C)}else{this.calcDownData(C)}var H=this;I.sort(function(N,M){var O=H.calcBaryCenter(N),L=H.calcBaryCenter(M);if(Math.abs(O-L)<0.0001){if(N.degree()===M.degree()){return H.compareByIndex(N,M)}else{if(N.degree()<M.degree()){return 1}}return -1}var K=(L-O)*1000;if(K>0){return -1}else{if(K<0){return 1}}return H.compareByIndex(N,M)});var F,A=0;for(F=0;F<I.length;F++){if(I[F]!==E[F]){A++}}if(A>0){var B=0;for(F=0;F<I.length;F++){var D=I[F];D.gridPosition=B++}}return A},_swapPairs:function(){var L=this.options.layeredIterations;var N=0;while(true){if(N++>L){break}var R=N%4<=1;var P=N%4===1;for(var M=R?0:this.layers.length-1;R?M<=this.layers.length-1:M>=0;M+=R?1:-1){var S=this.layers[M];var E=false;var F=true;var H=0;for(var K=0;K<S.length-1;K++){var I=0;var J=0;var C=0;if(F){if(M!==0){I=this.countLinksCrossingBetweenTwoLayers(M-1,M)}if(M!==this.layers.length-1){J=this.countLinksCrossingBetweenTwoLayers(M,M+1)}if(R){I*=2}else{J*=2}C=I+J}else{C=H}if(C===0){continue}var B=S[K];var A=S[K+1];var G=B.gridPosition;var O=A.gridPosition;S[K]=A;S[K+1]=B;B.gridPosition=O;A.gridPosition=G;I=0;if(M!==0){I=this.countLinksCrossingBetweenTwoLayers(M-1,M)}J=0;if(M!==this.layers.length-1){J=this.countLinksCrossingBetweenTwoLayers(M,M+1)}if(R){I*=2}else{J*=2}var Q=I+J;var D=false;if(P){D=Q>=C}else{D=Q>C}if(D){B=S[K];A=S[K+1];G=B.gridPosition;O=A.gridPosition;S[K]=A;S[K+1]=B;B.gridPosition=O;A.gridPosition=G;H=C;F=false}else{E=true;F=true}}if(E){if(M!==this.layers.length-1){this.calcUpData(M+1)}if(M!==0){this.calcDownData(M-1)}}}}},countLinksCrossingBetweenTwoLayers:function(G,B){var Q=this.layers[G].linksTo[B];var O,N,M,L,H,F,D,C;var I=0;var A=Q.length;for(D=0;D<A;D++){O=Q[D];for(C=D+1;C<A;C++){N=Q[C];if(O.target.layer===B){M=O.source;L=O.target}else{M=O.target;L=O.source}if(N.target.layer===B){H=N.source;F=N.target}else{H=N.target;F=N.source}var K=M.gridPosition;var P=L.gridPosition;var E=H.gridPosition;var J=F.gridPosition;if((K-E)*(P-J)<0){I++}}}return I},calcBaryCenter:function(E){var D=E.upstreamLinkCount;var A=E.downstreamLinkCount;var C=E.uBaryCenter;var B=E.dBaryCenter;if(D>0&&A>0){return(C+B)/2}if(D>0){return C}if(A>0){return B}return 0},_gridPositionComparer:function(A,B){if(A.gridPosition<B.gridPosition){return -1}if(A.gridPosition>B.gridPosition){return 1}return 0},_positionAscendingComparer:function(A,B){return A.k<B.k?-1:A.k>B.k?1:0},_positionDescendingComparer:function(A,B){return A.k<B.k?1:A.k>B.k?-1:0},_firstVirtualNode:function(A){for(var B=0;B<A.length;B++){if(A[B].isVirtual){return B}}return -1},compareByIndex:function(D,C){var B=D.index;var A=C.index;if(B<A){return 1}if(B>A){return -1}return 0},intDiv:function(A,B){return(A-A%B)/B},nextVirtualNode:function(B,C){var D=C.layerIndex;for(var A=D+1;A<B.length;++A){if(B[A].isVirtual){return B[A]}}return null}});var j=q.Class.extend({init:function(A,B){if(b.isUndefined(A)){throw"No diagram given"}this.diagram=A;this.nodeMap=new w();this.linkMap=new w();this.capture(B?B:A)},capture:function(A){var D,B,G,F,E,H,I;if(A instanceof x.Graph){for(F=0;F<A.nodes.length;F++){D=A.nodes[F];G=D.associatedShape;this.nodeMap.set(G.visual.id,new f(D.x,D.y,D.width,D.height))}for(F=0;F<A.links.length;F++){H=A.links[F];E=H.associatedConnection;this.linkMap.set(E.visual.id,H.points())}}else{if(A instanceof Array){B=A;for(F=0;F<B.length;F++){D=B[F];G=D.associatedShape;if(G){this.nodeMap.set(G.visual.id,new f(D.x,D.y,D.width,D.height))}}}else{if(A.hasOwnProperty("links")&&A.hasOwnProperty("nodes")){B=A.nodes;I=A.links;for(F=0;F<B.length;F++){D=B[F];G=D.associatedShape;if(G){this.nodeMap.set(G.visual.id,new f(D.x,D.y,D.width,D.height))}}for(F=0;F<I.length;F++){H=I[F];E=H.associatedConnection;if(E){this.linkMap.set(E.visual.id,H.points)}}}else{var C=this.diagram.shapes;var J=this.diagram.connections;for(F=0;F<C.length;F++){G=C[F];this.nodeMap.set(G.visual.id,G.bounds())}for(F=0;F<J.length;F++){E=J[F];this.linkMap.set(E.visual.id,E.points())}}}}}});o(x,{init:function(A){q.init(A,x.ui)},SpringLayout:a,TreeLayout:k,GraphAdapter:c,LayeredLayout:s,LayoutBase:m,LayoutState:j})}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("dataviz/diagram/dom",["kendo.data","kendo.draganddrop","kendo.toolbar","kendo.editable","kendo.window","kendo.dropdownlist","kendo.dataviz.core","kendo.dataviz.themes","dataviz/diagram/svg","dataviz/diagram/services","dataviz/diagram/layout"],a)}(function(){(function(aZ,B){var aD=kendo.dataviz,aM=kendo.drawing,bc=kendo.geometry,m=aD.diagram,u=kendo.ui.Widget,a5=kendo.Class,G=aZ.proxy,bh=kendo.deepExtend,N=kendo._outerWidth,t=kendo._outerHeight,aH=aZ.extend,aj=kendo.data.HierarchicalDataSource,j=m.Canvas,az=m.Group,I=m.Rectangle,aA=m.Circle,c=m.CompositeTransform,L=m.Rect,aO=m.Path,av=m.DeleteShapeUnit,be=m.DeleteConnectionUnit,ai=m.TextBlock,aX=m.Image,k=m.Point,D=m.Intersect,aa=m.ConnectionEditAdorner,bg=m.UndoRedoService,bd=m.ToolService,a4=m.Selector,aP=m.ResizingAdorner,am=m.ConnectorsAdorner,v=m.Cursors,aC=m.Utils,U=kendo.Observable,ab=m.ToBackUnit,ap=m.ToFrontUnit,E=m.PolylineRouter,bi=m.CascadingRouter,al=aC.isUndefined,aL=aC.isDefined,n=aM.util.defined,e=aZ.isArray,a1=kendo.isFunction,a8=aC.isString,M=aZ.isPlainObject,ag=Math;var a6=".kendoDiagram",aF="cascading",p="itemBoundsChange",P="change",aY="click",H="drag",A="dragEnd",aE="dragStart",o="mouseEnter",ah="mouseLeave",O="error",bj="Auto",s="Top",q="Right",d="Left",a0="Bottom",aK=9007199254740992,ae="select",ar="itemRotate",au="pan",T="zoomStart",i="zoomEnd",ay="none",r=600,bb=600,aW="rectangle",y=100,Z=100,aT=20,aB=20,ac=0,aR="Yellow",aq=Number.MAX_VALUE,h=-Number.MAX_VALUE,a7="absolute",aU="transformed",af="rotated",aN="transparent",W="width",a2="height",ax="x",aw="y",a="DOMMouseScroll"+a6+" mousewheel"+a6,ba=0.05,b=5,C='<a class="k-button k-button-icontext #=className#" href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>',S=5;m.DefaultConnectors=[{name:s},{name:a0},{name:d},{name:q},{name:bj,position:function(X){return X.getPosition("center")}}];var f={cancel:{text:"Cancel",imageClass:"k-i-cancel",className:"k-diagram-cancel",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-i-checkmark",className:"k-diagram-update",iconClass:"k-icon"}};m.shapeDefaults=function(X){var Y={type:aW,path:"",autoSize:true,visual:null,x:ac,y:ac,minWidth:aT,minHeight:aB,width:y,height:Z,hover:{},editable:{connect:true,tools:[]},connectors:m.DefaultConnectors,rotation:{angle:0}};aC.simpleExtend(Y,X);return Y};function x(Y){var X=Y.originalEvent,bm=0;if(X.wheelDelta){bm=-X.wheelDelta/40;bm=bm>0?ag.ceil(bm):ag.floor(bm)}else{if(X.detail){bm=X.detail}}return bm}function aJ(X){return X.options.name.toLowerCase()===bj.toLowerCase()}function at(X,bm){var bn=aK,bq,Y;for(var bo=0;bo<bm.length;bo++){Y=bm[bo];if(!aJ(Y)){var bp=X.distanceTo(Y.position());if(bp<bn){bn=bp;bq=Y}}}return bq}function K(bq,bp){var bm,br=[],bo;var Y=bq.drawingContainer().children;var bn=Y.length;for(bm=0;bm<bp.length;bm++){bo=bp[bm];for(var X=0;X<bn;X++){if(Y[X]==bo.drawingContainer()){br.push(X);break}}}return br}var aG=U.extend({init:function(X){var Y=this;Y.dataItem=(X||{}).dataItem;U.fn.init.call(Y);Y.options=bh({id:m.randomId()},Y.options,X);Y.isSelected=false;Y.visual=new az({id:Y.options.id,autoSize:Y.options.autoSize});Y.id=Y.options.id;Y._template()},options:{hover:{},cursor:v.grip,content:{align:"center middle"},selectable:true,serializable:true,enable:true},_getCursor:function(X){if(this.adorner){return this.adorner._getCursor(X)}return this.options.cursor},visible:function(X){if(al(X)){return this.visual.visible()}else{this.visual.visible(X)}},bounds:function(){},refresh:function(){this.visual.redraw()},position:function(X){this.options.x=X.x;this.options.y=X.y;this.visual.position(X)},toString:function(){return this.options.id},serialize:function(){var X=bh({},{options:this.options});if(this.dataItem){X.dataItem=this.dataItem.toString()}return X},_content:function(bm){if(bm!==B){var Y=this.options;if(m.Utils.isString(bm)){Y.content.text=bm}else{bh(Y.content,bm)}var bn=Y.content;var X=this._contentVisual;if(!X){this._createContentVisual(bn)}else{this._updateContentVisual(bn)}}return this.options.content.text},_createContentVisual:function(X){if(X.text){this._contentVisual=new ai(X);this._contentVisual._includeInBBox=false;this.visual.append(this._contentVisual)}},_updateContentVisual:function(X){this._contentVisual.redraw(X)},_hitTest:function(X){var Y=this.bounds();return this.visible()&&Y.contains(X)&&this.options.enable},_template:function(){var Y=this;if(Y.options.content.template){var bm=Y.dataItem||{},X=kendo.template(Y.options.content.template,{paramName:"dataItem"});Y.options.content.text=X(bm)}},_canSelect:function(){return this.options.selectable!==false},toJSON:function(){return{id:this.options.id}}});var g=a5.extend({init:function(X,Y){this.options=bh({},this.options,Y);this.connections=[];this.shape=X},options:{width:7,height:7,fill:{color:aR},hover:{}},position:function(){if(this.options.position){return this.options.position(this.shape)}else{return this.shape.getPosition(this.options.name)}},toJSON:function(){return{shapeId:this.shape.toString(),connector:this.options.name}}});g.parse=function(bn,bp){var Y=bp.split(":"),bq=Y[0],bm=Y[1]||bj;for(var bo=0;bo<bn.shapes.length;bo++){var X=bn.shapes[bo];if(X.options.id==bq){return X.getConnector(bm.trim())}}};var Q=aG.extend({init:function(Y,X){var bm=this;aG.fn.init.call(bm,Y);this.diagram=X;this.updateOptionsFromModel();Y=bm.options;bm.connectors=[];bm.type=Y.type;bm.createShapeVisual();bm.updateBounds();bm.content(bm.content());bm._createConnectors()},options:m.shapeDefaults(),_setOptionsFromModel:function(X){var Y=ao(X||this.dataItem);this.options=bh({},this.options,Y);this.redrawVisual()},updateOptionsFromModel:function(X,bm){if(this.diagram&&this.diagram._isEditable){var bn=ao(X||this.dataItem);if(X&&bm){if(!aD.inArray(bm,["x","y","width","height"])){if(this.options.visual){this._redrawVisual()}else{if(bn.type){this.options=bh({},this.options,bn);this._redrawVisual()}}if(this.options.content){this._template();this.content(this.options.content)}}else{var Y=this.bounds();Y[bm]=X[bm];this.bounds(Y)}}else{this.options=bh({},this.options,bn)}}},_redrawVisual:function(){this.visual.clear();this._contentVisual=null;this.options.dataItem=this.dataItem;this.createShapeVisual();this.updateBounds()},redrawVisual:function(){this._redrawVisual();if(this.options.content){this._template();this.content(this.options.content)}},updateModel:function(bn){var Y=this.diagram;if(Y&&Y._isEditable){var bm=this._bounds;var X=this.dataItem;if(X){Y._suspendModelRefresh();if(n(X.x)&&bm.x!==X.x){X.set("x",bm.x)}if(n(X.y)&&bm.y!==X.y){X.set("y",bm.y)}if(n(X.width)&&bm.width!==X.width){X.set("width",bm.width)}if(n(X.height)&&bm.height!==X.height){X.set("height",bm.height)}this.dataItem=X;Y._resumeModelRefresh();if(bn){Y._syncShapeChanges()}}}},updateBounds:function(){var Y=this.visual._measure(true);var X=this.options;this.bounds(new L(X.x,X.y,Y.width,Y.height));this._rotate();this._alignContent()},content:function(Y){var X=this._content(Y);this._alignContent();return X},_alignContent:function(){var bp=this.options.content||{};var bn=this._contentVisual;if(bn&&bp.align){var Y=this.visual._measure();var bo=new m.RectAlign(Y);var bm=bn.drawingElement.bbox(null);var X=new L(0,0,bm.width(),bm.height());var bq=bo.align(X,bp.align);bn.position(bq.topLeft())}},_createConnectors:function(){var Y=this.options,bn=Y.connectors.length,bo=Y.connectorDefaults,X,bm;for(bm=0;bm<bn;bm++){X=new g(this,bh({},bo,Y.connectors[bm]));this.connectors.push(X)}},bounds:function(Y){var X;if(Y){if(a8(Y)){switch(Y){case aU:X=this._transformedBounds();break;case a7:X=this._transformedBounds();var bm=this.diagram._pan;X.x+=bm.x;X.y+=bm.y;break;case af:X=this._rotatedBounds();break;default:X=this._bounds}}else{this._setBounds(Y);this._triggerBoundsChange();if(!(this.diagram&&this.diagram._layouting)){this.refreshConnections()}}}else{X=this._bounds}return X},_setBounds:function(bp){var bm=this.options;var bo=bp.topLeft();var Y=bm.x=bo.x;var bq=bm.y=bo.y;var bn=bm.width=ag.max(bp.width,bm.minWidth);var X=bm.height=ag.max(bp.height,bm.minHeight);this._bounds=new L(Y,bq,bn,X);this.visual.redraw({x:Y,y:bq,width:bn,height:X})},position:function(X){if(X){this.bounds(new L(X.x,X.y,this._bounds.width,this._bounds.height))}else{return this._bounds.topLeft()}},clone:function(){var X=this.serialize();X.options.id=m.randomId();if(this.diagram&&this.diagram._isEditable&&n(this.dataItem)){X.options.dataItem=aQ(this.dataItem)}return new Q(X.options)},select:function(bn){var X=this.diagram,Y,bm;if(al(bn)){bn=true}if(this._canSelect()){if(this.isSelected!=bn){Y=[];bm=[];this.isSelected=bn;if(this.isSelected){X._selectedItems.push(this);Y.push(this)}else{aC.remove(X._selectedItems,this);bm.push(this)}if(!X._internalSelection){X._selectionChanged(Y,bm)}return true}}},rotate:function(bq,Y,bm){var bn=this.visual.rotate();if(bq!==B){if(bm!==false&&this.diagram&&this.diagram.undoRedoService&&bq!==bn.angle){this.diagram.undoRedoService.add(new m.RotateUnit(this.diagram._resizingAdorner,[this],[bn.angle]),false)}var X=this.bounds(),bp=new k(X.width/2,X.height/2),br,bo;if(Y){br=bq-bn.angle;bo=X.center().rotate(Y,360-br).minus(bp);this._rotationOffset=this._rotationOffset.plus(bo.minus(X.topLeft()));this.position(bo)}this.visual.rotate(bq,bp);this.options.rotation.angle=bq;if(this.diagram&&this.diagram._connectorsAdorner){this.diagram._connectorsAdorner.refresh()}this.refreshConnections();if(this.diagram){this.diagram.trigger(ar,{item:this})}}return bn},connections:function(br){var bs=[],bp,bo,bm,Y,bn;for(bp=0;bp<this.connectors.length;bp++){bn=this.connectors[bp];Y=bn.connections;for(bo=0,Y;bo<Y.length;bo++){bm=Y[bo];if(br=="out"){var X=bm.source();if(X.shape&&X.shape==this){bs.push(bm)}}else{if(br=="in"){var bq=bm.target();if(bq.shape&&bq.shape==this){bs.push(bm)}}else{bs.push(bm)}}}}return bs},refreshConnections:function(){aZ.each(this.connections(),function(){this.refresh()})},getConnector:function(bm){var X,Y;if(a8(bm)){bm=bm.toLocaleLowerCase();for(X=0;X<this.connectors.length;X++){Y=this.connectors[X];if(Y.options.name.toLocaleLowerCase()==bm){return Y}}}else{if(bm instanceof k){return at(bm,this.connectors)}else{return this.connectors.length?this.connectors[0]:null}}},getPosition:function(Y){var X=this.bounds(),bm=Y.charAt(0).toLowerCase()+Y.slice(1);if(a1(X[bm])){return this._transformPoint(X[bm]())}return X.center()},redraw:function(bm){if(bm){var Y=this.options;var X;this.shapeVisual.redraw(this._visualOptions(bm));if(this._diffNumericOptions(bm,[W,a2,ax,aw])){this.bounds(new L(Y.x,Y.y,Y.width,Y.height));X=true}if(bm.connectors){Y.connectors=bm.connectors;this._updateConnectors()}Y=bh(Y,bm);if(bm.rotation||X){this._rotate()}if(Y.content){this.content(Y.content)}}},_updateConnectors:function(){var bm=this.connections();this.connectors=[];this._createConnectors();var Y;var bn;var bo;for(var X=0;X<bm.length;X++){Y=bm[X];bn=Y.source();bo=Y.target();if(bn.shape&&bn.shape===this){Y.source(this.getConnector(bn.options.name)||null)}else{if(bo.shape&&bo.shape===this){Y.target(this.getConnector(bo.options.name)||null)}}Y.updateModel()}},_diffNumericOptions:m.diffNumericOptions,_visualOptions:function(X){return{data:X.path,source:X.source,hover:X.hover,fill:X.fill,stroke:X.stroke}},_triggerBoundsChange:function(){if(this.diagram){this.diagram.trigger(p,{item:this,bounds:this._bounds.clone()})}},_transformPoint:function(X){var bm=this.rotate(),bn=this.bounds(),Y=bn.topLeft();if(bm.angle){X.rotate(bm.center().plus(Y),360-bm.angle)}return X},_transformedBounds:function(){var bm=this.bounds(),X=bm.topLeft(),Y=bm.bottomRight();return L.fromPoints(this.diagram.modelToView(X),this.diagram.modelToView(Y))},_rotatedBounds:function(){var bm=this.bounds().rotatedBounds(this.rotate().angle),X=bm.topLeft(),Y=bm.bottomRight();return L.fromPoints(X,Y)},_rotate:function(){var X=this.options.rotation;if(X&&X.angle){this.rotate(X.angle)}this._rotationOffset=new k()},_hover:function(bm){var X=this.options,Y=X.hover,bo=X.stroke,bn=X.fill;if(bm&&aL(Y.stroke)){bo=bh({},bo,Y.stroke)}if(bm&&aL(Y.fill)){bn=Y.fill}this.shapeVisual.redraw({stroke:bo,fill:bn});if(X.editable&&X.editable.connect){this.diagram._showConnectors(this,bm)}},_hitTest:function(bm){if(this.visible()){var Y=this.bounds(),X,bn=this.rotate().angle;if(bm.isEmpty&&!bm.isEmpty()){return D.rects(bm,Y,bn?bn:0)}else{X=bm.clone().rotate(Y.center(),bn);if(Y.contains(X)){return this}}}},toJSON:function(){return{shapeId:this.options.id}},createShapeVisual:function(){var bm=this.options;var Y=this._visualOptions(bm);var bo=bm.visual;var bn=(bm.type+"").toLocaleLowerCase();var X;Y.width=bm.width;Y.height=bm.height;if(a1(bo)){X=bo.call(this,bm)}else{if(Y.data){X=new aO(Y);ak(X)}else{if(bn=="rectangle"){X=new I(Y)}else{if(bn=="circle"){X=new aA(Y)}else{if(bn=="text"){X=new ai(Y)}else{if(bn=="image"){X=new aX(Y)}else{X=new aO(Y)}}}}}}this.shapeVisual=X;this.visual.append(this.shapeVisual)}});var ad=aG.extend({init:function(bn,bm,X){var Y=this;aG.fn.init.call(Y,X);this.updateOptionsFromModel();this._initRouter();Y.path=new m.Polyline(Y.options);Y.path.fill(aN);Y.visual.append(Y.path);Y._sourcePoint=Y._targetPoint=new k();Y._setSource(bn);Y._setTarget(bm);Y.content(Y.options.content);Y.definers=[];if(n(X)&&X.points){Y.points(X.points)}},options:{hover:{stroke:{}},startCap:ay,endCap:ay,points:[],selectable:true,fromConnector:bj,toConnector:bj},_setOptionsFromModel:function(X){this.updateOptionsFromModel(X||this.dataItem)},updateOptionsFromModel:function(bm){if(this.diagram&&this.diagram._isEditable){var X=this.diagram._dataMap;var Y=w(bm||this.dataItem);if(bm){if(n(Y.from)){var bo=X[Y.from];if(bo&&n(Y.fromConnector)){bo=bo.getConnector(Y.fromConnector)}this.source(bo)}else{if(n(Y.fromX)&&n(Y.fromY)){this.source(new k(Y.fromX,Y.fromY))}}if(n(Y.to)){var bn=X[Y.to];if(bn&&n(Y.toConnector)){bn=bn.getConnector(Y.toConnector)}this.target(bn)}else{if(n(Y.toX)&&n(Y.toY)){this.target(new k(Y.toX,Y.toY))}}if(n(Y.type)&&this.type()!==Y.type){this.points([]);this.type(Y.type)}this.dataItem=bm;this._template();this.redraw(this.options)}else{this.options=bh({},Y,this.options)}}},updateModel:function(Y){if(this.diagram&&this.diagram._isEditable){if(this.diagram.connectionsDataSource){var X=this.diagram.connectionsDataSource.getByUid(this.dataItem.uid);if(X){this.diagram._suspendModelRefresh();if(n(this.options.fromX)&&this.options.fromX!==null){a9("from",X);a9("fromConnector",X);X.set("fromX",this.options.fromX);X.set("fromY",this.options.fromY)}else{X.set("from",this.options.from);if(n(X.fromConnector)){X.set("fromConnector",this.sourceConnector?this.sourceConnector.options.name:null)}a9("fromX",X);a9("fromY",X)}if(n(this.options.toX)&&this.options.toX!==null){a9("to",X);a9("toConnector",X);X.set("toX",this.options.toX);X.set("toY",this.options.toY)}else{X.set("to",this.options.to);if(n(X.toConnector)){X.set("toConnector",this.targetConnector?this.targetConnector.options.name:null)}a9("toX",X);a9("toY",X)}if(n(this.options.type)&&n(X.type)){X.set("type",this.options.type)}this.dataItem=X;this.diagram._resumeModelRefresh();if(Y){this.diagram._syncConnectionChanges()}}}}},sourcePoint:function(){return this._resolvedSourceConnector?this._resolvedSourceConnector.position():this._sourcePoint},_setSource:function(bm){var X=bm instanceof Q;var bn=this.options.fromConnector||bj;var Y;if(X&&!bm.getConnector(bn)){return}if(bm!==B){this.from=bm}this._removeFromSourceConnector();if(bm===null){if(this.sourceConnector){this._sourcePoint=(this._resolvedSourceConnector||this.sourceConnector).position();this._clearSourceConnector();this._setFromOptions(null,this._sourcePoint)}}else{if(bm instanceof g){Y=bm.shape.dataItem;if(Y){this._setFromOptions(Y.id)}this.sourceConnector=bm;this.sourceConnector.connections.push(this)}else{if(bm instanceof k){this._setFromOptions(null,bm);this._sourcePoint=bm;if(this.sourceConnector){this._clearSourceConnector()}}else{if(X){Y=bm.dataItem;if(Y){this._setFromOptions(Y.id)}this.sourceConnector=bm.getConnector(bn);this.sourceConnector.connections.push(this)}}}}},source:function(Y,X){if(aL(Y)){if(X&&this.diagram){this.diagram.undoRedoService.addCompositeItem(new m.ConnectionEditUnit(this,Y))}this._setSource(Y);this.refresh()}return this.sourceConnector?this.sourceConnector:this._sourcePoint},_setFromOptions:function(Y,X){this.options.from=Y;if(X){this.options.fromX=X.x;this.options.fromY=X.y}else{this.options.fromX=null;this.options.fromY=null}},sourceDefiner:function(X){if(X){if(X instanceof m.PathDefiner){X.left=null;this._sourceDefiner=X;this.source(X.point)}else{throw"The sourceDefiner needs to be a PathDefiner."}}else{if(!this._sourceDefiner){this._sourceDefiner=new m.PathDefiner(this.sourcePoint(),null,null)}return this._sourceDefiner}},targetPoint:function(){return this._resolvedTargetConnector?this._resolvedTargetConnector.position():this._targetPoint},_setTarget:function(bn){var X=bn instanceof Q;var bm=this.options.toConnector||bj;var Y;if(X&&!bn.getConnector(bm)){return}if(bn!==B){this.to=bn}this._removeFromTargetConnector();if(bn===null){if(this.targetConnector){this._targetPoint=(this._resolvedTargetConnector||this.targetConnector).position();this._clearTargetConnector();this._setToOptions(null,this._targetPoint)}}else{if(bn instanceof g){Y=bn.shape.dataItem;if(Y){this._setToOptions(Y.id)}this.targetConnector=bn;this.targetConnector.connections.push(this)}else{if(bn instanceof k){this._setToOptions(null,bn);this._targetPoint=bn;if(this.targetConnector){this._clearTargetConnector()}}else{if(X){Y=bn.dataItem;if(Y){this._setToOptions(Y.id)}this.targetConnector=bn.getConnector(bm);this.targetConnector.connections.push(this)}}}}},target:function(Y,X){if(aL(Y)){if(X&&this.diagram){this.diagram.undoRedoService.addCompositeItem(new m.ConnectionEditUnit(this,B,Y))}this._setTarget(Y);this.refresh()}return this.targetConnector?this.targetConnector:this._targetPoint},_setToOptions:function(Y,X){this.options.to=Y;if(X){this.options.toX=X.x;this.options.toY=X.y}else{this.options.toX=null;this.options.toY=null}},targetDefiner:function(X){if(X){if(X instanceof m.PathDefiner){X.right=null;this._targetDefiner=X;this.target(X.point)}else{throw"The sourceDefiner needs to be a PathDefiner."}}else{if(!this._targetDefiner){this._targetDefiner=new m.PathDefiner(this.targetPoint(),null,null)}return this._targetDefiner}},_updateConnectors:function(){this._updateConnector(this.source(),"source");this._updateConnector(this.target(),"target")},_updateConnector:function(X,bo){var bq=this;var bn=bq.diagram;if(X instanceof g&&!bn.getShapeById(X.shape.id)){var bm=X.shape.dataItem;var br=X.options.name;var Y=function(){var bs=bn._dataMap[bm.id];X=bs.getConnector(br);bq[bo](X,false);bq.updateModel()};if(bn._dataMap[bm.id]){Y()}else{var bp=bn._inactiveShapeItems.getByUid(bm.uid);if(bp){bn._deferredConnectionUpdates.push(bp.onActivate(Y))}}}else{bq[bo](X,false)}},content:function(Y){var X=this._content(Y);if(n(Y)){this._alignContent()}return X},_createContentVisual:function(X){var Y;if(a1(X.visual)){Y=X.visual.call(this,X)}else{if(X.text){Y=new ai(X)}}if(Y){this._contentVisual=Y;Y._includeInBBox=false;this.visual.append(Y)}return Y},_updateContentVisual:function(X){if(a1(X.visual)){this.visual.remove(this._contentVisual);this._createContentVisual(X)}else{this._contentVisual.redraw(X)}},_alignContent:function(){if(this._contentVisual){var bq=S;var bx=this.allPoints();var bo=ag.floor(bx.length/2);var bu=bo-1;while(bu>0&&bx[bu].equals(bx[bo])){bu--;bo++}var bv=bx[bo];var bm=bx[bu];var br=this._contentVisual._measure();var bn=br.width;var by=br.height;var bz=bx.length%2===0;var Y=bm.distanceTo(bv);if(bz&&bx.length>2&&Y>0&&(bm.y===bv.y&&Y<bn||bm.x===bv.x&&Y<by)){bz=false;bq=0}var bw;if(bz){var bp=aM.util.deg(ag.atan2(bv.y-bm.y,bv.x-bm.x));bw=new k((bv.x-bm.x)/2+bm.x,(bv.y-bm.y)/2+bm.y);if(ag.abs(bp)===90){bw.x+=bq;bw.y-=by/2}else{if(bp%180===0){bw.x-=bn/2;bw.y-=by+bq}else{if(bp<-90||0<bp&&bp<90){bw.y-=by}else{if(bp<0||bp>90){bw.x-=bn;bw.y-=by}}}}}else{var X=ag.floor(bx.length/2);bw=bx[X].clone();bm=bx[X-1];bv=bx[X+1];var bt=bm.x<=bw.x&&bv.x<=bw.x?bq:-br.width-bq;var bs=bm.y<=bw.y&&bv.y<=bw.y?bq:-br.height-bq;bw.x+=bt;bw.y+=bs}this._contentVisual.position(bw)}},select:function(bn){var X=this.diagram,Y,bm;if(this._canSelect()){if(this.isSelected!==bn){this.isSelected=bn;Y=[];bm=[];if(this.isSelected){this.adorner=new aa(this,this.options.selection);X._adorn(this.adorner,true);X._selectedItems.push(this);Y.push(this)}else{if(this.adorner){X._adorn(this.adorner,false);aC.remove(X._selectedItems,this);this.adorner=B;bm.push(this)}}if(this.adorner){this.adorner.refresh()}if(!X._internalSelection){X._selectionChanged(Y,bm)}return true}}},bounds:function(X){if(X&&!a8(X)){this._bounds=X}else{return this._bounds}},type:function(Y){var X=this.options;if(Y){if(Y!==X.type){X.type=Y;this._initRouter();this.refresh()}}else{return X.type}},_initRouter:function(){var X=(this.options.type||"").toLowerCase();if(X==aF){this._router=new bi(this)}else{this._router=new E(this)}},points:function(bn){if(bn){this.definers=[];for(var bm=0;bm<bn.length;bm++){var Y=bn[bm];if(Y instanceof m.Point){this.definers.push(new m.PathDefiner(Y))}else{if(Y.hasOwnProperty("x")&&Y.hasOwnProperty("y")){this.definers.push(new m.PathDefiner(new k(Y.x,Y.y)))}else{throw"A Connection point needs to be a Point or an object with x and y properties."}}}}else{var bo=[];if(aL(this.definers)){for(var X=0;X<this.definers.length;X++){bo.push(this.definers[X].point)}}return bo}},allPoints:function(){var Y=[this.sourcePoint()];if(this.definers){for(var X=0;X<this.definers.length;X++){Y.push(this.definers[X].point)}}Y.push(this.targetPoint());return Y},refresh:function(){this._resolveConnectors();this._refreshPath();this._alignContent();if(this.adorner){this.adorner.refresh()}},_resolveConnectors:function(){var X=this,bp,bq,Y,bm,bn=X.source(),bo=X.target();if(bn instanceof k){bp=bn}else{if(bn instanceof g){if(aJ(bn)){Y=bn.shape.connectors}else{Y=[bn]}}}if(bo instanceof k){bq=bo}else{if(bo instanceof g){if(aJ(bo)){bm=bo.shape.connectors}else{bm=[bo]}}}if(bp){if(bm){X._resolvedTargetConnector=at(bp,bm)}}else{if(Y){if(bq){X._resolvedSourceConnector=at(bq,Y)}else{if(bm){this._resolveAutoConnectors(Y,bm)}}}}},_resolveAutoConnectors:function(br,bq){var bp=aK;var bv=aK;var bx,bo;var bu,bn;var bm,bw;var X,bt;var Y,by;var bs;for(Y=0;Y<br.length;Y++){X=br[Y];if(!aJ(X)){bu=X.position();for(by=0;by<bq.length;by++){bt=bq[by];if(!aJ(bt)){bn=bt.position();bs=ag.round(bu.distanceTo(bn));if(bs<bp&&this.diagram&&this._testRoutePoints(bu,bn,X,bt)){bp=bs;bx=X;bo=bt}if(bs<bv){bm=X;bw=bt;bv=bs}}}}}if(bx){bm=bx;bw=bo}this._resolvedSourceConnector=bm;this._resolvedTargetConnector=bw},_testRoutePoints:function(bt,bp,X,bq){var bv=this._router;var bn=true;if(bv instanceof bi){var bu=bv.routePoints(bt,bp,X,bq),bm,bo,br,Y;Y=this._getRouteExclude(bt,bp,X.shape,bq.shape);bu.unshift(bt);bu.push(bp);for(var bs=1;bs<bu.length;bs++){bm=bu[bs-1];bo=bu[bs];br=new L(ag.min(bm.x,bo.x),ag.min(bm.y,bo.y),ag.abs(bm.x-bo.x),ag.abs(bm.y-bo.y));if(br.width>0){br.x++;br.width-=2}if(br.height>0){br.y++;br.height-=2}if(!br.isEmpty()&&this.diagram._shapesQuadTree.hitTestRect(br,Y)){bn=false;break}}}return bn},_getRouteExclude:function(bm,bo,bn,X){var Y=[];if(this._isPointInsideShape(bm,bn)){Y.push(bn)}if(this._isPointInsideShape(bo,X)){Y.push(X)}return Y},_isPointInsideShape:function(br,bq){var Y=bq.bounds(),bp,bm=bq.rotate().angle,X,bs,bo=Y.x,bn=Y.y;bp=br.clone().rotate(Y.center(),bm);X=bp.x;bs=bp.y;return X>bo&&X<bo+Y.width&&bs>bn&&bs<bn+Y.height},redraw:function(X){if(X){this.options=bh({},this.options,X);var Y=this.options.points;if(n(Y)&&Y.length>0){this.points(Y);this._refreshPath()}if(X&&X.content||X.text){this.content(X.content)}this.path.redraw({fill:X.fill,stroke:X.stroke,startCap:X.startCap,endCap:X.endCap})}},clone:function(){var X=this.serialize();if(this.diagram&&this.diagram._isEditable&&n(this.dataItem)){X.options.dataItem=aQ(this.dataItem)}return new ad(this.from,this.to,X.options)},serialize:function(){var bm=this.from.toJSON?this.from.toJSON:this.from.toString(),Y=this.to.toJSON?this.to.toJSON:this.to.toString();var X=bh({},{options:this.options,from:bm,to:Y});if(n(this.dataItem)){X.dataItem=this.dataItem.toString()}X.options.points=this.points();return X},_hitTest:function(X){if(this.visible()){var Y=new k(X.x,X.y),bn=this.sourcePoint(),bm=this.targetPoint();if(X.isEmpty&&!X.isEmpty()&&X.contains(bn)&&X.contains(bm)){return this}if(this._router.hitTest(Y)){return this}}},_hover:function(Y){var X=(this.options.stroke||{}).color;if(Y&&aL(this.options.hover.stroke.color)){X=this.options.hover.stroke.color}this.path.redraw({stroke:{color:X}})},_refreshPath:function(){if(!n(this.path)){return}this._drawPath();this.bounds(this._router.getBounds())},_drawPath:function(){if(this._router){this._router.route()}var Y=this.sourcePoint();var bm=this.targetPoint();var X=this.points();this.path.redraw({points:[Y].concat(X,[bm])})},_clearSourceConnector:function(){this.sourceConnector=B;this._resolvedSourceConnector=B},_clearTargetConnector:function(){this.targetConnector=B;this._resolvedTargetConnector=B},_removeFromSourceConnector:function(){if(this.sourceConnector){aC.remove(this.sourceConnector.connections,this)}},_removeFromTargetConnector:function(){if(this.targetConnector){aC.remove(this.targetConnector.connections,this)}},toJSON:function(){var Y=this;var bn,bm,X;if(Y.from&&Y.from.toJSON){bn=Y.from.toJSON()}else{X=Y._sourcePoint;bn={x:X.x,y:X.y}}if(Y.to&&Y.to.toJSON){bm=Y.to.toJSON()}else{X=Y._targetPoint;bm={x:X.x,y:X.y}}return{from:bn,to:bm}}});var aV=u.extend({init:function(X,bm){var Y=this;kendo.destroy(X);u.fn.init.call(Y,X,bm);Y._initTheme();Y._initElements();Y._extendLayoutOptions(Y.options);Y._initDefaults(bm);Y._interactionDefaults();Y._initCanvas();Y.mainLayer=new az({id:"main-layer"});Y.canvas.append(Y.mainLayer);Y._shapesQuadTree=new bk(Y);Y._pan=new k();Y._adorners=[];Y.adornerLayer=new az({id:"adorner-layer"});Y.canvas.append(Y.adornerLayer);Y._createHandlers();Y._initialize();Y._resizingAdorner=new aP(Y,{editable:Y.options.editable});Y._connectorsAdorner=new am(Y);Y._adorn(Y._resizingAdorner,true);Y._adorn(Y._connectorsAdorner,true);Y.selector=new a4(Y);Y._clipboard=[];Y.pauseMouseHandlers=false;Y._fetchFreshData();Y._createGlobalToolBar();Y._createOptionElements();Y.zoom(Y.options.zoom);Y.canvas.draw()},options:{name:"Diagram",theme:"default",layout:"",zoomRate:0.1,zoom:1,zoomMin:0,zoomMax:2,dataSource:{},draggable:true,template:"",autoBind:true,editable:{rotate:{},resize:{},text:true,tools:[],drag:{snap:{size:10,angle:10}},remove:true},pannable:{},selectable:{key:"none"},tooltip:{enabled:true,format:"{0}"},copy:{enabled:true,offsetX:20,offsetY:20},shapeDefaults:m.shapeDefaults({undoable:true}),connectionDefaults:{editable:{tools:[]},type:aF},shapes:[],connections:[]},events:[i,T,au,ae,ar,p,P,aY,o,ah,"toolBarClick","save","cancel","edit","remove","add","dataBound",aE,H,A],items:function(){return aZ()},_createGlobalToolBar:function(){var X=this.options.editable;if(X){var Y=X.tools;if(this._isEditable&&Y!==false&&(!Y||Y.length===0)){Y=["createShape","undo","redo","rotateClockwise","rotateAnticlockwise"]}if(Y&&Y.length){this.toolBar=new aS(this,{tools:Y||{},click:G(this._toolBarClick,this),modal:false});this.toolBar.element.css({textAlign:"left"});this.element.prepend(this.toolBar.element);this._resize()}}},createShape:function(){if(this.editor&&this.editor.end()||!this.editor){var bp=this.dataSource;var X=bp.view()||[];var bn=X.length;var bm=V(bp,{});var Y=this._createShape(bm,{});if(!this.trigger("add",{shape:Y})){bp.insert(bn,bm);var bo=this._inactiveShapeItems.getByUid(bm.uid);bo.element=Y;this.edit(Y)}}},_createShape:function(bm,Y){Y=bh({},this.options.shapeDefaults,Y);Y.dataItem=bm;var X=new Q(Y,this);return X},createConnection:function(){if(this.editor&&this.editor.end()||!this.editor){var X=this.connectionsDataSource;var Y=X.view()||[];var bo=Y.length;var bn=V(X,{});var bm=this._createConnection(bn);if(!this.trigger("add",{connection:bm})){this._connectionsDataMap[bn.uid]=bm;X.insert(bo,bn);this.addConnection(bm,false);this.edit(bm)}}},_createConnection:function(bm,bn,bo){var Y=bh({},this.options.connectionDefaults);Y.dataItem=bm;var X=new ad(bn||new k(),bo||new k(),Y);return X},editModel:function(Y,X){this.cancelEdit();var bo,bn;var bm=this.options.editable;if(X=="shape"){bo=bm.shapeEditors;bn=bm.shapeTemplate}else{if(X=="connection"){var bp=G(l,this);bo=bh({},{from:bp,to:bp},bm.connectionEditors);bn=bm.connectionTemplate}else{return}}this.editor=new a3(this.element,{update:G(this._update,this),cancel:G(this._cancel,this),model:Y,type:X,target:this,editors:bo,template:bn});this.trigger("edit",this._editArgs())},edit:function(Y){if(Y.dataItem){var X=Y instanceof Q?"shape":"connection";this.editModel(Y.dataItem,X)}},cancelEdit:function(){if(this.editor){this._getEditDataSource().cancelChanges(this.editor.model);this._destroyEditor()}},saveEdit:function(){if(this.editor&&this.editor.end()&&!this.trigger("save",this._editArgs())){this._getEditDataSource().sync()}},_update:function(){if(this.editor&&this.editor.end()&&!this.trigger("save",this._editArgs())){this._getEditDataSource().sync();this._destroyEditor()}},_cancel:function(){if(this.editor&&!this.trigger("cancel",this._editArgs())){var X=this.editor.model;this._getEditDataSource().cancelChanges(X);var Y=this._connectionsDataMap[X.uid]||this._dataMap[X.id];if(Y){Y._setOptionsFromModel(X)}this._destroyEditor()}},_getEditDataSource:function(){return this.editor.options.type==="shape"?this.dataSource:this.connectionsDataSource},_editArgs:function(){var X={container:this.editor.wrapper};X[this.editor.options.type]=this.editor.model;return X},_destroyEditor:function(){if(this.editor){this.editor.close();this.editor=null}},_initElements:function(){this.wrapper=this.element.empty().css("position","relative").attr("tabindex",0).addClass("k-widget k-diagram");this.scrollable=aZ("<div />").appendTo(this.element)},_initDefaults:function(bp){var bm=this.options;var bn=bm.editable;var bo=bm.shapeDefaults;var X=bm.connectionDefaults;var Y=(bp||{}).shapeDefaults;if(bn===false){bo.editable=false;X.editable=false}else{J(bn,bo.editable,["drag","remove","connect"]);J(bn,X.editable,["drag","remove"])}if(Y&&Y.connectors){bm.shapeDefaults.connectors=Y.connectors}},_interactionDefaults:function(){var bm=this.options;var Y=bm.selectable;var bn=bm.pannable;var X=kendo.support.mobileOS;if(Y&&!n(Y.multiple)){bm.selectable=bh({multiple:X?false:true},bm.selectable)}if(bn&&!n(bn.key)){bm.pannable=bh({key:X?"none":"ctrl"},bm.pannable)}},_initCanvas:function(){var Y=aZ("<div class='k-layer'></div>").appendTo(this.scrollable)[0];var X=this.viewport();this.canvas=new j(Y,{width:X.width||r,height:X.height||bb})},_createHandlers:function(){var Y=this;var X=Y.element;X.on(a,G(Y._wheel,Y)).on("keydown"+a6,G(Y._keydown,Y));Y._userEvents=new kendo.UserEvents(this.scrollable,{multiTouch:true,fastTap:true,tap:G(Y._tap,Y),start:G(Y._dragStart,Y),move:G(Y._drag,Y),end:G(Y._dragEnd,Y),gesturestart:G(Y._gestureStart,Y),gesturechange:G(Y._gestureChange,Y),gestureend:G(Y._gestureEnd,Y)});Y.toolService=new bd(Y);this.scrollable.on("mouseover"+a6,G(Y._mouseover,Y)).on("mouseout"+a6,G(Y._mouseout,Y)).on("mousemove"+a6,G(Y._mouseMove,Y)).on("mousedown"+a6,G(Y._mouseDown,Y)).on("mouseup"+a6,G(Y._mouseUp,Y));this._syncHandler=G(Y._syncChanges,Y);Y._resizeHandler=G(Y.resize,Y,false);kendo.onResize(Y._resizeHandler);this.bind(T,G(Y._destroyToolBar,Y));this.bind(au,G(Y._destroyToolBar,Y))},_dragStart:function(bm){this._pauseMouseHandlers=true;var X=this._eventPositions(bm,true);var Y=bm.event;if(this.toolService.start(X,this._meta(Y))){this._destroyToolBar();Y.preventDefault()}},_drag:function(bm){var Y=this._eventPositions(bm);var X=bm.event;if(this.toolService.move(Y,this._meta(X))){X.preventDefault()}},_dragEnd:function(bm){this._pauseMouseHandlers=false;var Y=this._eventPositions(bm);var X=bm.event;if(this.toolService.end(Y,this._meta(X))){this._createToolBar();X.preventDefault()}},_mouseMove:function(Y){if(!this._pauseMouseHandlers){var X=this._eventPositions(Y);this.toolService._updateHoveredItem(X);this.toolService._updateCursor(X)}},_mouseDown:function(){this._pauseMouseHandlers=true},_mouseUp:function(){this._pauseMouseHandlers=false},_tap:function(br){var bp=this.toolService;var bn=this.options.selectable;var Y=this._eventPositions(br);var bq=this.focus();bp._updateHoveredItem(Y);if(bp.hoveredItem){var bo=bp.hoveredItem;this.trigger("click",{item:bo,point:Y});if(bn&&bo.options.selectable!==false){var X=bn.multiple!==false;var bm=kendo.support.mobileOS||this._meta(br.event).ctrlKey;if(bo.isSelected){if(bm){this._destroyToolBar();bo.select(false)}else{this._createToolBar(bq)}}else{this._destroyToolBar();this.select(bo,{addToSelection:X&&bm});this._createToolBar(bq)}}}else{if(bn){this._destroyToolBar();this.deselect()}}},_keydown:function(X){if(this.toolService.keyDown(X.keyCode,this._meta(X))){X.preventDefault()}},_wheel:function(bm){var bn=x(bm),Y=this._eventPositions(bm),X=bh(this._meta(bm),{delta:bn});if(this.toolService.wheel(Y,X)){bm.preventDefault()}},_meta:function(X){return{ctrlKey:X.ctrlKey,metaKey:X.metaKey,altKey:X.altKey,shiftKey:X.shiftKey,type:X.type}},_eventPositions:function(bn,bo){var X;if(bn.touch){var bm=bo?"startLocation":"location";X=new k(bn.x[bm],bn.y[bm])}else{var Y=bn.originalEvent;X=new k(Y.pageX,Y.pageY)}return this.documentToModel(X)},_gestureStart:function(bm){this._destroyToolBar();this.scroller.disable();var Y=this.documentToModel(new k(bm.center.x,bm.center.y));var X={point:Y,zoom:this.zoom()};if(this.trigger(T,X)){return}this._gesture=bm;this._initialCenter=Y},_gestureChange:function(bo){var X=this._gesture;var bp=this._initialCenter;var Y=this.documentToView(new k(bo.center.x,bo.center.y));var bq=bo.distance/X.distance;var bs=this._zoom;var bn=false;if(ag.abs(bq-1)>=ba){this._zoom=bs=this._getValidZoom(bs*bq);this.options.zoom=bs;this._gesture=bo;bn=true}var bm=bp.times(bs);var br=Y.minus(bm);if(bn||this._pan.distanceTo(br)>=b){this._panTransform(br);this._updateAdorners()}bo.preventDefault()},_gestureEnd:function(){if(this.options.pannable!==false){this.scroller.enable()}this.trigger(i,{point:this._initialCenter,zoom:this.zoom()})},_resize:function(){var X=this.viewport();if(this.canvas){this.canvas.size(X)}if(this.scrollable&&this.toolBar){this.scrollable.height(X.height)}},_mouseover:function(Y){var X=Y.target._kendoNode;if(X&&X.srcElement._hover){X.srcElement._hover(true,X.srcElement)}},_mouseout:function(Y){var X=Y.target._kendoNode;if(X&&X.srcElement._hover){X.srcElement._hover(false,X.srcElement)}},_initTheme:function(){var bm=this,X=aD.ui.themes||{},bn=((bm.options||{}).theme||"").toLowerCase(),Y=(X[bn]||{}).diagram;bm.options=bh({},Y,bm.options);if(bm.options.editable===true){bh(bm.options,{editable:(Y||{}).editable})}},_createOptionElements:function(){var Y=this.options;var X=Y.shapes.length;if(X){this._createShapes()}if(Y.connections.length){this._createConnections()}if(X&&Y.layout){this.layout(Y.layout)}},_createShapes:function(){var bo=this,bm=bo.options,X=bm.shapes,Y,bn;for(bn=0;bn<X.length;bn++){Y=X[bn];bo.addShape(Y)}},_createConnections:function(){var Y=this,X=Y.options,br=X.connectionDefaults,bn=X.connections,bo,bp,bq,bm;for(bm=0;bm<bn.length;bm++){bo=bn[bm];bp=Y._findConnectionTarget(bo.from);bq=Y._findConnectionTarget(bo.to);Y.connect(bp,bq,bh({},br,bo))}},_findConnectionTarget:function(Y){Y=Y||{};var X=this;var bn=a8(Y)?Y:Y.shapeId||Y.id;var bm;if(bn){bm=X.getShapeById(bn);if(Y.connector){bm=bm.getConnector(Y.connector)}}else{bm=new k(Y.x||0,Y.y||0)}return bm},destroy:function(){var X=this;u.fn.destroy.call(X);if(this._userEvents){this._userEvents.destroy()}kendo.unbindResize(X._resizeHandler);X.clear();X.element.off(a6);X.scroller.wrapper.off(a6);X.canvas.destroy(true);X.canvas=B;X._destroyEditor();X.destroyScroller();X._destroyGlobalToolBar();X._destroyToolBar()},destroyScroller:function(){var X=this.scroller;if(!X){return}X.destroy();X.element.remove();this.scroller=null},save:function(){var bn={shapes:[],connections:[]};var bm,Y,X;for(bm=0;bm<this.shapes.length;bm++){X=this.shapes[bm];if(X.options.serializable){bn.shapes.push(X.options)}}for(bm=0;bm<this.connections.length;bm++){Y=this.connections[bm];bn.connections.push(bh({},Y.options,Y.toJSON()))}return bn},focus:function(){if(!this.element.is(kendo._activeElement())){var bm=this.element,Y=bm[0],bp=[],bn=[],bo=document.documentElement,X;do{Y=Y.parentNode;if(Y.scrollHeight>Y.clientHeight){bp.push(Y);bn.push(Y.scrollTop)}}while(Y!=bo);bm.focus();for(X=0;X<bp.length;X++){bp[X].scrollTop=bn[X]}return true}},load:function(X){this.clear();this.setOptions(X);this._createShapes();this._createConnections()},setOptions:function(X){bh(this.options,X)},clear:function(){var X=this;X.select(false);X.mainLayer.clear();X._shapesQuadTree.clear();X._initialize()},connect:function(bn,bo,bm){var X;if(this.connectionsDataSource&&this._isEditable){var Y=this.connectionsDataSource.add({});X=this._connectionsDataMap[Y.uid];X.source(bn);X.target(bo);X.redraw(bm);X.updateModel()}else{X=new ad(bn,bo,bh({},this.options.connectionDefaults,bm));this.addConnection(X)}return X},connected:function(Y,bm){for(var X=0;X<this.connections.length;X++){var bn=this.connections[X];if(bn.from==Y&&bn.to==bm){return true}}return false},addConnection:function(Y,X){if(X!==false){this.undoRedoService.add(new m.AddConnectionUnit(Y,this),false)}Y.diagram=this;Y._setOptionsFromModel();Y.refresh();this.mainLayer.append(Y.visual);this.connections.push(Y);this.trigger(P,{added:[Y],removed:[]});return Y},_addConnection:function(bm,Y){var X=this.connectionsDataSource;var bn;if(X&&this._isEditable){bn=V(X,aQ(bm.dataItem));bm.dataItem=bn;bm.updateModel();if(!this.trigger("add",{connection:bm})){this._connectionsDataMap[bn.uid]=bm;X.add(bn);this.addConnection(bm,Y);bm._updateConnectors();return bm}}else{if(!this.trigger("add",{connection:bm})){this.addConnection(bm,Y);bm._updateConnectors();return bm}}},addShape:function(bn,X){var Y,bm=this.options.shapeDefaults;if(bn instanceof Q){Y=bn}else{if(!(bn instanceof kendo.Class)){bm=bh({},bm,bn||{});Y=new Q(bm,this)}else{return}}if(X!==false){this.undoRedoService.add(new m.AddShapeUnit(Y,this),false)}this.shapes.push(Y);if(Y.diagram!==this){this._shapesQuadTree.insert(Y);Y.diagram=this}this.mainLayer.append(Y.visual);this.trigger(P,{added:[Y],removed:[]});return Y},_addShape:function(Y,X){var bo=this;var bp=bo.dataSource;var bm;if(bp&&this._isEditable){bm=V(bp,aQ(Y.dataItem));Y.dataItem=bm;Y.updateModel();if(!this.trigger("add",{shape:Y})){this.dataSource.add(bm);var bn=this._inactiveShapeItems.getByUid(bm.uid);bn.element=Y;bn.undoable=X;return Y}}else{if(!this.trigger("add",{shape:Y})){return this.addShape(Y,X)}}},remove:function(bm,Y){bm=e(bm)?bm.slice(0):[bm];var bp=bf(bm);var X=bp.shapes;var bo=bp.connections;var bn;if(!n(Y)){Y=true}if(Y){this.undoRedoService.begin()}this._suspendModelRefresh();for(bn=X.length-1;bn>=0;bn--){this._removeItem(X[bn],Y,bo)}for(bn=bo.length-1;bn>=0;bn--){this._removeItem(bo[bn],Y)}this._resumeModelRefresh();if(Y){this.undoRedoService.commit(false)}this.trigger(P,{added:[],removed:bm})},_removeShapeDataItem:function(X){if(this._isEditable){this.dataSource.remove(X.dataItem);delete this._dataMap[X.dataItem.id]}},_removeConnectionDataItem:function(X){if(this._isEditable){this.connectionsDataSource.remove(X.dataItem);delete this._connectionsDataMap[X.dataItem.uid]}},_triggerRemove:function(Y){var bo=[];var bp,bm,bn;for(var X=0;X<Y.length;X++){bp=Y[X];bn=bp.options.editable;if(bp instanceof Q){bm={shape:bp}}else{bm={connection:bp}}if(bn&&bn.remove!==false&&!this.trigger("remove",bm)){bo.push(bp)}}return bo},undo:function(){this.undoRedoService.undo()},redo:function(){this.undoRedoService.redo()},select:function(bq,Y){if(aL(bq)){Y=bh({addToSelection:false},Y);var bp=Y.addToSelection,X=[],bo=[],bn,bm;if(!bp){this.deselect()}this._internalSelection=true;if(bq instanceof Array){X=bq}else{if(bq instanceof aG){X=[bq]}}for(bn=0;bn<X.length;bn++){bm=X[bn];if(bm.select(true)){bo.push(bm)}}this._selectionChanged(bo,[]);this._internalSelection=false}else{return this._selectedItems}},selectAll:function(){this.select(this.shapes.concat(this.connections))},selectArea:function(bo){var Y,X,bn;this._internalSelection=true;var bm=[];if(bo instanceof L){X=this.shapes.concat(this.connections);for(Y=0;Y<X.length;Y++){bn=X[Y];if((!bo||bn._hitTest(bo))&&bn.options.enable){if(bn.select(true)){bm.push(bn)}}}}this._selectionChanged(bm,[]);this._internalSelection=false},deselect:function(bn){this._internalSelection=true;var bo=[],X=[],bm,Y;if(bn instanceof Array){X=bn}else{if(bn instanceof aG){X.push(bn)}else{if(!aL(bn)){X=this._selectedItems.slice(0)}}}for(Y=0;Y<X.length;Y++){bm=X[Y];if(bm.select(false)){bo.push(bm)}}this._selectionChanged([],bo);this._internalSelection=false},toFront:function(bm,Y){if(!bm){bm=this._selectedItems.slice()}var X=this._getDiagramItems(bm),bo;if(!n(Y)||Y){bo=K(this.mainLayer,X.visuals);var bn=new ap(this,bm,bo);this.undoRedoService.add(bn)}else{this.mainLayer.toFront(X.visuals);this._fixOrdering(X,true)}},toBack:function(bm,Y){if(!bm){bm=this._selectedItems.slice()}var X=this._getDiagramItems(bm),bo;if(!n(Y)||Y){bo=K(this.mainLayer,X.visuals);var bn=new ab(this,bm,bo);this.undoRedoService.add(bn)}else{this.mainLayer.toBack(X.visuals);this._fixOrdering(X,false)}},bringIntoView:function(bq,bm){var X=this.viewport();var bo=new m.RectAlign(X);var br,bp,bn,Y;if(X.width===0||X.height===0){return}bm=bh({animate:false,align:"center middle"},bm);if(bm.align=="none"){bm.align="center middle"}if(bq instanceof aG){bp=bq.bounds(aU)}else{if(e(bq)){bp=this.boundingBox(bq)}else{if(bq instanceof L){bp=bq.clone()}}}bn=bp.clone();bp.zoom(this._zoom);if(bp.width>X.width||bp.height>X.height){this._zoom=this._getValidZoom(ag.min(X.width/bn.width,X.height/bn.height));bp=bn.clone().zoom(this._zoom)}this._zoomMainLayer();br=bp.clone();bo.align(bp,bm.align);Y=bp.topLeft().minus(br.topLeft());this.pan(Y.times(-1),bm.animate)},alignShapes:function(bp){if(al(bp)){bp="Left"}var Y=this.select(),bq,bo,bm;if(Y.length===0){return}switch(bp.toLowerCase()){case"left":case"top":bq=aq;break;case"right":case"bottom":bq=h;break}for(bm=0;bm<Y.length;bm++){bo=Y[bm];if(bo instanceof Q){switch(bp.toLowerCase()){case"left":bq=ag.min(bq,bo.options.x);break;case"top":bq=ag.min(bq,bo.options.y);break;case"right":bq=ag.max(bq,bo.options.x);break;case"bottom":bq=ag.max(bq,bo.options.y);break}}}var br=[];var X=[];for(bm=0;bm<Y.length;bm++){bo=Y[bm];if(bo instanceof Q){X.push(bo);br.push(bo.bounds());switch(bp.toLowerCase()){case"left":case"right":bo.position(new k(bq,bo.options.y));break;case"top":case"bottom":bo.position(new k(bo.options.x,bq));break}}}var bn=new m.TransformUnit(X,br);this.undoRedoService.add(bn,false)},zoom:function(bp,bo){if(bp){var Y=bo?bo.point:new m.Point(0,0);bp=this._zoom=this._getValidZoom(bp);if(!al(Y)){Y=new m.Point(ag.round(Y.x),ag.round(Y.y));var X=Y.times(bp);var bn=this.modelToView(Y);var bm=bn.minus(X);this._storePan(new m.Point(ag.round(bm.x),ag.round(bm.y)))}if(bo){bo.zoom=bp}this._panTransform();this.canvas.surface.hideTooltip();this._updateAdorners()}return this._zoom},_getPan:function(Y){var X=this.canvas;if(!X.translate){Y=Y.plus(this._pan)}return Y},pan:function(bn,Y){if(bn instanceof k){var bm=this;var X=bm.scroller;bn=bm._getPan(bn);bn=bn.times(-1);if(Y){X.animatedScrollTo(bn.x,bn.y,function(){bm._updateAdorners()})}else{X.scrollTo(bn.x,bn.y);bm._updateAdorners()}}else{return this._pan.times(-1)}},viewport:function(){var Y=this.element;var bm=Y.width();var X=Y.height();if(this.toolBar){X-=t(this.toolBar.element)}return new L(0,0,bm,X)},copy:function(){if(this.options.copy.enabled){this._clipboard=[];this._copyOffset=1;for(var X=0;X<this._selectedItems.length;X++){var Y=this._selectedItems[X];this._clipboard.push(Y)}}},cut:function(){if(this.options.copy.enabled){this._clipboard=[];this._copyOffset=0;for(var X=0;X<this._selectedItems.length;X++){var Y=this._selectedItems[X];this._clipboard.push(Y)}this.remove(this._clipboard,true)}},paste:function(){if(this._clipboard.length>0){var bp,Y,bo;var bm={};var bq=bf(this._clipboard);var bn=bq.connections;var X=bq.shapes;var br={x:this._copyOffset*this.options.copy.offsetX,y:this._copyOffset*this.options.copy.offsetY};this.deselect();for(bo=0;bo<X.length;bo++){bp=X[bo];Y=bp.clone();bm[bp.id]=Y;Y.position(new k(bp.options.x+br.x,bp.options.y+br.y));Y.diagram=this;Y=this._addShape(Y);if(Y){Y.select()}}for(bo=0;bo<bn.length;bo++){bp=bn[bo];Y=this._addConnection(bp.clone());if(Y){this._updateCopiedConnection(Y,bp,"source",bm,br);this._updateCopiedConnection(Y,bp,"target",bm,br);Y.select(true);Y.updateModel()}}this._syncChanges();this._copyOffset+=1}},_updateCopiedConnection:function(Y,bq,bt,X,bp){var bn,bs,bm;var br=bq[bt]();var bo=this;if(br instanceof g&&X[br.shape.id]){bm=X[br.shape.id];if(bo.getShapeById(bm.id)){Y[bt](bm.getConnector(br.options.name))}else{bs=bo._inactiveShapeItems.getByUid(bm.dataItem.uid);if(bs){bn=function(bu){bm=bo._dataMap[bu.id];Y[bt](bm.getConnector(br.options.name));Y.updateModel()};bo._deferredConnectionUpdates.push(bs.onActivate(bn))}}}else{Y[bt](new k(bq[bt+"Point"]().x+bp.x,bq[bt+"Point"]().y+bp.y))}},boundingBox:function(bm,Y){var bq=L.empty(),X,bp=aL(bm)?this._getDiagramItems(bm):{shapes:this.shapes};if(bp.shapes.length>0){var bo=bp.shapes[0];bq=bo.bounds(af);for(var bn=1;bn<bp.shapes.length;bn++){bo=bp.shapes[bn];X=bo.bounds(af);if(Y===true){X.x-=bo._rotationOffset.x;X.y-=bo._rotationOffset.y}bq=bq.union(X)}}return bq},_containerOffset:function(){var X=this.element.offset();if(this.toolBar){X.top+=t(this.toolBar.element)}return X},documentToView:function(X){var Y=this._containerOffset();return new k(X.x-Y.left,X.y-Y.top)},viewToDocument:function(X){var Y=this._containerOffset();return new k(X.x+Y.left,X.y+Y.top)},viewToModel:function(X){return this._transformWithMatrix(X,this._matrixInvert)},modelToView:function(X){return this._transformWithMatrix(X,this._matrix)},modelToLayer:function(X){return this._transformWithMatrix(X,this._layerMatrix)},layerToModel:function(X){return this._transformWithMatrix(X,this._layerMatrixInvert)},documentToModel:function(Y){var X=this.documentToView(Y);if(!this.canvas.translate){X.x=X.x+this.scroller.scrollLeft;X.y=X.y+this.scroller.scrollTop}return this.viewToModel(X)},modelToDocument:function(X){return this.viewToDocument(this.modelToView(X))},_transformWithMatrix:function(Y,bn){var X=Y;if(Y instanceof k){if(bn){X=bn.apply(Y)}}else{var bm=this._transformWithMatrix(Y.topLeft(),bn),bo=this._transformWithMatrix(Y.bottomRight(),bn);X=L.fromPoints(bm,bo)}return X},setDataSource:function(X){this.options.dataSource=X;this._dataSource();if(this.options.autoBind){this.dataSource.fetch()}},setConnectionsDataSource:function(X){this.options.connectionsDataSource=X;this._connectionDataSource();if(this.options.autoBind){this.connectionsDataSource.fetch()}},layout:function(bm){this._layouting=true;var bn;if(al(bm)){bm=this.options.layout}if(al(bm)||al(bm.type)){bn="Tree"}else{bn=bm.type}var Y;switch(bn.toLowerCase()){case"tree":Y=new m.TreeLayout(this);break;case"layered":Y=new m.LayeredLayout(this);break;case"forcedirected":case"force":case"spring":case"springembedder":Y=new m.SpringLayout(this);break;default:throw"Layout algorithm '"+bn+"' is not supported."}var X=new m.LayoutState(this);var bp=Y.layout(bm);if(bp){var bo=new m.LayoutUndoUnit(X,bp,bm?bm.animate:null);this.undoRedoService.add(bo)}this._layouting=false;this._redrawConnections()},getShapeById:function(Y){var X;X=aC.first(this.shapes,function(bm){return bm.visual.id===Y});if(X){return X}X=aC.first(this.connections,function(bm){return bm.visual.id===Y});return X},getShapeByModelId:function(Y){var X;if(this._isEditable){X=this._dataMap[Y]}else{X=aC.first(this.shapes,function(bm){return(bm.dataItem||{}).id===Y})}return X},getShapeByModelUid:function(Y){var X;if(this._isEditable){X=aC.first(this.shapes,function(bm){return(bm.dataItem||{}).uid===Y})}else{X=this._dataMap[Y]}return X},getConnectionByModelId:function(Y){var X;if(this.connectionsDataSource){X=aC.first(this.connections,function(bm){return(bm.dataItem||{}).id===Y})}return X},getConnectionByModelUid:function(Y){var X;if(this.connectionsDataSource){X=this._connectionsDataMap[Y]}return X},_extendLayoutOptions:function(X){if(X.layout){X.layout=bh({},m.LayoutBase.fn.defaultOptions||{},X.layout)}},_selectionChanged:function(X,Y){if(X.length||Y.length){this.trigger(ae,{selected:X,deselected:Y})}},_getValidZoom:function(X){return ag.min(ag.max(X,this.options.zoomMin),this.options.zoomMax)},_panTransform:function(bm){var X=this,Y=bm||X._pan;if(X.canvas.translate){X.scroller.scrollTo(Y.x,Y.y);X._zoomMainLayer()}else{X._storePan(Y);X._transformMainLayer()}},_finishPan:function(){this.trigger(au,{total:this._pan,delta:Number.NaN})},_storePan:function(X){this._pan=X;this._storeViewMatrix()},_zoomMainLayer:function(){var Y=this._zoom;var X=new c(0,0,Y,Y);X.render(this.mainLayer);this._storeLayerMatrix(X);this._storeViewMatrix()},_transformMainLayer:function(){var bm=this._pan,Y=this._zoom;var X=new c(bm.x,bm.y,Y,Y);X.render(this.mainLayer);this._storeLayerMatrix(X);this._storeViewMatrix()},_storeLayerMatrix:function(X){this._layerMatrix=X.toMatrix();this._layerMatrixInvert=X.invert().toMatrix()},_storeViewMatrix:function(){var bm=this._pan,Y=this._zoom;var X=new c(bm.x,bm.y,Y,Y);this._matrix=X.toMatrix();this._matrixInvert=X.invert().toMatrix()},_toIndex:function(Y,bm){var X=this._getDiagramItems(Y);this.mainLayer.toIndex(X.visuals,bm);this._fixOrdering(X,false)},_fixOrdering:function(Y,X){var bm=X?this.shapes.length-1:0,bn=X?this.connections.length-1:0,bo,bp;for(bo=0;bo<Y.shapes.length;bo++){bp=Y.shapes[bo];aC.remove(this.shapes,bp);aC.insert(this.shapes,bp,bm)}for(bo=0;bo<Y.cons.length;bo++){bp=Y.cons[bo];aC.remove(this.connections,bp);aC.insert(this.connections,bp,bn)}},_getDiagramItems:function(Y){var bn,X={},bm=Y;X.visuals=[];X.shapes=[];X.cons=[];if(!Y){bm=this._selectedItems.slice()}else{if(!e(Y)){bm=[Y]}}for(bn=0;bn<bm.length;bn++){var bo=bm[bn];if(bo instanceof Q){X.shapes.push(bo);X.visuals.push(bo.visual)}else{if(bo instanceof ad){X.cons.push(bo);X.visuals.push(bo.visual)}}}return X},_removeItem:function(bm,Y,X){bm.select(false);if(bm instanceof Q){this._removeShapeDataItem(bm);this._removeShape(bm,Y,X)}else{if(bm instanceof ad){this._removeConnectionDataItem(bm);this._removeConnection(bm,Y)}}this.mainLayer.remove(bm.visual)},_removeShape:function(br,bs,bn){var bp,Y,bm,X=[],bq=[];this.toolService._removeHover();if(bs){this.undoRedoService.addCompositeItem(new av(br))}aC.remove(this.shapes,br);this._shapesQuadTree.remove(br);for(bp=0;bp<br.connectors.length;bp++){bm=br.connectors[bp];for(var bo=0;bo<bm.connections.length;bo++){Y=bm.connections[bo];if(!bn||!aD.inArray(Y,bn)){if(Y.sourceConnector==bm){X.push(Y)}else{if(Y.targetConnector==bm){bq.push(Y)}}}}}for(bp=0;bp<X.length;bp++){X[bp].source(null,bs);X[bp].updateModel()}for(bp=0;bp<bq.length;bp++){bq[bp].target(null,bs);bq[bp].updateModel()}},_removeConnection:function(Y,X){if(Y.sourceConnector){aC.remove(Y.sourceConnector.connections,Y)}if(Y.targetConnector){aC.remove(Y.targetConnector.connections,Y)}if(X){this.undoRedoService.addCompositeItem(new be(Y))}aC.remove(this.connections,Y)},_removeDataItems:function(bm,bn){var bp,bo,Y,X;bm=e(bm)?bm:[bm];while(bm.length){bp=bm.shift();Y=this._dataMap[bp.uid];if(Y){this._removeShapeConnections(Y);this._removeItem(Y,false);delete this._dataMap[bp.uid];if(bn&&bp.hasChildren&&bp.loaded()){bo=bp.children.data();for(X=0;X<bo.length;X++){bm.push(bo[X])}}}}},_removeShapeConnections:function(Y){var bm=Y.connections();var X;if(bm){for(X=0;X<bm.length;X++){this._removeItem(bm[X],false)}}},_addDataItem:function(bn,X){if(!n(bn)){return}var Y=this._dataMap[bn.id];if(Y){return Y}var bm=bh({},this.options.shapeDefaults);bm.dataItem=bn;Y=new Q(bm,this);this.addShape(Y,X!==false);this._dataMap[bn.id]=Y;return Y},_addDataItemByUid:function(bm){if(!n(bm)){return}var X=this._dataMap[bm.uid];if(X){return X}var Y=bh({},this.options.shapeDefaults);Y.dataItem=bm;X=new Q(Y,this);this.addShape(X);this._dataMap[bm.uid]=X;return X},_addDataItems:function(bo,bp){var bq,X,bn,bm,Y;for(X=0;X<bo.length;X++){bq=bo[X];bn=this._addDataItemByUid(bq);bm=this._addDataItemByUid(bp);if(bm&&!this.connected(bm,bn)){Y=this.connect(bm,bn)}}},_refreshSource:function(br){var bp=this,bo=br.node,bq=br.action,Y=br.items,bm=bp.options,X,bn;if(br.field){for(X=0;X<Y.length;X++){if(this._dataMap[Y[X].uid]){this._dataMap[Y[X].uid].redrawVisual()}}return}if(bq=="remove"){this._removeDataItems(br.items,true)}else{if((!bq||bq==="itemloaded")&&!this._bindingRoots){this._bindingRoots=true;bn=true}if(!bq&&!bo){bp.clear()}this._addDataItems(Y,bo);for(X=0;X<Y.length;X++){Y[X].load()}}if(bm.layout&&(bn||bq=="remove"||bq=="add")){bp.layout(bm.layout)}if(bn){this.trigger("dataBound");this._bindingRoots=false}},_addItem:function(X){if(X instanceof Q){this.addShape(X)}else{if(X instanceof ad){this.addConnection(X)}}},_createToolBar:function(bs){var Y=this.toolService.diagram;if(!this.singleToolBar&&Y.select().length===1){var bm=Y.select()[0];if(bm&&bm.options.editable!==false){var X=bm.options.editable;var bo=X.tools;if(this._isEditable&&bo.length===0){if(bm instanceof Q){bo=["edit","rotateClockwise","rotateAnticlockwise"]}else{if(bm instanceof ad){bo=["edit"]}}if(X&&X.remove!==false){bo.push("delete")}}if(bo&&bo.length){var bq=20;var bt;this.singleToolBar=new aS(Y,{tools:bo,click:G(this._toolBarClick,this),modal:true});var br=N(this.singleToolBar._popup.element);var bp=t(this.singleToolBar._popup.element);if(bm instanceof Q){var bn=this.modelToView(bm.bounds(af));bt=new k(bn.x,bn.y).minus(new k((br-bn.width)/2,bp+bq))}else{if(bm instanceof ad){var bu=this.modelToView(bm.bounds());bt=new k(bu.x,bu.y).minus(new k((br-bu.width-20)/2,bp+bq))}}if(bt){if(!this.canvas.translate){bt=bt.minus(new k(this.scroller.scrollLeft,this.scroller.scrollTop))}bt=this.viewToDocument(bt);bt=new k(ag.max(bt.x,0),ag.max(bt.y,0));this.singleToolBar.showAt(bt);if(bs){this.singleToolBar._popup.one("close",F)}}else{this._destroyToolBar()}}}}},_toolBarClick:function(X){this.trigger("toolBarClick",X);this._destroyToolBar()},_normalizePointZoom:function(X){return X.times(1/this.zoom())},_initialize:function(){this.shapes=[];this._selectedItems=[];this.connections=[];this._dataMap={};this._connectionsDataMap={};this._inactiveShapeItems=new R();this._deferredConnectionUpdates=[];this.undoRedoService=new bg({undone:this._syncHandler,redone:this._syncHandler});this.id=m.randomId()},_fetchFreshData:function(){var X=this;X._dataSource();if(X._isEditable){X._connectionDataSource()}if(X.options.autoBind){if(X._isEditable){this._loadingShapes=true;this._loadingConnections=true;X.dataSource.fetch();X.connectionsDataSource.fetch()}else{X.dataSource.fetch()}}},_dataSource:function(){if(n(this.options.connectionsDataSource)){this._isEditable=true;var Y=this.options.dataSource||{};var X=e(Y)?{data:Y}:Y;if(this.dataSource&&this._shapesRefreshHandler){this.dataSource.unbind("change",this._shapesRefreshHandler).unbind("requestStart",this._shapesRequestStartHandler).unbind("error",this._shapesErrorHandler)}else{this._shapesRefreshHandler=G(this._refreshShapes,this);this._shapesRequestStartHandler=G(this._shapesRequestStart,this);this._shapesErrorHandler=G(this._error,this)}this.dataSource=kendo.data.DataSource.create(X).bind("change",this._shapesRefreshHandler).bind("requestStart",this._shapesRequestStartHandler).bind("error",this._shapesErrorHandler)}else{this._treeDataSource();this._isEditable=false}},_connectionDataSource:function(){var Y=this.options.connectionsDataSource;if(Y){var X=e(Y)?{data:Y}:Y;if(this.connectionsDataSource&&this._connectionsRefreshHandler){this.connectionsDataSource.unbind("change",this._connectionsRefreshHandler).unbind("requestStart",this._connectionsRequestStartHandler).unbind("error",this._connectionsErrorHandler)}else{this._connectionsRefreshHandler=G(this._refreshConnections,this);this._connectionsRequestStartHandler=G(this._connectionsRequestStart,this);this._connectionsErrorHandler=G(this._connectionsError,this)}this.connectionsDataSource=kendo.data.DataSource.create(X).bind("change",this._connectionsRefreshHandler).bind("requestStart",this._connectionsRequestStartHandler).bind("error",this._connectionsErrorHandler)}},_shapesRequestStart:function(X){if(X.type=="read"){this._loadingShapes=true}},_connectionsRequestStart:function(X){if(X.type=="read"){this._loadingConnections=true}},_error:function(){this._loadingShapes=false},_connectionsError:function(){this._loadingConnections=false},_refreshShapes:function(X){if(X.action==="remove"){if(this._shouldRefresh()){this._removeShapes(X.items)}}else{if(X.action==="itemchange"){if(this._shouldRefresh()){this._updateShapes(X.items,X.field)}}else{if(X.action==="add"){this._inactiveShapeItems.add(X.items)}else{if(X.action==="sync"){this._syncShapes(X.items)}else{this.refresh()}}}}},_shouldRefresh:function(){return !this._suspended},_suspendModelRefresh:function(){this._suspended=(this._suspended||0)+1},_resumeModelRefresh:function(){this._suspended=ag.max((this._suspended||0)-1,0)},refresh:function(){this._loadingShapes=false;if(!this._loadingConnections){this._rebindShapesAndConnections()}},_rebindShapesAndConnections:function(){this.clear();this._addShapes(this.dataSource.view());if(this.connectionsDataSource){this._addConnections(this.connectionsDataSource.view(),false)}if(this.options.layout){this.layout(this.options.layout)}else{this._redrawConnections()}this.trigger("dataBound")},refreshConnections:function(){this._loadingConnections=false;if(!this._loadingShapes){this._rebindShapesAndConnections()}},_redrawConnections:function(){var Y=this.connections;for(var X=0;X<Y.length;X++){Y[X].refresh()}},_removeShapes:function(Y){var X=this._dataMap;var bn,bm;for(bm=0;bm<Y.length;bm++){bn=Y[bm];if(X[bn.id]){this.remove(X[bn.id],false);X[bn.id]=null}}},_syncShapes:function(){var Y=this;var X=Y._inactiveShapeItems;X.forEach(function(bo){var bn=bo.dataItem;var bm=bo.element;if(!bn.isNew()){if(bm){bm._setOptionsFromModel();Y.addShape(bm,bo.undoable);Y._dataMap[bn.id]=bm}else{Y._addDataItem(bn)}bo.activate();X.remove(bn)}})},_updateShapes:function(Y,bo){for(var bn=0;bn<Y.length;bn++){var bm=Y[bn];var X=this._dataMap[bm.id];if(X){X.updateOptionsFromModel(bm,bo)}}},_addShapes:function(X){for(var Y=0;Y<X.length;Y++){this._addDataItem(X[Y],false)}},_refreshConnections:function(X){if(X.action==="remove"){if(this._shouldRefresh()){this._removeConnections(X.items)}}else{if(X.action==="add"){this._addConnections(X.items)}else{if(X.action==="sync"){}else{if(X.action==="itemchange"){if(this._shouldRefresh()){this._updateConnections(X.items)}}else{this.refreshConnections()}}}}},_removeConnections:function(X){for(var Y=0;Y<X.length;Y++){this.remove(this._connectionsDataMap[X[Y].uid],false);this._connectionsDataMap[X[Y].uid]=null}},_updateConnections:function(Y){for(var bn=0;bn<Y.length;bn++){var bm=Y[bn];var X=this._connectionsDataMap[bm.uid];X.updateOptionsFromModel(bm)}},_addConnections:function(bn,X){var bo=bn.length;for(var bm=0;bm<bo;bm++){var Y=bn[bm];this._addConnectionDataItem(Y,X)}},_addConnectionDataItem:function(bn,X){if(!this._connectionsDataMap[bn.uid]){var bp=this._validateConnector(bn.from);if(!n(bp)||bp===null){bp=new k(bn.fromX,bn.fromY)}var bo=this._validateConnector(bn.to);if(!n(bo)||bo===null){bo=new k(bn.toX,bn.toY)}if(n(bp)&&n(bo)){var bm=bh({},this.options.connectionDefaults);bm.dataItem=bn;var Y=new ad(bp,bo,bm);this._connectionsDataMap[bn.uid]=Y;this.addConnection(Y,X)}}},_validateConnector:function(Y){var X;if(n(Y)&&Y!==null){X=this._dataMap[Y]}return X},_treeDataSource:function(){var Y=this,X=Y.options,bm=X.dataSource;bm=e(bm)?{data:bm}:bm;if(bm instanceof kendo.data.DataSource&&!(bm instanceof kendo.data.HierarchicalDataSource)){throw new Error("Incorrect DataSource type. If a single dataSource instance is set to the diagram then it should be a HierarchicalDataSource. You should set only the options instead of an instance or a HierarchicalDataSource instance or supply connectionsDataSource as well.")}if(!bm.fields){bm.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]}if(Y.dataSource&&Y._refreshHandler){Y._unbindDataSource()}Y._refreshHandler=G(Y._refreshSource,Y);Y._errorHandler=G(Y._error,Y);Y.dataSource=aj.create(bm).bind(P,Y._refreshHandler).bind(O,Y._errorHandler)},_unbindDataSource:function(){var X=this;X.dataSource.unbind(P,X._refreshHandler).unbind(O,X._errorHandler)},_adorn:function(X,Y){if(Y!==B&&X){if(Y){this._adorners.push(X);this.adornerLayer.append(X.visual)}else{aC.remove(this._adorners,X);this.adornerLayer.remove(X.visual)}}},_showConnectors:function(X,Y){if(Y){this._connectorsAdorner.show(X)}else{this._connectorsAdorner.destroy()}},_updateAdorners:function(){var X=this._adorners;for(var bm=0;bm<X.length;bm++){var Y=X[bm];if(Y.refreshBounds){Y.refreshBounds()}Y.refresh()}},_refresh:function(){for(var X=0;X<this.connections.length;X++){this.connections[X].refresh()}},_destroyToolBar:function(){if(this.singleToolBar){this.singleToolBar.hide();this.singleToolBar.destroy();this.singleToolBar=null}},_destroyGlobalToolBar:function(){if(this.toolBar){this.toolBar.hide();this.toolBar.destroy();this.toolBar=null}},exportDOMVisual:function(){var bq=this.canvas._viewBox;var bn=bc.transform().translate(-bq.x,-bq.y);var Y=new bc.Rect([0,0],[bq.width,bq.height]);var bp=aM.Path.fromRect(Y);var bo=new aM.Group({transform:bn});var bm=new aM.Group({clip:bp});var X=this.canvas.drawingElement.children[0];bm.append(bo);bo.children.push(X);return bm},exportVisual:function(){var bm=bc.transform().scale(1/this._zoom);var Y=new aM.Group({transform:bm});var X=this.mainLayer.drawingElement;Y.children.push(X);return Y},_syncChanges:function(){this._syncShapeChanges();this._syncConnectionChanges()},_syncShapeChanges:function(){if(this.dataSource&&this._isEditable){this.dataSource.sync()}},_syncConnectionChanges:function(){var X=this;if(X.connectionsDataSource&&X._isEditable){aZ.when.apply(aZ,X._deferredConnectionUpdates).then(function(){X.connectionsDataSource.sync()});X.deferredConnectionUpdates=[]}}});aD.ExportMixin.extend(aV.fn,true);if(kendo.PDFMixin){kendo.PDFMixin.extend(aV.fn)}function ao(Y){var X={};Y=Y||{};if(n(Y.text)&&Y.text!==null){X.text=Y.text}if(n(Y.x)&&Y.x!==null){X.x=Y.x}if(n(Y.y)&&Y.y!==null){X.y=Y.y}if(n(Y.width)&&Y.width!==null){X.width=Y.width}if(n(Y.height)&&Y.height!==null){X.height=Y.height}if(n(Y.type)&&Y.type!==null){X.type=Y.type}return X}function w(Y){var X={};Y=Y||{};if(n(Y.text)&&Y.text!==null){X.content=Y.text}if(n(Y.type)&&Y.type!==null){X.type=Y.type}if(n(Y.from)&&Y.from!==null){X.from=Y.from}if(n(Y.fromConnector)&&Y.fromConnector!==null){X.fromConnector=Y.fromConnector}if(n(Y.fromX)&&Y.fromX!==null){X.fromX=Y.fromX}if(n(Y.fromY)&&Y.fromY!==null){X.fromY=Y.fromY}if(n(Y.to)&&Y.to!==null){X.to=Y.to}if(n(Y.toConnector)&&Y.toConnector!==null){X.toConnector=Y.toConnector}if(n(Y.toX)&&Y.toX!==null){X.toX=Y.toX}if(n(Y.toY)&&Y.toY!==null){X.toY=Y.toY}return X}var aS=kendo.Observable.extend({init:function(Y,X){kendo.Observable.fn.init.call(this);this.diagram=Y;this.options=bh({},this.options,X);this._tools=[];this.createToolBar();this.createTools();this.appendTools();if(this.options.modal){this.createPopup()}this.bind(this.events,X)},events:["click"],createPopup:function(){this.container=aZ("<div/>").append(this.element);this._popup=this.container.kendoPopup({}).getKendoPopup()},appendTools:function(){for(var Y=0;Y<this._tools.length;Y++){var X=this._tools[Y];if(X.buttons&&X.buttons.length||!n(X.buttons)){this._toolBar.add(X)}}},createToolBar:function(){this.element=aZ("<div/>");this._toolBar=this.element.kendoToolBar({click:G(this.click,this),resizable:false}).getKendoToolBar();this.element.css("border","none")},createTools:function(){for(var X=0;X<this.options.tools.length;X++){this.createTool(this.options.tools[X])}},createTool:function(X){if(!M(X)){X={name:X}}var Y=X.name+"Tool";if(this[Y]){this[Y](X)}else{this._tools.push(bh({},X,{attributes:this._setAttributes({action:X.name})}))}},showAt:function(X){if(this._popup){this._popup.open(X.x,X.y)}},hide:function(){if(this._popup){this._popup.close()}},newGroup:function(){return{type:"buttonGroup",buttons:[]}},editTool:function(){this._tools.push({icon:"edit",showText:"overflow",type:"button",text:"Edit",attributes:this._setAttributes({action:"edit"})})},deleteTool:function(){this._tools.push({icon:"close",showText:"overflow",type:"button",text:"Delete",attributes:this._setAttributes({action:"delete"})})},rotateAnticlockwiseTool:function(X){this._appendGroup("rotate");this._rotateGroup.buttons.push({icon:"rotate-left",showText:"overflow",text:"RotateAnticlockwise",group:"rotate",attributes:this._setAttributes({action:"rotateAnticlockwise",step:X.step})})},rotateClockwiseTool:function(X){this._appendGroup("rotate");this._rotateGroup.buttons.push({icon:"rotate-right",attributes:this._setAttributes({action:"rotateClockwise",step:X.step}),showText:"overflow",text:"RotateClockwise",group:"rotate"})},createShapeTool:function(){this._appendGroup("create");this._createGroup.buttons.push({icon:"shape",showText:"overflow",text:"CreateShape",group:"create",attributes:this._setAttributes({action:"createShape"})})},createConnectionTool:function(){this._appendGroup("create");this._createGroup.buttons.push({icon:"connector",showText:"overflow",text:"CreateConnection",group:"create",attributes:this._setAttributes({action:"createConnection"})})},undoTool:function(){this._appendGroup("history");this._historyGroup.buttons.push({icon:"undo",showText:"overflow",text:"Undo",group:"history",attributes:this._setAttributes({action:"undo"})})},redoTool:function(){this._appendGroup("history");this._historyGroup.buttons.push({icon:"redo",showText:"overflow",text:"Redo",group:"history",attributes:this._setAttributes({action:"redo"})})},_appendGroup:function(X){var Y="_"+X+"Group";if(!this[Y]){this[Y]=this.newGroup();this._tools.push(this[Y])}},_setAttributes:function(Y){var X={};if(Y.action){X[kendo.attr("action")]=Y.action}if(Y.step){X[kendo.attr("step")]=Y.step}return X},_getAttributes:function(Y){var X={};var bn=Y.attr(kendo.attr("action"));if(bn){X.action=bn}var bm=Y.attr(kendo.attr("step"));if(bm){X.step=bm}return X},click:function(bm){var X=this._getAttributes(aZ(bm.target));var Y=X.action;if(Y&&this[Y]){this[Y](X)}this.trigger("click",this.eventData(Y,bm.target))},eventData:function(bq,br){var bp=this.selectedElements(),bo=bp.length,Y=[],bn=[],bm;for(var X=0;X<bo;X++){bm=bp[X];if(bm instanceof Q){Y.push(bm)}else{bn.push(bm)}}return{shapes:Y,connections:bn,action:bq,target:br}},"delete":function(){var X=this.diagram;var Y=X._triggerRemove(this.selectedElements());if(Y.length){this.diagram.remove(Y,true);this.diagram._syncChanges()}},edit:function(){var X=this.selectedElements();if(X.length===1){this.diagram.edit(X[0])}},rotateClockwise:function(X){var Y=parseFloat(X.step||90);this._rotate(Y)},rotateAnticlockwise:function(X){var Y=parseFloat(X.step||90);this._rotate(-Y)},_rotate:function(Y){var X=this.diagram._resizingAdorner;X.angle(X.angle()+Y);X.rotate()},selectedElements:function(){return this.diagram.select()},createShape:function(){this.diagram.createShape()},createConnection:function(){this.diagram.createConnection()},undo:function(){this.diagram.undo()},redo:function(){this.diagram.redo()},destroy:function(){this.diagram=null;this.element=null;this.options=null;if(this._toolBar){this._toolBar.destroy()}if(this._popup){this._popup.destroy()}}});var an=kendo.Observable.extend({init:function(Y,X){kendo.Observable.fn.init.call(this);this.options=aH(true,{},this.options,X);this.element=Y;this.model=this.options.model;this.fields=this._getFields();this._initContainer();this.createEditable()},options:{editors:{}},_initContainer:function(){this.wrapper=this.element},createEditable:function(){var X=this.options;this.editable=new kendo.ui.Editable(this.wrapper,{fields:this.fields,target:X.target,clearContainer:false,model:this.model})},_isEditable:function(X){return this.model.editable&&this.model.editable(X)},_getFields:function(){var Y=[];var bm=this.model.fields;for(var bo in bm){var X={};if(this._isEditable(bo)){var bn=this.options.editors[bo];if(bn){X.editor=bn}X.field=bo;Y.push(X)}}return Y},end:function(){return this.editable.end()},destroy:function(){this.editable.destroy();this.editable.element.find("["+kendo.attr("container-for")+"]").empty();this.model=this.wrapper=this.element=this.columns=this.editable=null}});var a3=an.extend({init:function(Y,X){an.fn.init.call(this,Y,X);this.bind(this.events,this.options);this.open()},events:["update","cancel"],options:{window:{modal:true,resizable:false,draggable:true,title:"Edit",visible:false}},_initContainer:function(){var X=this;this.wrapper=aZ('<div class="k-popup-edit-form"/>').attr(kendo.attr("uid"),this.model.uid);var Y="";if(this.options.template){Y+=this._renderTemplate();this.fields=[]}else{Y+=this._renderFields()}Y+=this._renderButtons();this.wrapper.append(aZ('<div class="k-edit-form-container"/>').append(Y));this.window=new kendo.ui.Window(this.wrapper.appendTo(this.element),this.options.window);this.window.bind("close",function(bm){if(bm.userTriggered){bm.sender.element.focus();X._cancelClick(bm)}});this._attachButtonEvents()},_renderTemplate:function(){var X=this.options.template;if(typeof X==="string"){X=window.unescape(X)}X=kendo.template(X)(this.model);return X},_renderFields:function(){var Y="";for(var X=0;X<this.fields.length;X++){var bm=this.fields[X];Y+='<div class="k-edit-label"><label for="'+bm.field+'">'+(bm.field||"")+"</label></div>";if(this._isEditable(bm.field)){Y+="<div "+kendo.attr("container-for")+'="'+bm.field+'" class="k-edit-field"></div>'}}return Y},_renderButtons:function(){var X='<div class="k-edit-buttons k-state-default">';X+=this._createButton("update");X+=this._createButton("cancel");X+="</div>";return X},_createButton:function(X){return kendo.template(C)(f[X])},_attachButtonEvents:function(){this._cancelClickHandler=G(this._cancelClick,this);this.window.element.on(aY+a6,"a.k-diagram-cancel",this._cancelClickHandler);this._updateClickHandler=G(this._updateClick,this);this.window.element.on(aY+a6,"a.k-diagram-update",this._updateClickHandler)},_updateClick:function(X){X.preventDefault();this.trigger("update")},_cancelClick:function(X){X.preventDefault();this.trigger("cancel")},open:function(){this.window.center().open()},close:function(){this.window.bind("deactivate",G(this.destroy,this)).close()},destroy:function(){this.window.close().destroy();this.window.element.off(aY+a6,"a.k-diagram-cancel",this._cancelClickHandler);this.window.element.off(aY+a6,"a.k-diagram-update",this._updateClickHandler);this._cancelClickHandler=null;this._editUpdateClickHandler=null;this.window=null;an.fn.destroy.call(this)}});function l(Y,bn){var bm=this.dataSource.reader.model;if(bm){var X=bm.fn.fields.text?"text":bm.idField;aZ("<input name='"+bn.field+"' />").appendTo(Y).kendoDropDownList({dataValueField:bm.idField,dataTextField:X,dataSource:this.dataSource.data().toJSON(),optionLabel:" ",valuePrimitive:true})}}function aI(X){this.dataItem=X;this.callbacks=[]}aI.fn=aI.prototype={onActivate:function(Y){var X=aZ.Deferred();this.callbacks.push({callback:Y,deferred:X});return X},activate:function(){var bm=this.callbacks;var Y;for(var X=0;X<bm.length;X++){Y=this.callbacks[X];Y.callback(this.dataItem);Y.deferred.resolve()}this.callbacks=[]}};function R(){this.items={}}R.fn=R.prototype={add:function(Y){for(var X=0;X<Y.length;X++){this.items[Y[X].uid]=new aI(Y[X])}},forEach:function(Y){for(var X in this.items){Y(this.items[X])}},getByUid:function(X){return this.items[X]},remove:function(X){delete this.items[X.uid]}};var z=a5.extend({init:function(){this.shapes=[]},_add:function(X,Y){this.shapes.push({bounds:Y,shape:X});X._quadNode=this},insert:function(X,Y){this._add(X,Y)},remove:function(bm){var Y=this.shapes;var bn=Y.length;for(var X=0;X<bn;X++){if(Y[X].shape===bm){Y.splice(X,1);break}}},hitTestRect:function(bo,Y){var X=this.shapes;var bn=X.length;for(var bm=0;bm<bn;bm++){if(this._testRect(X[bm].shape,bo)&&!aD.inArray(X[bm].shape,Y)){return true}}},_testRect:function(X,bm){var bo=X.rotate().angle;var Y=X.bounds();var bn;if(!bo){bn=Y.overlaps(bm)}else{bn=D.rects(bm,Y,-bo)}return bn}});var bl=z.extend({init:function(X){z.fn.init.call(this);this.children=[];this.rect=X},inBounds:function(bn){var Y=this.rect;var bo=Y.bottomRight();var bm=bn.bottomRight();var X=Y.x<=bn.x&&Y.y<=bn.y&&bm.x<=bo.x&&bm.y<=bo.y;return X},overlapsBounds:function(X){return this.rect.overlaps(X)},insert:function(Y,bp){var bn=false;var bm=this.children;var bo=bm.length;if(this.inBounds(bp)){if(!bo&&this.shapes.length<4){this._add(Y,bp)}else{if(!bo){this._initChildren()}for(var X=0;X<bm.length;X++){if(bm[X].insert(Y,bp)){bn=true;break}}if(!bn){this._add(Y,bp)}}bn=true}return bn},_initChildren:function(){var bq=this.rect,bp=this.children,bm=this.shapes,Y=bq.center(),br=bq.width/2,X=bq.height/2,bn,bo;bp.push(new bl(new L(bq.x,bq.y,br,X)),new bl(new L(Y.x,bq.y,br,X)),new bl(new L(bq.x,Y.y,br,X)),new bl(new L(Y.x,Y.y,br,X)));for(bo=bm.length-1;bo>=0;bo--){for(bn=0;bn<bp.length;bn++){if(bp[bn].insert(bm[bo].shape,bm[bo].bounds)){bm.splice(bo,1);break}}}},hitTestRect:function(bo,Y){var X;var bm=this.children;var bn=bm.length;var bp=false;if(this.overlapsBounds(bo)){if(z.fn.hitTestRect.call(this,bo,Y)){bp=true}else{for(X=0;X<bn;X++){if(bm[X].hitTestRect(bo,Y)){bp=true;break}}}}return bp}});var bk=a5.extend({ROOT_SIZE:1000,init:function(X){var Y=G(this._boundsChange,this);X.bind(p,Y);X.bind(ar,Y);this.initRoots()},initRoots:function(){this.rootMap={};this.root=new z()},clear:function(){this.initRoots()},_boundsChange:function(X){if(X.item._quadNode){X.item._quadNode.remove(X.item)}this.insert(X.item)},insert:function(bm){var bn=bm.bounds(af);var Y=this.ROOT_SIZE;var bo=this.getSectors(bn);var X=bo[0][0];var bp=bo[1][0];if(this.inRoot(bo)){this.root.insert(bm,bn)}else{if(!this.rootMap[X]){this.rootMap[X]={}}if(!this.rootMap[X][bp]){this.rootMap[X][bp]=new bl(new L(X*Y,bp*Y,Y,Y))}this.rootMap[X][bp].insert(bm,bn)}},remove:function(X){if(X._quadNode){X._quadNode.remove(X)}},inRoot:function(X){return X[0].length>1||X[1].length>1},getSectors:function(bp){var Y=this.ROOT_SIZE;var bo=bp.bottomRight();var bn=ag.floor(bo.x/Y);var bm=ag.floor(bo.y/Y);var bq=[[],[]];for(var X=ag.floor(bp.x/Y);X<=bn;X++){bq[0].push(X)}for(var br=ag.floor(bp.y/Y);br<=bm;br++){bq[1].push(br)}return bq},hitTestRect:function(bn,bm){var bp=this.getSectors(bn);var br,bo,X,bq;var Y;if(this.root.hitTestRect(bn,bm)){return true}for(br=0;br<bp[0].length;br++){X=bp[0][br];for(bo=0;bo<bp[1].length;bo++){bq=bp[1][bo];Y=(this.rootMap[X]||{})[bq];if(Y&&Y.hitTestRect(bn,bm)){return true}}}return false}});function aQ(Y){var X=Y;if(Y instanceof kendo.data.Model){X=Y.toJSON();X[Y.idField]=Y._defaultId}return X}function bf(bo){var bn=[];var Y=[];var bm,X;for(X=0;X<bo.length;X++){bm=bo[X];if(bm instanceof Q){Y.push(bm)}else{bn.push(bm)}}return{shapes:Y,connections:bn}}function V(Y,X){if(Y.reader.model){return new Y.reader.model(X)}return new kendo.data.ObservableObject(X)}function a9(Y,X){if(n(X[Y])){X.set(Y,null)}}function J(bm,bn,Y){var bo;for(var X=0;X<Y.length;X++){bo=Y[X];if(bn&&!n(bn[bo])){bn[bo]=bm[bo]}}}function ak(X){var Y=X.drawingContainer().clippedBBox(null);if(Y.origin.x!==0||Y.origin.y!==0){X.position(-Y.origin.x,-Y.origin.y)}}function F(X){X.preventDefault()}aD.ui.plugin(aV);bh(m,{Shape:Q,Connection:ad,Connector:g,DiagramToolBar:aS,QuadNode:bl,QuadRoot:z,ShapesQuadTree:bk,PopupEditor:a3})}(window.kendo.jQuery))},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.dataviz.diagram",["kendo.data","kendo.draganddrop","kendo.userevents","kendo.mobile.scroller","kendo.drawing","dataviz/diagram/utils","dataviz/diagram/math","dataviz/diagram/svg","dataviz/diagram/services","dataviz/diagram/layout","dataviz/diagram/dom"],a)}(function(){var a={id:"dataviz.diagram",name:"Diagram",category:"dataviz",description:"The Kendo DataViz Diagram ",depends:["data","userevents","mobile.scroller","draganddrop","drawing","dataviz.core","dataviz.themes","toolbar"],features:[{id:"dataviz.diagram-pdf-export",name:"PDF export",description:"Export Diagram as PDF",depends:["pdf"]},{id:"dataviz.diagram-editing",name:"Editing",description:"Support for model editing",depends:["editable","window","dropdownlist"]}]};return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.dataviz.treemap",["kendo.data","kendo.userevents","kendo.dataviz.themes"],a)}(function(){var a={id:"dataviz.treeMap",name:"TreeMap",category:"dataviz",description:"The Kendo DataViz TreeMap",depends:["data","userevents","dataviz.themes"]};(function(y,o){var w=Math,J=y.proxy,s=y.isArray,B=window.kendo,M=B._outerHeight,I=B._outerWidth,e=B.Class,g=B.ui.Widget,h=B.template,F=B.deepExtend,l=B.data.HierarchicalDataSource,u=B.getter,k=B.dataviz;var C=".kendoTreeMap",x="change",N="dataBound",L="itemCreated",c=Number.MAX_VALUE,q="mouseover"+C,p="mouseleave"+C,A="undefined";var i=g.extend({init:function(P,O){B.destroy(P);y(P).empty();g.fn.init.call(this,P,O);this.wrapper=this.element;this._initTheme(this.options);this.element.addClass("k-widget k-treemap");this._setLayout();this._originalOptions=F({},this.options);this._initDataSource();this._attachEvents();B.notify(this,k.ui)},options:{name:"TreeMap",theme:"default",autoBind:true,textField:"text",valueField:"value",colorField:"color"},events:[N,L],_initTheme:function(Q){var R=this,O=k.ui.themes||{},S=((Q||{}).theme||"").toLowerCase(),P=(O[S]||{}).treeMap;R.options=F({},P,Q)},_attachEvents:function(){this.element.on(q,J(this._mouseover,this)).on(p,J(this._mouseleave,this));this._resizeHandler=J(this.resize,this,false);B.onResize(this._resizeHandler)},_setLayout:function(){if(this.options.type==="horizontal"){this._layout=new E(false);this._view=new d(this,this.options)}else{if(this.options.type==="vertical"){this._layout=new E(true);this._view=new d(this,this.options)}else{this._layout=new v();this._view=new t(this,this.options)}}},_initDataSource:function(){var P=this,O=P.options,Q=O.dataSource;P._dataChangeHandler=J(P._onDataChange,P);P.dataSource=l.create(Q).bind(x,P._dataChangeHandler);if(Q){if(P.options.autoBind){P.dataSource.fetch()}}},setDataSource:function(P){var O=this;O.dataSource.unbind(x,O._dataChangeHandler);O.dataSource=P.bind(x,O._dataChangeHandler);if(P){if(O.options.autoBind){O.dataSource.fetch()}}},_onDataChange:function(V){var U=V.node;var P=V.items;var Q=this.options;var T,R;if(!U){this._cleanItems();this.element.empty();T=this._wrapItem(P[0]);this._layout.createRoot(T,I(this.element),M(this.element),this.options.type==="vertical");this._view.createRoot(T);this._root=T;this._colorIdx=0}else{if(P.length){var O=this._getByUid(U.uid);O.children=[];P=new B.data.Query(P)._sortForGrouping(Q.valueField,"desc");for(R=0;R<P.length;R++){T=P[R];O.children.push(this._wrapItem(T))}var S=this._view.htmlSize(O);this._layout.compute(O.children,O.coord,S);this._setColors(O.children);this._view.render(O)}}for(R=0;R<P.length;R++){P[R].load()}if(U){this.trigger(N,{node:U})}},_cleanItems:function(){var O=this;O.angular("cleanup",function(){return{elements:O.element.find(".k-leaf div,.k-treemap-title,.k-treemap-title-vertical")}})},_setColors:function(Q){var O=this.options.colors;var U=this._colorIdx;var P=O[U%O.length];var V,T;if(s(P)){V=D(P[0],P[1],Q.length)}var S=false;for(var R=0;R<Q.length;R++){T=Q[R];if(!H(T.color)){if(V){T.color=V[R]}else{T.color=P}}if(!T.dataItem.hasChildren){S=true}}if(S){this._colorIdx++}},_contentSize:function(O){this.view.renderHeight(O)},_wrapItem:function(P){var O={};if(H(this.options.valueField)){O.value=j(this.options.valueField,P)}if(H(this.options.colorField)){O.color=j(this.options.colorField,P)}if(H(this.options.textField)){O.text=j(this.options.textField,P)}O.level=P.level();O.dataItem=P;return O},_getByUid:function(P){var O=[this._root];var Q;while(O.length){Q=O.pop();if(Q.dataItem.uid===P){return Q}if(Q.children){O=O.concat(Q.children)}}},dataItem:function(P){var O=y(P).attr(B.attr("uid")),Q=this.dataSource;return Q&&Q.getByUid(O)},findByUid:function(O){return this.element.find(".k-treemap-tile["+B.attr("uid")+"='"+O+"']")},_mouseover:function(P){var O=y(P.target);if(O.hasClass("k-leaf")){this._removeActiveState();O.removeClass("k-state-hover").addClass("k-state-hover")}},_removeActiveState:function(){this.element.find(".k-state-hover").removeClass("k-state-hover")},_mouseleave:function(){this._removeActiveState()},destroy:function(){g.fn.destroy.call(this);this.element.off(C);if(this.dataSource){this.dataSource.unbind(x,this._dataChangeHandler)}this._root=null;B.unbindResize(this._resizeHandler);B.destroy(this.element)},items:function(){return y()},getSize:function(){return B.dimensions(this.element)},_resize:function(){var P=this._root;if(P){var Q=this.element;var O=Q.children();P.coord.width=I(Q);P.coord.height=M(Q);O.css({width:P.coord.width,height:P.coord.height});this._resizeItems(P,O)}},_resizeItems:function(P,R){if(P.children&&P.children.length){var S=R.children(".k-treemap-wrap").children();var T,Q;this._layout.compute(P.children,P.coord,{text:this._view.titleSize(P,R)});for(var O=0;O<P.children.length;O++){T=P.children[O];Q=S.filter("["+B.attr("uid")+"='"+T.dataItem.uid+"']");this._view.setItemSize(T,Q);this._resizeItems(T,Q)}}},setOptions:function(O){var P=O.dataSource;O.dataSource=o;this._originalOptions=F(this._originalOptions,O);this.options=F({},this._originalOptions);this._setLayout();this._initTheme(this.options);g.fn._setEvents.call(this,O);if(P){this.setDataSource(l.create(P))}if(this.options.autoBind){this.dataSource.fetch()}}});var v=e.extend({createRoot:function(P,Q,O){P.coord={width:Q,height:O,top:0,left:0}},leaf:function(O){return !O.children},layoutChildren:function(V,S){var O=S.width*S.height;var W=0,Q=[],R;for(R=0;R<V.length;R++){Q[R]=parseFloat(V[R].value);W+=Q[R]}for(R=0;R<Q.length;R++){V[R].area=O*Q[R]/W}var P=this.layoutHorizontal()?S.height:S.width;var U=[V[0]];var T=V.slice(1);this.squarify(T,U,P,S)},squarify:function(O,Q,P,R){this.computeDim(O,Q,P,R)},computeDim:function(O,S,R,U){if(O.length+S.length==1){var P=O.length==1?O:S;this.layoutLast(P,R,U);return}if(O.length>=2&&S.length===0){S=[O[0]];O=O.slice(1)}if(O.length===0){if(S.length>0){this.layoutRow(S,R,U)}return}var Q=O[0];if(this.worstAspectRatio(S,R)>=this.worstAspectRatio([Q].concat(S),R)){this.computeDim(O.slice(1),S.concat([Q]),R,U)}else{var T=this.layoutRow(S,R,U);this.computeDim(O,[],T.dim,T)}},layoutLast:function(P,O,Q){P[0].coord=Q},layoutRow:function(O,P,Q){if(this.layoutHorizontal()){return this.layoutV(O,P,Q)}else{return this.layoutH(O,P,Q)}},orientation:"h",layoutVertical:function(){return this.orientation==="v"},layoutHorizontal:function(){return this.orientation==="h"},layoutChange:function(){this.orientation=this.layoutVertical()?"h":"v"},worstAspectRatio:function(P,S){if(!P||P.length===0){return c}var R=0,O=0,U=c;for(var Q=0;Q<P.length;Q++){var T=P[Q].area;R+=T;U=U<T?U:T;O=O>T?O:T}return w.max(S*S*O/(R*R),R*R/(S*S*U))},compute:function(P,R,Q){if(!(R.width>=R.height&&this.layoutHorizontal())){this.layoutChange()}if(P&&P.length>0){var O={width:R.width,height:R.height-Q.text,top:0,left:0};this.layoutChildren(P,O)}},layoutV:function(Q,T,V){var R=this._totalArea(Q),U=0;T=K(R/T);for(var S=0;S<Q.length;S++){var O=K(Q[S].area/T);Q[S].coord={height:O,width:T,top:V.top+U,left:V.left};U+=O}var P={height:V.height,width:V.width-T,top:V.top,left:V.left+T};P.dim=w.min(P.width,P.height);if(P.dim!=P.height){this.layoutChange()}return P},layoutH:function(S,O,R){var W=this._totalArea(S);var V=K(W/O),T=R.top,P=0;for(var Q=0;Q<S.length;Q++){S[Q].coord={height:V,width:K(S[Q].area/V),top:T,left:R.left+P};P+=S[Q].coord.width}var U={height:R.height-V,width:R.width,top:R.top+V,left:R.left};U.dim=w.min(U.width,U.height);if(U.dim!=U.width){this.layoutChange()}return U},_totalArea:function(O){var Q=0;for(var P=0;P<O.length;P++){Q+=O[P].area}return Q}});var t=e.extend({init:function(P,O){this.options=F({},this.options,O);this.treeMap=P;this.element=y(P.element);this.offset=0},titleSize:function(P,O){var Q=O.children(".k-treemap-title");return Q.height()},htmlSize:function(P){var O=this._getByUid(P.dataItem.uid);var Q={text:0};if(P.children){this._clean(O);var S=this._getText(P);if(S){var R=this._createTitle(P);O.append(R);this._compile(R,P.dataItem);Q.text=R.height()}O.append(this._createWrap());this.offset=(I(O)-O.innerWidth())/2}return Q},_compile:function(P,O){this.treeMap.angular("compile",function(){return{elements:P,data:[{dataItem:O}]}})},_getByUid:function(O){return this.element.find(".k-treemap-tile["+B.attr("uid")+"='"+O+"']")},render:function(R){var O=this._getByUid(R.dataItem.uid);var T=R.children;if(T){var Q=O.find(".k-treemap-wrap");for(var S=0;S<T.length;S++){var P=T[S];var U=this._createLeaf(P);Q.append(U);this._compile(U.children(),P.dataItem);this.treeMap.trigger(L,{element:U})}}},createRoot:function(O){var P=this._createLeaf(O);this.element.append(P);this._compile(P.children(),O.dataItem);this.treeMap.trigger(L,{element:P})},_clean:function(O){this.treeMap.angular("cleanup",function(){return{elements:O.children(":not(.k-treemap-wrap)")}});O.css("background-color","");O.removeClass("k-leaf");O.removeClass("k-inverse");O.empty()},_createLeaf:function(O){return this._createTile(O).css("background-color",O.color).addClass("k-leaf").toggleClass("k-inverse",this._tileColorBrightness(O)>180).append(y("<div></div>").html(this._getText(O)))},_createTile:function(P){var O=y("<div class='k-treemap-tile'></div>");this.setItemSize(P,O);if(H(P.dataItem)&&H(P.dataItem.uid)){O.attr(B.attr("uid"),P.dataItem.uid)}return O},_itemCoordinates:function(O){var P={width:O.coord.width,height:O.coord.height,left:O.coord.left,top:O.coord.top};if(P.left&&this.offset){P.width+=this.offset*2}else{P.width+=this.offset}if(P.top){P.height+=this.offset*2}else{P.height+=this.offset}return P},setItemSize:function(P,O){var Q=this._itemCoordinates(P);O.css({width:Q.width,height:Q.height,left:Q.left,top:Q.top})},_getText:function(O){var P=O.text;if(this.options.template){P=this._renderTemplate(O)}return P},_renderTemplate:function(P){var O=h(this.options.template);return O({dataItem:P.dataItem,text:P.text})},_createTitle:function(O){return y("<div class='k-treemap-title'></div>").append(y("<div></div>").html(this._getText(O)))},_createWrap:function(){return y("<div class='k-treemap-wrap'></div>")},_tileColorBrightness:function(O){return m(O.color)}});var E=e.extend({createRoot:function(P,R,O,Q){P.coord={width:R,height:O,top:0,left:0};P.vertical=Q},init:function(O){this.vertical=O;this.quotient=O?1:0},compute:function(Q,T,S){if(Q.length>0){var R=T.width;var O=T.height;if(this.vertical){O-=S.text}else{R-=S.text}var P={width:R,height:O,top:0,left:0};this.layoutChildren(Q,P)}},layoutChildren:function(P,U){var O=U.width*U.height;var Q=0;var T=[];var R;for(R=0;R<P.length;R++){var S=P[R];T[R]=parseFloat(P[R].value);Q+=T[R];S.vertical=this.vertical}for(R=0;R<T.length;R++){P[R].area=O*T[R]/Q}this.sliceAndDice(P,U)},sliceAndDice:function(O,Q){var P=this._totalArea(O);if(O[0].level%2===this.quotient){this.layoutHorizontal(O,Q,P)}else{this.layoutVertical(O,Q,P)}},layoutHorizontal:function(O,U,P){var T=0;for(var Q=0;Q<O.length;Q++){var S=O[Q];var R=S.area/(P/U.width);S.coord={height:U.height,width:R,top:U.top,left:U.left+T};T+=R}},layoutVertical:function(P,U,Q){var T=0;for(var R=0;R<P.length;R++){var S=P[R];var O=S.area/(Q/U.height);S.coord={height:O,width:U.width,top:U.top+T,left:U.left};T+=O}},_totalArea:function(O){var Q=0;for(var P=0;P<O.length;P++){Q+=O[P].area}return Q}});var d=t.extend({htmlSize:function(P){var O=this._getByUid(P.dataItem.uid);var Q={text:0,offset:0};if(P.children){this._clean(O);var S=this._getText(P);if(S){var R=this._createTitle(P);O.append(R);this._compile(R,P.dataItem);if(P.vertical){Q.text=R.height()}else{Q.text=R.width()}}O.append(this._createWrap());this.offset=(I(O)-O.innerWidth())/2}return Q},titleSize:function(Q,P){var O;if(Q.vertical){O=P.children(".k-treemap-title").height()}else{O=P.children(".k-treemap-title-vertical").width()}return O},_createTitle:function(O){var P;if(O.vertical){P=y("<div class='k-treemap-title'></div>")}else{P=y("<div class='k-treemap-title-vertical'></div>")}return P.append(y("<div></div>").html(this._getText(O)))}});function j(P,Q){if(Q===null){return Q}var O=u(P,true);return O(Q)}function H(O){return typeof O!==A}function D(R,V,P){var W=f(R);var S=f(V);var Q=m(R)-m(V)<0;var O=[];O.push(R);for(var T=0;T<P;T++){var U={r:r(W.r,S.r,T,P,Q),g:r(W.g,S.g,T,P,Q),b:r(W.b,S.b,T,P,Q)};O.push(b(U))}O.push(V);return O}function r(V,X,W,Q,S){var T=w.min(w.abs(V),w.abs(X));var P=w.max(w.abs(V),w.abs(X));var R=(P-T)/(Q+1);var O=R*(W+1);var U;if(S){U=T+O}else{U=P-O}return U}function b(O){return"#"+n(O.r)+n(O.g)+n(O.b)}function f(O){O=O.replace("#","");var P=z(O);return{r:G(P.r),g:G(P.g),b:G(P.b)}}function n(P){var O=w.round(P).toString(16).toUpperCase();if(O.length===1){O="0"+O}return O}function z(O){var P=O.length;var Q={};if(P===3){Q.r=O[0];Q.g=O[1];Q.b=O[2]}else{Q.r=O.substring(0,2);Q.g=O.substring(2,4);Q.b=O.substring(4,6)}return Q}function G(O){return parseInt(O.toString(16),16)}function m(O){var P=0;if(O){O=f(O);P=w.sqrt(0.241*O.r*O.r+0.691*O.g*O.g+0.068*O.b*O.b)}return P}function K(P){var O=w.pow(10,4);return w.round(P*O)/O}k.ui.plugin(i)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.dataviz",["kendo.core","kendo.fx","kendo.router","kendo.view","kendo.data.odata","kendo.data.xml","kendo.data","kendo.data.signalr","kendo.binder","kendo.userevents","kendo.draganddrop","kendo.mobile.scroller","kendo.popup","kendo.tooltip","kendo.drawing","kendo.dataviz.core","kendo.dataviz.themes","kendo.dataviz.chart","kendo.dataviz.gauge","kendo.dataviz.barcode","kendo.dataviz.qrcode","kendo.dataviz.stock","kendo.dataviz.sparkline","kendo.dataviz.map","kendo.dataviz.diagram","kendo.dataviz.treemap","kendo.angular"],a)}(function(){return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.mobile.modalview",["kendo.mobile.shim","kendo.mobile.view"],a)}(function(){var a={id:"mobile.modalview",name:"ModalView",category:"mobile",description:"The Kendo ModalView is used to present self-contained functionality in the context of the current task.",depends:["mobile.shim","mobile.view"]};(function(e,c){var g=window.kendo,i=g.mobile.ui,h=i.Shim,j=i.Widget,l="beforeOpen",d="open",f="close",k="init",b='<div class="km-modalview-wrapper" />';var m=i.View.extend({init:function(o,n){var p=this;j.fn.init.call(p,o,n);p._id();p._wrap();p._shim();if(!this.options.$angular){p._layout();p._scroller();p._model()}p.element.css("display","");p.trigger(k)},events:[k,l,d,f],options:{name:"ModalView",modal:true,width:null,height:null},destroy:function(){j.fn.destroy.call(this);this.shim.destroy()},open:function(o){var n=this;n.target=e(o);n.shim.show();n._invokeNgController();n.trigger("show",{view:n})},openFor:function(n){if(!this.trigger(l,{target:n})){this.open(n);this.trigger(d,{target:n})}},close:function(){if(this.element.is(":visible")&&!this.trigger(f)){this.shim.hide()}},_wrap:function(){var r=this,p=r.element,o=r.options,q,n;q=p[0].style.width||"auto";n=p[0].style.height||"auto";p.addClass("km-modalview").wrap(b);r.wrapper=p.parent().css({width:o.width||q||300,height:o.height||n||300}).addClass(n=="auto"?" km-auto-height":"");p.css({width:"",height:""})},_shim:function(){var n=this;n.shim=new h(n.wrapper,{modal:n.options.modal,position:"center center",align:"center center",effect:"fade:in",className:"km-modalview-root",hide:function(o){if(n.trigger(f)){o.preventDefault()}}})}});i.plugin(m)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.mobile.drawer",["kendo.mobile.view","kendo.userevents"],a)}(function(){var a={id:"mobile.drawer",name:"Drawer",category:"mobile",description:"The Kendo Mobile Drawer widget provides slide to reveal global application toolbox",depends:["mobile.view","userevents"]};(function(k,g){var n=window.kendo,b=n.mobile,i=n.support.mobileOS,m=n.effects.Transition,r=n.roleSelector,c="x",p=b.ui,f=!(i.ios&&i.majorVersion==7&&!i.appMode),e="beforeShow",q="init",o="show",j="hide",l="afterHide",h={enable:k.noop};var d=p.View.extend({init:function(v,t){k(v).parent().prepend(v);b.ui.Widget.fn.init.call(this,v,t);if(!this.options.$angular){this._layout();this._scroller()}this._model();var y=this.element.closest(r("pane")).data("kendoMobilePane"),x;if(y){this.pane=y;this.pane.bind("viewShow",function(z){w._viewShow(z)});this.pane.bind("sameViewRequested",function(){w.hide()});x=this.userEvents=new n.UserEvents(y.element,{fastTap:true,filter:r("view splitview"),allowSelection:true})}else{this.currentView=h;var s=k(this.options.container);if(!s){throw new Error("The drawer needs a container configuration option set.")}x=this.userEvents=new n.UserEvents(s,{fastTap:true,allowSelection:true});this._attachTransition(s)}var w=this;var u=function(z){if(w.visible){w.hide();z.preventDefault()}};if(this.options.swipeToOpen&&f){x.bind("press",function(){w.transition.cancel()});x.bind("start",function(z){w._start(z)});x.bind("move",function(z){w._update(z)});x.bind("end",function(z){w._end(z)});x.bind("tap",u)}else{x.bind("press",u)}this.leftPositioned=this.options.position==="left";this.visible=false;this.element.hide().addClass("km-drawer").addClass(this.leftPositioned?"km-left-drawer":"km-right-drawer");this.trigger(q)},options:{name:"Drawer",position:"left",views:[],swipeToOpenViews:[],swipeToOpen:true,title:"",container:null},events:[e,j,l,q,o],show:function(){if(this._activate()){this._show()}},hide:function(){if(!this.currentView){return}this.currentView.enable();d.current=null;this._moveViewTo(0);this.trigger(j,{view:this})},openFor:function(){if(this.visible){this.hide()}else{this.show()}},destroy:function(){p.View.fn.destroy.call(this);this.userEvents.destroy()},_activate:function(){if(this.visible){return true}var s=this._currentViewIncludedIn(this.options.views);if(!s||this.trigger(e,{view:this})){return false}this._setAsCurrent();this.element.show();this.trigger(o,{view:this});this._invokeNgController();return true},_currentViewIncludedIn:function(t){if(!this.pane||!t.length){return true}var s=this.pane.view();return k.inArray(s.id.replace("#",""),t)>-1||k.inArray(s.element.attr("id"),t)>-1},_show:function(){this.currentView.enable(false);this.visible=true;var s=this.element.width();if(!this.leftPositioned){s=-s}this._moveViewTo(s)},_setAsCurrent:function(){if(d.last!==this){if(d.last){d.last.element.hide()}this.element.show()}d.last=this;d.current=this},_moveViewTo:function(s){this.userEvents.cancel();this.transition.moveTo({location:s,duration:400,ease:m.easeOutExpo})},_viewShow:function(s){if(this.currentView){this.currentView.enable()}if(this.currentView===s.view){this.hide();return}this.currentView=s.view;this._attachTransition(s.view.element)},_attachTransition:function(s){var t=this,v=this.movable,u=v&&v.x;if(this.transition){this.transition.cancel();this.movable.moveAxis("x",0)}v=this.movable=new n.ui.Movable(s);this.transition=new m({axis:c,movable:this.movable,onEnd:function(){if(v[c]===0){s[0].style.cssText="";t.element.hide();t.trigger(l);t.visible=false}}});if(u){s.addClass("k-fx-hidden");n.animationFrame(function(){s.removeClass("k-fx-hidden");t.movable.moveAxis(c,u);t.hide()})}},_start:function(x){var w=x.sender;if(Math.abs(x.x.velocity)<Math.abs(x.y.velocity)||n.triggeredByInput(x.event)||!this._currentViewIncludedIn(this.options.swipeToOpenViews)){w.cancel();return}var v=this.leftPositioned,y=this.visible,s=v&&y||!v&&!d.current,t=!v&&y||v&&!d.current,u=x.x.velocity<0;if(s&&u||t&&!u){if(this._activate()){w.capture();return}}w.cancel()},_update:function(v){var u=this.movable,s=u.x+v.x.delta,t;if(this.leftPositioned){t=Math.min(Math.max(0,s),this.element.width())}else{t=Math.max(Math.min(0,s),-this.element.width())}this.movable.moveAxis(c,t);v.event.preventDefault();v.event.stopPropagation()},_end:function(w){var v=w.x.velocity,t=Math.abs(this.movable.x)>this.element.width()/2,u=0.8,s;if(this.leftPositioned){s=v>-u&&(v>u||t)}else{s=v<u&&(v<-u||t)}if(s){this._show()}else{this.hide()}}});p.plugin(d)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.mobile.splitview",["kendo.mobile.pane"],a)}(function(){var a={id:"mobile.splitview",name:"SplitView",category:"mobile",description:"The mobile SplitView is a tablet-specific view that consists of two or more mobile Pane widgets.",depends:["mobile.pane"]};(function(f,i){var h=window.kendo,e=h.mobile.ui,d=e.Widget,b="<div class='km-expanded-pane-shim' />",g=e.View;var c=g.extend({init:function(k,j){var l=this,n,m;d.fn.init.call(l,k,j);k=l.element;f.extend(l,j);l._id();if(!l.options.$angular){l._layout();l._overlay()}else{l._overlay()}l._style();m=k.children(l._locate("modalview"));if(!l.options.$angular){h.mobile.init(m)}else{m.each(function(o,p){h.compileMobileDirective(f(p),j.$angular[0])})}l.panes=[];l._paramsHistory=[];if(!l.options.$angular){l.content.children(h.roleSelector("pane")).each(function(){n=h.initWidget(this,{},e.roles);l.panes.push(n)})}else{l.element.children(h.directiveSelector("pane")).each(function(){n=h.compileMobileDirective(f(this),j.$angular[0]);l.panes.push(n)});l.element.children(h.directiveSelector("header footer")).each(function(){h.compileMobileDirective(f(this),j.$angular[0])})}l.expandedPaneShim=f(b).appendTo(l.element);l._shimUserEvents=new h.UserEvents(l.expandedPaneShim,{fastTap:true,tap:function(){l.collapsePanes()}})},_locate:function(j){return this.options.$angular?h.directiveSelector(j):h.roleSelector(j)},options:{name:"SplitView",style:"horizontal"},expandPanes:function(){this.element.addClass("km-expanded-splitview")},collapsePanes:function(){this.element.removeClass("km-expanded-splitview")},_layout:function(){var k=this,j=k.element;k.transition=h.attrValue(j,"transition");h.mobile.ui.View.prototype._layout.call(this);h.mobile.init(this.header.add(this.footer));k.element.addClass("km-splitview");k.content.addClass("km-split-content")},_style:function(){var k=this.options.style,j=this.element,l;if(k){l=k.split(" ");f.each(l,function(){j.addClass("km-split-"+this)})}},showStart:function(){var j=this;j.element.css("display","");if(!j.inited){j.inited=true;f.each(j.panes,function(){if(this.options.initial){this.navigateToInitial()}else{this.navigate("")}});j.trigger("init",{view:j})}else{this._invokeNgController()}j.trigger("show",{view:j})}});e.plugin(c)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.mobile.application",["kendo.mobile.pane","kendo.router"],a)}(function(){var a={id:"mobile.application",name:"Application",category:"mobile",description:"The Mobile application provides a framework to build native looking web applications on mobile devices.",depends:["mobile.pane","router"]};(function(u,k){var v=window.kendo,x=v.mobile,F=v.support,g=x.ui.Widget,y=x.ui.Pane,c="ios7",m=F.mobileOS,e=m.device=="blackberry"&&m.flatVersion>=600&&m.flatVersion<1000&&m.appMode,K=0.93,p="km-vertical",s=m.browser==="chrome",t=m.ios&&m.flatVersion>=700&&m.flatVersion<800&&(m.appMode||s),q=Math.abs(window.orientation)/90==1,l="km-horizontal",G={ios7:{ios:true,browser:"default",device:"iphone",flatVersion:"700",majorVersion:"7",minorVersion:"0.0",name:"ios",tablet:false},ios:{ios:true,browser:"default",device:"iphone",flatVersion:"612",majorVersion:"6",minorVersion:"1.2",name:"ios",tablet:false},android:{android:true,browser:"default",device:"android",flatVersion:"442",majorVersion:"4",minorVersion:"4.2",name:"android",tablet:false},blackberry:{blackberry:true,browser:"default",device:"blackberry",flatVersion:"710",majorVersion:"7",minorVersion:"1.0",name:"blackberry",tablet:false},meego:{meego:true,browser:"default",device:"meego",flatVersion:"850",majorVersion:"8",minorVersion:"5.0",name:"meego",tablet:false},wp:{wp:true,browser:"default",device:"wp",flatVersion:"800",majorVersion:"8",minorVersion:"0.0",name:"wp",tablet:false}},h=v.template('<meta content="initial-scale=#: data.scale #, maximum-scale=#: data.scale #, user-scalable=no#=data.height#" name="viewport" />',{usedWithBlock:false}),d=v.template('<meta name="apple-mobile-web-app-capable" content="#= data.webAppCapable === false ? \'no\' : \'yes\' #" /> <meta name="apple-mobile-web-app-status-bar-style" content="#=data.statusBarStyle#" /> <meta name="msapplication-tap-highlight" content="no" /> ',{usedWithBlock:false}),z=v.template("<style>.km-view { clip: rect(0 #= data.width #px #= data.height #px 0); }</style>",{usedWithBlock:false}),b=m.android&&m.browser!="chrome"||m.blackberry,C=v.template('<link rel="apple-touch-icon'+(m.android?"-precomposed":"")+'" # if(data.size) { # sizes="#=data.size#" #}# href="#=data.icon#" />',{usedWithBlock:false}),H=(m.device=="iphone"||m.device=="ipod")&&m.majorVersion<7,r=(m.device=="iphone"||m.device=="ipod")&&m.majorVersion>=7,E=r?"none":null,N=m.browser=="mobilesafari"?60:0,A=20,n=u(window),I=window.screen,w=u("head"),i="init",J=u.proxy;function M(Q,O){var P=[];if(m){P.push("km-on-"+m.name)}if(Q.skin){P.push("km-"+Q.skin)}else{if(Q.name=="ios"&&Q.majorVersion>6){P.push("km-ios7")}else{P.push("km-"+Q.name)}}if(Q.name=="ios"&&Q.majorVersion<7||Q.name!="ios"){P.push("km-"+Q.name+Q.majorVersion)}P.push("km-"+Q.majorVersion);P.push("km-m"+(Q.minorVersion?Q.minorVersion[0]:0));if(Q.variant&&(Q.skin&&Q.skin===Q.name||!Q.skin||Q.setDefaultPlatform===false)){P.push("km-"+(Q.skin?Q.skin:Q.name)+"-"+Q.variant)}if(Q.cordova){P.push("km-cordova")}if(Q.appMode){P.push("km-app")}else{P.push("km-web")}if(O&&O.statusBarStyle){P.push("km-"+O.statusBarStyle+"-status-bar")}return P.join(" ")}function j(O){return"km-wp-"+(O.noVariantSet?parseInt(u("<div style='background: Background' />").css("background-color").split(",")[1],10)===0?"dark":"light":O.variant+" km-wp-"+O.variant+"-force")}function o(O){return m.wp?O.css("animation-name")=="-kendo-landscape":Math.abs(window.orientation)/90==1}function L(O){return o(O)?l:p}function B(O){O.parent().addBack().css("min-height",window.innerHeight)}function f(){u("meta[name=viewport]").remove();w.append(h({height:", width=device-width"+(o()?", height="+window.innerHeight+"px":F.mobileOS.flatVersion>=600&&F.mobileOS.flatVersion<700?", height="+window.innerWidth+"px":", height=device-height")}))}var D=g.extend({init:function(P,O){x.application=this;u(u.proxy(this,"bootstrap",P,O))},bootstrap:function(P,O){P=u(P);if(!P[0]){P=u(document.body)}g.fn.init.call(this,P,O);this.element.removeAttr("data-"+v.ns+"role");this._setupPlatform();this._attachMeta();this._setupElementClass();this._attachHideBarHandlers();var R=u.extend({},this.options);delete R.name;var Q=this,S=function(){Q.pane=new y(Q.element,R);Q.pane.navigateToInitial();if(Q.options.updateDocumentTitle){Q._setupDocumentTitle()}Q._startHistory();Q.trigger(i)};if(this.options.$angular){setTimeout(S)}else{S()}},options:{name:"Application",hideAddressBar:true,browserHistory:true,historyTransition:E,modelScope:window,statusBarStyle:"black",transition:"",retina:false,platform:null,skin:null,updateDocumentTitle:true,useNativeScrolling:false},events:[i],navigate:function(O,P){this.pane.navigate(O,P)},replace:function(O,P){this.pane.replace(O,P)},scroller:function(){return this.view().scroller},hideLoading:function(){if(this.pane){this.pane.hideLoading()}else{throw new Error("The mobile application instance is not fully instantiated. Please consider activating loading in the application init event handler.")}},showLoading:function(){if(this.pane){this.pane.showLoading()}else{throw new Error("The mobile application instance is not fully instantiated. Please consider activating loading in the application init event handler.")}},changeLoadingMessage:function(O){if(this.pane){this.pane.changeLoadingMessage(O)}else{throw new Error("The mobile application instance is not fully instantiated. Please consider changing the message in the application init event handler.")}},view:function(){return this.pane.view()},skin:function(P){var O=this;if(!arguments.length){return O.options.skin}O.options.skin=P||"";O.element[0].className="km-pane";O._setupPlatform();O._setupElementClass();return O.options.skin},destroy:function(){g.fn.destroy.call(this);this.pane.destroy();if(this.options.browserHistory){this.router.destroy()}},_setupPlatform:function(){var Q=this,O=Q.options.platform,S=Q.options.skin,P=[],R=m||G[c];if(O){R.setDefaultPlatform=true;if(typeof O==="string"){P=O.split("-");R=u.extend({variant:P[1]},R,G[P[0]])}else{R=O}}if(S){P=S.split("-");if(!m){R.setDefaultPlatform=false}R=u.extend({},R,{skin:P[0],variant:P[1]})}if(!R.variant){R.noVariantSet=true;R.variant="dark"}Q.os=R;Q.osCssClass=M(Q.os,Q.options);if(R.name=="wp"){if(!Q.refreshBackgroundColorProxy){Q.refreshBackgroundColorProxy=u.proxy(function(){if(Q.os.variant&&(Q.os.skin&&Q.os.skin===Q.os.name)||!Q.os.skin){Q.element.removeClass("km-wp-dark km-wp-light km-wp-dark-force km-wp-light-force").addClass(j(Q.os))}},Q)}u(document).off("visibilitychange",Q.refreshBackgroundColorProxy);u(document).off("resume",Q.refreshBackgroundColorProxy);if(!R.skin){Q.element.parent().css("overflow","hidden");u(document).on("visibilitychange",Q.refreshBackgroundColorProxy);u(document).on("resume",Q.refreshBackgroundColorProxy);Q.refreshBackgroundColorProxy()}}},_startHistory:function(){if(this.options.browserHistory){this.router=new v.Router({pushState:this.options.pushState,root:this.options.root,hashBang:this.options.hashBang});this.pane.bindToRouter(this.router);this.router.start()}else{if(!this.options.initial){this.pane.navigate("")}}},_resizeToScreenHeight:function(){var Q=u("meta[name=apple-mobile-web-app-status-bar-style]").attr("content").match(/black-translucent|hidden/),P=this.element,O;if(s){O=window.innerHeight}else{if(o(P)){if(Q){if(q){O=I.availWidth+A}else{O=I.availWidth}}else{if(q){O=I.availWidth}else{O=I.availWidth-A}}}else{if(Q){if(q){O=I.availHeight}else{O=I.availHeight+A}}else{if(q){O=I.availHeight-A}else{O=I.availHeight}}}}P.height(O)},_setupElementClass:function(){var Q=this,P,O=Q.element;O.parent().addClass("km-root km-"+(Q.os.tablet?"tablet":"phone"));O.addClass(Q.osCssClass+" "+L(O));if(this.options.useNativeScrolling){O.parent().addClass("km-native-scrolling")}if(s){O.addClass("km-ios-chrome")}if(F.wpDevicePixelRatio){O.parent().css("font-size",F.wpDevicePixelRatio+"em")}if(this.options.retina){O.parent().addClass("km-retina");O.parent().css("font-size",F.devicePixelRatio*K+"em")}if(e){f()}if(Q.options.useNativeScrolling){O.parent().addClass("km-native-scrolling")}else{if(b){P=(screen.availWidth>screen.availHeight?screen.availWidth:screen.availHeight)+200;u(z({width:P,height:P})).appendTo(w)}}if(t){Q._resizeToScreenHeight()}v.onResize(function(){O.removeClass("km-horizontal km-vertical").addClass(L(O));if(Q.options.useNativeScrolling){B(O)}if(t){Q._resizeToScreenHeight()}if(e){f()}v.resize(O)})},_clearExistingMeta:function(){w.find("meta").filter("[name|='apple-mobile-web-app'],[name|='msapplication-tap'],[name='viewport']").remove()},_attachMeta:function(){var O=this.options,Q=O.icon,P;this._clearExistingMeta();if(!e){w.prepend(h({height:"",scale:this.options.retina?1/F.devicePixelRatio:"1.0"}))}w.prepend(d(O));if(Q){if(typeof Q==="string"){Q={"":Q}}for(P in Q){w.prepend(C({icon:Q[P],size:P}))}}if(O.useNativeScrolling){B(this.element)}},_attachHideBarHandlers:function(){var P=this,O=J(P,"_hideBar");if(F.mobileOS.appMode||!P.options.hideAddressBar||!H||P.options.useNativeScrolling){return}P._initialHeight={};n.on("load",O);v.onResize(function(){setTimeout(window.scrollTo,0,0,1)})},_setupDocumentTitle:function(){var P=this,O=document.title;P.pane.bind("viewShow",function(Q){var R=Q.view.title;document.title=R!==k?R:O})},_hideBar:function(){var P=this,O=P.element;O.height(v.support.transforms.css+"calc(100% + "+N+"px)");u(window).trigger(v.support.resize)}});v.mobile.Application=D;v.ui.plugin(D,v.mobile,"Mobile")}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.mobile.button",["kendo.userevents"],a)}(function(){var a={id:"mobile.button",name:"Button",category:"mobile",description:"The Button widget navigates between mobile Application views when pressed.",depends:["userevents"]};(function(e,c){var j=window.kendo,b=j.mobile,l=b.ui,m=l.Widget,q=j.support,d=q.mobileOS,p=d.android&&d.flatVersion>=300,i="click",h="disabled",k="km-state-disabled";function r(u,t,s){e(t.target).closest(".km-button,.km-detail").toggleClass("km-state-active",s);if(p&&u.deactivateTimeoutID){clearTimeout(u.deactivateTimeoutID);u.deactivateTimeoutID=0}}function g(s){return e('<span class="km-badge">'+s+"</span>")}var f=m.extend({init:function(t,s){var v=this;m.fn.init.call(v,t,s);var u=v.options.clickOn==="up";v._wrap();v._style();if(!u){v.element.attr("data-navigate-on-press",true)}v.options.enable=v.options.enable&&!v.element.attr(h);v.enable(v.options.enable);v._userEvents=new j.UserEvents(v.element,{allowSelection:!u,fastTap:true,press:function(w){v._activate(w)},release:function(w){r(v,w,false);if(!u){w.event.stopPropagation()}}});v._userEvents.bind(u?"tap":"press",function(w){v._release(w)});if(p){v.element.on("move",function(w){v._timeoutDeactivate(w)})}},destroy:function(){m.fn.destroy.call(this);this._userEvents.destroy()},events:[i],options:{name:"Button",icon:"",style:"",badge:"",clickOn:"up",enable:true},badge:function(t){var s=this.badgeElement=this.badgeElement||g(t).appendTo(this.element);if(t||t===0){s.html(t);return this}if(t===false){s.empty().remove();this.badgeElement=false;return this}return s.html()},enable:function(s){var t=this.element;if(typeof s=="undefined"){s=true}this.options.enable=s;if(s){t.removeAttr(h)}else{t.attr(h,h)}t.toggleClass(k,!s)},_timeoutDeactivate:function(s){if(!this.deactivateTimeoutID){this.deactivateTimeoutID=setTimeout(r,500,this,s,false)}},_activate:function(t){var s=document.activeElement,u=s?s.nodeName:"";if(this.options.enable){r(this,t,true);if(u=="INPUT"||u=="TEXTAREA"){s.blur()}}},_release:function(t){var s=this;if(t.which>1){return}if(!s.options.enable){t.preventDefault();return}if(s.trigger(i,{target:e(t.target),button:s.element})){t.preventDefault()}},_style:function(){var t=this.options.style,s=this.element,u;if(t){u=t.split(" ");e.each(u,function(){s.addClass("km-"+this)})}},_wrap:function(){var x=this,w=x.options.icon,t=x.options.badge,s='<span class="km-icon km-'+w,u=x.element.addClass("km-button"),v=u.children("span:not(.km-icon)").addClass("km-text"),y=u.find("img").addClass("km-image");if(!v[0]&&u.html()){v=u.wrapInner('<span class="km-text" />').children("span.km-text")}if(!y[0]&&w){if(!v[0]){s+=" km-notext"}x.iconElement=u.prepend(e(s+'" />'))}if(t||t===0){x.badgeElement=g(t).appendTo(u)}}});var o=f.extend({options:{name:"BackButton",style:"back"},init:function(t,s){var u=this;f.fn.init.call(u,t,s);if(typeof u.element.attr("href")==="undefined"){u.element.attr("href","#:back")}}});var n=f.extend({options:{name:"DetailButton",style:""},init:function(t,s){f.fn.init.call(this,t,s)},_style:function(){var t=this.options.style+" detail",s=this.element;if(t){var u=t.split(" ");e.each(u,function(){s.addClass("km-"+this)})}},_wrap:function(){var w=this,v=w.options.icon,s='<span class="km-icon km-'+v,t=w.element,u=t.children("span"),x=t.find("img").addClass("km-image");if(!x[0]&&v){if(!u[0]){s+=" km-notext"}t.prepend(e(s+'" />'))}}});l.plugin(f);l.plugin(o);l.plugin(n)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.mobile.buttongroup",["kendo.core"],a)}(function(){var a={id:"mobile.buttongroup",name:"ButtonGroup",category:"mobile",description:"The Kendo mobile ButtonGroup widget is a linear set of grouped buttons.",depends:["core"]};(function(e,c){var i=window.kendo,k=i.mobile.ui,l=k.Widget,m="state-active",b="state-disabled",j="select",d="li:not(.km-"+m+")";function h(n){return"k-"+n+" km-"+n}function f(n){return e('<span class="'+h("badge")+'">'+n+"</span>")}var g=l.extend({init:function(o,n){var p=this;l.fn.init.call(p,o,n);p.element.addClass("km-buttongroup k-widget k-button-group").find("li").each(p._button);p.element.on(p.options.selectOn,d,"_select");p._enable=true;p.select(p.options.index);if(!p.options.enable){p._enable=false;p.wrapper.addClass(h(b))}},events:[j],options:{name:"ButtonGroup",selectOn:"down",index:-1,enable:true},current:function(){return this.element.find(".km-"+m)},select:function(n){var p=this,o=-1;if(n===c||n===-1||!p._enable||e(n).is(".km-"+b)){return}p.current().removeClass(h(m));if(typeof n==="number"){o=n;n=e(p.element[0].children[n])}else{if(n.nodeType){n=e(n);o=n.index()}}n.addClass(h(m));p.selectedIndex=o},badge:function(o,q){var p=this.element,n;if(!isNaN(o)){o=p.children().get(o)}o=p.find(o);n=e(o.children(".km-badge")[0]||f(q).appendTo(o));if(q||q===0){n.html(q);return this}if(q===false){n.empty().remove();return this}return n.html()},enable:function(n){if(typeof n=="undefined"){n=true}this.wrapper.toggleClass(h(b),!n);this._enable=this.options.enable=n},_button:function(){var o=e(this).addClass(h("button")),q=i.attrValue(o,"icon"),n=i.attrValue(o,"badge"),p=o.children("span"),r=o.find("img").addClass(h("image"));if(!p[0]){p=o.wrapInner("<span/>").children("span")}p.addClass(h("text"));if(!r[0]&&q){o.prepend(e('<span class="'+h("icon")+" "+h(q)+'"/>'))}if(n||n===0){f(n).appendTo(o)}},_select:function(n){if(n.which>1||n.isDefaultPrevented()||!this._enable){return}this.select(n.currentTarget);this.trigger(j,{index:this.selectedIndex})}});k.plugin(g)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.mobile.collapsible",["kendo.core"],a)}(function(){var a={id:"mobile.collapsible",name:"Collapsible",category:"mobile",description:"The Kendo mobile Collapsible widget provides ability for creating collapsible blocks of content.",depends:["core","userevents"]};(function(e,g){var p=window.kendo,o=p.mobile.ui,b=o.Widget,n="km-collapsible",s="km-collapsible-header",h="km-collapsible-content",f="km-collapsibleinset",q="<div data-role='collapsible-header' class='"+s+"'></div>",r="<div data-role='collapsible-content' class='"+h+"'></div>",j="km-collapsed",i="km-expanded",l="km-animated",m="left",d="expand",c="collapse";var k=b.extend({init:function(v,u){var w=this,t=e(v);b.fn.init.call(w,t,u);t.addClass(n);w._buildHeader();w.content=t.children().not(w.header).wrapAll(r).parent();w._userEvents=new p.UserEvents(w.header,{fastTap:true,tap:function(){w.toggle()}});t.addClass(w.options.collapsed?j:i);if(w.options.inset){t.addClass(f)}if(w.options.animation){w.content.addClass(l);w.content.height(0);if(w.options.collapsed){w.content.hide()}}else{if(w.options.collapsed){w.content.hide()}}},events:[d,c],options:{name:"Collapsible",collapsed:true,collapseIcon:"arrow-n",expandIcon:"arrow-s",iconPosition:m,animation:true,inset:false},destroy:function(){b.fn.destroy.call(this);this._userEvents.destroy()},expand:function(t){var v=this.options.collapseIcon,w=this.content,u=p.support.mobileOS.ios;if(!this.trigger(d)){if(v){this.header.find(".km-icon").removeClass().addClass("km-icon km-"+v)}this.element.removeClass(j).addClass(i);if(this.options.animation&&!t){w.off("transitionend");w.show();if(u){w.removeClass(l)}w.height(this._getContentHeight());if(u){w.addClass(l)}p.resize(w)}else{w.show()}}},collapse:function(t){var u=this.options.expandIcon,v=this.content;if(!this.trigger(c)){if(u){this.header.find(".km-icon").removeClass().addClass("km-icon km-"+u)}this.element.removeClass(i).addClass(j);if(this.options.animation&&!t){v.one("transitionend",function(){v.hide()});v.height(0)}else{v.hide()}}},toggle:function(t){if(this.isCollapsed()){this.expand(t)}else{this.collapse(t)}},isCollapsed:function(){return this.element.hasClass(j)},resize:function(){if(!this.isCollapsed()&&this.options.animation){this.content.height(this._getContentHeight())}},_buildHeader:function(){var w=this.element.children(":header").wrapAll(q),t=e('<span class="km-icon"/>'),u=this.options.collapsed?this.options.expandIcon:this.options.collapseIcon,v=this.options.iconPosition;if(u){w.prepend(t);t.addClass("km-"+u)}this.header=w.parent();this.header.addClass("km-icon-"+v)},_getContentHeight:function(){var u=this.content.attr("style"),t;this.content.css({position:"absolute",visibility:"hidden",height:"auto"});t=this.content.height();this.content.attr("style",u?u:"");return t}});o.plugin(k)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.mobile.listview",["kendo.data","kendo.userevents","kendo.mobile.button"],a)}(function(){var a={id:"mobile.listview",name:"ListView",category:"mobile",description:"The Kendo Mobile ListView widget is used to display flat or grouped list of items.",depends:["data","userevents","mobile.button"]};(function(E,o){var F=window.kendo,s=window.Node,G=F.mobile,L=G.ui,S=F._outerHeight,J=F.data.DataSource,h=L.DataBoundWidget,j=".km-list > li, > li:not(.km-group-container)",K=".km-listview-link, .km-listview-label",z="["+F.attr("icon")+"]",R=E.proxy,e=F.attrValue,U="km-group-title",i="km-state-active",y='<div class="'+U+'"><div class="km-text"></div></div>',k=F.template('<li><div class="'+U+'"><div class="km-text">#= this.headerTemplate(data) #</div></div><ul>#= kendo.render(this.template, data.items)#</ul></li>'),V='<div class="km-listview-wrapper" />',H=F.template('<form class="km-filter-form"><div class="km-filter-wrap"><input type="search" placeholder="#=placeholder#"/><a href="\\#" class="km-filter-reset" title="Clear"><span class="km-icon km-clear"></span><span class="km-text">Clear</span></a></div></form>'),I=".kendoMobileListView",p="styled",l="dataBound",Q="dataBinding",B="itemChange",P="click",D="change",u="progress",f="function",M=/^\s+$/,X=/button/;function x(){return this.nodeType===s.TEXT_NODE&&this.nodeValue.match(M)}function C(Z,Y){if(Y&&!Z[0].querySelector(".km-icon")){Z.prepend('<span class="km-icon km-'+Y+'"/>')}}function c(Y){C(Y,e(Y,"icon"));C(Y,e(Y.children(z),"icon"))}function T(Z){var Y=Z.parent(),aa=Z.add(Y.children(F.roleSelector("detailbutton"))),ab=Y.contents().not(aa).not(x);if(ab.length){return}Z.addClass("km-listview-link").attr(F.attr("role"),"listview-link");C(Z,e(Y,"icon"));C(Z,e(Z,"icon"))}function b(Y){if(!Y[0].querySelector("input[type=checkbox],input[type=radio]")){return}var Z=Y.parent();if(Z.contents().not(Y).not(function(){return this.nodeType==3})[0]){return}Y.addClass("km-listview-label");Y.children("[type=checkbox],[type=radio]").addClass("km-widget km-icon km-check")}function v(Y,Z){E(Y).css("transform","translate3d(0px, "+Z+"px, 0px)")}var w=F.Class.extend({init:function(aa){var Y=aa.scroller();if(!Y){return}this.options=aa.options;this.element=aa.element;this.scroller=aa.scroller();this._shouldFixHeaders();var Z=this;var ab=function(){Z._cacheHeaders()};aa.bind("resize",ab);aa.bind(p,ab);aa.bind(l,ab);this._scrollHandler=function(ac){Z._fixHeader(ac)};Y.bind("scroll",this._scrollHandler)},destroy:function(){var Y=this;if(Y.scroller){Y.scroller.unbind("scroll",Y._scrollHandler)}},_fixHeader:function(ac){if(!this.fixedHeaders){return}var Z=0,Y=this.scroller,ae=this.headers,ab=ac.scrollTop,aa,ad,af;do{aa=ae[Z++];if(!aa){af=E("<div />");break}ad=aa.offset;af=aa.header}while(ad+1>ab);if(this.currentHeader!=Z){Y.fixedContainer.html(af.clone());this.currentHeader=Z}},_shouldFixHeaders:function(){this.fixedHeaders=this.options.type==="group"&&this.options.fixedHeaders},_cacheHeaders:function(){this._shouldFixHeaders();if(!this.fixedHeaders){return}var Z=[],Y=this.scroller.scrollTop;this.element.find("."+U).each(function(aa,ab){ab=E(ab);Z.unshift({offset:ab.position().top+Y,header:ab})});this.headers=Z;this._fixHeader({scrollTop:Y})}});var q=function(){return{page:1}};var W=F.Class.extend({init:function(Z){var ab=this,aa=Z.options,Y=Z.scroller(),ac=aa.pullParameters||q;this.listView=Z;this.scroller=Y;Z.bind("_dataSource",function(ad){ab.setDataSource(ad.dataSource)});Y.setOptions({pullToRefresh:true,pull:function(){if(!ab._pulled){ab._pulled=true;ab.dataSource.read(ac.call(Z,ab._first))}},messages:{pullTemplate:aa.messages.pullTemplate,releaseTemplate:aa.messages.releaseTemplate,refreshTemplate:aa.messages.refreshTemplate}})},setDataSource:function(Z){var Y=this;this._first=Z.view()[0];this.dataSource=Z;Z.bind("change",function(){Y._change()});Z.bind("error",function(){Y._change()})},_change:function(){var Y=this.scroller,aa=this.dataSource;if(this._pulled){Y.pullHandled()}if(this._pulled||!this._first){var Z=aa.view();if(Z[0]){this._first=Z[0]}}this._pulled=false}});var g=F.Observable.extend({init:function(Y){var Z=this;F.Observable.fn.init.call(Z);Z.buffer=Y.buffer;Z.height=Y.height;Z.item=Y.item;Z.items=[];Z.footer=Y.footer;Z.buffer.bind("reset",function(){Z.refresh()})},refresh:function(){var ab=this.buffer,ac=this.items,ae=false;while(ac.length){ac.pop().destroy()}this.offset=ab.offset;var aa=this.item,Z,ad;for(var Y=0;Y<ab.viewSize;Y++){if(Y===ab.total()){ae=true;break}ad=aa(this.content(this.offset+ac.length));ad.below(Z);Z=ad;ac.push(ad)}this.itemCount=ac.length;this.trigger("reset");this._resize();if(ae){this.trigger("endReached")}},totalHeight:function(){if(!this.items[0]){return 0}var ac=this,ab=ac.items,ad=ab[0].top,aa=ab[ab.length-1].bottom,Z=(aa-ad)/ac.itemCount,Y=ac.buffer.length-ac.offset-ac.itemCount;return(this.footer?this.footer.height:0)+aa+Y*Z},batchUpdate:function(ad){var Z=this.height(),aa=this.items,ac,ab=this.offset;if(!aa[0]){return}if(this.lastDirection){while(aa[aa.length-1].bottom>ad+Z*2){if(this.offset===0){break}this.offset--;ac=aa.pop();ac.update(this.content(this.offset));ac.above(aa[0]);aa.unshift(ac)}}else{while(aa[0].top<ad-Z){var Y=this.offset+this.itemCount;if(Y===this.buffer.total()){this.trigger("endReached");break}if(Y===this.buffer.length){break}ac=aa.shift();ac.update(this.content(this.offset+this.itemCount));ac.below(aa[aa.length-1]);aa.push(ac);this.offset++}}if(ab!==this.offset){this._resize()}},update:function(af){var ad=this,ae=this.items,ak,ag,ai,aj=this.height(),Y=this.itemCount,ah=aj/2,ab=(this.lastTop||0)>af,aa=af-ah,Z=af+aj+ah;if(!ae[0]){return}this.lastTop=af;this.lastDirection=ab;if(ab){if(ae[0].top>aa&&ae[ae.length-1].bottom>Z+ah&&this.offset>0){this.offset--;ak=ae.pop();ag=ae[0];ak.update(this.content(this.offset));ae.unshift(ak);ak.above(ag);ad._resize()}}else{if(ae[ae.length-1].bottom<Z&&ae[0].top<aa-ah){var ac=this.offset+Y;if(ac===this.buffer.total()){this.trigger("endReached")}else{if(ac!==this.buffer.length){ak=ae.shift();ai=ae[ae.length-1];ae.push(ak);ak.update(this.content(this.offset+this.itemCount));ad.offset++;ak.below(ai);ad._resize()}}}}},content:function(Y){return this.buffer.at(Y)},destroy:function(){this.unbind()},_resize:function(){var Z=this.items,ac=0,Y=0,ab=Z[0],aa=Z[Z.length-1];if(ab){ac=ab.top;Y=aa.bottom}this.trigger("resize",{top:ac,bottom:Y});if(this.footer){this.footer.below(aa)}}});F.mobile.ui.VirtualList=g;var d=F.Class.extend({init:function(Z,aa){var ab=Z.append([aa],true)[0],Y=ab.offsetHeight;E.extend(this,{top:0,element:ab,listView:Z,height:Y,bottom:Y})},update:function(Y){this.element=this.listView.setDataItem(this.element,Y)},above:function(Y){if(Y){this.height=this.element.offsetHeight;this.top=Y.top-this.height;this.bottom=Y.top;v(this.element,this.top)}},below:function(Y){if(Y){this.height=this.element.offsetHeight;this.top=Y.bottom;this.bottom=this.top+this.height;v(this.element,this.top)}},destroy:function(){F.destroy(this.element);E(this.element).remove()}});var r='<div><span class="km-icon"></span><span class="km-loading-left"></span><span class="km-loading-right"></span></div>';var n=F.Class.extend({init:function(Y){this.element=E('<li class="km-load-more km-scroller-refresh" style="display: none"></li>').appendTo(Y.element);this._loadIcon=E(r).appendTo(this.element)},enable:function(){this.element.show();this.height=S(this.element,true)},disable:function(){this.element.hide();this.height=0},below:function(Y){if(Y){this.top=Y.bottom;this.bottom=this.height+this.top;v(this.element,this.top)}}});var t=n.extend({init:function(Z,Y){this._loadIcon=E(r).hide();this._loadButton=E('<a class="km-load">'+Z.options.messages.loadMoreText+"</a>").hide();this.element=E('<li class="km-load-more" style="display: none"></li>').append(this._loadIcon).append(this._loadButton).appendTo(Z.element);var aa=this;this._loadButton.kendoMobileButton().data("kendoMobileButton").bind("click",function(){aa._hideShowButton();Y.next()});Y.bind("resize",function(){aa._showLoadButton()});this.height=S(this.element,true);this.disable()},_hideShowButton:function(){this._loadButton.hide();this.element.addClass("km-scroller-refresh");this._loadIcon.css("display","block")},_showLoadButton:function(){this._loadButton.show();this.element.removeClass("km-scroller-refresh");this._loadIcon.hide()}});var m=F.Class.extend({init:function(Z){var Y=this;this.chromeHeight=S(Z.wrapper.children().not(Z.element));this.listView=Z;this.scroller=Z.scroller();this.options=Z.options;Z.bind("_dataSource",function(aa){Y.setDataSource(aa.dataSource,aa.empty)});Z.bind("resize",function(){if(!Y.list.items.length){return}Y.scroller.reset();Y.buffer.range(0);Y.list.refresh()});this.scroller.makeVirtual();this._scroll=function(aa){Y.list.update(aa.scrollTop)};this.scroller.bind("scroll",this._scroll);this._scrollEnd=function(aa){Y.list.batchUpdate(aa.scrollTop)};this.scroller.bind("scrollEnd",this._scrollEnd)},destroy:function(){this.list.unbind();this.buffer.unbind();this.scroller.unbind("scroll",this._scroll);this.scroller.unbind("scrollEnd",this._scrollEnd)},setDataSource:function(Y,aa){var ah=this,ai=this.options,ag=this.listView,ab=ag.scroller(),ae=ai.loadMore,ad,Z,af;this.dataSource=Y;ad=Y.pageSize()||ai.virtualViewSize;if(!ad&&!aa){throw new Error("the DataSource does not have page size configured. Page Size setting is mandatory for the mobile listview virtual scrolling to work as expected.")}if(this.buffer){this.buffer.destroy()}Z=new F.data.Buffer(Y,Math.floor(ad/2),ae);if(ae){af=new t(ag,Z)}else{af=new n(ag)}if(this.list){this.list.destroy()}var ac=new g({buffer:Z,footer:af,item:function(aj){return new d(ag,aj)},height:function(){return ab.height()}});ac.bind("resize",function(){ah.updateScrollerSize();ag.updateSize()});ac.bind("reset",function(){ah.footer.enable()});ac.bind("endReached",function(){af.disable();ah.updateScrollerSize()});Z.bind("expand",function(){ac.lastDirection=false;ac.batchUpdate(ab.scrollTop)});E.extend(this,{buffer:Z,scroller:ab,list:ac,footer:af})},updateScrollerSize:function(){this.scroller.virtualSize(0,this.list.totalHeight()+this.chromeHeight)},refresh:function(){this.list.refresh()},reset:function(){this.buffer.range(0);this.list.refresh()}});var N=F.Class.extend({init:function(aa){var Z=this;this.listView=aa;this.options=aa.options;var Y=this;this._refreshHandler=function(ab){Y.refresh(ab)};this._progressHandler=function(){aa.showLoading()};aa.bind("_dataSource",function(ab){Z.setDataSource(ab.dataSource)})},destroy:function(){this._unbindDataSource()},reset:function(){},refresh:function(ah){var ae=ah&&ah.action,al=ah&&ah.items,ak=this.listView,Y=this.dataSource,ac=this.options.appendOnRefresh,ai=Y.view(),ab=Y.group(),aj=ab&&ab[0],an;if(ae==="itemchange"){if(!ak._hasBindingTarget()){an=ak.findByDataItem(al)[0];if(an){ak.setDataItem(an,al[0])}}return}var am,aa,af;var Z=ae==="add"&&!aj||ac&&!ak._filter;var ad=ae==="remove"&&!aj;if(Z){am=[]}else{if(ad){am=ak.findByDataItem(al)}}if(ak.trigger(Q,{action:ae||"rebind",items:al,removedItems:am,index:ah&&ah.index})){if(this._shouldShowLoading()){ak.hideLoading()}return}if(ae==="add"&&!aj){var ag=ai.indexOf(al[0]);if(ag>-1){aa=ak.insertAt(al,ag);af=al}}else{if(ae==="remove"&&!aj){aa=[];ak.remove(al)}else{if(aj){ak.replaceGrouped(ai)}else{if(ac&&!ak._filter){aa=ak.prepend(ai);af=ai}else{ak.replace(ai)}}}}if(this._shouldShowLoading()){ak.hideLoading()}ak.trigger(l,{ns:L,addedItems:aa,addedDataItems:af})},setDataSource:function(Y){if(this.dataSource){this._unbindDataSource()}this.dataSource=Y;Y.bind(D,this._refreshHandler);if(this._shouldShowLoading()){this.dataSource.bind(u,this._progressHandler)}},_unbindDataSource:function(){this.dataSource.unbind(D,this._refreshHandler).unbind(u,this._progressHandler)},_shouldShowLoading:function(){var Y=this.options;return !Y.pullToRefresh&&!Y.loadMore&&!Y.endlessScroll}});var A=F.Class.extend({init:function(Y){var aa=this,ac=Y.options.filterable,Z="change paste",ab=this;this.listView=Y;this.options=ac;Y.element.before(H({placeholder:ac.placeholder||"Search..."}));if(ac.autoFilter!==false){Z+=" keyup"}this.element=Y.wrapper.find(".km-search-form");this.searchInput=Y.wrapper.find("input[type=search]").closest("form").on("submit"+I,function(ad){ad.preventDefault()}).end().on("focus"+I,function(){aa._oldFilter=aa.searchInput.val()}).on(Z.split(" ").join(I+" ")+I,R(this._filterChange,this));this.clearButton=Y.wrapper.find(".km-filter-reset").on(P,R(this,"_clearFilter")).hide();this._dataSourceChange=E.proxy(this._refreshInput,this);Y.bind("_dataSource",function(ad){ad.dataSource.bind("change",ab._dataSourceChange)})},_refreshInput:function(){var Z=this.listView.dataSource.filter();var Y=this.listView._filter.searchInput;if(!Z||Z.filters[0].field!==this.listView.options.filterable.field){Y.val("")}else{Y.val(Z.filters[0].value)}},_search:function(Y){this._filter=true;this.clearButton[Y?"show":"hide"]();this.listView.dataSource.filter(Y)},_filterChange:function(Z){var Y=this;if(Z.type=="paste"&&this.options.autoFilter!==false){setTimeout(function(){Y._applyFilter()},1)}else{this._applyFilter()}},_applyFilter:function(){var Y=this.options,Z=this.searchInput.val(),aa=Z.length?{field:Y.field,operator:Y.operator||"startswith",ignoreCase:Y.ignoreCase,value:Z}:null;if(Z===this._oldFilter){return}this._oldFilter=Z;this._search(aa)},_clearFilter:function(Y){this.searchInput.val("");this._search(null);Y.preventDefault()}});var O=h.extend({init:function(aa,Z){var Y=this;h.fn.init.call(this,aa,Z);aa=this.element;Z=this.options;if(Z.scrollTreshold){Z.scrollThreshold=Z.scrollTreshold}aa.on("down",K,"_highlight").on("move up cancel",K,"_dim");this._userEvents=new F.UserEvents(aa,{fastTap:true,filter:j,allowSelection:true,tap:function(ab){Y._click(ab)}});aa.css("-ms-touch-action","auto");aa.wrap(V);this.wrapper=this.element.parent();this._headerFixer=new w(this);this._itemsCache={};this._templates();this.virtual=Z.endlessScroll||Z.loadMore;this._style();if(this.options.$angular&&(this.virtual||this.options.pullToRefresh)){setTimeout(E.proxy(this,"_start"))}else{this._start()}},_start:function(){var Y=this.options;if(this.options.filterable){this._filter=new A(this)}if(this.virtual){this._itemBinder=new m(this)}else{this._itemBinder=new N(this)}if(this.options.pullToRefresh){this._pullToRefreshHandler=new W(this)}this.setDataSource(Y.dataSource);this._enhanceItems(this.items());F.notify(this,L)},events:[P,Q,l,B],options:{name:"ListView",style:"",type:"flat",autoBind:true,fixedHeaders:false,template:"#:data#",headerTemplate:'<span class="km-text">#:value#</span>',appendOnRefresh:false,loadMore:false,endlessScroll:false,scrollThreshold:30,pullToRefresh:false,messages:{loadMoreText:"Press to load more",pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"},pullOffset:140,filterable:false,virtualViewSize:null},refresh:function(){this._itemBinder.refresh()},reset:function(){this._itemBinder.reset()},setDataSource:function(Z){var Y=!Z;this.dataSource=J.create(Z);this.trigger("_dataSource",{dataSource:this.dataSource,empty:Y});if(this.options.autoBind&&!Y){this.items().remove();this.dataSource.fetch()}},destroy:function(){h.fn.destroy.call(this);F.destroy(this.element);this._userEvents.destroy();if(this._itemBinder){this._itemBinder.destroy()}if(this._headerFixer){this._headerFixer.destroy()}this.element.unwrap();delete this.element;delete this.wrapper;delete this._userEvents},items:function(){if(this.options.type==="group"){return this.element.find(".km-list").children()}else{return this.element.children().not(".km-load-more")}},scroller:function(){if(!this._scrollerInstance){this._scrollerInstance=this.element.closest(".km-scroll-wrapper").data("kendoMobileScroller")}return this._scrollerInstance},showLoading:function(){var Y=this.view();if(Y&&Y.loader){Y.loader.show()}},hideLoading:function(){var Y=this.view();if(Y&&Y.loader){Y.loader.hide()}},insertAt:function(ab,aa,Z){var Y=this;return Y._renderItems(ab,function(ac){if(aa===0){Y.element.prepend(ac)}else{if(aa===-1){Y.element.append(ac)}else{Y.items().eq(aa-1).after(ac)}}if(Z){for(var ad=0;ad<ac.length;ad++){Y.trigger(B,{item:ac.eq(ad),data:ab[ad],ns:L})}}})},append:function(Z,Y){return this.insertAt(Z,-1,Y)},prepend:function(Z,Y){return this.insertAt(Z,0,Y)},replace:function(Y){this.options.type="flat";this._angularItems("cleanup");F.destroy(this.element.children());this.element.empty();this._userEvents.cancel();this._style();return this.insertAt(Y,0)},replaceGrouped:function(Y){this.options.type="group";this._angularItems("cleanup");this.element.empty();var Z=E(F.render(this.groupTemplate,Y));this._enhanceItems(Z.children("ul").children("li"));this.element.append(Z);G.init(Z);this._style();this._angularItems("compile")},remove:function(Z){var Y=this.findByDataItem(Z);this.angular("cleanup",function(){return{elements:Y}});F.destroy(Y);Y.remove()},findByDataItem:function(Z){var aa=[];for(var Y=0,ab=Z.length;Y<ab;Y++){aa[Y]="[data-"+F.ns+"uid="+Z[Y].uid+"]"}return this.element.find(aa.join(","))},setDataItem:function(aa,Z){var Y=this,ab=function(ac){var ad=E(ac[0]);F.destroy(aa);Y.angular("cleanup",function(){return{elements:[E(aa)]}});E(aa).replaceWith(ad);Y.trigger(B,{item:ad,data:Z,ns:L})};return this._renderItems([Z],ab)[0]},updateSize:function(){this._size=this.getSize()},_renderItems:function(Z,aa){var Y=E(F.render(this.template,Z));aa(Y);this.angular("compile",function(){return{elements:Y,data:Z.map(function(ab){return{dataItem:ab}})}});G.init(Y);this._enhanceItems(Y);return Y},_dim:function(Y){this._toggle(Y,false)},_highlight:function(Y){this._toggle(Y,true)},_toggle:function(ad,Z){if(ad.which>1){return}var aa=E(ad.currentTarget),ab=aa.parent(),ae=e(aa,"role")||"",Y=!ae.match(X),ac=ad.isDefaultPrevented();if(Y){ab.toggleClass(i,Z&&!ac)}},_templates:function(){var Z=this.options.template,ac=this.options.headerTemplate,ab=' data-uid="#=arguments[0].uid || ""#"',aa={},Y={};if(typeof Z===f){aa.template=Z;Z="#=this.template(data)#"}this.template=R(F.template("<li"+ab+">"+Z+"</li>"),aa);Y.template=this.template;if(typeof ac===f){Y._headerTemplate=ac;ac="#=this._headerTemplate(data)#"}Y.headerTemplate=F.template(ac);this.groupTemplate=R(k,Y)},_click:function(ac){if(ac.event.which>1||ac.event.isDefaultPrevented()){return}var Y,aa=ac.target,ab=E(ac.event.target),ad=ab.closest(F.roleSelector("button","detailbutton","backbutton")),Z=F.widgetInstance(ad,L),ae=aa.attr(F.attr("uid"));if(ae){Y=this.dataSource.getByUid(ae)}if(this.trigger(P,{target:ab,item:aa,dataItem:Y,button:Z})){ac.preventDefault()}},_styleGroups:function(){var Y=this.element.children();Y.children("ul").addClass("km-list");Y.each(function(){var Z=E(this),aa=Z.contents().first();Z.addClass("km-group-container");if(!aa.is("ul")&&!aa.is("div."+U)){aa.wrap(y)}})},_style:function(){var Z=this.options,ab=Z.type==="group",aa=this.element,Y=Z.style==="inset";aa.addClass("km-listview").toggleClass("km-list",!ab).toggleClass("km-virtual-list",this.virtual).toggleClass("km-listinset",!ab&&Y).toggleClass("km-listgroup",ab&&!Y).toggleClass("km-listgroupinset",ab&&Y);if(!aa.parents(".km-listview")[0]){aa.closest(".km-content").toggleClass("km-insetcontent",Y)}if(ab){this._styleGroups()}this.trigger(p)},_enhanceItems:function(Y){Y.each(function(){var aa=E(this),ab,Z=false;aa.children().each(function(){ab=E(this);if(ab.is("a")){T(ab);Z=true}else{if(ab.is("label")){b(ab);Z=true}}});if(!Z){c(aa)}})}});L.plugin(O)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.mobile.navbar",["kendo.core"],a)}(function(){var a={id:"mobile.navbar",name:"NavBar",category:"mobile",description:"The Kendo mobile NavBar widget is used inside a mobile View or Layout Header element to display an application navigation bar.",depends:["core"]};(function(f,c){var g=window.kendo,b=g.mobile,i=b.ui,j=i.Widget;function h(m,l){var k=l.find("["+g.attr("align")+"="+m+"]");if(k[0]){return f('<div class="km-'+m+'item" />').append(k).prependTo(l)}}function d(l){var o=l.siblings(),n=!!l.children("ul")[0],m=!!o[0]&&f.trim(l.text())==="",k=!!(g.mobile.application&&g.mobile.application.element.is(".km-android"));l.prevAll().toggleClass("km-absolute",n);l.toggleClass("km-show-title",m);l.toggleClass("km-fill-title",m&&!f.trim(l.html()));l.toggleClass("km-no-title",n);l.toggleClass("km-hide-title",k&&!o.children().is(":visible"))}var e=j.extend({init:function(l,k){var m=this;j.fn.init.call(m,l,k);l=m.element;m.container().bind("show",f.proxy(this,"refresh"));l.addClass("km-navbar").wrapInner(f('<div class="km-view-title km-show-title" />'));m.leftElement=h("left",l);m.rightElement=h("right",l);m.centerElement=l.find(".km-view-title")},options:{name:"NavBar"},title:function(k){this.element.find(g.roleSelector("view-title")).text(k);d(this.centerElement)},refresh:function(l){var k=l.view;this.title(k.options.title)},destroy:function(){j.fn.destroy.call(this);g.destroy(this.element)}});i.plugin(e)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.mobile.scrollview",["kendo.fx","kendo.data","kendo.draganddrop"],a)}(function(){var a={id:"mobile.scrollview",name:"ScrollView",category:"mobile",description:"The Kendo Mobile ScrollView widget is used to scroll content wider than the device screen.",depends:["fx","data","draganddrop"]};(function(w,h){var y=window.kendo,z=y.mobile,D=z.ui,L=w.proxy,s=y.effects.Transition,A=y.ui.Pane,I=y.ui.PaneDimensions,d=D.DataBoundWidget,B=y.data.DataSource,P=y.data.Buffer,i=y.data.BatchBuffer,q=Math,r=q.abs,o=q.ceil,M=q.round,l=q.max,S=q.min,f=q.floor,v="change",e="changing",m="refresh",n="current-page",J="virtual-page",c="function",t="itemChange",p="cleanup",j=3,E=-1,G=0,x=1,u=-1,F=0,H=1;function N(U){return"k-"+U+" km-"+U}var K=y.Class.extend({init:function(U){var W=this,V=w("<ol class='"+N("pages")+"'/>");U.element.append(V);this._changeProxy=L(W,"_change");this._refreshProxy=L(W,"_refresh");U.bind(v,this._changeProxy);U.bind(m,this._refreshProxy);w.extend(W,{element:V,scrollView:U})},items:function(){return this.element.children()},_refresh:function(V){var W="";for(var U=0;U<V.pageCount;U++){W+="<li/>"}this.element.html(W);this.items().eq(V.page).addClass(N(n))},_change:function(U){this.items().removeClass(N(n)).eq(U.page).addClass(N(n))},destroy:function(){this.scrollView.unbind(v,this._changeProxy);this.scrollView.unbind(m,this._refreshProxy);this.element.remove()}});y.mobile.ui.ScrollViewPager=K;var g="transitionEnd",R="dragStart",k="dragEnd";var O=y.Observable.extend({init:function(X,ac){var Y=this;y.Observable.fn.init.call(this);this.element=X;this.container=X.parent();var ab,aa,Z,U,W,V;ab=new y.ui.Movable(Y.element);aa=new s({axis:"x",movable:ab,onEnd:function(){Y.trigger(g)}});Z=new y.UserEvents(X,{fastTap:true,start:function(ad){if(r(ad.x.velocity)*2>=r(ad.y.velocity)){Z.capture()}else{Z.cancel()}Y.trigger(R,ad);aa.cancel()},allowSelection:true,end:function(ad){Y.trigger(k,ad)}});U=new I({element:Y.element,container:Y.container});W=U.x;W.bind(v,function(){Y.trigger(v)});V=new A({dimensions:U,userEvents:Z,movable:ab,elastic:true});w.extend(Y,{duration:ac&&ac.duration||1,movable:ab,transition:aa,userEvents:Z,dimensions:U,dimension:W,pane:V});this.bind([g,R,k,v],ac)},size:function(){return{width:this.dimensions.x.getSize(),height:this.dimensions.y.getSize()}},total:function(){return this.dimension.getTotal()},offset:function(){return -this.movable.x},updateDimension:function(){this.dimension.update(true)},refresh:function(){this.dimensions.refresh()},moveTo:function(U){this.movable.moveAxis("x",-U)},transitionTo:function(W,V,U){if(U){this.moveTo(-W)}else{this.transition.moveTo({location:W,duration:this.duration,ease:V})}}});y.mobile.ui.ScrollViewElasticPane=O;var T=y.Observable.extend({init:function(V,X,U){var W=this;y.Observable.fn.init.call(this);W.element=V;W.pane=X;W._getPages();this.page=0;this.pageSize=U.pageSize||1;this.contentHeight=U.contentHeight;this.enablePager=U.enablePager;this.pagerOverlay=U.pagerOverlay},scrollTo:function(V,U){this.page=V;this.pane.transitionTo(-V*this.pane.size().width,s.easeOutExpo,U)},paneMoved:function(ad,ae,ac,V){var Z=this,W=Z.pane,U=W.size().width*Z.pageSize,ab=M,Y=ae?s.easeOutBack:s.easeOutExpo,X,aa;if(ad===u){ab=o}else{if(ad===H){ab=f}}aa=ab(W.offset()/U);X=l(Z.minSnap,S(-aa*U,Z.maxSnap));if(aa!=Z.page){if(ac&&ac({currentPage:Z.page,nextPage:aa})){X=-Z.page*W.size().width}}W.transitionTo(X,Y,V)},updatePage:function(){var V=this.pane,U=M(V.offset()/V.size().width);if(U!=this.page){this.page=U;return true}return false},forcePageUpdate:function(){return this.updatePage()},resizeTo:function(V){var Y=this.pane,W=V.width;this.pageElements.width(W);if(this.contentHeight==="100%"){var X=this.element.parent().height();if(this.enablePager===true){var U=this.element.parent().find("ol.km-pages");if(!this.pagerOverlay&&U.length){X-=y._outerHeight(U,true)}}this.element.css("height",X);this.pageElements.css("height",X)}Y.updateDimension();if(!this._paged){this.page=f(Y.offset()/W)}this.scrollTo(this.page,true);this.pageCount=o(Y.total()/W);this.minSnap=-(this.pageCount-1)*W;this.maxSnap=0},_getPages:function(){this.pageElements=this.element.find(y.roleSelector("page"));this._paged=this.pageElements.length>0}});y.mobile.ui.ScrollViewContent=T;var b=y.Observable.extend({init:function(V,X,U){var W=this;y.Observable.fn.init.call(this);W.element=V;W.pane=X;W.options=U;W._templates();W.page=U.page||0;W.pages=[];W._initPages();W.resizeTo(W.pane.size());W.pane.dimension.forceEnabled()},setDataSource:function(U){this.dataSource=B.create(U);this._buffer();this._pendingPageRefresh=false;this._pendingWidgetRefresh=false},_viewShow:function(){var U=this;if(U._pendingWidgetRefresh){setTimeout(function(){U._resetPages()},0);U._pendingWidgetRefresh=false}},_buffer:function(){var U=this.options.itemsPerPage;if(this.buffer){this.buffer.destroy()}if(U>1){this.buffer=new i(this.dataSource,U)}else{this.buffer=new P(this.dataSource,U*3)}this._resizeProxy=L(this,"_onResize");this._resetProxy=L(this,"_onReset");this._endReachedProxy=L(this,"_onEndReached");this.buffer.bind({resize:this._resizeProxy,reset:this._resetProxy,endreached:this._endReachedProxy})},_templates:function(){var V=this.options.template,U=this.options.emptyTemplate,X={},W={};if(typeof V===c){X.template=V;V="#=this.template(data)#"}this.template=L(y.template(V),X);if(typeof U===c){W.emptyTemplate=U;U="#=this.emptyTemplate(data)#"}this.emptyTemplate=L(y.template(U),W)},_initPages:function(){var U=this.pages,W=this.element,X;for(var V=0;V<j;V++){X=new Q(W);U.push(X)}this.pane.updateDimension()},resizeTo:function(X){var U=this.pages,Z=this.pane;for(var W=0;W<U.length;W++){U[W].setWidth(X.width)}if(this.options.contentHeight==="auto"){this.element.css("height",this.pages[1].element.height())}else{if(this.options.contentHeight==="100%"){var Y=this.element.parent().height();if(this.options.enablePager===true){var V=this.element.parent().find("ol.km-pages");if(!this.options.pagerOverlay&&V.length){Y-=y._outerHeight(V,true)}}this.element.css("height",Y);U[0].element.css("height",Y);U[1].element.css("height",Y);U[2].element.css("height",Y)}}Z.updateDimension();this._repositionPages();this.width=X.width},scrollTo:function(W){var U=this.buffer,V;U.syncDataSource();V=U.at(W);if(!V){return}this._updatePagesContent(W);this.page=W},paneMoved:function(af,ag,ae,W){var ab=this,X=ab.pane,V=X.size().width,Z=X.offset(),aa=Math.abs(Z)>=V/3,Y=ag?y.effects.Transition.easeOutBack:y.effects.Transition.easeOutExpo,U=ab.page+2>ab.buffer.total(),ac,ad=0;if(af===H){if(ab.page!==0){ad=-1}}else{if(af===u&&!U){ad=1}else{if(Z>0&&(aa&&!U)){ad=1}else{if(Z<0&&aa){if(ab.page!==0){ad=-1}}}}}ac=ab.page;if(ad){ac=ad>0?ac+1:ac-1}if(ae&&ae({currentPage:ab.page,nextPage:ac})){ad=0}if(ad===0){ab._cancelMove(Y,W)}else{if(ad===-1){ab._moveBackward(W)}else{if(ad===1){ab._moveForward(W)}}}},updatePage:function(){var U=this.pages;if(this.pane.offset()===0){return false}if(this.pane.offset()>0){U.push(this.pages.shift());this.page++;this.setPageContent(U[2],this.page+1)}else{U.unshift(this.pages.pop());this.page--;this.setPageContent(U[0],this.page-1)}this._repositionPages();this._resetMovable();return true},forcePageUpdate:function(){var V=this.pane.offset(),U=this.pane.size().width*3/4;if(r(V)>U){return this.updatePage()}return false},_resetMovable:function(){this.pane.moveTo(0)},_moveForward:function(U){this.pane.transitionTo(-this.width,y.effects.Transition.easeOutExpo,U)},_moveBackward:function(U){this.pane.transitionTo(this.width,y.effects.Transition.easeOutExpo,U)},_cancelMove:function(V,U){this.pane.transitionTo(0,V,U)},_resetPages:function(){this.page=this.options.page||0;this._updatePagesContent(this.page);this._repositionPages();this.trigger("reset")},_onResize:function(){this.pageCount=o(this.dataSource.total()/this.options.itemsPerPage);if(this._pendingPageRefresh){this._updatePagesContent(this.page);this._pendingPageRefresh=false}this.trigger("resize")},_onReset:function(){this.pageCount=o(this.dataSource.total()/this.options.itemsPerPage);this._resetPages()},_onEndReached:function(){this._pendingPageRefresh=true},_repositionPages:function(){var U=this.pages;U[0].position(E);U[1].position(G);U[2].position(x)},_updatePagesContent:function(W){var U=this.pages,V=W||0;this.setPageContent(U[0],V-1);this.setPageContent(U[1],V);this.setPageContent(U[2],V+1)},setPageContent:function(Z,X){var W=this.buffer,Y=this.template,U=this.emptyTemplate,V=null;if(X>=0){V=W.at(X);if(w.isArray(V)&&!V.length){V=null}}this.trigger(p,{item:Z.element});if(V!==null){Z.content(Y(V))}else{Z.content(U({}))}y.mobile.init(Z.element);this.trigger(t,{item:Z.element,data:V,ns:y.mobile.ui})}});y.mobile.ui.VirtualScrollViewContent=b;var Q=y.Class.extend({init:function(U){this.element=w("<div class='"+N(J)+"'></div>");this.width=U.width();this.element.width(this.width);U.append(this.element)},content:function(U){this.element.html(U)},position:function(U){this.element.css("transform","translate3d("+this.width*U+"px, 0, 0)")},setWidth:function(U){this.width=U;this.element.width(U)}});y.mobile.ui.VirtualPage=Q;var C=d.extend({init:function(W,V){var Y=this;d.fn.init.call(Y,W,V);V=Y.options;W=Y.element;y.stripWhitespace(W[0]);W.wrapInner("<div/>").addClass("k-widget "+N("scrollview"));if(this.options.enablePager){this.pager=new K(this);if(this.options.pagerOverlay){W.addClass(N("scrollview-overlay"))}}Y.inner=W.children().first();Y.page=0;Y.inner.css("height",V.contentHeight);Y.pane=new O(Y.inner,{duration:this.options.duration,transitionEnd:L(this,"_transitionEnd"),dragStart:L(this,"_dragStart"),dragEnd:L(this,"_dragEnd"),change:L(this,m)});Y.bind("resize",function(){Y.pane.refresh()});Y.page=V.page;var Z=this.inner.children().length===0;var X=Z?new b(Y.inner,Y.pane,V):new T(Y.inner,Y.pane,V);X.page=Y.page;X.bind("reset",function(){this._pendingPageRefresh=false;Y._syncWithContent();Y.trigger(m,{pageCount:X.pageCount,page:X.page})});X.bind("resize",function(){Y.trigger(m,{pageCount:X.pageCount,page:X.page})});X.bind(t,function(aa){Y.trigger(t,aa);Y.angular("compile",function(){return{elements:aa.item,data:[{dataItem:aa.data}]}})});X.bind(p,function(aa){Y.angular("cleanup",function(){return{elements:aa.item}})});Y._content=X;Y.setDataSource(V.dataSource);var U=Y.container();if(U.nullObject){Y.viewInit();Y.viewShow()}else{U.bind("show",L(this,"viewShow")).bind("init",L(this,"viewInit"))}},options:{name:"ScrollView",page:0,duration:400,velocityThreshold:0.8,contentHeight:"auto",pageSize:1,itemsPerPage:1,bounceVelocityThreshold:1.6,enablePager:true,pagerOverlay:false,autoBind:true,template:"",emptyTemplate:""},events:[e,v,m],destroy:function(){d.fn.destroy.call(this);y.destroy(this.element)},viewInit:function(){if(this.options.autoBind){this._content.scrollTo(this._content.page,true)}},viewShow:function(){this.pane.refresh()},refresh:function(){var U=this._content;U.resizeTo(this.pane.size());this.page=U.page;this.trigger(m,{pageCount:U.pageCount,page:U.page})},content:function(U){this.element.children().first().html(U);this._content._getPages();this.pane.refresh()},value:function(U){var V=this.dataSource;if(U){this.scrollTo(V.indexOf(U),true)}else{return V.at(this.page)}},scrollTo:function(V,U){this._content.scrollTo(V,U);this._syncWithContent()},prev:function(){var V=this,U=V.page-1;if(V._content instanceof b){V._content.paneMoved(H,h,function(W){return V.trigger(e,W)})}else{if(U>-1){V.scrollTo(U)}}},next:function(){var V=this,U=V.page+1;if(V._content instanceof b){V._content.paneMoved(u,h,function(W){return V.trigger(e,W)})}else{if(U<V._content.pageCount){V.scrollTo(U)}}},setDataSource:function(V){if(!(this._content instanceof b)){return}var U=!V;this.dataSource=B.create(V);this._content.setDataSource(this.dataSource);if(this.options.autoBind&&!U){this.dataSource.fetch()}},items:function(){return this.element.find(".km-"+J)},_syncWithContent:function(){var U=this._content.pages,V=this._content.buffer,X,W;this.page=this._content.page;X=V?V.at(this.page):h;if(!(X instanceof Array)){X=[X]}W=U?U[1].element:h;this.trigger(v,{page:this.page,element:W,data:X})},_dragStart:function(){if(this._content.forcePageUpdate()){this._syncWithContent()}},_dragEnd:function(Z){var X=this,W=Z.x.velocity,V=this.options.velocityThreshold,U=F,Y=r(W)>this.options.bounceVelocityThreshold;if(W>V){U=H}else{if(W<-V){U=u}}this._content.paneMoved(U,Y,function(aa){return X.trigger(e,aa)})},_transitionEnd:function(){if(this._content.updatePage()){this._syncWithContent()}}});D.plugin(C)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.mobile.switch",["kendo.fx","kendo.userevents"],a)}(function(){var a={id:"mobile.switch",name:"Switch",category:"mobile",description:"The mobile Switch widget is used to display two exclusive choices.",depends:["fx","userevents"]};(function(f,h){var q=window.kendo,p=q.mobile.ui,b=q._outerWidth,d=p.Widget,l=q.support,o="change",m="switch-on",k="switch-off",c="margin-left",u="state-active",i="state-disabled",t="disabled",g=l.transitions.css+"transform",s=f.proxy;function e(v){return"k-"+v+" km-"+v}function n(x,v,w){return Math.max(v,Math.min(w,x))}var j='<span class="'+e("switch")+" "+e("widget")+'">        <span class="'+e("switch-wrapper")+'">            <span class="'+e("switch-background")+'"></span>        </span>         <span class="'+e("switch-container")+'">            <span class="'+e("switch-handle")+'">                 <span class="'+e("switch-label-on")+'">{0}</span>                 <span class="'+e("switch-label-off")+'">{1}</span>             </span>         </span>    </span>';var r=d.extend({init:function(w,v){var y=this,x;d.fn.init.call(y,w,v);v=y.options;y.wrapper=f(q.format(j,v.onLabel,v.offLabel));y.handle=y.wrapper.find(".km-switch-handle");y.background=y.wrapper.find(".km-switch-background");y.wrapper.insertBefore(y.element).prepend(y.element);y._drag();y.origin=parseInt(y.background.css(c),10);y.constrain=0;y.snapPoint=0;w=y.element[0];w.type="checkbox";y._animateBackground=true;x=y.options.checked;if(x===null){x=w.checked}y.check(x);y.options.enable=y.options.enable&&!y.element.attr(t);y.enable(y.options.enable);y.refresh();q.notify(y,q.mobile.ui)},refresh:function(){var w=this,v=b(w.handle,true);w.width=w.wrapper.width();w.constrain=w.width-v;w.snapPoint=w.constrain/2;if(typeof w.origin!="number"){w.origin=parseInt(w.background.css(c),10)}w.background.data("origin",w.origin);w.check(w.element[0].checked)},events:[o],options:{name:"Switch",onLabel:"on",offLabel:"off",checked:null,enable:true},check:function(v){var x=this,w=x.element[0];if(v===h){return w.checked}x._position(v?x.constrain:0);w.checked=v;x.wrapper.toggleClass(e(m),v).toggleClass(e(k),!v)},value:function(){return this.check.apply(this,arguments)},destroy:function(){d.fn.destroy.call(this);this.userEvents.destroy()},toggle:function(){var v=this;v.check(!v.element[0].checked)},enable:function(v){var w=this.element,x=this.wrapper;if(typeof v=="undefined"){v=true}this.options.enable=v;if(v){w.removeAttr(t)}else{w.attr(t,t)}x.toggleClass(e(i),!v)},_resize:function(){this.refresh()},_move:function(w){var v=this;w.preventDefault();v._position(n(v.position+w.x.delta,0,v.width-b(v.handle,true)))},_position:function(v){var w=this;w.position=v;w.handle.css(g,"translatex("+v+"px)");if(w._animateBackground){w.background.css(c,w.origin+v)}},_start:function(){if(!this.options.enable){this.userEvents.cancel()}else{this.userEvents.capture();this.handle.addClass(e(u))}},_stop:function(){var v=this;v.handle.removeClass(e(u));v._toggle(v.position>v.snapPoint)},_toggle:function(x){var w=this,z=w.handle,v=w.element[0],y=v.checked,A=q.mobile.application&&q.mobile.application.os.wp?100:200,B;w.wrapper.toggleClass(e(m),x).toggleClass(e(k),!x);w.position=B=x*w.constrain;if(w._animateBackground){w.background.kendoStop(true,true).kendoAnimate({effects:"slideMargin",offset:B,reset:true,reverse:!x,axis:"left",duration:A})}z.kendoStop(true,true).kendoAnimate({effects:"slideTo",duration:A,offset:B+"px,0",reset:true,complete:function(){if(y!==x){v.checked=x;w.trigger(o,{checked:x})}}})},_drag:function(){var v=this;v.userEvents=new q.UserEvents(v.wrapper,{fastTap:true,tap:function(){if(v.options.enable){v._toggle(!v.element[0].checked)}},start:s(v._start,v),move:s(v._move,v),end:s(v._stop,v)})}});p.plugin(r)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.mobile.tabstrip",["kendo.core"],a)}(function(){var a={id:"mobile.tabstrip",name:"TabStrip",category:"mobile",description:"The mobile TabStrip widget is used inside a mobile view or layout footer element to display an application-wide group of navigation buttons.",depends:["core"]};(function(c,b){var g=window.kendo,i=g.mobile.ui,j=i.Widget,f="km-state-active",h="select";function e(k){return c('<span class="km-badge">'+k+"</span>")}var d=j.extend({init:function(l,k){var m=this;j.fn.init.call(m,l,k);m.container().bind("show",c.proxy(this,"refresh"));m.element.addClass("km-tabstrip").find("a").each(m._buildButton).eq(m.options.selectedIndex).addClass(f);m.element.on("down","a","_release")},events:[h],switchTo:function(l){var m=this.element.find("a"),n,p,k=0,o=m.length;if(isNaN(l)){for(;k<o;k++){n=m[k];p=n.href.replace(/(\#.+)(\?.+)$/,"$1");if(p.indexOf(l,p.length-l.length)!==-1){this._setActiveItem(c(n));return true}}}else{this._setActiveItem(m.eq(l));return true}return false},switchByFullUrl:function(k){var l;l=this.element.find("a[href$='"+k+"']");this._setActiveItem(l)},clear:function(){this.currentItem().removeClass(f)},currentItem:function(){return this.element.children("."+f)},badge:function(l,n){var m=this.element,k;if(!isNaN(l)){l=m.children().get(l)}l=m.find(l);k=c(l.find(".km-badge")[0]||e(n).insertAfter(l.children(".km-icon")));if(n||n===0){k.html(n);return this}if(n===false){k.empty().remove();return this}return k.html()},_release:function(m){if(m.which>1){return}var l=this,k=c(m.currentTarget);if(k[0]===l.currentItem()[0]){return}if(l.trigger(h,{item:k})){m.preventDefault()}else{l._setActiveItem(k)}},_setActiveItem:function(k){if(!k[0]){return}this.clear();k.addClass(f)},_buildButton:function(){var m=c(this),n=g.attrValue(m,"icon"),l=g.attrValue(m,"badge"),o=m.find("img"),k=c('<span class="km-icon"/>');m.addClass("km-button").attr(g.attr("role"),"tab").contents().not(o).wrapAll('<span class="km-text"/>');if(o[0]){o.addClass("km-image").prependTo(m)}else{m.prepend(k);if(n){k.addClass("km-"+n);if(l||l===0){e(l).insertAfter(k)}}}},refresh:function(l){var k=l.view.id;if(k&&!this.switchTo(l.view.id)){this.switchTo(k)}},options:{name:"TabStrip",selectedIndex:0,enable:true}});i.plugin(d)}(window.kendo.jQuery));return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.mobile",["kendo.core","kendo.fx","kendo.data.odata","kendo.data.xml","kendo.data","kendo.data.signalr","kendo.binder","kendo.validator","kendo.router","kendo.view","kendo.userevents","kendo.draganddrop","kendo.popup","kendo.touch","kendo.mobile.popover","kendo.mobile.loader","kendo.mobile.scroller","kendo.mobile.shim","kendo.mobile.view","kendo.mobile.modalview","kendo.mobile.drawer","kendo.mobile.splitview","kendo.mobile.pane","kendo.mobile.application","kendo.mobile.actionsheet","kendo.mobile.button","kendo.mobile.buttongroup","kendo.mobile.collapsible","kendo.mobile.listview","kendo.mobile.navbar","kendo.mobile.scrollview","kendo.mobile.switch","kendo.mobile.tabstrip","kendo.angular"],a)}(function(){return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));(function(a,b){b("kendo.all",["kendo.web","kendo.dataviz","kendo.mobile","kendo.drawing","kendo.dom"],a)}(function(){return window.kendo},typeof define=="function"&&define.amd?define:function(b,a,c){(c||a)()}));
